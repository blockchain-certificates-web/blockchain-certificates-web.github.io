!function(){"use strict";var e="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e,t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function p(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var r;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&n&&((r=e)&&DataView.prototype.isPrototypeOf(r))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(p)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=d(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=u(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[u(e)]},h.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},h.prototype.set=function(e,t){this.map[u(e)]=c(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),y.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},m.call(v.prototype),m.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var x=e.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function S(t,r){return new Promise((function(i,s){var a=new v(t,r);if(a.signal&&a.signal.aborted)return s(new x("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var e,t,r={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new w(n,r))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){s(new x("Aborted","AbortError"))}),0)},u.open(a.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(n?u.responseType="blob":o&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof h?a.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(r.headers).forEach((function(e){u.setRequestHeader(e,c(r.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",l)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,e.fetch||(e.fetch=S,e.Headers=h,e.Request=v,e.Response=w),Uint8Array.prototype.fill||(Uint8Array.prototype.fill=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=n>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),s=arguments[2],a=void 0===s?r:s>>0,u=a<0?Math.max(r+a,0):Math.min(a,r);o<u;)t[o]=e,o++;return t})
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */,window.JSCompiler_renameProperty=function(e,t){return e};
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
let E=0;const k=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let r=E++;return function(n){let i=n.__mixinSet;if(i&&i[r])return n;let o=t,s=o.get(n);if(!s){s=e(n),o.set(n,s);let t=Object.create(s.__mixinSet||i||null);t[r]=!0,s.__mixinSet=t}return s}};
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
let I=0,A=0,T=[],P=0,O=!1,C=document.createTextNode("");new window.MutationObserver((function(){O=!1;const e=T.length;for(let t=0;t<e;t++){let e=T[t];if(e)try{e()}catch(e){setTimeout((()=>{throw e}))}}T.splice(0,e),A+=e})).observe(C,{characterData:!0});const M={run:e=>(O||(O=!0,C.textContent=P++),T.push(e),I++),cancel(e){const t=e-A;if(t>=0){if(!T[t])throw new Error("invalid async handle: "+e);T[t]=null}}},N=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e,R=M,L=k((e=>class extends e{static createProperties(e){const t=this.prototype;for(let r in e)r in t||t._createPropertyAccessor(r)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,r){let n=this.__data[e],i=this._shouldPropertyChange(e,t,n);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=n),this.__data[e]=t,this.__dataPending[e]=t),i}_isPropertyPending(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,R.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,r=this.__dataOld;this._shouldPropertiesChange(e,t,r)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,r)),this.__dataCounter--}_shouldPropertiesChange(e,t,r){return Boolean(t)}_propertiesChanged(e,t,r){}_shouldPropertyChange(e,t,r){return r!==t&&(r==r||t==t)}attributeChangedCallback(e,t,r,n){t!==r&&this._attributeToProperty(e,r),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,r,n)}_attributeToProperty(e,t,r){if(!this.__serializing){const n=this.__dataAttributes,i=n&&n[e]||e;this[i]=this._deserializeValue(t,r||this.constructor.typeForProperty(i))}}_propertyToAttribute(e,t,r){this.__serializing=!0,r=arguments.length<3?this[e]:r,this._valueToNodeAttribute(this,r,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,r){const n=this._serializeValue(t);"class"!==r&&"name"!==r&&"slot"!==r||(e=N(e)),void 0===n?e.removeAttribute(r):e.setAttribute(r,n)}_serializeValue(e){return"boolean"==typeof e?e?"":void 0:null!=e?e.toString():void 0}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}));
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */const j=k((e=>{const t=L(e);function r(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof i?t:null}function n(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const r=e.properties;r&&(t=
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
function(e){const t={};for(let r in e){const n=e[r];t[r]="function"==typeof n?{type:n}:n}return t}(r))}e.__ownProperties=t}return e.__ownProperties}class i extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const e=this._properties;this.__observedAttributes=e?Object.keys(e).map((e=>this.prototype._addPropertyToAttributeMap(e))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=r(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=n(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=r(this);this.__properties=Object.assign({},e&&e._properties,n(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return i})),D=new Map;
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */class B{constructor(e,t,r,n=Q){this.strings=e,this.values=t,this.type=r,this.partCallback=n}getHTML(){const e=this.strings.length-1;let t="",r=!0;for(let n=0;n<e;n++){const e=this.strings[n];t+=e;const i=H(e);r=i>-1?i<e.length:r,t+=r?F:U}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const U=`{{lit-${String(Math.random()).slice(2)}}}`,F=`\x3c!--${U}--\x3e`,z=new RegExp(`${U}|${F}`),V=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;function H(e){const t=e.lastIndexOf(">");return e.indexOf("<",t+1)>-1?e.length:t}class K{constructor(e,t,r,n,i){this.type=e,this.index=t,this.name=r,this.rawName=n,this.strings=i}}const q=e=>-1!==e.index;class ${constructor(e,t){this.parts=[],this.element=t;const r=this.element.content,n=document.createTreeWalker(r,133,null,!1);let i=-1,o=0;const s=[];let a,u;for(;n.nextNode();){i++,a=u;const t=u=n.currentNode;if(1===t.nodeType){if(!t.hasAttributes())continue;const r=t.attributes;let n=0;for(let e=0;e<r.length;e++)r[e].value.indexOf(U)>=0&&n++;for(;n-- >0;){const n=e.strings[o],s=V.exec(n)[1],a=r.getNamedItem(s),u=a.value.split(z);this.parts.push(new K("attribute",i,a.name,s,u)),t.removeAttribute(a.name),o+=u.length-1}}else if(3===t.nodeType){const e=t.nodeValue;if(e.indexOf(U)<0)continue;const r=t.parentNode,n=e.split(z),a=n.length-1;o+=a;for(let e=0;e<a;e++)r.insertBefore(""===n[e]?document.createComment(""):document.createTextNode(n[e]),t),this.parts.push(new K("node",i++));r.insertBefore(""===n[a]?document.createComment(""):document.createTextNode(n[a]),t),s.push(t)}else if(8===t.nodeType&&t.nodeValue===U){const e=t.parentNode,r=t.previousSibling;null===r||r!==a||r.nodeType!==Node.TEXT_NODE?e.insertBefore(document.createComment(""),t):i--,this.parts.push(new K("node",i++)),s.push(t),null===t.nextSibling?e.insertBefore(document.createComment(""),t):i--,u=a,o++}}for(const e of s)e.parentNode.removeChild(e)}}const W=(e,t)=>G(t)?(t=t(e),J):null===t?void 0:t,G=e=>"function"==typeof e&&!0===e.__litDirective,J={},X=e=>null===e||!("object"==typeof e||"function"==typeof e);class Y{constructor(e,t,r,n){this.instance=e,this.element=t,this.name=r,this.strings=n,this.size=n.length-1,this._previousValues=[]}_interpolate(e,t){const r=this.strings,n=r.length-1;let i="";for(let o=0;o<n;o++){i+=r[o];const n=W(this,e[t+o]);if(n&&n!==J&&(Array.isArray(n)||"string"!=typeof n&&n[Symbol.iterator]))for(const e of n)i+=e;else i+=n}return i+r[n]}_equalToPreviousValues(e,t){for(let r=t;r<t+this.size;r++)if(this._previousValues[r]!==e[r]||!X(e[r]))return!1;return!0}setValue(e,t){if(this._equalToPreviousValues(e,t))return;const r=this.strings;let n;2===r.length&&""===r[0]&&""===r[1]?(n=W(this,e[t]),Array.isArray(n)&&(n=n.join(""))):n=this._interpolate(e,t),n!==J&&this.element.setAttribute(this.name,n),this._previousValues=e}}class Z{constructor(e,t,r){this.instance=e,this.startNode=t,this.endNode=r,this._previousValue=void 0}setValue(e){if((e=W(this,e))!==J)if(X(e)){if(e===this._previousValue)return;this._setText(e)}else e instanceof B?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0!==e.then?this._setPromise(e):this._setText(e)}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNode(e){this._previousValue!==e&&(this.clear(),this._insert(e),this._previousValue=e)}_setText(e){const t=this.startNode.nextSibling;e=void 0===e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(document.createTextNode(e)),this._previousValue=e}_setTemplateResult(e){const t=this.instance._getTemplate(e);let r;this._previousValue&&this._previousValue.template===t?r=this._previousValue:(r=new ee(t,this.instance._partCallback,this.instance._getTemplate),this._setNode(r._clone()),this._previousValue=r),r.update(e.values)}_setIterable(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const t=this._previousValue;let r=0;for(const n of e){let e=t[r];if(void 0===e){let n=this.startNode;if(r>0){n=t[r-1].endNode=document.createTextNode(""),this._insert(n)}e=new Z(this.instance,n,this.endNode),t.push(e)}e.setValue(n),r++}if(0===r)this.clear(),this._previousValue=void 0;else if(r<t.length){const e=t[r-1];t.length=r,this.clear(e.endNode.previousSibling),e.endNode=this.endNode}}_setPromise(e){this._previousValue=e,e.then((t=>{this._previousValue===e&&this.setValue(t)}))}clear(e=this.startNode){te(this.startNode.parentNode,e.nextSibling,this.endNode)}}const Q=(e,t,r)=>{if("attribute"===t.type)return new Y(e,r,t.name,t.strings);if("node"===t.type)return new Z(e,r,r.nextSibling);throw new Error(`Unknown part type ${t.type}`)};class ee{constructor(e,t,r){this._parts=[],this.template=e,this._partCallback=t,this._getTemplate=r}update(e){let t=0;for(const r of this._parts)r?void 0===r.size?(r.setValue(e[t]),t++):(r.setValue(e,t),t+=r.size):t++}_clone(){const e=this.template.element.content.cloneNode(!0),t=this.template.parts;if(t.length>0){const r=document.createTreeWalker(e,133,null,!1);let n=-1;for(let e=0;e<t.length;e++){const i=t[e],o=q(i);if(o)for(;n<i.index;)n++,r.nextNode();this._parts.push(o?this._partCallback(this,i,r.currentNode):void 0)}}return e}}const te=(e,t,r=null)=>{let n=t;for(;n!==r;){const t=n.nextSibling;e.removeChild(n),n=t}},re=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT;
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */const ne=e=>{let t=1;const r=document.createTreeWalker(e,re,null,!1);for(;r.nextNode();)t++;return t},ie=(e,t=-1)=>{for(let r=t+1;r<e.length;r++){const t=e[r];if(q(t))return r}return-1};
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
const oe=(e,t)=>`${e}--${t}`,se=["html","svg"];function ae(e){se.forEach((t=>{const r=D.get(oe(t,e));void 0!==r&&r.forEach((e=>{const{element:{content:t}}=e,r=t.querySelectorAll("style");!function(e,t){const{element:{content:r},parts:n}=e,i=document.createTreeWalker(r,re,null,!1);let o=0,s=n[0],a=-1,u=0;const c=[];let l=null;for(;i.nextNode();){a++;const e=i.currentNode;for(e.previousSibling===l&&(l=null),t.has(e)&&(c.push(e),null===l&&(l=e)),null!==l&&u++;void 0!==s&&s.index===a;)s.index=null!==l?-1:s.index-u,s=n[++o]}c.forEach((e=>e.parentNode.removeChild(e)))}(e,new Set(Array.from(r)))}))}))}const ue=new Set,ce=(e,t,r)=>{if(!ue.has(r)){ue.add(r);const n=document.createElement("template");if(Array.from(e.querySelectorAll("style")).forEach((e=>{n.content.appendChild(e)})),window.ShadyCSS.prepareTemplateStyles(n,r),ae(r),window.ShadyCSS.nativeShadow){const r=n.content.querySelector("style");null!==r&&(e.insertBefore(r,e.firstChild),function(e,t,r=null){const{element:{content:n},parts:i}=e;if(null==r)return void n.appendChild(t);const o=document.createTreeWalker(n,re,null,!1);let s=ie(i),a=0,u=-1;for(;o.nextNode();)for(u++,o.currentNode===r&&(r.parentNode.insertBefore(t,r),a=ne(t));-1!==s&&i[s].index===u;){if(a>0){for(;-1!==s;)i[s].index+=a,s=ie(i,s);return}s=ie(i,s)}}(t,r.cloneNode(!0),t.element.content.firstChild))}}};function le(e,t,r){const n=(e=>t=>{const r=oe(t.type,e);let n=D.get(r);void 0===n&&(n=new Map,D.set(r,n));let i=n.get(t.strings);if(void 0===i){const r=t.getTemplateElement();"object"==typeof window.ShadyCSS&&window.ShadyCSS.prepareTemplateDom(r,e),i=new $(t,r),n.set(t.strings,i)}return i})(r),i=n(e);let o=t.__templateInstance;if(void 0!==o&&o.template===i&&o._partCallback===e.partCallback)return void o.update(e.values);o=new ee(i,e.partCallback,n),t.__templateInstance=o;const s=o._clone();o.update(e.values);const a=t instanceof ShadowRoot?t.host:void 0;void 0!==a&&"object"==typeof window.ShadyCSS&&(ce(s,i,r),window.ShadyCSS.styleElement(a)),te(t,t.firstChild),t.appendChild(s)}
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */const he=(e,...t)=>new B(e,t,"html",fe),fe=(e,t,r)=>{if("attribute"===t.type){if("on-"===t.rawName.substr(0,3)){const n=t.rawName.slice(3);return new ge(e,r,n)}const n=t.name.substr(t.name.length-1);if("$"===n){const n=t.name.slice(0,-1);return new Y(e,r,n,t.strings)}if("?"===n){const n=t.name.slice(0,-1);return new de(e,r,n,t.strings)}return new pe(e,r,t.rawName,t.strings)}return Q(e,t,r)};class de extends Y{setValue(e,t){const r=this.strings;if(2!==r.length||""!==r[0]||""!==r[1])throw new Error("boolean attributes can only contain a single expression");{const r=W(this,e[t]);if(r===J)return;r?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}}class pe extends Y{setValue(e,t){const r=this.strings;let n;this._equalToPreviousValues(e,t)||(n=2===r.length&&""===r[0]&&""===r[1]?W(this,e[t]):this._interpolate(e,t),n!==J&&(this.element[this.name]=n),this._previousValues=e)}}class ge{constructor(e,t,r){this.instance=e,this.element=t,this.eventName=r}setValue(e){const t=W(this,e);t!==this._listener&&(null==t?this.element.removeEventListener(this.eventName,this):null==this._listener&&this.element.addEventListener(this.eventName,this),this._listener=t)}handleEvent(e){"function"==typeof this._listener?this._listener.call(this.element,e):"function"==typeof this._listener.handleEvent&&this._listener.handleEvent(e)}}class me extends(j(HTMLElement)){constructor(){super(...arguments),this.__renderComplete=null,this.__resolveRenderComplete=null,this.__isInvalid=!1,this.__isChanging=!1}ready(){this._root=this._createRoot(),super.ready(),this._firstRendered()}_firstRendered(){}_createRoot(){return this.attachShadow({mode:"open"})}_shouldPropertiesChange(e,t,r){const n=this._shouldRender(e,t,r);return!n&&this.__resolveRenderComplete&&this.__resolveRenderComplete(!1),n}_shouldRender(e,t,r){return!0}_propertiesChanged(e,t,r){super._propertiesChanged(e,t,r);const n=this._render(e);n&&void 0!==this._root&&this._applyRender(n,this._root),this._didRender(e,t,r),this.__resolveRenderComplete&&this.__resolveRenderComplete(!0)}_flushProperties(){this.__isChanging=!0,this.__isInvalid=!1,super._flushProperties(),this.__isChanging=!1}_shouldPropertyChange(e,t,r){const n=super._shouldPropertyChange(e,t,r);return n&&this.__isChanging&&console.trace(`Setting properties in response to other properties changing considered harmful. Setting '${e}' from '${this._getProperty(e)}' to '${t}'.`),n}_render(e){throw new Error("_render() not implemented")}_applyRender(e,t){le(e,t,this.localName)}_didRender(e,t,r){}_requestRender(){this._invalidateProperties()}_invalidateProperties(){this.__isInvalid=!0,super._invalidateProperties()}get renderComplete(){return this.__renderComplete||(this.__renderComplete=new Promise((e=>{this.__resolveRenderComplete=t=>{this.__resolveRenderComplete=this.__renderComplete=null,e(t)}})),!this.__isInvalid&&this.__resolveRenderComplete&&Promise.resolve().then((()=>this.__resolveRenderComplete(!1)))),this.__renderComplete}}
/**
  @license
  Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */const ye=e=>t=>class extends t{connectedCallback(){this.__storeUnsubscribe=e.subscribe((()=>this._stateChanged(e.getState()))),this._stateChanged(e.getState()),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){this.__storeUnsubscribe(),super.disconnectedCallback&&super.disconnectedCallback()}_stateChanged(e){throw new Error("_stateChanged() not implemented")}};function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var xe="function"==typeof Symbol&&Symbol.observable||"@@observable",Se=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ee={INIT:"@@redux/INIT"+Se(),REPLACE:"@@redux/REPLACE"+Se(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Se()}};function ke(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ie(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(_e(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(_e(1));return r(Ie)(e,t)}if("function"!=typeof e)throw new Error(_e(2));var i=e,o=t,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){if(u)throw new Error(_e(3));return o}function h(e){if("function"!=typeof e)throw new Error(_e(4));if(u)throw new Error(_e(5));var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error(_e(6));t=!1,c();var r=a.indexOf(e);a.splice(r,1),s=null}}}function f(e){if(!ke(e))throw new Error(_e(7));if(void 0===e.type)throw new Error(_e(8));if(u)throw new Error(_e(9));try{u=!0,o=i(o,e)}finally{u=!1}for(var t=s=a,r=0;r<t.length;r++){(0,t[r])()}return e}function d(e){if("function"!=typeof e)throw new Error(_e(10));i=e,f({type:Ee.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(_e(11));function r(){e.next&&e.next(l())}return r(),{unsubscribe:t(r)}}})[xe]=function(){return this},e}return f({type:Ee.INIT}),(n={dispatch:f,subscribe:h,getState:l,replaceReducer:d})[xe]=p,n}function Ae(e,t){return function(){return t(e.apply(this,arguments))}}function Te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Pe(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var Oe=Pe();Oe.withExtraArgument=Pe;var Ce=["N","E","A","D"];function Me(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Ne(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function Re(e,t,r){Re.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function Le(e,t){Le.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function je(e,t){je.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function De(e,t,r){De.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function Be(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function Ue(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function Fe(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}function ze(e){var t=0,r=Ue(e);if("array"===r)return e.forEach((function(e){t+=ze(e)})),t+Fe("[type: array, hash: "+t+"]");if("object"===r){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i="[ type: object, key: "+n+", value hash: "+ze(e[n])+"]";t+=Fe(i)}return t}return t+Fe("[ type: "+r+" ; value: "+e+"]")}function Ve(e,t,r,n,i,o,s,a){r=r||[],s=s||[];var u=(i=i||[]).slice(0);if(null!=o){if(n){if("function"==typeof n&&n(u,o))return;if("object"==typeof n){if(n.prefilter&&n.prefilter(u,o))return;if(n.normalize){var c=n.normalize(u,o,e,t);c&&(e=c[0],t=c[1])}}}u.push(o)}"regexp"===Ue(e)&&"regexp"===Ue(t)&&(e=e.toString(),t=t.toString());var l,h,f,d,p=typeof e,g=typeof t,m="undefined"!==p||s&&s.length>0&&s[s.length-1].lhs&&Object.getOwnPropertyDescriptor(s[s.length-1].lhs,o),y="undefined"!==g||s&&s.length>0&&s[s.length-1].rhs&&Object.getOwnPropertyDescriptor(s[s.length-1].rhs,o);if(!m&&y)r.push(new Le(u,t));else if(!y&&m)r.push(new je(u,e));else if(Ue(e)!==Ue(t))r.push(new Re(u,e,t));else if("date"===Ue(e)&&e-t!=0)r.push(new Re(u,e,t));else if("object"===p&&null!==e&&null!==t){for(l=s.length-1;l>-1;--l)if(s[l].lhs===e){d=!0;break}if(d)e!==t&&r.push(new Re(u,e,t));else{if(s.push({lhs:e,rhs:t}),Array.isArray(e)){for(a&&(e.sort((function(e,t){return ze(e)-ze(t)})),t.sort((function(e,t){return ze(e)-ze(t)}))),l=t.length-1,h=e.length-1;l>h;)r.push(new De(u,l,new Le(void 0,t[l--])));for(;h>l;)r.push(new De(u,h,new je(void 0,e[h--])));for(;l>=0;--l)Ve(e[l],t[l],r,n,u,l,s,a)}else{var v=Object.keys(e),b=Object.keys(t);for(l=0;l<v.length;++l)f=v[l],(d=b.indexOf(f))>=0?(Ve(e[f],t[f],r,n,u,f,s,a),b[d]=null):Ve(e[f],void 0,r,n,u,f,s,a);for(l=0;l<b.length;++l)(f=b[l])&&Ve(void 0,t[f],r,n,u,f,s,a)}s.length=s.length-1}}else e!==t&&("number"===p&&isNaN(e)&&isNaN(t)||r.push(new Re(u,e,t)))}function He(e,t,r,n,i){var o=[];if(Ve(e,t,o,n,null,null,null,i),r)for(var s=0;s<o.length;++s)r(o[s]);return o}function Ke(e,t,r,n){var i=He(e,t,n?function(e){e&&n.push(e)}:void 0,r);return n||(i.length?i:void 0)}function qe(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":qe(i[r.path[n]],r.index,r.item);break;case"D":delete i[r.path[n]];break;case"E":case"N":i[r.path[n]]=r.rhs}}else switch(r.kind){case"A":qe(e[t],r.index,r.item);break;case"D":e=Be(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function $e(e,t,r){if(void 0===r&&t&&~Ce.indexOf(t.kind)&&(r=t),e&&r&&r.kind){for(var n=e,i=-1,o=r.path?r.path.length-1:0;++i<o;)void 0===n[r.path[i]]&&(n[r.path[i]]=void 0!==r.path[i+1]&&"number"==typeof r.path[i+1]?[]:{}),n=n[r.path[i]];switch(r.kind){case"A":r.path&&void 0===n[r.path[i]]&&(n[r.path[i]]=[]),qe(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}function We(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":We(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}else switch(r.kind){case"A":We(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=Be(e,t)}return e}Me(Re,Ne),Me(Le,Ne),Me(je,Ne),Me(De,Ne),Object.defineProperties(Ke,{diff:{value:Ke,enumerable:!0},orderIndependentDiff:{value:function(e,t,r,n){var i=He(e,t,n?function(e){e&&n.push(e)}:void 0,r,!0);return n||(i.length?i:void 0)},enumerable:!0},observableDiff:{value:He,enumerable:!0},orderIndependentObservableDiff:{value:function(e,t,r,n,i,o,s){return Ve(e,t,r,n,i,o,s,!0)},enumerable:!0},orderIndepHash:{value:ze,enumerable:!0},applyDiff:{value:function(e,t,r){if(e&&t){He(e,t,(function(n){r&&!r(e,t,n)||$e(e,t,n)}))}},enumerable:!0},applyChange:{value:$e,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,i=e,o=r.path.length-1;for(n=0;n<o;n++)void 0===i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case"A":We(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}});const Ge="AUTO_VERIFY",Je="INITIALIZE",Xe="UPDATE_CERTIFICATE_DEFINITION",Ye="RESET_CERTIFICATE_DEFINITION",Ze="UPDATE_CERTIFICATE_URL",Qe="VALIDATE_URL_INPUT",et="CLEAR_VERIFIED_STEPS",tt="STEP_VERIFIED",rt="UPDATE_PARENT_STEP_STATUS",nt="UPDATE_VERIFICATION_STATUS",it="UPDATE_FINAL_STEP",ot="SET_ERROR_MESSAGE",st="SHOW_VERIFICATION_MODAL";const at={get:(e,t)=>{const r=t in e?e[t]:null;return r||console.warn("the service does not exist",t),r}},ut=["text","image","signature","variable"];const ct="?format=json";var lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ht(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var ft={},dt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},pt=[],gt=[],mt="undefined"!=typeof Uint8Array?Uint8Array:Array,yt=!1;function vt(){yt=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)pt[t]=e[t],gt[e.charCodeAt(t)]=t;gt["-".charCodeAt(0)]=62,gt["_".charCodeAt(0)]=63}function bt(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(pt[(i=n)>>18&63]+pt[i>>12&63]+pt[i>>6&63]+pt[63&i]);return o.join("")}function wt(e){var t;yt||vt();for(var r=e.length,n=r%3,i="",o=[],s=16383,a=0,u=r-n;a<u;a+=s)o.push(bt(e,a,a+s>u?u:a+s));return 1===n?(t=e[r-1],i+=pt[t>>2],i+=pt[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=pt[t>>10],i+=pt[t>>4&63],i+=pt[t<<2&63],i+="="),o.push(i),o.join("")}function _t(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)}function xt(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}var St={}.toString,Et=Array.isArray||function(e){return"[object Array]"==St.call(e)};Tt.TYPED_ARRAY_SUPPORT=void 0===dt.TYPED_ARRAY_SUPPORT||dt.TYPED_ARRAY_SUPPORT;var kt=It();function It(){return Tt.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function At(e,t){if(It()<t)throw new RangeError("Invalid typed array length");return Tt.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Tt.prototype:(null===e&&(e=new Tt(t)),e.length=t),e}function Tt(e,t,r){if(!(Tt.TYPED_ARRAY_SUPPORT||this instanceof Tt))return new Tt(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ct(this,e)}return Pt(this,e,t,r)}function Pt(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Tt.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Tt.prototype:e=Mt(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Tt.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Lt(t,r),i=(e=At(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(Rt(t)){var r=0|Nt(t.length);return 0===(e=At(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?At(e,0):Mt(e,t);if("Buffer"===t.type&&Et(t.data))return Mt(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ot(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ct(e,t){if(Ot(t),e=At(e,t<0?0:0|Nt(t)),!Tt.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Mt(e,t){var r=t.length<0?0:0|Nt(t.length);e=At(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function Nt(e){if(e>=It())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+It().toString(16)+" bytes");return 0|e}function Rt(e){return!(null==e||!e._isBuffer)}function Lt(e,t){if(Rt(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ar(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ur(e).length;default:if(n)return ar(e).length;t=(""+t).toLowerCase(),n=!0}}function jt(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Xt(this,t,r);case"utf8":case"utf-8":return Wt(this,t,r);case"ascii":return Gt(this,t,r);case"latin1":case"binary":return Jt(this,t,r);case"base64":return $t(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Dt(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Bt(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Tt.from(t,n)),Rt(t))return 0===t.length?-1:Ut(e,t,r,n,i);if("number"==typeof t)return t&=255,Tt.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Ut(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Ut(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function Ft(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function zt(e,t,r,n){return cr(ar(t,e.length-r),e,r,n)}function Vt(e,t,r,n){return cr(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Ht(e,t,r,n){return Vt(e,t,r,n)}function Kt(e,t,r,n){return cr(ur(t),e,r,n)}function qt(e,t,r,n){return cr(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function $t(e,t,r){return 0===t&&r===e.length?wt(e):wt(e.slice(t,r))}function Wt(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function Gt(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Jt(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Xt(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=sr(e[o]);return i}function Yt(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function Zt(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Qt(e,t,r,n,i,o){if(!Rt(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function er(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function tr(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function rr(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function nr(e,t,r,n,i){return i||rr(e,0,r,4),xt(e,t,r,n,23,4),r+4}function ir(e,t,r,n,i){return i||rr(e,0,r,8),xt(e,t,r,n,52,8),r+8}Tt.poolSize=8192,Tt._augment=function(e){return e.__proto__=Tt.prototype,e},Tt.from=function(e,t,r){return Pt(null,e,t,r)},Tt.TYPED_ARRAY_SUPPORT&&(Tt.prototype.__proto__=Uint8Array.prototype,Tt.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Tt[Symbol.species]),Tt.alloc=function(e,t,r){return function(e,t,r,n){return Ot(t),t<=0?At(e,t):void 0!==r?"string"==typeof n?At(e,t).fill(r,n):At(e,t).fill(r):At(e,t)}(null,e,t,r)},Tt.allocUnsafe=function(e){return Ct(null,e)},Tt.allocUnsafeSlow=function(e){return Ct(null,e)},Tt.isBuffer=lr,Tt.compare=function(e,t){if(!Rt(e)||!Rt(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Tt.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Tt.concat=function(e,t){if(!Et(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Tt.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Tt.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!Rt(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Tt.byteLength=Lt,Tt.prototype._isBuffer=!0,Tt.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Dt(this,t,t+1);return this},Tt.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Dt(this,t,t+3),Dt(this,t+1,t+2);return this},Tt.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Dt(this,t,t+7),Dt(this,t+1,t+6),Dt(this,t+2,t+5),Dt(this,t+3,t+4);return this},Tt.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Wt(this,0,e):jt.apply(this,arguments)},Tt.prototype.equals=function(e){if(!Rt(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Tt.compare(this,e)},Tt.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Tt.prototype.compare=function(e,t,r,n,i){if(!Rt(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Tt.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Tt.prototype.indexOf=function(e,t,r){return Bt(this,e,t,r,!0)},Tt.prototype.lastIndexOf=function(e,t,r){return Bt(this,e,t,r,!1)},Tt.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Ft(this,e,t,r);case"utf8":case"utf-8":return zt(this,e,t,r);case"ascii":return Vt(this,e,t,r);case"latin1":case"binary":return Ht(this,e,t,r);case"base64":return Kt(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qt(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Tt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Tt.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Tt.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Tt.prototype;else{var i=t-e;r=new Tt(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},Tt.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Zt(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},Tt.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Zt(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Tt.prototype.readUInt8=function(e,t){return t||Zt(e,1,this.length),this[e]},Tt.prototype.readUInt16LE=function(e,t){return t||Zt(e,2,this.length),this[e]|this[e+1]<<8},Tt.prototype.readUInt16BE=function(e,t){return t||Zt(e,2,this.length),this[e]<<8|this[e+1]},Tt.prototype.readUInt32LE=function(e,t){return t||Zt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Tt.prototype.readUInt32BE=function(e,t){return t||Zt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Tt.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Zt(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},Tt.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Zt(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Tt.prototype.readInt8=function(e,t){return t||Zt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Tt.prototype.readInt16LE=function(e,t){t||Zt(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Tt.prototype.readInt16BE=function(e,t){t||Zt(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Tt.prototype.readInt32LE=function(e,t){return t||Zt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Tt.prototype.readInt32BE=function(e,t){return t||Zt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Tt.prototype.readFloatLE=function(e,t){return t||Zt(e,4,this.length),_t(this,e,!0,23,4)},Tt.prototype.readFloatBE=function(e,t){return t||Zt(e,4,this.length),_t(this,e,!1,23,4)},Tt.prototype.readDoubleLE=function(e,t){return t||Zt(e,8,this.length),_t(this,e,!0,52,8)},Tt.prototype.readDoubleBE=function(e,t){return t||Zt(e,8,this.length),_t(this,e,!1,52,8)},Tt.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Qt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},Tt.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Qt(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},Tt.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,1,255,0),Tt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Tt.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,2,65535,0),Tt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):er(this,e,t,!0),t+2},Tt.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,2,65535,0),Tt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):er(this,e,t,!1),t+2},Tt.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,4,4294967295,0),Tt.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):tr(this,e,t,!0),t+4},Tt.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,4,4294967295,0),Tt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tr(this,e,t,!1),t+4},Tt.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Qt(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},Tt.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Qt(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},Tt.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,1,127,-128),Tt.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Tt.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,2,32767,-32768),Tt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):er(this,e,t,!0),t+2},Tt.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,2,32767,-32768),Tt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):er(this,e,t,!1),t+2},Tt.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,4,2147483647,-2147483648),Tt.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):tr(this,e,t,!0),t+4},Tt.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Qt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Tt.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):tr(this,e,t,!1),t+4},Tt.prototype.writeFloatLE=function(e,t,r){return nr(this,e,t,!0,r)},Tt.prototype.writeFloatBE=function(e,t,r){return nr(this,e,t,!1,r)},Tt.prototype.writeDoubleLE=function(e,t,r){return ir(this,e,t,!0,r)},Tt.prototype.writeDoubleBE=function(e,t,r){return ir(this,e,t,!1,r)},Tt.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!Tt.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},Tt.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Tt.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=Rt(e)?e:ar(new Tt(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var or=/[^+\/0-9A-Za-z-_]/g;function sr(e){return e<16?"0"+e.toString(16):e.toString(16)}function ar(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function ur(e){return function(e){var t,r,n,i,o,s;yt||vt();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new mt(3*a/4-o),n=o>0?a-4:a;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=gt[e.charCodeAt(t)]<<18|gt[e.charCodeAt(t+1)]<<12|gt[e.charCodeAt(t+2)]<<6|gt[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=gt[e.charCodeAt(t)]<<2|gt[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===o&&(i=gt[e.charCodeAt(t)]<<10|gt[e.charCodeAt(t+1)]<<4|gt[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(or,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function cr(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function lr(e){return null!=e&&(!!e._isBuffer||hr(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&hr(e.slice(0,0))}(e))}function hr(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var fr=ht(Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:kt,Buffer:Tt,SlowBuffer:function(e){return+e!=e&&(e=0),Tt.alloc(+e)},isBuffer:lr})),dr={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},write:function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}},pr={exports:{}};!function(e){!function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,s="[BigNumber Error] ",a=s+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,d=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function m(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function y(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return p(e.e/c)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function w(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,_,x,S,E,k,I,A,T,P,O=K.prototype={constructor:K,toString:null,valueOf:null},C=new K(1),M=20,N=4,R=-7,L=21,j=-1e7,D=1e7,B=!1,U=1,F=0,z={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function K(e,t){var r,i,s,u,h,f,d,p,g=this;if(!(g instanceof K))return new K(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>D?g.c=g.e=null:e.e<j?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,h=e;h>=10;h/=10,u++);return void(u>D?g.c=g.e=null:(g.e=u,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return x(g,p,f);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(u<0&&(u=h),u+=+p.slice(h+1),p=p.substring(0,h)):u<0&&(u=p.length)}else{if(y(t,2,V.length,"Base"),10==t&&H)return G(g=new K(e),M+g.e+1,N);if(p=String(e),f="number"==typeof e){if(0*e!=0)return x(g,p,f,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,K.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=V.slice(0,t),u=h=0,d=p.length;h<d;h++)if(r.indexOf(i=p.charAt(h))<0){if("."==i){if(h>u){u=d;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,h=-1,u=0;continue}return x(g,String(e),f,t)}f=!1,(u=(p=_(p,t,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(h=0;48===p.charCodeAt(h);h++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(h,++d)){if(d-=h,f&&K.DEBUG&&d>15&&(e>l||e!==o(e)))throw Error(a+g.s*e);if((u=u-h-1)>D)g.c=g.e=null;else if(u<j)g.c=[g.e=0];else{if(g.e=u,g.c=[],h=(u+1)%c,u<0&&(h+=c),h<d){for(h&&g.c.push(+p.slice(0,h)),d-=c;h<d;)g.c.push(+p.slice(h,h+=c));h=c-(p=p.slice(h)).length}else h-=d;for(;h--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function q(e,t,r,n){var i,o,s,a,u;if(null==r?r=N:y(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)u=g(e.c),u=1==n||2==n&&(s<=R||s>=L)?b(u,s):w(u,s,"0");else if(o=(e=G(new K(e),t,r)).e,a=(u=g(e.c)).length,1==n||2==n&&(t<=o||o<=R)){for(;a<t;u+="0",a++);u=b(u,o)}else if(t-=s,u=w(u,o,"0"),o+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-a)>0)for(o+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function $(e,t){for(var r,n=1,i=new K(e[0]);n<e.length;n++){if(!(r=new K(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function W(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*c-1)>D?e.c=e.e=null:r<j?e.c=[e.e=0]:(e.e=r,e.c=t),e}function G(e,t,r,n){var s,a,l,f,d,p,g,m=e.c,y=h;if(m){e:{for(s=1,f=m[0];f>=10;f/=10,s++);if((a=t-s)<0)a+=c,l=t,g=(d=m[p=0])/y[s-l-1]%10|0;else if((p=i((a+1)/c))>=m.length){if(!n)break e;for(;m.length<=p;m.push(0));d=g=0,s=1,l=(a%=c)-c+1}else{for(d=f=m[p],s=1;f>=10;f/=10,s++);g=(l=(a%=c)-c+s)<0?0:d/y[s-l-1]%10|0}if(n=n||t<0||null!=m[p+1]||(l<0?d:d%y[s-l-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(a>0?l>0?d/y[s-l]:0:m[p-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=y[(c-t%c)%c],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=p,f=1,p--):(m.length=p+1,f=y[c-a],m[p]=l>0?o(d/y[s-l]%y[l])*f:0),n)for(;;){if(0==p){for(a=1,l=m[0];l>=10;l/=10,a++);for(l=m[0]+=f,f=1;l>=10;l/=10,f++);a!=f&&(e.e++,m[0]==u&&(m[0]=1));break}if(m[p]+=f,m[p]!=u)break;m[p--]=0,f=1}for(a=m.length;0===m[--a];m.pop());}e.e>D?e.c=e.e=null:e.e<j&&(e.c=[e.e=0])}return e}function J(e){var t,r=e.e;return null===r?e.toString():(t=g(e.c),t=r<=R||r>=L?b(t,r):w(t,r,"0"),e.s<0?"-"+t:t)}return K.clone=e,K.ROUND_UP=0,K.ROUND_DOWN=1,K.ROUND_CEIL=2,K.ROUND_FLOOR=3,K.ROUND_HALF_UP=4,K.ROUND_HALF_DOWN=5,K.ROUND_HALF_EVEN=6,K.ROUND_HALF_CEIL=7,K.ROUND_HALF_FLOOR=8,K.EUCLID=9,K.config=K.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(r=e[t],0,d,t),M=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(r=e[t],0,8,t),N=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(y(r[0],-d,0,t),y(r[1],0,d,t),R=r[0],L=r[1]):(y(r,-d,d,t),R=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)y(r[0],-d,-1,t),y(r[1],1,d,t),j=r[0],D=r[1];else{if(y(r,-d,d,t),!r)throw Error(s+t+" cannot be zero: "+r);j=-(D=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(s+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(s+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(r=e[t],0,9,t),U=r),e.hasOwnProperty(t="POW_PRECISION")&&(y(r=e[t],0,d,t),F=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(s+t+" not an object: "+r);z=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(s+t+" invalid: "+r);H="0123456789"==r.slice(0,10),V=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:N,EXPONENTIAL_AT:[R,L],RANGE:[j,D],CRYPTO:B,MODULO_MODE:U,POW_PRECISION:F,FORMAT:z,ALPHABET:V}},K.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!K.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-d&&i<=d&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},K.maximum=K.max=function(){return $(arguments,O.lt)},K.minimum=K.min=function(){return $(arguments,O.gt)},K.random=(S=9007199254740992,E=Math.random()*S&2097151?function(){return o(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,a,u,l=0,f=[],p=new K(C);if(null==e?e=M:y(e,0,d),a=i(e/c),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)(u=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(f.push(u%1e14),l+=2);l=a/2}else{if(!crypto.randomBytes)throw B=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(a*=7);l<a;)(u=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(u%1e14),l+=7);l=a/7}if(!B)for(;l<a;)(u=E())<9e15&&(f[l++]=u%1e14);for(a=f[--l],e%=c,a&&e&&(u=h[c-e],f[l]=o(a/u)*u);0===f[l];f.pop(),l--);if(l<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=c);for(l=1,u=f[0];u>=10;u/=10,l++);l<c&&(n-=c-l)}return p.e=n,p.c=f,p}),K.sum=function(){for(var e=1,t=arguments,r=new K(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var u,c,l,h,f,d,p,m,y=n.indexOf("."),v=M,b=N;for(y>=0&&(h=F,F=0,n=n.replace(".",""),d=(m=new K(i)).pow(n.length-y),F=h,m.c=t(w(g(d.c),d.e,"0"),10,o,e),m.e=m.c.length),l=h=(p=t(n,i,o,a?(u=V,e):(u=e,V))).length;0==p[--h];p.pop());if(!p[0])return u.charAt(0);if(y<0?--l:(d.c=p,d.e=l,d.s=s,p=(d=r(d,m,v,b,o)).c,f=d.r,l=d.e),y=p[c=l+v+1],h=o/2,f=f||c<0||null!=p[c+1],f=b<4?(null!=y||f)&&(0==b||b==(d.s<0?3:2)):y>h||y==h&&(4==b||f||6==b&&1&p[c-1]||b==(d.s<0?8:7)),c<1||!p[0])n=f?w(u.charAt(1),-v,u.charAt(0)):u.charAt(0);else{if(p.length=c,f)for(--o;++p[--c]>o;)p[c]=0,c||(++l,p=[1].concat(p));for(h=p.length;!p[--h];);for(y=0,n="";y<=h;n+=u.charAt(p[y++]));n=w(n,l,u.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,o,s,a=0,u=e.length,c=t%f,l=t/f|0;for(e=e.slice();u--;)a=((i=c*(o=e[u]%f)+(n=l*o+(s=e[u]/f|0)*c)%f*f+a)/r|0)+(n/f|0)+l*s,e[u]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,a,l){var h,f,d,g,m,y,v,b,w,_,x,S,E,k,I,A,T,P=n.s==i.s?1:-1,O=n.c,C=i.c;if(!(O&&O[0]&&C&&C[0]))return new K(n.s&&i.s&&(O?!C||O[0]!=C[0]:C)?O&&0==O[0]||!C?0*P:P/0:NaN);for(w=(b=new K(P)).c=[],P=s+(f=n.e-i.e)+1,l||(l=u,f=p(n.e/c)-p(i.e/c),P=P/c|0),d=0;C[d]==(O[d]||0);d++);if(C[d]>(O[d]||0)&&f--,P<0)w.push(1),g=!0;else{for(k=O.length,A=C.length,d=0,P+=2,(m=o(l/(C[0]+1)))>1&&(C=e(C,m,l),O=e(O,m,l),A=C.length,k=O.length),E=A,x=(_=O.slice(0,A)).length;x<A;_[x++]=0);T=C.slice(),T=[0].concat(T),I=C[0],C[1]>=l/2&&I++;do{if(m=0,(h=t(C,_,A,x))<0){if(S=_[0],A!=x&&(S=S*l+(_[1]||0)),(m=o(S/I))>1)for(m>=l&&(m=l-1),v=(y=e(C,m,l)).length,x=_.length;1==t(y,_,v,x);)m--,r(y,A<v?T:C,v,l),v=y.length,h=1;else 0==m&&(h=m=1),v=(y=C.slice()).length;if(v<x&&(y=[0].concat(y)),r(_,y,x,l),x=_.length,-1==h)for(;t(C,_,A,x)<1;)m++,r(_,A<x?T:C,x,l),x=_.length}else 0===h&&(m++,_=[0]);w[d++]=m,_[0]?_[x++]=O[E]||0:(_=[O[E]],x=1)}while((E++<k||null!=_[0])&&P--);g=null!=_[0],w[0]||w.splice(0,1)}if(l==u){for(d=1,P=w[0];P>=10;P/=10,d++);G(b,s+(b.e=d+f*c-1)+1,a,g)}else b.e=f,b.r=+g;return b}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,I=/^([^.]+)\.$/,A=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(e,t,r,n){var i,o=r?t:t.replace(P,"");if(T.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(k,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,o=o.replace(I,"$1").replace(A,"0.$1")),t!=o))return new K(o,i);if(K.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},O.absoluteValue=O.abs=function(){var e=new K(this);return e.s<0&&(e.s=1),e},O.comparedTo=function(e,t){return m(this,new K(e,t))},O.decimalPlaces=O.dp=function(e,t){var r,n,i,o=this;if(null!=e)return y(e,0,d),null==t?t=N:y(t,0,8),G(new K(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-p(this.e/c))*c,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},O.dividedBy=O.div=function(e,t){return r(this,new K(e,t),M,N)},O.dividedToIntegerBy=O.idiv=function(e,t){return r(this,new K(e,t),0,1)},O.exponentiatedBy=O.pow=function(e,t){var r,n,a,u,l,h,f,d,p=this;if((e=new K(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+J(e));if(null!=t&&(t=new K(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new K(Math.pow(+J(p),l?2-v(e):+J(e))),t?d.mod(t):d;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new K(NaN);(n=!h&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return u=p.s<0&&v(e)?-0:0,p.e>-1&&(u=1/u),new K(h?1/u:u);F&&(u=i(F/c+2))}for(l?(r=new K(.5),h&&(e.s=1),f=v(e)):f=(a=Math.abs(+J(e)))%2,d=new K(C);;){if(f){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):n&&(d=d.mod(t))}if(a){if(0===(a=o(a/2)))break;f=a%2}else if(G(e=e.times(r),e.e+1,1),e.e>14)f=v(e);else{if(0==(a=+J(e)))break;f=a%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):n&&(p=p.mod(t))}return n?d:(h&&(d=C.div(d)),t?d.mod(t):u?G(d,F,N,void 0):d)},O.integerValue=function(e){var t=new K(this);return null==e?e=N:y(e,0,8),G(t,t.e+1,e)},O.isEqualTo=O.eq=function(e,t){return 0===m(this,new K(e,t))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(e,t){return m(this,new K(e,t))>0},O.isGreaterThanOrEqualTo=O.gte=function(e,t){return 1===(t=m(this,new K(e,t)))||0===t},O.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},O.isLessThan=O.lt=function(e,t){return m(this,new K(e,t))<0},O.isLessThanOrEqualTo=O.lte=function(e,t){return-1===(t=m(this,new K(e,t)))||0===t},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new K(e,t)).s,!a||!t)return new K(NaN);if(a!=t)return e.s=-t,s.plus(e);var l=s.e/c,h=e.e/c,f=s.c,d=e.c;if(!l||!h){if(!f||!d)return f?(e.s=-t,e):new K(d?s:NaN);if(!f[0]||!d[0])return d[0]?(e.s=-t,e):new K(f[0]?s:3==N?-0:0)}if(l=p(l),h=p(h),f=f.slice(),a=l-h){for((o=a<0)?(a=-a,i=f):(h=l,i=d),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=f.length)<(t=d.length))?a:t,a=t=0;t<n;t++)if(f[t]!=d[t]){o=f[t]<d[t];break}if(o&&(i=f,f=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=f.length))>0)for(;t--;f[r++]=0);for(t=u-1;n>a;){if(f[--n]<d[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=u}f[n]-=d[n]}for(;0==f[0];f.splice(0,1),--h);return f[0]?W(e,f,h):(e.s=3==N?-1:1,e.c=[e.e=0],e)},O.modulo=O.mod=function(e,t){var n,i,o=this;return e=new K(e,t),!o.c||!e.s||e.c&&!e.c[0]?new K(NaN):!e.c||o.c&&!o.c[0]?new K(o):(9==U?(i=e.s,e.s=1,n=r(o,e,0,3),e.s=i,n.s*=i):n=r(o,e,0,U),(e=o.minus(n.times(e))).c[0]||1!=U||(e.s=o.s),e)},O.multipliedBy=O.times=function(e,t){var r,n,i,o,s,a,l,h,d,g,m,y,v,b,w,_=this,x=_.c,S=(e=new K(e,t)).c;if(!(x&&S&&x[0]&&S[0]))return!_.s||!e.s||x&&!x[0]&&!S||S&&!S[0]&&!x?e.c=e.e=e.s=null:(e.s*=_.s,x&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=p(_.e/c)+p(e.e/c),e.s*=_.s,(l=x.length)<(g=S.length)&&(v=x,x=S,S=v,i=l,l=g,g=i),i=l+g,v=[];i--;v.push(0));for(b=u,w=f,i=g;--i>=0;){for(r=0,m=S[i]%w,y=S[i]/w|0,o=i+(s=l);o>i;)r=((h=m*(h=x[--s]%w)+(a=y*h+(d=x[s]/w|0)*m)%w*w+v[o]+r)/b|0)+(a/w|0)+y*d,v[o--]=h%b;v[o]=r}return r?++n:v.splice(0,1),W(e,v,n)},O.negated=function(){var e=new K(this);return e.s=-e.s||null,e},O.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new K(e,t)).s,!i||!t)return new K(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/c,s=e.e/c,a=n.c,l=e.c;if(!o||!s){if(!a||!l)return new K(i/0);if(!a[0]||!l[0])return l[0]?e:new K(a[0]?n:0*i)}if(o=p(o),s=p(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++s),W(e,a,s)},O.precision=O.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return y(e,1,d),null==t?t=N:y(t,0,8),G(new K(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*c+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},O.shiftedBy=function(e){return y(e,-9007199254740991,l),this.times("1e"+e)},O.squareRoot=O.sqrt=function(){var e,t,n,i,o,s=this,a=s.c,u=s.s,c=s.e,l=M+4,h=new K("0.5");if(1!==u||!a||!a[0])return new K(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+J(s)))||u==1/0?(((t=g(a)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=p((c+1)/2)-(c<0||c%2),n=new K(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new K(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(o=n,n=h.times(o.plus(r(s,o,l,1))),g(o.c).slice(0,u)===(t=g(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(n,n.e+M+2,1),e=!n.times(n).eq(s));break}if(!i&&(G(o,o.e+M+2,0),o.times(o).eq(s))){n=o;break}l+=4,u+=4,i=1}return G(n,n.e+M+1,N,e)},O.toExponential=function(e,t){return null!=e&&(y(e,0,d),e++),q(this,e,t,1)},O.toFixed=function(e,t){return null!=e&&(y(e,0,d),e=e+this.e+1),q(this,e,t)},O.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=z;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,a=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",h=a[0],f=a[1],d=i.s<0,p=d?h.slice(1):h,g=p.length;if(c&&(o=u,u=c,c=o,g-=o),u>0&&g>0){for(o=g%u||u,h=p.substr(0,o);o<g;o+=u)h+=l+p.substr(o,u);c>0&&(h+=l+p.slice(o)),d&&(h="-"+h)}n=f?h+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):h}return(r.prefix||"")+n+(r.suffix||"")},O.toFraction=function(e){var t,n,i,o,a,u,l,f,d,p,m,y,v=this,b=v.c;if(null!=e&&(!(l=new K(e)).isInteger()&&(l.c||1!==l.s)||l.lt(C)))throw Error(s+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+J(l));if(!b)return new K(v);for(t=new K(C),d=n=new K(C),i=f=new K(C),y=g(b),a=t.e=y.length-v.e-1,t.c[0]=h[(u=a%c)<0?c+u:u],e=!e||l.comparedTo(t)>0?a>0?t:d:l,u=D,D=1/0,l=new K(y),f.c[0]=0;p=r(l,t,0,1),1!=(o=n.plus(p.times(i))).comparedTo(e);)n=i,i=o,d=f.plus(p.times(o=d)),f=o,t=l.minus(p.times(o=t)),l=o;return o=r(e.minus(n),i,0,1),f=f.plus(o.times(d)),n=n.plus(o.times(i)),f.s=d.s=v.s,m=r(d,i,a*=2,N).minus(v).abs().comparedTo(r(f,n,a,N).minus(v).abs())<1?[d,i]:[f,n],D=u,m},O.toNumber=function(){return+J(this)},O.toPrecision=function(e,t){return null!=e&&y(e,1,d),q(this,e,t,2)},O.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=R||i>=L?b(g(r.c),i):w(g(r.c),i,"0"):10===e&&H?t=w(g((r=G(new K(r),M+i+1,N)).c),r.e,"0"):(y(e,2,V.length,"Base"),t=_(w(g(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},O.valueOf=O.toJSON=function(){return J(this)},O._isBigNumber=!0,null!=t&&K.set(t),K}(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=r)}(lt)}(pr);var gr={},mr={};const yr=pr.exports.BigNumber;mr.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},mr.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},mr.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},mr.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},mr.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},mr.SHIFT32=Math.pow(2,32),mr.SHIFT16=Math.pow(2,16),mr.MAX_SAFE_HIGH=2097151,mr.NEG_ONE=new yr(-1),mr.TEN=new yr(10),mr.TWO=new yr(2),mr.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},function(e){const{Buffer:t}=fr,r=pr.exports.BigNumber,n=mr,i=n.SHIFT32,o=n.SHIFT16;function s(e){return e<16?"0"+e.toString(16):e.toString(16)}e.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?NaN:1/0):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},e.arrayBufferToBignumber=function(e){const t=e.byteLength;let n="";for(let r=0;r<t;r++)n+=s(e[r]);return new r(n,16)},e.buildMap=e=>{const t=new Map,r=Object.keys(e),n=r.length;for(let i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},e.buildInt32=(e,t)=>e*o+t,e.buildInt64=(t,n,o,s)=>{const a=e.buildInt32(t,n),u=e.buildInt32(o,s);return a>2097151?new r(a).times(i).plus(u):a*i+u},e.writeHalf=function(e,r){const n=t.allocUnsafe(4);n.writeFloatBE(r,0);const i=n.readUInt32BE(0);if(0!=(8191&i))return!1;var o=i>>16&32768;const s=i>>23&255,a=8388607&i;if(s>=113&&s<=142)o+=(s-112<<10)+(a>>13);else{if(!(s>=103&&s<113))return!1;if(a&(1<<126-s)-1)return!1;o+=a+8388608>>126-s}return e.writeUInt16BE(o,0),!0},e.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},e.isNegativeZero=e=>0===e&&1/e<0,e.nextPowerOf2=e=>{let t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}(gr);const vr=mr,br=vr.MT,wr=vr.SIMPLE,_r=vr.SYMS;class xr{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,br.SIMPLE_FLOAT)}static isSimple(e){return e instanceof xr}static decode(e,t){switch(null==t&&(t=!0),e){case wr.FALSE:return!1;case wr.TRUE:return!0;case wr.NULL:return t?null:_r.NULL;case wr.UNDEFINED:return t?void 0:_r.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return _r.BREAK;default:return new xr(e)}}}var Sr=xr;class Er{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,r;if("function"!=typeof(r=null!=e?e[this.tag]:void 0)&&"function"!=typeof(r=Er["_tag"+this.tag]))return this;try{return r.call(Er,this.value)}catch(e){return t=e,this.err=t,this}}}var kr=Er;const Ir=self.location?self.location.protocol+"//"+self.location.host:"",Ar=self.URL;var Tr={URLWithLegacySupport:class{constructor(e="",t=Ir){this.super=new Ar(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:Ir,format:function(e){if("string"==typeof e)return new Ar(e).toString();if(!(e instanceof Ar)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",o=e.host||"",s=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),u=e.hash||"",c=e.pathname||"";return`${i}${t||r}${o||s+n}${e.path||c+a}${u}`}}};const{URLWithLegacySupport:Pr,format:Or}=Tr,{URLWithLegacySupport:Cr,format:Mr,URLSearchParams:Nr,defaultBase:Rr}=Tr;var Lr={URL:Cr,URLSearchParams:Nr,format:Mr,relative:(e,t={},r={},n)=>{let i,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";try{i=new Pr(e)}catch(e){i={}}const s=Object.assign({},t,{protocol:o||i.protocol,host:t.host||i.host});return new Pr(e,Or(s)).toString()},defaultBase:Rr};const{Buffer:jr}=fr,Dr=dr,Br=pr.exports.BigNumber,Ur=gr,Fr=mr,zr=Sr,Vr=kr,{URL:Hr}=Lr;class Kr{constructor(e){!(e=e||{}).size||e.size<65536?e.size=65536:e.size=Ur.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=jr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>Ur.arrayBufferToBignumber(e),3:e=>Fr.NEG_ONE.minus(Ur.arrayBufferToBignumber(e)),4:e=>Fr.TEN.pow(e[0]).times(e[1]),5:e=>Fr.TWO.pow(e[0]).times(e[1]),32:e=>new Hr(e),35:e=>new RegExp(e)},e.tags),this.parser=function(e,t,r){"use asm";var n=new e.Uint8Array(r),i=t.pushInt,o=t.pushInt32,s=t.pushInt32Neg,a=t.pushInt64,u=t.pushInt64Neg,c=t.pushFloat,l=t.pushFloatSingle,h=t.pushFloatDouble,f=t.pushTrue,d=t.pushFalse,p=t.pushUndefined,g=t.pushNull,m=t.pushInfinity,y=t.pushInfinityNeg,v=t.pushNaN,b=t.pushNaNNeg,w=t.pushArrayStart,_=t.pushArrayStartFixed,x=t.pushArrayStartFixed32,S=t.pushArrayStartFixed64,E=t.pushObjectStart,k=t.pushObjectStartFixed,I=t.pushObjectStartFixed32,A=t.pushObjectStartFixed64,T=t.pushByteString,P=t.pushByteStringStart,O=t.pushUtf8String,C=t.pushUtf8StringStart,M=t.pushSimpleUnassigned,N=t.pushTagStart,R=t.pushTagStart4,L=t.pushTagStart8,j=t.pushTagUnassigned,D=t.pushBreak,B=e.Math.pow,U=0,F=0,z=0;function V(e){e=e|0;U=0;F=e;while((U|0)<(F|0)){z=Xe[n[U]&255](n[U]|0)|0;if((z|0)>0){break}}return z|0}function H(e){e=e|0;if(((U|0)+(e|0)|0)<(F|0)){return 0}return 1}function K(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function q(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function $(e){e=e|0;i(e|0);U=U+1|0;return 0}function W(e){e=e|0;if(H(1)|0){return 1}i(n[U+1|0]|0);U=U+2|0;return 0}function G(e){e=e|0;if(H(2)|0){return 1}i(K(U+1|0)|0);U=U+3|0;return 0}function J(e){e=e|0;if(H(4)|0){return 1}o(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function X(e){e=e|0;if(H(8)|0){return 1}a(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function Y(e){e=e|0;i(-1-(e-32|0)|0);U=U+1|0;return 0}function Z(e){e=e|0;if(H(1)|0){return 1}i(-1-(n[U+1|0]|0)|0);U=U+2|0;return 0}function Q(e){e=e|0;var t=0;if(H(2)|0){return 1}t=K(U+1|0)|0;i(-1-(t|0)|0);U=U+3|0;return 0}function ee(e){e=e|0;if(H(4)|0){return 1}s(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function te(e){e=e|0;if(H(8)|0){return 1}u(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function re(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if(H(n|0)|0){return 1}t=U+1|0;r=(U+1|0)+(n|0)|0;T(t|0,r|0);U=r|0;return 0}function ne(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[U+1|0]|0;t=U+2|0;r=(U+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function ie(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=K(U+1|0)|0;t=U+3|0;r=(U+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function oe(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=q(U+1|0)|0;t=U+5|0;r=(U+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function se(e){e=e|0;return 1}function ae(e){e=e|0;P();U=U+1|0;return 0}function ue(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if(H(n|0)|0){return 1}t=U+1|0;r=(U+1|0)+(n|0)|0;O(t|0,r|0);U=r|0;return 0}function ce(e){e=e|0;var t=0;var r=0;var i=0;if(H(1)|0){return 1}i=n[U+1|0]|0;t=U+2|0;r=(U+2|0)+(i|0)|0;if(H(i+1|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function le(e){e=e|0;var t=0;var r=0;var n=0;if(H(2)|0){return 1}n=K(U+1|0)|0;t=U+3|0;r=(U+3|0)+(n|0)|0;if(H(n+2|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function he(e){e=e|0;var t=0;var r=0;var n=0;if(H(4)|0){return 1}n=q(U+1|0)|0;t=U+5|0;r=(U+5|0)+(n|0)|0;if(H(n+4|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function fe(e){e=e|0;return 1}function de(e){e=e|0;C();U=U+1|0;return 0}function pe(e){e=e|0;_(e-128|0);U=U+1|0;return 0}function ge(e){e=e|0;if(H(1)|0){return 1}_(n[U+1|0]|0);U=U+2|0;return 0}function me(e){e=e|0;if(H(2)|0){return 1}_(K(U+1|0)|0);U=U+3|0;return 0}function ye(e){e=e|0;if(H(4)|0){return 1}x(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function ve(e){e=e|0;if(H(8)|0){return 1}S(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function be(e){e=e|0;w();U=U+1|0;return 0}function we(e){e=e|0;var t=0;t=e-160|0;if(H(t|0)|0){return 1}k(t|0);U=U+1|0;return 0}function _e(e){e=e|0;if(H(1)|0){return 1}k(n[U+1|0]|0);U=U+2|0;return 0}function xe(e){e=e|0;if(H(2)|0){return 1}k(K(U+1|0)|0);U=U+3|0;return 0}function Se(e){e=e|0;if(H(4)|0){return 1}I(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function Ee(e){e=e|0;if(H(8)|0){return 1}A(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function ke(e){e=e|0;E();U=U+1|0;return 0}function Ie(e){e=e|0;N(e-192|0|0);U=U+1|0;return 0}function Ae(e){e|0;N(e|0);U=U+1|0;return 0}function Te(e){e|0;N(e|0);U=U+1|0;return 0}function Pe(e){e|0;N(e|0);U=U+1|0;return 0}function Oe(e){e|0;N(e|0);U=U+1|0;return 0}function Ce(e){e=e|0;N(e-192|0|0);U=U+1|0;return 0}function Me(e){e|0;N(e|0);U=U+1|0;return 0}function Ne(e){e|0;N(e|0);U=U+1|0;return 0}function Re(e){e|0;N(e|0);U=U+1|0;return 0}function Le(e){e=e|0;if(H(1)|0){return 1}N(n[U+1|0]|0);U=U+2|0;return 0}function je(e){e=e|0;if(H(2)|0){return 1}N(K(U+1|0)|0);U=U+3|0;return 0}function De(e){e=e|0;if(H(4)|0){return 1}R(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function Be(e){e=e|0;if(H(8)|0){return 1}L(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function Ue(e){e=e|0;M((e|0)-224|0);U=U+1|0;return 0}function Fe(e){e=e|0;d();U=U+1|0;return 0}function ze(e){e=e|0;f();U=U+1|0;return 0}function Ve(e){e=e|0;g();U=U+1|0;return 0}function He(e){e=e|0;p();U=U+1|0;return 0}function Ke(e){e=e|0;if(H(1)|0){return 1}M(n[U+1|0]|0);U=U+2|0;return 0}function qe(e){e=e|0;var t=0;var r=0;var i=1.0;var o=0.0;var s=0.0;var a=0.0;if(H(2)|0){return 1}t=n[U+1|0]|0;r=n[U+2|0]|0;if((t|0)&0x80){i=-1.0}o=+(((t|0)&0x7C)>>2);s=+(((t|0)&0x03)<<8|r);if(+o==0.0){c(+(+i*+5.9604644775390625e-8*+s))}else if(+o==31.0){if(+i==1.0){if(+s>0.0){v()}else{m()}}else{if(+s>0.0){b()}else{y()}}}else{c(+(+i*B(+2,+(+o-25.0))*+(1024.0+s)))}U=U+3|0;return 0}function $e(e){e=e|0;if(H(4)|0){return 1}l(n[U+1|0]|0,n[U+2|0]|0,n[U+3|0]|0,n[U+4|0]|0);U=U+5|0;return 0}function We(e){e=e|0;if(H(8)|0){return 1}h(n[U+1|0]|0,n[U+2|0]|0,n[U+3|0]|0,n[U+4|0]|0,n[U+5|0]|0,n[U+6|0]|0,n[U+7|0]|0,n[U+8|0]|0);U=U+9|0;return 0}function Ge(e){e=e|0;return 1}function Je(e){e=e|0;D();U=U+1|0;return 0}var Xe=[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,W,G,J,X,Ge,Ge,Ge,Ge,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Z,Q,ee,te,Ge,Ge,Ge,Ge,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ne,ie,oe,se,Ge,Ge,Ge,ae,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ce,le,he,fe,Ge,Ge,Ge,de,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,ge,me,ye,ve,Ge,Ge,Ge,be,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,_e,xe,Se,Ee,Ge,Ge,Ge,ke,Ie,Ie,Ie,Ie,Ie,Ie,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Le,je,De,Be,Ge,Ge,Ge,Ge,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Fe,ze,Ve,He,Ke,qe,$e,We,Ge,Ge,Ge,Je];return{parse:V}}(lt,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Fr.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Fr.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Fr.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Fr.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Fr.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Fr.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===Fr.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}_push(e,t){const r=this._currentParent;switch(r.values++,r.type){case Fr.PARENT.ARRAY:case Fr.PARENT.BYTE_STRING:case Fr.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case Fr.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=Fr.PARENT.MAP,r.ref=Ur.buildMap(r.ref)));break;case Fr.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case Fr.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Fr.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const r=this._knownTags[e];return r?r(t):new Vr(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return jr.concat(e)}createByteStringFromHeap(e,t){return e===t?jr.alloc(0):jr.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return Ur.buildInt32(e,t)}createInt64(e,t,r,n){return Ur.buildInt64(e,t,r,n)}createFloat(e){return e}createFloatSingle(e,t,r,n){return Dr.read([e,t,r,n],0,!1,23,4)}createFloatDouble(e,t,r,n,i,o,s,a){return Dr.read([e,t,r,n,i,o,s,a],0,!1,52,8)}createInt32Neg(e,t){return-1-Ur.buildInt32(e,t)}createInt64Neg(e,t,r,n){const i=Ur.buildInt32(e,t),o=Ur.buildInt32(r,n);return i>Fr.MAX_SAFE_HIGH?Fr.NEG_ONE.minus(new Br(i).times(Fr.SHIFT32).plus(o)):-1-(i*Fr.SHIFT32+o)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new zr(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,r,n){this._push(this.createInt64(e,t,r,n))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}pushFloatDouble(e,t,r,n,i,o,s,a){this._push(this.createFloatDouble(e,t,r,n,i,o,s,a))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Fr.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const r=Ur.buildInt32(e,t);this._createArrayStartFixed(r)}pushArrayStartFixed64(e,t,r,n){const i=Ur.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const r=Ur.buildInt32(e,t);this._createObjectStartFixed(r)}pushObjectStartFixed64(e,t,r,n){const i=Ur.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}pushByteStringStart(){this._parents[this._depth]={type:Fr.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:Fr.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Fr.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(Ur.buildInt32(e,t))}pushTagStart8(e,t,r,n){this.pushTagStart(Ur.buildInt64(e,t,r,n))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){0!==e?this._createParent({},Fr.PARENT.OBJECT,e):this._push(this.createObject({}))}_createArrayStartFixed(e){0!==e?this._createParent(new Array(e),Fr.PARENT.ARRAY,e):this._push(this.createArray([]))}_decode(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){return"string"==typeof e&&(e=jr.from(e,t||"hex")),new Kr({size:e.length}).decodeFirst(e)}static decodeAll(e,t){return"string"==typeof e&&(e=jr.from(e,t||"hex")),new Kr({size:e.length}).decodeAll(e)}}Kr.decodeFirst=Kr.decode;var qr=Kr;const{Buffer:$r}=fr,Wr=qr,Gr=gr;class Jr extends Wr{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,r,n){return super.createInt64(e,t,r,n).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,r,n){return super.createInt64Neg(e,t,r,n).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return Gr.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,r,n){return`${super.createFloatSingle(e,t,r,n)}_2`}createFloatDouble(e,t,r,n,i,o,s,a){return`${super.createFloatDouble(e,t,r,n,i,o,s,a)}_3`}createByteString(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`h'${r}`}createByteStringFromHeap(e,t){return`h'${$r.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const r=super.createArray(e,t);return-1===t?`[_ ${r.join(", ")}]`:`[${r.join(", ")}]`}createMap(e,t){const r=super.createMap(e),n=Array.from(r.keys()).reduce(Yr(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createObject(e,t){const r=super.createObject(e),n=Object.keys(r).reduce(Yr(r),"");return-1===t?`{_ ${n}}`:`{${n}}`}createUtf8String(e,t){const r=e.join(", ");return-1===t?`(_ ${r})`:`"${r}"`}createUtf8StringFromHeap(e,t){return`"${$r.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){return"string"==typeof e&&(e=$r.from(e,t||"hex")),(new Jr).decodeFirst(e)}}var Xr=Jr;function Yr(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:Zr}=fr,{URL:Qr}=Lr,en=pr.exports.BigNumber,tn=gr,rn=mr,nn=rn.MT,on=rn.NUMBYTES,sn=rn.SHIFT32,an=rn.SYMS,un=rn.TAG,cn=rn.MT.SIMPLE_FLOAT<<5|rn.NUMBYTES.TWO,ln=rn.MT.SIMPLE_FLOAT<<5|rn.NUMBYTES.FOUR,hn=rn.MT.SIMPLE_FLOAT<<5|rn.NUMBYTES.EIGHT,fn=rn.MT.SIMPLE_FLOAT<<5|rn.SIMPLE.TRUE,dn=rn.MT.SIMPLE_FLOAT<<5|rn.SIMPLE.FALSE,pn=rn.MT.SIMPLE_FLOAT<<5|rn.SIMPLE.UNDEFINED,gn=rn.MT.SIMPLE_FLOAT<<5|rn.SIMPLE.NULL,mn=new en("0x20000000000000"),yn=Zr.from("f97e00","hex"),vn=Zr.from("f9fc00","hex"),bn=Zr.from("f97c00","hex");class wn{constructor(e){e=e||{},this.streaming="function"==typeof e.stream,this.onData=e.stream,this.semanticTypes=[[Qr,this._pushUrl],[en,this._pushBigNumber]];const t=e.genTypes||[],r=t.length;for(let e=0;e<r;e++)this.addSemanticType(t[e][0],t[e][1]);this._reset()}addSemanticType(e,t){const r=this.semanticTypes.length;for(let n=0;n<r;n++)if(this.semanticTypes[n][0]===e){const e=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,e}return this.semanticTypes.push([e,t]),null}push(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}pushWrite(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(yn)}_pushInfinity(e){const t=e<0?vn:bn;return this.push(t)}_pushFloat(e){const t=Zr.allocUnsafe(2);if(tn.writeHalf(t,e)&&tn.parseHalf(t)===e)return this._pushUInt8(cn)&&this.push(t);const r=Zr.allocUnsafe(4);return r.writeFloatBE(e,0),r.readFloatBE(0)===e?this._pushUInt8(ln)&&this.push(r):this._pushUInt8(hn)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|on.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|on.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|on.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|on.EIGHT)&&this._pushUInt32BE(Math.floor(e/sn))&&this._pushUInt32BE(e%sn):t===nn.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,nn.NEG_INT,e):this._pushInt(e,nn.POS_INT)}_pushNumber(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=Zr.byteLength(e,"utf8");return this._pushInt(t,nn.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?fn:dn)}_pushUndefined(e){return this._pushUInt8(pn)}_pushArray(e,t){const r=t.length;if(!e._pushInt(r,nn.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,nn.TAG)}_pushDate(e,t){return e._pushTag(un.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,nn.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(un.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,nn.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(un.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=un.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=un.NEG_BIGINT);let r=e.toString(16);r.length%2&&(r="0"+r);const n=Zr.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,n)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(un.DECIMAL_FRAC)||!e._pushInt(2,nn.ARRAY))return!1;const r=t.decimalPlaces(),n=t.multipliedBy(new en(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(mn)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t){return!!e._pushInt(t.size,nn.MAP)&&this._pushRawMap(t.size,Array.from(t))}_pushObject(e){if(!e)return this._pushUInt8(gn);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),o=i.length;return!!this._pushInt(o,nn.MAP)&&this._pushRawMap(o,i.map((t=>[t,e[t]])))}_pushRawMap(e,t){t=t.map((function(e){return e[0]=wn.encode(e[0]),e})).sort(tn.keySorter);for(var r=0;r<e;r++){if(!this.push(t[r][0]))return!1;if(!this.pushAny(t[r][1]))return!1}return!0}write(e){return this.pushAny(e)}pushAny(e){var t=function(e){return{}.toString.call(e).slice(8,-1)}(e);switch(t){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Zr.isBuffer(e)?e:Zr.from(e));case"Null":return this._pushUInt8(gn);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case an.NULL:return this._pushObject(null);case an.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,n=this.offset,i=0,o=0;o<n;o++)i+=t[o];var s=Zr.allocUnsafe(i),a=0,u=0;for(o=0;o<n;o++){switch(u=t[o],r[o]){case 0:e[o].copy(s,a);break;case 1:s.writeUInt8(e[o],a,!0);break;case 2:s.writeUInt16BE(e[o],a,!0);break;case 3:s.writeUInt32BE(e[o],a,!0);break;case 4:s.writeDoubleBE(e[o],a,!0);break;case 5:s.write(e[o],a,u,"utf8");break;default:throw new Error("unkown method")}a+=u}var c=s;return this._reset(),c}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new wn;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}var _n=wn;function xn(e){if("string"==typeof e)return(new TextEncoder).encode(e);if(!(e instanceof Uint8Array))throw new TypeError('"data" be a string or Uint8Array.');return e}
/*!
   * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.
   */!function(e){e.Diagnose=Xr,e.Decoder=qr,e.Encoder=_n,e.Simple=Sr,e.Tagged=kr,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}}(ft);class Sn{registeredCodecs;constructor(){this.registeredCodecs={}}async encode({data:e,urls:t,codecs:r=["mh-sha2-256","mb-base58-btc"],meta:n={}}){if(void 0===e&&void 0===t)throw new Error("Either `data` or `urls` must be provided.");if(void 0===r)throw new Error("The hashlink creation `codecs` must be provided.");void 0!==t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{if("string"!=typeof e)throw new Error(`URL "${e}" must be a string.`)})),n={...n,url:t});const i=await r.reduce((async(e,t)=>{const r=this.registeredCodecs[t];if(void 0===r)throw new Error(`Unknown cryptographic hash encoder "${t}".`);return r.encode(await e)}),e),o=new Map;n.url&&o.set(15,n.url),n["content-type"]&&o.set(14,n["content-type"]),n.experimental&&o.set(13,n.experimental),n.transform&&o.set(12,n.transform);const s=new TextDecoder;let a="hl:"+s.decode(i);if(o.size>0){const e=r[r.length-1],t=new Uint8Array(ft.encode(o));a+=":"+s.decode(await this.registeredCodecs[e].encode(t))}return a}async decode({hashlink:e}){const t=e.split(":"),r={hashName:"unknown",hashValue:null,meta:{}};if(t.length<2)throw new Error(`Hashlink "${e}" is invalid; it must contain at least one colon.`);if(t.length>3)throw new Error(`Hashlink "${e}" is invalid; it contains more than two colons.`);const n=xn(t[1]),i=this._findDecoder(n),o=i.decode(n),s=this._findDecoder(o);if(r.hashName=s.name,r.hashValue=s.decode(o),3===t.length){const e=xn(t[2]),n=i.decode(e),o=ft.decode(n);o.has(15)&&(r.meta.url=o.get(15)),o.has(14)&&(r.meta["content-type"]=o.get(14)),o.has(13)&&(r.meta.experimental=o.get(13)),o.has(12)&&(r.meta.transform=o.get(12))}return r}async verify({data:e,hashlink:t}){const r=t.split(":");if(r.length>3)throw new Error(`Hashlink "${t}" is invalid; it contains more than two colons.`);const n=xn(r[1]),i=this._findDecoder(n),o=i.decode(n),s=this._findDecoder(o),a=[];if(3===r.length){const e=xn(r[2]),t=i.decode(e),n=ft.decode(t);n.has(12)&&a.push(...n.get(12))}a.push(s.algorithm,i.algorithm);const u=(await this.encode({data:e,codecs:a})).split(":");return r[1]===u[1]}use(e){this.registeredCodecs[e.algorithm]=e}_findDecoder(e){const t=Object.values(this.registeredCodecs).find((t=>t.identifier.every(((t,r)=>t===e[r]))));if(!t)throw new Error("Could not determine decoder for: "+e);return t}}const En={};function kn(e){return(4294967296+e).toString(16).substring(1)}var In={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=(new TextEncoder).encode(e)}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,r){let n="\n"+e+" = ";for(let i=0;i<t.length;i+=2){if(32===r)n+=kn(t[i]).toUpperCase(),n+=" ",n+=kn(t[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=kn(t[i+1]).toUpperCase(),n+=kn(t[i]).toUpperCase()}i%6==4?n+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)},testSpeed:function(e,t,r){let n=(new Date).getTime();const i=new Uint8Array(t);for(let e=0;e<t;e++)i[e]=e%256;const o=(new Date).getTime();console.log("Generated random input in "+(o-n)+"ms"),n=o;for(let o=0;o<r;o++){const r=e(i),o=(new Date).getTime(),s=o-n;n=o,console.log("Hashed in "+s+"ms: "+r.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(s/1e3)*100)/100+" MB PER SECOND")}}};const An=In;function Tn(e,t,r){const n=e[t]+e[r];let i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function Pn(e,t,r,n){let i=e[t]+r;r<0&&(i+=4294967296);let o=e[t+1]+n;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function On(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Cn(e,t,r,n,i,o){const s=Ln[i],a=Ln[i+1],u=Ln[o],c=Ln[o+1];Tn(Rn,e,t),Pn(Rn,e,s,a);let l=Rn[n]^Rn[e],h=Rn[n+1]^Rn[e+1];Rn[n]=h,Rn[n+1]=l,Tn(Rn,r,n),l=Rn[t]^Rn[r],h=Rn[t+1]^Rn[r+1],Rn[t]=l>>>24^h<<8,Rn[t+1]=h>>>24^l<<8,Tn(Rn,e,t),Pn(Rn,e,u,c),l=Rn[n]^Rn[e],h=Rn[n+1]^Rn[e+1],Rn[n]=l>>>16^h<<16,Rn[n+1]=h>>>16^l<<16,Tn(Rn,r,n),l=Rn[t]^Rn[r],h=Rn[t+1]^Rn[r+1],Rn[t]=h>>>31^l<<1,Rn[t+1]=l>>>31^h<<1}const Mn=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Nn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),Rn=new Uint32Array(32),Ln=new Uint32Array(32);function jn(e,t){let r=0;for(r=0;r<16;r++)Rn[r]=e.h[r],Rn[r+16]=Mn[r];for(Rn[24]=Rn[24]^e.t,Rn[25]=Rn[25]^e.t/4294967296,t&&(Rn[28]=~Rn[28],Rn[29]=~Rn[29]),r=0;r<32;r++)Ln[r]=On(e.b,4*r);for(r=0;r<12;r++)Cn(0,8,16,24,Nn[16*r+0],Nn[16*r+1]),Cn(2,10,18,26,Nn[16*r+2],Nn[16*r+3]),Cn(4,12,20,28,Nn[16*r+4],Nn[16*r+5]),Cn(6,14,22,30,Nn[16*r+6],Nn[16*r+7]),Cn(0,10,20,30,Nn[16*r+8],Nn[16*r+9]),Cn(2,12,22,24,Nn[16*r+10],Nn[16*r+11]),Cn(4,14,16,26,Nn[16*r+12],Nn[16*r+13]),Cn(6,8,18,28,Nn[16*r+14],Nn[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^Rn[r]^Rn[r+16]}const Dn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Bn(e,t,r,n){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&16!==r.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&16!==n.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};Dn.fill(0),Dn[0]=e,t&&(Dn[1]=t.length),Dn[2]=1,Dn[3]=1,r&&Dn.set(r,32),n&&Dn.set(n,48);for(let e=0;e<16;e++)i.h[e]=Mn[e]^On(Dn,4*e);return t&&(Un(i,t),i.c=128),i}function Un(e,t){for(let r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,jn(e,!1),e.c=0),e.b[e.c++]=t[r]}function Fn(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;jn(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function zn(e,t,r,n,i){r=r||64,e=An.normalizeInput(e),n&&(n=An.normalizeInput(n)),i&&(i=An.normalizeInput(i));const o=Bn(r,t,n,i);return Un(o,e),Fn(o)}var Vn={blake2b:zn,blake2bHex:function(e,t,r,n,i){const o=zn(e,t,r,n,i);return An.toHex(o)},blake2bInit:Bn,blake2bUpdate:Un,blake2bFinal:Fn};const Hn=In;function Kn(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function qn(e,t,r,n,i,o){Jn[e]=Jn[e]+Jn[t]+i,Jn[n]=$n(Jn[n]^Jn[e],16),Jn[r]=Jn[r]+Jn[n],Jn[t]=$n(Jn[t]^Jn[r],12),Jn[e]=Jn[e]+Jn[t]+o,Jn[n]=$n(Jn[n]^Jn[e],8),Jn[r]=Jn[r]+Jn[n],Jn[t]=$n(Jn[t]^Jn[r],7)}function $n(e,t){return e>>>t^e<<32-t}const Wn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gn=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Jn=new Uint32Array(16),Xn=new Uint32Array(16);function Yn(e,t){let r=0;for(r=0;r<8;r++)Jn[r]=e.h[r],Jn[r+8]=Wn[r];for(Jn[12]^=e.t,Jn[13]^=e.t/4294967296,t&&(Jn[14]=~Jn[14]),r=0;r<16;r++)Xn[r]=Kn(e.b,4*r);for(r=0;r<10;r++)qn(0,4,8,12,Xn[Gn[16*r+0]],Xn[Gn[16*r+1]]),qn(1,5,9,13,Xn[Gn[16*r+2]],Xn[Gn[16*r+3]]),qn(2,6,10,14,Xn[Gn[16*r+4]],Xn[Gn[16*r+5]]),qn(3,7,11,15,Xn[Gn[16*r+6]],Xn[Gn[16*r+7]]),qn(0,5,10,15,Xn[Gn[16*r+8]],Xn[Gn[16*r+9]]),qn(1,6,11,12,Xn[Gn[16*r+10]],Xn[Gn[16*r+11]]),qn(2,7,8,13,Xn[Gn[16*r+12]],Xn[Gn[16*r+13]]),qn(3,4,9,14,Xn[Gn[16*r+14]],Xn[Gn[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=Jn[r]^Jn[r+8]}function Zn(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(Wn),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(Qn(n,t),n.c=64),n}function Qn(e,t){for(let r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,Yn(e,!1),e.c=0),e.b[e.c++]=t[r]}function ei(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Yn(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function ti(e,t,r){r=r||32,e=Hn.normalizeInput(e);const n=Zn(r,t);return Qn(n,e),ei(n)}var ri,ni,ii={blake2s:ti,blake2sHex:function(e,t,r){const n=ti(e,t,r);return Hn.toHex(n)},blake2sInit:Zn,blake2sUpdate:Qn,blake2sFinal:ei},oi={blake2b:Vn.blake2b,blake2bHex:Vn.blake2bHex,blake2bInit:Vn.blake2bInit,blake2bUpdate:Vn.blake2bUpdate,blake2bFinal:Vn.blake2bFinal,blake2s:ii.blake2s,blake2sHex:ii.blake2sHex,blake2sInit:ii.blake2sInit,blake2sUpdate:ii.blake2sUpdate,blake2sFinal:ii.blake2sFinal},si=self.crypto||self.msCrypto;
/*!
   * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.
   */
class ai{identifier;algorithm;name}class ui extends ai{constructor(){super(),this.identifier=new Uint8Array([18,32]),this.algorithm="mh-sha2-256",this.name="sha2-256"}async encode(e){const t=new Uint8Array(await si.subtle.digest({name:"SHA-256"},e)),r=new Uint8Array(t.byteLength+this.identifier.byteLength);return r.set(this.identifier,0),r.set(t,this.identifier.byteLength),r}decode(e){return e.slice(this.identifier.length)}}class ci extends ai{constructor(){super(),this.identifier=new Uint8Array([178,8,8]),this.algorithm="mh-blake2b-64",this.name="blake2b-64"}async encode(e){const t=oi.blake2b(e,null,8),r=new Uint8Array(t.byteLength+this.identifier.byteLength);return r.set(this.identifier,0),r.set(t,this.identifier.byteLength),r}decode(e){return e.slice(this.identifier.length)}}class li extends ai{constructor(){super(),this.identifier=new Uint8Array([122]),this.algorithm="mb-base58-btc",this.name="base58-btc"}async encode(e){return new Uint8Array(xn("z"+function(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";let n="",i=0;const o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){let t=e[i];for(let e=0;e<a.length;++e)t+=a[e]<<8,a[e]=t%o,t=t/o|0;for(;t>0;)a.push(t%o),t=t/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]];if(r){const e=new RegExp(".{1,"+r+"}","g");n=n.match(e).join("\r\n")}return n}(e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t)}(e)))}decode(e){return function(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if(0===e.length)return new Uint8Array;let r=En[t];if(!r){r=En[t]=[];for(let e=0;e<t.length;++e)r[t.charCodeAt(e)]=e}e=e.replace(/\s/g,"");const n=t.length,i=t.charAt(0),o=[0];for(let t=0;t<e.length;t++){const i=r[e.charCodeAt(t)];if(void 0===i)return;let s=i;for(let e=0;e<o.length;++e)s+=o[e]*n,o[e]=255&s,s>>=8;for(;s>0;)o.push(255&s),s>>=8}for(let t=0;e[t]===i&&t<e.length-1;++t)o.push(0);return new Uint8Array(o.reverse())}
/*!
   * Copyright (c) 2019-2020 Digital Bazaar, Inc. All rights reserved.
   */(e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}(new TextDecoder("utf-8").decode(e.slice(1)))}}class hi{hl;hashlinkTable={};constructor(){this.hl=new Sn,this.hl.use(new ui),this.hl.use(new ci),this.hl.use(new li)}async decode(e,t){const r=await this.hl.decode({hashlink:e});if(!r.meta&&!r.meta.url?.length)throw new Error("unparseable document, no url provided as meta data");return this.hashlinkTable[e]=r,t?.(r.meta.url[0]),r}async verifyHashlinkTable(){const e=Object.keys(this.hashlinkTable);for(let t=0;t<e.length;t++)await this.verify(e[t]).catch((e=>console.log("caught an hashlink exception",e)));return!0}async verify(e){const t=await this.getSourceUrlFromHashlink(e);let r;await fetch(t).then((async e=>await e.text())).then((e=>{r=e}));const n=new TextEncoder,i=await this.hl.verify({data:n.encode(r),hashlink:e});if(!i)throw new Error(`Hashlink ${e} does not match data from url ${t}`);return console.log(`hashlink ${e} bound to ${t} was successfully verified`),i}async getSourceUrlFromHashlink(e){let t;return t=this.hashlinkTable[e]?this.hashlinkTable[e]:await this.decode(e),this.getMetaUrl(t)}getMetaUrl(e){return e.meta.url[0]}}function fi(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function di(e){return"string"==typeof e}!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(ri||(ri={})),function(e){e.V1_1="1.1",e.V1_2="1.2",e.V2_0="2.0",e.V3_0_alpha="3.0-alpha",e.V3_0_beta="3.0-beta",e.V3_0="3.0"}(ni||(ni={}));var pi,gi=ni;!function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(pi||(pi={}));const mi={[pi.Bitcoin]:{code:pi.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}},[pi.Ethmain]:{code:pi.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}},[pi.Ethropst]:{code:pi.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}},[pi.Ethrinkeby]:{code:pi.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}},[pi.Mocknet]:{code:pi.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}},[pi.Regtest]:{code:pi.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}},[pi.Testnet]:{code:pi.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}};var yi;!function(e){e.mainnet="mainnet",e.testnet="testnet"}(yi||(yi={}));var vi={"@context":{id:"@id",type:"@type",extensions:"https://w3id.org/openbadges/extensions#",obi:"https://w3id.org/openbadges#",validation:"obi:validation",cred:"https://w3id.org/credentials#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",AlignmentObject:"schema:AlignmentObject",CryptographicKey:"sec:Key",Endorsement:"cred:Credential",Assertion:"obi:Assertion",BadgeClass:"obi:BadgeClass",Criteria:"obi:Criteria",Evidence:"obi:Evidence",Extension:"obi:Extension",FrameValidation:"obi:FrameValidation",IdentityObject:"obi:IdentityObject",Image:"obi:Image",HostedBadge:"obi:HostedBadge",hosted:"obi:HostedBadge",Issuer:"obi:Issuer",Profile:"obi:Profile",RevocationList:"obi:RevocationList",SignedBadge:"obi:SignedBadge",signed:"obi:SignedBadge",TypeValidation:"obi:TypeValidation",VerificationObject:"obi:VerificationObject",author:{"@id":"schema:author","@type":"@id"},caption:{"@id":"schema:caption"},claim:{"@id":"cred:claim","@type":"@id"},created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},endorsement:{"@id":"cred:credential","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},genre:{"@id":"schema:genre"},image:{"@id":"schema:image","@type":"@id"},name:{"@id":"schema:name"},owner:{"@id":"sec:owner","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyPem:{"@id":"sec:publicKeyPem"},related:{"@id":"dc:relation","@type":"@id"},startsWith:{"@id":"http://purl.org/dqm-vocabulary/v1/dqm#startsWith"},tags:{"@id":"schema:keywords"},targetDescription:{"@id":"schema:targetDescription"},targetFramework:{"@id":"schema:targetFramework"},targetName:{"@id":"schema:targetName"},targetUrl:{"@id":"schema:targetUrl"},telephone:{"@id":"schema:telephone"},url:{"@id":"schema:url","@type":"@id"},version:{"@id":"schema:version"},alignment:{"@id":"obi:alignment","@type":"@id"},allowedOrigins:{"@id":"obi:allowedOrigins"},audience:{"@id":"obi:audience"},badge:{"@id":"obi:badge","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},endorsementComment:{"@id":"obi:endorsementComment"},evidence:{"@id":"obi:evidence","@type":"@id"},hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},issuer:{"@id":"obi:issuer","@type":"@id"},narrative:{"@id":"obi:narrative"},recipient:{"@id":"obi:recipient","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},revocationReason:{"@id":"obi:revocationReason"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},revokedAssertions:{"@id":"obi:revoked"},salt:{"@id":"obi:salt"},targetCode:{"@id":"obi:targetCode"},uid:{"@id":"obi:uid"},validatesType:"obi:validatesType",validationFrame:"obi:validationFrame",validationSchema:"obi:validationSchema",verification:{"@id":"obi:verify","@type":"@id"},verificationProperty:{"@id":"obi:verificationProperty"},verify:"verification"}},bi={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:{"@id":"obi:verify","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/merkleProof2017Schema.json"}]},wi={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:{"@id":"obi:verify","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/merkleProof2017Schema.json"}]},_i={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",vc:"https://www.w3.org/2018/credentials/v1",schema:"https://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},metadata:"bc:metadata",display:{"@id":"bc:display","@context":{id:"@id",type:"@type",contentMediaType:{"@id":"bc:contentMediaType"},contentEncoding:{"@id":"bc:contentEncoding"},content:{"@id":"bc:content"}}},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"https://purl.org/dc/terms/created","@type":"xsd:dateTime"},challenge:"sec:challenge",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},publicKey:{"@id":"sec:publicKey"},url:{"@id":"schema:url"},image:{"@id":"schema:image"},criteria:{"@id":"schema:criteria"},claim:{"@id":"schema:claim"}}};const xi={};xi["https://w3id.org/openbadges/v2"]=vi,xi["https://openbadgespec.org/v2/context.json"]=vi,xi["https://www.w3.org/2018/credentials/v1"]={"@context":{"@version":1.1,id:"@id",type:"@type",VerifiableCredential:{"@id":"https://www.w3.org/2018/credentials#VerifiableCredential","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",credentialSchema:{"@id":"cred:credentialSchema","@type":"@id","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",JsonSchemaValidator2018:"cred:JsonSchemaValidator2018"}},credentialStatus:{"@id":"cred:credentialStatus","@type":"@id"},credentialSubject:{"@id":"cred:credentialSubject","@type":"@id"},evidence:{"@id":"cred:evidence","@type":"@id"},expirationDate:{"@id":"cred:expirationDate","@type":"xsd:dateTime"},holder:{"@id":"cred:holder","@type":"@id"},issued:{"@id":"cred:issued","@type":"xsd:dateTime"},issuer:{"@id":"cred:issuer","@type":"@id"},issuanceDate:{"@id":"cred:issuanceDate","@type":"xsd:dateTime"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},refreshService:{"@id":"cred:refreshService","@type":"@id","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",ManualRefreshService2018:"cred:ManualRefreshService2018"}},termsOfUse:{"@id":"cred:termsOfUse","@type":"@id"},validFrom:{"@id":"cred:validFrom","@type":"xsd:dateTime"},validUntil:{"@id":"cred:validUntil","@type":"xsd:dateTime"}}},VerifiablePresentation:{"@id":"https://www.w3.org/2018/credentials#VerifiablePresentation","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",holder:{"@id":"cred:holder","@type":"@id"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},verifiableCredential:{"@id":"cred:verifiableCredential","@type":"@id","@container":"@graph"}}},EcdsaSecp256k1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256k1Signature2019","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},EcdsaSecp256r1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256r1Signature2019","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},RsaSignature2018:{"@id":"https://w3id.org/security#RsaSignature2018","@context":{"@version":1.1,challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"}}},xi["https://w3id.org/blockcerts/schema/2.0/context.json"]=bi,xi["https://www.blockcerts.org/schema/2.0/context.json"]=bi,xi["https://w3id.org/blockcerts/v2"]=bi,xi["https://w3id.org/blockcerts/schema/2.1/context.json"]=wi,xi["https://www.blockcerts.org/schema/2.1/context.json"]=wi,xi["https://w3id.org/blockcerts/v2.1"]=wi,xi["https://w3id.org/blockcerts/schema/3.0/context.json"]=_i,xi["https://www.blockcerts.org/schema/3.0/context.json"]=_i,xi["https://w3id.org/blockcerts/v3"]=_i;var Si={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",creator:{"@id":"dc:creator","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"sec:expiration","@type":"xsd:dateTime"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:"bc:verification",publicKeys:"bc:publicKeys",ChainpointSHA256v2:"cp:ChainpointSHA256v2",BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/merkleProof2017Schema.json"}]},Ei={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"bc:created","@type":"xsd:dateTime"},name:{"@id":"schema:name"}}},ki={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",vc:"https://www.w3.org/2018/credentials/v1",schema:"https://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},metadata:"bc:metadata",display:{"@id":"bc:display","@context":{id:"@id",type:"@type",contentMediaType:{"@id":"bc:contentMediaType","@type":"@id"},contentEncoding:{"@id":"bc:contentEncoding","@type":"@id"},content:{"@id":"bc:content","@type":"@id"}}},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"https://purl.org/dc/terms/created","@type":"xsd:dateTime"},challenge:"sec:challenge",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},publicKey:{"@id":"sec:publicKey","@type":"@id"},url:{"@id":"schema:url","@type":"@id"},image:{"@id":"schema:image","@type":"@id"}}};xi["https://w3id.org/blockcerts/schema/2.0-alpha/context.json"]=Si,xi["https://www.blockcerts.org/schema/2.0-alpha/context.json"]=Si,xi["https://www.blockcerts.org/schema/3.0-alpha/context.json"]=Ei,xi["https://w3id.org/blockcerts/schema/3.0-alpha/context.json"]=Ei,xi["https://w3id.org/blockcerts/v3.0-alpha"]=Ei,xi["https://www.blockcerts.org/schema/3.0-beta/context.json"]=ki,xi["https://w3id.org/blockcerts/schema/3.0-beta/context.json"]=ki,xi["https://w3id.org/blockcerts/v3.0-beta"]=ki,xi["https://w3id.org/security/suites/ed25519-2020/v1"]={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2020:{"@id":"https://w3id.org/security#Ed25519VerificationKey2020","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyMultibase:{"@id":"https://w3id.org/security#publicKeyMultibase","@type":"https://w3id.org/security#multibase"}}},Ed25519Signature2020:{"@id":"https://w3id.org/security#Ed25519Signature2020","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}};const Ii={locale:"en-US"};var Ai=Object.freeze({__proto__:null,isMainnet:function(e){return fi(e,"1")||fi(e,"ecdsa-koblitz-pubkey:1")}}),Ti={locale:"en-US"},Pi={"en-US":{steps:{formatValidationLabel:"Format validation",formatValidationLabelPending:"Validating format",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Status check",statusCheckLabelPending:"Checking record status"},subSteps:{getTransactionIdLabel:"Get transaction ID",getTransactionIdLabelPending:"Getting transaction ID",computeLocalHashLabel:"Compute local hash",computeLocalHashLabelPending:"Computing local hash",fetchRemoteHashLabel:"Fetch remote hash",fetchRemoteHashLabelPending:"Fetching remote hash",getIssuerProfileLabel:"Get issuer profile",getIssuerProfileLabelPending:"Getting issuer profile",parseIssuerKeysLabel:"Parse issuer keys",parseIssuerKeysLabelPending:"Parsing issuer keys",compareHashesLabel:"Compare hashes",compareHashesLabelPending:"Comparing hashes",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Check Merkle Root",checkMerkleRootLabelPending:"Checking Merkle Root",checkReceiptLabel:"Check Receipt",checkReceiptLabelPending:"Checking Receipt",checkAuthenticityLabel:"Check Authenticity",checkAuthenticityLabelPending:"Checking Authenticity",checkRevokedStatusLabel:"Check Revoked Status",checkRevokedStatusLabelPending:"Checking Revoked Status",checkExpiresDateLabel:"Check Expiration Date",checkExpiresDateLabelPending:"Checking Expiration Date",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Reason given:",reason:"This certificate has been revoked by the issuer."},success:{mocknet:{label:"This Mocknet credential passed all checks",description:"Mocknet credentials are used for test purposes only. They are not recorded on a blockchain, and they should not be considered verified Blockcerts."},blockchain:{label:"Verified",description:"This is a valid ${chain} certificate.",linkText:"View transaction link"},multisign:{label:"Verified",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"This is not a valid certificate",couldNotConfirmTx:"Could not confirm the transaction",ensureHashesEqual:"Computed hash does not match remote hash",ensureMerkleRootEqual:"Merkle root does not match remote hash.",ensureNotExpired:"This certificate has expired.",ensureValidReceipt:"The receipt is malformed. There was a problem navigating the merkle tree in the receipt.",failedJsonLdNormalization:"Failed JSON-LD normalization",foundUnmappedFields:"Found unmapped fields during JSON-LD normalization",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Didn't recognize chain value",getIssuerProfile:"Unable to get issuer profile",getRevokedAssertions:"Unable to get revocation assertions",getTransactionId:"Cannot verify this certificate without a transaction ID to compare against.",invalidMerkleReceipt:"Invalid Merkle Receipt. Proof hash did not match Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Cannot verify this certificate without a transaction ID to compare against.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Unable to parse JSON out of issuer identification data.",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},fr:{steps:{formatValidationLabel:"Validation du format",formatValidationLabelPending:"Validation du format",signatureVerificationLabel:"Vrification de la preuve",signatureVerificationLabelPending:"Vrification de la preuve",identityVerificationLabel:"Vrification de l'identit",identityVerificationLabelPending:"Vrification de l'identit",statusCheckLabel:"Vrification du status",statusCheckLabelPending:"Vrification du status"},subSteps:{getTransactionIdLabel:"Obtention de l'identifiant de transaction",getTransactionIdLabelPending:"Obtention de l'identifiant de transaction",computeLocalHashLabel:"Calcul du hash local",computeLocalHashLabelPending:"Calcul du hash local",fetchRemoteHashLabel:"Rcupration du hash distant",fetchRemoteHashLabelPending:"Rcupration du hash distant",getIssuerProfileLabel:"Obtention du profil de l'metteur",getIssuerProfileLabelPending:"Obtention du profil de l'metteur",parseIssuerKeysLabel:"Traitement des cls de l'metteur",parseIssuerKeysLabelPending:"Traitement des cls de l'metteur",compareHashesLabel:"Comparaison des hash",compareHashesLabelPending:"Comparaison des hashs",checkDocumentSignatureLabel:"Vrification de la signature du document",checkDocumentSignatureLabelPending:"Vrification de la signature du document",checkMerkleRootLabel:"Vrification du Merkle Root",checkMerkleRootLabelPending:"Vrification du  Merkle Root",checkReceiptLabel:"Vrification du reu",checkReceiptLabelPending:"Vrification du reu",checkAuthenticityLabel:"Vrification de l'authenticit",checkAuthenticityLabelPending:"Vrification de l'authenticit",checkRevokedStatusLabel:"Vrification du status de rvocation",checkRevokedStatusLabelPending:"Vrification du status de rvocation",checkExpiresDateLabel:"Vrification de la date d'expiration",checkExpiresDateLabelPending:"Vrification de la date d'expiration",controlVerificationMethodLabel:"Contrle de la Mthode de Vrification",controlVerificationMethodLabelPending:"Contrle de la Mthode de Vrification",retrieveVerificationMethodPublicKeyLabel:"Extraction de la cl publique depuis le document DID",retrieveVerificationMethodPublicKeyLabelPending:"Extraction de la cl publique depuis le document DID",deriveIssuingAddressFromPublicKeyLabel:"Drivation de l'adresse d'mission depuis la cl publique",deriveIssuingAddressFromPublicKeyLabelPending:"Drivation de l'adresse d'mission depuis la cl publique",compareIssuingAddressLabel:"Comparaison des adresses",compareIssuingAddressLabelPending:"Comparaison des adresses",checkImagesIntegrityLabel:"Vrification de l'Intgrit des Images",checkImagesIntegrityLabelPending:"Vrification de l'Intgrit des Images"},revocation:{preReason:"Raison :",reason:"Ce certificat a t rvoqu par l'metteur."},success:{mocknet:{label:"Cet enregistrement Mocknet a t vrifi",description:"Le mode Mocknet est utilis  des fins de tests uniquement. Ce Blockcert n'a pas t enregistr sur une blockchain, et en tant que tel ne peut pas tre considr un Blockcert valide."},blockchain:{label:"Vrifi",description:"Ceci est un certificat ${chain} valide.",linkText:"Voir la transaction"},multisign:{label:"Vrifi",description:"Toutes les signatures numriques de ce certificat ont t vrifies avec succs."}},errors:{certificateNotValid:"Certificat invalide",couldNotConfirmTx:"Impossible de confirmer la transaction",ensureHashesEqual:"Calcul du hash local diffrent du hash distant",ensureMerkleRootEqual:"Le Merkle root ne correspond pas au hash distant",ensureNotExpired:"Certificat expir",ensureValidReceipt:"Erreur d'criture du reu. Un problme est survenu lors de la navigation de l'arbre Merkle du reu.",failedJsonLdNormalization:"Erreur de normalisation JSON-LD",foundUnmappedFields:"Champs non lis dcouverts durant la normalisation JSON-LD",identityErrorBaseMessage:"Identit de l'metteur invalide",deriveIssuingAddressFromPublicKey:"Cette blockchain n'est pas supporte pour la vrification de l'identit dcentralise.",controlVerificationMethod:"Le document d'identit de l'metteur ne correspond pas  la mthode de vrification.",retrieveVerificationMethodPublicKey:"Le document d'identit de l'metteur ne fait pas mention de la mthode de vrification.",compareIssuingAddress:"La mthode de vrification n'a pas permis d'tablir l'identit de l'metteur.",invalidIssuingAddressCreationTime:"L'adresse d'mission utilise a t cre aprs la transaction d'enregistrement.",invalidIssuingAddressRevoked:"L'adresse d'mission utilise a t dcommissionne par l'metteur avant la transaction d'enregistrement.",invalidIssuingAddressExpired:"L'adresse d'mission utilise a expir avant la transaction.",invalidIssuingAddressUnknown:"L'adresse utilise pour mettre ce Blockcerts n'appartient  l'metteur dclar.",getChain:"Valeur de chaine non reconnue",getIssuerProfile:"Profil de l'metteur indisponible",getRevokedAssertions:"Impossible d'obtenir les raisons de revocation",getTransactionId:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",invalidMerkleReceipt:"Reu Merkle invalide. Hash de preuve diffrent du Merkle root",invalidMerkleVersion:"La version du Merkle utilis est incompatible avec la version Blockcerts.",isTransactionIdValid:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",issuerProfileNotSet:"l'URL de l'metteur n'est pas dfinie",issuerProfileInvalid:"le document distant ne semble pas tre un profil d'metteur valide",parseIssuerKeys:"Impossible de lire le JSON d'identification de l'metteur",checkImagesIntegrity:"La vrification des images a prouv que le contenu a t modifi aprs l'mission."}},es:{steps:{formatValidationLabel:"Validacin de formato",formatValidationLabelPending:"Validando el formato",signatureVerificationLabel:"Verificar prueba",signatureVerificationLabelPending:"Verificando prueba",identityVerificationLabel:"Verificar identitad",identityVerificationLabelPending:"Verificando identitad",statusCheckLabel:"Estado de Verificacin",statusCheckLabelPending:"Verificando Estado de Grabacin"},subSteps:{getTransactionIdLabel:"Obtener Identificacin de Transaccin",getTransactionIdLabelPending:"Obteniendo Identificacin de Transaccin",computeLocalHashLabel:"Calcular cadena binaria local",computeLocalHashLabelPending:"Calculando cadena binaria local",fetchRemoteHashLabel:"Obtener cadena binaria remota",fetchRemoteHashLabelPending:"Obeniendo cadena binaria remota",getIssuerProfileLabel:"Obtener perfil de emisor",getIssuerProfileLabelPending:"Obteniendo perfil de emisor",parseIssuerKeysLabel:"Analizar claves del emisor",parseIssuerKeysLabelPending:"Analizando claves del emisor",compareHashesLabel:"Comparar cadenas binarias",compareHashesLabelPending:"Comparando cadenas binarias",checkDocumentSignatureLabel:"Controlar firma del documento",checkDocumentSignatureLabelPending:"Controlando firma del documento",checkMerkleRootLabel:"Verificar Merkle Root",checkMerkleRootLabelPending:"Verificando Merkle Root",checkReceiptLabel:"Verificar Recibo",checkReceiptLabelPending:"Verificando Recibo",checkAuthenticityLabel:"Verificar Autenticidad",checkAuthenticityLabelPending:"Verificando Autenticidad",checkRevokedStatusLabel:"Verificar Estado de Revocacin",checkRevokedStatusLabelPending:"Verificando Estado de Revocacin",checkExpiresDateLabel:"Verificar Fechas de Expiracin",checkExpiresDateLabelPending:"Verificando Fechas de Expiracin",controlVerificationMethodLabel:"Controlar Metodo de Verificacin",controlVerificationMethodLabelPending:"Controlando Metodo de Verificacin",retrieveVerificationMethodPublicKeyLabel:"Extraer la llave pblica desde el documento DID",retrieveVerificationMethodPublicKeyLabelPending:"Extraendo la llave pblica desde el documento DID",deriveIssuingAddressFromPublicKeyLabel:"Derivar la direccin del emisor desde la llave pblica",deriveIssuingAddressFromPublicKeyLabelPending:"Derivando la direccin del emisor desde la llave pblica",compareIssuingAddressLabel:"Comparar direcciones",compareIssuingAddressLabelPending:"Comparando direcciones",checkImagesIntegrityLabel:"Comprobar Integridad de las Imagens",checkImagesIntegrityLabelPending:"Comprobando Integridad de las Imagens"},revocation:{preReason:"Razn dada:",reason:"Este certificado ha sido revocado por el emisor"},success:{mocknet:{label:"Esta credencial de Mocknet pas todas las comprobaciones",description:"Las credenciales de Mocknet se usan solo con fines de prueba. No se graban en una cadena de bloques, y no se deben considerar Blockcerts Verificados."},blockchain:{label:"Verificado",description:"Este es un certificado vlido de ${chain}.",linkText:"Ver enlace de transaccin"},multisign:{label:"Verificado",description:"Todas las firmas digitales de este certificado han verificado con xito."}},errors:{certificateNotValid:"Este no es un certificado vlido",couldNotConfirmTx:"No se ha podido confirmar la transaccin",ensureHashesEqual:"La cadena binaria calculada no corresponde con la cadena binaria remota",ensureMerkleRootEqual:"La raz Merkle no corresponde con la cadena binaria remota",ensureNotExpired:"Este certificado ha expirado",ensureValidReceipt:"El recibo est malformado. Hubo un problema navegando el rbol Merkle en el recibo",failedJsonLdNormalization:"La normalizacin del JSON-LD ha fallado",foundUnmappedFields:"Se han encontrado campos no mapeados durante la normalizacin de JSON-LD",identityErrorBaseMessage:"Identitad del emisor invlida",deriveIssuingAddressFromPublicKey:"No se puede validar la identitad decentalisada con esta cadena binaria.",controlVerificationMethod:"El documento de identitad del emisor no corresponde al metodo de verificacin.",retrieveVerificationMethodPublicKey:"El documento de identitad del emisor no hace constar al metodo de verificacin.",compareIssuingAddress:"El metodo de verificacin no corresponde a la identitad del emisor.",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Valor de cadena no reconocido",getIssuerProfile:"No se ha podido obtener el perfil del emisor",getRevokedAssertions:"No se ha podido obtener aseveraciones de revocacin",getTransactionId:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",invalidMerkleReceipt:"Recibo Merkle invlido. La cadena binaria de prueba no corresponde con la raz Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",issuerProfileNotSet:"URL del emisor no definido",issuerProfileInvalid:"el documento recogido no parece ser un perfil de emisor valido",parseIssuerKeys:"No se ha podido analizar el JSON de la informacin de identificacin del emisor",checkImagesIntegrity:"La verificacin de la integridad de los imagens prov alteracin del contenido despus de la emisin."}},mt:{steps:{formatValidationLabel:"Validazzjoni tal-format",formatValidationLabelPending:"Il-format qed jii vvalidat",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Status check",statusCheckLabelPending:"Ir-record status qed jii ekkjat"},subSteps:{getTransactionIdLabel:"Ikseb l-ID ta' tranazzjoni",getTransactionIdLabelPending:"L-ID ta' tranazzjoni qed tii mnila",computeLocalHashLabel:"Ikkalkula l-hash lokali",computeLocalHashLabelPending:"Il-hash lokali qed jii kkalkulat",fetchRemoteHashLabel:"Fittex ir-remote hash",fetchRemoteHashLabelPending:"Ir-remote hash qed jii mfittex",getIssuerProfileLabel:"Ikseb il-profil tal-emittent",getIssuerProfileLabelPending:"Il-profil tal-emittent qed jii mniel",parseIssuerKeysLabel:"Estratta -wievet tal-emittent",parseIssuerKeysLabelPending:"I-wievet tal-emittent qed jiu estratti",compareHashesLabel:"Ikkumpara l-hashes",compareHashesLabelPending:"Il-hashes qed jiu kkomparati",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Iekkja l-Merkle Root",checkMerkleRootLabelPending:"Il-Merkle Root Qed Tii ekkjata",checkReceiptLabel:"Iekkja l-Irevuta",checkReceiptLabelPending:"L-Irevuta Qed Tii ekkjata",checkAuthenticityLabel:"Iekkja l-Awtentiit",checkAuthenticityLabelPending:"L-Awtentiit Qed Tii ekkjata",checkRevokedStatusLabel:"Iekkja l-Istatus Revokat",checkRevokedStatusLabelPending:"L-Istatus Revokat Qed Jii ekkjat",checkExpiresDateLabel:"Iekkja d-Data ta' Skadenza",checkExpiresDateLabelPending:"Id-Data ta' Skadenza Qed Tii ekkjata",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Rauni mogtija:",reason:"Dan i-ertifikat ie revokat mill-emittent."},success:{mocknet:{label:"Din il-kredenzjali tal-Mocknet gaddiet il-kontrolli kollha",description:"Il-kredenzjali tal-Mocknet jintuaw biss gal skopijiet ta 'ttestjar. Dawn mhumiex irreistrati fuq blockchain, u ma gandhomx jiu kkunsidrati bala blockcerts verifikati."},blockchain:{label:"Ivverifikat",description:"Dan huwa ertifikat ${chain} huwa validu.",linkText:"Ara l-link tat-transazzjoni"},multisign:{label:"Ivverifikat",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"Dan mhux ertifikat validu",couldNotConfirmTx:"Ma setgetx tii kkonfermata t-tranazzjoni",ensureHashesEqual:"Il-hash ikkalkulat ma jikkorrispondix mar-remote hash",ensureMerkleRootEqual:"Merkle root ma taqbilx mar-remote hash",ensureNotExpired:"Dan i-ertifikat skada",ensureValidReceipt:"L-irevuta hija malformata. Kien hemm problema fin-navigazzjoni tal-merkle tree fl-irevuta",failedJsonLdNormalization:"In-normalizzazzjoni ta' JSON-LD ma rnexxietx",foundUnmappedFields:"Instabu unmapped fields matul in-normalizzazzjoni JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"L-indirizz elettroniku tal-ru speifikat inoloq wara li seet it-tranazzjoni.",invalidIssuingAddressRevoked:"L-indirizz elettroniku tal-ru speifikat ie revokat mill-emittent qabel ma seet it-tranazzjoni.",invalidIssuingAddressExpired:"L-indirizz elettroniku tal-ru speifikat skada qabel ma seet it-tranazzjoni.",invalidIssuingAddressUnknown:"L-indirizz elettroniku uat biex jinaru dawn il-Blockcerts ma jappartjenix gall-emittent mitlub.",getChain:"I-chain value ma ntgarafx",getIssuerProfile:"Mhux possibbli jinkiseb il-profil tal-emittent",getRevokedAssertions:"Mhux possibbli jinkisbu dikjarazzjonijiet revokati",getTransactionId:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",invalidMerkleReceipt:"Irevuta Merkle invalida. Il-proof hash ma kienx jaqbel mal-Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Ma jistax jii estratt JSON mid-data tal-identifikazzjoni tal-emittent",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},"it-IT":{steps:{formatValidationLabel:"Convalidare formato",formatValidationLabelPending:"Convalida formato",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Verificare stato",statusCheckLabelPending:"Verifica stato del record"},subSteps:{getTransactionIdLabel:"Ottenere ID transazione",getTransactionIdLabelPending:"Ottieni ID transazione",computeLocalHashLabel:"Calcolare hash locale",computeLocalHashLabelPending:"Calcola hash locale",fetchRemoteHashLabel:"Recuperare hash remoto",fetchRemoteHashLabelPending:"Recupera hash remoto",getIssuerProfileLabel:"Ottenere profilo issuer",getIssuerProfileLabelPending:"Ottieni profilo issuer",parseIssuerKeysLabel:"Analizzare chiavi issuer",parseIssuerKeysLabelPending:"Analizza chiavi issuer",compareHashesLabel:"Confrontare gli hash",compareHashesLabelPending:"Confronto hash",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Controllare radice di Merkle",checkMerkleRootLabelPending:"Controllo radice di Merkle",checkReceiptLabel:"Verificare ricevuta",checkReceiptLabelPending:"Verifica ricevuta",checkAuthenticityLabel:"Verificare autenticit",checkAuthenticityLabelPending:"Verifica autenticit",checkRevokedStatusLabel:"Verificare stato revocato",checkRevokedStatusLabelPending:"Verifica stato revocato",checkExpiresDateLabel:"Verificare data di scadenza",checkExpiresDateLabelPending:"Verifica data di scadenza",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Motivo indicato:",reason:"Questo certificato  stato revocato dall'emittente."},success:{mocknet:{label:"Questo Blockcert simulato ha superato tutti i controlli.",description:"La modalit Mocknet  utilizzata solo dagli emittenti per testare il loro flusso di lavoro localmente. Questo Blockcert non  stato registrato su una blockchain e non dovrebbe essere considerato un Blockcert verificato."},blockchain:{label:"Verificato",description:"Questo  un certificato ${chain} valido.",linkText:"Vedi la transazione"},multisign:{label:"Verificato",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"Questo non  un certificato valido",couldNotConfirmTx:"Impossibile confermare la transazione",ensureHashesEqual:"L'hash calcolato non corrisponde all'hash remoto",ensureMerkleRootEqual:"La radice di Merkle non corrisponde all'hash remoto.",ensureNotExpired:"Questo certificato  scaduto.",ensureValidReceipt:"La ricevuta  malformata. C' stato un problema nella navigazione dell'albero di Merkle nella ricevuta.",failedJsonLdNormalization:"Normalizzazione JSON-LD fallita",foundUnmappedFields:"Campi non mappati trovati durante la normalizzazione JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Il valore della catena non  stato riconosciuto",getIssuerProfile:"Impossibile ottenere il profilo dell'emittente",getRevokedAssertions:"Impossibile ottenere le asserzioni di revoca",getTransactionId:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",invalidMerkleReceipt:"Ricevuta Merkle non valida. L'hash di prova non corrisponde alla radice di Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Impossibile analizzare JSON dai dati di identificazione dell'emittente.",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},ja:{steps:{formatValidationLabel:"",formatValidationLabelPending:"",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"",statusCheckLabelPending:""},subSteps:{getTransactionIdLabel:"ID",getTransactionIdLabelPending:"ID",computeLocalHashLabel:"",computeLocalHashLabelPending:"",fetchRemoteHashLabel:"",fetchRemoteHashLabelPending:"",getIssuerProfileLabel:"",getIssuerProfileLabelPending:"",parseIssuerKeysLabel:"",parseIssuerKeysLabelPending:"",compareHashesLabel:"",compareHashesLabelPending:"",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Merkle Root",checkMerkleRootLabelPending:"Merkle Root",checkReceiptLabel:"",checkReceiptLabelPending:"",checkAuthenticityLabel:"",checkAuthenticityLabelPending:"",checkRevokedStatusLabel:"",checkRevokedStatusLabelPending:"",checkExpiresDateLabel:"",checkExpiresDateLabelPending:"",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"",reason:""},success:{mocknet:{label:"Mocknet",description:"MocknetBlockcert"},blockchain:{label:"",description:"${chain}",linkText:""},multisign:{label:"",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"",couldNotConfirmTx:"",ensureHashesEqual:"",ensureMerkleRootEqual:"Merkle root",ensureNotExpired:"",ensureValidReceipt:"Merkle tree",failedJsonLdNormalization:"JSON-LD",foundUnmappedFields:"JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"",getIssuerProfile:"",getRevokedAssertions:"assertions",getTransactionId:"ID",invalidMerkleReceipt:"MerkleMerkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"ID",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"JSON",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}}};function Oi(e,t){return e&&t?Pi[Ti.locale]?Pi[Ti.locale][e]?Pi[Ti.locale][e][t]?Pi[Ti.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]":""}var Ci=Object.freeze({__proto__:null,detectLocale:function(){return navigator.language||Ii.locale},ensureIsSupported:function(e){let t;const r=Hl.i18n.getSupportedLanguages().map((e=>e.toLowerCase()));if(t=r.includes(e.toLowerCase()),!t){const n=e.substr(0,2).toLowerCase(),i=r.map((e=>e.split("-")[0])).indexOf(n);t=i>-1,t&&(e=r[i])}return t||(e=Ii.locale),function(e){const t=e.split("-");return t.length>1?`${t[0].toLowerCase()}-${t[1].toUpperCase()}`:t[0].toLowerCase()}(e)},getText:Oi,getSupportedLanguages:function(){return Object.keys(Pi)}});function Mi(e=""){return Ai.isMainnet(e)?mi.bitcoin:mi.testnet}function Ni(e){const t=Object.keys(mi).map((e=>mi[e])).find((t=>t.signatureValue===e));if(void 0===t)throw new Error(Oi("errors","getChain"));return t}class Ri{publicKey;created;revoked;expires;constructor(e,t,r,n){this.publicKey=e,this.created=t,this.revoked=r,this.expires=n}}class Li{image;jobTitle;name;constructor(e,t,r){this.image=e,this.jobTitle=t,this.name=r}}class ji extends Error{stepCode;constructor(e,t){super(t),this.stepCode=e}}const Di=Pi[Ti.locale];var Bi,Ui;function Fi(){return{[Bi.formatValidation]:{code:Bi.formatValidation,label:Di.steps.formatValidationLabel,labelPending:Di.steps.formatValidationLabelPending,subSteps:[]},[Bi.proofVerification]:{code:Bi.proofVerification,label:Di.steps.signatureVerificationLabel,labelPending:Di.steps.signatureVerificationLabelPending,subSteps:[]},[Bi.identityVerification]:{code:Bi.identityVerification,label:Di.steps.identityVerificationLabel,labelPending:Di.steps.identityVerificationLabelPending,subSteps:[]},[Bi.statusCheck]:{code:Bi.statusCheck,label:Di.steps.statusCheckLabel,labelPending:Di.steps.statusCheckLabelPending,subSteps:[]}}}function zi(e,t){const r=e.findIndex((e=>e===t));r>-1&&e.splice(r,1)}!function(e){e.formatValidation="formatValidation",e.proofVerification="proofVerification",e.identityVerification="identityVerification",e.statusCheck="statusCheck",e.final="final"}(Bi||(Bi={})),function(e){e.checkImagesIntegrity="checkImagesIntegrity",e.checkRevokedStatus="checkRevokedStatus",e.checkExpiresDate="checkExpiresDate",e.controlVerificationMethod="controlVerificationMethod"}(Ui||(Ui={})),Object.freeze({__proto__:null,final:"final",get VerificationSteps(){return Bi},get SUB_STEPS(){return Ui},default:Fi});const Vi={[Bi.formatValidation]:[Ui.checkImagesIntegrity],[Bi.proofVerification]:[],[Bi.identityVerification]:[Ui.controlVerificationMethod],[Bi.statusCheck]:[Ui.checkRevokedStatus,Ui.checkExpiresDate]};function Hi(e,t){return Vi[e].filter((e=>t.includes(e))).map((t=>Hl.verifier.convertToVerificationSubsteps(e,t)))}function Ki(e){const t=Fi();return Object.keys(t).map((r=>({...t[r],subSteps:Hi(r,e)})))}var qi,$i,Wi=Object.freeze({__proto__:null,getChain:function(e,t){const r=t||null;if(r?.anchors){const e=r.anchors[0];if(e.chain)return Ni(e.chain);if("string"==typeof e)return function(e){const t={btc:{chainName:mi.bitcoin.name},eth:{chainName:mi.ethmain.name}},r=e.split(":"),n=r.findIndex((e=>Object.keys(t).includes(e)));if(n>-1){const e=r[n],i=r[n+1],o=t[e].chainName.toLowerCase()+function(e){const t=e.substr(0,1),r=e.substr(1,e.length-1);return t.toUpperCase()+r.toLowerCase()}(i);return Ni(o)}return Mi()}(e)}return Mi(e)},generateRevocationReason:function(e){return e=(e=e.trim()).length>0?` ${Oi("revocation","preReason")} ${e}${"."!==e.slice(-1)?".":""}`:"",`${Oi("revocation","reason")}${e}`},getTransactionId:function(e={}){try{const{anchors:t}=e,r=t[0];if(r.sourceId)return r.sourceId;if("string"==typeof r)return r.split(":").pop()}catch(e){throw new ji("",Oi("errors","getTransactionId"))}},getTransactionLink:function(e,t){return e&&t?{rawTransactionLink:t.transactionTemplates.raw.replace("{transaction_id}",e),transactionLink:t.transactionTemplates.full.replace("{transaction_id}",e)}:null},getVerificationMap:function(e=!1){const t=function(e){const t=Object.values(Ui);return e||zi(t,Ui.controlVerificationMethod),t}(e);return{verificationProcess:t,verificationMap:Ki(t)}}}),Gi=Object.freeze({__proto__:null,isMockChain:function(e){if(e){const t="string"==typeof e?e:e.code;return!!Object.keys(mi).some((e=>e===t))&&!!mi[t].test}return!1}});!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(qi||(qi={})),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}($i||($i={}));const Ji={[$i.Bitcoin]:{code:$i.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}},[$i.Ethmain]:{code:$i.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}},[$i.Ethropst]:{code:$i.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}},[$i.Ethrinkeby]:{code:$i.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}},[$i.Mocknet]:{code:$i.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}},[$i.Regtest]:{code:$i.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}},[$i.Testnet]:{code:$i.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}};function Xi(e){return e!==Ji.bitcoin.code&&e!==Ji.ethmain.code}function Yi(e,t,r=[]){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if((e=Array.from(e)).length<t)throw new Error("Could not retrieve tx data");const n=e.map(((e,t)=>e.then((()=>t)).catch((e=>{throw t}))));return Promise.race(n).then((n=>(e.splice(n,1)[0].then((e=>r.push(e))),1===t?r:Yi(e,t-1,r)))).catch((n=>(e.splice(n,1),Yi(e,t,r))))}))}function Zi({explorerAPI:e,transactionIdPlaceholder:t="{transaction_id}",transactionId:r="",isTestApi:n=!1}){const{serviceURL:i}=e;let o="string"==typeof i?i:n?i.test:i.main;return o=o.replace(t,r),o=function(e,t){if(!t.key)return e;if(t.key&&!t.keyPropertyName)throw new Error(`No keyPropertyName defined for explorerAPI ${t.serviceName}`);return function(e,t,r){const n=e.includes("?")?"&":"?";return`${e}${n}${t}=${r}`}(e,t.keyPropertyName,t.key)}(o,e),o}function Qi(){throw new Error("setTimeout has not been defined")}function eo(){throw new Error("clearTimeout has not been defined")}var to=Qi,ro=eo;function no(e){if(to===setTimeout)return setTimeout(e,0);if((to===Qi||!to)&&setTimeout)return to=setTimeout,setTimeout(e,0);try{return to(e,0)}catch(t){try{return to.call(null,e,0)}catch(t){return to.call(this,e,0)}}}"function"==typeof dt.setTimeout&&(to=setTimeout),"function"==typeof dt.clearTimeout&&(ro=clearTimeout);var io,oo=[],so=!1,ao=-1;function uo(){so&&io&&(so=!1,io.length?oo=io.concat(oo):ao=-1,oo.length&&co())}function co(){if(!so){var e=no(uo);so=!0;for(var t=oo.length;t;){for(io=oo,oo=[];++ao<t;)io&&io[ao].run();ao=-1,t=oo.length}io=null,so=!1,function(e){if(ro===clearTimeout)return clearTimeout(e);if((ro===eo||!ro)&&clearTimeout)return ro=clearTimeout,clearTimeout(e);try{ro(e)}catch(t){try{return ro.call(null,e)}catch(t){return ro.call(this,e)}}}(e)}}function lo(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];oo.push(new ho(e,t)),1!==oo.length||so||no(co)}function ho(e,t){this.fun=e,this.array=t}function fo(){}ho.prototype.run=function(){this.fun.apply(null,this.array)};var po=fo,go=fo,mo=fo,yo=fo,vo=fo,bo=fo,wo=fo,_o=dt.performance||{},xo=_o.now||_o.mozNow||_o.msNow||_o.oNow||_o.webkitNow||function(){return(new Date).getTime()},So=new Date,Eo={nextTick:lo,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:po,addListener:go,once:mo,off:yo,removeListener:vo,removeAllListeners:bo,emit:wo,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*xo.call(_o),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-So)/1e3}},ko=/[^\x20-\x7E]/,Io=/[\x2E\u3002\uFF0E\uFF61]/g,Ao={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},To=Math.floor,Po=String.fromCharCode;
/*! https://mths.be/punycode v1.4.1 by @mathias */function Oo(e){throw new RangeError(Ao[e])}function Co(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Mo(e,t,r){var n=0;for(e=r?To(e/700):e>>1,e+=To(e/t);e>455;n+=36)e=To(e/35);return To(n+36*e/(e+38))}function No(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(Io,".")).split("."),(function(e){return ko.test(e)?"xn--"+function(e){var t,r,n,i,o,s,a,u,c,l,h,f,d,p,g,m=[];for(e=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e),f=e.length,t=128,r=0,o=72,s=0;s<f;++s)(h=e[s])<128&&m.push(Po(h));for(n=i=m.length,i&&m.push("-");n<f;){for(a=2147483647,s=0;s<f;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>To((2147483647-r)/(d=n+1))&&Oo("overflow"),r+=(a-t)*d,t=a,s=0;s<f;++s)if((h=e[s])<t&&++r>2147483647&&Oo("overflow"),h==t){for(u=r,c=36;!(u<(l=c<=o?1:c>=o+26?26:c-o));c+=36)g=u-l,p=36-l,m.push(Po(Co(l+g%p,0))),u=To(g/p);m.push(Po(Co(u,0))),o=Mo(r,d,n==i),r=0,++n}++r,++t}return m.join("")}(e):e})).join(".");return n+i}(e)}var Ro="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Lo=/%[sdj%]/g;function jo(e){if(!Zo(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(zo(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(Lo,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])Jo(s)||!rs(s)?o+=" "+s:o+=" "+zo(s);return o}function Do(e,t){if(es(dt.process))return function(){return Do(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var Bo,Uo={};function Fo(e){return es(Bo)&&(Bo=""),e=e.toUpperCase(),Uo[e]||(new RegExp("\\b"+e+"\\b","i").test(Bo)?Uo[e]=function(){var t=jo.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:Uo[e]=function(){}),Uo[e]}function zo(e,t){var r={seen:[],stylize:Ho};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Go(t)?r.showHidden=t:t&&ds(r,t),es(r.showHidden)&&(r.showHidden=!1),es(r.depth)&&(r.depth=2),es(r.colors)&&(r.colors=!1),es(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Vo),Ko(r,e,r.depth)}function Vo(e,t){var r=zo.styles[t];return r?"["+zo.colors[r][0]+"m"+e+"["+zo.colors[r][1]+"m":e}function Ho(e,t){return e}function Ko(e,t,r){if(e.customInspect&&t&&os(t.inspect)&&t.inspect!==zo&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Zo(n)||(n=Ko(e,n,r)),n}var i=function(e,t){if(es(t))return e.stylize("undefined","undefined");if(Zo(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return Yo(t)?e.stylize(""+t,"number"):Go(t)?e.stylize(""+t,"boolean"):Jo(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),is(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return qo(t);if(0===o.length){if(os(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(ts(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ns(t))return e.stylize(Date.prototype.toString.call(t),"date");if(is(t))return qo(t)}var u,c="",l=!1,h=["{","}"];return Wo(t)&&(l=!0,h=["[","]"]),os(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),ts(t)&&(c=" "+RegExp.prototype.toString.call(t)),ns(t)&&(c=" "+Date.prototype.toUTCString.call(t)),is(t)&&(c=" "+qo(t)),0!==o.length||l&&0!=t.length?r<0?ts(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=l?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)ps(t,String(s))?o.push($o(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push($o(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return $o(e,t,r,s,n,l)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,h)):h[0]+c+h[1]}function qo(e){return"["+Error.prototype.toString.call(e)+"]"}function $o(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),ps(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=Jo(r)?Ko(e,u.value,null):Ko(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),es(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Wo(e){return Array.isArray(e)}function Go(e){return"boolean"==typeof e}function Jo(e){return null===e}function Xo(e){return null==e}function Yo(e){return"number"==typeof e}function Zo(e){return"string"==typeof e}function Qo(e){return"symbol"==typeof e}function es(e){return void 0===e}function ts(e){return rs(e)&&"[object RegExp]"===us(e)}function rs(e){return"object"==typeof e&&null!==e}function ns(e){return rs(e)&&"[object Date]"===us(e)}function is(e){return rs(e)&&("[object Error]"===us(e)||e instanceof Error)}function os(e){return"function"==typeof e}function ss(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function as(e){return lr(e)}function us(e){return Object.prototype.toString.call(e)}function cs(e){return e<10?"0"+e.toString(10):e.toString(10)}zo.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},zo.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ls=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hs(){var e=new Date,t=[cs(e.getHours()),cs(e.getMinutes()),cs(e.getSeconds())].join(":");return[e.getDate(),ls[e.getMonth()],t].join(" ")}function fs(){console.log("%s - %s",hs(),jo.apply(null,arguments))}function ds(e,t){if(!t||!rs(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function ps(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var gs={inherits:Ro,_extend:ds,log:fs,isBuffer:as,isPrimitive:ss,isFunction:os,isError:is,isDate:ns,isObject:rs,isRegExp:ts,isUndefined:es,isSymbol:Qo,isString:Zo,isNumber:Yo,isNullOrUndefined:Xo,isNull:Jo,isBoolean:Go,isArray:Wo,inspect:zo,deprecate:Do,format:jo,debuglog:Fo},ms=Object.freeze({__proto__:null,format:jo,deprecate:Do,debuglog:Fo,inspect:zo,isArray:Wo,isBoolean:Go,isNull:Jo,isNullOrUndefined:Xo,isNumber:Yo,isString:Zo,isSymbol:Qo,isUndefined:es,isRegExp:ts,isObject:rs,isDate:ns,isError:is,isFunction:os,isPrimitive:ss,isBuffer:as,log:fs,inherits:Ro,_extend:ds,default:gs});function ys(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var vs=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function bs(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function ws(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var _s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function xs(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,l,h,f,d=e[u].replace(o,"%20"),p=d.indexOf(r);p>=0?(c=d.substr(0,p),l=d.substr(p+1)):(c=d,l=""),h=decodeURIComponent(c),f=decodeURIComponent(l),ys(i,h)?vs(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i}var Ss={parse:Ds,resolve:zs,resolveObject:Vs,format:Us,Url:Es};function Es(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ks=/^([a-z0-9.+-]+:)/i,Is=/:[0-9]*$/,As=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ts=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ps=["'"].concat(Ts),Os=["%","/","?",";","#"].concat(Ps),Cs=["/","?","#"],Ms=/^[+a-z0-9A-Z_-]{0,63}$/,Ns=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Rs={javascript:!0,"javascript:":!0},Ls={javascript:!0,"javascript:":!0},js={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ds(e,t,r){if(e&&rs(e)&&e instanceof Es)return e;var n=new Es;return n.parse(e,t,r),n}function Bs(e,t,r,n){if(!Zo(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var u=As.exec(a);if(u)return e.path=a,e.href=a,e.pathname=u[1],u[2]?(e.search=u[2],e.query=r?xs(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var c,l,h,f,d=ks.exec(a);if(d){var p=(d=d[0]).toLowerCase();e.protocol=p,a=a.substr(d.length)}if(n||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===a.substr(0,2);!g||d&&Ls[d]||(a=a.substr(2),e.slashes=!0)}if(!Ls[d]&&(g||d&&!js[d])){var m,y,v=-1;for(c=0;c<Cs.length;c++)-1!==(l=a.indexOf(Cs[c]))&&(-1===v||l<v)&&(v=l);for(-1!==(y=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(m=a.slice(0,y),a=a.slice(y+1),e.auth=decodeURIComponent(m)),v=-1,c=0;c<Os.length;c++)-1!==(l=a.indexOf(Os[c]))&&(-1===v||l<v)&&(v=l);-1===v&&(v=a.length),e.host=a.slice(0,v),a=a.slice(v),Hs(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var w=e.hostname.split(/\./);for(c=0,h=w.length;c<h;c++){var _=w[c];if(_&&!_.match(Ms)){for(var x="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?x+="x":x+=_[S];if(!x.match(Ms)){var k=w.slice(0,c),I=w.slice(c+1),A=_.match(Ns);A&&(k.push(A[1]),I.unshift(A[2])),I.length&&(a="/"+I.join(".")+a),e.hostname=k.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=No(e.hostname)),f=e.port?":"+e.port:"";var T=e.hostname||"";e.host=T+f,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Rs[p])for(c=0,h=Ps.length;c<h;c++){var P=Ps[c];if(-1!==a.indexOf(P)){var O=encodeURIComponent(P);O===P&&(O=escape(P)),a=a.split(P).join(O)}}var C=a.indexOf("#");-1!==C&&(e.hash=a.substr(C),a=a.slice(0,C));var M=a.indexOf("?");if(-1!==M?(e.search=a.substr(M),e.query=a.substr(M+1),r&&(e.query=xs(e.query)),a=a.slice(0,M)):r&&(e.search="",e.query={}),a&&(e.pathname=a),js[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){f=e.pathname||"";var N=e.search||"";e.path=f+N}return e.href=Fs(e),e}function Us(e){return Zo(e)&&(e=Bs({},e)),Fs(e)}function Fs(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&rs(e.query)&&Object.keys(e.query).length&&(s=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?ws(_s(e),(function(n){var i=encodeURIComponent(bs(n))+r;return vs(e[n])?ws(e[n],(function(e){return i+encodeURIComponent(bs(e))})).join(t):i+encodeURIComponent(bs(e[n]))})).join(t):""}(e.query));var a=e.search||s&&"?"+s||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||js[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),r+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i}function zs(e,t){return Ds(e,!1,!0).resolve(t)}function Vs(e,t){return e?Ds(e,!1,!0).resolveObject(t):t}function Hs(e){var t=e.host,r=Is.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}Es.prototype.parse=function(e,t,r){return Bs(this,e,t,r)},Es.prototype.format=function(){return Fs(this)},Es.prototype.resolve=function(e){return this.resolveObject(Ds(e,!1,!0)).format()},Es.prototype.resolveObject=function(e){if(Zo(e)){var t=new Es;t.parse(e,!1,!0),e=t}for(var r,n=new Es,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(n[c]=e[c])}return js[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!js[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var f=l[h];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Ls[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g,m=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=y||m||n.host&&e.pathname,b=v,w=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!js[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),v=v&&(""===r[0]||""===w[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(!Xo(e.search))return _&&(n.hostname=n.host=w.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=e.search,n.query=e.query,Jo(n.pathname)&&Jo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===x||".."===x)||""===x,E=0,k=w.length;k>=0;k--)"."===(x=w[k])?w.splice(k,1):".."===x?(w.splice(k,1),E++):E&&(w.splice(k,1),E--);if(!v&&!b)for(;E--;E)w.unshift("..");!v||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(n.hostname=n.host=I?"":w.length?w.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(v=v||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),Jo(n.pathname)&&Jo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Es.prototype.parseHost=function(){return Hs(this)};var Ks,qs,$s=ht(Object.freeze({__proto__:null,parse:Ds,resolve:zs,resolveObject:Vs,format:Us,default:Ss,Url:Es})),Ws=ht(Object.freeze({__proto__:null,default:{}})),Gs=na(dt.fetch)&&na(dt.ReadableStream);function Js(e){qs||(qs=new dt.XMLHttpRequest).open("GET",dt.location.host?"/":"https://example.com");try{return qs.responseType=e,qs.responseType===e}catch(e){return!1}}var Xs=void 0!==dt.ArrayBuffer,Ys=Xs&&na(dt.ArrayBuffer.prototype.slice),Zs=Xs&&Js("arraybuffer"),Qs=!Gs&&Ys&&Js("ms-stream"),ea=!Gs&&Xs&&Js("moz-chunked-arraybuffer"),ta=na(qs.overrideMimeType),ra=na(dt.VBArray);function na(e){return"function"==typeof e}function ia(){}function oa(){oa.init.call(this)}function sa(e){return void 0===e._maxListeners?oa.defaultMaxListeners:e._maxListeners}function aa(e,t,r){if(t)e.call(r);else for(var n=e.length,i=ga(e,n),o=0;o<n;++o)i[o].call(r)}function ua(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=ga(e,i),s=0;s<i;++s)o[s].call(r,n)}function ca(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=ga(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function la(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=ga(e,s),u=0;u<s;++u)a[u].call(r,n,i,o)}function ha(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=ga(e,i),s=0;s<i;++s)o[s].apply(r,n)}function fa(e,t,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new ia,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=sa(e))&&i>0&&s.length>i){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=r,++e._eventsCount;return e}function da(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function pa(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function ga(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}qs=null,ia.prototype=Object.create(null),oa.EventEmitter=oa,oa.usingDomains=!1,oa.prototype.domain=void 0,oa.prototype._events=void 0,oa.prototype._maxListeners=void 0,oa.defaultMaxListeners=10,oa.init=function(){this.domain=null,oa.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ia,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},oa.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},oa.prototype.getMaxListeners=function(){return sa(this)},oa.prototype.emit=function(e){var t,r,n,i,o,s,a,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:aa(r,l,this);break;case 2:ua(r,l,this,arguments[1]);break;case 3:ca(r,l,this,arguments[1],arguments[2]);break;case 4:la(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];ha(r,l,this,i)}return!0},oa.prototype.addListener=function(e,t){return fa(this,e,t,!1)},oa.prototype.on=oa.prototype.addListener,oa.prototype.prependListener=function(e,t){return fa(this,e,t,!0)},oa.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,da(this,e,t)),this},oa.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,da(this,e,t)),this},oa.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new ia:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new ia,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,s||t)}return this},oa.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new ia,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new ia:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new ia,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},oa.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},oa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):pa.call(e,t)},oa.prototype.listenerCount=pa,oa.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ma=Object.freeze({__proto__:null,default:oa,EventEmitter:oa});function ya(){this.head=null,this.tail=null,this.length=0}ya.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},ya.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},ya.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},ya.prototype.clear=function(){this.head=this.tail=null,this.length=0},ya.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},ya.prototype.concat=function(e){if(0===this.length)return Tt.alloc(0);if(1===this.length)return this.head.data;for(var t=Tt.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var va=Tt.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ba(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!va(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=_a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=xa;break;default:return void(this.write=wa)}this.charBuffer=new Tt(6),this.charReceived=0,this.charLength=0}function wa(e){return e.toString(this.encoding)}function _a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function xa(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}ba.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((n=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(n=t.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},ba.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},ba.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t};var Sa=Object.freeze({__proto__:null,StringDecoder:ba});Ia.ReadableState=ka;var Ea=Fo("stream");function ka(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Qa&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new ya,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ba(e.encoding),this.encoding=e.encoding)}function Ia(e){if(!(this instanceof Ia))return new Ia(e);this._readableState=new ka(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),oa.call(this)}function Aa(e,t,r,n,i){var o=function(e,t){var r=null;return lr(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Pa(e)}}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Pa(e))),function(e,t){t.readingMore||(t.readingMore=!0,lo(Ca,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function Ta(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function Pa(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Ea("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?lo(Oa,e):Oa(e))}function Oa(e){Ea("emit readable"),e.emit("readable"),Ra(e)}function Ca(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Ea("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function Ma(e){Ea("readable nexttick read 0"),e.read(0)}function Na(e,t){t.reading||(Ea("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Ra(e),t.flowing&&!t.reading&&e.read(0)}function Ra(e){var t=e._readableState;for(Ea("flow",t.flowing);t.flowing&&null!==e.read(););}function La(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=Tt.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0==(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function ja(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,lo(Da,t,e))}function Da(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Ba(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Ua(){}function Fa(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function za(e,t){Object.defineProperty(this,"buffer",{get:Do((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Qa&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?lo(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=$a(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||qa(e,r),n?lo(Ka,e,r,o,i):Ka(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ja(this)}function Va(e){if(!(this instanceof Va||this instanceof Qa))return new Va(e);this._writableState=new za(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),oa.call(this)}function Ha(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Ka(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),Ga(e,t)}function qa(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;Ha(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Ja(t)}else{for(;r;){var a=r.chunk,u=r.encoding,c=r.callback;if(Ha(e,t,!1,t.objectMode?1:a.length,a,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function $a(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Wa(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Ga(e,t){var r=$a(t);return r&&(0===t.pendingcb?(Wa(e,t),t.finished=!0,e.emit("finish")):Wa(e,t)),r}function Ja(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Ro(Ia,oa),Ia.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=Tt.from(e,t),t=""),Aa(this,r,e,t,!1)},Ia.prototype.unshift=function(e){return Aa(this,this._readableState,e,"",!0)},Ia.prototype.isPaused=function(){return!1===this._readableState.flowing},Ia.prototype.setEncoding=function(e){return this._readableState.decoder=new ba(e),this._readableState.encoding=e,this},Ia.prototype.read=function(e){Ea("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Ea("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ja(this):Pa(this),null;if(0===(e=Ta(e,t))&&t.ended)return 0===t.length&&ja(this),null;var n,i=t.needReadable;return Ea("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&Ea("length less than watermark",i=!0),t.ended||t.reading?Ea("reading or ended",i=!1):i&&(Ea("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ta(r,t))),null===(n=e>0?La(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ja(this)),null!==n&&this.emit("data",n),n},Ia.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Ia.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Ea("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end?c:s;function o(e){Ea("onunpipe"),e===r&&c()}function s(){Ea("onend"),e.end()}n.endEmitted?lo(i):r.once("end",i),e.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;Ea("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,Ra(e))}}(r);e.on("drain",a);var u=!1;function c(){Ea("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",c),r.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a()}var l=!1;function h(t){Ea("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==Ba(n.pipes,e))&&!u&&(Ea("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function f(t){Ea("onerror",t),g(),e.removeListener("error",f),0===function(e,t){return e.listeners("error").length}(e)&&e.emit("error",t)}function d(){e.removeListener("finish",p),g()}function p(){Ea("onfinish"),e.removeListener("close",d),g()}function g(){Ea("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(Ea("pipe resume"),r.resume()),e},Ia.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=Ba(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Ia.prototype.on=function(e,t){var r=oa.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Pa(this):lo(Ma,this))}return r},Ia.prototype.addListener=Ia.prototype.on,Ia.prototype.resume=function(){var e=this._readableState;return e.flowing||(Ea("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,lo(Na,e,t))}(this,e)),this},Ia.prototype.pause=function(){return Ea("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Ea("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ia.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(Ea("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){Ea("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){Ea("wrapped _read",t),r&&(r=!1,e.resume())},n},Ia._fromList=La,Va.WritableState=za,Ro(Va,oa),za.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Va.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Va.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),Tt.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=Ua),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),lo(t,r)}(this,r):function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):Tt.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),lo(n,o),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Tt.from(t,r)),t}(t,r,n),Tt.isBuffer(r)&&(n="buffer");var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new Fa(r,n,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Ha(e,t,!1,o,r,n,i);return s}(this,n,e,t,r)),i},Va.prototype.cork=function(){this._writableState.corked++},Va.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||qa(this,e))},Va.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Va.prototype._write=function(e,t,r){r(new Error("not implemented"))},Va.prototype._writev=null,Va.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,Ga(e,t),r&&(t.finished?lo(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Ro(Qa,Ia);for(var Xa=Object.keys(Va.prototype),Ya=0;Ya<Xa.length;Ya++){var Za=Xa[Ya];Qa.prototype[Za]||(Qa.prototype[Za]=Va.prototype[Za])}function Qa(e){if(!(this instanceof Qa))return new Qa(e);Ia.call(this,e),Va.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",eu)}function eu(){this.allowHalfOpen||this._writableState.ended||lo(tu,this)}function tu(e){e.end()}function ru(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function nu(e){if(!(this instanceof nu))return new nu(e);Qa.call(this,e),this._transformState=new ru(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){iu(t,e)})):iu(t)}))}function iu(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function ou(e){if(!(this instanceof ou))return new ou(e);nu.call(this,e)}function su(){oa.call(this)}Ro(nu,Qa),nu.prototype.push=function(e,t){return this._transformState.needTransform=!1,Qa.prototype.push.call(this,e,t)},nu.prototype._transform=function(e,t,r){throw new Error("Not implemented")},nu.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},nu.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Ro(ou,nu),ou.prototype._transform=function(e,t,r){r(null,e)},Ro(su,oa),su.Readable=Ia,su.Writable=Va,su.Duplex=Qa,su.Transform=nu,su.PassThrough=ou,su.Stream=su,su.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===oa.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var au=Object.freeze({__proto__:null,default:su,Readable:Ia,Writable:Va,Duplex:Qa,Transform:nu,PassThrough:ou,Stream:su});function uu(e,t,r){var n,i=this;if(Ia.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){lo((function(){i.emit("close")}))})),"fetch"===r){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var o,s,a=t.headers[Symbol.iterator]();o=(s=a.next()).value,!s.done;)i.headers[o[0].toLowerCase()]=o[1],i.rawHeaders.push(o[0],o[1]);var u=t.body.getReader();(n=function(){u.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new Tt(e.value)),n()))}))})()}else if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(t[2])):void 0!==i.headers[r]?i.headers[r]+=", "+t[2]:i.headers[r]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!ta){var c=i.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase())}i._charset||(i._charset="utf-8")}}function cu(e){var t,r=this;Va.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new Tt(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!ta;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return Gs&&t?"fetch":ea?"moz-chunked-arraybuffer":Qs?"ms-stream":Zs&&e?"arraybuffer":ra&&e?"text:vbarray":"text"}(t,n),r.on("finish",(function(){r._onFinish()}))}Ro(uu,Ia),uu.prototype._read=function(){},uu.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(4!==t.readyState)break;try{r=new dt.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new Tt(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new Tt(n.length),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(4!==t.readyState||!t.response)break;r=t.response,e.push(new Tt(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,3!==t.readyState||!r)break;e.push(new Tt(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,3!==t.readyState)break;var s=new dt.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new Tt(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r)}4===e._xhr.readyState&&"ms-stream"!==e._mode&&e.push(null)},Ro(cu,Va);var lu=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];function hu(e,t){"string"==typeof e&&(e=Ds(e));var r=-1===dt.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new cu(e);return t&&a.on("response",t),a}function fu(e,t){var r=hu(e,t);return r.end(),r}function du(){}cu.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===lu.indexOf(r)&&(this._headers[r]={name:e,value:t})},cu.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},cu.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},cu.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,r=e._opts,n=e._headers;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method||(t=function(){if(void 0!==Ks)return Ks;try{new dt.Blob([new ArrayBuffer(1)]),Ks=!0}catch(e){Ks=!1}return Ks}()?new dt.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(lr(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(n["content-type"]||{}).value||""}):Tt.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(n).map((function(e){return[n[e].name,n[e].value]}));dt.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var o=e._xhr=new dt.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(t){return void lo((function(){e.emit("error",t)}))}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach((function(e){o.setRequestHeader(n[e].name,n[e].value)})),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case 3:case 4:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(t)}catch(t){return void lo((function(){e.emit("error",t)}))}}}},cu.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},cu.prototype._connect=function(){var e=this;e._destroyed||(e._response=new uu(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},cu.prototype._write=function(e,t,r){this._body.push(e),r()},cu.prototype.abort=cu.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},cu.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),Va.prototype.end.call(this,e,t,r)},cu.prototype.flushHeaders=function(){},cu.prototype.setTimeout=function(){},cu.prototype.setNoDelay=function(){},cu.prototype.setSocketKeepAlive=function(){},du.defaultMaxSockets=4;var pu=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],gu={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},mu={request:hu,get:fu,Agent:du,METHODS:pu,STATUS_CODES:gu},yu=ht(Object.freeze({__proto__:null,request:hu,get:fu,Agent:du,METHODS:pu,STATUS_CODES:gu,default:mu})),vu=$s,bu=Ws.spawn,wu=Ws,_u=function(){var e,t,r=this,n=yu,i=yu,o={},s=!1,a={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u={},c={},l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],h=["TRACE","TRACK","CONNECT"],f=!1,d=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1,this.open=function(e,t,r,n,i){if(this.abort(),d=!1,!function(e){return e&&-1===h.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");o={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},g(this.OPENED)},this.setDisableHeaderCheck=function(e){s=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return s||e&&-1===l.indexOf(e.toLowerCase())}(e)){if(f)throw new Error("INVALID_STATE_ERR: send flag is true");e=c[e.toLowerCase()]||e,c[e.toLowerCase()]=e,u[e]=u[e]?u[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!d?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||d)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&c[e.toLowerCase()]?u[c[e.toLowerCase()]]:""},this.send=function(s){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(f)throw new Error("INVALID_STATE_ERR: send has already been called");var l,h=!1,p=!1,m=vu.parse(o.url);switch(m.protocol){case"https:":h=!0;case"http:":l=m.hostname;break;case"file:":p=!0;break;case void 0:case null:case"":l="localhost";break;default:throw new Error("Protocol not supported.")}if(p){if("GET"!==o.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)wu.readFile(m.pathname,"utf8",(function(e,t){e?r.handleError(e):(r.status=200,r.responseText=t,g(r.DONE))}));else try{this.responseText=wu.readFileSync(m.pathname,"utf8"),this.status=200,g(r.DONE)}catch(e){this.handleError(e)}}else{var y=m.port||(h?443:80),v=m.pathname+(m.search?m.search:"");for(var b in a)c[b.toLowerCase()]||(u[b]=a[b]);if(u.Host=l,h&&443===y||80===y||(u.Host+=":"+m.port),o.user){void 0===o.password&&(o.password="");var w=new Tt(o.user+":"+o.password);u.Authorization="Basic "+w.toString("base64")}"GET"===o.method||"HEAD"===o.method?s=null:s?(u["Content-Length"]=lr(s)?s.length:Tt.byteLength(s),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===o.method&&(u["Content-Length"]=0);var _={host:l,port:y,path:v,method:o.method,headers:u,agent:!1,withCredentials:r.withCredentials};if(d=!1,o.async){var x=h?i.request:n.request;f=!0,r.dispatchEvent("readystatechange");var S=function(e){r.handleError(e)};e=x(_,(function n(i){if(301!==(t=i).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),g(r.HEADERS_RECEIVED),r.status=t.statusCode,t.on("data",(function(e){e&&(r.responseText+=e),f&&g(r.LOADING)})),t.on("end",(function(){f&&(g(r.DONE),f=!1)})),t.on("error",(function(e){r.handleError(e)}));else{o.url=t.headers.location;var s=vu.parse(o.url);l=s.hostname;var a={hostname:s.hostname,port:s.port,path:s.path,method:303===t.statusCode?"GET":o.method,headers:u,withCredentials:r.withCredentials};(e=x(a,n).on("error",S)).end()}})).on("error",S),s&&e.write(s),e.end(),r.dispatchEvent("loadstart")}else{var E=".node-xmlhttprequest-content-"+Eo.pid,k=".node-xmlhttprequest-sync-"+Eo.pid;wu.writeFileSync(k,"","utf8");for(var I="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(_)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+E+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+k+"');});response.on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+k+"');});}).on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+k+"');});"+(s?"req.write('"+JSON.stringify(s).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=bu(Eo.argv[0],["-e",I]);wu.existsSync(k););var T=JSON.parse(wu.readFileSync(E,"utf8"));A.stdin.end(),wu.unlinkSync(E),T.err?r.handleError(T.err):(t=T.data,r.status=T.data.statusCode,r.responseText=T.data.text,g(r.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,d=!0,g(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),u=a,this.status=0,this.responseText="",this.responseXML="",d=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!f||this.readyState===this.DONE||(f=!1,g(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof r["on"+e]&&r["on"+e](),e in p)for(var t=0,n=p[e].length;t<n;t++)p[e][t].call(r)};var g=function(e){e!=r.LOADING&&r.readyState===e||(r.readyState=e,(o.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState!==r.DONE||d||(r.dispatchEvent("load"),r.dispatchEvent("loadend")))}};function xu(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return yield new Promise(((t,r)=>{let{url:n}=e;n||r(new Error("URL is missing")),"http://"!==n.substr(0,7)||e.forceHttp||(console.warn(`Upgrading requested url ${n} to https protocol.`),n=n.replace("http://","https://"));const i=new("undefined"==typeof XMLHttpRequest?_u:XMLHttpRequest);e["bearer-token"]&&i.setRequestHeader("Authorization",`Bearer ${e["bearer-token"]}`),i.onload=()=>{if(i.status>=200&&i.status<300)t(i.responseText);else{console.log(i.responseText);const e=`Error fetching url:${n}; status code:${i.status}`;r(new Error(e))}},i.ontimeout=e=>{console.log("ontimeout",e)},i.onreadystatechange=()=>{404===i.status&&r(new Error(`Error fetching url:${n}; status code:${i.status}`))},i.onerror=()=>{console.error(`Request failed with error ${i.responseText}`),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}))}))}function Su(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function Eu(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(Su(e,n))return e.slice(n.length)}return e}var ku=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const Iu="https://api.etherscan.io/api?module=proxy",Au="https://api-ropsten.etherscan.io/api?module=proxy",Tu={serviceURL:{main:`${Iu}&action=eth_getTransactionByHash&txhash={transaction_id}`,test:`${Au}&action=eth_getTransactionByHash&txhash={transaction_id}`},serviceName:qi.etherscan,parsingFunction:function({jsonResponse:e,chain:t,key:r,keyPropertyName:n}){return ku(this,void 0,void 0,(function*(){const i={serviceURL:{main:`${Iu}&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}`,test:`${Au}&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}`}},o={serviceURL:{main:`${Iu}&action=eth_blockNumber`,test:`${Au}&action=eth_blockNumber`}},s=yield function(e,t){return ku(this,void 0,void 0,(function*(){const s=e.result.blockNumber,a=Zi({explorerAPI:Object.assign(Object.assign({},i),{key:r,keyPropertyName:n}),transactionId:s,isTestApi:Xi(t)});try{const e=yield xu({url:a}),i=JSON.parse(e).result;return yield function(e,t){return ku(this,void 0,void 0,(function*(){const i=Zi({explorerAPI:Object.assign(Object.assign({},o),{key:r,keyPropertyName:n}),isTestApi:Xi(e)});let s;try{s=yield xu({url:i})}catch(e){throw new Error("Unable to get remote hash")}const a=JSON.parse(s).result;if(a-t<1)throw new Error("Not enough");return a}))}(t,s),i}catch(e){throw new Error("Unable to get remote hash")}}))}(e,t);return function(e,t){const r=e.result,n=new Date(1e3*parseInt(t.timestamp,16)),i=r.from;return{remoteHash:Eu(r.input,Ji.ethmain.prefixes),issuingAddress:i,time:n,revokedAddresses:[]}}(e,s)}))},priority:-1};function Pu(e){return""===e?"":function(e){const t=Date.parse(e);if(t)return new Date(t);const r=function(e){let t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));const r=e.slice(-5);let n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t.getTime()}(e);return r||function(e){let t,r;const n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}(`${e}`)}function Ou(e){return new Date(1e3*e)}const Cu={serviceURL:{main:"https://api.blockcypher.com/v1/eth/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/beth/test/txs/{transaction_id}?limit=500"},serviceName:qi.blockcypher,parsingFunction:function({jsonResponse:e}){if(e.confirmations<1)throw new Error("Not enough");const t=Pu(e.received),r=e.outputs,n=r[r.length-1];let i=e.inputs[0].addresses[0];const o=Eu(n.script,Ji.ethmain.prefixes);i=function(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(!Su(e,n))return`${n}${e}`}return e}(i,Ji.ethmain.prefixes);const s=r.filter((e=>!!e.spent_by)).map((e=>e.addresses[0]));return{remoteHash:o,issuingAddress:i,time:t,revokedAddresses:s}},priority:-1},Mu={serviceURL:{main:"https://blockstream.info/api/tx/{transaction_id}",test:"https://blockstream.info/testnet/api/tx/{transaction_id}"},serviceName:qi.blockstream,parsingFunction:function({jsonResponse:e}){if(!e.status.confirmed)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockstream API");const t=Ou(e.status.block_time),r=e.vout,n=r[r.length-1],i=e.vin[0].prevout.scriptpubkey_address,o=Eu(n.scriptpubkey,Ji.bitcoin.prefixes),s=r.filter((e=>!!e.scriptpubkey_address)).map((e=>e.scriptpubkey_address));return{remoteHash:o,issuingAddress:i,time:t,revokedAddresses:s}},priority:-1},Nu={serviceURL:{main:"https://api.blockcypher.com/v1/btc/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/btc/test3/txs/{transaction_id}?limit=500"},serviceName:qi.blockcypher,parsingFunction:function({jsonResponse:e}){if(e.confirmations<1)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockcypher API");const t=Pu(e.received),r=e.outputs,n=r[r.length-1],i=e.inputs[0].addresses[0],o=Eu(n.script,Ji.bitcoin.prefixes),s=r.filter((e=>!!e.spent_by)).map((e=>e.addresses[0]));return{remoteHash:o,issuingAddress:i,time:t,revokedAddresses:s}},priority:-1};var Ru=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function Lu(e){return e.map((e=>({getTxData:(t,r)=>Ru(this,void 0,void 0,(function*(){return yield function(e,t,r){return Ru(this,void 0,void 0,(function*(){const n=Zi({explorerAPI:e,transactionId:t,isTestApi:Xi(r)});try{const t=yield xu({url:n});return yield e.parsingFunction(Object.assign({jsonResponse:JSON.parse(t),chain:r},e))}catch(e){throw new Error("Unable to get remote hash")}}))}(e,t,r)})),priority:e.priority})))}const ju=[Nu,Mu],Du=[Tu,Cu];function Bu({serviceUrl:e,transactionId:t}){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const r={method:"eth_getTransactionByHash",jsonrpc:"2.0",id:"getbyhash",params:["0x"+t]},n=yield xu({url:e,body:r,method:"POST"}),i=JSON.parse(n),o={method:"eth_getBlockByNumber",jsonrpc:"2.0",id:"blockbynumber",params:[i.result.blockNumber,!0]},s=yield xu({url:e,body:o,method:"POST"}),a=JSON.parse(s),u=i.result,c=a.result,l=new Date(1e3*parseInt(c.timestamp,16)),h=u.from;return{remoteHash:Eu(u.input,["0x"]),issuingAddress:h,time:l,revokedAddresses:[]}}))}function Uu({serviceUrl:e,transactionId:t}){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const r={method:"getrawtransaction",jsonrpc:"2.0",id:"rpctest",params:[t,!0]},n=yield xu({url:e,body:r,method:"POST"}),i=JSON.parse(n).result,o=i.vout[0].scriptPubKey.addresses[0],s=Eu(i.vout[1].scriptPubKey.asm,["6a20","OP_RETURN "]),a=Ou(i.blocktime),u=i.vout.filter((e=>!!e.scriptPubKey.addresses)).map((e=>e.scriptPubKey.addresses)).flat();return{issuingAddress:o,remoteHash:s,time:a,revokedAddresses:u}}))}const Fu=[];function zu(e=[],t=[],r=!1){const n=e.map((e=>e.serviceName)).filter((e=>!!e)).filter((e=>!!qi[e]));return n.length?t.reduce(((t,i)=>{if(n.includes(i.serviceName)){const r=Object.assign({},i),n=e.find((e=>e.serviceName===i.serviceName));if(function(e){if(e.key&&!e.keyPropertyName)throw new Error(`Property keyPropertyName is not set for ${e.serviceName}. Cannot pass the key property to the service.`);return!0}(n)){const i=Object.assign(r,n);t.push(i);const o=e.findIndex((e=>e.serviceName===i.serviceName));Fu.includes(o)||Fu.push(o)}}else t.push(i);return r&&function(e,t){t.forEach((t=>e.splice(t,1)))}(e,Fu),t}),[]):t}function Vu(e){return e.map((e=>(e.parsingFunction||(e.parsingFunction="btc"===e.chainType?Uu:Bu),e))).map((e=>({getTxData:t=>function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return yield e.parsingFunction(Object.assign(Object.assign({},e),{transactionId:t}))})),priority:e.priority})))}var Hu=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function Ku(e,t){var r;switch(e){case Ji[$i.Bitcoin].code:case Ji[$i.Regtest].code:case Ji[$i.Testnet].code:case Ji[$i.Mocknet].code:return t.bitcoin;case Ji[$i.Ethmain].code:case Ji[$i.Ethropst].code:case Ji[$i.Ethrinkeby].code:return t.ethereum;default:if(!(null===(r=t.custom)||void 0===r?void 0:r.length))throw new Error("Chain is not natively supported. Use custom explorers to retrieve tx data.");return t.custom}}function qu(e,t,r,n){return Hu(this,void 0,void 0,(function*(){try{const i=function(e,t,r){if(1>e.length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");const n=[],i=e.length;for(let o=0;o<i;o++)n.push(e[o].getTxData(t,r));return n}(e[t],r,n);return yield function(e){return Hu(this,void 0,void 0,(function*(){let t;try{t=yield Yi(e,1)}catch(e){throw new Error(`Transaction lookup error: ${e.message}`)}if(!t||0===t.length)throw new Error("Could not confirm transaction data.");const r=t[0];for(let e=1;e<t.length;e++){const n=t[e];if(r.issuingAddress!==n.issuingAddress)throw new Error("Issuing addresses do not match consistently");if(r.remoteHash!==n.remoteHash)throw new Error("Remote hashes do not match consistently")}return r}))}(i)}catch(i){if(t<e.length-1)return t++,yield qu(e,t,r,n);throw i}}))}const $u={value:"https://dev.uniresolver.io/1.0/identifiers",set url(e){this.value=e},get url(){return this.value}};function Wu(e){return e.startsWith("did:",0)}function Gu(e){return e.startsWith("did:key:",0)}const Ju={},Xu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
/*!
   * Copyright (c) 2019-2022 Digital Bazaar, Inc. All rights reserved.
   */function Yu(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";let n="",i=0;const o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){let t=e[i];for(let e=0;e<a.length;++e)t+=a[e]<<8,a[e]=t%o,t=t/o|0;for(;t>0;)a.push(t%o),t=t/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]];if(r){const e=new RegExp(".{1,"+r+"}","g");n=n.match(e).join("\r\n")}return n}(e,Xu,t)}function Zu(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(0===e.length)return new Uint8Array;let r=Ju[t];if(!r){r=Ju[t]=[];for(let e=0;e<t.length;++e)r[t.charCodeAt(e)]=e}e=e.replace(/\s/g,"");const n=t.length,i=t.charAt(0),o=[0];for(let t=0;t<e.length;t++){const i=r[e.charCodeAt(t)];if(void 0===i)return;let s=i;for(let e=0;e<o.length;++e)s+=o[e]*n,o[e]=255&s,s>>=8;for(;s>0;)o.push(255&s),s>>=8}for(let t=0;e[t]===i&&t<e.length-1;++t)o.push(0);return new Uint8Array(o.reverse())}(e,Xu)}
/*!
   * Copyright (c) 2018-2022 Digital Bazaar, Inc. All rights reserved.
   */const Qu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ec=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function tc(e){if(!(e instanceof Uint8Array||"string"==typeof e))throw new TypeError('"input" be a string or Uint8Array.');"string"==typeof e&&(e=(new TextEncoder).encode(e));let t,r,n,i="",o=0;for(;o<e.byteLength;)t=e[o++],r=e[o++],n=e[o++],i+=Qu.charAt(t>>2),i+=Qu.charAt((3&t)<<4|r>>4),isNaN(r)||(i+=Qu.charAt((15&r)<<2|n>>6),isNaN(n)||(i+=Qu.charAt(63&n)));return i}var rc={},nc=Object.freeze({__proto__:null,default:rc});
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const ic=BigInt(0),oc=BigInt(1),sc=BigInt(2),ac=BigInt(255),uc=sc**BigInt(252)+BigInt("27742317777372353535851937790883648493"),cc={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:sc**ac-BigInt(19),l:uc,n:uc,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},lc=sc**BigInt(256),hc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class fc{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof mc))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(mc.ZERO)?fc.ZERO:new fc(e.x,e.y,oc,Ec(e.x*e.y))}static toAffineBatch(e){const t=function(e,t=cc.P){const r=new Array(e.length),n=kc(e.reduce(((e,n,i)=>n===ic?e:(r[i]=e,Ec(e*n,t))),oc),t);return e.reduceRight(((e,n,i)=>n===ic?e:(r[i]=Ec(e*r[i],t),Ec(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){dc(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:s}=e,a=Ec(t*s),u=Ec(i*n),c=Ec(r*s),l=Ec(o*n);return a===u&&c===l}negate(){return new fc(Ec(-this.x),this.y,this.z,Ec(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=cc,i=Ec(e**sc),o=Ec(t**sc),s=Ec(sc*Ec(r**sc)),a=Ec(n*i),u=Ec(Ec((e+t)**sc)-i-o),c=a+o,l=c-s,h=a-o,f=Ec(u*l),d=Ec(c*h),p=Ec(u*h),g=Ec(l*c);return new fc(f,d,g,p)}add(e){dc(e);const{x:t,y:r,z:n,t:i}=this,{x:o,y:s,z:a,t:u}=e,c=Ec((r-t)*(s+o)),l=Ec((r+t)*(s-o)),h=Ec(l-c);if(h===ic)return this.double();const f=Ec(n*sc*u),d=Ec(i*sc*a),p=d+f,g=l+c,m=d-f,y=Ec(p*h),v=Ec(g*m),b=Ec(p*m),w=Ec(h*g);return new fc(y,v,w,b)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(fc.BASE)&&(t=mc.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&gc.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=fc.normalizeZ(n),gc.set(t,n)));let i=fc.ZERO,o=fc.ZERO;const s=1+256/r,a=2**(r-1),u=BigInt(2**r-1),c=2**r,l=BigInt(r);for(let t=0;t<s;t++){const r=t*a;let s=Number(e&u);if(e>>=l,s>a&&(s-=c,e+=oc),0===s){let e=n[r];t%2&&(e=e.negate()),o=o.add(e)}else{let e=n[r+Math.abs(s)-1];s<0&&(e=e.negate()),i=i.add(e)}}return fc.normalizeZ([i,o])[0]}multiply(e,t){return this.wNAF(Pc(e,cc.l),t)}multiplyUnsafe(e){let t=Pc(e,cc.l,!1);const r=fc.BASE,n=fc.ZERO;if(t===ic)return n;if(this.equals(n)||t===oc)return this;if(this.equals(r))return this.wNAF(t);let i=n,o=this;for(;t>ic;)t&oc&&(i=i.add(o)),o=o.double(),t>>=oc;return i}isSmallOrder(){return this.multiplyUnsafe(cc.h).equals(fc.ZERO)}isTorsionFree(){return this.multiplyUnsafe(cc.l).equals(fc.ZERO)}toAffine(e=kc(this.z)){const{x:t,y:r,z:n}=this,i=Ec(t*e),o=Ec(r*e);if(Ec(n*e)!==oc)throw new Error("invZ was invalid");return new mc(i,o)}fromRistrettoBytes(){pc()}toRistrettoBytes(){pc()}fromRistrettoHash(){pc()}}function dc(e){if(!(e instanceof fc))throw new TypeError("ExtendedPoint expected")}function pc(){throw new Error("Legacy method: switch to RistrettoPoint")}fc.BASE=new fc(cc.Gx,cc.Gy,oc,Ec(cc.Gx*cc.Gy)),fc.ZERO=new fc(ic,oc,oc,ic);const gc=new WeakMap;class mc{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,gc.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=cc,i=(e=Tc(e,32)).slice();i[31]=-129&e[31];const o=Sc(i);if(t&&o>=n)throw new Error("Expected 0 < hex < P");if(!t&&o>=lc)throw new Error("Expected 0 < hex < 2**256");const s=Ec(o*o),a=Ec(s-oc),u=Ec(r*s+oc);let{isValid:c,value:l}=function(e,t){const r=Ec(t*t*t),n=function(e){const{P:t}=cc,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),a=e*e%t*e%t,u=Ic(a,sc)*a%t,c=Ic(u,oc)*e%t,l=Ic(c,r)*c%t,h=Ic(l,n)*l%t,f=Ic(h,i)*h%t,d=Ic(f,o)*f%t,p=Ic(d,s)*d%t,g=Ic(p,s)*d%t,m=Ic(g,n)*l%t;return{pow_p_5_8:Ic(m,sc)*e%t,b2:a}}(e*Ec(r*r*t)).pow_p_5_8;let i=Ec(e*r*n);const o=Ec(t*i*i),s=i,a=Ec(i*hc),u=o===e,c=o===Ec(-e),l=o===Ec(-e*hc);return u&&(i=s),(c||l)&&(i=a),(Ec(i)&oc)===oc&&(i=Ec(-i)),{isValid:u||c,value:i}}(a,u);if(!c)throw new Error("Point.fromHex: invalid y coordinate");const h=(l&oc)===oc;return 0!=(128&e[31])!==h&&(l=Ec(-l)),new mc(l,o)}static async fromPrivateKey(e){return(await Oc(e)).point}toRawBytes(){const e=xc(this.y);return e[31]|=this.x&oc?128:0,e}toHex(){return bc(this.toRawBytes())}toX25519(){const{y:e}=this;return xc(Ec((oc+e)*kc(oc-e)))}isTorsionFree(){return fc.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new mc(Ec(-this.x),this.y)}add(e){return fc.fromAffine(this).add(fc.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return fc.fromAffine(this).multiply(e,this).toAffine()}}mc.BASE=new mc(cc.Gx,cc.Gy),mc.ZERO=new mc(ic,oc);class yc{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=Tc(e,64),r=mc.fromHex(t.slice(0,32),!1),n=Sc(t.slice(32,64));return new yc(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof mc))throw new Error("Expected Point instance");return Pc(t,cc.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(xc(this.s),32),e}toHex(){return bc(this.toRawBytes())}}const vc=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bc(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=vc[e[r]];return t}function wc(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function _c(e){return wc(e.toString(16).padStart(64,"0"))}function xc(e){return _c(e).reverse()}function Sc(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bc(Uint8Array.from(e).reverse()))}function Ec(e,t=cc.P){const r=e%t;return r>=ic?r:t+r}function kc(e,t=cc.P){if(e===ic||t<=ic)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ec(e,t),n=t,i=ic,o=oc;for(;r!==ic;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==oc)throw new Error("invert: does not exist");return Ec(i,t)}function Ic(e,t){const{P:r}=cc;let n=e;for(;t-- >ic;)n*=n,n%=r;return n}async function Ac(...e){const t=await Mc.sha512(function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...e));return Ec(Sc(t),cc.l)}function Tc(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):wc(e);if("number"==typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Pc(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(ic<e)return e}else if(ic<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}async function Oc(e){if(32!==(e="bigint"==typeof e||"number"==typeof e?_c(Pc(e,lc)):Tc(e)).length)throw new Error("Expected 32 bytes");const t=await Mc.sha512(e),r=((n=t.slice(0,32))[0]&=248,n[31]&=127,n[31]|=64,n);var n;const i=t.slice(32,64),o=Ec(Sc(r),cc.l),s=mc.BASE.multiply(o),a=s.toRawBytes();return{head:r,prefix:i,scalar:o,point:s,pointBytes:a}}mc.BASE._setWindowSize(8);const Cc={node:rc,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},Mc={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:bc,getExtendedPublicKey:Oc,mod:Ec,invert:kc,hashToPrivateScalar:e=>{if((e=Tc(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=Ec(Sc(e),cc.l);if(t===ic||t===oc)throw new Error("Invalid private key");return t},randomBytes:(e=32)=>{if(Cc.web)return Cc.web.getRandomValues(new Uint8Array(e));if(Cc.node){const{randomBytes:t}=Cc.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Mc.randomBytes(32),sha512:async e=>{if(Cc.web){const t=await Cc.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if(Cc.node)return Uint8Array.from(Cc.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=mc.BASE){const r=t.equals(mc.BASE)?t:new mc(t.x,t.y);return r._setWindowSize(e),r.multiply(sc),r}},Nc=self.crypto;if(!Nc.getRandomValues)throw new Error('Browser does not provide "crypto.getRandomValues".');var Rc={async generateKeyPair(){const e=new Uint8Array(32);Nc.getRandomValues(e);const t=await Lc(e);return e.fill(0),t},generateKeyPairFromSeed:Lc,sign:async(e,t)=>async function(e,t){e=Tc(e);const{prefix:r,scalar:n,pointBytes:i}=await Oc(t),o=await Ac(r,e),s=mc.BASE.multiply(o),a=Ec(o+await Ac(s.toRawBytes(),i,e)*n,cc.l);return new yc(s,a).toRawBytes()}(t,e.slice(0,32)),verify:async(e,t,r)=>async function(e,t,r){t=Tc(t),r instanceof mc||(r=mc.fromHex(r,!1));const{r:n,s:i}=e instanceof yc?e.assertValidity():yc.fromHex(e),o=fc.BASE.multiplyUnsafe(i),s=await Ac(n.toRawBytes(),r.toRawBytes(),t),a=fc.fromAffine(r).multiplyUnsafe(s);return fc.fromAffine(n).add(a).subtract(o).multiplyUnsafe(cc.h).equals(fc.ZERO)}(r,t,e),sha256digest:async({data:e})=>Nc.subtle.digest("SHA-256",e)};async function Lc(e){const t=await async function(e){return(await Oc(e)).pointBytes}(e),r=new Uint8Array(64);return r.set(e),r.set(t,e.length),{publicKey:t,secretKey:r}}
/*!
   * Copyright (c) 2018-2022 Digital Bazaar, Inc. All rights reserved.
   */class jc{constructor({id:e,controller:t,revoked:r}={}){this.id=e,this.controller=t,this.revoked=r}static async generate(){throw new Error("Abstract method, must be implemented in subclass.")}static async fromKeyDocument({document:e,checkContext:t=!0,checkRevoked:r=!0}={}){if(!e)throw new TypeError('The "document" parameter is required.');if(t&&![].concat(e["@context"]).includes(this.SUITE_CONTEXT))throw new Error('Key document does not contain required context "'+this.SUITE_CONTEXT+'".');if(r&&e.revoked)throw new Error(`Key has been revoked since: "${e.revoked}".`);return this.from(e)}static async from(){throw new Error("Abstract method from() must be implemented in subclass.")}export({publicKey:e=!1,privateKey:t=!1}={}){if(!e&&!t)throw new Error('Export requires specifying either "publicKey" or "privateKey".');const r={id:this.id,type:this.type,controller:this.controller};return this.revoked&&(r.revoked=this.revoked),r}fingerprint(){throw new Error("Abstract method, must be implemented in subclass.")}verifyFingerprint(){throw new Error("Abstract method, must be implemented in subclass.")}signer(){return{async sign({}){throw new Error("Abstract method, must be implemented in subclass.")}}}verifier(){return{async verify({}){throw new Error("Abstract method, must be implemented in subclass.")}}}}jc.SUITE_CONTEXT="INVALID LDKeyPair CONTEXT";
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
const Dc=new Uint8Array([237,1]),Bc=new Uint8Array([128,38]);class Uc extends jc{constructor(e={}){super(e),this.type="Ed25519VerificationKey2020";const{publicKeyMultibase:t,privateKeyMultibase:r}=e;if(!t)throw new TypeError('The "publicKeyMultibase" property is required.');if(!t||!Fc(t,Dc))throw new Error(`"publicKeyMultibase" has invalid header bytes: "${t}".`);if(r&&!Fc(r,Bc))throw new Error('"privateKeyMultibase" has invalid header bytes.');this.publicKeyMultibase=t,this.privateKeyMultibase=r,this.controller&&!this.id&&(this.id=`${this.controller}#${this.fingerprint()}`)}static async from(e){return"Ed25519VerificationKey2018"===e.type?Uc.fromEd25519VerificationKey2018(e):"JsonWebKey2020"===e.type?Uc.fromJsonWebKey2020(e):new Uc(e)}static fromEd25519VerificationKey2018({keyPair:e}={}){const t=zc(Dc,Zu(e.publicKeyBase58)),r=new Uc({id:e.id,controller:e.controller,publicKeyMultibase:t});return e.privateKeyBase58&&(r.privateKeyMultibase=zc(Bc,Zu(e.privateKeyBase58))),r}static fromJsonWebKey2020({id:e,type:t,controller:r,publicKeyJwk:n}={}){if("JsonWebKey2020"!==t)throw new TypeError(`Invalid key type: "${t}".`);if(!n)throw new TypeError('"publicKeyJwk" property is required.');const{kty:i,crv:o}=n;if("OKP"!==i)throw new TypeError('"kty" is required to be "OKP".');if("Ed25519"!==o)throw new TypeError('"crv" is required to be "Ed25519".');const{x:s}=n,a=zc(Dc,function(e){let t=e.length;const r=t%4;if(1===r)throw new Error("Illegal base64 string.");let n=0;r>0&&(n=4-r,t+=n);const i=new Uint8Array(t/4*3-n);let o,s,a,u,c=0,l=0;for(;c<t;)o=ec[e.charCodeAt(c++)-45],s=ec[e.charCodeAt(c++)-45],i[l++]=o<<2|s>>4,c<e.length&&(a=ec[e.charCodeAt(c++)-45],i[l++]=(15&s)<<4|a>>2,c<e.length&&(u=ec[e.charCodeAt(c++)-45],i[l++]=(3&a)<<6|u));return i}(s));return Uc.from({id:e,controller:r,publicKeyMultibase:a})}static async generate({seed:e,...t}={}){let r;r=e?await Rc.generateKeyPairFromSeed(e):await Rc.generateKeyPair();const n=zc(Dc,r.publicKey),i=zc(Bc,r.secretKey);return new Uc({publicKeyMultibase:n,privateKeyMultibase:i,...t})}static fromFingerprint({fingerprint:e}={}){return new Uc({publicKeyMultibase:e})}get _publicKeyBuffer(){if(this.publicKeyMultibase)return Zu(this.publicKeyMultibase.substr(1)).slice(Dc.length)}get _privateKeyBuffer(){if(this.privateKeyMultibase)return Zu(this.privateKeyMultibase.substr(1)).slice(Bc.length)}fingerprint(){return this.publicKeyMultibase}export({publicKey:e=!1,privateKey:t=!1,includeContext:r=!1}={}){if(!e&&!t)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');const n={id:this.id,type:this.type};return r&&(n["@context"]=Uc.SUITE_CONTEXT),this.controller&&(n.controller=this.controller),e&&(n.publicKeyMultibase=this.publicKeyMultibase),t&&(n.privateKeyMultibase=this.privateKeyMultibase),this.revoked&&(n.revoked=this.revoked),n}toJwk({publicKey:e=!0,privateKey:t=!1}={}){if(!e&&!t)throw TypeError('Either a "publicKey" or a "privateKey" is required.');const r={crv:"Ed25519",kty:"OKP"};return e&&(r.x=tc(this._publicKeyBuffer)),t&&(r.d=tc(this._privateKeyBuffer)),r}async jwkThumbprint(){const e=`{"crv":"Ed25519","kty":"OKP","x":"${tc(this._publicKeyBuffer)}"}`,t=(new TextEncoder).encode(e);return tc(new Uint8Array(await Rc.sha256digest({data:t})))}async toJsonWebKey2020(){return{"@context":"https://w3id.org/security/jws/v1",id:this.controller+"#"+await this.jwkThumbprint(),type:"JsonWebKey2020",controller:this.controller,publicKeyJwk:this.toJwk({publicKey:!0})}}verifyFingerprint({fingerprint:e}={}){if("string"!=typeof e||"z"!==e[0])return{error:new Error('"fingerprint" must be a multibase encoded string.'),valid:!1};let t;try{if(t=Zu(e.substr(1)),!t)throw new TypeError("Invalid encoding of fingerprint.")}catch(e){return{error:e,valid:!1}}const r=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(this._publicKeyBuffer,t.slice(2)),n=t[0]===Dc[0]&&t[1]===Dc[1]&&r;return n?{valid:n}:{error:new Error("The fingerprint does not match the public key."),valid:!1}}signer(){const e=this._privateKeyBuffer;return{async sign({data:t}){if(!e)throw new Error("A private key is not available for signing.");return Rc.sign(e,t)},id:this.id}}verifier(){const e=this._publicKeyBuffer;return{async verify({data:t,signature:r}){if(!e)throw new Error("A public key is not available for verifying.");return Rc.verify(e,t,r)},id:this.id}}}function Fc(e,t){if("string"!=typeof e||"z"!==e[0])return!1;const r=Zu(e.slice(1));return t.every(((e,t)=>r[t]===e))}function zc(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),"z"+Yu(r)}Uc.suite="Ed25519VerificationKey2020",Uc.SUITE_CONTEXT="https://w3id.org/security/suites/ed25519-2020/v1";var Vc={exports:{}},Hc={exports:{}},Kc=ht(nc);!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=t(),s=t([1]),a=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function g(e,t,r,n){return p(e,t,r,n,16)}function m(e,t,r,n){return p(e,t,r,n,32)}function y(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=o,x=s,S=a,E=u,k=c,I=l,A=h,T=f,P=d,O=p,C=g,M=m,N=y,R=v,L=b,j=w,D=0;D<20;D+=2)_^=(i=(N^=(i=(P^=(i=(k^=(i=_+N|0)<<7|i>>>25)+_|0)<<9|i>>>23)+k|0)<<13|i>>>19)+P|0)<<18|i>>>14,I^=(i=(x^=(i=(R^=(i=(O^=(i=I+x|0)<<7|i>>>25)+I|0)<<9|i>>>23)+O|0)<<13|i>>>19)+R|0)<<18|i>>>14,C^=(i=(A^=(i=(S^=(i=(L^=(i=C+A|0)<<7|i>>>25)+C|0)<<9|i>>>23)+L|0)<<13|i>>>19)+S|0)<<18|i>>>14,j^=(i=(M^=(i=(T^=(i=(E^=(i=j+M|0)<<7|i>>>25)+j|0)<<9|i>>>23)+E|0)<<13|i>>>19)+T|0)<<18|i>>>14,_^=(i=(E^=(i=(S^=(i=(x^=(i=_+E|0)<<7|i>>>25)+_|0)<<9|i>>>23)+x|0)<<13|i>>>19)+S|0)<<18|i>>>14,I^=(i=(k^=(i=(T^=(i=(A^=(i=I+k|0)<<7|i>>>25)+I|0)<<9|i>>>23)+A|0)<<13|i>>>19)+T|0)<<18|i>>>14,C^=(i=(O^=(i=(P^=(i=(M^=(i=C+O|0)<<7|i>>>25)+C|0)<<9|i>>>23)+M|0)<<13|i>>>19)+P|0)<<18|i>>>14,j^=(i=(L^=(i=(R^=(i=(N^=(i=j+L|0)<<7|i>>>25)+j|0)<<9|i>>>23)+N|0)<<13|i>>>19)+R|0)<<18|i>>>14;_=_+o|0,x=x+s|0,S=S+a|0,E=E+u|0,k=k+c|0,I=I+l|0,A=A+h|0,T=T+f|0,P=P+d|0,O=O+p|0,C=C+g|0,M=M+m|0,N=N+y|0,R=R+v|0,L=L+b|0,j=j+w|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=x>>>0&255,e[5]=x>>>8&255,e[6]=x>>>16&255,e[7]=x>>>24&255,e[8]=S>>>0&255,e[9]=S>>>8&255,e[10]=S>>>16&255,e[11]=S>>>24&255,e[12]=E>>>0&255,e[13]=E>>>8&255,e[14]=E>>>16&255,e[15]=E>>>24&255,e[16]=k>>>0&255,e[17]=k>>>8&255,e[18]=k>>>16&255,e[19]=k>>>24&255,e[20]=I>>>0&255,e[21]=I>>>8&255,e[22]=I>>>16&255,e[23]=I>>>24&255,e[24]=A>>>0&255,e[25]=A>>>8&255,e[26]=A>>>16&255,e[27]=A>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=M>>>0&255,e[45]=M>>>8&255,e[46]=M>>>16&255,e[47]=M>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=R>>>0&255,e[53]=R>>>8&255,e[54]=R>>>16&255,e[55]=R>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=j>>>0&255,e[61]=j>>>8&255,e[62]=j>>>16&255,e[63]=j>>>24&255}(e,t,r,n)}function v(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,f=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)o^=(i=(y^=(i=(d^=(i=(c^=(i=o+y|0)<<7|i>>>25)+o|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,l^=(i=(s^=(i=(v^=(i=(p^=(i=l+s|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+v|0)<<18|i>>>14,g^=(i=(h^=(i=(a^=(i=(b^=(i=g+h|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,w^=(i=(m^=(i=(f^=(i=(u^=(i=w+m|0)<<7|i>>>25)+w|0)<<9|i>>>23)+u|0)<<13|i>>>19)+f|0)<<18|i>>>14,o^=(i=(u^=(i=(a^=(i=(s^=(i=o+u|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(c^=(i=(f^=(i=(h^=(i=l+c|0)<<7|i>>>25)+l|0)<<9|i>>>23)+h|0)<<13|i>>>19)+f|0)<<18|i>>>14,g^=(i=(p^=(i=(d^=(i=(m^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+m|0)<<13|i>>>19)+d|0)<<18|i>>>14,w^=(i=(b^=(i=(v^=(i=(y^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+y|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=h>>>0&255,e[17]=h>>>8&255,e[18]=h>>>16&255,e[19]=h>>>24&255,e[20]=f>>>0&255,e[21]=f>>>8&255,e[22]=f>>>16&255,e[23]=f>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,i,o,s){var a,u,c=new Uint8Array(16),l=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=o[u];for(;i>=64;){for(y(l,c,s,b),u=0;u<64;u++)e[t+u]=r[n+u]^l[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(y(l,c,s,b),u=0;u<i;u++)e[t+u]=r[n+u]^l[u];return 0}function _(e,t,r,n,i){var o,s,a=new Uint8Array(16),u=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(y(u,a,i,b),s=0;s<64;s++)e[t+s]=u[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(y(u,a,i,b),s=0;s<r;s++)e[t+s]=u[s];return 0}function x(e,t,r,n,i){var o=new Uint8Array(32);v(o,n,i,b);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return _(e,t,r,s,o)}function S(e,t,r,n,i,o,s){var a=new Uint8Array(32);v(a,o,s,b);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=o[c+16];return w(e,t,r,n,i,u,a)}var E=function(e){var t,r,n,i,o,s,a,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),u=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function k(e,t,r,n,i,o){var s=new E(o);return s.update(r,n,i),s.finish(e,t),0}function I(e,t,r,n,i,o){var s=new Uint8Array(16);return k(s,0,r,n,i,o),g(e,t,s,0)}function A(e,t,r,n,i){var o;if(r<32)return-1;for(S(e,0,t,0,r,n,i),k(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function T(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(x(s,0,32,n,i),0!==I(t,16,t,32,r-32,s))return-1;for(S(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function P(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function C(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function M(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(O(a),O(a),O(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,C(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function N(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),m(r,0,n,0)}function R(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function j(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function B(e,t,r){var n,i,o=0,s=0,a=0,u=0,c=0,l=0,h=0,f=0,d=0,p=0,g=0,m=0,y=0,v=0,b=0,w=0,_=0,x=0,S=0,E=0,k=0,I=0,A=0,T=0,P=0,O=0,C=0,M=0,N=0,R=0,L=0,j=r[0],D=r[1],B=r[2],U=r[3],F=r[4],z=r[5],V=r[6],H=r[7],K=r[8],q=r[9],$=r[10],W=r[11],G=r[12],J=r[13],X=r[14],Y=r[15];o+=(n=t[0])*j,s+=n*D,a+=n*B,u+=n*U,c+=n*F,l+=n*z,h+=n*V,f+=n*H,d+=n*K,p+=n*q,g+=n*$,m+=n*W,y+=n*G,v+=n*J,b+=n*X,w+=n*Y,s+=(n=t[1])*j,a+=n*D,u+=n*B,c+=n*U,l+=n*F,h+=n*z,f+=n*V,d+=n*H,p+=n*K,g+=n*q,m+=n*$,y+=n*W,v+=n*G,b+=n*J,w+=n*X,_+=n*Y,a+=(n=t[2])*j,u+=n*D,c+=n*B,l+=n*U,h+=n*F,f+=n*z,d+=n*V,p+=n*H,g+=n*K,m+=n*q,y+=n*$,v+=n*W,b+=n*G,w+=n*J,_+=n*X,x+=n*Y,u+=(n=t[3])*j,c+=n*D,l+=n*B,h+=n*U,f+=n*F,d+=n*z,p+=n*V,g+=n*H,m+=n*K,y+=n*q,v+=n*$,b+=n*W,w+=n*G,_+=n*J,x+=n*X,S+=n*Y,c+=(n=t[4])*j,l+=n*D,h+=n*B,f+=n*U,d+=n*F,p+=n*z,g+=n*V,m+=n*H,y+=n*K,v+=n*q,b+=n*$,w+=n*W,_+=n*G,x+=n*J,S+=n*X,E+=n*Y,l+=(n=t[5])*j,h+=n*D,f+=n*B,d+=n*U,p+=n*F,g+=n*z,m+=n*V,y+=n*H,v+=n*K,b+=n*q,w+=n*$,_+=n*W,x+=n*G,S+=n*J,E+=n*X,k+=n*Y,h+=(n=t[6])*j,f+=n*D,d+=n*B,p+=n*U,g+=n*F,m+=n*z,y+=n*V,v+=n*H,b+=n*K,w+=n*q,_+=n*$,x+=n*W,S+=n*G,E+=n*J,k+=n*X,I+=n*Y,f+=(n=t[7])*j,d+=n*D,p+=n*B,g+=n*U,m+=n*F,y+=n*z,v+=n*V,b+=n*H,w+=n*K,_+=n*q,x+=n*$,S+=n*W,E+=n*G,k+=n*J,I+=n*X,A+=n*Y,d+=(n=t[8])*j,p+=n*D,g+=n*B,m+=n*U,y+=n*F,v+=n*z,b+=n*V,w+=n*H,_+=n*K,x+=n*q,S+=n*$,E+=n*W,k+=n*G,I+=n*J,A+=n*X,T+=n*Y,p+=(n=t[9])*j,g+=n*D,m+=n*B,y+=n*U,v+=n*F,b+=n*z,w+=n*V,_+=n*H,x+=n*K,S+=n*q,E+=n*$,k+=n*W,I+=n*G,A+=n*J,T+=n*X,P+=n*Y,g+=(n=t[10])*j,m+=n*D,y+=n*B,v+=n*U,b+=n*F,w+=n*z,_+=n*V,x+=n*H,S+=n*K,E+=n*q,k+=n*$,I+=n*W,A+=n*G,T+=n*J,P+=n*X,O+=n*Y,m+=(n=t[11])*j,y+=n*D,v+=n*B,b+=n*U,w+=n*F,_+=n*z,x+=n*V,S+=n*H,E+=n*K,k+=n*q,I+=n*$,A+=n*W,T+=n*G,P+=n*J,O+=n*X,C+=n*Y,y+=(n=t[12])*j,v+=n*D,b+=n*B,w+=n*U,_+=n*F,x+=n*z,S+=n*V,E+=n*H,k+=n*K,I+=n*q,A+=n*$,T+=n*W,P+=n*G,O+=n*J,C+=n*X,M+=n*Y,v+=(n=t[13])*j,b+=n*D,w+=n*B,_+=n*U,x+=n*F,S+=n*z,E+=n*V,k+=n*H,I+=n*K,A+=n*q,T+=n*$,P+=n*W,O+=n*G,C+=n*J,M+=n*X,N+=n*Y,b+=(n=t[14])*j,w+=n*D,_+=n*B,x+=n*U,S+=n*F,E+=n*z,k+=n*V,I+=n*H,A+=n*K,T+=n*q,P+=n*$,O+=n*W,C+=n*G,M+=n*J,N+=n*X,R+=n*Y,w+=(n=t[15])*j,s+=38*(x+=n*B),a+=38*(S+=n*U),u+=38*(E+=n*F),c+=38*(k+=n*z),l+=38*(I+=n*V),h+=38*(A+=n*H),f+=38*(T+=n*K),d+=38*(P+=n*q),p+=38*(O+=n*$),g+=38*(C+=n*W),m+=38*(M+=n*G),y+=38*(N+=n*J),v+=38*(R+=n*X),b+=38*(L+=n*Y),o=(n=(o+=38*(_+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=u,e[4]=c,e[5]=l,e[6]=h,e[7]=f,e[8]=d,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=v,e[14]=b,e[15]=w}function U(e,t){B(e,t,t)}function F(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)U(i,i),2!==n&&4!==n&&B(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)U(i,i),1!==n&&B(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function V(e,r,n){var i,o,s=new Uint8Array(32),u=new Float64Array(80),c=t(),l=t(),h=t(),f=t(),d=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,L(u,n),o=0;o<16;o++)l[o]=u[o],f[o]=c[o]=h[o]=0;for(c[0]=f[0]=1,o=254;o>=0;--o)C(c,l,i=s[o>>>3]>>>(7&o)&1),C(h,f,i),j(d,c,h),D(c,c,h),j(h,l,f),D(l,l,f),U(f,d),U(p,c),B(c,h,c),B(h,l,d),j(d,c,h),D(c,c,h),U(l,c),D(h,f,p),B(c,h,a),j(c,c,f),B(h,h,c),B(c,f,p),B(f,l,u),U(l,d),C(c,l,i),C(h,f,i);for(o=0;o<16;o++)u[o+16]=c[o],u[o+32]=h[o],u[o+48]=l[o],u[o+64]=f[o];var g=u.subarray(32),m=u.subarray(16);return F(g,g),B(m,m,g),M(e,m),0}function H(e,t){return V(e,t,i)}function K(e,t){return r(t,32),H(e,t)}function q(e,t,r){var i=new Uint8Array(32);return V(i,r,t),v(e,n,i,b)}E.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,u,c,l,h,f,d,p,g,m,y,v,b,w,_,x=this.fin?0:2048,S=this.h[0],E=this.h[1],k=this.h[2],I=this.h[3],A=this.h[4],T=this.h[5],P=this.h[6],O=this.h[7],C=this.h[8],M=this.h[9],N=this.r[0],R=this.r[1],L=this.r[2],j=this.r[3],D=this.r[4],B=this.r[5],U=this.r[6],F=this.r[7],z=this.r[8],V=this.r[9];r>=16;)f=h=0,f+=(S+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*N,f+=(E+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*V),f+=(k+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*z),f+=(I+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),h=(f+=(A+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*U))>>>13,f&=8191,f+=(T+=a>>>1&8191)*(5*B),f+=(P+=8191&(a>>>14|(u=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),f+=(O+=8191&(u>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*j),f+=(C+=8191&(c>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),d=h+=(f+=(M+=l>>>5|x)*(5*R))>>>13,d+=S*R,d+=E*N,d+=k*(5*V),d+=I*(5*z),h=(d+=A*(5*F))>>>13,d&=8191,d+=T*(5*U),d+=P*(5*B),d+=O*(5*D),d+=C*(5*j),h+=(d+=M*(5*L))>>>13,d&=8191,p=h,p+=S*L,p+=E*R,p+=k*N,p+=I*(5*V),h=(p+=A*(5*z))>>>13,p&=8191,p+=T*(5*F),p+=P*(5*U),p+=O*(5*B),p+=C*(5*D),g=h+=(p+=M*(5*j))>>>13,g+=S*j,g+=E*L,g+=k*R,g+=I*N,h=(g+=A*(5*V))>>>13,g&=8191,g+=T*(5*z),g+=P*(5*F),g+=O*(5*U),g+=C*(5*B),m=h+=(g+=M*(5*D))>>>13,m+=S*D,m+=E*j,m+=k*L,m+=I*R,h=(m+=A*N)>>>13,m&=8191,m+=T*(5*V),m+=P*(5*z),m+=O*(5*F),m+=C*(5*U),y=h+=(m+=M*(5*B))>>>13,y+=S*B,y+=E*D,y+=k*j,y+=I*L,h=(y+=A*R)>>>13,y&=8191,y+=T*N,y+=P*(5*V),y+=O*(5*z),y+=C*(5*F),v=h+=(y+=M*(5*U))>>>13,v+=S*U,v+=E*B,v+=k*D,v+=I*j,h=(v+=A*L)>>>13,v&=8191,v+=T*R,v+=P*N,v+=O*(5*V),v+=C*(5*z),b=h+=(v+=M*(5*F))>>>13,b+=S*F,b+=E*U,b+=k*B,b+=I*D,h=(b+=A*j)>>>13,b&=8191,b+=T*L,b+=P*R,b+=O*N,b+=C*(5*V),w=h+=(b+=M*(5*z))>>>13,w+=S*z,w+=E*F,w+=k*U,w+=I*B,h=(w+=A*D)>>>13,w&=8191,w+=T*j,w+=P*L,w+=O*R,w+=C*N,_=h+=(w+=M*(5*V))>>>13,_+=S*V,_+=E*z,_+=k*F,_+=I*U,h=(_+=A*B)>>>13,_&=8191,_+=T*D,_+=P*j,_+=O*L,_+=C*R,S=f=8191&(h=(h=((h+=(_+=M*N)>>>13)<<2)+h|0)+(f&=8191)|0),E=d+=h>>>=13,k=p&=8191,I=g&=8191,A=m&=8191,T=y&=8191,P=v&=8191,O=b&=8191,C=w&=8191,M=_&=8191,t+=16,r-=16;this.h[0]=S,this.h[1]=E,this.h[2]=k,this.h[3]=I,this.h[4]=A,this.h[5]=T,this.h[6]=P,this.h[7]=O,this.h[8]=C,this.h[9]=M},E.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},E.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var $=A,W=T,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function J(e,t,r,n){for(var i,o,s,a,u,c,l,h,f,d,p,g,m,y,v,b,w,_,x,S,E,k,I,A,T,P,O=new Int32Array(16),C=new Int32Array(16),M=e[0],N=e[1],R=e[2],L=e[3],j=e[4],D=e[5],B=e[6],U=e[7],F=t[0],z=t[1],V=t[2],H=t[3],K=t[4],q=t[5],$=t[6],W=t[7],J=0;n>=128;){for(x=0;x<16;x++)S=8*x+J,O[x]=r[S+0]<<24|r[S+1]<<16|r[S+2]<<8|r[S+3],C[x]=r[S+4]<<24|r[S+5]<<16|r[S+6]<<8|r[S+7];for(x=0;x<80;x++)if(i=M,o=N,s=R,a=L,u=j,c=D,l=B,f=F,d=z,p=V,g=H,m=K,y=q,v=$,I=65535&(k=W),A=k>>>16,T=65535&(E=U),P=E>>>16,I+=65535&(k=(K>>>14|j<<18)^(K>>>18|j<<14)^(j>>>9|K<<23)),A+=k>>>16,T+=65535&(E=(j>>>14|K<<18)^(j>>>18|K<<14)^(K>>>9|j<<23)),P+=E>>>16,I+=65535&(k=K&q^~K&$),A+=k>>>16,T+=65535&(E=j&D^~j&B),P+=E>>>16,I+=65535&(k=G[2*x+1]),A+=k>>>16,T+=65535&(E=G[2*x]),P+=E>>>16,E=O[x%16],A+=(k=C[x%16])>>>16,T+=65535&E,P+=E>>>16,T+=(A+=(I+=65535&k)>>>16)>>>16,I=65535&(k=_=65535&I|A<<16),A=k>>>16,T=65535&(E=w=65535&T|(P+=T>>>16)<<16),P=E>>>16,I+=65535&(k=(F>>>28|M<<4)^(M>>>2|F<<30)^(M>>>7|F<<25)),A+=k>>>16,T+=65535&(E=(M>>>28|F<<4)^(F>>>2|M<<30)^(F>>>7|M<<25)),P+=E>>>16,A+=(k=F&z^F&V^z&V)>>>16,T+=65535&(E=M&N^M&R^N&R),P+=E>>>16,h=65535&(T+=(A+=(I+=65535&k)>>>16)>>>16)|(P+=T>>>16)<<16,b=65535&I|A<<16,I=65535&(k=g),A=k>>>16,T=65535&(E=a),P=E>>>16,A+=(k=_)>>>16,T+=65535&(E=w),P+=E>>>16,N=i,R=o,L=s,j=a=65535&(T+=(A+=(I+=65535&k)>>>16)>>>16)|(P+=T>>>16)<<16,D=u,B=c,U=l,M=h,z=f,V=d,H=p,K=g=65535&I|A<<16,q=m,$=y,W=v,F=b,x%16==15)for(S=0;S<16;S++)E=O[S],I=65535&(k=C[S]),A=k>>>16,T=65535&E,P=E>>>16,E=O[(S+9)%16],I+=65535&(k=C[(S+9)%16]),A+=k>>>16,T+=65535&E,P+=E>>>16,w=O[(S+1)%16],I+=65535&(k=((_=C[(S+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),A+=k>>>16,T+=65535&(E=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),P+=E>>>16,w=O[(S+14)%16],A+=(k=((_=C[(S+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,T+=65535&(E=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,O[S]=65535&T|P<<16,C[S]=65535&I|A<<16;I=65535&(k=F),A=k>>>16,T=65535&(E=M),P=E>>>16,E=e[0],A+=(k=t[0])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[0]=M=65535&T|P<<16,t[0]=F=65535&I|A<<16,I=65535&(k=z),A=k>>>16,T=65535&(E=N),P=E>>>16,E=e[1],A+=(k=t[1])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[1]=N=65535&T|P<<16,t[1]=z=65535&I|A<<16,I=65535&(k=V),A=k>>>16,T=65535&(E=R),P=E>>>16,E=e[2],A+=(k=t[2])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[2]=R=65535&T|P<<16,t[2]=V=65535&I|A<<16,I=65535&(k=H),A=k>>>16,T=65535&(E=L),P=E>>>16,E=e[3],A+=(k=t[3])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[3]=L=65535&T|P<<16,t[3]=H=65535&I|A<<16,I=65535&(k=K),A=k>>>16,T=65535&(E=j),P=E>>>16,E=e[4],A+=(k=t[4])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[4]=j=65535&T|P<<16,t[4]=K=65535&I|A<<16,I=65535&(k=q),A=k>>>16,T=65535&(E=D),P=E>>>16,E=e[5],A+=(k=t[5])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[5]=D=65535&T|P<<16,t[5]=q=65535&I|A<<16,I=65535&(k=$),A=k>>>16,T=65535&(E=B),P=E>>>16,E=e[6],A+=(k=t[6])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[6]=B=65535&T|P<<16,t[6]=$=65535&I|A<<16,I=65535&(k=W),A=k>>>16,T=65535&(E=U),P=E>>>16,E=e[7],A+=(k=t[7])>>>16,T+=65535&E,P+=E>>>16,P+=(T+=(A+=(I+=65535&k)>>>16)>>>16)>>>16,e[7]=U=65535&T|P<<16,t[7]=W=65535&I|A<<16,J+=128,n-=128}return n}function X(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,J(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,d(s,r-8,a/536870912|0,a<<3),J(i,o,s,r),n=0;n<8;n++)d(e,8*n,i[n],o[n]);return 0}function Y(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),u=t(),l=t(),h=t(),f=t();D(n,e[1],e[0]),D(f,r[1],r[0]),B(n,n,f),j(i,e[0],e[1]),j(f,r[0],r[1]),B(i,i,f),B(o,e[3],r[3]),B(o,o,c),B(s,e[2],r[2]),j(s,s,s),D(a,i,n),D(u,s,o),j(l,s,o),j(h,i,n),B(e[0],a,u),B(e[1],h,l),B(e[2],l,u),B(e[3],a,h)}function Z(e,t,r){var n;for(n=0;n<4;n++)C(e[n],t[n],r)}function Q(e,r){var n=t(),i=t(),o=t();F(o,r[2]),B(n,r[0],o),B(i,r[1],o),M(e,i),e[31]^=R(n)<<7}function ee(e,t,r){var n,i;for(P(e[0],o),P(e[1],s),P(e[2],s),P(e[3],o),i=255;i>=0;--i)Z(e,t,n=r[i/8|0]>>(7&i)&1),Y(t,e),Y(e,e),Z(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];P(n[0],l),P(n[1],h),P(n[2],s),B(n[3],l,h),ee(e,n,r)}function re(e,n,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||r(n,32),X(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,te(a,s),Q(e,a),o=0;o<32;o++)n[o+32]=e[o];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function oe(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function se(e,r,n,i){var o,s,a=new Uint8Array(64),u=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),h=[t(),t(),t(),t()];X(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(X(c,e.subarray(32),n+32),oe(c),te(h,c),Q(e,h),o=32;o<64;o++)e[o]=i[o];for(X(u,e,n+64),oe(u),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=c[o];for(o=0;o<32;o++)for(s=0;s<32;s++)l[o+s]+=u[o]*a[s];return ie(e.subarray(32),l),f}function ae(e,r,n,i){var a,c=new Uint8Array(32),l=new Uint8Array(64),h=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),a=t(),c=t(),l=t(),h=t(),d=t();return P(e[2],s),L(e[1],r),U(a,e[1]),B(c,a,u),D(a,a,e[2]),j(c,e[2],c),U(l,c),U(h,l),B(d,h,l),B(n,d,a),B(n,n,c),z(n,n),B(n,n,a),B(n,n,c),B(n,n,c),B(e[0],n,c),U(i,e[0]),B(i,i,c),N(i,a)&&B(e[0],e[0],f),U(i,e[0]),B(i,i,c),N(i,a)?-1:(R(e[0])===r[31]>>7&&D(e[0],o,e[0]),B(e[3],e[0],e[1]),0)}(d,i))return-1;for(a=0;a<n;a++)e[a]=r[a];for(a=0;a<32;a++)e[a+32]=i[a];if(X(l,e,n),oe(l),ee(h,d,l),te(d,r.subarray(32)),Y(h,d),Q(c,h),n-=64,m(r,0,c,0)){for(a=0;a<n;a++)e[a]=0;return-1}for(a=0;a<n;a++)e[a]=r[a+64];return n}var ue=64,ce=32,le=64;function he(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function fe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function de(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:S,crypto_stream:x,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:_,crypto_onetimeauth:k,crypto_onetimeauth_verify:I,crypto_verify_16:g,crypto_verify_32:m,crypto_secretbox:A,crypto_secretbox_open:T,crypto_scalarmult:V,crypto_scalarmult_base:H,crypto_box_beforenm:q,crypto_box_afternm:$,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return q(s,i,o),$(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return q(s,i,o),W(e,t,r,n,s)},crypto_box_keypair:K,crypto_hash:X,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:ce,crypto_sign_SECRETKEYBYTES:le,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ne,pack25519:M,unpack25519:L,M:B,A:j,S:U,Z:D,pow2523:z,add:Y,set25519:P,modL:ie,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){fe(e,t,r),he(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return A(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){fe(e,t,r),he(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return n.length<32||0!==T(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(fe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return V(r,e,t),r},e.scalarMult.base=function(e){if(fe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){fe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return q(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(fe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(fe(e,t),t.length!==le)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(fe(e,t),t.length!==ce)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(ue),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(fe(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==ce)throw new Error("bad public key size");var n,i=new Uint8Array(ue+e.length),o=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+ue]=e[n];return ae(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ce),t=new Uint8Array(le);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(fe(e),e.length!==le)throw new Error("bad secret key size");for(var t=new Uint8Array(ce),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(fe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ce),r=new Uint8Array(le),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=ce,e.sign.secretKeyLength=le,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){fe(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return fe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];de(i)})):(t=Kc)&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];de(i)}))}()}(Hc.exports?Hc.exports:self.nacl=self.nacl||{});var qc=Hc.exports;!function(e){!function(t,r){e.exports?e.exports=r(Hc.exports):t.ed2curve=r(t.nacl)}(lt,(function(e){if(!e)throw new Error("tweetnacl not loaded");var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=t(),n=t([1]),i=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),o=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function s(e){var t,r;for(r=0;r<16;r++)e[r]+=65536,t=Math.floor(e[r]/65536),e[(r+1)*(r<15?1:0)]+=t-1+37*(t-1)*(15===r?1:0),e[r]-=65536*t}function a(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function u(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]+r[n]|0}function c(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]-r[n]|0}function l(e,t,r){var n,i,o=new Float64Array(31);for(n=0;n<31;n++)o[n]=0;for(n=0;n<16;n++)for(i=0;i<16;i++)o[n+i]+=t[n]*r[i];for(n=0;n<15;n++)o[n]+=38*o[n+16];for(n=0;n<16;n++)e[n]=o[n];s(e),s(e)}function h(e,t){l(e,t,t)}function f(e,r){var n,i,o,u=t(),c=t();for(n=0;n<16;n++)c[n]=r[n];for(s(c),s(c),s(c),i=0;i<2;i++){for(u[0]=c[0]-65517,n=1;n<15;n++)u[n]=c[n]-65535-(u[n-1]>>16&1),u[n-1]&=65535;u[15]=c[15]-32767-(u[14]>>16&1),o=u[15]>>16&1,u[14]&=65535,a(c,u,1-o)}for(n=0;n<16;n++)e[2*n]=255&c[n],e[2*n+1]=c[n]>>8}function d(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return f(r,e),f(n,t),function(e,t,r,n){return function(e,t,r,n,i){var o,s=0;for(o=0;o<32;o++)s|=e[0+o]^r[0+o];return(1&s-1>>>8)-1}(e,0,r)}(r,0,n)}function p(e,s){var a=t(),p=t(),g=t(),m=t(),y=t(),v=t(),b=t();return function(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}(e[2],n),function(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],s),h(g,e[1]),l(m,g,i),c(g,g,e[2]),u(m,e[2],m),h(y,m),h(v,y),l(b,v,y),l(a,b,g),l(a,a,m),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)h(i,i),1!==n&&l(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(a,a),l(a,a,g),l(a,a,m),l(a,a,m),l(e[0],a,m),h(p,e[0]),l(p,p,m),d(p,g)&&l(e[0],e[0],o),h(p,e[0]),l(p,p,m),d(p,g)?-1:(function(e){var t=new Uint8Array(32);return f(t,e),1&t[0]}(e[0])===s[31]>>7&&c(e[0],r,e[0]),l(e[3],e[0],e[1]),0)}function g(e){var r=new Uint8Array(32),i=[t(),t(),t(),t()],o=t(),s=t();if(p(i,e))return null;var a=i[1];return u(o,n,a),c(s,n,a),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)h(i,i),2!==n&&4!==n&&l(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(s,s),l(o,o,s),f(r,o),r}function m(t){var r,n=new Uint8Array(64),i=new Uint8Array(32);for(e.lowlevel.crypto_hash(n,t,32),n[0]&=248,n[31]&=127,n[31]|=64,r=0;r<32;r++)i[r]=n[r];for(r=0;r<64;r++)n[r]=0;return i}return{convertPublicKey:g,convertSecretKey:m,convertKeyPair:function(e){var t=g(e.publicKey);return t?{publicKey:t,secretKey:m(e.secretKey)}:null}}}))}(Vc);var $c=Vc.exports;
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
/*!
   * Copyright (c) 2021-2022 Digital Bazaar, Inc. All rights reserved.
   */const Wc=new Uint8Array([237,1]),Gc=new Uint8Array([128,38]),Jc=new Uint8Array([236,1]),Xc=new Uint8Array([130,38]);class Yc extends jc{constructor(e={}){super(e),this.type="X25519KeyAgreementKey2020";const{publicKeyMultibase:t,privateKeyMultibase:r}=e;if(!t)throw new TypeError('The "publicKeyMultibase" property is required.');if(!t||!Zc(t,Jc))throw new Error(`"publicKeyMultibase" has invalid header bytes: "${t}".`);if(r&&!Zc(r,Xc))throw new Error('"privateKeyMultibase" has invalid header bytes.');this.publicKeyMultibase=t,this.privateKeyMultibase=r,this.controller&&!this.id&&(this.id=`${this.controller}#${this.fingerprint()}`)}static async generate(e={}){const{publicKey:t,privateKey:r}=await async function(){const{publicKey:e,secretKey:t}=qc.box.keyPair();return{publicKey:e,privateKey:t}}();return new Yc({publicKeyMultibase:Qc(Jc,t),privateKeyMultibase:Qc(Xc,r),...e})}static async from(e={}){return e.publicKeyBase58?this.fromX25519KeyAgreementKey2019(e):new Yc(e)}static async fromX25519KeyAgreementKey2019({publicKeyBase58:e,privateKeyBase58:t,...r}={}){let n,i;return e&&(n=Qc(Jc,Zu(e))),t&&(i=Qc(Xc,Zu(t))),new Yc({publicKeyMultibase:n,privateKeyMultibase:i,...r})}static fromEd25519VerificationKey2020({keyPair:e}={}){if(!e.publicKeyMultibase)throw new Error("Source public key is required to convert.");if(!e.publicKeyMultibase.startsWith("z"))throw new TypeError('Expecting "publicKeyMultibase" value to be multibase base58btc encoded (must start with "z").');const t=new Yc({controller:e.controller,publicKeyMultibase:Yc.convertFromEdPublicKey(e)});if(e.privateKeyMultibase){if(!e.privateKeyMultibase.startsWith("z"))throw new TypeError('Expecting "privateKeyMultibase" value to be multibase base58btc encoded (must start with "z").');t.privateKeyMultibase=Yc.convertFromEdPrivateKey(e)}return t}static convertFromEdPublicKey({publicKeyMultibase:e}={}){if(!e)throw new Error("Source public key is required to convert.");const t=el(Wc,e),r=mc.fromHex(t).toX25519();if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 public key.");return Qc(Jc,r)}static convertFromEdPrivateKey({privateKeyMultibase:e}={}){if(!e)throw new Error("Source private key is required to convert.");const t=el(Gc,e),r=$c.convertSecretKey(t);if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 private key.");return Qc(Xc,r)}export({publicKey:e=!1,privateKey:t=!1,includeContext:r=!1}={}){if(!e&&!t)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');const n={id:this.id,type:this.type};return r&&(n["@context"]=Yc.SUITE_CONTEXT),this.controller&&(n.controller=this.controller),e&&(n.publicKeyMultibase=this.publicKeyMultibase),t&&(n.privateKeyMultibase=this.privateKeyMultibase),this.revoked&&(n.revoked=this.revoked),n}static fingerprintFromPublicKey({publicKeyMultibase:e}={}){if(!e)throw new Error("Source public key is required.");return e}static fromFingerprint({fingerprint:e}={}){return new Yc({publicKeyMultibase:e})}async deriveSecret({publicKey:e}){const t=el(Jc,e.publicKeyMultibase);return async function({privateKey:e,remotePublicKey:t}){return qc.scalarMult(e,t)}({privateKey:el(Xc,this.privateKeyMultibase),remotePublicKey:t})}fingerprint(){return this.publicKeyMultibase}verifyFingerprint({fingerprint:e}={}){if(!Zc(e,Jc))throw new Error(`"fingerprint" has invalid header bytes: "${e}".`);return{valid:!0}}}function Zc(e,t){if("string"!=typeof e||"z"!==e[0])return!1;const r=Zu(e.slice(1));return t.every(((e,t)=>r[t]===e))}function Qc(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),"z"+Yu(r)}function el(e,t){const r=Zu(t.substr(1));if(!e.every(((e,t)=>r[t]===e)))throw new Error("Multibase value does not have expected header.");return r.slice(e.length)}
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */Yc.suite="X25519KeyAgreementKey2020",Yc.SUITE_CONTEXT="https://w3id.org/security/suites/x25519-2020/v1";
/*!
   * Copyright (c) 2019-2021 Digital Bazaar, Inc. All rights reserved.
   */
const tl="X25519KeyAgreementKey2019",rl=new Uint8Array([237,1]),nl=new Uint8Array([128,38]);class il extends jc{constructor(e={}){if(super(e),this.type=tl,this.publicKeyBase58=e.publicKeyBase58,!this.publicKeyBase58)throw TypeError('The "publicKeyBase58" property is required.');this.privateKeyBase58=e.privateKeyBase58,this.controller&&!this.id&&(this.id=`${this.controller}#${this.fingerprint()}`)}static async generate(e={}){const{publicKey:t,privateKey:r}=await async function(){const{publicKey:e,secretKey:t}=qc.box.keyPair();return{publicKey:e,privateKey:t}}();return new il({publicKeyBase58:Yu(t),privateKeyBase58:Yu(r),...e})}static async from(e){return new il(e)}static fromEd25519VerificationKey2018({keyPair:e}){const t=new il({controller:e.controller,publicKeyBase58:il.convertFromEdPublicKey(e)});return e.privateKeyBase58&&(t.privateKeyBase58=il.convertFromEdPrivateKey(e)),t}static fromEd25519VerificationKey2020({keyPair:e}){if(!e.publicKeyMultibase)throw new Error("Source public key is required to convert.");if(!e.publicKeyMultibase.startsWith("z"))throw new TypeError("Expecting source public Ed25519 2020 key to have base58btc encoding.");const t=Yu(ol(rl,e.publicKeyMultibase)),r=new il({controller:e.controller,publicKeyBase58:il.convertFromEdPublicKey({publicKeyBase58:t})});if(e.privateKeyMultibase){if(!e.privateKeyMultibase.startsWith("z"))throw new TypeError("Expecting source private Ed25519 2020 key to have base58btc encoding.");const t=Yu(ol(nl,e.privateKeyMultibase));r.privateKeyBase58=il.convertFromEdPrivateKey({privateKeyBase58:t})}return r}static fromEdKeyPair({keyPair:e}){return this.fromEd25519VerificationKey2018({keyPair:e})}static convertFromEdPublicKey({publicKeyBase58:e}){const t=Zu(e),r=mc.fromHex(t).toX25519();if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 public key.");return Yu(r)}static convertFromEdPrivateKey({privateKeyBase58:e}){const t=Zu(e),r=$c.convertSecretKey(t);if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 private key.");return Yu(r)}export({publicKey:e=!1,privateKey:t=!1,includeContext:r=!1}={}){if(!e&&!t)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');const n={id:this.id,type:this.type};return r&&(n["@context"]=il.SUITE_CONTEXT),this.controller&&(n.controller=this.controller),e&&(n.publicKeyBase58=this.publicKeyBase58),t&&(n.privateKeyBase58=this.privateKeyBase58),this.revoked&&(n.revoked=this.revoked),n}static fingerprintFromPublicKey({publicKeyBase58:e}){const t=Zu(e),r=new Uint8Array(2+t.length);return r[0]=236,r[1]=1,r.set(t,2),`z${Yu(r)}`}static fromFingerprint({fingerprint:e}={}){if(!e||"string"!=typeof e||"z"!==e[0])throw new Error("`fingerprint` must be a multibase encoded string.");const t=Zu(e.substr(1));if(236!==t[0]||1!==t[1])throw new Error(`Unsupported Fingerprint Type: ${e}`);return new il({publicKeyBase58:Yu(t.slice(2))})}async deriveSecret({publicKey:e}){const t=Zu(e.publicKeyBase58);return async function({privateKey:e,remotePublicKey:t}){return qc.scalarMult(e,t)}({privateKey:Zu(this.privateKeyBase58),remotePublicKey:t})}fingerprint(){const{publicKeyBase58:e}=this;return il.fingerprintFromPublicKey({publicKeyBase58:e})}verifyFingerprint({fingerprint:e}={}){if("string"!=typeof e||"z"!==e[0])return{error:new Error("`fingerprint` must be a multibase encoded string."),valid:!1};let t,r;try{t=Zu(e.slice(1))}catch(e){return{error:e,valid:!1}}try{r=Zu(this.publicKeyBase58)}catch(e){return{error:e,valid:!1}}const n=236===t[0]&&1===t[1]&&r.toString()===t.slice(2).toString();return n?{valid:n}:{error:new Error("The fingerprint does not match the public key."),valid:!1}}}function ol(e,t){const r=Zu(t.slice(1));if(!e.every(((e,t)=>r[t]===e)))throw new Error("Multibase value does not have expected header.");return r.slice(e.length)}
/*!
   * Copyright (c) 2021 Digital Bazaar. All rights reserved.
   */il.suite=tl,il.SUITE_CONTEXT="https://w3id.org/security/suites/x25519-2019/v1";const sl=new Set(["assertionMethod","authentication","capabilityDelegation","capabilityInvocation","keyAgreement"]);
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */function al({doc:e,methodId:t,purpose:r}={}){if(!e)throw new TypeError("A DID Document is required.");if(!t&&!r)throw new TypeError("A method id or purpose is required.");if(t)return ul({doc:e,methodId:t});const[n]=e[r]||[];return n&&"string"==typeof n?ul({doc:e,methodId:n}):n}function ul({doc:e,methodId:t}){let r;e.verificationMethod&&(r=e.verificationMethod.find((e=>e.id===t)));for(const n of sl){const i=e[n]||[];for(const e of i)if("object"==typeof e&&e.id===t){r=e;break}if(r)return r}}var cl=ll;function ll(e){var t=this;if(t instanceof ll||(t=new ll),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function hl(e,t,r){var n=t===e.head?new pl(r,null,t,e):new pl(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function fl(e,t){e.tail=new pl(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function dl(e,t){e.head=new pl(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function pl(e,t,r,n){if(!(this instanceof pl))return new pl(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}ll.Node=pl,ll.create=ll,ll.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},ll.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},ll.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},ll.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)fl(this,arguments[e]);return this.length},ll.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)dl(this,arguments[e]);return this.length},ll.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},ll.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},ll.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},ll.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},ll.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},ll.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},ll.prototype.map=function(e,t){t=t||this;for(var r=new ll,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},ll.prototype.mapReverse=function(e,t){t=t||this;for(var r=new ll,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},ll.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},ll.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},ll.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},ll.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},ll.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new ll;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},ll.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new ll;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},ll.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var o=[];for(n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=hl(this,i,r[n]);return o},ll.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{require("./iterator.js")(ll)}catch(aH){}const gl=cl,ml=Symbol("max"),yl=Symbol("length"),vl=Symbol("lengthCalculator"),bl=Symbol("allowStale"),wl=Symbol("maxAge"),_l=Symbol("dispose"),xl=Symbol("noDisposeOnSet"),Sl=Symbol("lruList"),El=Symbol("cache"),kl=Symbol("updateAgeOnGet"),Il=()=>1,Al=(e,t,r)=>{const n=e[El].get(t);if(n){const t=n.value;if(Tl(e,t)){if(Ol(e,n),!e[bl])return}else r&&(e[kl]&&(n.value.now=Date.now()),e[Sl].unshiftNode(n));return t.value}},Tl=(e,t)=>{if(!t||!t.maxAge&&!e[wl])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[wl]&&r>e[wl]},Pl=e=>{if(e[yl]>e[ml])for(let t=e[Sl].tail;e[yl]>e[ml]&&null!==t;){const r=t.prev;Ol(e,t),t=r}},Ol=(e,t)=>{if(t){const r=t.value;e[_l]&&e[_l](r.key,r.value),e[yl]-=r.length,e[El].delete(r.key),e[Sl].removeNode(t)}};class Cl{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const Ml=(e,t,r,n)=>{let i=r.value;Tl(e,i)&&(Ol(e,r),e[bl]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var Nl=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ml]=e.max||1/0;const t=e.length||Il;if(this[vl]="function"!=typeof t?Il:t,this[bl]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[wl]=e.maxAge||0,this[_l]=e.dispose,this[xl]=e.noDisposeOnSet||!1,this[kl]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ml]=e||1/0,Pl(this)}get max(){return this[ml]}set allowStale(e){this[bl]=!!e}get allowStale(){return this[bl]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[wl]=e,Pl(this)}get maxAge(){return this[wl]}set lengthCalculator(e){"function"!=typeof e&&(e=Il),e!==this[vl]&&(this[vl]=e,this[yl]=0,this[Sl].forEach((e=>{e.length=this[vl](e.value,e.key),this[yl]+=e.length}))),Pl(this)}get lengthCalculator(){return this[vl]}get length(){return this[yl]}get itemCount(){return this[Sl].length}rforEach(e,t){t=t||this;for(let r=this[Sl].tail;null!==r;){const n=r.prev;Ml(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[Sl].head;null!==r;){const n=r.next;Ml(this,e,r,t),r=n}}keys(){return this[Sl].toArray().map((e=>e.key))}values(){return this[Sl].toArray().map((e=>e.value))}reset(){this[_l]&&this[Sl]&&this[Sl].length&&this[Sl].forEach((e=>this[_l](e.key,e.value))),this[El]=new Map,this[Sl]=new gl,this[yl]=0}dump(){return this[Sl].map((e=>!Tl(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[Sl]}set(e,t,r){if((r=r||this[wl])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,i=this[vl](t,e);if(this[El].has(e)){if(i>this[ml])return Ol(this,this[El].get(e)),!1;const o=this[El].get(e).value;return this[_l]&&(this[xl]||this[_l](e,o.value)),o.now=n,o.maxAge=r,o.value=t,this[yl]+=i-o.length,o.length=i,this.get(e),Pl(this),!0}const o=new Cl(e,t,i,n,r);return o.length>this[ml]?(this[_l]&&this[_l](e,t),!1):(this[yl]+=o.length,this[Sl].unshift(o),this[El].set(e,this[Sl].head),Pl(this),!0)}has(e){if(!this[El].has(e))return!1;const t=this[El].get(e).value;return!Tl(this,t)}get(e){return Al(this,e,!0)}peek(e){return Al(this,e,!1)}pop(){const e=this[Sl].tail;return e?(Ol(this,e),e.value):null}del(e){Ol(this,this[El].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[El].forEach(((e,t)=>Al(this,t,!1)))}};
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */const Rl=new Map([[Uc.suite,Uc.SUITE_CONTEXT],["Ed25519VerificationKey2018","https://w3id.org/security/suites/ed25519-2018/v1"],[Yc.suite,Yc.SUITE_CONTEXT],[il.suite,il.SUITE_CONTEXT]]);class Ll{constructor({verificationSuite:e=Uc}={}){this.method="key",this.verificationSuite=e}async generate({seed:e}={}){const t=await this.verificationSuite.generate({seed:e}),{didDocument:r,keyPairs:n}=await this._keyPairToDidDocument({keyPair:t});return{didDocument:r,keyPairs:n,methodFor:({purpose:e})=>{const{id:t}=al({doc:r,purpose:e});return n.get(t)}}}publicMethodFor({didDocument:e,purpose:t}={}){if(!e)throw new TypeError('The "didDocument" parameter is required.');if(!t)throw new TypeError('The "purpose" parameter is required.');const r=al({doc:e,purpose:t});if(!r)throw new Error(`No verification method found for purpose "${t}"`);return r}async get({did:e,url:t}={}){if(!(e=e||t))throw new TypeError('"did" must be a string.');const[r,n]=e.split("#"),i=r.substr("did:key:".length),o=this.verificationSuite.fromFingerprint({fingerprint:i}),{didDocument:s}=await this._keyPairToDidDocument({keyPair:o});return n?function({didDocument:e,keyIdFragment:t}){const r=e.id+"#"+t;let n;return n=e.verificationMethod[0].id===r?e.verificationMethod[0]:e.keyAgreement[0],{"@context":Rl.get(n.type),...n}}({didDocument:s,keyIdFragment:n}):s}async publicKeyToDidDoc({publicKeyDescription:e}={}){const{didDocument:t}=await this._keyPairToDidDocument({keyPair:e});return{didDocument:t}}async _keyPairToDidDocument({keyPair:e}={}){const t=await this.verificationSuite.from({...e}),r=`did:key:${t.fingerprint()}`;t.controller=r;const n=["https://www.w3.org/ns/did/v1"];let i;if("Ed25519VerificationKey2020"===t.type)i=Yc.fromEd25519VerificationKey2020({keyPair:t}),n.push(Uc.SUITE_CONTEXT,Yc.SUITE_CONTEXT);else{if("Ed25519VerificationKey2018"!==t.type)throw new Error('Cannot derive key agreement key from verification key type "'+t.type+'".');i=il.fromEd25519VerificationKey2018({keyPair:t}),n.push("https://w3id.org/security/suites/ed25519-2018/v1",il.SUITE_CONTEXT)}t.id=`${r}#${t.fingerprint()}`;const o=t.export({publicKey:!0}),s=i.export({publicKey:!0}),a={"@context":n,id:r,verificationMethod:[o],authentication:[o.id],assertionMethod:[o.id],capabilityDelegation:[o.id],capabilityInvocation:[o.id],keyAgreement:[s]},u=new Map;return u.set(t.id,t),u.set(i.id,i),{didDocument:a,keyPairs:u}}async computeId({keyPair:e}){return`did:key:${e.fingerprint()}#${e.fingerprint()}`}}async function jl(e){const t=new Ll;return await t.get({did:e})}var Dl,Bl={...Object.freeze({__proto__:null,resolve:async function(e,t=$u.url){if(Gu(e))return await jl(e);const r=await xu({url:`${t}/${e}`});return JSON.parse(r).didDocument},resolveDidKeyDocument:jl,getIssuerProfileUrl:function(e){if(!e.service)return"";const t=e.service.find((e=>"IssuerProfile"===e.type))?.serviceEndpoint;return t??""}}),didResolver:$u};!function(e){e.DEFAULT="standby",e.FAILURE="failure",e.STARTING="starting",e.SUCCESS="success"}(Dl||(Dl={}));class Ul{code;label;labelPending;parentStep;status;constructor(e,t){this.code=t,this.label=Oi("subSteps",`${t}Label`),this.labelPending=Oi("subSteps",`${t}LabelPending`),this.parentStep=e,this.status=Dl.DEFAULT}}function Fl(e){return""===e?0:function(e){const t=Date.parse(e);if(t)return new Date(t);const r=function(e){let t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));const r=e.slice(-5);let n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t}(e);return r||function(e){let t,r;const n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}(`${e}`).getTime()}function zl(e,t=null){const r=e.created?Fl(e.created):null,n=e.revoked?Fl(e.revoked):null,i=e.expires?Fl(e.expires):null;let o=t;return t||(o=(e.id||e.publicKey).replace("ecdsa-koblitz-pubkey:","")),new Ri(o,r,n,i)}var Vl=Object.freeze({__proto__:null,convertToVerificationSubsteps:function(e,t){return new Ul(e,t)},findVerificationSubstep:function(e,t,r=""){for(let n=0;n<t.length;n++){let i=t[n].subSteps.find((t=>t.code===e));if(i&&""===r)return i;if(t[n].suites?.length)for(let o=0;o<t[n].suites.length;o++){const s=t[n].suites[o];if(i=s.subSteps.find((t=>t.code===e)),i&&s.proofType===r)return i}}},getIssuerProfile:async function e(t){const r=Oi("errors","getIssuerProfile");if(!t)throw new ji("getIssuerProfile",`${r} - ${Oi("errors","issuerProfileNotSet")}`);let n;if("object"==typeof t&&(t=t.id),Wu(t))try{const r=await Hl.did.resolve(t);if(Gu(t))n=function(e){return{"@context":["https://w3id.org/openbadges/v2","https://w3id.org/blockcerts/3.0"],publicKey:[{created:(new Date).toISOString(),id:e.id.split(":").pop()}]}}(r);else{const t=await Hl.did.getIssuerProfileUrl(r);t&&(n=await e(t))}return{didDocument:r,...n}}catch(e){throw console.error(e),new ji("getIssuerProfile",`${r} - ${e}`)}else if(!function(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}(t))throw new ji("getIssuerProfile",`${r} - ${Oi("errors","issuerProfileNotSet")}`);if(n=JSON.parse(await xu({url:t}).catch((()=>{throw new ji("getIssuerProfile",r)}))),!function(e){const t=["issuer","profile"],{type:r}=e;return!!r&&(Array.isArray(r)?r.some((e=>t.includes(e.toLowerCase()))):t.includes(r.toLowerCase()))}(n)&&!function(e){const{issuer_key:t,revocation_key:r,issuerKeys:n,revocationKeys:i}=e;return!(!t||!r)||!(!n||!i)}(n))throw new ji("getIssuerProfile",`${r} - ${Oi("errors","issuerProfileInvalid")}`);return n},getRevokedAssertions:async function(e,t){if(!e)return[];const r=Oi("errors","getRevokedAssertions");t&&(e=function(e,t,r){const n=e.includes("?")?"&":"?";return`${e}${n}assertionId=${r}`}(e,0,encodeURIComponent(t)));const n=await xu({url:e}).catch((()=>{throw new ji(Ui.checkRevokedStatus,r)}));return JSON.parse(n).revokedAssertions??[]},lookForTx:function({transactionId:e,chain:t,explorerAPIs:r=[]}){return Hu(this,void 0,void 0,(function*(){const n=function(e){const{bitcoin:t,ethereum:r}={bitcoin:Lu(zu(n=e,ju)),ethereum:Lu(zu(n,Du))};var n;const{custom:i}=function(e){return{custom:Vu(e)}}(e.filter((e=>"rpc"===e.apiType)));return{bitcoin:t,ethereum:r,custom:[...i,...Lu(e.filter((e=>"rpc"!==e.apiType)))]}}(r),i=function({defaultAPIs:e,customAPIs:t}){const r=[e];if(null==t?void 0:t.length){const e=t[0].priority;r.splice(e,0,t)}if(1>e.concat(t).length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");return r}({defaultAPIs:Ku(t,n),customAPIs:n.custom});return yield qu(i,0,e,t)}))},parseIssuerKeys:function(e){try{const t={};if("@context"in e){const r=e.publicKey||e.publicKeys;for(let e=0;e<r.length;e++){const n=zl(r[e]);t[n.publicKey]=n}}else{const r=zl({},(e.issuerKeys||[])[0].key);t[r.publicKey]=r}return t}catch(e){throw console.error(e),new ji("parseIssuerKeys",Oi("errors","parseIssuerKeys"))}},parseRevocationKey:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"revocationKeys")&&e.revocationKeys.length>0?e.revocationKeys[0].key:""}}),Hl={addresses:Ai,certificates:Wi,chains:Gi,did:Bl,i18n:Ci,verifier:Vl};function Kl(e){const{credentialSubject:t}=e;return t.name||""}function ql(e){"string"==typeof e&&(e=[e]);const t=(r=function(e){return e.filter(di)}(e),r.find((e=>e.toLowerCase().indexOf("blockcerts")>0)));var r;const n=t.split("/").filter((e=>""!==e)),i=Object.keys($l),o=parseInt(i.filter((e=>function(e,t){return e.some((e=>e.includes(`v${t}`)||e.includes(`${t}.`)))}(n,e.toString())))[0],10);let s;switch(o){case 1:s=gi.V1_2;break;case 2:s=gi.V2_0;break;case 3:if(t.includes("-alpha")){s=gi.V3_0_alpha;break}if(t.includes("-beta")){s=gi.V3_0_beta;break}s=gi.V3_0}return{versionNumber:o,version:s}}const $l={1:function(){throw new ji("","Verification of v1 certificates is not supported by this component. See the python cert-verifier for v1.1 verification or the npm package cert-verifier-js-v1-legacy for v1.2 (https://www.npmjs.com/package/@blockcerts/cert-verifier-js-v1-legacy)")},2:async function(e){const{id:t,expires:r,badge:n}=e,{image:i,name:o,description:s,subtitle:a,issuer:u}=n,c=e.recipientProfile||e.recipient.recipientProfile,l=e.issuedOn,h=e.metadataJson,f=c.name,d=function(e){const t=[];for(const r in e){const n=e[r],i=new Li(n.image,n.jobTitle,n.name);t.push(i)}return t}(n.signatureLines),p=await Hl.verifier.getIssuerProfile(u);return{certificateImage:i,description:s,expires:r,id:t,issuedOn:l,issuer:p,metadataJson:h,name:o,recipientFullName:f,recordLink:t,revocationKey:null,sealImage:p.image,signatureImage:d,subtitle:a}},3:async function(e){const{issuer:t,metadataJson:r,metadata:n,issuanceDate:i,id:o,expirationDate:s,display:a}=e,u=n||r;return{display:a,expires:s,issuedOn:i,id:o,issuer:await Hl.verifier.getIssuerProfile(t),metadataJson:u,recipientFullName:Kl(e),recordLink:o}}};var Wl={exports:{}},Gl=6e4,Jl=36e5,Xl=24*Jl,Yl=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*Xl;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Jl;case"minutes":case"minute":case"mins":case"min":case"m":return r*Gl;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=Xl?Zl(e,t,Xl,"day"):t>=Jl?Zl(e,t,Jl,"hour"):t>=Gl?Zl(e,t,Gl,"minute"):t>=1e3?Zl(e,t,1e3,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=Xl?Math.round(e/Xl)+"d":t>=Jl?Math.round(e/Jl)+"h":t>=Gl?Math.round(e/Gl)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Zl(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==Eo&&"env"in Eo&&(e=Eo.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Yl,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Wl,Wl.exports);var Ql=Wl.exports,eh=class e{constructor(e,t=new Map,r=0){this.prefix=e,this._existing=t,this.counter=r}clone(){const{prefix:t,_existing:r,counter:n}=this;return new e(t,new Map(r),n)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}};!function(e,t){if(!e.setImmediate){var r,n,i,o,s,a=1,u={},c=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){lo((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},r=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(d,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[a]=i,r(a),a++},h.clearImmediate=f}function f(e){delete u[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?lt:self);const th=self.crypto||self.msCrypto;var rh=class{constructor(e){if(!th||!th.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupport algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await th.subtle.digest(this.algorithm,e));let r="";for(let e=0;e<t.length;++e)r+=t[e].toString(16).padStart(2,"0");return r}},nh=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,r=e.slice();let n=null,i=0;const o=e.length;for(let r=0;r<o;++r){const s=e[r],a=t.get(s);(null===n||s>n)&&(a&&r>0&&s>e[r-1]||!a&&r<o-1&&s>e[r+1])&&(n=s,i=r)}if(null===n)this.done=!0;else{const r=t.get(n)?i-1:i+1;e[i]=e[r],e[r]=n;for(const r of e)r>n&&t.set(r,!t.get(r))}return r}};const ih="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",oh="http://www.w3.org/2001/XMLSchema#string",sh={eoln:/(?:\r\n)|(?:\n)|(?:\r)/g};sh.empty=new RegExp("^[ \\t]*$"),sh.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$');var ah=class e{static parse(e){const t=[],r={},n=e.split(sh.eoln);let i=0;for(const e of n){if(i++,sh.empty.test(e))continue;const n=e.match(sh.quad);if(null===n)throw new Error("N-Quads parse error on line "+i+".");const o={subject:null,predicate:null,object:null,graph:null};if(void 0!==n[1]?o.subject={termType:"NamedNode",value:n[1]}:o.subject={termType:"BlankNode",value:n[2]},o.predicate={termType:"NamedNode",value:n[3]},void 0!==n[4]?o.object={termType:"NamedNode",value:n[4]}:void 0!==n[5]?o.object={termType:"BlankNode",value:n[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==n[7]?o.object.datatype.value=n[7]:void 0!==n[8]?(o.object.datatype.value=ih,o.object.language=n[8]):o.object.datatype.value=oh,o.object.value=hh(n[6])),void 0!==n[9]?o.graph={termType:"NamedNode",value:n[9]}:void 0!==n[10]?o.graph={termType:"BlankNode",value:n[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in r){let e=!0;const n=r[o.graph.value];for(const t of n)if(uh(t,o)){e=!1;break}e&&(n.push(o),t.push(o))}else r[o.graph.value]=[o],t.push(o)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const r=[];for(const n of t)r.push(e.serializeQuad(n));return r.sort().join("")}static serializeQuad(e){const t=e.subject,r=e.predicate,n=e.object,i=e.graph;let o="";return"NamedNode"===t.termType?o+=`<${t.value}>`:o+=`${t.value}`,o+=` <${r.value}> `,"NamedNode"===n.termType?o+=`<${n.value}>`:"BlankNode"===n.termType?o+=n.value:(o+=`"${function(e){return e.replace(ch,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(n.value)}"`,n.datatype.value===ih?n.language&&(o+=`@${n.language}`):n.datatype.value!==oh&&(o+=`^^<${n.datatype.value}>`)),"NamedNode"===i.termType?o+=` <${i.value}>`:"BlankNode"===i.termType&&(o+=` ${i.value}`),o+=" .\n",o}static legacyDatasetToQuads(e){const t=[],r={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const n in e)e[n].forEach((e=>{const i={};for(const t in e){const n=e[t],o={termType:r[n.type],value:n.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in n&&(o.datatype.value=n.datatype),"language"in n?("datatype"in n||(o.datatype.value=ih),o.language=n.language):"datatype"in n||(o.datatype.value=oh)),i[t]=o}i.graph="@default"===n?{termType:"DefaultGraph",value:""}:{termType:n.startsWith("_:")?"BlankNode":"NamedNode",value:n},t.push(i)}));return t}};function uh(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&("Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value)}const ch=/["\\\n\r]/g,lh=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function hh(e){return e.replace(lh,(function(e,t,r,n){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(n)throw new Error("Unsupported U escape")}))}const fh=eh,dh=rh,ph=nh,gh=ah;var mh=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new fh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}async main(e){this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,r=[...this.blankNodeInfo.keys()];let n=0;for(const e of r)++n%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const i=[...t.keys()].sort(),o=[];for(const e of i){const r=t.get(e);if(r.length>1){o.push(r);continue}const n=r[0];this.canonicalIssuer.getId(n)}for(const e of o){const t=[];for(const r of e){if(this.canonicalIssuer.hasId(r))continue;const e=new fh("_:b");e.getId(r);const n=await this.hashNDegreeQuads(r,e);t.push(n)}t.sort(yh);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const s=[];for(const e of this.quads){const t={...e};t.subject=this._useCanonicalId({component:t.subject}),t.object=this._useCanonicalId({component:t.object}),t.graph=this._useCanonicalId({component:t.graph}),s.push(gh.serializeQuad(t))}return s.sort(),s.join("")}async hashFirstDegreeQuads(e){const t=[],r=this.blankNodeInfo.get(e),n=r.quads;for(const r of n){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(gh.serializeQuad(n))}t.sort();const i=new dh(this.hashAlgorithm);for(const e of t)i.update(e);return r.hash=await i.digest(),r.hash}async hashRelatedBlankNode(e,t,r,n){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):this.blankNodeInfo.get(e).hash;const o=new dh(this.hashAlgorithm);return o.update(n),"g"!==n&&o.update(this.getRelatedPredicate(t)),o.update(i),o.digest()}async hashNDegreeQuads(e,t){const r=new dh(this.hashAlgorithm),n=await this.createHashToRelated(e,t),i=[...n.keys()].sort();for(const e of i){r.update(e);let i,o="";const s=new ph(n.get(e));let a=0;for(;s.hasNext();){const e=s.next();++a%3==0&&await this._yield();let r=t.clone(),n="";const u=[];let c=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?n+=this.canonicalIssuer.getId(t):(r.hasId(t)||u.push(t),n+=r.getId(t)),0!==o.length&&n>o){c=!0;break}if(!c){for(const e of u){const t=await this.hashNDegreeQuads(e,r);if(n+=r.getId(e),n+=`<${t.hash}>`,r=t.issuer,0!==o.length&&n>o){c=!0;break}}c||(0===o.length||n<o)&&(o=n,i=r)}}r.update(o),t=i}return{hash:await r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;let i=0;for(const o of n)++i%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:t,hashToRelated:r})]);return r}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const r=await this.hashFirstDegreeQuads(e),n=t.get(r);n?n.push(e):t.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const r=t.value,n=this.blankNodeInfo.get(r);n?n.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:r,id:n,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===n)return;const s=t.value,a=await this.hashRelatedBlankNode(s,e,i,r),u=o.get(a);u?u.push(s):o.set(a,[s])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise((e=>setImmediate(e)))}};function yh(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}const vh=mh,bh=eh,wh=rh,_h=nh,xh=ah;var Sh=class{constructor(){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new bh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}main(e){this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,r=[...this.blankNodeInfo.keys()];for(const e of r)this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const n=[...t.keys()].sort(),i=[];for(const e of n){const r=t.get(e);if(r.length>1){i.push(r);continue}const n=r[0];this.canonicalIssuer.getId(n)}for(const e of i){const t=[];for(const r of e){if(this.canonicalIssuer.hasId(r))continue;const e=new bh("_:b");e.getId(r);const n=this.hashNDegreeQuads(r,e);t.push(n)}t.sort(Eh);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const o=[];for(const e of this.quads){const t={...e};t.subject=this._useCanonicalId({component:t.subject}),t.object=this._useCanonicalId({component:t.object}),t.graph=this._useCanonicalId({component:t.graph}),o.push(xh.serializeQuad(t))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const t=[],r=this.blankNodeInfo.get(e),n=r.quads;for(const r of n){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(xh.serializeQuad(n))}t.sort();const i=new wh(this.hashAlgorithm);for(const e of t)i.update(e);return r.hash=i.digest(),r.hash}hashRelatedBlankNode(e,t,r,n){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):this.blankNodeInfo.get(e).hash;const o=new wh(this.hashAlgorithm);return o.update(n),"g"!==n&&o.update(this.getRelatedPredicate(t)),o.update(i),o.digest()}hashNDegreeQuads(e,t){const r=new wh(this.hashAlgorithm),n=this.createHashToRelated(e,t),i=[...n.keys()].sort();for(const e of i){r.update(e);let i,o="";const s=new _h(n.get(e));for(;s.hasNext();){const e=s.next();let r=t.clone(),n="";const a=[];let u=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?n+=this.canonicalIssuer.getId(t):(r.hasId(t)||a.push(t),n+=r.getId(t)),0!==o.length&&n>o){u=!0;break}if(!u){for(const e of a){const t=this.hashNDegreeQuads(e,r);if(n+=r.getId(e),n+=`<${t.hash}>`,r=t.issuer,0!==o.length&&n>o){u=!0;break}}u||(0===o.length||n<o)&&(o=n,i=r)}}r.update(o),t=i}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;for(const i of n)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:r});return r}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const r=this.hashFirstDegreeQuads(e),n=t.get(r);n?n.push(e):t.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const r=t.value,n=this.blankNodeInfo.get(r);n?n.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:r,id:n,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===n)return;const s=t.value,a=this.hashRelatedBlankNode(s,e,i,r),u=o.get(a);u?u.push(s):o.set(a,[s])}_useCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}};function Eh(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}const kh=Sh,Ih=mh,Ah=class extends vh{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;let i=0;for(const o of n){let n,s;if("BlankNode"===o.subject.termType&&o.subject.value!==e)s=o.subject.value,n="p";else{if("BlankNode"!==o.object.termType||o.object.value===e)continue;s=o.object.value,n="r"}++i%100==0&&await this._yield();const a=await this.hashRelatedBlankNode(s,o,t,n),u=r.get(a);u?u.push(s):r.set(a,[s])}return r}},Th=Sh,Ph=class extends kh{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;for(const i of n){let n,o;if("BlankNode"===i.subject.termType&&i.subject.value!==e)o=i.subject.value,n="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;o=i.object.value,n="r"}const s=this.hashRelatedBlankNode(o,i,t,n),a=r.get(s);a?a.push(o):r.set(s,[o])}return r}};let Oh;try{Oh=require("rdf-canonize-native")}catch(aH){}const Ch={};var Mh=Ch;Ch.NQuads=ah,Ch.IdentifierIssuer=eh,Ch._rdfCanonizeNative=function(e){return e&&(Oh=e),Oh},Ch.canonize=async function(e,t){if(Array.isArray(e)||(e=Ch.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!Oh)throw new Error("rdf-canonize-native not available");return new Promise(((r,n)=>Oh.canonize(e,t,((e,t)=>e?n(e):r(t)))))}if("URDNA2015"===t.algorithm)return new Ih(t).main(e);if("URGNA2012"===t.algorithm)return new Ah(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},Ch._canonizeSync=function(e,t){if(Array.isArray(e)||(e=Ch.NQuads.legacyDatasetToQuads(e)),t.useNative){if(Oh)return Oh.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new Th(t).main(e);if("URGNA2012"===t.algorithm)return new Ph(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)};var Nh=Mh;const Rh={};var Lh=Rh;Rh.isArray=Array.isArray,Rh.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),Rh.isDouble=e=>Rh.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),Rh.isEmptyObject=e=>Rh.isObject(e)&&0===Object.keys(e).length,Rh.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),Rh.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),Rh.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),Rh.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),Rh.isUndefined=e=>void 0===e;const jh=Lh,Dh={};var Bh=Dh;Dh.isSubject=e=>!(!jh.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),Dh.isSubjectReference=e=>jh.isObject(e)&&1===Object.keys(e).length&&"@id"in e,Dh.isValue=e=>jh.isObject(e)&&"@value"in e,Dh.isList=e=>jh.isObject(e)&&"@list"in e,Dh.isGraph=e=>jh.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,Dh.isSimpleGraph=e=>Dh.isGraph(e)&&!("@id"in e),Dh.isBlankNode=e=>!!jh.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e));var Uh=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}};const Fh=Bh,zh=Lh,Vh=Nh.IdentifierIssuer,Hh=Uh,Kh=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,qh=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,$h=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,Wh="application/ld+json, application/json",Gh={};var Jh=Gh;function Xh(e,t){if(zh.isArray(t))for(let r=0;r<t.length;++r)t[r]=Xh(e,t[r]);else if(Fh.isList(t))t["@list"]=Xh(e,t["@list"]);else if(zh.isObject(t)){Fh.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const r=Object.keys(t).sort();for(let n=0;n<r.length;++n){const i=r[n];"@id"!==i&&(t[i]=Xh(e,t[i]))}}return t}Gh.IdentifierIssuer=Vh,Gh.clone=function(e){if(e&&"object"==typeof e){let t;if(zh.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=Gh.clone(e[r])}else if(e instanceof Map){t=new Map;for(const[r,n]of e)t.set(r,Gh.clone(n))}else if(e instanceof Set){t=new Set;for(const r of e)t.add(Gh.clone(r))}else if(zh.isObject(e)){t={};for(const r in e)t[r]=Gh.clone(e[r])}else t=e.toString();return t}return e},Gh.asArray=function(e){return Array.isArray(e)?e:[e]},Gh.buildHeaders=(e={})=>{const t=Object.keys(e).some((e=>"accept"===e.toLowerCase()));if(t)throw new RangeError('Accept header may not be specified; only "'+Wh+'" is supported.');return Object.assign({Accept:Wh},e)},Gh.parseLinkHeader=e=>{const t={},r=e.match(Kh);for(let e=0;e<r.length;++e){let n=r[e].match(qh);if(!n)continue;const i={target:n[1]},o=n[2];for(;n=$h.exec(o);)i[n[1]]=void 0===n[2]?n[3]:n[2];const s=i.rel||"";Array.isArray(t[s])?t[s].push(i):t.hasOwnProperty(s)?t[s]=[t[s],i]:t[s]=i}return t},Gh.validateTypeValue=(e,t)=>{if(!(zh.isString(e)||zh.isArray(e)&&e.every((e=>zh.isString(e))))){if(t&&zh.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&Gh.asArray(e["@default"]).every((e=>zh.isString(e))))return}throw new Hh('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},Gh.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const r=e[t];return!zh.isArray(r)||r.length>0}return!1},Gh.hasValue=(e,t,r)=>{if(Gh.hasProperty(e,t)){let n=e[t];const i=Fh.isList(n);if(zh.isArray(n)||i){i&&(n=n["@list"]);for(let e=0;e<n.length;++e)if(Gh.compareValues(r,n[e]))return!0}else if(!zh.isArray(r))return Gh.compareValues(r,n)}return!1},Gh.addValue=(e,t,r,n)=>{if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),"prependValue"in n||(n.prependValue=!1),n.valueIsArray)e[t]=r;else if(zh.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),n.prependValue&&(r=r.concat(e[t]),e[t]=[]);for(let i=0;i<r.length;++i)Gh.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){const i=!n.allowDuplicate&&Gh.hasValue(e,t,r);zh.isArray(e[t])||i&&!n.propertyIsArray||(e[t]=[e[t]]),i||(n.prependValue?e[t].unshift(r):e[t].push(r))}else e[t]=n.propertyIsArray?[r]:r},Gh.getValues=(e,t)=>[].concat(e[t]||[]),Gh.removeProperty=(e,t)=>{delete e[t]},Gh.removeValue=(e,t,r,n)=>{"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);const i=Gh.getValues(e,t).filter((e=>!Gh.compareValues(e,r)));0===i.length?Gh.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},Gh.relabelBlankNodes=(e,t)=>Xh((t=t||{}).issuer||new Vh("_:b"),e),Gh.compareValues=(e,t)=>e===t||!(!Fh.isValue(e)||!Fh.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(zh.isObject(e)&&"@id"in e&&zh.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],Gh.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1;const Yh="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Zh="http://www.w3.org/2001/XMLSchema#";var Qh={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Yh,RDF_LIST:Yh+"List",RDF_FIRST:Yh+"first",RDF_REST:Yh+"rest",RDF_NIL:Yh+"nil",RDF_TYPE:Yh+"type",RDF_PLAIN_LITERAL:Yh+"PlainLiteral",RDF_XML_LITERAL:Yh+"XMLLiteral",RDF_JSON_LITERAL:Yh+"JSON",RDF_OBJECT:Yh+"object",RDF_LANGSTRING:Yh+"langString",XSD:Zh,XSD_BOOLEAN:Zh+"boolean",XSD_DOUBLE:Zh+"double",XSD_INTEGER:Zh+"integer",XSD_STRING:Zh+"string"},ef=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}};const tf=Lh,rf={};var nf=rf;rf.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},rf.parse=(e,t)=>{const r={},n=rf.parsers[t||"full"],i=n.regex.exec(e);let o=n.keys.length;for(;o--;)r[n.keys[o]]=void 0===i[o]?null:i[o];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=rf.removeDotSegments(r.path),r},rf.prependBase=(e,t)=>{if(null===e)return t;if(rf.isAbsolute(t))return t;e&&!tf.isString(e)||(e=rf.parse(e||""));const r=rf.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,n.path=t}n.query=r.query}""!==r.path&&(n.path=rf.removeDotSegments(n.path));let i=n.protocol;return null!==n.authority&&(i+="//"+n.authority),i+=n.path,null!==n.query&&(i+="?"+n.query),null!==r.fragment&&(i+="#"+r.fragment),""===i&&(i="./"),i},rf.removeBase=(e,t)=>{if(null===e)return t;e&&!tf.isString(e)||(e=rf.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const n=rf.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),o=n.normalizedPath.split("/"),s=n.fragment||n.query?0:1;for(;i.length>0&&o.length>s&&i[0]===o[0];)i.shift(),o.shift();let a="";if(i.length>0){i.pop();for(let e=0;e<i.length;++e)a+="../"}return a+=o.join("/"),null!==n.query&&(a+="?"+n.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},rf.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),n=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),n&&r.push("")):n&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const of=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;rf.isAbsolute=e=>tf.isString(e)&&of.test(e),rf.isRelative=e=>tf.isString(e);const{parseLinkHeader:sf,buildHeaders:af}=Jh,{LINK_HEADER_CONTEXT:uf}=Qh,cf=Uh,lf=ef,{prependBase:hf}=nf,ff=/(^|(\r\n))link:/i,df=({secure:e,headers:t={},xhr:r}={headers:{}})=>(t=af(t),(new lf).wrapLoader((async function n(i){if(0!==i.indexOf("http:")&&0!==i.indexOf("https:"))throw new cf('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i});if(e&&0!==i.indexOf("https"))throw new cf('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:i});let o;try{o=await function(e,t,r){const n=new(e=e||XMLHttpRequest);return new Promise(((e,i)=>{n.onload=()=>e(n),n.onerror=e=>i(e),n.open("GET",t,!0);for(const e in r)n.setRequestHeader(e,r[e]);n.send()}))}(r,i,t)}catch(e){throw new cf("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:e})}if(o.status>=400)throw new cf("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:i,httpStatusCode:o.status});let s={contextUrl:null,documentUrl:i,document:o.response},a=null;const u=o.getResponseHeader("Content-Type");let c;if(ff.test(o.getAllResponseHeaders())&&(c=o.getResponseHeader("Link")),c&&"application/ld+json"!==u){const e=sf(c),t=e[uf];if(Array.isArray(t))throw new cf("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i});t&&(s.contextUrl=t.target),a=e.alternate,a&&"application/ld+json"==a.type&&!(u||"").match(/^application\/(\w*\+)?json$/)&&(s=await n(hf(i,a.target)))}return s}))),pf={};var gf=pf;pf.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=df,e.useDocumentLoader("xhr"))},pf.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})};const mf=Nl,{isArray:yf,isObject:vf,isString:bf}=Lh,{asArray:wf}=Jh,{prependBase:_f}=nf,xf=Uh,Sf=class{constructor({document:e}){this.document=e,this.cache=new mf({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}};function Ef(e){throw new xf("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function kf({context:e,base:t}){if(!e)return;const r=e["@context"];if(bf(r))e["@context"]=_f(t,r);else if(yf(r))for(let e=0;e<r.length;++e){const n=r[e];bf(n)?r[e]=_f(t,n):vf(n)&&kf({context:{"@context":n},base:t})}else if(vf(r))for(const e in r)kf({context:r[e],base:t})}var If=Nh.NQuads;const Af=Jh,Tf=Uh,{isArray:Pf,isObject:Of,isString:Cf,isUndefined:Mf}=Lh,{isAbsolute:Nf,isRelative:Rf,prependBase:Lf}=nf,{asArray:jf,compareShortestLeast:Df}=Jh,Bf=new Map,Uf=/^@[a-zA-Z]+$/,Ff={};var zf=Ff;function Vf(e,t,r,n,i,o){if(null===t||!Cf(t)||Ff.isKeyword(t))return t;if(t.match(Uf))return null;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&Ff.createTermDefinition({activeCtx:e,localCtx:n,term:t,defined:i,options:o}),(r=r||{}).vocab){const r=e.mappings.get(t);if(null===r)return null;if(Of(r)&&"@id"in r)return r["@id"]}const s=t.indexOf(":");if(s>0){const r=t.substr(0,s),a=t.substr(s+1);if("_"===r||0===a.indexOf("//"))return t;n&&n.hasOwnProperty(r)&&Ff.createTermDefinition({activeCtx:e,localCtx:n,term:r,defined:i,options:o});const u=e.mappings.get(r);if(u&&u._prefix)return u["@id"]+a;if(Nf(t))return t}if(r.vocab&&"@vocab"in e)return e["@vocab"]+t;if(r.base&&"@base"in e){if(e["@base"])return Lf(Lf(o.base,e["@base"]),t)}else if(r.base)return Lf(o.base,t);return t}function Hf(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const r=Array.isArray(e);if(r!==Array.isArray(t))return!1;if(r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!Hf(e[r],t[r]))return!1;return!0}const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const r in e){let n=e[r],i=t[r];if("@container"===r&&Array.isArray(n)&&Array.isArray(i)&&(n=n.slice().sort(),i=i.slice().sort()),!Hf(n,i))return!1}return!0}Ff.process=async({activeCtx:e,localCtx:t,options:r,propagate:n=!0,overrideProtected:i=!1,cycles:o=new Set})=>{if(Of(t)&&"@context"in t&&Pf(t["@context"])&&(t=t["@context"]),0===jf(t).length)return e;const s=await r.contextResolver.resolve({activeCtx:e,context:t,documentLoader:r.documentLoader,base:r.base});Of(s[0].document)&&"boolean"==typeof s[0].document["@propagate"]&&(n=s[0].document["@propagate"]);let a=e;n||a.previousContext||(a=a.clone(),a.previousContext=e);for(const n of s){let{document:s}=n;if(e=a,null===s){if(!i&&0!==Object.keys(e.protected).length){const i=r&&r.protectedMode||"error";if("error"===i)throw new Tf("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===i){console.warn("WARNING: invalid context nullification");const t=n.getProcessed(e);if(t){a=e=t;continue}const i=e;a=e=Ff.getInitialContext(r).clone();for(const[t,r]of Object.entries(i.protected))r&&(e.mappings[t]=Af.clone(i.mappings[t]));e.protected=Af.clone(i.protected),n.setProcessed(i,a);continue}throw new Tf("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:i})}a=e=Ff.getInitialContext(r).clone();continue}const u=n.getProcessed(e);if(u){a=e=u;continue}if(Of(s)&&"@context"in s&&(s=s["@context"]),!Of(s))throw new Tf("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});a=a.clone();const c=new Map;if("@version"in s){if(1.1!==s["@version"])throw new Tf("Unsupported JSON-LD version: "+s["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:s});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new Tf("@version: "+s["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:s});a.processingMode="json-ld-1.1",a["@version"]=s["@version"],c.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode,"@base"in s){let e=s["@base"];if(null===e||Nf(e));else{if(!Rf(e))throw new Tf('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});e=Lf(a["@base"],e)}a["@base"]=e,c.set("@base",!0)}if("@vocab"in s){const e=s["@vocab"];if(null===e)delete a["@vocab"];else{if(!Cf(e))throw new Tf('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!Nf(e)&&Ff.processingMode(a,1))throw new Tf('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});a["@vocab"]=Vf(a,e,{vocab:!0,base:!0},void 0,void 0,r)}c.set("@vocab",!0)}if("@language"in s){const e=s["@language"];if(null===e)delete a["@language"];else{if(!Cf(e))throw new Tf('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});a["@language"]=e.toLowerCase()}c.set("@language",!0)}if("@direction"in s){const t=s["@direction"];if("json-ld-1.0"===e.processingMode)throw new Tf("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:s});if(null===t)delete a["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new Tf('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:s});a["@direction"]=t}c.set("@direction",!0)}if("@propagate"in s){const r=s["@propagate"];if("json-ld-1.0"===e.processingMode)throw new Tf("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if("boolean"!=typeof r)throw new Tf("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});c.set("@propagate",!0)}if("@import"in s){const n=s["@import"];if("json-ld-1.0"===e.processingMode)throw new Tf("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:s});if(!Cf(n))throw new Tf("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const i=await r.contextResolver.resolve({activeCtx:e,context:n,documentLoader:r.documentLoader,base:r.base});if(1!==i.length)throw new Tf("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const o=i[0].getProcessed(e);if(o)s=o;else{const r=i[0].document;if("@import"in r)throw new Tf("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in r)s.hasOwnProperty(e)||(s[e]=r[e]);i[0].setProcessed(e,s)}c.set("@import",!0)}c.set("@protected",s["@protected"]||!1);for(const e in s)if(Ff.createTermDefinition({activeCtx:a,localCtx:s,term:e,defined:c,options:r,overrideProtected:i}),Of(s[e])&&"@context"in s[e]){const n=s[e]["@context"];let i=!0;if(Cf(n)){const e=Lf(r.base,n);o.has(e)?i=!1:o.add(e)}if(i)try{await Ff.process({activeCtx:a.clone(),localCtx:s[e]["@context"],overrideProtected:!0,options:r,cycles:o})}catch(t){throw new Tf("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:s[e]["@context"],term:e})}}n.setProcessed(e,a)}return a},Ff.createTermDefinition=({activeCtx:e,localCtx:t,term:r,defined:n,options:i,overrideProtected:o=!1})=>{if(n.has(r)){if(n.get(r))return;throw new Tf("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}let s;if(n.set(r,!1),t.hasOwnProperty(r)&&(s=t[r]),"@type"===r&&Of(s)&&"@set"===(s["@container"]||"@set")&&Ff.processingMode(e,1.1)){const e=["@container","@id","@protected"],n=Object.keys(s);if(0===n.length||n.some((t=>!e.includes(t))))throw new Tf("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r})}else{if(Ff.isKeyword(r))throw new Tf("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(r.match(Uf))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:r});if(""===r)throw new Tf("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const a=e.mappings.get(r);e.mappings.has(r)&&e.mappings.delete(r);let u=!1;if((Cf(s)||null===s)&&(u=!0,s={"@id":s}),!Of(s))throw new Tf("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const c={};e.mappings.set(r,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];Ff.processingMode(e,1.1)&&l.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in s)if(!l.includes(e))throw new Tf("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const h=r.indexOf(":");if(c._termHasColon=h>0,"@reverse"in s){if("@id"in s)throw new Tf("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in s)throw new Tf("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const o=s["@reverse"];if(!Cf(o))throw new Tf("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!Ff.isKeyword(o)&&o.match(Uf))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:o}),void(a?e.mappings.set(r,a):e.mappings.delete(r));const u=Vf(e,o,{vocab:!0,base:!1},t,n,i);if(!Nf(u))throw new Tf("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=u,c.reverse=!0}else if("@id"in s){let o=s["@id"];if(o&&!Cf(o))throw new Tf("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===o)c["@id"]=null;else{if(!Ff.isKeyword(o)&&o.match(Uf))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:o}),void(a?e.mappings.set(r,a):e.mappings.delete(r));if(o!==r){if(o=Vf(e,o,{vocab:!0,base:!1},t,n,i),!Nf(o)&&!Ff.isKeyword(o))throw new Tf("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(r.match(/(?::[^:])|\//)&&Vf(e,r,{vocab:!0,base:!1},t,new Map(n).set(r,!0),i)!==o)throw new Tf("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=o,c._prefix=u&&!c._termHasColon&&o.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in c))if(c._termHasColon){const o=r.substr(0,h);if(t.hasOwnProperty(o)&&Ff.createTermDefinition({activeCtx:e,localCtx:t,term:o,defined:n,options:i}),e.mappings.has(o)){const t=r.substr(h+1);c["@id"]=e.mappings.get(o)["@id"]+t}else c["@id"]=r}else if("@type"===r)c["@id"]=r;else{if(!("@vocab"in e))throw new Tf("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((!0===s["@protected"]||!0===n.get("@protected")&&!1!==s["@protected"])&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in s){let r=s["@type"];if(!Cf(r))throw new Tf("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===r||"@none"===r){if(Ff.processingMode(e,1))throw new Tf(`Invalid JSON-LD syntax; an @context @type value must not be "${r}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==r&&"@vocab"!==r){if(r=Vf(e,r,{vocab:!0,base:!1},t,n,i),!Nf(r))throw new Tf("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===r.indexOf("_:"))throw new Tf("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=r}if("@container"in s){const r=Cf(s["@container"])?[s["@container"]]:s["@container"]||[],n=["@list","@set","@index","@language"];let i=!0;const o=r.includes("@set");if(Ff.processingMode(e,1.1)){if(n.push("@graph","@id","@type"),r.includes("@list")){if(1!==r.length)throw new Tf("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(r.includes("@graph")){if(r.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new Tf("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=r.length<=(o?2:1);if(r.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new Tf("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else i&=!Pf(s["@container"]),i&=r.length<=1;if(i&=r.every((e=>n.includes(e))),i&=!(o&&r.includes("@list")),!i)throw new Tf("Invalid JSON-LD syntax; @context @container value must be one of the following: "+n.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!r.every((e=>["@index","@set"].includes(e))))throw new Tf("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=r}if("@index"in s){if(!("@container"in s)||!c["@container"].includes("@index"))throw new Tf(`Invalid JSON-LD syntax; @index without @index in @container: "${s["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!Cf(s["@index"])||0===s["@index"].indexOf("@"))throw new Tf(`Invalid JSON-LD syntax; @index must expand to an IRI: "${s["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let e=s["@language"];if(null!==e&&!Cf(e))throw new Tf("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in s){if(r.match(/:|\//))throw new Tf("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(Ff.isKeyword(c["@id"]))throw new Tf("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof s["@prefix"])throw new Tf("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});c._prefix=!0===s["@prefix"]}if("@direction"in s){const e=s["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new Tf('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});c["@direction"]=e}if("@nest"in s){const e=s["@nest"];if(!Cf(e)||"@nest"!==e&&0===e.indexOf("@"))throw new Tf("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=e}
// disallow aliasing @context and @preserve
const f=c["@id"];if("@context"===f||"@preserve"===f)throw new Tf("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(a&&a.protected&&!o&&(e.protected[r]=!0,c.protected=!0,!Hf(a,c))){const e=i&&i.protectedMode||"error";if("error"===e)throw new Tf(`Invalid JSON-LD syntax; tried to redefine "${r}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:r});throw new Tf("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:r,protectedMode:e})}},Ff.expandIri=(e,t,r,n)=>Vf(e,t,r,void 0,void 0,n),Ff.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),r=Bf.get(t);if(r)return r;const n={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},r=e.fastCurieMap={},n={},s=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],u=e.mappings,c=[...u.keys()].sort(Df);for(const e of c){const i=u.get(e);if(null===i)continue;let c=i["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===i["@id"])continue;const l=jf(i["@id"]);for(const u of l){let l=t[u];const h=Ff.isKeyword(u);if(l)h||i._termHasColon||n[u].push(e);else if(t[u]=l={},!h&&!i._termHasColon){n[u]=[e];const t={iri:u,terms:n[u]};u[0]in r?r[u[0]].push(t):r[u[0]]=[t]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],o(e,l["@any"],"@none"),i.reverse)o(e,l["@type"],"@reverse");else if("@none"===i["@type"])o(e,l["@any"],"@none"),o(e,l["@language"],"@none"),o(e,l["@type"],"@none");else if("@type"in i)o(e,l["@type"],i["@type"]);else if("@language"in i&&"@direction"in i){const t=i["@language"],r=i["@direction"];o(e,l["@language"],t&&r?`${t}_${r}`.toLowerCase():t?t.toLowerCase():r?`_${r}`:"@null")}else"@language"in i?o(e,l["@language"],(i["@language"]||"@null").toLowerCase()):"@direction"in i?i["@direction"]?o(e,l["@language"],`_${i["@direction"]}`):o(e,l["@language"],"@none"):a?(o(e,l["@language"],`_${a}`),o(e,l["@language"],"@none"),o(e,l["@type"],"@none")):(o(e,l["@language"],s),o(e,l["@language"],"@none"),o(e,l["@type"],"@none"))}}for(const e in r)i(r,e,1);return t},clone:function(){const e={};return e.mappings=Af.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=Af.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Bf.size&&Bf.clear(),Bf.set(t,n),n;function i(e,t,r){const n=e[t],o=e[t]={};let s,a;for(const e of n)s=e.iri,a=r>=s.length?"":s[r],a in o?o[a].push(e):o[a]=[e];for(const e in o)""!==e&&i(o,e,r+1)}function o(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},Ff.getContextValue=(e,t,r)=>{if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){const n=e.mappings.get(t);if(Mf(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&r in e||"@direction"===r&&r in e?e[r]:"@context"!==r?null:void 0},Ff.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,Ff.isKeyword=e=>{if(!Cf(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};const Kf=Uh,{isArray:qf,isObject:$f,isEmptyObject:Wf,isString:Gf,isUndefined:Jf}=Lh,{isList:Xf,isValue:Yf,isGraph:Zf,isSubject:Qf}=Bh,{expandIri:ed,getContextValue:td,isKeyword:rd,process:nd,processingMode:id}=zf,{isAbsolute:od}=nf,{addValue:sd,asArray:ad,getValues:ud,validateTypeValue:cd}=Jh,ld={};var hd=ld;const fd=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function dd({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o={},insideList:s,typeKey:a,typeScopedContext:u,expansionMap:c}){const l=Object.keys(n).sort(),h=[];let f;const d=n[a]&&"@json"===ed(e,qf(n[a])?n[a][0]:n[a],{vocab:!0},o);for(const a of l){let l,p=n[a];if("@context"===a)continue;let g=ed(e,a,{vocab:!0},o);if((null===g||!od(g)&&!rd(g))&&(g=c({unmappedProperty:a,activeCtx:e,activeProperty:t,parent:n,options:o,insideList:s,value:p,expandedParent:i}),void 0===g))continue;if(rd(g)){if("@reverse"===r)throw new Kf("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:p});if(g in i&&"@included"!==g&&"@type"!==g)throw new Kf("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:g})}if("@id"===g){if(!Gf(p)){if(!o.isFrame)throw new Kf('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:p});if($f(p)){if(!Wf(p))throw new Kf('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:p})}else{if(!qf(p))throw new Kf('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:p});if(!p.every((e=>Gf(e))))throw new Kf('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:p})}}sd(i,"@id",ad(p).map((t=>Gf(t)?ed(e,t,{base:!0},o):t)),{propertyIsArray:o.isFrame});continue}if("@type"===g){$f(p)&&(p=Object.fromEntries(Object.entries(p).map((([e,t])=>[ed(u,e,{vocab:!0}),ad(t).map((e=>ed(u,e,{base:!0,vocab:!0})))])))),cd(p,o.isFrame),sd(i,"@type",ad(p).map((e=>Gf(e)?ed(u,e,{base:!0,vocab:!0},o):e)),{propertyIsArray:o.isFrame});continue}if("@included"===g&&id(e,1.1)){const r=ad(await ld.expand({activeCtx:e,activeProperty:t,element:p,options:o,expansionMap:c}));if(!r.every((e=>Qf(e))))throw new Kf("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:p});sd(i,"@included",r,{propertyIsArray:!0});continue}if("@graph"===g&&!$f(p)&&!qf(p))throw new Kf('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:p});if("@value"===g){f=p,d&&id(e,1.1)?i["@value"]=p:sd(i,"@value",p,{propertyIsArray:o.isFrame});continue}if("@language"===g){if(null===p)continue;if(!Gf(p)&&!o.isFrame)throw new Kf('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:p});p=ad(p).map((e=>Gf(e)?e.toLowerCase():e));for(const e of p)Gf(e)&&!e.match(fd)&&console.warn(`@language must be valid BCP47: ${e}`);sd(i,"@language",p,{propertyIsArray:o.isFrame});continue}if("@direction"===g){if(!Gf(p)&&!o.isFrame)throw new Kf('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:p});p=ad(p);for(const e of p)if(Gf(e)&&"ltr"!==e&&"rtl"!==e)throw new Kf('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:p});sd(i,"@direction",p,{propertyIsArray:o.isFrame});continue}if("@index"===g){if(!Gf(p))throw new Kf('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:p});sd(i,"@index",p);continue}if("@reverse"===g){if(!$f(p))throw new Kf('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:p});if(l=await ld.expand({activeCtx:e,activeProperty:"@reverse",element:p,options:o,expansionMap:c}),"@reverse"in l)for(const e in l["@reverse"])sd(i,e,l["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in l){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),sd(t,e,[],{propertyIsArray:!0});const r=l[e];for(let n=0;n<r.length;++n){const i=r[n];if(Yf(i)||Xf(i))throw new Kf('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:l});sd(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===g){h.push(a);continue}let m=e;const y=td(e,a,"@context");Jf(y)||(m=await nd({activeCtx:e,localCtx:y,propagate:!0,overrideProtected:!0,options:o}));const v=td(m,a,"@container")||[];if(v.includes("@language")&&$f(p))l=gd(m,p,td(m,a,"@direction"),o);else if(v.includes("@index")&&$f(p)){const t=v.includes("@graph"),r=td(m,a,"@index")||"@index",n="@index"!==r&&ed(e,r,{vocab:!0},o);l=await md({activeCtx:m,options:o,activeProperty:a,value:p,expansionMap:c,asGraph:t,indexKey:r,propertyIndex:n})}else if(v.includes("@id")&&$f(p)){const e=v.includes("@graph");l=await md({activeCtx:m,options:o,activeProperty:a,value:p,expansionMap:c,asGraph:e,indexKey:"@id"})}else if(v.includes("@type")&&$f(p))l=await md({activeCtx:m.revertToPreviousContext(),options:o,activeProperty:a,value:p,expansionMap:c,asGraph:!1,indexKey:"@type"});else{const n="@list"===g;if(n||"@set"===g){let e=t;n&&"@graph"===r&&(e=null),l=await ld.expand({activeCtx:m,activeProperty:e,element:p,options:o,insideList:n,expansionMap:c})}else l="@json"===td(e,a,"@type")?{"@type":"@json","@value":p}:await ld.expand({activeCtx:m,activeProperty:a,element:p,options:o,insideList:!1,expansionMap:c})}if(null!==l||"@value"===g||(l=c({unmappedValue:p,expandedProperty:g,activeCtx:m,activeProperty:t,parent:n,options:o,insideList:s,key:a,expandedParent:i}),void 0!==l))if("@list"!==g&&!Xf(l)&&v.includes("@list")&&(l={"@list":ad(l)}),v.includes("@graph")&&!v.some((e=>"@id"===e||"@index"===e))&&(l=ad(l).map((e=>({"@graph":ad(e)})))),m.mappings.has(a)&&m.mappings.get(a).reverse){const e=i["@reverse"]=i["@reverse"]||{};l=ad(l);for(let t=0;t<l.length;++t){const r=l[t];if(Yf(r)||Xf(r))throw new Kf('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:l});sd(e,g,r,{propertyIsArray:!0})}}else sd(i,g,l,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&id(e,1.1));else if(($f(f)||qf(f))&&!o.isFrame)throw new Kf('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:f});for(const l of h){const h=qf(n[l])?n[l]:[n[l]];for(const n of h){if(!$f(n)||Object.keys(n).some((t=>"@value"===ed(e,t,{vocab:!0},o))))throw new Kf("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:n});await dd({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o,insideList:s,typeScopedContext:u,typeKey:a,expansionMap:c})}}}function pd({activeCtx:e,activeProperty:t,value:r,options:n}){if(null==r)return null;const i=ed(e,t,{vocab:!0},n);if("@id"===i)return ed(e,r,{base:!0},n);if("@type"===i)return ed(e,r,{vocab:!0,base:!0},n);const o=td(e,t,"@type");if(("@id"===o||"@graph"===i)&&Gf(r))return{"@id":ed(e,r,{base:!0},n)};if("@vocab"===o&&Gf(r))return{"@id":ed(e,r,{vocab:!0,base:!0},n)};if(rd(i))return r;const s={};if(o&&!["@id","@vocab","@none"].includes(o))s["@type"]=o;else if(Gf(r)){const r=td(e,t,"@language");null!==r&&(s["@language"]=r);const n=td(e,t,"@direction");null!==n&&(s["@direction"]=n)}return["boolean","number","string"].includes(typeof r)||(r=r.toString()),s["@value"]=r,s}function gd(e,t,r,n){const i=[],o=Object.keys(t).sort();for(const s of o){const o=ed(e,s,{vocab:!0},n);let a=t[s];qf(a)||(a=[a]);for(const e of a){if(null===e)continue;if(!Gf(e))throw new Kf("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const n={"@value":e};"@none"!==o&&(n["@language"]=s.toLowerCase()),r&&(n["@direction"]=r),i.push(n)}}return i}async function md({activeCtx:e,options:t,activeProperty:r,value:n,expansionMap:i,asGraph:o,indexKey:s,propertyIndex:a}){const u=[],c=Object.keys(n).sort(),l="@type"===s;for(let h of c){if(l){const r=td(e,h,"@context");Jf(r)||(e=await nd({activeCtx:e,localCtx:r,propagate:!1,options:t}))}let c,f=n[h];qf(f)||(f=[f]),f=await ld.expand({activeCtx:e,activeProperty:r,element:f,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),c=a?"@none"===h?"@none":pd({activeCtx:e,activeProperty:s,value:h,options:t}):ed(e,h,{vocab:!0},t),"@id"===s?h=ed(e,h,{base:!0},t):l&&(h=c);for(let e of f){if(o&&!Zf(e)&&(e={"@graph":[e]}),"@type"===s)"@none"===c||(e["@type"]?e["@type"]=[h].concat(e["@type"]):e["@type"]=[h]);else{if(Yf(e)&&!["@language","@type","@index"].includes(s))throw new Kf(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${s}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});a?"@none"!==c&&sd(e,a,c,{propertyIsArray:!0,prependValue:!0}):"@none"===c||s in e||(e[s]=h)}u.push(e)}}return u}ld.expand=async({activeCtx:e,activeProperty:t=null,element:r,options:n={},insideList:i=!1,insideIndex:o=!1,typeScopedContext:s=null,expansionMap:a=(()=>{})})=>{if(null==r)return null;if("@default"===t&&(n=Object.assign({},n,{isFrame:!1})),!qf(r)&&!$f(r)){if(!i&&(null===t||"@graph"===ed(e,t,{vocab:!0},n))){const o=await a({unmappedValue:r,activeCtx:e,activeProperty:t,options:n,insideList:i});return void 0===o?null:o}return pd({activeCtx:e,activeProperty:t,value:r,options:n})}if(qf(r)){let u=[];const c=td(e,t,"@container")||[];i=i||c.includes("@list");for(let c=0;c<r.length;++c){let l=await ld.expand({activeCtx:e,activeProperty:t,element:r[c],options:n,expansionMap:a,insideIndex:o,typeScopedContext:s});i&&qf(l)&&(l={"@list":l}),null===l&&(l=await a({unmappedValue:r[c],activeCtx:e,activeProperty:t,parent:r,index:c,options:n,expandedParent:u,insideList:i}),void 0===l)||(qf(l)?u=u.concat(l):u.push(l))}return u}const u=ed(e,t,{vocab:!0},n),c=td(e,t,"@context");s=s||(e.previousContext?e:null);let l=Object.keys(r).sort(),h=!o;if(h&&s&&l.length<=2&&!l.includes("@context"))for(const t of l){const r=ed(s,t,{vocab:!0},n);if("@value"===r){h=!1,e=s;break}if("@id"===r&&1===l.length){h=!1;break}}h&&(e=e.revertToPreviousContext()),Jf(c)||(e=await nd({activeCtx:e,localCtx:c,propagate:!0,overrideProtected:!0,options:n})),"@context"in r&&(e=await nd({activeCtx:e,localCtx:r["@context"],options:n})),s=e;let f=null;for(const t of l)if("@type"===ed(e,t,{vocab:!0},n)){f=f||t;const i=r[t],o=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of o){const r=td(s,t,"@context");Jf(r)||(e=await nd({activeCtx:e,localCtx:r,options:n,propagate:!1}))}}let d={};await dd({activeCtx:e,activeProperty:t,expandedActiveProperty:u,element:r,expandedParent:d,options:n,insideList:i,typeKey:f,typeScopedContext:s,expansionMap:a}),l=Object.keys(d);let p=l.length;if("@value"in d){if("@type"in d&&("@language"in d||"@direction"in d))throw new Kf('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:d});let o=p-1;if("@type"in d&&(o-=1),"@index"in d&&(o-=1),"@language"in d&&(o-=1),"@direction"in d&&(o-=1),0!==o)throw new Kf('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:d});const s=null===d["@value"]?[]:ad(d["@value"]),u=ud(d,"@type");if(id(e,1.1)&&u.includes("@json")&&1===u.length);else if(0===s.length){const o=await a({unmappedValue:d,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});d=void 0!==o?o:null}else{if(!s.every((e=>Gf(e)||Wf(e)))&&"@language"in d)throw new Kf("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:d});if(!u.every((e=>od(e)&&!(Gf(e)&&0===e.indexOf("_:"))||Wf(e))))throw new Kf('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:d})}}else if("@type"in d&&!qf(d["@type"]))d["@type"]=[d["@type"]];else if("@set"in d||"@list"in d){if(p>1&&(2!==p||!("@index"in d)))throw new Kf('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:d});"@set"in d&&(d=d["@set"],l=Object.keys(d),p=l.length)}else if(1===p&&"@language"in d){const o=await a(d,{unmappedValue:d,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});d=void 0!==o?o:null}if($f(d)&&!n.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===u)&&(0===p||"@value"in d||"@list"in d||1===p&&"@id"in d)){const o=await a({unmappedValue:d,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});d=void 0!==o?o:null}return d};const{isKeyword:yd}=zf,vd=Bh,bd=Lh,wd=Jh,_d=Uh,xd={};var Sd=xd;xd.createMergedNodeMap=(e,t)=>{const r=(t=t||{}).issuer||new wd.IdentifierIssuer("_:b"),n={"@default":{}};return xd.createNodeMap(e,n,"@default",r),xd.mergeNodeMaps(n)},xd.createNodeMap=(e,t,r,n,i,o)=>{if(bd.isArray(e)){for(const i of e)xd.createNodeMap(i,t,r,n,void 0,o);return}if(!bd.isObject(e))return void(o&&o.push(e));if(vd.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=n.getId(t))}return void(o&&o.push(e))}if(o&&vd.isList(e)){const s=[];return xd.createNodeMap(e["@list"],t,r,n,i,s),void o.push({"@list":s})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&n.getId(e)}bd.isUndefined(i)&&(i=vd.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),o&&o.push({"@id":i});const s=t[r],a=s[i]=s[i]||{};a["@id"]=i;const u=Object.keys(e).sort();for(let o of u){if("@id"===o)continue;if("@reverse"===o){const o={"@id":i},a=e["@reverse"];for(const e in a){const i=a[e];for(const a of i){let i=a["@id"];vd.isBlankNode(a)&&(i=n.getId(i)),xd.createNodeMap(a,t,r,n,i),wd.addValue(s[i],e,o,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){i in t||(t[i]={}),xd.createNodeMap(e[o],t,i,n);continue}if("@included"===o){xd.createNodeMap(e[o],t,r,n);continue}if("@type"!==o&&yd(o)){if("@index"===o&&o in a&&(e[o]!==a[o]||e[o]["@id"]!==a[o]["@id"]))throw new _d("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[o]=e[o];continue}const u=e[o];if(0===o.indexOf("_:")&&(o=n.getId(o)),0!==u.length)for(let e of u)if("@type"===o&&(e=0===e.indexOf("_:")?n.getId(e):e),vd.isSubject(e)||vd.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const i=vd.isBlankNode(e)?n.getId(e["@id"]):e["@id"];wd.addValue(a,o,{"@id":i},{propertyIsArray:!0,allowDuplicate:!1}),xd.createNodeMap(e,t,r,n,i)}else if(vd.isValue(e))wd.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(vd.isList(e)){const s=[];xd.createNodeMap(e["@list"],t,r,n,i,s),e={"@list":s},wd.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else xd.createNodeMap(e,t,r,n,i),wd.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else wd.addValue(a,o,[],{propertyIsArray:!0})}},xd.mergeNodeMapGraphs=e=>{const t={};for(const r of Object.keys(e).sort())for(const n of Object.keys(e[r]).sort()){const i=e[r][n];n in t||(t[n]={"@id":n});const o=t[n];for(const e of Object.keys(i).sort())if(yd(e)&&"@type"!==e)o[e]=wd.clone(i[e]);else for(const t of i[e])wd.addValue(o,e,wd.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},xd.mergeNodeMaps=e=>{const t=e["@default"],r=Object.keys(e).sort();for(const n of r){if("@default"===n)continue;const r=e[n];let i=t[n];i?"@graph"in i||(i["@graph"]=[]):t[n]=i={"@id":n,"@graph":[]};const o=i["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];vd.isSubjectReference(t)||o.push(t)}}return t};const{isSubjectReference:Ed}=Bh,{createMergedNodeMap:kd}=Sd,Id={};var Ad=Id;Id.flatten=e=>{const t=kd(e),r=[],n=Object.keys(t).sort();for(let e=0;e<n.length;++e){const i=t[n[e]];Ed(i)||r.push(i)}return r};const Td=Uh,Pd=Bh,Od=Lh,Cd=Jh,{RDF_LIST:Md,RDF_FIRST:Nd,RDF_REST:Rd,RDF_NIL:Ld,RDF_TYPE:jd,RDF_JSON_LITERAL:Dd,XSD_BOOLEAN:Bd,XSD_DOUBLE:Ud,XSD_INTEGER:Fd,XSD_STRING:zd}=Qh,Vd=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Hd={};var Kd=Hd;function qd(e,t,r){if(e.termType.endsWith("Node"))return{"@id":e.value};const n={"@value":e.value};if(e.language)n["@language"]=e.language;else{let i=e.datatype.value;if(i||(i=zd),i===Dd){i="@json";try{n["@value"]=JSON.parse(n["@value"])}catch(e){throw new Td("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:n["@value"],cause:e})}}if(t){if(i===Bd)"true"===n["@value"]?n["@value"]=!0:"false"===n["@value"]&&(n["@value"]=!1);else if(Od.isNumeric(n["@value"]))if(i===Fd){const e=parseInt(n["@value"],10);e.toFixed(0)===n["@value"]&&(n["@value"]=e)}else i===Ud&&(n["@value"]=parseFloat(n["@value"]));[Bd,Fd,Ud,zd].includes(i)||(n["@type"]=i)}else if("i18n-datatype"===r&&i.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=i.split(/[#_]/);e.length>0&&(n["@language"]=e,e.match(Vd)||console.warn(`@language must be valid BCP47: ${e}`)),n["@direction"]=t}else i!==zd&&(n["@type"]=i)}return n}Hd.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:r=!1,rdfDirection:n=null})=>{const i={},o={"@default":i},s={};for(const a of e){const e="DefaultGraph"===a.graph.termType?"@default":a.graph.value;e in o||(o[e]={}),"@default"===e||e in i||(i[e]={"@id":e});const u=o[e],c=a.subject.value,l=a.predicate.value,h=a.object;c in u||(u[c]={"@id":c});const f=u[c],d=h.termType.endsWith("Node");if(d&&!(h.value in u)&&(u[h.value]={"@id":h.value}),l===jd&&!t&&d){Cd.addValue(f,"@type",h.value,{propertyIsArray:!0});continue}const p=qd(h,r,n);if(Cd.addValue(f,l,p,{propertyIsArray:!0}),d)if(h.value===Ld){const e=u[h.value];"usages"in e||(e.usages=[]),e.usages.push({node:f,property:l,value:p})}else h.value in s?s[h.value]=!1:s[h.value]={node:f,property:l,value:p}}for(const e in o){const t=o[e];if(!(Ld in t))continue;const r=t[Ld];if(r.usages){for(let e of r.usages){let r=e.node,n=e.property,i=e.value;const o=[],a=[];let u=Object.keys(r).length;for(;n===Rd&&Od.isObject(s[r["@id"]])&&Od.isArray(r[Nd])&&1===r[Nd].length&&Od.isArray(r[Rd])&&1===r[Rd].length&&(3===u||4===u&&Od.isArray(r["@type"])&&1===r["@type"].length&&r["@type"][0]===Md)&&(o.push(r[Nd][0]),a.push(r["@id"]),e=s[r["@id"]],r=e.node,n=e.property,i=e.value,u=Object.keys(r).length,Pd.isBlankNode(r)););delete i["@id"],i["@list"]=o.reverse();for(const e of a)delete t[e]}delete r.usages}}const a=[],u=Object.keys(i).sort();for(const e of u){const t=i[e];if(e in o){const r=t["@graph"]=[],n=o[e],i=Object.keys(n).sort();for(const e of i){const t=n[e];Pd.isSubjectReference(t)||r.push(t)}}Pd.isSubjectReference(t)||a.push(t)}return a};const{createNodeMap:$d}=Sd,{isKeyword:Wd}=zf,Gd=Bh,Jd=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,r,n)=>t+(0===n?"":",")+e(void 0===r||"symbol"==typeof r?null:r)),"")+"]":"{"+Object.keys(t).sort().reduce(((r,n,i)=>void 0===t[n]||"symbol"==typeof t[n]?r:r+(0===r.length?"":",")+e(n)+":"+e(t[n])),"")+"}"},Xd=Lh,Yd=Jh,{RDF_FIRST:Zd,RDF_REST:Qd,RDF_NIL:ep,RDF_TYPE:tp,RDF_JSON_LITERAL:rp,RDF_LANGSTRING:np,XSD_BOOLEAN:ip,XSD_DOUBLE:op,XSD_INTEGER:sp,XSD_STRING:ap}=Qh,{isAbsolute:up}=nf,cp={};var lp=cp;function hp(e,t,r,n,i){const o=Object.keys(t).sort();for(const s of o){const o=t[s],a=Object.keys(o).sort();for(let t of a){const a=o[t];if("@type"===t)t=tp;else if(Wd(t))continue;for(const o of a){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!up(s))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!up(t))continue;if("BlankNode"===u.termType&&!i.produceGeneralizedRdf)continue;const c=fp(o,n,e,r,i.rdfDirection);c&&e.push({subject:a,predicate:u,object:c,graph:r})}}}}function fp(e,t,r,n,i){const o={};if(Gd.isValue(e)){o.termType="Literal",o.value=void 0,o.datatype={termType:"NamedNode"};let t=e["@value"];const r=e["@type"]||null;if("@json"===r)o.value=Jd(t),o.datatype.value=rp;else if(Xd.isBoolean(t))o.value=t.toString(),o.datatype.value=r||ip;else if(Xd.isDouble(t)||r===op)Xd.isDouble(t)||(t=parseFloat(t)),o.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),o.datatype.value=r||op;else if(Xd.isNumber(t))o.value=t.toFixed(0),o.datatype.value=r||sp;else if("i18n-datatype"===i&&"@direction"in e){const r="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;o.datatype.value=r,o.value=t}else"@language"in e?(o.value=t,o.datatype.value=r||np,o.language=e["@language"]):(o.value=t,o.datatype.value=r||ap)}else if(Gd.isList(e)){const s=function(e,t,r,n,i){const o={termType:"NamedNode",value:Zd},s={termType:"NamedNode",value:Qd},a={termType:"NamedNode",value:ep},u=e.pop(),c=u?{termType:"BlankNode",value:t.getId()}:a;let l=c;for(const a of e){const e=fp(a,t,r,n,i),u={termType:"BlankNode",value:t.getId()};r.push({subject:l,predicate:o,object:e,graph:n}),r.push({subject:l,predicate:s,object:u,graph:n}),l=u}if(u){const e=fp(u,t,r,n,i);r.push({subject:l,predicate:o,object:e,graph:n}),r.push({subject:l,predicate:s,object:a,graph:n})}return c}(e["@list"],t,r,n,i);o.termType=s.termType,o.value=s.value}else{const t=Xd.isObject(e)?e["@id"]:e;o.termType=t.startsWith("_:")?"BlankNode":"NamedNode",o.value=t}return"NamedNode"!==o.termType||up(o.value)?o:null}cp.toRDF=(e,t)=>{const r=new Yd.IdentifierIssuer("_:b"),n={"@default":{}};$d(e,n,"@default",r);const i=[],o=Object.keys(n).sort();for(const e of o){let o;if("@default"===e)o={termType:"DefaultGraph",value:""};else{if(!up(e))continue;o=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},o.value=e}hp(i,n[e],o,r,t)}return i};const{isKeyword:dp}=zf,pp=Bh,gp=Lh,mp=Jh,yp=nf,vp=Uh,{createNodeMap:bp,mergeNodeMapGraphs:wp}=Sd,_p={};var xp=_p;function Sp(e){const t={};for(const r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function Ep(e,t,r){for(let n=r.length-1;n>=0;--n){const i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function kp(e,t,r){const n="@"+r;let i=n in e?e[n][0]:t[r];if("embed"===r)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new vp("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function Ip(e){if(!gp.isArray(e)||1!==e.length||!gp.isObject(e[0]))throw new vp("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of mp.asArray(e[0]["@id"]))if(!gp.isObject(t)&&!yp.isAbsolute(t)||gp.isString(t)&&0===t.indexOf("_:"))throw new vp("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of mp.asArray(e[0]["@type"]))if(!gp.isObject(t)&&!yp.isAbsolute(t)||gp.isString(t)&&0===t.indexOf("_:"))throw new vp("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function Ap(e,t,r,n){let i=!0,o=!1;for(const s in r){let a=!1;const u=mp.getValues(t,s),c=0===mp.getValues(r,s).length;if("@id"===s){if(gp.isEmptyObject(r["@id"][0]||{})?a=!0:r["@id"].length>=0&&(a=r["@id"].includes(u[0])),!n.requireAll)return a}else if("@type"===s){if(i=!1,c){if(u.length>0)return!1;a=!0}else if(1===r["@type"].length&&gp.isEmptyObject(r["@type"][0]))a=u.length>0;else for(const e of r["@type"])a=!(!gp.isObject(e)||!("@default"in e))||a||u.some((t=>t===e));if(!n.requireAll)return a}else{if(dp(s))continue;{const t=mp.getValues(r,s)[0];let o=!1;if(t&&(Ip([t]),o="@default"in t),i=!1,0===u.length&&o)continue;if(u.length>0&&c)return!1;if(void 0===t){if(u.length>0)return!1;a=!0}else if(pp.isList(t)){const r=t["@list"][0];if(pp.isList(u[0])){const t=u[0]["@list"];pp.isValue(r)?a=t.some((e=>Mp(r,e))):(pp.isSubject(r)||pp.isSubjectReference(r))&&(a=t.some((t=>Cp(e,r,t,n))))}}else a=pp.isValue(t)?u.some((e=>Mp(t,e))):pp.isSubjectReference(t)?u.some((r=>Cp(e,t,r,n))):!!gp.isObject(t)&&u.length>0}}if(!a&&n.requireAll)return!1;o=o||a}return i||o}function Tp(e,t){const r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,o=n.property,s={"@id":t};if(gp.isArray(i)){for(let e=0;e<i.length;++e)if(mp.compareValues(i[e],s)){i[e]=s;break}}else{const e=gp.isArray(i[o]);mp.removeValue(i,o,s,{propertyIsArray:e}),mp.addValue(i,o,s,{propertyIsArray:e})}const a=e=>{const t=Object.keys(r);for(const n of t)n in r&&gp.isObject(r[n].parent)&&r[n].parent["@id"]===e&&(delete r[n],a(n))};a(t)}
/**
   * Removes the @preserve keywords from expanded result of framing.
   *
   * @param input the framed, framed output.
   * @param options the framing options used.
   *
   * @return the resulting output.
   */function Pp(e,t){if(gp.isArray(e))return e.map((e=>Pp(e,t)));if(gp.isObject(e)){
// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(pp.isValue(e))return e;if(pp.isList(e))return e["@list"]=Pp(e["@list"],t),e;if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e)"@id"===r&&t.bnodesToClear.includes(e[r])?delete e["@id"]:e[r]=Pp(e[r],t)}return e}function Op(e,t,r){gp.isObject(e)?mp.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function Cp(e,t,r,n){if(!("@id"in r))return!1;const i=e.subjects[r["@id"]];return i&&Ap(e,i,t,n)}function Mp(e,t){const r=t["@value"],n=t["@type"],i=t["@language"],o=e["@value"]?gp.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?gp.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],a=e["@language"]?gp.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===o.length&&0===s.length&&0===a.length||!(!o.includes(r)&&!gp.isEmptyObject(o[0]))&&!!(!n&&0===s.length||s.includes(n)||n&&gp.isEmptyObject(s[0]))&&!!(!i&&0===a.length||a.includes(i)||i&&gp.isEmptyObject(a[0]))}_p.frameMergedOrDefault=(e,t,r)=>{const n={options:r,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new mp.IdentifierIssuer("_:b");bp(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=wp(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];const o=[];return _p.frame(n,Object.keys(n.subjects).sort(),t,o),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((e=>1===n.bnodeMap[e].length))),
// remove @preserve from results
r.link={},Pp(o,r)},_p.frame=(e,t,r,n,i=null)=>{Ip(r),r=r[0];const o=e.options,s={embed:kp(r,o,"embed"),explicit:kp(r,o,"explicit"),requireAll:kp(r,o,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const a=e.link[e.graph],u=function(e,t,r,n){const i={};for(const o of t){const t=e.graphMap[e.graph][o];Ap(e,t,r,n)&&(i[o]=t)}return i}(e,t,r,s),c=Object.keys(u).sort();for(const l of c){const c=u[l];if(null===i?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===s.embed&&l in a){Op(n,i,a[l]);continue}const h={"@id":l};if(0===l.indexOf("_:")&&mp.addValue(e.bnodeMap,l,h,{propertyIsArray:!0}),a[l]=h,("@first"===s.embed||"@last"===s.embed)&&e.is11)throw new vp("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:r});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(l))if(!e.embedded||"@never"!==s.embed&&!Ep(c,e.graph,e.subjectStack))if(!e.embedded||"@first"!=s.embed&&"@once"!=s.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(l)){if("@last"===s.embed&&l in e.uniqueEmbeds[e.graph]&&Tp(e,l),e.uniqueEmbeds[e.graph][l]={parent:n,property:i},e.subjectStack.push({subject:c,graph:e.graph}),l in e.graphMap){let t=!1,n=null;"@graph"in r?(n=r["@graph"][0],t=!("@merged"===l||"@default"===l),gp.isObject(n)||(n={})):(t="@merged"!==e.graph,n={}),t&&_p.frame({...e,graph:l,embedded:!1},Object.keys(e.graphMap[l]).sort(),[n],h,"@graph")}"@included"in r&&_p.frame({...e,embedded:!1},t,r["@included"],h,"@included");for(const t of Object.keys(c).sort())if(dp(t)){if(h[t]=mp.clone(c[t]),"@type"===t)for(const t of c["@type"])0===t.indexOf("_:")&&mp.addValue(e.bnodeMap,t,h,{propertyIsArray:!0})}else if(!s.explicit||t in r)for(const n of c[t]){const i=t in r?r[t]:Sp(s);if(pp.isList(n)){const i=r[t]&&r[t][0]&&r[t][0]["@list"]?r[t][0]["@list"]:Sp(s),o={"@list":[]};Op(h,t,o);const a=n["@list"];for(const t of a)pp.isSubjectReference(t)?_p.frame({...e,embedded:!0},[t["@id"]],i,o,"@list"):Op(o,"@list",mp.clone(t))}else pp.isSubjectReference(n)?_p.frame({...e,embedded:!0},[n["@id"]],i,h,t):Mp(i[0],n)&&Op(h,t,mp.clone(n))}for(const e of Object.keys(r).sort()){if("@type"===e){if(!gp.isObject(r[e][0])||!("@default"in r[e][0]))continue}else if(dp(e))continue;const t=r[e][0]||{};if(!kp(t,o,"omitDefault")&&!(e in h)){let r="@null";"@default"in t&&(r=mp.clone(t["@default"])),gp.isArray(r)||(r=[r]),h[e]=[{"@preserve":r}]}}for(const t of Object.keys(r["@reverse"]||{}).sort()){const n=r["@reverse"][t];for(const r of Object.keys(e.subjects))mp.getValues(e.subjects[r],t).some((e=>e["@id"]===l))&&(h["@reverse"]=h["@reverse"]||{},mp.addValue(h["@reverse"],t,[],{propertyIsArray:!0}),_p.frame({...e,embedded:!0},[r],n,h["@reverse"][t],i))}Op(n,i,h),e.subjectStack.pop()}else Op(n,i,h);else Op(n,i,h)}},_p.cleanupNull=(e,t)=>{if(gp.isArray(e)){return e.map((e=>_p.cleanupNull(e,t))).filter((e=>e))}if("@null"===e)return null;if(gp.isObject(e)){if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e)e[r]=_p.cleanupNull(e[r],t)}return e};const Np=Uh,{isArray:Rp,isObject:Lp,isString:jp,isUndefined:Dp}=Lh,{isList:Bp,isValue:Up,isGraph:Fp,isSimpleGraph:zp,isSubjectReference:Vp}=Bh,{expandIri:Hp,getContextValue:Kp,isKeyword:qp,process:$p,processingMode:Wp}=zf,{removeBase:Gp,prependBase:Jp}=nf,{addValue:Xp,asArray:Yp,compareShortestLeast:Zp}=Jh,Qp={};var eg=Qp;function tg(e,t,r){if("@nest"!==Hp(e,t,{vocab:!0},r))throw new Np("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Qp.compact=async({activeCtx:e,activeProperty:t=null,element:r,options:n={},compactionMap:i=(()=>{})})=>{if(Rp(r)){let o=[];for(let s=0;s<r.length;++s){let a=await Qp.compact({activeCtx:e,activeProperty:t,element:r[s],options:n,compactionMap:i});null===a&&(a=await i({unmappedValue:r[s],activeCtx:e,activeProperty:t,parent:r,index:s,options:n}),void 0===a)||o.push(a)}return n.compactArrays&&1===o.length&&0===(Kp(e,t,"@container")||[]).length&&(o=o[0]),o}const o=Kp(e,t,"@context");if(Dp(o)||(e=await $p({activeCtx:e,localCtx:o,propagate:!0,overrideProtected:!0,options:n})),Lp(r)){if(n.link&&"@id"in r&&n.link.hasOwnProperty(r["@id"])){const e=n.link[r["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===r)return e[t].compacted}if(Up(r)||Vp(r)){const i=Qp.compactValue({activeCtx:e,activeProperty:t,value:r,options:n});return n.link&&Vp(r)&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:i})),i}if(Bp(r)&&(Kp(e,t,"@container")||[]).includes("@list"))return Qp.compact({activeCtx:e,activeProperty:t,element:r["@list"],options:n,compactionMap:i});const o="@reverse"===t,s={},a=e;Up(r)||Vp(r)||(e=e.revertToPreviousContext());const u=Kp(a,t,"@context");Dp(u)||(e=await $p({activeCtx:e,localCtx:u,propagate:!0,overrideProtected:!0,options:n})),n.link&&"@id"in r&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:s}));let c=r["@type"]||[];c.length>1&&(c=Array.from(c).sort());const l=e;for(const t of c){const r=Qp.compactIri({activeCtx:l,iri:t,relativeTo:{vocab:!0}}),i=Kp(a,r,"@context");Dp(i)||(e=await $p({activeCtx:e,localCtx:i,options:n,propagate:!1}))}const h=Object.keys(r).sort();for(const u of h){const c=r[u];if("@id"!==u)if("@type"!==u)if("@reverse"!==u)if("@preserve"!==u)if("@index"!==u)if("@graph"!==u&&"@list"!==u&&"@included"!==u&&qp(u)){const t=Qp.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});Xp(s,t,c)}else{if(!Rp(c))throw new Np("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===c.length){const t=Qp.compactIri({activeCtx:e,iri:u,value:c,relativeTo:{vocab:!0},reverse:o}),r=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let i=s;r&&(tg(e,r,n),Lp(s[r])||(s[r]={}),i=s[r]),Xp(i,t,c,{propertyIsArray:!0})}for(const t of c){const r=Qp.compactIri({activeCtx:e,iri:u,value:t,relativeTo:{vocab:!0},reverse:o}),a=e.mappings.has(r)?e.mappings.get(r)["@nest"]:null;let c=s;a&&(tg(e,a,n),Lp(s[a])||(s[a]={}),c=s[a]);const l=Kp(e,r,"@container")||[],h=Fp(t),f=Bp(t);let d;f?d=t["@list"]:h&&(d=t["@graph"]);let p=await Qp.compact({activeCtx:e,activeProperty:r,element:f||h?d:t,options:n,compactionMap:i});if(f){if(Rp(p)||(p=[p]),l.includes("@list")){Xp(c,r,p,{valueIsArray:!0,allowDuplicate:!0});continue}p={[Qp.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:p},"@index"in t&&(p[Qp.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(h)if(l.includes("@graph")&&(l.includes("@id")||l.includes("@index")&&zp(t))){let i;c.hasOwnProperty(r)?i=c[r]:c[r]=i={};const o=(l.includes("@id")?t["@id"]:t["@index"])||Qp.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});Xp(i,o,p,{propertyIsArray:!n.compactArrays||l.includes("@set")})}else l.includes("@graph")&&zp(t)?(Rp(p)&&p.length>1&&(p={"@included":p}),Xp(c,r,p,{propertyIsArray:!n.compactArrays||l.includes("@set")})):(Rp(p)&&1===p.length&&n.compactArrays&&(p=p[0]),p={[Qp.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:p},"@id"in t&&(p[Qp.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(p[Qp.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),Xp(c,r,p,{propertyIsArray:!n.compactArrays||l.includes("@set")}));else if(l.includes("@language")||l.includes("@index")||l.includes("@id")||l.includes("@type")){let o,s;if(c.hasOwnProperty(r)?o=c[r]:c[r]=o={},l.includes("@language"))Up(p)&&(p=p["@value"]),s=t["@language"];else if(l.includes("@index")){const n=Kp(e,r,"@index")||"@index",i=Qp.compactIri({activeCtx:e,iri:n,relativeTo:{vocab:!0}});if("@index"===n)s=t["@index"],delete p[i];else{let e;if([s,...e]=Yp(p[n]||[]),jp(s))switch(e.length){case 0:delete p[n];break;case 1:p[n]=e[0];break;default:p[n]=e}else s=null}}else if(l.includes("@id")){const t=Qp.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});s=p[t],delete p[t]}else if(l.includes("@type")){const o=Qp.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let a;switch([s,...a]=Yp(p[o]||[]),a.length){case 0:delete p[o];break;case 1:p[o]=a[0];break;default:p[o]=a}1===Object.keys(p).length&&"@id"in t&&(p=await Qp.compact({activeCtx:e,activeProperty:r,element:{"@id":t["@id"]},options:n,compactionMap:i}))}s||(s=Qp.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),Xp(o,s,p,{propertyIsArray:l.includes("@set")})}else{const e=!n.compactArrays||l.includes("@set")||l.includes("@list")||Rp(p)&&0===p.length||"@list"===u||"@graph"===u;Xp(c,r,p,{propertyIsArray:e})}}}else{if((Kp(e,t,"@container")||[]).includes("@index"))continue;const r=Qp.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});Xp(s,r,c)}else{const r=await Qp.compact({activeCtx:e,activeProperty:t,element:c,options:n,compactionMap:i});Rp(r)&&0===r.length||Xp(s,u,r)}else{const t=await Qp.compact({activeCtx:e,activeProperty:"@reverse",element:c,options:n,compactionMap:i});for(const r in t)if(e.mappings.has(r)&&e.mappings.get(r).reverse){const i=t[r],o=(Kp(e,r,"@container")||[]).includes("@set")||!n.compactArrays;Xp(s,r,i,{propertyIsArray:o}),delete t[r]}if(Object.keys(t).length>0){const r=Qp.compactIri({activeCtx:e,iri:u,relativeTo:{vocab:!0}});Xp(s,r,t)}}else{let t=Yp(c).map((e=>Qp.compactIri({activeCtx:a,iri:e,relativeTo:{vocab:!0}})));1===t.length&&(t=t[0]);const r=Qp.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),n=(Kp(e,r,"@container")||[]).includes("@set")&&Wp(e,1.1)||Rp(t)&&0===c.length;Xp(s,r,t,{propertyIsArray:n})}else{let t=Yp(c).map((t=>Qp.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:n.base})));1===t.length&&(t=t[0]),s[Qp.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return s}return r},Qp.compactIri=({activeCtx:e,iri:t,value:r=null,relativeTo:n={vocab:!1},reverse:i=!1,base:o=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const s=e.getInverse();if(qp(t)&&t in s&&"@none"in s[t]&&"@type"in s[t]["@none"]&&"@none"in s[t]["@none"]["@type"])return s[t]["@none"]["@type"]["@none"];if(n.vocab&&t in s){const n=e["@language"]||"@none",o=[];Lp(r)&&"@index"in r&&!("@graph"in r)&&o.push("@index","@index@set"),Lp(r)&&"@preserve"in r&&(r=r["@preserve"][0]),Fp(r)?("@index"in r&&o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r&&o.push("@graph@id","@graph@id@set"),o.push("@graph","@graph@set","@set"),"@index"in r||o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r||o.push("@graph@id","@graph@id@set")):Lp(r)&&!Up(r)&&o.push("@id","@id@set","@type","@set@type");let s="@language",a="@null";if(i)s="@type",a="@reverse",o.push("@set");else if(Bp(r)){"@index"in r||o.push("@list");const e=r["@list"];if(0===e.length)s="@any",a="@none";else{let t=0===e.length?n:null,r=null;for(let n=0;n<e.length;++n){const i=e[n];let o="@none",s="@none";if(Up(i)?"@direction"in i?o=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`:"@language"in i?o=i["@language"].toLowerCase():"@type"in i?s=i["@type"]:o="@null":s="@id",null===t?t=o:o!==t&&Up(i)&&(t="@none"),null===r?r=s:s!==r&&(r="@none"),"@none"===t&&"@none"===r)break}t=t||"@none",r=r||"@none","@none"!==r?(s="@type",a=r):a=t}}else{if(Up(r))if("@language"in r&&!("@index"in r)){o.push("@language","@language@set"),a=r["@language"];const e=r["@direction"];e&&(a=`${a}_${e}`)}else"@direction"in r&&!("@index"in r)?a=`_${r["@direction"]}`:"@type"in r&&(s="@type",a=r["@type"]);else s="@type",a="@id";o.push("@set")}o.push("@none"),Lp(r)&&!("@index"in r)&&o.push("@index","@index@set"),Up(r)&&1===Object.keys(r).length&&o.push("@language","@language@set");const u=function(e,t,r,n,i,o){null===o&&(o="@null");const s=[];if(("@id"===o||"@reverse"===o)&&Lp(r)&&"@id"in r){"@reverse"===o&&s.push("@reverse");const t=Qp.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(o);const e=s.find((e=>e.includes("_")));e&&s.push(e.replace(/^[^_]+_/,"_"))}s.push("@none");const a=e.inverse[t];for(const e of n){if(!(e in a))continue;const t=a[e][i];for(const e of s)if(e in t)return t[e]}return null}(e,t,r,o,s,a);if(null!==u)return u}if(n.vocab&&"@vocab"in e){const r=e["@vocab"];if(0===t.indexOf(r)&&t!==r){const n=t.substr(r.length);if(!e.mappings.has(n))return n}}let a=null;const u=[];let c=e.fastCurieMap;const l=t.length-1;for(let e=0;e<l&&t[e]in c;++e)c=c[t[e]],""in c&&u.push(c[""][0]);for(let n=u.length-1;n>=0;--n){const i=u[n],o=i.terms;for(const n of o){const o=n+":"+t.substr(i.iri.length);e.mappings.get(n)._prefix&&(!e.mappings.has(o)||null===r&&e.mappings.get(o)["@id"]===t)&&(null===a||Zp(o,a)<0)&&(a=o)}}if(null!==a)return a;for(const[r,n]of e.mappings)if(n&&n._prefix&&t.startsWith(r+":"))throw new Np(`Absolute IRI "${t}" confused with prefix "${r}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return n.vocab?t:"@base"in e?e["@base"]?Gp(Jp(o,e["@base"]),t):t:Gp(o,t)},Qp.compactValue=({activeCtx:e,activeProperty:t,value:r,options:n})=>{if(Up(r)){const n=Kp(e,t,"@type"),i=Kp(e,t,"@language"),o=Kp(e,t,"@direction"),s=Kp(e,t,"@container")||[],a="@index"in r&&!s.includes("@index");if(!a&&"@none"!==n){if(r["@type"]===n)return r["@value"];if("@language"in r&&r["@language"]===i&&"@direction"in r&&r["@direction"]===o)return r["@value"];if("@language"in r&&r["@language"]===i)return r["@value"];if("@direction"in r&&r["@direction"]===o)return r["@value"]}const u=Object.keys(r).length,c=1===u||2===u&&"@index"in r&&!a,l="@language"in e,h=jp(r["@value"]),f=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(c&&"@none"!==n&&(!l||!h||f))return r["@value"];const d={};return a&&(d[Qp.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=r["@index"]),"@type"in r?d[Qp.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=Qp.compactIri({activeCtx:e,iri:r["@type"],relativeTo:{vocab:!0}}):"@language"in r&&(d[Qp.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=r["@language"]),"@direction"in r&&(d[Qp.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=r["@direction"]),d[Qp.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=r["@value"],d}const i=Hp(e,t,{vocab:!0},n),o=Kp(e,t,"@type"),s=Qp.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:"@vocab"===o},base:n.base});return"@id"===o||"@vocab"===o||"@graph"===i?s:{[Qp.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}};
/**
   * A JavaScript implementation of the JSON-LD API.
   *
   * @author Dave Longley
   *
   * @license BSD 3-Clause License
   * Copyright (c) 2011-2019 Digital Bazaar, Inc.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * Redistributions of source code must retain the above copyright notice,
   * this list of conditions and the following disclaimer.
   *
   * Redistributions in binary form must reproduce the above copyright
   * notice, this list of conditions and the following disclaimer in the
   * documentation and/or other materials provided with the distribution.
   *
   * Neither the name of the Digital Bazaar, Inc. nor the names of its
   * contributors may be used to endorse or promote products derived from
   * this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
   * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
   * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */
const rg=Nh,ng=gf,ig=Jh,og=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:r,base:n,cycles:i=new Set}){t&&vf(t)&&t["@context"]&&(t=t["@context"]),t=wf(t);const o=[];for(const s of t){if(bf(s)){let t=this._get(s);t||(t=await this._resolveRemoteContext({activeCtx:e,url:s,documentLoader:r,base:n,cycles:i})),yf(t)?o.push(...t):o.push(t);continue}if(null===s){o.push(new Sf({document:null}));continue}vf(s)||Ef(t);const a=JSON.stringify(s);let u=this._get(a);u||(u=new Sf({document:s}),this._cacheResolvedContext({key:a,resolved:u,tag:"static"})),o.push(u)}return o}_get(e){let t=this.perOpCache.get(e);if(!t){const r=this.sharedCache.get(e);r&&(t=r.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:r}){if(this.perOpCache.set(e,t),void 0!==r){let n=this.sharedCache.get(e);n||(n=new Map,this.sharedCache.set(e,n)),n.set(r,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:r,base:n,cycles:i}){t=_f(n,t);const{context:o,remoteDoc:s}=await this._fetchContext({activeCtx:e,url:t,documentLoader:r,cycles:i});kf({context:o,base:n=s.documentUrl||t});const a=await this.resolve({activeCtx:e,context:o,documentLoader:r,base:n,cycles:i});return this._cacheResolvedContext({key:t,resolved:a,tag:s.tag}),a}async _fetchContext({activeCtx:e,url:t,documentLoader:r,cycles:n}){if(n.size>10)throw new xf("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(n.has(t))throw new xf("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let i,o;n.add(t);try{o=await r(t),i=o.document||null,bf(i)&&(i=JSON.parse(i))}catch(e){throw new xf("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!vf(i))throw new xf("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return i="@context"in i?{"@context":i["@context"]}:{"@context":{}},o.contextUrl&&(yf(i["@context"])||(i["@context"]=[i["@context"]]),i["@context"].push(o.contextUrl)),{context:i,remoteDoc:o}}},sg=ig.IdentifierIssuer,ag=Uh,ug=Nl,cg=If,{expand:lg}=hd,{flatten:hg}=Ad,{fromRDF:fg}=Kd,{toRDF:dg}=lp,{frameMergedOrDefault:pg,cleanupNull:gg}=xp,{isArray:mg,isObject:yg,isString:vg}=Lh,{isSubjectReference:bg}=Bh,{expandIri:wg,getInitialContext:_g,process:xg,processingMode:Sg}=zf,{compact:Eg,compactIri:kg}=eg,{createNodeMap:Ig,createMergedNodeMap:Ag,mergeNodeMaps:Tg}=Sd,Pg=function(e){const t={},r=new ug({max:100});function n(t,{documentLoader:r=e.documentLoader,...n}){return Object.assign({},{documentLoader:r},n,t)}return e.compact=async function(t,i,o){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===i)throw new ag("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let s;(o=n(o,{base:vg(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new sg("_:b"),contextResolver:new og({sharedCache:r})})).link&&(o.skipExpansion=!0),o.compactToRelative||delete o.base,s=o.skipExpansion?t:await e.expand(t,o);const a=await e.processContext(_g(o),i,o);let u=await Eg({activeCtx:a,element:s,options:o,compactionMap:o.compactionMap});o.compactArrays&&!o.graph&&mg(u)?1===u.length?u=u[0]:0===u.length&&(u={}):o.graph&&yg(u)&&(u=[u]),yg(i)&&"@context"in i&&(i=i["@context"]),i=ig.clone(i),mg(i)||(i=[i]);const c=i;i=[];for(let e=0;e<c.length;++e)(!yg(c[e])||Object.keys(c[e]).length>0)&&i.push(c[e]);const l=i.length>0;if(1===i.length&&(i=i[0]),mg(u)){const e=kg({activeCtx:a,iri:"@graph",relativeTo:{vocab:!0}}),t=u;u={},l&&(u["@context"]=i),u[e]=t}else if(yg(u)&&l){const e=u;u={"@context":i};for(const t in e)u[t]=e[t]}return u},e.expand=async function(t,i){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(i=n(i,{keepFreeFloatingNodes:!1,contextResolver:new og({sharedCache:r})})).expansionMap&&(i.expansionMap=void 0);const o={},s=[];if("expandContext"in i){const e=ig.clone(i.expandContext);yg(e)&&"@context"in e?o.expandContext=e:o.expandContext={"@context":e},s.push(o.expandContext)}let a;if(vg(t)){const r=await e.get(t,i);a=r.documentUrl,o.input=r.document,r.contextUrl&&(o.remoteContext={"@context":r.contextUrl},s.push(o.remoteContext))}else o.input=ig.clone(t);"base"in i||(i.base=a||"");let u=_g(i);for(const e of s)u=await xg({activeCtx:u,localCtx:e,options:i});let c=await lg({activeCtx:u,element:o.input,options:i,expansionMap:i.expansionMap});return yg(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),mg(c)||(c=[c]),c},e.flatten=async function(t,i,o){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");i="function"==typeof i?null:i||null,o=n(o,{base:vg(t)?t:"",contextResolver:new og({sharedCache:r})});const s=await e.expand(t,o),a=hg(s);if(null===i)return a;o.graph=!0,o.skipExpansion=!0;const u=await e.compact(a,i,o);return u},e.frame=async function(t,i,o){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(o=n(o,{base:vg(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new og({sharedCache:r})}),vg(i)){const t=await e.get(i,o);if(i=t.document,t.contextUrl){let e=i["@context"];e?mg(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,i["@context"]=e}}const s=i&&i["@context"]||{},a=await e.processContext(_g(o),s,o);o.hasOwnProperty("omitGraph")||(o.omitGraph=Sg(a,1.1)),o.hasOwnProperty("pruneBlankNodeIdentifiers")||(o.pruneBlankNodeIdentifiers=Sg(a,1.1));const u=await e.expand(t,o),c={...o};c.isFrame=!0,c.keepFreeFloatingNodes=!0;const l=await e.expand(i,c),h=Object.keys(i).map((e=>wg(a,e,{vocab:!0})));c.merged=!h.includes("@graph"),c.is11=Sg(a,1.1);const f=pg(u,l,c);c.graph=!o.omitGraph,c.skipExpansion=!0,c.link={},c.framing=!0;let d=await e.compact(f,s,c);return c.link={},d=gg(d,c),d},e.link=async function(t,r,n){const i={};return r&&(i["@context"]=r),i["@embed"]="@link",e.frame(t,i,n)},e.normalize=e.canonize=async function(t,i){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(i=n(i,{base:vg(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new og({sharedCache:r})}))){if("application/n-quads"!==i.inputFormat&&"application/nquads"!==i.inputFormat)throw new ag("Unknown canonicalization input format.","jsonld.CanonizeError");const e=cg.parse(t);return rg.canonize(e,i)}const o={...i};delete o.format,o.produceGeneralizedRdf=!1;const s=await e.toRDF(t,o);return rg.canonize(s,i)},e.fromRDF=async function(e,r){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");r=n(r,{format:vg(e)?"application/n-quads":void 0});const{format:i}=r;let{rdfParser:o}=r;if(i){if(o=o||t[i],!o)throw new ag("Unknown input format.","jsonld.UnknownFormat",{format:i})}else o=()=>e;const s=await o(e);return fg(s,r)},e.toRDF=async function(t,i){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let o;o=(i=n(i,{base:vg(t)?t:"",skipExpansion:!1,contextResolver:new og({sharedCache:r})})).skipExpansion?t:await e.expand(t,i);const s=dg(o,i);if(i.format){if("application/n-quads"===i.format||"application/nquads"===i.format)return cg.serialize(s);throw new ag("Unknown output format.","jsonld.UnknownFormat",{format:i.format})}return s},e.createNodeMap=async function(t,i){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");i=n(i,{base:vg(t)?t:"",contextResolver:new og({sharedCache:r})});const o=await e.expand(t,i);return Ag(o,i)},e.merge=async function(t,i,o){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!mg(t))throw new TypeError('Could not merge, "docs" must be an array.');i="function"==typeof i?null:i||null,o=n(o,{contextResolver:new og({sharedCache:r})});const s=await Promise.all(t.map((t=>{const r={...o};return e.expand(t,r)})));let a=!0;"mergeNodes"in o&&(a=o.mergeNodes);const u=o.issuer||new sg("_:b"),c={"@default":{}};for(let e=0;e<s.length;++e){const t=ig.relabelBlankNodes(s[e],{issuer:new sg("_:b"+e+"-")}),r=a||0===e?c:{"@default":{}};if(Ig(t,r,"@default",u),r!==c)for(const e in r){const t=r[e];if(!(e in c)){c[e]=t;continue}const n=c[e];for(const e in t)e in n||(n[e]=t[e])}}const l=Tg(c),h=[],f=Object.keys(l).sort();for(let e=0;e<f.length;++e){const t=l[f[e]];bg(t)||h.push(t)}if(null===i)return h;o.graph=!0,o.skipExpansion=!0;const d=await e.compact(h,i,o);return d},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new ag("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,r){let n;n="function"==typeof r.documentLoader?r.documentLoader:e.documentLoader;const i=await n(t);try{if(!i.document)throw new ag("No remote document found at the given URL.","jsonld.NullRemoteDocument");vg(i.document)&&(i.document=JSON.parse(i.document))}catch(e){throw new ag("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:i})}return i},e.processContext=async function(e,t,i){return i=n(i,{base:"",contextResolver:new og({sharedCache:r})}),null===t?_g(i):(t=ig.clone(t),yg(t)&&"@context"in t||(t={"@context":t}),xg({activeCtx:e,localCtx:t,options:i}))},e.getContextValue=zf.getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new ag('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",cg.parse),e.registerRDFParser("application/nquads",cg.parse),e.url=nf,e.util=ig,Object.assign(e,ig),e.promises=e,e.RequestQueue=ef,e.JsonLdProcessor=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t})(e),ng.setupGlobals(e),ng.setupDocumentLoaders(e),e},Og=function(){return Pg((function(){return Og()}))};Pg(Og);var Cg=Og,Mg={exports:{}},Ng={exports:{}};!function(e){!function(t){var r={bytesToHex:function(e){return function(e){return e.map((function(e){return 2,(t=e.toString(16)).length>2?t:Array(2-t.length+1).join("0")+t;var t})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=r:t.convertHex=r}(lt)}(Ng);var Rg={exports:{}};!function(e){!function(t){var r={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};r.UTF8={bytesToString:function(e){return decodeURIComponent(escape(r.bytesToString(e)))},stringToBytes:function(e){return r.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=r:t.convertString=r}(lt)}(Rg),function(e){!function(t){var r={};e.exports?(r.bytesToHex=Ng.exports.bytesToHex,r.convertString=Rg.exports,e.exports=s):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=s);var n=[];!function(){function e(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(n[i]=t(Math.pow(r,1/3)),i++),r++}();var i=[],o=function(e,t,r){for(var o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7],d=0;d<64;d++){if(d<16)i[d]=0|t[r+d];else{var p=i[d-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=i[d-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;i[d]=g+i[d-7]+y+i[d-16]}var v=o&s^o&a^s&a,b=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&h)+n[d]+i[d];f=h,h=l,l=c,c=u+w|0,u=a,a=s,s=o,o=w+(b+v)|0}e[0]=e[0]+o|0,e[1]=e[1]+s|0,e[2]=e[2]+a|0,e[3]=e[3]+u|0,e[4]=e[4]+c|0,e[5]=e[5]+l|0,e[6]=e[6]+h|0,e[7]=e[7]+f|0};function s(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}(e),s=8*e.length;i[s>>5]|=128<<24-s%32,i[15+(s+64>>9<<4)]=s;for(var a=0;a<i.length;a+=16)o(n,i,a);var u=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}(n);return t&&t.asBytes?u:t&&t.asString?r.convertString.bytesToString(u):r.bytesToHex(u)}s.x2=function(e,t){return s(s(e,{asBytes:!0}),t)}}(lt)}(Mg);var Lg=Mg.exports;function jg(e){e=e.trim();const t=[];for(let r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t}var Dg={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Boolean]",s="[object Date]",a="[object Function]",u="[object GeneratorFunction]",c="[object Map]",l="[object Number]",h="[object Object]",f="[object Promise]",d="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",y="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",A="[object Uint16Array]",T="[object Uint32Array]",P=/\w*$/,O=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,M={};M[i]=M["[object Array]"]=M[v]=M[b]=M[o]=M[s]=M[w]=M[_]=M[x]=M[S]=M[E]=M[c]=M[l]=M[h]=M[d]=M[p]=M[g]=M[m]=M[k]=M[I]=M[A]=M[T]=!0,M["[object Error]"]=M[a]=M[y]=!1;var N="object"==typeof lt&&lt&&lt.Object===Object&&lt,R="object"==typeof self&&self&&self.Object===Object&&self,L=N||R||Function("return this")(),j=t&&!t.nodeType&&t,D=j&&e&&!e.nodeType&&e,B=D&&D.exports===j;function U(e,t){return e.set(t[0],t[1]),e}function F(e,t){return e.add(t),e}function z(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function H(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function K(e,t){return function(r){return e(t(r))}}function q(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var $,W=Array.prototype,G=Function.prototype,J=Object.prototype,X=L["__core-js_shared__"],Y=($=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",Z=G.toString,Q=J.hasOwnProperty,ee=J.toString,te=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=B?L.Buffer:void 0,ne=L.Symbol,ie=L.Uint8Array,oe=K(Object.getPrototypeOf,Object),se=Object.create,ae=J.propertyIsEnumerable,ue=W.splice,ce=Object.getOwnPropertySymbols,le=re?re.isBuffer:void 0,he=K(Object.keys,Object),fe=Le(L,"DataView"),de=Le(L,"Map"),pe=Le(L,"Promise"),ge=Le(L,"Set"),me=Le(L,"WeakMap"),ye=Le(Object,"create"),ve=Fe(fe),be=Fe(de),we=Fe(pe),_e=Fe(ge),xe=Fe(me),Se=ne?ne.prototype:void 0,Ee=Se?Se.valueOf:void 0;function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){this.__data__=new Ie(e)}function Pe(e,t,r){var n=e[t];Q.call(e,t)&&ze(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Oe(e,t){for(var r=e.length;r--;)if(ze(e[r][0],t))return r;return-1}function Ce(e,t,r,n,f,y,O){var C;if(n&&(C=y?n(e,f,y,O):n(e)),void 0!==C)return C;if(!$e(e))return e;var N=Ve(e);if(N){if(C=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Q.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,C)}else{var R=De(e),L=R==a||R==u;if(Ke(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(R==h||R==i||L&&!y){if(V(e))return y?e:{};if(C=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:$e(t=oe(e))?se(t):{};var t}(L?{}:e),!t)return function(e,t){return Ne(e,je(e),t)}(e,function(e,t){return e&&Ne(t,We(t),e)}(C,e))}else{if(!M[R])return y?e:{};C=function(e,t,r,n){var i,a=e.constructor;switch(t){case v:return Me(e);case o:case s:return new a(+e);case b:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case w:case _:case x:case S:case E:case k:case I:case A:case T:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case c:return function(e,t,r){return z(t?r(H(e),!0):H(e),U,new e.constructor)}(e,n,r);case l:case g:return new a(e);case d:return function(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}(e);case p:return function(e,t,r){return z(t?r(q(e),!0):q(e),F,new e.constructor)}(e,n,r);case m:return i=e,Ee?Object(Ee.call(i)):{}}}(e,R,Ce,t)}}O||(O=new Te);var j=O.get(e);if(j)return j;if(O.set(e,C),!N)var D=r?function(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,We,je)}(e):We(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(D||e,(function(i,o){D&&(i=e[o=i]),Pe(C,o,Ce(i,t,r,n,o,e,O))})),C}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Ne(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n?n(r[s],e[s],s,r,e):void 0;Pe(r,s,void 0===a?e[s]:a)}return r}function Re(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Le(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!$e(e)||(t=e,Y&&Y in t))&&(qe(e)||V(e)?te:O).test(Fe(e));var t}(r)?r:void 0}ke.prototype.clear=function(){this.__data__=ye?ye(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(ye){var n=t[e];return n===r?void 0:n}return Q.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:Q.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=ye&&void 0===t?r:t,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var t=this.__data__,r=Oe(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ie.prototype.get=function(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]},Ie.prototype.has=function(e){return Oe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var r=this.__data__,n=Oe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new ke,map:new(de||Ie),string:new ke}},Ae.prototype.delete=function(e){return Re(this,e).delete(e)},Ae.prototype.get=function(e){return Re(this,e).get(e)},Ae.prototype.has=function(e){return Re(this,e).has(e)},Ae.prototype.set=function(e,t){return Re(this,e).set(e,t),this},Te.prototype.clear=function(){this.__data__=new Ie},Te.prototype.delete=function(e){return this.__data__.delete(e)},Te.prototype.get=function(e){return this.__data__.get(e)},Te.prototype.has=function(e){return this.__data__.has(e)},Te.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ie){var n=r.__data__;if(!de||n.length<199)return n.push([e,t]),this;r=this.__data__=new Ae(n)}return r.set(e,t),this};var je=ce?K(ce,Object):function(){return[]},De=function(e){return ee.call(e)};function Be(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}function Fe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(fe&&De(new fe(new ArrayBuffer(1)))!=b||de&&De(new de)!=c||pe&&De(pe.resolve())!=f||ge&&De(new ge)!=p||me&&De(new me)!=y)&&(De=function(e){var t=ee.call(e),r=t==h?e.constructor:void 0,n=r?Fe(r):void 0;if(n)switch(n){case ve:return b;case be:return c;case we:return f;case _e:return p;case xe:return y}return t});var Ve=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!qe(e)}var Ke=le||function(){return!1};function qe(e){var t=$e(e)?ee.call(e):"";return t==a||t==u}function $e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function We(e){return He(e)?function(e,t){var r=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&He(e)}(e)&&Q.call(e,"callee")&&(!ae.call(e,"callee")||ee.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var s in e)!t&&!Q.call(e,s)||o&&("length"==s||Be(s,n))||r.push(s);return r}(e):function(e){if(!Ue(e))return he(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Ce(e,!0,!0)}}(Dg,Dg.exports);var Bg=Dg.exports;function Ug(e){return Bg(e)}async function Fg(e){e["@context"].find((e=>{return(t=e)===Object(t)&&"@vocab"in e;var t}))||e["@context"].push({"@vocab":"http://fallback.org/"});const t=function(e){const t=Ug(e);return"proof"in t?function(e){const t=Ug(e);if(!Array.isArray(e.proof))return delete t.proof,t;const r=e.proof.find((e=>"ChainedProof2021"!==e.type));return t.proof=r,t}(t):("signature"in t&&delete t.signature,t)}(e),r={algorithm:"URDNA2015",format:"application/nquads",documentLoader:function(e){return e in xi?{contextUrl:null,document:xi[e],documentUrl:e}:Cg.documentLoader(e)}};let n;try{n=await Cg.normalize(t,r)}catch(e){throw console.error(e),new ji("computeLocalHash",Oi("errors","failedJsonLdNormalization"))}const i=function(e){const t=e.split("\n"),r=/<http:\/\/fallback\.org\/(.*)>/,n=t.map((e=>r.exec(e))).filter((e=>null!=e));if(n.length>0){const e=n.map((e=>e[1])).sort();return Array.from(new Set(e))}return null}(n);if(i)throw new ji("computeLocalHash",`${Oi("errors","foundUnmappedFields")}: ${i.join(", ")}`);return Lg(function(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(n))}const zg=Hl.i18n.getText("errors","identityErrorBaseMessage");class Vg extends Error{constructor(e){super(e||"This operation is not supported for this key type")}}var Hg=Vg;class Kg extends Error{constructor(){super("This has not been implemented yet")}}var qg=Kg;const $g=qg;var Wg=class{constructor(e){this.params=e}fromPrivatePKCS1(e){throw new $g}fromPrivatePKCS8(e){throw new $g}fromPublicPKCS1(e){throw new $g}fromPublicPKCS8(e){throw new $g}fromPrivateBlk(e){throw new $g}fromPublicBlk(e){throw new $g}fromJwk(e){throw new $g}toPrivatePKCS1(e){throw new $g}toPrivatePKCS8(e){throw new $g}toPublicPKCS1(e){throw new $g}toPublicPKCS8(e){throw new $g}toPrivateBlk(e){throw new $g}toPublicBlk(e){throw new $g}toPrivateJwk(e){throw new $g}toPublicJwk(e){throw new $g}static formatPem(e,t){return`-----BEGIN ${t} KEY-----\n`+e.match(/.{1,64}/g).join("\n")+`\n-----END ${t} KEY-----`}},Gg={},Jg={exports:{}};!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!=(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var f=l[e],d=h[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(e);n=(p=p.idivn(d)).isZero()?g+n:c[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,o,s=e.words,a=t.words,u=r.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,v=m>>>13,b=0|s[3],w=8191&b,_=b>>>13,x=0|s[4],S=8191&x,E=x>>>13,k=0|s[5],I=8191&k,A=k>>>13,T=0|s[6],P=8191&T,O=T>>>13,C=0|s[7],M=8191&C,N=C>>>13,R=0|s[8],L=8191&R,j=R>>>13,D=0|s[9],B=8191&D,U=D>>>13,F=0|a[0],z=8191&F,V=F>>>13,H=0|a[1],K=8191&H,q=H>>>13,$=0|a[2],W=8191&$,G=$>>>13,J=0|a[3],X=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(c+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,z)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,V))+Math.imul(g,z)|0,o=Math.imul(g,V);var ye=(c+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,q)|0)+Math.imul(f,K)|0))<<13)|0;c=((o=o+Math.imul(f,q)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,V))+Math.imul(v,z)|0,o=Math.imul(v,V),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(g,K)|0,o=o+Math.imul(g,q)|0;var ve=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,G)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,V))+Math.imul(_,z)|0,o=Math.imul(_,V),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,q)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,q)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,G)|0;var be=(c+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,V))+Math.imul(E,z)|0,o=Math.imul(E,V),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,q)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,Y)|0;var we=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,V))+Math.imul(A,z)|0,o=Math.imul(A,V),n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,q)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,G)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0;var _e=(c+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(f,re)|0))<<13)|0;c=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,V))+Math.imul(O,z)|0,o=Math.imul(O,V),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,q)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var xe=(c+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,z),i=(i=Math.imul(M,V))+Math.imul(N,z)|0,o=Math.imul(N,V),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(O,K)|0,o=o+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Se=(c+(n=n+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,V))+Math.imul(j,z)|0,o=Math.imul(j,V),n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,q)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,G)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(g,ue)|0,o=o+Math.imul(g,ce)|0;var Ee=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,z),i=(i=Math.imul(B,V))+Math.imul(U,z)|0,o=Math.imul(U,V),n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,q)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(P,X)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,he)|0,o=o+Math.imul(g,fe)|0;var ke=(c+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,K),i=(i=Math.imul(B,q))+Math.imul(U,K)|0,o=Math.imul(U,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,G)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,fe)|0;var Ie=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;c=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,W),i=(i=Math.imul(B,G))+Math.imul(U,W)|0,o=Math.imul(U,G),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(j,X)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,n=n+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ae=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,X),i=(i=Math.imul(B,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Te=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Q),i=(i=Math.imul(B,ee))+Math.imul(U,Q)|0,o=Math.imul(U,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(j,re)|0,o=o+Math.imul(j,ne)|0,n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Pe=(c+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,re),i=(i=Math.imul(B,ne))+Math.imul(U,re)|0,o=Math.imul(U,ne),n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,n=n+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,ce)|0,n=n+Math.imul(P,he)|0,i=(i=i+Math.imul(P,fe)|0)+Math.imul(O,he)|0,o=o+Math.imul(O,fe)|0;var Oe=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,oe),i=(i=Math.imul(B,se))+Math.imul(U,oe)|0,o=Math.imul(U,se),n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(j,ue)|0,o=o+Math.imul(j,ce)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,fe)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,fe)|0;var Ce=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(U,ue)|0,o=Math.imul(U,ce),n=n+Math.imul(L,he)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,fe)|0;var Me=(c+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(N,pe)|0))<<13)|0;c=((o=o+Math.imul(N,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(U,he)|0,o=Math.imul(U,fe);var Ne=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ge)|0)+Math.imul(j,pe)|0))<<13)|0;c=((o=o+Math.imul(j,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Re=(c+(n=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,ge))+Math.imul(U,pe)|0))<<13)|0;return c=((o=Math.imul(U,ge))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u[0]=me,u[1]=ye,u[2]=ve,u[3]=be,u[4]=we,u[5]=_e,u[6]=xe,u[7]=Se,u[8]=Ee,u[9]=ke,u[10]=Ie,u[11]=Ae,u[12]=Te,u[13]=Pe,u[14]=Oe,u[15]=Ce,u[16]=Me,u[17]=Ne,u[18]=Re,0!==c&&(u[19]=c,r.length++),r};function p(e,t,r){return(new g).mulp(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(d=f),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?d(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},g.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},g.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,f=c,d=0;d<s;d++){var p=r[l+d],g=n[l+d],m=r[l+d+s],y=n[l+d+s],v=h*m-f*y;y=h*y+f*m,m=v,r[l+d]=p+m,n[l+d]=g+y,r[l+d+s]=p-m,n[l+d+s]=g-y,d!==a&&(v=u*h-c*f,f=u*f+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},g.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-u[d]*h[d];u[d]=a[d]*h[d]+u[d]*l[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),p(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),o=e,s=0|o.words[o.length-1];0!=(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==t){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=n.clone()._ishlnsubmul(o,1,u);0===l.negative&&(n=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[o.length+h])+(0|n.words[o.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(o,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(o,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,s,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(u)):(n.isub(t),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(o=0===t.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var m={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},n(v,y),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,y),n(w,y),n(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(m[e])return m[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new b;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return m[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(h,new i(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var h=c>>l&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(4==++a||0===n&&0===l)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},n(S,x),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(Jg,lt);var Xg={},Yg={},Zg={exports:{}};"function"==typeof Object.create?Zg.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Zg.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Qg,em=fr,tm=em.Buffer,rm={};for(Qg in em)em.hasOwnProperty(Qg)&&"SlowBuffer"!==Qg&&"Buffer"!==Qg&&(rm[Qg]=em[Qg]);var nm=rm.Buffer={};for(Qg in tm)tm.hasOwnProperty(Qg)&&"allocUnsafe"!==Qg&&"allocUnsafeSlow"!==Qg&&(nm[Qg]=tm[Qg]);if(rm.Buffer.prototype=tm.prototype,nm.from&&nm.from!==Uint8Array.from||(nm.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return tm(e,t,r)}),nm.alloc||(nm.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=tm(e);return t&&0!==t.length?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n}),!rm.kStringMaxLength)try{rm.kStringMaxLength=Eo.binding("buffer").kStringMaxLength}catch(aH){}rm.constants||(rm.constants={MAX_LENGTH:rm.kMaxLength},rm.kStringMaxLength&&(rm.constants.MAX_STRING_LENGTH=rm.kStringMaxLength));var im=rm,om={};const sm=Zg.exports;function am(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function um(e,t){this.path=e,this.rethrow(t)}om.Reporter=am,am.prototype.isError=function(e){return e instanceof um},am.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},am.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},am.prototype.enterKey=function(e){return this._reporterState.path.push(e)},am.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},am.prototype.leaveKey=function(e,t,r){const n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},am.prototype.path=function(){return this._reporterState.path.join("/")},am.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},am.prototype.leaveObject=function(e){const t=this._reporterState,r=t.obj;return t.obj=e,r},am.prototype.error=function(e){let t;const r=this._reporterState,n=e instanceof um;if(t=n?e:new um(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},am.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},sm(um,Error),um.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,um),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this};var cm={};const lm=Zg.exports,hm=om.Reporter,fm=im.Buffer;function dm(e,t){hm.call(this,t),fm.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function pm(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return pm.isEncoderBuffer(e)||(e=new pm(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=fm.byteLength(e);else{if(!fm.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}lm(dm,hm),cm.DecoderBuffer=dm,dm.isDecoderBuffer=function(e){return e instanceof dm||"object"==typeof e&&fm.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},dm.prototype.save=function(){return{offset:this.offset,reporter:hm.prototype.save.call(this)}},dm.prototype.restore=function(e){const t=new dm(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,hm.prototype.restore.call(this,e.reporter),t},dm.prototype.isEmpty=function(){return this.offset===this.length},dm.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},dm.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new dm(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},dm.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},cm.EncoderBuffer=pm,pm.isEncoderBuffer=function(e){return e instanceof pm||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},pm.prototype.join=function(e,t){return e||(e=fm.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):fm.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var gm=mm;function mm(e,t){if(!e)throw new Error(t||"Assertion failed")}mm.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};const ym=om.Reporter,vm=cm.EncoderBuffer,bm=cm.DecoderBuffer,wm=gm,_m=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],xm=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(_m);function Sm(e,t,r){const n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var Em=Sm;const km=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Sm.prototype.clone=function(){const e=this._baseState,t={};km.forEach((function(r){t[r]=e[r]}));const r=new this.constructor(t.parent);return r._baseState=t,r},Sm.prototype._wrap=function(){const e=this._baseState;xm.forEach((function(t){this[t]=function(){const r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},Sm.prototype._init=function(e){const t=this._baseState;wm(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),wm.equal(t.children.length,1,"Root node can have only one child")},Sm.prototype._useArgs=function(e){const t=this._baseState,r=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==r.length&&(wm(null===t.children),t.children=r,r.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(wm(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);const n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){Sm.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),_m.forEach((function(e){Sm.prototype[e]=function(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return wm(null===t.tag),t.tag=e,this._useArgs(r),this}})),Sm.prototype.use=function(e){wm(e);const t=this._baseState;return wm(null===t.use),t.use=e,this},Sm.prototype.optional=function(){return this._baseState.optional=!0,this},Sm.prototype.def=function(e){const t=this._baseState;return wm(null===t.default),t.default=e,t.optional=!0,this},Sm.prototype.explicit=function(e){const t=this._baseState;return wm(null===t.explicit&&null===t.implicit),t.explicit=e,this},Sm.prototype.implicit=function(e){const t=this._baseState;return wm(null===t.explicit&&null===t.implicit),t.implicit=e,this},Sm.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},Sm.prototype.key=function(e){const t=this._baseState;return wm(null===t.key),t.key=e,this},Sm.prototype.any=function(){return this._baseState.any=!0,this},Sm.prototype.choice=function(e){const t=this._baseState;return wm(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},Sm.prototype.contains=function(e){const t=this._baseState;return wm(null===t.use),t.contains=e,this},Sm.prototype._decode=function(e,t){const r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));let n,i=r.default,o=!0,s=null;if(null!==r.key&&(s=e.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(e,n,r.any),e.isError(o))return o}else{const n=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(n)}}if(r.obj&&o&&(n=e.enterObject()),o){if(null!==r.explicit){const t=this._decodeTag(e,r.explicit);if(e.isError(t))return t;e=t}const n=e.offset;if(null===r.use&&null===r.choice){let t;r.any&&(t=e.save());const n=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(n))return n;r.any?i=e.raw(t):e=n}if(t&&t.track&&null!==r.tag&&t.track(e.path(),n,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new bm(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(n,t)}}return r.obj&&o&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==s&&e.exitKey(s):e.leaveKey(s,r.key,i),i},Sm.prototype._decodeGeneric=function(e,t,r){const n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},Sm.prototype._getUse=function(e,t){const r=this._baseState;return r.useDecoder=this._use(e,t),wm(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},Sm.prototype._decodeChoice=function(e,t){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const s=e.save(),a=r.choice[o];try{const r=a._decode(e,t);if(e.isError(r))return!1;n={type:o,value:r},i=!0}catch(t){return e.restore(s),!1}return!0}),this),i?n:e.error("Choice not matched")},Sm.prototype._createEncoderBuffer=function(e){return new vm(e,this.reporter)},Sm.prototype._encode=function(e,t,r){const n=this._baseState;if(null!==n.default&&n.default===e)return;const i=this._encodeValue(e,t,r);return void 0===i||this._skipDefault(i,t,r)?void 0:i},Sm.prototype._encodeValue=function(e,t,r){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(e,t||new ym);let i=null;if(this.reporter=t,n.optional&&void 0===e){if(null===n.default)return;e=n.default}let o=null,s=!1;if(n.any)i=this._createEncoderBuffer(e);else if(n.choice)i=this._encodeChoice(e,t);else if(n.contains)o=this._getUse(n.contains,r)._encode(e,t),s=!0;else if(n.children)o=n.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");const n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return t.error("Too many args for : "+n.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(r){const n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),r))}else null!==n.use?i=this._getUse(n.use,r)._encode(e,t):(o=this._encodePrimitive(n.tag,e),s=!0);if(!n.any&&null===n.choice){const e=null!==n.implicit?n.implicit:n.tag,r=null===n.implicit?"universal":"context";null===e?null===n.use&&t.error("Tag could be omitted only for .use()"):null===n.use&&(i=this._encodeComposite(e,s,r,o))}return null!==n.explicit&&(i=this._encodeComposite(n.explicit,!1,"context",i)),i},Sm.prototype._encodeChoice=function(e,t){const r=this._baseState,n=r.choice[e.type];return n||wm(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},Sm.prototype._encodePrimitive=function(e,t){const r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},Sm.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},Sm.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var Im={};!function(e){function t(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t(e.tag)}(Im);const Am=Zg.exports,Tm=im.Buffer,Pm=Em,Om=Im;function Cm(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new Nm,this.tree._init(e.body)}var Mm=Cm;function Nm(e){Pm.call(this,"der",e)}function Rm(e){return e<10?"0"+e:e}Cm.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},Am(Nm,Pm),Nm.prototype._encodeComposite=function(e,t,r,n){const i=function(e,t,r,n){let i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),Om.tagByName.hasOwnProperty(e))i=Om.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=Om.tagClassByName[r||"universal"]<<6,i)}(e,t,r,this.reporter);if(n.length<128){const e=Tm.alloc(2);return e[0]=i,e[1]=n.length,this._createEncoderBuffer([e,n])}let o=1;for(let e=n.length;e>=256;e>>=8)o++;const s=Tm.alloc(2+o);s[0]=i,s[1]=128|o;for(let e=1+o,t=n.length;t>0;e--,t>>=8)s[e]=255&t;return this._createEncoderBuffer([s,n])},Nm.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=Tm.alloc(2*e.length);for(let r=0;r<e.length;r++)t.writeUInt16BE(e.charCodeAt(r),2*r);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},Nm.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let n=0;for(let t=0;t<e.length;t++){let r=e[t];for(n++;r>=128;r>>=7)n++}const i=Tm.alloc(n);let o=i.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(i[o--]=127&r;(r>>=7)>0;)i[o--]=128|127&r}return this._createEncoderBuffer(i)},Nm.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[Rm(n.getUTCFullYear()),Rm(n.getUTCMonth()+1),Rm(n.getUTCDate()),Rm(n.getUTCHours()),Rm(n.getUTCMinutes()),Rm(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[Rm(n.getUTCFullYear()%100),Rm(n.getUTCMonth()+1),Rm(n.getUTCDate()),Rm(n.getUTCHours()),Rm(n.getUTCMinutes()),Rm(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},Nm.prototype._encodeNull=function(){return this._createEncoderBuffer("")},Nm.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!Tm.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=Tm.from(t)}if(Tm.isBuffer(e)){let t=e.length;0===e.length&&t++;const r=Tm.alloc(t);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let t=e;t>=256;t>>=8)r++;const n=new Array(r);for(let t=n.length-1;t>=0;t--)n[t]=255&e,e>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(Tm.from(n))},Nm.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},Nm.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},Nm.prototype._skipDefault=function(e,t,r){const n=this._baseState;let i;if(null===n.default)return!1;const o=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),o.length!==n.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return!1;return!0};const Lm=Zg.exports,jm=Mm;function Dm(e){jm.call(this,e),this.enc="pem"}Lm(Dm,jm);var Bm=Dm;Dm.prototype.encode=function(e,t){const r=jm.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"];for(let e=0;e<r.length;e+=64)n.push(r.slice(e,e+64));return n.push("-----END "+t.label+"-----"),n.join("\n")},function(e){const t=e;t.der=Mm,t.pem=Bm}(Yg);var Um={};const Fm=Zg.exports,zm=Jg.exports,Vm=cm.DecoderBuffer,Hm=Em,Km=Im;function qm(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new Wm,this.tree._init(e.body)}var $m=qm;function Wm(e){Hm.call(this,"der",e)}function Gm(e,t){let r=e.readUInt8(t);if(e.isError(r))return r;const n=Km.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:Km.tag[r]}}function Jm(e,t,r){let n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(let t=0;t<i;t++){n<<=8;const t=e.readUInt8(r);if(e.isError(t))return t;n|=t}return n}qm.prototype.decode=function(e,t){return Vm.isDecoderBuffer(e)||(e=new Vm(e,t)),this.tree._decode(e,t)},Fm(Wm,Hm),Wm.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;const n=e.save(),i=Gm(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},Wm.prototype._decodeTag=function(e,t,r){const n=Gm(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;let i=Jm(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const o=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},Wm.prototype._skipUntilEnd=function(e,t){for(;;){const r=Gm(e,t);if(e.isError(r))return r;const n=Jm(e,r.primitive,t);if(e.isError(n))return n;let i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},Wm.prototype._decodeList=function(e,t,r,n){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const o=r.decode(e,"der",n);if(e.isError(o)&&t)break;i.push(o)}return i},Wm.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let r="";for(let e=0;e<t.length/2;e++)r+=String.fromCharCode(t.readUInt16BE(2*e));return r}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},Wm.prototype._decodeObjid=function(e,t,r){let n;const i=[];let o=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(i.push(o),o=0);128&s&&i.push(o);const a=i[0]/40|0,u=i[0]%40;if(n=r?i:[a,u].concat(i.slice(1)),t){let e=t[n.join(" ")];void 0===e&&(e=t[n.join(".")]),void 0!==e&&(n=e)}return n},Wm.prototype._decodeTime=function(e,t){const r=e.raw().toString();let n,i,o,s,a,u;if("gentime"===t)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,o,s,a,u,0)},Wm.prototype._decodeNull=function(){return null},Wm.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},Wm.prototype._decodeInt=function(e,t){const r=e.raw();let n=new zm(r);return t&&(n=t[n.toString(10)]||n),n},Wm.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree};const Xm=Zg.exports,Ym=im.Buffer,Zm=$m;function Qm(e){Zm.call(this,e),this.enc="pem"}Xm(Qm,Zm);var ey=Qm;Qm.prototype.decode=function(e,t){const r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,s=-1;for(let e=0;e<r.length;e++){const t=r[e].match(i);if(null!==t&&t[2]===n){if(-1!==o){if("END"!==t[1])break;s=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===s)throw new Error("PEM section not found for: "+n);const a=r.slice(o+1,s).join("");a.replace(/[^a-z0-9+/=]+/gi,"");const u=Ym.from(a,"base64");return Zm.prototype.decode.call(this,u,t)},function(e){const t=e;t.der=$m,t.pem=ey}(Um),function(e){const t=Yg,r=Um,n=Zg.exports;function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(e){const t=this.name;function r(e){this._initNamed(e,t)}return n(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r[e])),this.decoders[e]},i.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(t[e])),this.encoders[e]},i.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}(Xg);var ty={};!function(e){const t=ty;t.Reporter=om.Reporter,t.DecoderBuffer=cm.DecoderBuffer,t.EncoderBuffer=cm.EncoderBuffer,t.Node=Em}();var ry={};!function(e){const t=ry;t._reverse=function(e){const t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);const n=e[r];t[n]=r})),t},t.der=Im}(),function(e){const t=Gg;t.bignum=Jg.exports,t.define=Xg.define,t.base=ty,t.constants=ry,t.decoders=Um,t.encoders=Yg}();var ny={exports:{}},iy={},oy={};Object.defineProperty(oy,"__esModule",{value:!0}),oy.default=function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,o=t+i,s=Tt.alloc(o);for(s.write(e);i--;)s.write("=",n++);return s.toString()},Object.defineProperty(iy,"__esModule",{value:!0});var sy=oy;function ay(e,t){return void 0===t&&(t="utf8"),lr(e)?cy(e.toString("base64")):cy(Tt.from(e,t).toString("base64"))}function uy(e){return e=e.toString(),sy.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function cy(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var ly=ay;ly.encode=ay,ly.decode=function(e,t){return void 0===t&&(t="utf8"),Tt.from(uy(e),"base64").toString(t)},ly.toBase64=uy,ly.fromBase64=cy,ly.toBuffer=function(e){return Tt.from(uy(e),"base64")},iy.default=ly,function(e){e.exports=iy.default,e.exports.default=e.exports}(ny);const hy=Gg,fy=ny.exports;var dy=class{static convert(e,t,r){if(!e)return;if(t===r)return e;let n;if("raw"===t||e instanceof Tt)n=e;else if("uint8_array"===t||Array.isArray(e))n=Tt.from(e);else if("hex"===t)n=Tt.from(e,"hex");else if("base64"===t)n=Tt.from(e,"base64");else if("base64url"===t)n=fy.toBuffer(e);else{if("bn"!==t&&"bignum"!==t)throw new Error("Invalid fromType");n=Tt.from(this.pad(e.toString(16)),"hex")}if("raw"===r)return n;if("uint8_array"===r)return Array.from(n);if("hex"===r)return n.toString("hex");if("base64"===r)return n.toString("base64");if("base64url"===r)return fy.fromBase64(n.toString("base64"));if("bn"===r||"bignum"===r)return new hy.bignum(n);throw new Error("Invalid toType")}static pad(e){return e.length%2==1?`0${e}`:e}};const py=Gg;const gy=new class{constructor(){Object.defineProperty(this,"_registry",{value:{}})}get registry(){return this._registry}define(e,t){this._registry[e]=py.define(e,t(this))}normalize(e){return this.registry[e]}};gy.define("Version",(e=>function(){this.int({0:"two-prime",1:"multi"})})),gy.define("OtherPrimeInfos",(e=>function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())})),gy.define("AlgorithmIdentifier",(e=>function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())})),gy.define("PrivateKeyInfo",(e=>{let t=e.normalize("Version"),r=e.normalize("AlgorithmIdentifier");return function(){this.seq().obj(this.key("version").use(t),this.key("algorithm").use(r),this.key("privateKey").octstr())}})),gy.define("PublicKeyInfo",(e=>{let t=e.normalize("AlgorithmIdentifier");return function(){this.seq().obj(this.key("algorithm").use(t),this.key("publicKey").bitstr())}})),gy.define("RSAPrivateKey",(e=>{let t=e.normalize("Version"),r=e.normalize("OtherPrimeInfos");return function(){this.seq().obj(this.key("version").use(t),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(r))}})),gy.define("RSAPublicKey",(e=>function(){this.seq().obj(this.key("n").int(),this.key("e").int())})),gy.define("ECPrivateKey",(e=>function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().choice({namedCurve:this.objid()}),this.key("publicKey").explicit(1).optional().bitstr())}));var my=gy;const yy=Wg,vy=dy,by=my;class wy extends yy{fromPrivatePKCS1(e){let t=by.normalize("RSAPrivateKey"),{n:r,e:n,d:i,p:o,q:s,dp:a,dq:u,qi:c}=t.decode(e,"der");return{n:vy.convert(r,"bn","raw"),e:vy.convert(n,"bn","raw"),d:vy.convert(i,"bn","raw"),p:vy.convert(o,"bn","raw"),q:vy.convert(s,"bn","raw"),dp:vy.convert(a,"bn","raw"),dq:vy.convert(u,"bn","raw"),qi:vy.convert(c,"bn","raw")}}fromPrivatePKCS8(e){let t=by.normalize("PrivateKeyInfo"),r=by.normalize("RSAPrivateKey"),n=t.decode(e,"der"),{n:i,e:o,d:s,p:a,q:u,dp:c,dq:l,qi:h}=r.decode(n.privateKey,"der");return{n:vy.convert(i,"bn","raw"),e:vy.convert(o,"bn","raw"),d:vy.convert(s,"bn","raw"),p:vy.convert(a,"bn","raw"),q:vy.convert(u,"bn","raw"),dp:vy.convert(c,"bn","raw"),dq:vy.convert(l,"bn","raw"),qi:vy.convert(h,"bn","raw")}}fromPublicPKCS1(e){let t=by.normalize("RSAPublicKey"),{n:r,e:n}=t.decode(e,"der");return{n:vy.convert(r,"bn","raw"),e:vy.convert(n,"bn","raw")}}fromPublicPKCS8(e){let t=by.normalize("PublicKeyInfo"),r=by.normalize("RSAPublicKey"),n=t.decode(e,"der"),{n:i,e:o}=r.decode(n.publicKey.data,"der");return{n:vy.convert(i,"bn","raw"),e:vy.convert(o,"bn","raw")}}fromJwk(e){let{n:t,e:r,d:n,p:i,q:o,dp:s,dq:a,qi:u,alg:c}=e;return{n:vy.convert(t,"base64url","raw"),e:vy.convert(r,"base64url","raw"),d:vy.convert(n,"base64url","raw"),p:vy.convert(i,"base64url","raw"),q:vy.convert(o,"base64url","raw"),dp:vy.convert(s,"base64url","raw"),dq:vy.convert(a,"base64url","raw"),qi:vy.convert(u,"base64url","raw")}}toPrivatePKCS1(e){let{n:t,e:r,d:n,p:i,q:o,dp:s,dq:a,qi:u}=e,{version:c}=this.params,l=by.normalize("RSAPrivateKey").encode({version:c,n:vy.convert(t,"raw","bn"),e:vy.convert(r,"raw","bn"),d:vy.convert(n,"raw","bn"),p:vy.convert(i,"raw","bn"),q:vy.convert(o,"raw","bn"),dp:vy.convert(s,"raw","bn"),dq:vy.convert(a,"raw","bn"),qi:vy.convert(u,"raw","bn")},"der").toString("base64");return wy.formatPem(l,"RSA PRIVATE")}toPrivatePKCS8(e){let{n:t,e:r,d:n,p:i,q:o,dp:s,dq:a,qi:u}=e,{oid:c,algParameters:l,version:h}=this.params,f=by.normalize("PrivateKeyInfo"),d=by.normalize("RSAPrivateKey").encode({version:h,n:vy.convert(t,"raw","bn"),e:vy.convert(r,"raw","bn"),d:vy.convert(n,"raw","bn"),p:vy.convert(i,"raw","bn"),q:vy.convert(o,"raw","bn"),dp:vy.convert(s,"raw","bn"),dq:vy.convert(a,"raw","bn"),qi:vy.convert(u,"raw","bn")},"der"),p=f.encode({version:h,algorithm:{algorithm:c.split("."),parameters:Tt.from(l,"hex")},privateKey:d},"der").toString("base64");return wy.formatPem(p,"PRIVATE")}toPublicPKCS1(e){let{n:t,e:r}=e,{version:n}=this.params,i=by.normalize("RSAPublicKey").encode({version:n,n:vy.convert(t,"raw","bn"),e:vy.convert(r,"raw","bn")},"der").toString("base64");return wy.formatPem(i,"RSA PUBLIC")}toPublicPKCS8(e){let{n:t,e:r}=e,{oid:n,algParameters:i}=this.params,o=by.normalize("PublicKeyInfo"),s=by.normalize("RSAPublicKey").encode({n:vy.convert(t,"raw","bn"),e:vy.convert(r,"raw","bn")},"der"),a=o.encode({algorithm:{algorithm:n.split("."),parameters:Tt.from(i,"hex")},publicKey:{unused:0,data:s}},"der").toString("base64");return wy.formatPem(a,"PUBLIC")}toPrivateJwk(e){let{n:t,e:r,d:n,p:i,q:o,dp:s,dq:a,qi:u}=e,{kty:c}=this.params;return{kty:c,n:vy.convert(t,"raw","base64url"),e:vy.convert(r,"raw","base64url"),d:vy.convert(n,"raw","base64url"),p:vy.convert(i,"raw","base64url"),q:vy.convert(o,"raw","base64url"),dp:vy.convert(s,"raw","base64url"),dq:vy.convert(a,"raw","base64url"),qi:vy.convert(u,"raw","base64url")}}toPublicJwk(e){let{n:t,e:r}=e,{kty:n}=this.params;return{kty:n,n:vy.convert(t,"raw","base64url"),e:vy.convert(r,"raw","base64url")}}}var _y=wy,xy={},Sy={},Ey={};!function(e){var t=Ey;function r(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},t.zero2=r,t.toHex=n,t.encode=function(e,t){return"hex"===t?n(e):e}}(),function(e){var t=Sy,r=Jg.exports,n=gm,i=Ey;t.assert=n,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode,t.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},t.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=0==(1&u)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(s),a=0==(1&c)?0:3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},t.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new r(e,"hex","le")}}();var ky,Iy={exports:{}};function Ay(e){this.rand=e}if(Iy.exports=function(e){return ky||(ky=new Ay(null)),ky.generate(e)},Iy.exports.Rand=Ay,Ay.prototype.generate=function(e){return this._rand(e)},Ay.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Ay.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Ay.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Ay.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Ty=require("crypto");if("function"!=typeof Ty.randomBytes)throw new Error("Not supported");Ay.prototype._rand=function(e){return Ty.randomBytes(e)}}catch(aH){}var Py={},Oy=Jg.exports,Cy=Sy,My=Cy.getNAF,Ny=Cy.getJSF,Ry=Cy.assert;function Ly(e,t){this.type=e,this.p=new Oy(t.p,16),this.red=t.prime?Oy.red(t.prime):Oy.mont(this.p),this.zero=new Oy(0).toRed(this.red),this.one=new Oy(1).toRed(this.red),this.two=new Oy(2).toRed(this.red),this.n=t.n&&new Oy(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var jy=Ly;function Dy(e,t){this.curve=e,this.type=t,this.precomputed=null}Ly.prototype.point=function(){throw new Error("Not implemented")},Ly.prototype.validate=function(){throw new Error("Not implemented")},Ly.prototype._fixedNafMul=function(e,t){Ry(e.precomputed);var r=e._getDoubles(),n=My(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},Ly.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=My(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];Ry(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},Ly.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=Ny(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var v=0|y[0][s],b=0|y[1][s];l[d][s]=m[3*(v+1)+(b+1)],l[p][s]=0,c[d]=g}}else l[d]=My(r[d],u[d],this._bitLength),l[p]=My(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(o=h;o>=0;o--){for(var x=0;o>=0;){var S=!0;for(s=0;s<n;s++)_[s]=0|l[s][o],0!==_[s]&&(S=!1);if(!S)break;x++,o--}if(o>=0&&x++,w=w.dblp(x),o<0)break;for(s=0;s<n;s++){var E=_[s];0!==E&&(E>0?a=c[s][E-1>>1]:E<0&&(a=c[s][-E-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},Ly.BasePoint=Dy,Dy.prototype.eq=function(){throw new Error("Not implemented")},Dy.prototype.validate=function(){return this.curve.validate(this)},Ly.prototype.decodePoint=function(e,t){e=Cy.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Ry(e[e.length-1]%2==0):7===e[0]&&Ry(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Dy.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Dy.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Dy.prototype.encode=function(e,t){return Cy.encode(this._encode(t),e)},Dy.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Dy.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Dy.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},Dy.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Dy.prototype._getBeta=function(){return null},Dy.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var By=Sy,Uy=Jg.exports,Fy=Zg.exports,zy=jy,Vy=By.assert;function Hy(e){zy.call(this,"short",e),this.a=new Uy(e.a,16).toRed(this.red),this.b=new Uy(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Fy(Hy,zy);var Ky=Hy;function qy(e,t,r,n){zy.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new Uy(t,16),this.y=new Uy(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function $y(e,t,r,n){zy.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Uy(0)):(this.x=new Uy(t,16),this.y=new Uy(r,16),this.z=new Uy(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Hy.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new Uy(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new Uy(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],Vy(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new Uy(e.a,16),b:new Uy(e.b,16)}})):this._getEndoBasis(r)}}},Hy.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Uy.mont(e),r=new Uy(2).toRed(t).redInvm(),n=r.redNeg(),i=new Uy(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},Hy.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new Uy(1),p=new Uy(0),g=new Uy(0),m=new Uy(1),y=0;0!==h.cmpn(0);){var v=f.div(h);u=f.sub(v.mul(h)),c=g.sub(v.mul(d));var b=m.sub(v.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=b}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},Hy.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},Hy.prototype.pointFromX=function(e,t){(e=new Uy(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},Hy.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},Hy.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},Fy(qy,zy.BasePoint),Hy.prototype.point=function(e,t,r){return new qy(this,e,t,r)},Hy.prototype.pointFromJSON=function(e,t){return qy.fromJSON(this,e,t)},qy.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},qy.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},qy.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},qy.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},qy.prototype.isInfinity=function(){return this.inf},qy.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},qy.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},qy.prototype.getX=function(){return this.x.fromRed()},qy.prototype.getY=function(){return this.y.fromRed()},qy.prototype.mul=function(e){return e=new Uy(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},qy.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},qy.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},qy.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},qy.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},qy.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Fy($y,zy.BasePoint),Hy.prototype.jpoint=function(e,t,r){return new $y(this,e,t,r)},$y.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},$y.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},$y.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},$y.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},$y.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var v=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=v,c=y}return this.curve.jpoint(o,c.redMul(i),a)},$y.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},$y.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},$y.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},$y.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},$y.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},$y.prototype.mul=function(e,t){return e=new Uy(e,t),this.curve._wnafMul(this,e)},$y.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},$y.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},$y.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},$y.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Wy=Jg.exports,Gy=Zg.exports,Jy=jy,Xy=Sy;function Yy(e){Jy.call(this,"mont",e),this.a=new Wy(e.a,16).toRed(this.red),this.b=new Wy(e.b,16).toRed(this.red),this.i4=new Wy(4).toRed(this.red).redInvm(),this.two=new Wy(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Gy(Yy,Jy);var Zy=Yy;function Qy(e,t,r){Jy.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Wy(t,16),this.z=new Wy(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Yy.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},Gy(Qy,Jy.BasePoint),Yy.prototype.decodePoint=function(e,t){return this.point(Xy.toArray(e,t),1)},Yy.prototype.point=function(e,t){return new Qy(this,e,t)},Yy.prototype.pointFromJSON=function(e){return Qy.fromJSON(this,e)},Qy.prototype.precompute=function(){},Qy.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Qy.fromJSON=function(e,t){return new Qy(e,t[0],t[1]||e.one)},Qy.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Qy.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Qy.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},Qy.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Qy.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),u=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,u)},Qy.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},Qy.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Qy.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Qy.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},Qy.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Qy.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var ev=Sy,tv=Jg.exports,rv=Zg.exports,nv=jy,iv=ev.assert;function ov(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,nv.call(this,"edwards",e),this.a=new tv(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new tv(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new tv(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),iv(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}rv(ov,nv);var sv=ov;function av(e,t,r,n,i){nv.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new tv(t,16),this.y=new tv(r,16),this.z=n?new tv(n,16):this.curve.one,this.t=i&&new tv(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}ov.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},ov.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},ov.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},ov.prototype.pointFromX=function(e,t){(e=new tv(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},ov.prototype.pointFromY=function(e,t){(e=new tv(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},ov.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},rv(av,nv.BasePoint),ov.prototype.pointFromJSON=function(e){return av.fromJSON(this,e)},ov.prototype.point=function(e,t,r,n){return new av(this,e,t,r,n)},av.fromJSON=function(e,t){return new av(e,t[0],t[1],t[2])},av.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},av.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},av.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),u=i.redMul(s),c=o.redMul(a),l=i.redMul(a),h=s.redMul(o);return this.curve.point(u,c,h,l)},av.prototype._projDbl=function(){var e,t,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(a)).redAdd(u);this.zOne?(e=s.redSub(a).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),e=s.redSub(a).redISub(u).redMul(o),t=c.redMul(n.redSub(u)),r=c.redMul(o))}else n=a.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(n)).redMul(o),t=this.curve._mulC(n).redMul(a.redISub(u)),r=n.redMul(o);return this.curve.point(e,t,r)},av.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},av.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),u=r.redAdd(t),c=o.redMul(s),l=a.redMul(u),h=o.redMul(u),f=s.redMul(a);return this.curve.point(c,l,f,h)},av.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),u=i.redSub(a),c=i.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),h=n.redMul(u).redMul(l);return this.curve.twisted?(t=n.redMul(c).redMul(s.redSub(this.curve._mulA(o))),r=u.redMul(c)):(t=n.redMul(c).redMul(s.redSub(o)),r=this.curve._mulC(u).redMul(c)),this.curve.point(h,t,r)},av.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},av.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},av.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},av.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},av.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},av.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},av.prototype.getX=function(){return this.normalize(),this.x.fromRed()},av.prototype.getY=function(){return this.normalize(),this.y.fromRed()},av.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},av.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},av.prototype.toP=av.prototype.normalize,av.prototype.mixedAdd=av.prototype.add,function(e){var t=e;t.base=jy,t.short=Ky,t.mont=Zy,t.edwards=sv}(Py);var uv={},cv={},lv={},hv=gm,fv=Zg.exports;function dv(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function pv(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function gv(e){return 1===e.length?"0"+e:e}function mv(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}lv.inherits=fv,lv.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):dv(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},lv.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=gv(e[r].toString(16));return t},lv.htonl=pv,lv.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=pv(i)),r+=mv(i.toString(16))}return r},lv.zero2=gv,lv.zero8=mv,lv.join32=function(e,t,r,n){var i=r-t;hv(i%4==0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var u;u="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=u>>>0}return o},lv.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},lv.rotr32=function(e,t){return e>>>t|e<<32-t},lv.rotl32=function(e,t){return e<<t|e>>>32-t},lv.sum32=function(e,t){return e+t>>>0},lv.sum32_3=function(e,t,r){return e+t+r>>>0},lv.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},lv.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},lv.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},lv.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},lv.sum64_lo=function(e,t,r,n){return t+n>>>0},lv.sum64_4_hi=function(e,t,r,n,i,o,s,a){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},lv.sum64_4_lo=function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},lv.sum64_5_hi=function(e,t,r,n,i,o,s,a,u,c){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+a>>>0)<a?1:0,e+r+i+s+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},lv.sum64_5_lo=function(e,t,r,n,i,o,s,a,u,c){return t+n+o+a+c>>>0},lv.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},lv.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},lv.shr64_hi=function(e,t,r){return e>>>r},lv.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var yv={},vv=lv,bv=gm;function wv(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}yv.BlockHash=wv,wv.prototype.update=function(e,t){if(e=vv.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=vv.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},wv.prototype.digest=function(e){return this.update(this._pad()),bv(null===this.pending),this._digest(e)},wv.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var _v={},xv={},Sv=lv.rotr32;function Ev(e,t,r){return e&t^~e&r}function kv(e,t,r){return e&t^e&r^t&r}function Iv(e,t,r){return e^t^r}xv.ft_1=function(e,t,r,n){return 0===e?Ev(t,r,n):1===e||3===e?Iv(t,r,n):2===e?kv(t,r,n):void 0},xv.ch32=Ev,xv.maj32=kv,xv.p32=Iv,xv.s0_256=function(e){return Sv(e,2)^Sv(e,13)^Sv(e,22)},xv.s1_256=function(e){return Sv(e,6)^Sv(e,11)^Sv(e,25)},xv.g0_256=function(e){return Sv(e,7)^Sv(e,18)^e>>>3},xv.g1_256=function(e){return Sv(e,17)^Sv(e,19)^e>>>10};var Av=lv,Tv=yv,Pv=xv,Ov=Av.rotl32,Cv=Av.sum32,Mv=Av.sum32_5,Nv=Pv.ft_1,Rv=Tv.BlockHash,Lv=[1518500249,1859775393,2400959708,3395469782];function jv(){if(!(this instanceof jv))return new jv;Rv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Av.inherits(jv,Rv);var Dv=jv;jv.blockSize=512,jv.outSize=160,jv.hmacStrength=80,jv.padLength=64,jv.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Ov(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),l=Mv(Ov(i,5),Nv(c,o,s,a),u,r[n],Lv[c]);u=a,a=s,s=Ov(o,30),o=i,i=l}this.h[0]=Cv(this.h[0],i),this.h[1]=Cv(this.h[1],o),this.h[2]=Cv(this.h[2],s),this.h[3]=Cv(this.h[3],a),this.h[4]=Cv(this.h[4],u)},jv.prototype._digest=function(e){return"hex"===e?Av.toHex32(this.h,"big"):Av.split32(this.h,"big")};var Bv=lv,Uv=yv,Fv=xv,zv=gm,Vv=Bv.sum32,Hv=Bv.sum32_4,Kv=Bv.sum32_5,qv=Fv.ch32,$v=Fv.maj32,Wv=Fv.s0_256,Gv=Fv.s1_256,Jv=Fv.g0_256,Xv=Fv.g1_256,Yv=Uv.BlockHash,Zv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Qv(){if(!(this instanceof Qv))return new Qv;Yv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Zv,this.W=new Array(64)}Bv.inherits(Qv,Yv);var eb=Qv;Qv.blockSize=512,Qv.outSize=256,Qv.hmacStrength=192,Qv.padLength=64,Qv.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Hv(Xv(r[n-2]),r[n-7],Jv(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],h=this.h[7];for(zv(this.k.length===r.length),n=0;n<r.length;n++){var f=Kv(h,Gv(u),qv(u,c,l),this.k[n],r[n]),d=Vv(Wv(i),$v(i,o,s));h=l,l=c,c=u,u=Vv(a,f),a=s,s=o,o=i,i=Vv(f,d)}this.h[0]=Vv(this.h[0],i),this.h[1]=Vv(this.h[1],o),this.h[2]=Vv(this.h[2],s),this.h[3]=Vv(this.h[3],a),this.h[4]=Vv(this.h[4],u),this.h[5]=Vv(this.h[5],c),this.h[6]=Vv(this.h[6],l),this.h[7]=Vv(this.h[7],h)},Qv.prototype._digest=function(e){return"hex"===e?Bv.toHex32(this.h,"big"):Bv.split32(this.h,"big")};var tb=lv,rb=eb;function nb(){if(!(this instanceof nb))return new nb;rb.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}tb.inherits(nb,rb);var ib=nb;nb.blockSize=512,nb.outSize=224,nb.hmacStrength=192,nb.padLength=64,nb.prototype._digest=function(e){return"hex"===e?tb.toHex32(this.h.slice(0,7),"big"):tb.split32(this.h.slice(0,7),"big")};var ob=lv,sb=yv,ab=gm,ub=ob.rotr64_hi,cb=ob.rotr64_lo,lb=ob.shr64_hi,hb=ob.shr64_lo,fb=ob.sum64,db=ob.sum64_hi,pb=ob.sum64_lo,gb=ob.sum64_4_hi,mb=ob.sum64_4_lo,yb=ob.sum64_5_hi,vb=ob.sum64_5_lo,bb=sb.BlockHash,wb=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _b(){if(!(this instanceof _b))return new _b;bb.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=wb,this.W=new Array(160)}ob.inherits(_b,bb);var xb=_b;function Sb(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function Eb(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function kb(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function Ib(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function Ab(e,t){var r=ub(e,t,28)^ub(t,e,2)^ub(t,e,7);return r<0&&(r+=4294967296),r}function Tb(e,t){var r=cb(e,t,28)^cb(t,e,2)^cb(t,e,7);return r<0&&(r+=4294967296),r}function Pb(e,t){var r=ub(e,t,14)^ub(e,t,18)^ub(t,e,9);return r<0&&(r+=4294967296),r}function Ob(e,t){var r=cb(e,t,14)^cb(e,t,18)^cb(t,e,9);return r<0&&(r+=4294967296),r}function Cb(e,t){var r=ub(e,t,1)^ub(e,t,8)^lb(e,t,7);return r<0&&(r+=4294967296),r}function Mb(e,t){var r=cb(e,t,1)^cb(e,t,8)^hb(e,t,7);return r<0&&(r+=4294967296),r}function Nb(e,t){var r=ub(e,t,19)^ub(t,e,29)^lb(e,t,6);return r<0&&(r+=4294967296),r}function Rb(e,t){var r=cb(e,t,19)^cb(t,e,29)^hb(e,t,6);return r<0&&(r+=4294967296),r}_b.blockSize=1024,_b.outSize=512,_b.hmacStrength=192,_b.padLength=128,_b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=Nb(r[n-4],r[n-3]),o=Rb(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=Cb(r[n-30],r[n-29]),c=Mb(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=gb(i,o,s,a,u,c,l,h),r[n+1]=mb(i,o,s,a,u,c,l,h)}},_b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],h=this.h[8],f=this.h[9],d=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],y=this.h[14],v=this.h[15];ab(this.k.length===r.length);for(var b=0;b<r.length;b+=2){var w=y,_=v,x=Pb(h,f),S=Ob(h,f),E=Sb(h,0,d,0,g),k=Eb(0,f,0,p,0,m),I=this.k[b],A=this.k[b+1],T=r[b],P=r[b+1],O=yb(w,_,x,S,E,k,I,A,T,P),C=vb(w,_,x,S,E,k,I,A,T,P);w=Ab(n,i),_=Tb(n,i),x=kb(n,0,o,0,a),S=Ib(0,i,0,s,0,u);var M=db(w,_,x,S),N=pb(w,_,x,S);y=g,v=m,g=d,m=p,d=h,p=f,h=db(c,l,O,C),f=pb(l,l,O,C),c=a,l=u,a=o,u=s,o=n,s=i,n=db(O,C,M,N),i=pb(O,C,M,N)}fb(this.h,0,n,i),fb(this.h,2,o,s),fb(this.h,4,a,u),fb(this.h,6,c,l),fb(this.h,8,h,f),fb(this.h,10,d,p),fb(this.h,12,g,m),fb(this.h,14,y,v)},_b.prototype._digest=function(e){return"hex"===e?ob.toHex32(this.h,"big"):ob.split32(this.h,"big")};var Lb=lv,jb=xb;function Db(){if(!(this instanceof Db))return new Db;jb.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Lb.inherits(Db,jb);var Bb=Db;Db.blockSize=1024,Db.outSize=384,Db.hmacStrength=192,Db.padLength=128,Db.prototype._digest=function(e){return"hex"===e?Lb.toHex32(this.h.slice(0,12),"big"):Lb.split32(this.h.slice(0,12),"big")},_v.sha1=Dv,_v.sha224=ib,_v.sha256=eb,_v.sha384=Bb,_v.sha512=xb;var Ub={},Fb=lv,zb=yv,Vb=Fb.rotl32,Hb=Fb.sum32,Kb=Fb.sum32_3,qb=Fb.sum32_4,$b=zb.BlockHash;function Wb(){if(!(this instanceof Wb))return new Wb;$b.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Gb(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Jb(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Xb(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Fb.inherits(Wb,$b),Ub.ripemd160=Wb,Wb.blockSize=512,Wb.outSize=160,Wb.hmacStrength=192,Wb.padLength=64,Wb.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,u=n,c=i,l=o,h=s,f=0;f<80;f++){var d=Hb(Vb(qb(r,Gb(f,n,i,o),e[Yb[f]+t],Jb(f)),Qb[f]),s);r=s,s=o,o=Vb(i,10),i=n,n=d,d=Hb(Vb(qb(a,Gb(79-f,u,c,l),e[Zb[f]+t],Xb(f)),ew[f]),h),a=h,h=l,l=Vb(c,10),c=u,u=d}d=Kb(this.h[1],i,l),this.h[1]=Kb(this.h[2],o,h),this.h[2]=Kb(this.h[3],s,a),this.h[3]=Kb(this.h[4],r,u),this.h[4]=Kb(this.h[0],n,c),this.h[0]=d},Wb.prototype._digest=function(e){return"hex"===e?Fb.toHex32(this.h,"little"):Fb.split32(this.h,"little")};var Yb=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Zb=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Qb=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ew=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],tw=lv,rw=gm;function nw(e,t,r){if(!(this instanceof nw))return new nw(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(tw.toArray(t,r))}var iw=nw;nw.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),rw(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},nw.prototype.update=function(e,t){return this.inner.update(e,t),this},nw.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=cv;t.utils=lv,t.common=yv,t.sha=_v,t.ripemd=Ub,t.hmac=iw,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(),function(e){var t,r=uv,n=cv,i=Py,o=Sy.assert;function s(e){"short"===e.type?this.curve=new i.short(e):"edwards"===e.type?this.curve=new i.edwards(e):this.curve=new i.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=require("./precomputed/secp256k1")}catch(e){t=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})}();var ow=cv,sw=Ey,aw=gm;function uw(e){if(!(this instanceof uw))return new uw(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=sw.toArray(e.entropy,e.entropyEnc||"hex"),r=sw.toArray(e.nonce,e.nonceEnc||"hex"),n=sw.toArray(e.pers,e.persEnc||"hex");aw(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var cw=uw;uw.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},uw.prototype._hmac=function(){return new ow.hmac(this.hash,this.K)},uw.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},uw.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=sw.toArray(e,t),r=sw.toArray(r,n),aw(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},uw.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=sw.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,sw.encode(o,t)};var lw=Jg.exports,hw=Sy.assert;function fw(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var dw=fw;fw.fromPublic=function(e,t,r){return t instanceof fw?t:new fw(e,{pub:t,pubEnc:r})},fw.fromPrivate=function(e,t,r){return t instanceof fw?t:new fw(e,{priv:t,privEnc:r})},fw.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},fw.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},fw.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},fw.prototype._importPrivate=function(e,t){this.priv=new lw(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},fw.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?hw(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||hw(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},fw.prototype.derive=function(e){return e.validate()||hw(e.validate(),"public point not validated"),e.mul(this.priv).getX()},fw.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},fw.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},fw.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var pw=Jg.exports,gw=Sy,mw=gw.assert;function yw(e,t){if(e instanceof yw)return e;this._importDER(e,t)||(mw(e.r&&e.s,"Signature without r or s"),this.r=new pw(e.r,16),this.s=new pw(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var vw=yw;function bw(){this.place=0}function ww(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function _w(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function xw(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}yw.prototype._importDER=function(e,t){e=gw.toArray(e,t);var r=new bw;if(48!==e[r.place++])return!1;var n=ww(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=ww(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=ww(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new pw(o),this.s=new pw(a),this.recoveryParam=null,!0},yw.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=_w(t),r=_w(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];xw(n,t.length),(n=n.concat(t)).push(2),xw(n,r.length);var i=n.concat(r),o=[48];return xw(o,i.length),o=o.concat(i),gw.encode(o,e)};var Sw=Jg.exports,Ew=cw,kw=Sy,Iw=uv,Aw=Iy.exports,Tw=kw.assert,Pw=dw,Ow=vw;function Cw(e){if(!(this instanceof Cw))return new Cw(e);"string"==typeof e&&(Tw(Object.prototype.hasOwnProperty.call(Iw,e),"Unknown curve "+e),e=Iw[e]),e instanceof Iw.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Mw=Cw;Cw.prototype.keyPair=function(e){return new Pw(this,e)},Cw.prototype.keyFromPrivate=function(e,t){return Pw.fromPrivate(this,e,t)},Cw.prototype.keyFromPublic=function(e,t){return Pw.fromPublic(this,e,t)},Cw.prototype.genKeyPair=function(e){e||(e={});for(var t=new Ew({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Aw(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Sw(2));;){var i=new Sw(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Cw.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Cw.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new Sw(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new Ew({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new Sw(1)),c=0;;c++){var l=n.k?n.k(c):new Sw(a.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var f=h.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=l.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new Ow({r:d,s:p,recoveryParam:g})}}}}}},Cw.prototype.verify=function(e,t,r,n){e=this._truncateToN(new Sw(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Ow(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),u=a.mul(e).umod(this.n),c=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},Cw.prototype.recoverPubKey=function(e,t,r,n){Tw((3&r)===r,"The recovery param is more than two bits"),t=new Ow(t,n);var i=this.n,o=new Sw(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},Cw.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Ow(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Nw=Sy,Rw=Nw.assert,Lw=Nw.parseBytes,jw=Nw.cachedProperty;function Dw(e,t){this.eddsa=e,this._secret=Lw(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=Lw(t.pub)}Dw.fromPublic=function(e,t){return t instanceof Dw?t:new Dw(e,{pub:t})},Dw.fromSecret=function(e,t){return t instanceof Dw?t:new Dw(e,{secret:t})},Dw.prototype.secret=function(){return this._secret},jw(Dw,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),jw(Dw,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),jw(Dw,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),jw(Dw,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),jw(Dw,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),jw(Dw,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Dw.prototype.sign=function(e){return Rw(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},Dw.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},Dw.prototype.getSecret=function(e){return Rw(this._secret,"KeyPair is public only"),Nw.encode(this.secret(),e)},Dw.prototype.getPublic=function(e){return Nw.encode(this.pubBytes(),e)};var Bw=Dw,Uw=Jg.exports,Fw=Sy,zw=Fw.assert,Vw=Fw.cachedProperty,Hw=Fw.parseBytes;function Kw(e,t){this.eddsa=e,"object"!=typeof t&&(t=Hw(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),zw(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof Uw&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Vw(Kw,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Vw(Kw,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Vw(Kw,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Vw(Kw,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Kw.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Kw.prototype.toHex=function(){return Fw.encode(this.toBytes(),"hex").toUpperCase()};var qw=Kw,$w=cv,Ww=uv,Gw=Sy,Jw=Gw.assert,Xw=Gw.parseBytes,Yw=Bw,Zw=qw;function Qw(e){if(Jw("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof Qw))return new Qw(e);e=Ww[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=$w.sha512}var e_=Qw;Qw.prototype.sign=function(e,t){e=Xw(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),a=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},Qw.prototype.verify=function(e,t,r){e=Xw(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},Qw.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Gw.intFromLE(e.digest()).umod(this.curve.n)},Qw.prototype.keyFromPublic=function(e){return Yw.fromPublic(this,e)},Qw.prototype.keyFromSecret=function(e){return Yw.fromSecret(this,e)},Qw.prototype.makeSignature=function(e){return e instanceof Zw?e:new Zw(this,e)},Qw.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},Qw.prototype.decodePoint=function(e){var t=(e=Gw.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=Gw.intFromLE(r);return this.curve.pointFromY(i,n)},Qw.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},Qw.prototype.decodeInt=function(e){return Gw.intFromLE(e)},Qw.prototype.isPoint=function(e){return e instanceof this.pointClass},function(e){var t=xy;t.version="6.5.4",t.utils=Sy,t.rand=Iy.exports,t.curve=Py,t.curves=uv,t.ec=Mw,t.eddsa=e_}();const t_=new xy.ec("secp256k1"),r_=Wg,n_=dy,i_=my;class o_ extends r_{fromPrivatePKCS1(e){let t=i_.normalize("ECPrivateKey").decode(e,"der"),{privateKey:r,publicKey:{data:n}}=t,i=n_.convert(n,"raw","hex"),{x:o,y:s}=o_.getPoint(i);return{d:r,x:o,y:s}}fromPrivatePKCS8(e){let t=i_.normalize("PrivateKeyInfo"),r=i_.normalize("ECPrivateKey"),n=t.decode(e,"der"),i=r.decode(n.privateKey,"der"),{privateKey:o,publicKey:{data:s}}=i,a=n_.convert(s,"raw","hex"),{x:u,y:c}=o_.getPoint(a);return{d:o,x:u,y:c}}fromPublicPKCS8(e){let t=i_.normalize("PublicKeyInfo").decode(e,"der"),r=n_.convert(t.publicKey.data,"raw","hex");return o_.getPoint(r)}fromPrivateBlk(e){let t=t_.keyFromPrivate(e,"hex"),r=t.getPublic();return{d:n_.convert(t.priv,"bn","raw"),x:n_.convert(r.getX(),"bn","raw"),y:n_.convert(r.getY(),"bn","raw")}}fromPublicBlk(e){return o_.getPoint(e)}fromJwk(e){let{d:t,x:r,y:n}=e;return{d:n_.convert(t,"base64url","raw"),x:n_.convert(r,"base64url","raw"),y:n_.convert(n,"base64url","raw")}}toPrivatePKCS1(e){let{namedCurve:t,keyVersion:r}=this.params,{d:n,x:i,y:o}=e,s=i_.normalize("ECPrivateKey"),a=o_.makePoint(i,o),u=s.encode({version:r,privateKey:n,parameters:{type:"namedCurve",value:t.split(".")},publicKey:{unused:0,data:a}},"der").toString("base64");return o_.formatPem(u,"EC PRIVATE")}toPrivatePKCS8(e){let{oid:t,algParameters:r,keyVersion:n,infoVersion:i}=this.params,{d:o,x:s,y:a}=e,u=i_.normalize("PrivateKeyInfo"),c=i_.normalize("ECPrivateKey"),l=o_.makePoint(s,a),h=c.encode({version:n,privateKey:o,publicKey:{unused:0,data:l}},"der"),f=u.encode({version:i,algorithm:{algorithm:t.split("."),parameters:Tt.from(r,"hex")},privateKey:h},"der").toString("base64");return o_.formatPem(f,"PRIVATE")}toPublicPKCS8(e){let{oid:t,algParameters:r}=this.params,{x:n,y:i}=e,o=i_.normalize("PublicKeyInfo"),s=o_.makePoint(n,i),a=o.encode({algorithm:{algorithm:t.split("."),parameters:Tt.from(r,"hex")},publicKey:{unused:0,data:s}},"der").toString("base64");return o_.formatPem(a,"PUBLIC")}toPrivateBlk(e){return e.d.toString("hex")}toPublicBlk(e){return n_.convert(o_.makePoint(e.x,e.y),"raw","hex")}toPrivateJwk(e){let{crv:t,kty:r}=this.params,{d:n,x:i,y:o}=e;return{kty:r,crv:t,d:n_.convert(n,"raw","base64url"),x:n_.convert(i,"raw","base64url"),y:n_.convert(o,"raw","base64url")}}toPublicJwk(e){let{crv:t,kty:r}=this.params,{x:n,y:i}=e;return{kty:r,crv:t,x:n_.convert(n,"raw","base64url"),y:n_.convert(i,"raw","base64url")}}static getPoint(e){let t=e.slice(2,(e.length-2)/2+2),r=e.slice((e.length-2)/2+2);return{x:n_.convert(t,"hex","raw"),y:n_.convert(r,"hex","raw")}}static makePoint(e,t){let r=Tt.from("04","hex");return Tt.concat([r,e,t],r.length+e.length+t.length)}}var s_=o_;const a_=Wg,u_=dy,c_=my;class l_ extends a_{fromPrivatePKCS8(e){const t=c_.normalize("PrivateKeyInfo").decode(e,"der").privateKey.slice(2);return{d:t,x:this.publicKeyFromPrivate(t)}}fromPublicPKCS8(e){const t=c_.normalize("PublicKeyInfo").decode(e,"der");return{x:u_.convert(t.publicKey.data,"hex","raw")}}fromJwk(e){let{d:t,x:r}=e;return{d:u_.convert(t,"base64url","raw"),x:u_.convert(r,"base64url","raw")}}toPrivatePKCS8(e){let{oid:t,infoVersion:r}=this.params,{d:n}=e;const i=c_.normalize("PrivateKeyInfo"),o=this.privateKeyPadding(n);let s=i.encode({version:r,algorithm:{algorithm:t.split(".")},privateKey:o},"der").toString("base64");return l_.formatPem(s,"PRIVATE")}toPublicPKCS8(e){let{oid:t}=this.params,{x:r}=e,n=c_.normalize("PublicKeyInfo").encode({algorithm:{algorithm:t.split(".")},publicKey:{unused:0,data:u_.convert(r,"hex","raw")}},"der").toString("base64");return l_.formatPem(n,"PUBLIC")}toPrivateJwk(e){let{crv:t,kty:r}=this.params,{d:n,x:i}=e;return{kty:r,crv:t,d:u_.convert(n,"raw","base64url"),x:u_.convert(i,"raw","base64url")}}toPublicJwk(e){let{crv:t,kty:r}=this.params,{x:n}=e;return{kty:r,crv:t,x:u_.convert(n,"raw","base64url")}}privateKeyPadding(e){let t;if("Ed25519"!==this.params.crv)throw new Error(`${this.params.crv} is an invalid curve for EdDSA`);return t=Tt.from("0420","hex"),Tt.concat([t,e],t.length+e.length)}publicKeyFromPrivate(e){if("Ed25519"===this.params.crv){const t=new xy.eddsa("ed25519");return Tt.from(t.keyFromSecret(e).getPublic())}throw new Error(`${this.params.crv} is an invalid curve for EdDSA`)}}const h_=_y,f_=s_,d_=l_,p_=new class{constructor(){this.registry=[],this.classes={}}find(e){return this.registry.find(e)}define(e,t){e.forEach((e=>{let{kty:r}=e;if(!r)throw new Error("Invalid type definition");this.classes[r]||(this.classes[r]=t),this.registry.push(e)}))}normalize(e,t,r){let n=this.classes[e],i=this.find((e=>e[t]===r));if(!n||!i)throw new Error("Invalid type");return new n(i)}};p_.define([{kty:"RSA",oid:"1.2.840.113549.1.1.1",algParameters:"0500",version:"two-prime"}],h_),p_.define([{kty:"EC",crv:"K-256",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.10",algParameters:"06052b8104000a",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-256",oid:"1.2.840.10045.2.1",namedCurve:"1.2.840.10045.3.1.7",algParameters:"06082a8648ce3d030107",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-384",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.34",algParameters:"06052b81040022",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-521",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.35",algParameters:"06052b81040023",keyVersion:1,infoVersion:"two-prime"}],f_),p_.define([{kty:"OKP",crv:"Ed25519",oid:"1.3.101.112",infoVersion:"two-prime"}],d_);const g_=Hg,m_=qg,y_=p_,v_=my,b_=RegExp("\r?\n","g");class w_{constructor(e,t){if(!e)throw new g_("key is required");if(!t)throw new g_("options are required");let{kty:r,format:n,selector:i,crv:o,oid:s}=t;if(!t.kty)throw new g_("options.kty is required");if(!t.format)throw new g_("options.format is required");if(!t.selector)throw new g_("options.selector is required");if(!t.crv&&!t.oid)throw new g_("options.crv or options.oid is required");this.kty=r,this.format=n,this.selector=i,this.crv=o,this.oid=s,this.key=this.parseKey(e)}static from(e,t){if(!e)throw new g_("key is required");if(!t)throw new g_("format is required");if("jwk"===t){let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new g_("key is not a valid JWK")}else"object"==typeof e&&(r=e);let n,{kty:i,crv:o}=r;if(!i)throw new g_("kty is required for JWK");if("EC"===i&&!o)throw new g_("crv is required for EC JWK");"RSA"===i&&(n=y_.find((e=>e.kty===i)).oid);let s=r.d?"private":"public";return new w_(r,{kty:i,crv:o,oid:n,format:t,selector:s})}if("pem"===t){if("string"!=typeof e)throw new g_("key is not a valid PEM string");let r=e.split(b_),n=r.splice(0,1);r.splice(r.length-1,1);let i,o,s=r.join(""),a=/^-----BEGIN ((RSA|EC) )?(PUBLIC|PRIVATE) KEY-----$/.exec(n),u=a?a[2]:void 0,c=a?a[3]:void 0,l=Tt.from(s,"base64");if(!c)throw new g_("key is not a valid PEM string");if(u){if("RSA"===u)c="PRIVATE"===c?"private_pkcs1":"public_pkcs1",i=y_.find((e=>e.kty===u)).oid;else if("EC"===u){let e;if("PRIVATE"===c){let t=v_.normalize(`${u}PrivateKey`);c="private_pkcs1",e=t.decode(l,"der")}else if("PUBLIC"===c){let t=v_.normalize(`${u}PrivateKey`);c="public_pkcs1",e=t.decode(l,"der")}let{parameters:{value:t}}=e;o=y_.find((e=>e.namedCurve===t.join("."))).crv}}else{let e,t=v_.normalize("PrivateKeyInfo"),r=v_.normalize("PublicKeyInfo");"PRIVATE"===c?(c="private_pkcs8",e=t.decode(l,"der")):"PUBLIC"===c&&(c="public_pkcs8",e=r.decode(l,"der"));let{algorithm:{algorithm:n,parameters:s}}=e;n=n.join("."),s=s?s.toString("hex"):void 0;const a=y_.find((e=>e.oid===n));if(u=a?a.kty:void 0,!u)throw new g_(`${n} is not supported`);"RSA"===u||"OKP"===u?i=n:"EC"===u&&(o=y_.find((e=>e.algParameters===s)).crv)}return new w_(l,{kty:u,oid:i,crv:o,format:t,selector:c})}if("blk"===t)return new w_(e,{kty:"EC",crv:"K-256",format:t,selector:e.length>64?"public":"private"});throw new g_(`Invalid format ${t}`)}get alg(){let{kty:e,crv:t,oid:r}=this;if(!this.algorithm){if(t)Object.defineProperty(this,"algorithm",{value:y_.normalize(e,"crv",t)});else{if(!r)throw new Error("Both crv and oid are undefined");Object.defineProperty(this,"algorithm",{value:y_.normalize(e,"oid",r)})}if(!this.algorithm)throw new Error(`${this.crv||this.oid} is not implemented yet`)}return this.algorithm}parseKey(e){let{alg:t,format:r,selector:n}=this;if("pem"===r)switch(n){case"public_pkcs1":return t.fromPublicPKCS1(e);case"public_pkcs8":return t.fromPublicPKCS8(e);case"private_pkcs1":return t.fromPrivatePKCS1(e);case"private_pkcs8":return t.fromPrivatePKCS8(e);default:throw new Error("Invalid selector value")}if("jwk"===r)return t.fromJwk(e,n);if("blk"===r)switch(n){case"public":return t.fromPublicBlk(e);case"private":return t.fromPrivateBlk(e)}}toJwk(e){let{key:t,alg:r,selector:n}=this;switch(e){case"public":return r.toPublicJwk(t);case"private":if(n.includes("public"))throw new g_("Cannot export a private key from a public key");return r.toPrivateJwk(t);default:throw new Error("Invalid key selector")}}toString(e="pem",t="public_pkcs8"){let{key:r,alg:n,selector:i}=this;if("pem"===e)switch(t){case"public_pkcs1":return n.toPublicPKCS1(r);case"public_pkcs8":return n.toPublicPKCS8(r);case"private_pkcs1":if(i.includes("public"))throw new g_("Cannot export a private key from a public key");return n.toPrivatePKCS1(r);case"private_pkcs8":if(i.includes("public"))throw new g_("Cannot export a private key from a public key");return n.toPrivatePKCS8(r);default:throw new Error("Invalid key selector")}else if("jwk"===e)switch(t){case"public":return JSON.stringify(n.toPublicJwk(r));case"private":if(i.includes("public"))throw new g_("Cannot export a private key from a public key");return JSON.stringify(n.toPrivateJwk(r));default:throw new Error("Invalid key selector")}else if("blk"===e)switch(t){case"private":if(i.includes("public"))throw new g_("Cannot export a private key from a public key");return n.toPrivateBlk(r);case"public":return n.toPublicBlk(r);default:throw new Error("Invalid key selector")}throw new m_}}var __=w_,x_={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */!function(e,t){var r=fr,n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(x_,x_.exports);var S_=x_.exports.Buffer,E_=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return S_.alloc(0);for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*u+1>>>0,c=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=s*c[f]>>>0,c[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,r++}for(var d=o-i;d!==o&&0===c[d];)d++;var p=S_.allocUnsafe(n+(o-d));p.fill(0,0,n);for(var g=n;d!==o;)p[g++]=c[d++];return p}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=S_.from(t)),!S_.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var h=t[i],f=0,d=u-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+s+" character")}}},k_=E_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const I_="Impossible case. Please create issue.",A_="The tweak was out of range or the resulted private key is invalid",T_="The tweak was out of range or equal to zero",P_="Public Key could not be parsed",O_="Public Key serialization error",C_="Signature could not be parsed";function M_(e,t){if(!e)throw new Error(t)}function N_(e,t,r){if(M_(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),void 0!==r)if(Array.isArray(r)){const n=`Expected ${e} to be an Uint8Array with length [${r.join(", ")}]`;M_(r.includes(t.length),n)}else{const n=`Expected ${e} to be an Uint8Array with length ${r}`;M_(t.length===r,n)}}function R_(e){M_("Boolean"===j_(e),"Expected compressed to be a Boolean")}function L_(e=(e=>new Uint8Array(e)),t){return"function"==typeof e&&(e=e(t)),N_("output",e,t),e}function j_(e){return Object.prototype.toString.call(e).slice(8,-1)}const D_=new xy.ec("secp256k1"),B_=D_.curve,U_=B_.n.constructor;function F_(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let r=new U_(t);if(r.cmp(B_.p)>=0)return null;r=r.toRed(B_.red);let n=r.redSqr().redIMul(r).redIAdd(B_.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),D_.keyPair({pub:{x:r,y:n}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){let n=new U_(t),i=new U_(r);if(n.cmp(B_.p)>=0||i.cmp(B_.p)>=0)return null;if(n=n.toRed(B_.red),i=i.toRed(B_.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;const o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(B_.b)).isZero()?D_.keyPair({pub:{x:n,y:i}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function z_(e,t){const r=t.encode(null,33===e.length);for(let t=0;t<e.length;++t)e[t]=r[t]}var V_={contextRandomize:()=>0,privateKeyVerify(e){const t=new U_(e);return t.cmp(B_.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new U_(e),r=B_.n.sub(t).umod(B_.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){const r=new U_(t);if(r.cmp(B_.n)>=0)return 1;if(r.iadd(new U_(e)),r.cmp(B_.n)>=0&&r.isub(B_.n),r.isZero())return 1;const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new U_(t);if(r.cmp(B_.n)>=0||r.isZero())return 1;r.imul(new U_(e)),r.cmp(B_.n)>=0&&(r=r.umod(B_.n));const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify:e=>null===F_(e)?1:0,publicKeyCreate(e,t){const r=new U_(t);return r.cmp(B_.n)>=0||r.isZero()?1:(z_(e,D_.keyFromPrivate(t).getPublic()),0)},publicKeyConvert(e,t){const r=F_(t);return null===r?1:(z_(e,r.getPublic()),0)},publicKeyNegate(e,t){const r=F_(t);if(null===r)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),z_(e,n),0},publicKeyCombine(e,t){const r=new Array(t.length);for(let e=0;e<t.length;++e)if(r[e]=F_(t[e]),null===r[e])return 1;let n=r[0].getPublic();for(let e=1;e<r.length;++e)n=n.add(r[e].pub);return n.isInfinity()?2:(z_(e,n),0)},publicKeyTweakAdd(e,t,r){const n=F_(t);if(null===n)return 1;if((r=new U_(r)).cmp(B_.n)>=0)return 2;const i=n.getPublic().add(B_.g.mul(r));return i.isInfinity()?2:(z_(e,i),0)},publicKeyTweakMul(e,t,r){const n=F_(t);return null===n?1:(r=new U_(r)).cmp(B_.n)>=0||r.isZero()?2:(z_(e,n.getPublic().mul(r)),0)},signatureNormalize(e){const t=new U_(e.subarray(0,32)),r=new U_(e.subarray(32,64));return t.cmp(B_.n)>=0||r.cmp(B_.n)>=0?1:(1===r.cmp(D_.nh)&&e.set(B_.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const r=t.subarray(0,32),n=t.subarray(32,64);if(new U_(r).cmp(B_.n)>=0)return 1;if(new U_(n).cmp(B_.n)>=0)return 1;const{output:i}=e;let o=i.subarray(4,37);o[0]=0,o.set(r,1);let s=33,a=0;for(;s>1&&0===o[a]&&!(128&o[a+1]);--s,++a);if(o=o.subarray(a),128&o[0])return 1;if(s>1&&0===o[0]&&!(128&o[1]))return 1;let u=i.subarray(39,72);u[0]=0,u.set(n,1);let c=33,l=0;for(;c>1&&0===u[l]&&!(128&u[l+1]);--c,++l);return u=u.subarray(l),128&u[0]||c>1&&0===u[0]&&!(128&u[1])?1:(e.outputlen=6+s+c,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=u.length,i.set(u,6+s),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const r=t[3];if(0===r)return 1;if(5+r>=t.length)return 1;if(2!==t[4+r])return 1;const n=t[5+r];if(0===n)return 1;if(6+r+n!==t.length)return 1;if(128&t[4])return 1;if(r>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[r+6])return 1;if(n>1&&0===t[r+6]&&!(128&t[r+7]))return 1;let i=t.subarray(4,4+r);if(33===i.length&&0===i[0]&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(33===o.length&&0===o[0]&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new U_(i);s.cmp(B_.n)>=0&&(s=new U_(0));let a=new U_(t.subarray(6+r));return a.cmp(B_.n)>=0&&(a=new U_(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){const e=i;i=i=>{const o=e(t,r,null,n,i);if(!(o instanceof Uint8Array&&32===o.length))throw new Error("This is the way");return new U_(o)}}const o=new U_(r);if(o.cmp(B_.n)>=0||o.isZero())return 1;let s;try{s=D_.sign(t,r,{canonical:!0,k:i,pers:n})}catch(e){return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,r){const n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new U_(n.r),o=new U_(n.s);if(i.cmp(B_.n)>=0||o.cmp(B_.n)>=0)return 1;if(1===o.cmp(D_.nh)||i.isZero()||o.isZero())return 3;const s=F_(r);if(null===s)return 2;const a=s.getPublic();return D_.verify(t,n,a)?0:3},ecdsaRecover(e,t,r,n){const i={r:t.slice(0,32),s:t.slice(32,64)},o=new U_(i.r),s=new U_(i.s);if(o.cmp(B_.n)>=0||s.cmp(B_.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=D_.recoverPubKey(n,i,r)}catch(e){return 2}return z_(e,a),0},ecdh(e,t,r,n,i,o,s){const a=F_(t);if(null===a)return 1;const u=new U_(r);if(u.cmp(B_.n)>=0||u.isZero())return 2;const c=a.getPublic().mul(u);if(void 0===i){const t=c.encode(null,!0),r=D_.hash().update(t).digest();for(let t=0;t<32;++t)e[t]=r[t]}else{o||(o=new Uint8Array(32));const t=c.getX().toArray("be",32);for(let e=0;e<32;++e)o[e]=t[e];s||(s=new Uint8Array(32));const r=c.getY().toArray("be",32);for(let e=0;e<32;++e)s[e]=r[e];const a=i(o,s,n);if(!(a instanceof Uint8Array&&a.length===e.length))return 2;e.set(a)}return 0}},H_=(e=>({contextRandomize(t){if(M_(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&N_("seed",t,32),1===e.contextRandomize(t))throw new Error("Unknow error on context randomization")},privateKeyVerify:t=>(N_("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(t){switch(N_("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(I_)}},privateKeyTweakAdd(t,r){switch(N_("private key",t,32),N_("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(A_)}},privateKeyTweakMul(t,r){switch(N_("private key",t,32),N_("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(T_)}},publicKeyVerify:t=>(N_("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t,r=!0,n){switch(N_("private key",t,32),R_(r),n=L_(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error("Private Key is invalid");case 2:throw new Error(O_)}},publicKeyConvert(t,r=!0,n){switch(N_("public key",t,[33,65]),R_(r),n=L_(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(P_);case 2:throw new Error(O_)}},publicKeyNegate(t,r=!0,n){switch(N_("public key",t,[33,65]),R_(r),n=L_(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(P_);case 2:throw new Error(I_);case 3:throw new Error(O_)}},publicKeyCombine(t,r=!0,n){M_(Array.isArray(t),"Expected public keys to be an Array"),M_(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)N_("public key",e,[33,65]);switch(R_(r),n=L_(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(P_);case 2:throw new Error("The sum of the public keys is not valid");case 3:throw new Error(O_)}},publicKeyTweakAdd(t,r,n=!0,i){switch(N_("public key",t,[33,65]),N_("tweak",r,32),R_(n),i=L_(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(P_);case 2:throw new Error(A_)}},publicKeyTweakMul(t,r,n=!0,i){switch(N_("public key",t,[33,65]),N_("tweak",r,32),R_(n),i=L_(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(P_);case 2:throw new Error(T_)}},signatureNormalize(t){switch(N_("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(C_)}},signatureExport(t,r){N_("signature",t,64);const n={output:r=L_(r,72),outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(C_);case 2:throw new Error(I_)}},signatureImport(t,r){switch(N_("signature",t),r=L_(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(C_);case 2:throw new Error(I_)}},ecdsaSign(t,r,n={},i){N_("message",t,32),N_("private key",r,32),M_("Object"===j_(n),"Expected options to be an Object"),void 0!==n.data&&N_("options.data",n.data),void 0!==n.noncefn&&M_("Function"===j_(n.noncefn),"Expected options.noncefn to be a Function");const o={signature:i=L_(i,64),recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error("The nonce generation function failed, or the private key was invalid");case 2:throw new Error(I_)}},ecdsaVerify(t,r,n){switch(N_("signature",t,64),N_("message",r,32),N_("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(C_);case 2:throw new Error(P_)}},ecdsaRecover(t,r,n,i=!0,o){switch(N_("signature",t,64),M_("Number"===j_(r)&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),N_("message",n,32),R_(i),o=L_(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(C_);case 2:throw new Error("Public key could not be recover");case 3:throw new Error(I_)}},ecdh(t,r,n={},i){switch(N_("public key",t,[33,65]),N_("private key",r,32),M_("Object"===j_(n),"Expected options to be an Object"),void 0!==n.data&&N_("options.data",n.data),void 0!==n.hashfn?(M_("Function"===j_(n.hashfn),"Expected options.hashfn to be a Function"),void 0!==n.xbuf&&N_("options.xbuf",n.xbuf,32),void 0!==n.ybuf&&N_("options.ybuf",n.ybuf,32),N_("output",i)):i=L_(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(P_);case 2:throw new Error("Scalar was invalid (zero or overflow)")}}}))(V_);const K_="undefined"==typeof Buffer?Tt:Buffer;var q_={},$_={},W_={},G_={},J_={exports:{}},X_={},Y_=ht(ma),Z_=Y_.EventEmitter;function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ex(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tx=fr.Buffer,rx=Kc.inspect,nx=rx&&rx.custom||"inspect";function ix(e,t,r){tx.prototype.copy.call(e,t,r)}var ox=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return tx.alloc(0);for(var t=tx.allocUnsafe(e>>>0),r=this.head,n=0;r;)ix(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=tx.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:nx,value:function(e,t){return rx(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q_(Object(r),!0).forEach((function(t){ex(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function sx(e,t){ux(e,t),ax(e)}function ax(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function ux(e,t){e.emit("error",t)}var cx={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,lo(ux,this,e)):lo(ux,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?lo(ax,r):(r._writableState.errorEmitted=!0,lo(sx,r,e)):lo(sx,r,e):t?(lo(ax,r),t(e)):lo(ax,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}},lx={},hx={};function fx(e,t,r){r||(r=Error);var n=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);n.prototype.name=r.name,n.prototype.code=e,hx[e]=n}function dx(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}fx("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),fx("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(dx(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(dx(t,"type"))}return o+". Received type ".concat(typeof r)}),TypeError),fx("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),fx("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),fx("ERR_STREAM_PREMATURE_CLOSE","Premature close"),fx("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),fx("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),fx("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),fx("ERR_STREAM_WRITE_AFTER_END","write after end"),fx("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),fx("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),fx("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),lx.codes=hx;var px=lx.codes.ERR_INVALID_OPT_VALUE,gx=function(e,t,r,n){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new px(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384},mx={},yx=x_.exports.Buffer,vx=yx.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function bx(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(yx.isEncoding===vx||!vx(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=xx,this.end=Sx,t=4;break;case"utf8":this.fillLast=_x,t=4;break;case"base64":this.text=Ex,this.end=kx,t=3;break;default:return this.write=Ix,void(this.end=Ax)}this.lastNeed=0,this.lastTotal=0,this.lastChar=yx.allocUnsafe(t)}function wx(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function _x(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function xx(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Sx(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Ex(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function kx(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ix(e){return e.toString(this.encoding)}function Ax(e){return e&&e.length?this.write(e):""}mx.StringDecoder=bx,bx.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},bx.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},bx.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=wx(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=wx(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=wx(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},bx.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var Tx=lx.codes.ERR_STREAM_PREMATURE_CLOSE;function Px(){}var Ox,Cx=function e(t,r,n){if("function"==typeof r)return e(t,null,r);r||(r={}),n=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(n||Px);var i=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,s=function(){t.writable||u()},a=t._writableState&&t._writableState.finished,u=function(){o=!1,a=!0,i||n.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){i=!1,c=!0,o||n.call(t)},h=function(e){n.call(t,e)},f=function(){var e;return i&&!c?(t._readableState&&t._readableState.ended||(e=new Tx),n.call(t,e)):o&&!a?(t._writableState&&t._writableState.ended||(e=new Tx),n.call(t,e)):void 0},d=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?d():t.on("request",d)):o&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",u),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",l),t.removeListener("error",h),t.removeListener("close",f)}};function Mx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nx=Cx,Rx=Symbol("lastResolve"),Lx=Symbol("lastReject"),jx=Symbol("error"),Dx=Symbol("ended"),Bx=Symbol("lastPromise"),Ux=Symbol("handlePromise"),Fx=Symbol("stream");function zx(e,t){return{value:e,done:t}}function Vx(e){var t=e[Rx];if(null!==t){var r=e[Fx].read();null!==r&&(e[Bx]=null,e[Rx]=null,e[Lx]=null,t(zx(r,!1)))}}function Hx(e){lo(Vx,e)}var Kx=Object.getPrototypeOf((function(){})),qx=Object.setPrototypeOf((Ox={get stream(){return this[Fx]},next:function(){var e=this,t=this[jx];if(null!==t)return Promise.reject(t);if(this[Dx])return Promise.resolve(zx(void 0,!0));if(this[Fx].destroyed)return new Promise((function(t,r){lo((function(){e[jx]?r(e[jx]):t(zx(void 0,!0))}))}));var r,n=this[Bx];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[Dx]?r(zx(void 0,!0)):t[Ux](r,n)}),n)}}(n,this));else{var i=this[Fx].read();if(null!==i)return Promise.resolve(zx(i,!1));r=new Promise(this[Ux])}return this[Bx]=r,r}},Mx(Ox,Symbol.asyncIterator,(function(){return this})),Mx(Ox,"return",(function(){var e=this;return new Promise((function(t,r){e[Fx].destroy(null,(function(e){e?r(e):t(zx(void 0,!0))}))}))})),Ox),Kx),$x=function(e){var t,r=Object.create(qx,(Mx(t={},Fx,{value:e,writable:!0}),Mx(t,Rx,{value:null,writable:!0}),Mx(t,Lx,{value:null,writable:!0}),Mx(t,jx,{value:null,writable:!0}),Mx(t,Dx,{value:e._readableState.endEmitted,writable:!0}),Mx(t,Ux,{value:function(e,t){var n=r[Fx].read();n?(r[Bx]=null,r[Rx]=null,r[Lx]=null,e(zx(n,!1))):(r[Rx]=e,r[Lx]=t)},writable:!0}),t));return r[Bx]=null,Nx(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[Lx];return null!==t&&(r[Bx]=null,r[Rx]=null,r[Lx]=null,t(e)),void(r[jx]=e)}var n=r[Rx];null!==n&&(r[Bx]=null,r[Rx]=null,r[Lx]=null,n(zx(void 0,!0))),r[Dx]=!0})),e.on("readable",Hx.bind(null,r)),r},Wx=function(){throw new Error("Readable.from is not available in the browser")};const Gx=X_;Gx.Readable=gS,gS.ReadableState=pS,Y_.EventEmitter;var Jx,Xx=function(e,t){return e.listeners(t).length},Yx=Z_,Zx=fr.Buffer,Qx=lt.Uint8Array||function(){},eS=Kc;Jx=eS&&eS.debuglog?eS.debuglog("stream"):function(){};var tS,rS,nS,iS=ox,oS=cx,sS=gx,aS=lx.codes,uS=aS.ERR_INVALID_ARG_TYPE,cS=aS.ERR_STREAM_PUSH_AFTER_EOF,lS=aS.ERR_METHOD_NOT_IMPLEMENTED,hS=aS.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Zg.exports(gS,Yx);var fS=oS.errorOrDestroy,dS=["error","close","destroy","pause","resume"];function pS(e,t,r){e=e||{},"boolean"!=typeof r&&(r=t instanceof Gx.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=sS(this,e,"readableHighWaterMark",r),this.buffer=new iS,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(tS||(tS=mx.StringDecoder),this.decoder=new tS(e.encoding),this.encoding=e.encoding)}function gS(e){if(!(this instanceof gS))return new gS(e);var t=this instanceof Gx.Duplex;this._readableState=new pS(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Yx.call(this)}function mS(e,t,r,n,i){Jx("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(Jx("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?bS(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,wS(e)))}}(e,s);else if(i||(o=function(e,t){var r,n;return n=t,Zx.isBuffer(n)||n instanceof Qx||"string"==typeof t||void 0===t||e.objectMode||(r=new uS("chunk",["string","Buffer","Uint8Array"],t)),r}(s,t)),o)fS(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===Zx.prototype||(t=function(e){return Zx.from(e)}(t)),n)s.endEmitted?fS(e,new hS):yS(e,s,t,!0);else if(s.ended)fS(e,new cS);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?yS(e,s,t,!1):_S(e,s)):yS(e,s,t,!1)}else n||(s.reading=!1,_S(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function yS(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&bS(e)),_S(e,t)}function vS(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function bS(e){var t=e._readableState;Jx("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Jx("emitReadable",t.flowing),t.emittedReadable=!0,lo(wS,e))}function wS(e){var t=e._readableState;Jx("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,IS(e)}function _S(e,t){t.readingMore||(t.readingMore=!0,lo(xS,e,t))}function xS(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(Jx("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function SS(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function ES(e){Jx("readable nexttick read 0"),e.read(0)}function kS(e,t){Jx("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),IS(e),t.flowing&&!t.reading&&e.read(0)}function IS(e){var t=e._readableState;for(Jx("flow",t.flowing);t.flowing&&null!==e.read(););}function AS(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function TS(e){var t=e._readableState;Jx("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,lo(PS,t,e))}function PS(e,t){if(Jx("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function OS(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Object.defineProperty(gS.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),gS.prototype.destroy=oS.destroy,gS.prototype._undestroy=oS.undestroy,gS.prototype._destroy=function(e,t){t(e)},gS.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Zx.from(e,t),t=""),r=!0),mS(this,e,t,!1,r)},gS.prototype.unshift=function(e){return mS(this,e,null,!0,!1)},gS.prototype.isPaused=function(){return!1===this._readableState.flowing},gS.prototype.setEncoding=function(e){tS||(tS=mx.StringDecoder);var t=new tS(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},gS.prototype.read=function(e){Jx("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return Jx("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?TS(this):bS(this),null;if(0===(e=vS(e,t))&&t.ended)return 0===t.length&&TS(this),null;var n,i=t.needReadable;return Jx("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&Jx("length less than watermark",i=!0),t.ended||t.reading?Jx("reading or ended",i=!1):i&&(Jx("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=vS(r,t))),null===(n=e>0?AS(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&TS(this)),null!==n&&this.emit("data",n),n},gS.prototype._read=function(e){fS(this,new lS("_read()"))},gS.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,Jx("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end||e===Eo.stdout||e===Eo.stderr?f:o;function o(){Jx("onend"),e.end()}n.endEmitted?lo(i):r.once("end",i),e.on("unpipe",(function t(i,d){Jx("onunpipe"),i===r&&d&&!1===d.hasUnpiped&&(d.hasUnpiped=!0,Jx("cleanup"),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("drain",s),e.removeListener("error",c),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",f),r.removeListener("data",u),a=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s())}));var s=function(e){return function(){var t=e._readableState;Jx("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&Xx(e,"data")&&(t.flowing=!0,IS(e))}}(r);e.on("drain",s);var a=!1;function u(t){Jx("ondata");var i=e.write(t);Jx("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==OS(n.pipes,e))&&!a&&(Jx("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(t){Jx("onerror",t),f(),e.removeListener("error",c),0===Xx(e,"error")&&fS(e,t)}function l(){e.removeListener("finish",h),f()}function h(){Jx("onfinish"),e.removeListener("close",l),f()}function f(){Jx("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",c),e.once("close",l),e.once("finish",h),e.emit("pipe",r),n.flowing||(Jx("pipe resume"),r.resume()),e},gS.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=OS(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},gS.prototype.on=function(e,t){var r=Yx.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Jx("on readable",n.length,n.reading),n.length?bS(this):n.reading||lo(ES,this))),r},gS.prototype.addListener=gS.prototype.on,gS.prototype.removeListener=function(e,t){var r=Yx.prototype.removeListener.call(this,e,t);return"readable"===e&&lo(SS,this),r},gS.prototype.removeAllListeners=function(e){var t=Yx.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||lo(SS,this),t},gS.prototype.resume=function(){var e=this._readableState;return e.flowing||(Jx("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,lo(kS,e,t))}(this,e)),e.paused=!1,this},gS.prototype.pause=function(){return Jx("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Jx("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},gS.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(Jx("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){Jx("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<dS.length;o++)e.on(dS[o],this.emit.bind(this,dS[o]));return this._read=function(t){Jx("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(gS.prototype[Symbol.asyncIterator]=function(){return void 0===rS&&(rS=$x),rS(this)}),Object.defineProperty(gS.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(gS.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(gS.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),gS._fromList=AS,Object.defineProperty(gS.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(gS.from=function(e,t){return void 0===nS&&(nS=Wx),nS(gS,e,t)});function CS(e){try{if(!lt.localStorage)return!1}catch(e){return!1}var t=lt.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}const MS=X_;function NS(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}MS.Writable=QS,QS.WritableState=ZS;var RS,LS=function(e,t){if(CS("noDeprecation"))return e;var r=!1;return function(){if(!r){if(CS("throwDeprecation"))throw new Error(t);CS("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}},jS=Z_,DS=fr.Buffer,BS=lt.Uint8Array||function(){},US=cx,FS=gx,zS=lx.codes,VS=zS.ERR_INVALID_ARG_TYPE,HS=zS.ERR_METHOD_NOT_IMPLEMENTED,KS=zS.ERR_MULTIPLE_CALLBACK,qS=zS.ERR_STREAM_CANNOT_PIPE,$S=zS.ERR_STREAM_DESTROYED,WS=zS.ERR_STREAM_NULL_VALUES,GS=zS.ERR_STREAM_WRITE_AFTER_END,JS=zS.ERR_UNKNOWN_ENCODING,XS=US.errorOrDestroy;function YS(){}function ZS(e,t,r){e=e||{},"boolean"!=typeof r&&(r=t instanceof MS.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=FS(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new KS;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(lo(i,n),lo(oE,e,t),e._writableState.errorEmitted=!0,XS(e,n)):(i(n),e._writableState.errorEmitted=!0,XS(e,n),oE(e,t))}(e,r,n,t,i);else{var o=nE(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||rE(e,r),n?lo(tE,e,r,o,i):tE(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new NS(this)}function QS(e){var t=this instanceof MS.Duplex;if(!t&&!RS.call(QS,this))return new QS(e);this._writableState=new ZS(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),jS.call(this)}function eE(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new $S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function tE(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),oE(e,t)}function rE(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,eE(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new NS(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback;if(eE(e,t,!1,t.objectMode?1:u.length,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function nE(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function iE(e,t){e._final((function(r){t.pendingcb--,r&&XS(e,r),t.prefinished=!0,e.emit("prefinish"),oE(e,t)}))}function oE(e,t){var r=nE(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,lo(iE,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}Zg.exports(QS,jS),ZS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(ZS.prototype,"buffer",{get:LS((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(RS=Function.prototype[Symbol.hasInstance],Object.defineProperty(QS,Symbol.hasInstance,{value:function(e){return!!RS.call(this,e)||this===QS&&e&&e._writableState instanceof ZS}})):RS=function(e){return e instanceof this},QS.prototype.pipe=function(){XS(this,new qS)},QS.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,DS.isBuffer(n)||n instanceof BS);return s&&!DS.isBuffer(e)&&(e=function(e){return DS.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=YS),i.ending?function(e,t){var r=new GS;XS(e,r),lo(t,r)}(this,r):(s||function(e,t,r,n){var i;return null===r?i=new WS:"string"==typeof r||t.objectMode||(i=new VS("chunk",["string","Buffer"],r)),!i||(XS(e,i),lo(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=DS.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else eE(e,t,!1,a,n,i,o);return u}(this,i,s,e,t,r)),o},QS.prototype.cork=function(){this._writableState.corked++},QS.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||rE(this,e))},QS.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new JS(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(QS.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(QS.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),QS.prototype._write=function(e,t,r){r(new HS("_write()"))},QS.prototype._writev=null,QS.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,oE(e,t),r&&(t.finished?lo(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(QS.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(QS.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),QS.prototype.destroy=US.destroy,QS.prototype._undestroy=US.undestroy,QS.prototype._destroy=function(e,t){t(e)};var sE=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};const aE=X_;aE.Duplex=hE,Zg.exports(hE,aE.Readable);for(var uE=sE(aE.Writable.prototype),cE=0;cE<uE.length;cE++){var lE=uE[cE];hE.prototype[lE]||(hE.prototype[lE]=aE.Writable.prototype[lE])}function hE(e){if(!(this instanceof hE))return new hE(e);aE.Readable.call(this,e),aE.Writable.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",fE)))}function fE(){this._writableState.ended||lo(dE,this)}function dE(e){e.end()}Object.defineProperty(hE.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(hE.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(hE.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(hE.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const pE=X_;pE.Transform=_E;var gE=lx.codes,mE=gE.ERR_METHOD_NOT_IMPLEMENTED,yE=gE.ERR_MULTIPLE_CALLBACK,vE=gE.ERR_TRANSFORM_ALREADY_TRANSFORMING,bE=gE.ERR_TRANSFORM_WITH_LENGTH_0;function wE(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new yE);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function _E(e){if(!(this instanceof _E))return new _E(e);pE.Duplex.call(this,e),this._transformState={afterTransform:wE.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",xE)}function xE(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?SE(this,null,null):this._flush((function(t,r){SE(e,t,r)}))}function SE(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new bE;if(e._transformState.transforming)throw new vE;return e.push(null)}Zg.exports(_E,pE.Duplex),_E.prototype.push=function(e,t){return this._transformState.needTransform=!1,pE.Duplex.prototype.push.call(this,e,t)},_E.prototype._transform=function(e,t,r){r(new mE("_transform()"))},_E.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},_E.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},_E.prototype._destroy=function(e,t){pE.Duplex.prototype._destroy.call(this,e,(function(e){t(e)}))};const EE=X_;function kE(e){if(!(this instanceof kE))return new kE(e);Transform.call(this,e)}var IE;EE.PassThrough=kE,Zg.exports(kE,EE.Transform),kE.prototype._transform=function(e,t,r){r(null,e)};var AE=lx.codes,TE=AE.ERR_MISSING_ARGS,PE=AE.ERR_STREAM_DESTROYED;function OE(e){if(e)throw e}function CE(e,t,r,n){n=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(n);var i=!1;e.on("close",(function(){i=!0})),void 0===IE&&(IE=Cx),IE(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var o=!1;return function(t){if(!i&&!o)return o=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new PE("pipe"))}}function ME(e){e()}function NE(e,t){return e.pipe(t)}function RE(e){return e.length?"function"!=typeof e[e.length-1]?OE:e.pop():OE}var LE=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=RE(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new TE("streams");var o=t.map((function(e,r){var s=r<t.length-1;return CE(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(ME),s||(o.forEach(ME),i(n))}))}));return t.reduce(NE)};!function(e,t){const r=X_;(t=J_.exports=r.Readable).Stream=r.Readable,t.Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.finished=Cx,t.pipeline=LE}(0,J_.exports);var jE=x_.exports.Buffer,DE=J_.exports.Transform;function BE(e){DE.call(this),this._block=jE.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}(0,Zg.exports)(BE,DE),BE.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},BE.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},BE.prototype.update=function(e,t){if(function(e,t){if(!jE.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");jE.isBuffer(e)||(e=jE.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var o=0,s=8*e.length;s>0;++o)this._length[o]+=s,(s=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*s);return this},BE.prototype._update=function(){throw new Error("_update is not implemented")},BE.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},BE.prototype._digest=function(){throw new Error("_digest is not implemented")};var UE=BE,FE=Zg.exports,zE=UE,VE=x_.exports.Buffer,HE=new Array(16);function KE(){zE.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function qE(e,t){return e<<t|e>>>32-t}function $E(e,t,r,n,i,o,s){return qE(e+(t&r|~t&n)+i+o|0,s)+t|0}function WE(e,t,r,n,i,o,s){return qE(e+(t&n|r&~n)+i+o|0,s)+t|0}function GE(e,t,r,n,i,o,s){return qE(e+(t^r^n)+i+o|0,s)+t|0}function JE(e,t,r,n,i,o,s){return qE(e+(r^(t|~n))+i+o|0,s)+t|0}FE(KE,zE),KE.prototype._update=function(){for(var e=HE,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=$E(r,n,i,o,e[0],3614090360,7),o=$E(o,r,n,i,e[1],3905402710,12),i=$E(i,o,r,n,e[2],606105819,17),n=$E(n,i,o,r,e[3],3250441966,22),r=$E(r,n,i,o,e[4],4118548399,7),o=$E(o,r,n,i,e[5],1200080426,12),i=$E(i,o,r,n,e[6],2821735955,17),n=$E(n,i,o,r,e[7],4249261313,22),r=$E(r,n,i,o,e[8],1770035416,7),o=$E(o,r,n,i,e[9],2336552879,12),i=$E(i,o,r,n,e[10],4294925233,17),n=$E(n,i,o,r,e[11],2304563134,22),r=$E(r,n,i,o,e[12],1804603682,7),o=$E(o,r,n,i,e[13],4254626195,12),i=$E(i,o,r,n,e[14],2792965006,17),r=WE(r,n=$E(n,i,o,r,e[15],1236535329,22),i,o,e[1],4129170786,5),o=WE(o,r,n,i,e[6],3225465664,9),i=WE(i,o,r,n,e[11],643717713,14),n=WE(n,i,o,r,e[0],3921069994,20),r=WE(r,n,i,o,e[5],3593408605,5),o=WE(o,r,n,i,e[10],38016083,9),i=WE(i,o,r,n,e[15],3634488961,14),n=WE(n,i,o,r,e[4],3889429448,20),r=WE(r,n,i,o,e[9],568446438,5),o=WE(o,r,n,i,e[14],3275163606,9),i=WE(i,o,r,n,e[3],4107603335,14),n=WE(n,i,o,r,e[8],1163531501,20),r=WE(r,n,i,o,e[13],2850285829,5),o=WE(o,r,n,i,e[2],4243563512,9),i=WE(i,o,r,n,e[7],1735328473,14),r=GE(r,n=WE(n,i,o,r,e[12],2368359562,20),i,o,e[5],4294588738,4),o=GE(o,r,n,i,e[8],2272392833,11),i=GE(i,o,r,n,e[11],1839030562,16),n=GE(n,i,o,r,e[14],4259657740,23),r=GE(r,n,i,o,e[1],2763975236,4),o=GE(o,r,n,i,e[4],1272893353,11),i=GE(i,o,r,n,e[7],4139469664,16),n=GE(n,i,o,r,e[10],3200236656,23),r=GE(r,n,i,o,e[13],681279174,4),o=GE(o,r,n,i,e[0],3936430074,11),i=GE(i,o,r,n,e[3],3572445317,16),n=GE(n,i,o,r,e[6],76029189,23),r=GE(r,n,i,o,e[9],3654602809,4),o=GE(o,r,n,i,e[12],3873151461,11),i=GE(i,o,r,n,e[15],530742520,16),r=JE(r,n=GE(n,i,o,r,e[2],3299628645,23),i,o,e[0],4096336452,6),o=JE(o,r,n,i,e[7],1126891415,10),i=JE(i,o,r,n,e[14],2878612391,15),n=JE(n,i,o,r,e[5],4237533241,21),r=JE(r,n,i,o,e[12],1700485571,6),o=JE(o,r,n,i,e[3],2399980690,10),i=JE(i,o,r,n,e[10],4293915773,15),n=JE(n,i,o,r,e[1],2240044497,21),r=JE(r,n,i,o,e[8],1873313359,6),o=JE(o,r,n,i,e[15],4264355552,10),i=JE(i,o,r,n,e[6],2734768916,15),n=JE(n,i,o,r,e[13],1309151649,21),r=JE(r,n,i,o,e[4],4149444226,6),o=JE(o,r,n,i,e[11],3174756917,10),i=JE(i,o,r,n,e[2],718787259,15),n=JE(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},KE.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=VE.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};var XE=KE,YE=fr.Buffer,ZE=Zg.exports,QE=UE,ek=new Array(16),tk=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rk=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],nk=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ik=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ok=[0,1518500249,1859775393,2400959708,2840853838],sk=[1352829926,1548603684,1836072691,2053994217,0];function ak(){QE.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function uk(e,t){return e<<t|e>>>32-t}function ck(e,t,r,n,i,o,s,a){return uk(e+(t^r^n)+o+s|0,a)+i|0}function lk(e,t,r,n,i,o,s,a){return uk(e+(t&r|~t&n)+o+s|0,a)+i|0}function hk(e,t,r,n,i,o,s,a){return uk(e+((t|~r)^n)+o+s|0,a)+i|0}function fk(e,t,r,n,i,o,s,a){return uk(e+(t&n|r&~n)+o+s|0,a)+i|0}function dk(e,t,r,n,i,o,s,a){return uk(e+(t^(r|~n))+o+s|0,a)+i|0}ZE(ak,QE),ak.prototype._update=function(){for(var e=ek,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._a,u=0|this._b,c=0|this._c,l=0|this._d,h=0|this._e,f=0;f<80;f+=1){var d,p;f<16?(d=ck(r,n,i,o,s,e[tk[f]],ok[0],nk[f]),p=dk(a,u,c,l,h,e[rk[f]],sk[0],ik[f])):f<32?(d=lk(r,n,i,o,s,e[tk[f]],ok[1],nk[f]),p=fk(a,u,c,l,h,e[rk[f]],sk[1],ik[f])):f<48?(d=hk(r,n,i,o,s,e[tk[f]],ok[2],nk[f]),p=hk(a,u,c,l,h,e[rk[f]],sk[2],ik[f])):f<64?(d=fk(r,n,i,o,s,e[tk[f]],ok[3],nk[f]),p=lk(a,u,c,l,h,e[rk[f]],sk[3],ik[f])):(d=dk(r,n,i,o,s,e[tk[f]],ok[4],nk[f]),p=ck(a,u,c,l,h,e[rk[f]],sk[4],ik[f])),r=s,s=o,o=uk(i,10),i=n,n=d,a=h,h=l,l=uk(c,10),c=u,u=p}var g=this._b+i+l|0;this._b=this._c+o+h|0,this._c=this._d+s+a|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=g},ak.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=YE.alloc?YE.alloc(20):new YE(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};var pk=ak,gk={exports:{}},mk=x_.exports.Buffer;function yk(e,t){this._block=mk.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}yk.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=mk.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,o=this._len,s=0;s<i;){for(var a=o%n,u=Math.min(i-s,n-a),c=0;c<u;c++)r[a+c]=e[s+c];s+=u,(o+=u)%n==0&&this._update(r)}return this._len+=i,this},yk.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},yk.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var vk=yk,bk=Zg.exports,wk=vk,_k=x_.exports.Buffer,xk=[1518500249,1859775393,-1894007588,-899497514],Sk=new Array(80);function Ek(){this.init(),this._w=Sk,wk.call(this,64,56)}function kk(e){return e<<30|e>>>2}function Ik(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}bk(Ek,wk),Ek.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Ek.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l=~~(c/20),h=0|((t=n)<<5|t>>>27)+Ik(l,i,o,s)+a+r[c]+xk[l];a=s,s=o,o=kk(i),i=n,n=h}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},Ek.prototype._hash=function(){var e=_k.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var Ak=Ek,Tk=Zg.exports,Pk=vk,Ok=x_.exports.Buffer,Ck=[1518500249,1859775393,-1894007588,-899497514],Mk=new Array(80);function Nk(){this.init(),this._w=Mk,Pk.call(this,64,56)}function Rk(e){return e<<5|e>>>27}function Lk(e){return e<<30|e>>>2}function jk(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}Tk(Nk,Pk),Nk.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Nk.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=(t=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|t>>>31;for(var c=0;c<80;++c){var l=~~(c/20),h=Rk(n)+jk(l,i,o,s)+a+r[c]+Ck[l]|0;a=s,s=o,o=Lk(i),i=n,n=h}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},Nk.prototype._hash=function(){var e=Ok.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var Dk=Nk,Bk=Zg.exports,Uk=vk,Fk=x_.exports.Buffer,zk=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Vk=new Array(64);function Hk(){this.init(),this._w=Vk,Uk.call(this,64,56)}function Kk(e,t,r){return r^e&(t^r)}function qk(e,t,r){return e&t|r&(e|t)}function $k(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function Wk(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function Gk(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function Jk(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}Bk(Hk,Uk),Hk.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Hk.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._f,u=0|this._g,c=0|this._h,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<64;++l)t[l]=Jk(t[l-2])+t[l-7]+Gk(t[l-15])+t[l-16]|0;for(var h=0;h<64;++h){var f=c+Wk(s)+Kk(s,a,u)+zk[h]+t[h]|0,d=$k(r)+qk(r,n,i)|0;c=u,u=a,a=s,s=o+f|0,o=i,i=n,n=r,r=f+d|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=c+this._h|0},Hk.prototype._hash=function(){var e=Fk.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var Xk=Hk,Yk=Zg.exports,Zk=Xk,Qk=vk,eI=x_.exports.Buffer,tI=new Array(64);function rI(){this.init(),this._w=tI,Qk.call(this,64,56)}Yk(rI,Zk),rI.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},rI.prototype._hash=function(){var e=eI.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var nI=rI,iI=Zg.exports,oI=vk,sI=x_.exports.Buffer,aI=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],uI=new Array(160);function cI(){this.init(),this._w=uI,oI.call(this,128,112)}function lI(e,t,r){return r^e&(t^r)}function hI(e,t,r){return e&t|r&(e|t)}function fI(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function dI(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function pI(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function gI(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function mI(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function yI(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function vI(e,t){return e>>>0<t>>>0?1:0}iI(cI,oI),cI.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},cI.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,a=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,h=0|this._bl,f=0|this._cl,d=0|this._dl,p=0|this._el,g=0|this._fl,m=0|this._gl,y=0|this._hl,v=0;v<32;v+=2)t[v]=e.readInt32BE(4*v),t[v+1]=e.readInt32BE(4*v+4);for(;v<160;v+=2){var b=t[v-30],w=t[v-30+1],_=pI(b,w),x=gI(w,b),S=mI(b=t[v-4],w=t[v-4+1]),E=yI(w,b),k=t[v-14],I=t[v-14+1],A=t[v-32],T=t[v-32+1],P=x+I|0,O=_+k+vI(P,x)|0;O=(O=O+S+vI(P=P+E|0,E)|0)+A+vI(P=P+T|0,T)|0,t[v]=O,t[v+1]=P}for(var C=0;C<160;C+=2){O=t[C],P=t[C+1];var M=hI(r,n,i),N=hI(l,h,f),R=fI(r,l),L=fI(l,r),j=dI(s,p),D=dI(p,s),B=aI[C],U=aI[C+1],F=lI(s,a,u),z=lI(p,g,m),V=y+D|0,H=c+j+vI(V,y)|0;H=(H=(H=H+F+vI(V=V+z|0,z)|0)+B+vI(V=V+U|0,U)|0)+O+vI(V=V+P|0,P)|0;var K=L+N|0,q=R+M+vI(K,L)|0;c=u,y=m,u=a,m=g,a=s,g=p,s=o+H+vI(p=d+V|0,d)|0,o=i,d=f,i=n,f=h,n=r,h=l,r=H+q+vI(l=V+K|0,V)|0}this._al=this._al+l|0,this._bl=this._bl+h|0,this._cl=this._cl+f|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+g|0,this._gl=this._gl+m|0,this._hl=this._hl+y|0,this._ah=this._ah+r+vI(this._al,l)|0,this._bh=this._bh+n+vI(this._bl,h)|0,this._ch=this._ch+i+vI(this._cl,f)|0,this._dh=this._dh+o+vI(this._dl,d)|0,this._eh=this._eh+s+vI(this._el,p)|0,this._fh=this._fh+a+vI(this._fl,g)|0,this._gh=this._gh+u+vI(this._gl,m)|0,this._hh=this._hh+c+vI(this._hl,y)|0},cI.prototype._hash=function(){var e=sI.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var bI=cI,wI=Zg.exports,_I=bI,xI=vk,SI=x_.exports.Buffer,EI=new Array(160);function kI(){this.init(),this._w=EI,xI.call(this,128,112)}wI(kI,_I),kI.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},kI.prototype._hash=function(){var e=SI.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var II=kI,AI=gk.exports=function(e){e=e.toLowerCase();var t=AI[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};AI.sha=Ak,AI.sha1=Dk,AI.sha224=nI,AI.sha256=Xk,AI.sha384=II,AI.sha512=bI;var TI=ht(au),PI=ht(Sa),OI=x_.exports.Buffer,CI=TI.Transform,MI=PI.StringDecoder;function NI(e){CI.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}(0,Zg.exports)(NI,CI),NI.prototype.update=function(e,t,r){"string"==typeof e&&(e=OI.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},NI.prototype.setAutoPadding=function(){},NI.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},NI.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},NI.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},NI.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},NI.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},NI.prototype._finalOrDigest=function(e){var t=this.__final()||OI.alloc(0);return e&&(t=this._toString(t,e,!0)),t},NI.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new MI(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var RI=NI,LI=Zg.exports,jI=XE,DI=pk,BI=gk.exports,UI=RI;function FI(e){UI.call(this,"digest"),this._hash=e}LI(FI,UI),FI.prototype._update=function(e){this._hash.update(e)},FI.prototype._final=function(){return this._hash.digest()};var zI=function(e){return"md5"===(e=e.toLowerCase())?new jI:"rmd160"===e||"ripemd160"===e?new DI:new FI(BI(e))},VI=Zg.exports,HI=x_.exports.Buffer,KI=RI,qI=HI.alloc(128);function $I(e,t){KI.call(this,"digest"),"string"==typeof t&&(t=HI.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=HI.concat([t,qI],64));for(var r=this._ipad=HI.allocUnsafe(64),n=this._opad=HI.allocUnsafe(64),i=0;i<64;i++)r[i]=54^t[i],n[i]=92^t[i];this._hash=[r]}VI($I,KI),$I.prototype._update=function(e){this._hash.push(e)},$I.prototype._final=function(){var e=this._alg(HI.concat(this._hash));return this._alg(HI.concat([this._opad,e]))};var WI=$I,GI=XE,JI=Zg.exports,XI=WI,YI=RI,ZI=x_.exports.Buffer,QI=function(e){return(new GI).update(e).digest()},eA=pk,tA=gk.exports,rA=ZI.alloc(128);function nA(e,t){YI.call(this,"digest"),"string"==typeof t&&(t=ZI.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new eA:tA(e)).update(t).digest():t.length<r&&(t=ZI.concat([t,rA],r));for(var n=this._ipad=ZI.allocUnsafe(r),i=this._opad=ZI.allocUnsafe(r),o=0;o<r;o++)n[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new eA:tA(e),this._hash.update(n)}JI(nA,YI),nA.prototype._update=function(e){this._hash.update(e)},nA.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new eA:tA(this._alg)).update(this._opad).update(e).digest()};var iA=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new nA("rmd160",t):"md5"===e?new XI(QI,t):new nA(e,t)};Object.defineProperty(G_,"__esModule",{value:!0});const oA=zI,sA=iA;G_.hash160=function(e){const t=oA("sha256").update(e).digest();try{return oA("rmd160").update(t).digest()}catch(e){return oA("ripemd160").update(t).digest()}},G_.hmacSHA512=function(e,t){return sA("sha512",e).update(t).digest()};var aA=k_,uA=x_.exports.Buffer,cA=zI,lA=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return aA.encode(uA.concat([t,r],t.length+4))},decode:function(e){var r=t(aA.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=aA.decodeUnsafe(e);if(r)return t(r)}}}((function(e){var t=cA("sha256").update(e).digest();return cA("sha256").update(t).digest()}));const hA=iA,fA=Tt.alloc(1,1),dA=Tt.alloc(1,0);const pA=Jg.exports,gA=new xy.ec("secp256k1"),mA=function(e,t,r,n,i){let o=Tt.alloc(32,0),s=Tt.alloc(32,1);o=hA("sha256",o).update(s).update(dA).update(t).update(e).update(i||"").digest(),s=hA("sha256",o).update(s).digest(),o=hA("sha256",o).update(s).update(fA).update(t).update(e).update(i||"").digest(),s=hA("sha256",o).update(s).digest(),s=hA("sha256",o).update(s).digest();let a=s;for(;!n(a)||!r(a);)o=hA("sha256",o).update(s).update(dA).digest(),s=hA("sha256",o).update(s).digest(),s=hA("sha256",o).update(s).digest(),a=s;return a},yA=Tt.alloc(32,0),vA=Tt.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),bA=Tt.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),wA=gA.curve.n,_A=wA.shrn(1),xA=gA.curve.g;function SA(e){return lr(e)&&32===e.length}function EA(e){return!!SA(e)&&e.compare(vA)<0}function kA(e){if(!lr(e))return!1;if(e.length<33)return!1;const t=e[0],r=e.slice(1,33);if(0===r.compare(yA))return!1;if(r.compare(bA)>=0)return!1;if((2===t||3===t)&&33===e.length){try{CA(e)}catch(e){return!1}return!0}const n=e.slice(33);return 0!==n.compare(yA)&&!(n.compare(bA)>=0)&&4===t&&65===e.length}function IA(e){return 4!==e[0]}function AA(e){return!!SA(e)&&e.compare(yA)>0&&e.compare(vA)<0}function TA(e,t){return void 0===e&&void 0!==t?IA(t):void 0===e||e}function PA(e){return new pA(e)}function OA(e){return e.toArrayLike(Tt,"be",32)}function CA(e){return gA.curve.decodePoint(e)}function MA(e,t){return Tt.from(e._encode(t))}function NA(e,t,r){if(!SA(e))throw new TypeError("Expected Hash");if(!AA(t))throw new TypeError("Expected Private");if(void 0!==r&&!SA(r))throw new TypeError("Expected Extra Data (32 bytes)");const n=PA(t),i=PA(e);let o,s;mA(e,t,(function(e){const t=PA(e),r=xA.mul(t);return!r.isInfinity()&&(o=r.x.umod(wA),0!==o.isZero()&&(s=t.invm(wA).mul(i.add(n.mul(o))).umod(wA),0!==s.isZero()))}),AA,r),s.cmp(_A)>0&&(s=wA.sub(s));const a=Tt.allocUnsafe(64);return OA(o).copy(a,0),OA(s).copy(a,32),a}var RA={isPoint:kA,isPointCompressed:function(e){return!!kA(e)&&IA(e)},isPrivate:AA,pointAdd:function(e,t,r){if(!kA(e))throw new TypeError("Expected Point");if(!kA(t))throw new TypeError("Expected Point");const n=CA(e),i=CA(t),o=n.add(i);return o.isInfinity()?null:MA(o,TA(r,e))},pointAddScalar:function(e,t,r){if(!kA(e))throw new TypeError("Expected Point");if(!EA(t))throw new TypeError("Expected Tweak");const n=TA(r,e),i=CA(e);if(0===t.compare(yA))return MA(i,n);const o=PA(t),s=xA.mul(o),a=i.add(s);return a.isInfinity()?null:MA(a,n)},pointCompress:function(e,t){if(!kA(e))throw new TypeError("Expected Point");const r=CA(e);if(r.isInfinity())throw new TypeError("Expected Point");return MA(r,TA(t,e))},pointFromScalar:function(e,t){if(!AA(e))throw new TypeError("Expected Private");const r=PA(e),n=xA.mul(r);return n.isInfinity()?null:MA(n,TA(t))},pointMultiply:function(e,t,r){if(!kA(e))throw new TypeError("Expected Point");if(!EA(t))throw new TypeError("Expected Tweak");const n=TA(r,e),i=CA(e),o=PA(t),s=i.mul(o);return s.isInfinity()?null:MA(s,n)},privateAdd:function(e,t){if(!AA(e))throw new TypeError("Expected Private");if(!EA(t))throw new TypeError("Expected Tweak");const r=PA(e),n=PA(t),i=OA(r.add(n).umod(wA));return AA(i)?i:null},privateSub:function(e,t){if(!AA(e))throw new TypeError("Expected Private");if(!EA(t))throw new TypeError("Expected Tweak");const r=PA(e),n=PA(t),i=OA(r.sub(n).umod(wA));return AA(i)?i:null},sign:function(e,t){return NA(e,t)},signWithEntropy:function(e,t,r){return NA(e,t,r)},verify:function(e,t,r,n){if(!SA(e))throw new TypeError("Expected Hash");if(!kA(t))throw new TypeError("Expected Point");if(!function(e){const t=e.slice(0,32),r=e.slice(32,64);return lr(e)&&64===e.length&&t.compare(vA)<0&&r.compare(vA)<0}(r))throw new TypeError("Expected Signature");const i=CA(t),o=PA(r.slice(0,32)),s=PA(r.slice(32,64));if(n&&s.cmp(_A)>0)return!1;if(o.gtn(0)<=0)return!1;if(s.gtn(0)<=0)return!1;const a=PA(e),u=s.invm(wA),c=a.mul(u).umod(wA),l=o.mul(u).umod(wA),h=xA.mulAdd(c,i,l);return!h.isInfinity()&&h.x.umod(wA).eq(o)}},LA={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var jA in LA.Null=LA.Nil,LA)LA[jA].toJSON=function(e){return e}.bind(null,jA);var DA=LA,BA=DA;function UA(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function FA(e){return BA.Nil(e)?"":UA(e.constructor)}function zA(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function VA(e){return BA.Function(e)?e.toJSON?e.toJSON():UA(e):BA.Array(e)?"Array":e&&BA.Object(e)?"Object":void 0!==e?e:""}function HA(e,t,r){var n=function(e){return BA.Function(e)?"":BA.String(e)?JSON.stringify(e):e&&BA.Object(e)?"":e}(t);return"Expected "+VA(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function KA(e,t,r){r=r||FA(t),this.message=HA(e,t,r),zA(this,KA),this.__type=e,this.__value=t,this.__valueTypeName=r}function qA(e,t,r,n,i){e?(i=i||FA(n),this.message=function(e,t,r,n,i){var o='" of type ';return"key"===t&&(o='" with key type '),HA('property "'+VA(r)+o+VA(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',zA(this,KA),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}KA.prototype=Object.create(Error.prototype),KA.prototype.constructor=KA,qA.prototype=Object.create(Error.prototype),qA.prototype.constructor=KA;var $A={TfTypeError:KA,TfPropertyTypeError:qA,tfCustomError:function(e,t){return new KA(e,{},t)},tfSubError:function(e,t,r){return e instanceof qA?(t=t+"."+e.__property,e=new qA(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof KA&&(e=new qA(e.__type,t,r,e.__value,e.__valueTypeName)),zA(e),e},tfJSON:VA,getValueTypeName:FA},WA=DA,GA=$A;function JA(e){return lr(e)}function XA(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function YA(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw GA.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var ZA=YA.bind(null,WA.Array),QA=YA.bind(null,JA),eT=YA.bind(null,XA),tT=YA.bind(null,WA.String),rT=Math.pow(2,53)-1,nT={ArrayN:ZA,Buffer:JA,BufferN:QA,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:XA,HexN:eT,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-rT&&e<=rT&&Math.floor(e)===e},Range:function(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||WA.Number,n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n},StringN:tT,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=rT&&Math.floor(e)===e}};for(var iT in nT)nT[iT].toJSON=function(e){return e}.bind(null,iT);var oT=nT,sT=DA,aT=$A.tfJSON,uT=$A.TfTypeError,cT=$A.TfPropertyTypeError,lT=$A.tfSubError,hT=$A.getValueTypeName,fT={arrayOf:function(e,t){function r(r,n){return!!sT.Array(r)&&!sT.Nil(r)&&!(void 0!==t.minLength&&r.length<t.minLength)&&!(void 0!==t.maxLength&&r.length>t.maxLength)&&(void 0===t.length||r.length===t.length)&&r.every((function(t,r){try{return pT(e,t,n)}catch(e){throw lT(e,r)}}))}return e=dT(e),t=t||{},r.toJSON=function(){var r="["+aT(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return sT.Nil(r)||t(r,n,e)}return t=dT(t),r.toJSON=function(){return"?"+aT(t)},r},map:function(e,t){function r(r,n){if(!sT.Object(r))return!1;if(sT.Nil(r))return!1;for(var i in r){try{t&&pT(t,i,n)}catch(e){throw lT(e,i,"key")}try{var o=r[i];pT(e,o,n)}catch(e){throw lT(e,i)}}return!0}return e=dT(e),t&&(t=dT(t)),r.toJSON=t?function(){return"{"+aT(t)+": "+aT(e)+"}"}:function(){return"{"+aT(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=dT(e[r]);function n(e,r){if(!sT.Object(e))return!1;if(sT.Nil(e))return!1;var n;try{for(n in t)pT(t[n],e[n],r)}catch(e){throw lT(e,n)}if(r)for(n in e)if(!t[n])throw new cT(void 0,n);return!0}return n.toJSON=function(){return aT(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(dT);function t(t,r){return e.some((function(e){try{return pT(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(aT).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(dT);function t(t,r){return e.every((function(e){try{return pT(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(aT).join(" & ")},t},quacksLike:function(e){function t(t){return e===hT(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(dT);function t(t,r){return!sT.Nil(t)&&!sT.Nil(t.length)&&(!r||t.length===e.length)&&e.every((function(e,n){try{return pT(e,t[n],r)}catch(e){throw lT(e,n)}}))}return t.toJSON=function(){return"("+e.map(aT).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function dT(e){if(sT.String(e))return"?"===e[0]?fT.maybe(e.slice(1)):sT[e]||fT.quacksLike(e);if(e&&sT.Object(e)){if(sT.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return fT.arrayOf(e[0])}return fT.object(e)}return sT.Function(e)?e:fT.value(e)}function pT(e,t,r,n){if(sT.Function(e)){if(e(t,r))return!0;throw new uT(n||e,t)}return pT(dT(e),t,r)}for(var gT in fT.oneOf=fT.anyOf,sT)pT[gT]=sT[gT];for(gT in fT)pT[gT]=fT[gT];var mT=oT;for(gT in mT)pT[gT]=mT[gT];pT.compile=dT,pT.TfTypeError=uT,pT.TfPropertyTypeError=cT;var yT=pT,vT=lA;function bT(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function wT(e,t,r){var n=new Tt(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}var _T={decode:function(e,t){return bT(vT.decode(e),t)},decodeRaw:bT,encode:function(e,t,r){return"number"==typeof e?vT.encode(wT(e,t,r)):vT.encode(wT(e.version,e.privateKey,e.compressed))},encodeRaw:wT};Object.defineProperty(W_,"__esModule",{value:!0});const xT=G_,ST=lA,ET=RA,kT=yT,IT=_T,AT=kT.BufferN(32),TT=kT.compile({wif:kT.UInt8,bip32:{public:kT.UInt32,private:kT.UInt32}}),PT={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},OT=Math.pow(2,31)-1;function CT(e){return kT.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function MT(e){return kT.UInt32(e)&&e<=OT}class NT{constructor(e,t,r,n,i=0,o=0,s=0){this.__D=e,this.__Q=t,this.chainCode=r,this.network=n,this.__DEPTH=i,this.__INDEX=o,this.__PARENT_FINGERPRINT=s,kT(TT,n),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=ET.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return xT.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return jT(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=Tt.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),ST.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return IT.encode(this.network.wif,this.privateKey,!0)}derive(e){kT(kT.UInt32,e);const t=e>=2147483648,r=Tt.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);const n=xT.hmacSHA512(this.chainCode,r),i=n.slice(0,32),o=n.slice(32);if(!ET.isPrivate(i))return this.derive(e+1);let s;if(this.isNeutered()){const t=ET.pointAddScalar(this.publicKey,i,!0);if(null===t)return this.derive(e+1);s=jT(t,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{const t=ET.privateAdd(this.privateKey,i);if(null==t)return this.derive(e+1);s=LT(t,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return s}deriveHardened(e){return kT(MT,e),this.derive(e+2147483648)}derivePath(e){kT(CT,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce(((e,t)=>{let r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}sign(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return ET.sign(e,this.privateKey);{let t=ET.sign(e,this.privateKey);const r=Tt.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=ET.signWithEntropy(e,this.privateKey,r);return t}}verify(e,t){return ET.verify(e,this.publicKey,t)}}function RT(e,t,r){return LT(e,t,r)}function LT(e,t,r,n,i,o){if(kT({privateKey:AT,chainCode:AT},{privateKey:e,chainCode:t}),r=r||PT,!ET.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new NT(e,void 0,t,r,n,i,o)}function jT(e,t,r,n,i,o){if(kT({publicKey:kT.BufferN(33),chainCode:AT},{publicKey:e,chainCode:t}),r=r||PT,!ET.isPoint(e))throw new TypeError("Point is not on the curve");return new NT(void 0,e,t,r,n,i,o)}W_.fromBase58=function(e,t){const r=ST.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||PT;const n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");const i=r[4],o=r.readUInt32BE(5);if(0===i&&0!==o)throw new TypeError("Invalid parent fingerprint");const s=r.readUInt32BE(9);if(0===i&&0!==s)throw new TypeError("Invalid index");const a=r.slice(13,45);let u;if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");u=LT(r.slice(46,78),a,t,i,s,o)}else u=jT(r.slice(45,78),a,t,i,s,o);return u},W_.fromPrivateKey=RT,W_.fromPublicKey=function(e,t,r){return jT(e,t,r)},W_.fromSeed=function(e,t){if(kT(kT.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||PT;const r=xT.hmacSHA512(Tt.from("Bitcoin seed","utf8"),e);return RT(r.slice(0,32),r.slice(32),t)},Object.defineProperty($_,"__esModule",{value:!0});var DT=W_;$_.fromSeed=DT.fromSeed,$_.fromBase58=DT.fromBase58,$_.fromPublicKey=DT.fromPublicKey,$_.fromPrivateKey=DT.fromPrivateKey;var BT={},UT={};Object.defineProperty(UT,"__esModule",{value:!0}),UT.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},UT.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},UT.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};var FT={},zT={},VT={},HT={};Object.defineProperty(HT,"__esModule",{value:!0}),HT.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},HT.encode=function(e){let t=Math.abs(e);const r=(n=t)>2147483647?5:n>8388607?4:n>32767?3:n>127?2:n>0?1:0;var n;const i=Tt.allocUnsafe(r),o=e<0;for(let e=0;e<r;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[r-1]?i.writeUInt8(o?128:0,r-1):o&&(i[r-1]|=128),i};var KT={},qT={};Object.defineProperty(qT,"__esModule",{value:!0});const $T=yT,WT=Math.pow(2,31)-1;function GT(e){return $T.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}qT.UInt31=function(e){return $T.UInt32(e)&&e<=WT},qT.BIP32Path=GT,GT.toJSON=()=>"BIP32 derivation path",qT.Signer=function(e){return($T.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign},qT.Satoshi=function(e){return $T.UInt53(e)&&e<=21e14},qT.ECPoint=$T.quacksLike("Point"),qT.Network=$T.compile({messagePrefix:$T.oneOf($T.Buffer,$T.String),bip32:{public:$T.UInt32,private:$T.UInt32},pubKeyHash:$T.UInt8,scriptHash:$T.UInt8,wif:$T.UInt8}),qT.Buffer256bit=$T.BufferN(32),qT.Hash160bit=$T.BufferN(20),qT.Hash256bit=$T.BufferN(32),qT.Number=$T.Number,qT.Array=$T.Array,qT.Boolean=$T.Boolean,qT.String=$T.String,qT.Buffer=$T.Buffer,qT.Hex=$T.Hex,qT.maybe=$T.maybe,qT.tuple=$T.tuple,qT.UInt8=$T.UInt8,qT.UInt32=$T.UInt32,qT.Function=$T.Function,qT.BufferN=$T.BufferN,qT.Null=$T.Null,qT.oneOf=$T.oneOf;var JT=x_.exports.Buffer,XT={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=JT.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}};Object.defineProperty(KT,"__esModule",{value:!0});const YT=qT,ZT=XT,QT=yT,eP=Tt.alloc(1,0);function tP(e){let t=0;for(;0===e[t];)++t;return t===e.length?eP:128&(e=e.slice(t))[0]?Tt.concat([eP,e],1+e.length):e}function rP(e){0===e[0]&&(e=e.slice(1));const t=Tt.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}KT.decode=function(e){const t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const n=ZT.decode(e.slice(0,-1)),i=rP(n.r),o=rP(n.s);return{signature:Tt.concat([i,o],64),hashType:t}},KT.encode=function(e,t){QT({signature:YT.BufferN(64),hashType:YT.UInt8},{signature:e,hashType:t});const r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const n=Tt.allocUnsafe(1);n.writeUInt8(t,0);const i=tP(e.slice(0,32)),o=tP(e.slice(32,64));return Tt.concat([ZT.encode(i,o),n])};var nP={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},iP=nP;function oP(e){return e<iP.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}var sP={encodingLength:oP,encode:function(e,t,r){var n=oP(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(iP.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(iP.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(iP.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n},decode:function(e,t){var r,n,i=e.readUInt8(t);if(i<iP.OP_PUSHDATA1)r=i,n=1;else if(i===iP.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===iP.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==iP.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}},aP=nP,uP={};for(var cP in aP)uP[aP[cP]]=cP;var lP=uP;!function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=HT,r=KT,n=qT,i=XT,o=RA,s=sP,a=yT;e.OPS=nP;const u=lP,c=e.OPS.OP_RESERVED;function l(t){return n.Buffer(t)||function(t){return n.Number(t)&&(t===e.OPS.OP_0||t>=e.OPS.OP_1&&t<=e.OPS.OP_16||t===e.OPS.OP_1NEGATE)}(t)}function h(e){return n.Array(e)&&e.every(l)}function f(t){return 0===t.length?e.OPS.OP_0:1===t.length?t[0]>=1&&t[0]<=16?c+t[0]:129===t[0]?e.OPS.OP_1NEGATE:void 0:void 0}function d(e){return lr(e)}function p(e){return lr(e)}function g(e){if(d(e))return e;a(n.Array,e);const t=e.reduce(((e,t)=>p(t)?1===t.length&&void 0!==f(t)?e+1:e+s.encodingLength(t.length)+t.length:e+1),0),r=Tt.allocUnsafe(t);let i=0;if(e.forEach((e=>{if(p(e)){const t=f(e);if(void 0!==t)return r.writeUInt8(t,i),void(i+=1);i+=s.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1})),i!==r.length)throw new Error("Could not decode chunks");return r}function m(t){if(r=t,n.Array(r))return t;var r;a(n.Buffer,t);const i=[];let o=0;for(;o<t.length;){const r=t[o];if(r>e.OPS.OP_0&&r<=e.OPS.OP_PUSHDATA4){const e=s.decode(t,o);if(null===e)return null;if(o+=e.size,o+e.number>t.length)return null;const r=t.slice(o,o+e.number);o+=e.number;const n=f(r);void 0!==n?i.push(n):i.push(r)}else i.push(r),o+=1}return i}function y(e){const t=-129&e;return t>0&&t<4}e.isPushOnly=h,e.compile=g,e.decompile=m,e.toASM=function(e){return d(e)&&(e=m(e)),e.map((e=>{if(p(e)){const t=f(e);if(void 0===t)return e.toString("hex");e=t}return u[e]})).join(" ")},e.fromASM=function(t){return a(n.String,t),g(t.split(" ").map((t=>void 0!==e.OPS[t]?e.OPS[t]:(a(n.Hex,t),Tt.from(t,"hex")))))},e.toStack=function(r){return r=m(r),a(h,r),r.map((r=>p(r)?r:r===e.OPS.OP_0?Tt.allocUnsafe(0):t.encode(r-c)))},e.isCanonicalPubKey=function(e){return o.isPoint(e)},e.isDefinedHashType=y,e.isCanonicalScriptSignature=function(e){return!!lr(e)&&!!y(e[e.length-1])&&i.check(e.slice(0,-1))},e.number=t,e.signature=r}(VT);var hP={};Object.defineProperty(hP,"__esModule",{value:!0}),hP.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},hP.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)},Object.defineProperty(zT,"__esModule",{value:!0});const fP=UT,dP=VT,pP=hP,gP=yT,mP=dP.OPS;zT.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),gP({network:gP.maybe(gP.Object),output:gP.maybe(gP.Buffer),data:gP.maybe(gP.arrayOf(gP.Buffer))},e);const r={name:"embed",network:e.network||fP.bitcoin};if(pP.prop(r,"output",(()=>{if(e.data)return dP.compile([mP.OP_RETURN].concat(e.data))})),pP.prop(r,"data",(()=>{if(e.output)return dP.decompile(e.output).slice(1)})),t.validate&&e.output){const t=dP.decompile(e.output);if(t[0]!==mP.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(gP.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)};var yP={};Object.defineProperty(yP,"__esModule",{value:!0});const vP=UT,bP=VT,wP=hP,_P=bP.OPS,xP=yT,SP=RA,EP=_P.OP_RESERVED;function kP(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}yP.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function r(e){return bP.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===_P.OP_0)}t=Object.assign({validate:!0},t||{}),xP({network:xP.maybe(xP.Object),m:xP.maybe(xP.Number),n:xP.maybe(xP.Number),output:xP.maybe(xP.Buffer),pubkeys:xP.maybe(xP.arrayOf(SP.isPoint)),signatures:xP.maybe(xP.arrayOf(r)),input:xP.maybe(xP.Buffer)},e);const n={network:e.network||vP.bitcoin};let i=[],o=!1;function s(e){o||(o=!0,i=bP.decompile(e),n.m=i[0]-EP,n.n=i[i.length-2]-EP,n.pubkeys=i.slice(1,-2))}if(wP.prop(n,"output",(()=>{if(e.m&&n.n&&e.pubkeys)return bP.compile([].concat(EP+e.m,e.pubkeys,EP+n.n,_P.OP_CHECKMULTISIG))})),wP.prop(n,"m",(()=>{if(n.output)return s(n.output),n.m})),wP.prop(n,"n",(()=>{if(n.pubkeys)return n.pubkeys.length})),wP.prop(n,"pubkeys",(()=>{if(e.output)return s(e.output),n.pubkeys})),wP.prop(n,"signatures",(()=>{if(e.input)return bP.decompile(e.input).slice(1)})),wP.prop(n,"input",(()=>{if(e.signatures)return bP.compile([_P.OP_0].concat(e.signatures))})),wP.prop(n,"witness",(()=>{if(n.input)return[]})),wP.prop(n,"name",(()=>{if(n.m&&n.n)return`p2ms(${n.m} of ${n.n})`})),t.validate){if(e.output){if(s(e.output),!xP.Number(i[0]))throw new TypeError("Output is invalid");if(!xP.Number(i[i.length-2]))throw new TypeError("Output is invalid");if(i[i.length-1]!==_P.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(n.m<=0||n.n>16||n.m>n.n||n.n!==i.length-3)throw new TypeError("Output is invalid");if(!n.pubkeys.every((e=>SP.isPoint(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==n.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==n.n)throw new TypeError("n mismatch");if(e.pubkeys&&!kP(e.pubkeys,n.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(n.n=e.pubkeys.length,n.n<n.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<n.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>n.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==_P.OP_0)throw new TypeError("Input is invalid");if(0===n.signatures.length||!n.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!kP(e.signatures,n.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(n,e)};var IP={};Object.defineProperty(IP,"__esModule",{value:!0});const AP=UT,TP=VT,PP=hP,OP=yT,CP=TP.OPS,MP=RA;IP.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),OP({network:OP.maybe(OP.Object),output:OP.maybe(OP.Buffer),pubkey:OP.maybe(MP.isPoint),signature:OP.maybe(TP.isCanonicalScriptSignature),input:OP.maybe(OP.Buffer)},e);const r=PP.value((()=>TP.decompile(e.input))),n={name:"p2pk",network:e.network||AP.bitcoin};if(PP.prop(n,"output",(()=>{if(e.pubkey)return TP.compile([e.pubkey,CP.OP_CHECKSIG])})),PP.prop(n,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),PP.prop(n,"signature",(()=>{if(e.input)return r()[0]})),PP.prop(n,"input",(()=>{if(e.signature)return TP.compile([e.signature])})),PP.prop(n,"witness",(()=>{if(n.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==CP.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!MP.isPoint(n.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(n.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(n.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!TP.isCanonicalScriptSignature(n.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(n,e)};var NP={},RP={};Object.defineProperty(RP,"__esModule",{value:!0});const LP=zI;function jP(e){try{return LP("rmd160").update(e).digest()}catch(t){return LP("ripemd160").update(e).digest()}}function DP(e){return LP("sha256").update(e).digest()}RP.ripemd160=jP,RP.sha1=function(e){return LP("sha1").update(e).digest()},RP.sha256=DP,RP.hash160=function(e){return jP(DP(e))},RP.hash256=function(e){return DP(DP(e))},Object.defineProperty(NP,"__esModule",{value:!0});const BP=RP,UP=UT,FP=VT,zP=hP,VP=yT,HP=FP.OPS,KP=RA,qP=lA;NP.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),VP({network:VP.maybe(VP.Object),address:VP.maybe(VP.String),hash:VP.maybe(VP.BufferN(20)),output:VP.maybe(VP.BufferN(25)),pubkey:VP.maybe(KP.isPoint),signature:VP.maybe(FP.isCanonicalScriptSignature),input:VP.maybe(VP.Buffer)},e);const r=zP.value((()=>{const t=qP.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),n=zP.value((()=>FP.decompile(e.input))),i=e.network||UP.bitcoin,o={name:"p2pkh",network:i};if(zP.prop(o,"address",(()=>{if(!o.hash)return;const e=Tt.allocUnsafe(21);return e.writeUInt8(i.pubKeyHash,0),o.hash.copy(e,1),qP.encode(e)})),zP.prop(o,"hash",(()=>e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||o.pubkey?BP.hash160(e.pubkey||o.pubkey):void 0)),zP.prop(o,"output",(()=>{if(o.hash)return FP.compile([HP.OP_DUP,HP.OP_HASH160,o.hash,HP.OP_EQUALVERIFY,HP.OP_CHECKSIG])})),zP.prop(o,"pubkey",(()=>{if(e.input)return n()[1]})),zP.prop(o,"signature",(()=>{if(e.input)return n()[0]})),zP.prop(o,"input",(()=>{if(e.pubkey&&e.signature)return FP.compile([e.signature,e.pubkey])})),zP.prop(o,"witness",(()=>{if(o.input)return[]})),t.validate){let t=Tt.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");t=r().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==HP.OP_DUP||e.output[1]!==HP.OP_HASH160||20!==e.output[2]||e.output[23]!==HP.OP_EQUALVERIFY||e.output[24]!==HP.OP_CHECKSIG)throw new TypeError("Output is invalid");const r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.pubkey){const r=BP.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=n();if(2!==r.length)throw new TypeError("Input is invalid");if(!FP.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!KP.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const i=BP.hash160(r[1]);if(t.length>0&&!t.equals(i))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)};var $P={};Object.defineProperty($P,"__esModule",{value:!0});const WP=RP,GP=UT,JP=VT,XP=hP,YP=yT,ZP=JP.OPS,QP=lA;$P.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),YP({network:YP.maybe(YP.Object),address:YP.maybe(YP.String),hash:YP.maybe(YP.BufferN(20)),output:YP.maybe(YP.BufferN(23)),redeem:YP.maybe({network:YP.maybe(YP.Object),output:YP.maybe(YP.Buffer),input:YP.maybe(YP.Buffer),witness:YP.maybe(YP.arrayOf(YP.Buffer))}),input:YP.maybe(YP.Buffer),witness:YP.maybe(YP.arrayOf(YP.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||GP.bitcoin);const n={network:r},i=XP.value((()=>{const t=QP.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),o=XP.value((()=>JP.decompile(e.input))),s=XP.value((()=>{const t=o();return{network:r,output:t[t.length-1],input:JP.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(XP.prop(n,"address",(()=>{if(!n.hash)return;const e=Tt.allocUnsafe(21);return e.writeUInt8(n.network.scriptHash,0),n.hash.copy(e,1),QP.encode(e)})),XP.prop(n,"hash",(()=>e.output?e.output.slice(2,22):e.address?i().hash:n.redeem&&n.redeem.output?WP.hash160(n.redeem.output):void 0)),XP.prop(n,"output",(()=>{if(n.hash)return JP.compile([ZP.OP_HASH160,n.hash,ZP.OP_EQUAL])})),XP.prop(n,"redeem",(()=>{if(e.input)return s()})),XP.prop(n,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return JP.compile([].concat(JP.decompile(e.redeem.input),e.redeem.output))})),XP.prop(n,"witness",(()=>n.redeem&&n.redeem.witness?n.redeem.witness:n.input?[]:void 0)),XP.prop(n,"name",(()=>{const e=["p2sh"];return void 0!==n.redeem&&e.push(n.redeem.name),e.join("-")})),t.validate){let t=Tt.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw new TypeError("Invalid address");t=i().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==ZP.OP_HASH160||20!==e.output[1]||e.output[22]!==ZP.OP_EQUAL)throw new TypeError("Output is invalid");const r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}const n=e=>{if(e.output){const r=JP.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const n=WP.hash160(e.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=JP.decompile(e.input);if(!JP.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=o();if(!e||e.length<1)throw new TypeError("Input too short");if(!lr(s().output))throw new TypeError("Input is invalid");n(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){const t=s();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}n(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)};for(var eO={},tO="qpzry9x8gf2tvdw0s3jn54khce6mua7l",rO={},nO=0;nO<tO.length;nO++){var iO=tO.charAt(nO);if(void 0!==rO[iO])throw new TypeError(iO+" is ambiguous");rO[iO]=nO}function oO(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function sO(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=oO(t)^n>>5}for(t=oO(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=oO(t)^31&i}return t}function aO(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)return"Data too short";var a=sO(o);if("string"==typeof a)return a;for(var u=[],c=0;c<s.length;++c){var l=s.charAt(c),h=rO[l];if(void 0===h)return"Unknown character "+l;a=oO(a)^h,c+6>=s.length||u.push(h)}return 1!==a?"Invalid checksum for "+e:{prefix:o,words:u}}function uO(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<e.length;++u)for(i=i<<t|e[u],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}var cO={decodeUnsafe:function(){var e=aO.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=aO.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=sO(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",o=0;o<t.length;++o){var s=t[o];if(s>>5!=0)throw new Error("Non 5-bit word");n=oO(n)^s,i+=tO.charAt(s)}for(o=0;o<6;++o)n=oO(n);for(n^=1,o=0;o<6;++o)i+=tO.charAt(n>>5*(5-o)&31);return i},toWordsUnsafe:function(e){var t=uO(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=uO(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=uO(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=uO(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}};Object.defineProperty(eO,"__esModule",{value:!0});const lO=RP,hO=UT,fO=VT,dO=hP,pO=yT,gO=fO.OPS,mO=RA,yO=cO,vO=Tt.alloc(0);eO.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),pO({address:pO.maybe(pO.String),hash:pO.maybe(pO.BufferN(20)),input:pO.maybe(pO.BufferN(0)),network:pO.maybe(pO.Object),output:pO.maybe(pO.BufferN(22)),pubkey:pO.maybe(mO.isPoint),signature:pO.maybe(fO.isCanonicalScriptSignature),witness:pO.maybe(pO.arrayOf(pO.Buffer))},e);const r=dO.value((()=>{const t=yO.decode(e.address),r=t.words.shift(),n=yO.fromWords(t.words);return{version:r,prefix:t.prefix,data:Tt.from(n)}})),n=e.network||hO.bitcoin,i={name:"p2wpkh",network:n};if(dO.prop(i,"address",(()=>{if(!i.hash)return;const e=yO.toWords(i.hash);return e.unshift(0),yO.encode(n.bech32,e)})),dO.prop(i,"hash",(()=>e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||i.pubkey?lO.hash160(e.pubkey||i.pubkey):void 0)),dO.prop(i,"output",(()=>{if(i.hash)return fO.compile([gO.OP_0,i.hash])})),dO.prop(i,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),dO.prop(i,"signature",(()=>{if(e.witness)return e.witness[0]})),dO.prop(i,"input",(()=>{if(i.witness)return vO})),dO.prop(i,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=Tt.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==gO.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=lO.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");if(t=r,!mO.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!fO.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!mO.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const r=lO.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)};var bO={};Object.defineProperty(bO,"__esModule",{value:!0});const wO=RP,_O=UT,xO=VT,SO=hP,EO=yT,kO=xO.OPS,IO=RA,AO=cO,TO=Tt.alloc(0);function PO(e){return!(!lr(e)||65!==e.length||4!==e[0]||!IO.isPoint(e))}bO.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),EO({network:EO.maybe(EO.Object),address:EO.maybe(EO.String),hash:EO.maybe(EO.BufferN(32)),output:EO.maybe(EO.BufferN(34)),redeem:EO.maybe({input:EO.maybe(EO.Buffer),network:EO.maybe(EO.Object),output:EO.maybe(EO.Buffer),witness:EO.maybe(EO.arrayOf(EO.Buffer))}),input:EO.maybe(EO.BufferN(0)),witness:EO.maybe(EO.arrayOf(EO.Buffer))},e);const r=SO.value((()=>{const t=AO.decode(e.address),r=t.words.shift(),n=AO.fromWords(t.words);return{version:r,prefix:t.prefix,data:Tt.from(n)}})),n=SO.value((()=>xO.decompile(e.redeem.input)));let i=e.network;i||(i=e.redeem&&e.redeem.network||_O.bitcoin);const o={network:i};if(SO.prop(o,"address",(()=>{if(!o.hash)return;const e=AO.toWords(o.hash);return e.unshift(0),AO.encode(i.bech32,e)})),SO.prop(o,"hash",(()=>e.output?e.output.slice(2):e.address?r().data:o.redeem&&o.redeem.output?wO.sha256(o.redeem.output):void 0)),SO.prop(o,"output",(()=>{if(o.hash)return xO.compile([kO.OP_0,o.hash])})),SO.prop(o,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:TO,witness:e.witness.slice(0,-1)}})),SO.prop(o,"input",(()=>{if(o.witness)return TO})),SO.prop(o,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=xO.toStack(n());return o.redeem=Object.assign({witness:t},e.redeem),o.redeem.input=TO,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),SO.prop(o,"name",(()=>{const e=["p2wsh"];return void 0!==o.redeem&&e.push(o.redeem.name),e.join("-")})),t.validate){let t=Tt.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");t=r().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==kO.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===xO.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=wO.sha256(e.redeem.output);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem.input&&!xO.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(PO)||e.redeem.output&&(xO.decompile(e.redeem.output)||[]).some(PO))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(PO)||(xO.decompile(t)||[]).some(PO))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)},Object.defineProperty(FT,"__esModule",{value:!0});const OO=zT;FT.embed=OO.p2data;const CO=yP;FT.p2ms=CO.p2ms;const MO=IP;FT.p2pk=MO.p2pk;const NO=NP;FT.p2pkh=NO.p2pkh;const RO=$P;FT.p2sh=RO.p2sh;const LO=eO;FT.p2wpkh=LO.p2wpkh;const jO=bO;FT.p2wsh=jO.p2wsh,Object.defineProperty(BT,"__esModule",{value:!0});const DO=UT,BO=FT,UO=VT,FO=qT,zO=cO,VO=lA,HO=yT;function KO(e){const t=VO.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function qO(e){const t=zO.decode(e),r=zO.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:Tt.from(r)}}BT.fromBase58Check=KO,BT.fromBech32=qO,BT.toBase58Check=function(e,t){HO(FO.tuple(FO.Hash160bit,FO.UInt8),arguments);const r=Tt.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),VO.encode(r)},BT.toBech32=function(e,t,r){const n=zO.toWords(e);return n.unshift(t),zO.encode(r,n)},BT.fromOutputScript=function(e,t){t=t||DO.bitcoin;try{return BO.p2pkh({output:e,network:t}).address}catch(e){}try{return BO.p2sh({output:e,network:t}).address}catch(e){}try{return BO.p2wpkh({output:e,network:t}).address}catch(e){}try{return BO.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(UO.toASM(e)+" has no matching Address")},BT.toOutputScript=function(e,t){let r,n;t=t||DO.bitcoin;try{r=KO(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return BO.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return BO.p2sh({hash:r.hash}).output}else{try{n=qO(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return BO.p2wpkh({hash:n.data}).output;if(32===n.data.length)return BO.p2wsh({hash:n.data}).output}}}throw new Error(e+" has no matching Script")};var $O={},WO={exports:{}},GO=x_.exports.Buffer,JO=lt.crypto||lt.msCrypto;JO&&JO.getRandomValues?WO.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=GO.allocUnsafe(e);if(e>0)if(e>65536)for(var n=0;n<e;n+=65536)JO.getRandomValues(r.slice(n,n+65536));else JO.getRandomValues(r);return"function"==typeof t?lo((function(){t(null,r)})):r}:WO.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},Object.defineProperty($O,"__esModule",{value:!0});const XO=UT,YO=qT,ZO=RA,QO=WO.exports,eC=yT,tC=_T,rC=eC.maybe(eC.compile({compressed:YO.maybe(YO.Boolean),network:YO.maybe(YO.Network)}));class nC{constructor(e,t,r){this.__D=e,this.__Q=t,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||XO.bitcoin,void 0!==t&&(this.__Q=ZO.pointCompress(t,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=ZO.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return tC.encode(this.network.wif,this.__D,this.compressed)}sign(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return ZO.sign(e,this.__D);{let t=ZO.sign(e,this.__D);const r=Tt.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=ZO.signWithEntropy(e,this.__D,r);return t}}verify(e,t){return ZO.verify(e,this.publicKey,t)}}function iC(e,t){if(eC(YO.Buffer256bit,e),!ZO.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return eC(rC,t),new nC(e,void 0,t)}$O.fromPrivateKey=iC,$O.fromPublicKey=function(e,t){return eC(ZO.isPoint,e),eC(rC,t),new nC(void 0,e,t)},$O.fromWIF=function(e,t){const r=tC.decode(e),n=r.version;if(YO.Array(t)){if(t=t.filter((e=>n===e.wif)).pop(),!t)throw new Error("Unknown network version")}else if(t=t||XO.bitcoin,n!==t.wif)throw new Error("Invalid network version");return iC(r.privateKey,{compressed:r.compressed,network:t})},$O.makeRandom=function(e){eC(rC,e),void 0===e&&(e={});const t=e.rng||QO;let r;do{r=t(32),eC(YO.Buffer256bit,r)}while(!ZO.isPrivate(r));return iC(r,e)};var oC={},sC={},aC=x_.exports.Buffer;function uC(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function cC(e){return uC(e),e<253?1:e<=65535?3:e<=4294967295?5:9}var lC={encode:function e(t,r,n){if(uC(t),r||(r=aC.allocUnsafe(cC(t))),!aC.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),e.bytes=1):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),e.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),r},decode:function e(t,r){if(!aC.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=t.readUInt8(r);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,t.readUInt16LE(r+1);if(254===n)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var i=t.readUInt32LE(r+1),o=4294967296*t.readUInt32LE(r+5)+i;return uC(o),o},encodingLength:cC};Object.defineProperty(sC,"__esModule",{value:!0});const hC=qT,fC=yT,dC=lC;function pC(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function gC(e,t){const r=e.readUInt32LE(t);let n=e.readUInt32LE(t+4);return n*=4294967296,pC(n+r,9007199254740991),n+r}function mC(e,t,r){return pC(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}sC.readUInt64LE=gC,sC.writeUInt64LE=mC,sC.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},sC.cloneBuffer=function(e){const t=Tt.allocUnsafe(e.length);return e.copy(t),t},sC.BufferWriter=class{constructor(e,t=0){this.buffer=e,this.offset=t,fC(hC.tuple(hC.Buffer,hC.UInt32),[e,t])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=mC(this.buffer,e,this.offset)}writeVarInt(e){dC.encode(e,this.buffer,this.offset),this.offset+=dC.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}},sC.BufferReader=class{constructor(e,t=0){this.buffer=e,this.offset=t,fC(hC.tuple(hC.Buffer,hC.UInt32),[e,t])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=gC(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=dC.decode(this.buffer,this.offset);return this.offset+=dC.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}};var yC={};Object.defineProperty(yC,"__esModule",{value:!0});const vC=sC,bC=RP,wC=VT,_C=VT,xC=qT,SC=yT,EC=lC;function kC(e){const t=e.length;return EC.encodingLength(t)+t}const IC=Tt.allocUnsafe(0),AC=[],TC=Tt.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),PC=Tt.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),OC=Tt.from("ffffffffffffffff","hex"),CC={script:IC,valueBuffer:OC};class MC{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){const r=new vC.BufferReader(e),n=new MC;n.version=r.readInt32();const i=r.readUInt8(),o=r.readUInt8();let s=!1;i===MC.ADVANCED_TRANSACTION_MARKER&&o===MC.ADVANCED_TRANSACTION_FLAG?s=!0:r.offset-=2;const a=r.readVarInt();for(let e=0;e<a;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:AC});const u=r.readVarInt();for(let e=0;e<u;++e)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(s){for(let e=0;e<a;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return MC.fromBuffer(Tt.from(e,"hex"),!1)}static isCoinbaseHash(e){SC(xC.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&MC.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return SC(xC.tuple(xC.Hash256bit,xC.UInt32,xC.maybe(xC.UInt32),xC.maybe(xC.Buffer)),arguments),xC.Null(r)&&(r=MC.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||IC,sequence:r,witness:AC})-1}addOutput(e,t){return SC(xC.tuple(xC.Buffer,xC.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+EC.encodingLength(this.ins.length)+EC.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+kC(t.script)),0)+this.outs.reduce(((e,t)=>e+8+kC(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return EC.encodingLength(t)+e.reduce(((e,t)=>e+kC(t)),0)}(t.witness)),0):0)}clone(){const e=new MC;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,r){if(SC(xC.tuple(xC.UInt32,xC.Buffer,xC.Number),arguments),e>=this.ins.length)return PC;const n=wC.compile(wC.decompile(t).filter((e=>e!==_C.OPS.OP_CODESEPARATOR))),i=this.clone();if((31&r)===MC.SIGHASH_NONE)i.outs=[],i.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}));else if((31&r)===MC.SIGHASH_SINGLE){if(e>=this.outs.length)return PC;i.outs.length=e+1;for(let t=0;t<e;t++)i.outs[t]=CC;i.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}))}r&MC.SIGHASH_ANYONECANPAY?(i.ins=[i.ins[e]],i.ins[0].script=n):(i.ins.forEach((e=>{e.script=IC})),i.ins[e].script=n);const o=Tt.allocUnsafe(i.byteLength(!1)+4);return o.writeInt32LE(r,o.length-4),i.__toBuffer(o,0,!1),bC.hash256(o)}hashForWitnessV0(e,t,r,n){SC(xC.tuple(xC.UInt32,xC.Buffer,xC.Satoshi,xC.UInt32),arguments);let i,o=Tt.from([]),s=TC,a=TC,u=TC;if(n&MC.SIGHASH_ANYONECANPAY||(o=Tt.allocUnsafe(36*this.ins.length),i=new vC.BufferWriter(o,0),this.ins.forEach((e=>{i.writeSlice(e.hash),i.writeUInt32(e.index)})),a=bC.hash256(o)),n&MC.SIGHASH_ANYONECANPAY||(31&n)===MC.SIGHASH_SINGLE||(31&n)===MC.SIGHASH_NONE||(o=Tt.allocUnsafe(4*this.ins.length),i=new vC.BufferWriter(o,0),this.ins.forEach((e=>{i.writeUInt32(e.sequence)})),u=bC.hash256(o)),(31&n)!==MC.SIGHASH_SINGLE&&(31&n)!==MC.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+kC(t.script)),0);o=Tt.allocUnsafe(e),i=new vC.BufferWriter(o,0),this.outs.forEach((e=>{i.writeUInt64(e.value),i.writeVarSlice(e.script)})),s=bC.hash256(o)}else if((31&n)===MC.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];o=Tt.allocUnsafe(8+kC(t.script)),i=new vC.BufferWriter(o,0),i.writeUInt64(t.value),i.writeVarSlice(t.script),s=bC.hash256(o)}o=Tt.allocUnsafe(156+kC(t)),i=new vC.BufferWriter(o,0);const c=this.ins[e];return i.writeUInt32(this.version),i.writeSlice(a),i.writeSlice(u),i.writeSlice(c.hash),i.writeUInt32(c.index),i.writeVarSlice(t),i.writeUInt64(r),i.writeUInt32(c.sequence),i.writeSlice(s),i.writeUInt32(this.locktime),i.writeUInt32(n),bC.hash256(o)}getHash(e){return e&&this.isCoinbase()?Tt.alloc(32,0):bC.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return vC.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){SC(xC.tuple(xC.Number,xC.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){SC(xC.tuple(xC.Number,[xC.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=Tt.allocUnsafe(this.byteLength(r)));const n=new vC.BufferWriter(e,t||0);n.writeInt32(this.version);const i=r&&this.hasWitnesses();return i&&(n.writeUInt8(MC.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(MC.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach((e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)})),n.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)})),i&&this.ins.forEach((e=>{n.writeVector(e.witness)})),n.writeUInt32(this.locktime),void 0!==t?e.slice(t,n.offset):e}}MC.DEFAULT_SEQUENCE=4294967295,MC.SIGHASH_ALL=1,MC.SIGHASH_NONE=2,MC.SIGHASH_SINGLE=3,MC.SIGHASH_ANYONECANPAY=128,MC.ADVANCED_TRANSACTION_MARKER=0,MC.ADVANCED_TRANSACTION_FLAG=1,yC.Transaction=MC,Object.defineProperty(oC,"__esModule",{value:!0});const NC=sC,RC=RP,LC=yC,jC=qT,DC=yT,BC=lC,UC=new TypeError("Cannot compute merkle root for zero transactions"),FC=new TypeError("Cannot compute witness commit for non-segwit block");class zC{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const t=new NC.BufferReader(e),r=new zC;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;const n=()=>{const e=LC.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},i=t.readVarInt();r.transactions=[];for(let e=0;e<i;++e){const e=n();r.transactions.push(e)}const o=r.getWitnessCommit();return o&&(r.witnessCommit=o),r}static fromHex(e){return zC.fromBuffer(Tt.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,r=8388607&e,n=Tt.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}static calculateMerkleRoot(e,t){if(DC([{getHash:jC.Function}],e),0===e.length)throw UC;if(t&&!VC(e))throw FC;const r=e.map((e=>e.getHash(t))),n=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();r>1;){for(var i=0,o=0;o<r;o+=2,++i){var s=n[o],a=o+1===r?s:n[o+1],u=Tt.concat([s,a]);n[i]=t(u)}r=i}return n[0]}(r,RC.hash256);return t?RC.hash256(Tt.concat([n,e[0].ins[0].witness[0]])):n}getWitnessCommit(){if(!VC(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(Tt.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof Tt&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof Tt&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+BC.encodingLength(this.transactions.length)+this.transactions.reduce(((e,r)=>e+r.byteLength(t)),0)}getHash(){return RC.hash256(this.toBuffer(!0))}getId(){return NC.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=Tt.allocUnsafe(this.byteLength(e)),r=new NC.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(BC.encode(this.transactions.length,t,r.offset),r.offset+=BC.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}))),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){const e=NC.reverseBuffer(this.getHash()),t=zC.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw UC;const e=zC.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw UC;if(!this.hasWitnessCommit())throw FC;const e=zC.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function VC(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}oC.Block=zC;var HC={},KC={},qC={},$C={},WC={},GC={},JC={};!function(e){var t,r,n;Object.defineProperty(e,"__esModule",{value:!0}),(t=e.GlobalTypes||(e.GlobalTypes={}))[t.UNSIGNED_TX=0]="UNSIGNED_TX",t[t.GLOBAL_XPUB=1]="GLOBAL_XPUB",e.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(r=e.InputTypes||(e.InputTypes={}))[r.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",r[r.WITNESS_UTXO=1]="WITNESS_UTXO",r[r.PARTIAL_SIG=2]="PARTIAL_SIG",r[r.SIGHASH_TYPE=3]="SIGHASH_TYPE",r[r.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",r[r.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",r[r.BIP32_DERIVATION=6]="BIP32_DERIVATION",r[r.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",r[r.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",r[r.POR_COMMITMENT=9]="POR_COMMITMENT",r[r.TAP_KEY_SIG=19]="TAP_KEY_SIG",r[r.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",r[r.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",r[r.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",r[r.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",r[r.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",e.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],(n=e.OutputTypes||(e.OutputTypes={}))[n.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=2]="BIP32_DERIVATION",n[n.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",n[n.TAP_TREE=6]="TAP_TREE",n[n.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",e.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]}(JC);var XC={};Object.defineProperty(XC,"__esModule",{value:!0});const YC=JC;XC.decode=function(e){if(e.key[0]!==YC.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(const t of(e=>[...Array(e).keys()])(e.value.length/4-1)){const n=e.value.readUInt32LE(4*t+4),i=!!(2147483648&n),o=2147483647&n;r.path+="/"+o.toString(10)+(i?"'":"")}return r},XC.encode=function(e){const t=Tt.from([YC.GlobalTypes.GLOBAL_XPUB]),r=Tt.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=Tt.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,o),o+=4})),{key:r,value:i}},XC.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",XC.check=function(e){const t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return lr(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&lr(r)&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)*$/)},XC.canAddToArray=function(e,t,r){const n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.extendedPubkey.equals(t.extendedPubkey))).length)};var ZC={};Object.defineProperty(ZC,"__esModule",{value:!0});const QC=JC;ZC.encode=function(e){return{key:Tt.from([QC.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}};var eM={};Object.defineProperty(eM,"__esModule",{value:!0});const tM=JC;eM.decode=function(e){if(e.key[0]!==tM.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},eM.encode=function(e){return{key:Tt.from([tM.InputTypes.FINAL_SCRIPTSIG]),value:e}},eM.expected="Buffer",eM.check=function(e){return lr(e)},eM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig};var rM={};Object.defineProperty(rM,"__esModule",{value:!0});const nM=JC;rM.decode=function(e){if(e.key[0]!==nM.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},rM.encode=function(e){return{key:Tt.from([nM.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},rM.expected="Buffer",rM.check=function(e){return lr(e)},rM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness};var iM={};Object.defineProperty(iM,"__esModule",{value:!0});const oM=JC;iM.decode=function(e){if(e.key[0]!==oM.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},iM.encode=function(e){return{key:Tt.from([oM.InputTypes.NON_WITNESS_UTXO]),value:e}},iM.expected="Buffer",iM.check=function(e){return lr(e)},iM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo};var sM={};Object.defineProperty(sM,"__esModule",{value:!0});const aM=JC;sM.decode=function(e){if(e.key[0]!==aM.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},sM.encode=function(e){const t=Tt.from([aM.InputTypes.PARTIAL_SIG]);return{key:Tt.concat([t,e.pubkey]),value:e.signature}},sM.expected="{ pubkey: Buffer; signature: Buffer; }",sM.check=function(e){return lr(e.pubkey)&&lr(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!lr(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;const t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;const r=e[3+t+2];return!(r>33||r<1)&&e.length===3+t+2+r+2}(e.signature)},sM.canAddToArray=function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)};var uM={};Object.defineProperty(uM,"__esModule",{value:!0});const cM=JC;uM.decode=function(e){if(e.key[0]!==cM.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},uM.encode=function(e){return{key:Tt.from([cM.InputTypes.POR_COMMITMENT]),value:Tt.from(e,"utf8")}},uM.expected="string",uM.check=function(e){return"string"==typeof e},uM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment};var lM={};Object.defineProperty(lM,"__esModule",{value:!0});const hM=JC;lM.decode=function(e){if(e.key[0]!==hM.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},lM.encode=function(e){const t=Tt.from([hM.InputTypes.SIGHASH_TYPE]),r=Tt.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}},lM.expected="number",lM.check=function(e){return"number"==typeof e},lM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType};var fM={};Object.defineProperty(fM,"__esModule",{value:!0});const dM=JC;function pM(e){return lr(e)&&(64===e.length||65===e.length)}fM.decode=function(e){if(e.key[0]!==dM.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!pM(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},fM.encode=function(e){return{key:Tt.from([dM.InputTypes.TAP_KEY_SIG]),value:e}},fM.expected="Buffer",fM.check=pM,fM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig};var gM={};Object.defineProperty(gM,"__esModule",{value:!0});const mM=JC;gM.decode=function(e){if(e.key[0]!==mM.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));const t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));const r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}},gM.encode=function(e){const t=Tt.from([mM.InputTypes.TAP_LEAF_SCRIPT]),r=Tt.from([e.leafVersion]);return{key:Tt.concat([t,e.controlBlock]),value:Tt.concat([e.script,r])}},gM.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",gM.check=function(e){return lr(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&lr(e.script)},gM.canAddToArray=function(e,t,r){const n=t.controlBlock.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.controlBlock.equals(t.controlBlock))).length)};var yM={};Object.defineProperty(yM,"__esModule",{value:!0});const vM=JC;function bM(e){return lr(e)&&32===e.length}yM.decode=function(e){if(e.key[0]!==vM.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!bM(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},yM.encode=function(e){return{key:Tt.from([vM.InputTypes.TAP_MERKLE_ROOT]),value:e}},yM.expected="Buffer",yM.check=bM,yM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot};var wM={};Object.defineProperty(wM,"__esModule",{value:!0});const _M=JC;wM.decode=function(e){if(e.key[0]!==_M.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},wM.encode=function(e){const t=Tt.from([_M.InputTypes.TAP_SCRIPT_SIG]);return{key:Tt.concat([t,e.pubkey,e.leafHash]),value:e.signature}},wM.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",wM.check=function(e){return lr(e.pubkey)&&lr(e.leafHash)&&lr(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},wM.canAddToArray=function(e,t,r){const n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash))).length)};var xM={},SM={},EM={};function kM(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function IM(e){return kM(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(EM,"__esModule",{value:!0}),EM.encode=function e(t,r,n){if(kM(t),r||(r=Tt.allocUnsafe(IM(t))),!lr(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),Object.assign(e,{bytes:1})):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),Object.assign(e,{bytes:3})):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),Object.assign(e,{bytes:5})):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),Object.assign(e,{bytes:9})),r},EM.decode=function e(t,r){if(!lr(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);const n=t.readUInt8(r);if(n<253)return Object.assign(e,{bytes:1}),n;if(253===n)return Object.assign(e,{bytes:3}),t.readUInt16LE(r+1);if(254===n)return Object.assign(e,{bytes:5}),t.readUInt32LE(r+1);{Object.assign(e,{bytes:9});const n=t.readUInt32LE(r+1),i=4294967296*t.readUInt32LE(r+5)+n;return kM(i),i}},EM.encodingLength=IM,Object.defineProperty(SM,"__esModule",{value:!0});const AM=EM;function TM(e){const t=e.key.length,r=e.value.length,n=AM.encodingLength(t),i=AM.encodingLength(r),o=Tt.allocUnsafe(n+t+i+r);return AM.encode(t,o,0),e.key.copy(o,n),AM.encode(r,o,n+t),e.value.copy(o,n+t+i),o}function PM(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}SM.range=e=>[...Array(e).keys()],SM.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},SM.keyValsToBuffer=function(e){const t=e.map(TM);return t.push(Tt.from([0])),Tt.concat(t)},SM.keyValToBuffer=TM,SM.readUInt64LE=function(e,t){const r=e.readUInt32LE(t);let n=e.readUInt32LE(t+4);return n*=4294967296,PM(n+r,9007199254740991),n+r},SM.writeUInt64LE=function(e,t,r){return PM(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8},Object.defineProperty(xM,"__esModule",{value:!0});const OM=JC,CM=SM,MM=EM;xM.decode=function(e){if(e.key[0]!==OM.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));const t=CM.readUInt64LE(e.value,0);let r=8;const n=MM.decode(e.value,r);r+=MM.encodingLength(n);const i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}},xM.encode=function(e){const{script:t,value:r}=e,n=MM.encodingLength(t.length),i=Tt.allocUnsafe(8+n+t.length);return CM.writeUInt64LE(i,r,0),MM.encode(t.length,i,8),t.copy(i,8+n),{key:Tt.from([OM.InputTypes.WITNESS_UTXO]),value:i}},xM.expected="{ script: Buffer; value: number; }",xM.check=function(e){return lr(e.script)&&"number"==typeof e.value},xM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo};var NM={};Object.defineProperty(NM,"__esModule",{value:!0});const RM=JC,LM=EM;NM.decode=function(e){if(e.key[0]!==RM.OutputTypes.TAP_TREE||1!==e.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0;const r=[];for(;t<e.value.length;){const n=e.value[t++],i=e.value[t++],o=LM.decode(e.value,t);t+=LM.encodingLength(o),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+o)}),t+=o}return{leaves:r}},NM.encode=function(e){const t=Tt.from([RM.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map((e=>[Tt.of(e.depth,e.leafVersion),LM.encode(e.script.length),e.script])));return{key:t,value:Tt.concat(r)}},NM.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",NM.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every((e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&lr(e.script)))},NM.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree};var jM={};Object.defineProperty(jM,"__esModule",{value:!0});const DM=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];jM.makeConverter=function(e,t=DM){return{decode:function(r){if(r.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+r.key.toString("hex"));const n=r.key.slice(1);if(!t(n))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+r.key.toString("hex"));if(r.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const i={masterFingerprint:r.value.slice(0,4),pubkey:n,path:"m"};for(const e of(e=>[...Array(e).keys()])(r.value.length/4-1)){const t=r.value.readUInt32LE(4*e+4),n=!!(2147483648&t),o=2147483647&t;i.path+="/"+o.toString(10)+(n?"'":"")}return i},encode:function(t){const r=Tt.from([e]),n=Tt.concat([r,t.pubkey]),i=t.path.split("/"),o=Tt.allocUnsafe(4*i.length);t.masterFingerprint.copy(o,0);let s=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:n,value:o}},check:function(e){return lr(e.pubkey)&&lr(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}}};var BM={};Object.defineProperty(BM,"__esModule",{value:!0}),BM.makeChecker=function(e){return function(t){let r;if(e.includes(t.key[0])&&(r=t.key.slice(1),33!==r.length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}};var UM={};Object.defineProperty(UM,"__esModule",{value:!0}),UM.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:Tt.from([e]),value:t}},check:function(e){return lr(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}};var FM={};Object.defineProperty(FM,"__esModule",{value:!0});const zM=EM,VM=jM,HM=e=>32===e.length;FM.makeConverter=function(e){const t=VM.makeConverter(e,HM);return{decode:function(e){const r=zM.decode(e.value),n=zM.encodingLength(r),i=t.decode({key:e.key,value:e.value.slice(n+32*r)}),o=new Array(r);for(let t=0,i=n;t<r;t++,i+=32)o[t]=e.value.slice(i,i+32);return Object.assign({},i,{leafHashes:o})},encode:function(e){const r=t.encode(e),n=zM.encodingLength(e.leafHashes.length),i=Tt.allocUnsafe(n);zM.encode(e.leafHashes.length,i);const o=Tt.concat([i,...e.leafHashes,r.value]);return Object.assign({},r,{value:o})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every((e=>lr(e)&&32===e.length))&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}};var KM={};Object.defineProperty(KM,"__esModule",{value:!0}),KM.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:Tt.from([e]),value:t}},check:function(e){return lr(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}};var qM={};Object.defineProperty(qM,"__esModule",{value:!0}),qM.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:Tt.from([e]),value:t}},check:function(e){return lr(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}},Object.defineProperty(GC,"__esModule",{value:!0});const $M=JC,WM=eM,GM=rM,JM=iM,XM=sM,YM=uM,ZM=lM,QM=fM,eN=gM,tN=yM,rN=wM,nN=xM,iN=NM,oN=jM,sN=BM,aN=UM,uN=FM,cN=KM,lN=qM,hN={unsignedTx:ZC,globalXpub:XC,checkPubkey:sN.makeChecker([])};GC.globals=hN;const fN={nonWitnessUtxo:JM,partialSig:XM,sighashType:ZM,finalScriptSig:WM,finalScriptWitness:GM,porCommitment:YM,witnessUtxo:nN,bip32Derivation:oN.makeConverter($M.InputTypes.BIP32_DERIVATION),redeemScript:aN.makeConverter($M.InputTypes.REDEEM_SCRIPT),witnessScript:lN.makeConverter($M.InputTypes.WITNESS_SCRIPT),checkPubkey:sN.makeChecker([$M.InputTypes.PARTIAL_SIG,$M.InputTypes.BIP32_DERIVATION]),tapKeySig:QM,tapScriptSig:rN,tapLeafScript:eN,tapBip32Derivation:uN.makeConverter($M.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:cN.makeConverter($M.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:tN};GC.inputs=fN;const dN={bip32Derivation:oN.makeConverter($M.OutputTypes.BIP32_DERIVATION),redeemScript:aN.makeConverter($M.OutputTypes.REDEEM_SCRIPT),witnessScript:lN.makeConverter($M.OutputTypes.WITNESS_SCRIPT),checkPubkey:sN.makeChecker([$M.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:uN.makeConverter($M.OutputTypes.TAP_BIP32_DERIVATION),tapTree:iN,tapInternalKey:cN.makeConverter($M.OutputTypes.TAP_INTERNAL_KEY)};GC.outputs=dN,Object.defineProperty(WC,"__esModule",{value:!0});const pN=GC,gN=SM,mN=EM,yN=JC;function vN(e,t,r){if(!t.equals(Tt.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function bN(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){const i={unsignedTx:e};let o=0;for(const e of t)switch(e.key[0]){case yN.GlobalTypes.UNSIGNED_TX:if(vN("global",e.key,yN.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case yN.GlobalTypes.GLOBAL_XPUB:void 0===i.globalXpub&&(i.globalXpub=[]),i.globalXpub.push(pN.globals.globalXpub.decode(e));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(e)}const s=r.length,a=n.length,u=[],c=[];for(const e of gN.range(s)){const t={};for(const n of r[e])switch(pN.inputs.checkPubkey(n),n.key[0]){case yN.InputTypes.NON_WITNESS_UTXO:if(vN("input",n.key,yN.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=pN.inputs.nonWitnessUtxo.decode(n);break;case yN.InputTypes.WITNESS_UTXO:if(vN("input",n.key,yN.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=pN.inputs.witnessUtxo.decode(n);break;case yN.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(pN.inputs.partialSig.decode(n));break;case yN.InputTypes.SIGHASH_TYPE:if(vN("input",n.key,yN.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=pN.inputs.sighashType.decode(n);break;case yN.InputTypes.REDEEM_SCRIPT:if(vN("input",n.key,yN.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=pN.inputs.redeemScript.decode(n);break;case yN.InputTypes.WITNESS_SCRIPT:if(vN("input",n.key,yN.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=pN.inputs.witnessScript.decode(n);break;case yN.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(pN.inputs.bip32Derivation.decode(n));break;case yN.InputTypes.FINAL_SCRIPTSIG:vN("input",n.key,yN.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=pN.inputs.finalScriptSig.decode(n);break;case yN.InputTypes.FINAL_SCRIPTWITNESS:vN("input",n.key,yN.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=pN.inputs.finalScriptWitness.decode(n);break;case yN.InputTypes.POR_COMMITMENT:vN("input",n.key,yN.InputTypes.POR_COMMITMENT),t.porCommitment=pN.inputs.porCommitment.decode(n);break;case yN.InputTypes.TAP_KEY_SIG:vN("input",n.key,yN.InputTypes.TAP_KEY_SIG),t.tapKeySig=pN.inputs.tapKeySig.decode(n);break;case yN.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(pN.inputs.tapScriptSig.decode(n));break;case yN.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(pN.inputs.tapLeafScript.decode(n));break;case yN.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(pN.inputs.tapBip32Derivation.decode(n));break;case yN.InputTypes.TAP_INTERNAL_KEY:vN("input",n.key,yN.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=pN.inputs.tapInternalKey.decode(n);break;case yN.InputTypes.TAP_MERKLE_ROOT:vN("input",n.key,yN.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=pN.inputs.tapMerkleRoot.decode(n);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}u.push(t)}for(const e of gN.range(a)){const t={};for(const r of n[e])switch(pN.outputs.checkPubkey(r),r.key[0]){case yN.OutputTypes.REDEEM_SCRIPT:if(vN("output",r.key,yN.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=pN.outputs.redeemScript.decode(r);break;case yN.OutputTypes.WITNESS_SCRIPT:if(vN("output",r.key,yN.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=pN.outputs.witnessScript.decode(r);break;case yN.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(pN.outputs.bip32Derivation.decode(r));break;case yN.OutputTypes.TAP_INTERNAL_KEY:vN("output",r.key,yN.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=pN.outputs.tapInternalKey.decode(r);break;case yN.OutputTypes.TAP_TREE:vN("output",r.key,yN.OutputTypes.TAP_TREE),t.tapTree=pN.outputs.tapTree.decode(r);break;case yN.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(pN.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}c.push(t)}return{globalMap:i,inputs:u,outputs:c}}WC.psbtFromBuffer=function(e,t){let r=0;function n(){const t=mN.decode(e,r);r+=mN.encodingLength(t);const n=e.slice(r,r+t);return r+=t,n}function i(){return{key:n(),value:n()}}function o(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");const t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){const t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){const t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const s=[],a={};for(;!o();){const e=i(),t=e.key.toString("hex");if(a[t])throw new Error("Format Error: Keys must be unique for global keymap: key "+t);a[t]=1,s.push(e)}const u=s.filter((e=>e.key[0]===yN.GlobalTypes.UNSIGNED_TX));if(1!==u.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const c=t(u[0].value),{inputCount:l,outputCount:h}=c.getInputOutputCounts(),f=[],d=[];for(const e of gN.range(l)){const t={},r=[];for(;!o();){const n=i(),o=n.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each input: input index "+e+" key "+o);t[o]=1,r.push(n)}f.push(r)}for(const e of gN.range(h)){const t={},r=[];for(;!o();){const n=i(),o=n.key.toString("hex");if(t[o])throw new Error("Format Error: Keys must be unique for each output: output index "+e+" key "+o);t[o]=1,r.push(n)}d.push(r)}return bN(c,{globalMapKeyVals:s,inputKeyVals:f,outputKeyVals:d})},WC.checkKeyBuffer=vN,WC.psbtFromKeyVals=bN;var wN={};Object.defineProperty(wN,"__esModule",{value:!0});const _N=GC,xN=SM;wN.psbtToBuffer=function({globalMap:e,inputs:t,outputs:r}){const{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=kN({globalMap:e,inputs:t,outputs:r}),s=xN.keyValsToBuffer(n),a=e=>0===e.length?[Tt.from([0])]:e.map(xN.keyValsToBuffer),u=a(i),c=a(o),l=Tt.allocUnsafe(5);return l.writeUIntBE(482972169471,0,5),Tt.concat([l,s].concat(u,c))};const SN=(e,t)=>e.key.compare(t.key);function EN(e,t){const r=new Set,n=Object.entries(e).reduce(((e,[n,i])=>{if("unknownKeyVals"===n)return e;const o=t[n];if(void 0===o)return e;const s=(Array.isArray(i)?i:[i]).map(o.encode);return s.map((e=>e.key.toString("hex"))).forEach((e=>{if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)})),e.concat(s)}),[]),i=e.unknownKeyVals?e.unknownKeyVals.filter((e=>!r.has(e.key.toString("hex")))):[];return n.concat(i).sort(SN)}function kN({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:EN(e,_N.globals),inputKeyVals:t.map((e=>EN(e,_N.inputs))),outputKeyVals:r.map((e=>EN(e,_N.outputs)))}}wN.psbtToKeyVals=kN,function(e){function t(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),t(WC),t(wN)}($C),Object.defineProperty(qC,"__esModule",{value:!0});const IN=$C;function AN(e,t,r){return n=>{if(e.has(n))return;const i=r.filter((e=>e.key.toString("hex")===n))[0];t.push(i),e.add(n)}}function TN(e){return e.globalMap.unsignedTx}function PN(e){const t=new Set;return e.forEach((e=>{const r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}qC.combine=function(e){const t=e[0],r=IN.psbtToKeyVals(t),n=e.slice(1);if(0===n.length)throw new Error("Combine: Nothing to combine");const i=TN(t);if(void 0===i)throw new Error("Combine: Self missing transaction");const o=PN(r.globalKeyVals),s=r.inputKeyVals.map(PN),a=r.outputKeyVals.map(PN);for(const e of n){const t=TN(e);if(void 0===t||!t.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const n=IN.psbtToKeyVals(e);PN(n.globalKeyVals).forEach(AN(o,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(PN).forEach(((e,t)=>e.forEach(AN(s[t],r.inputKeyVals[t],n.inputKeyVals[t])))),n.outputKeyVals.map(PN).forEach(((e,t)=>e.forEach(AN(a[t],r.outputKeyVals[t],n.outputKeyVals[t]))))}return IN.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})};var ON={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=GC;function r(e,t){const r=e[t];if(void 0===r)throw new Error(`No input #${t}`);return r}function n(e,t){const r=e[t];if(void 0===r)throw new Error(`No output #${t}`);return r}function i(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function o(e){return(r,n)=>{for(const o of Object.keys(r)){const s=r[o],{canAdd:a,canAddToArray:u,check:c,expected:l}=t[e+"s"][o]||{},h=!!u;if(c)if(h){if(!Array.isArray(s)||n[o]&&!Array.isArray(n[o]))throw new Error(`Key type ${o} must be an array`);s.every(c)||i(e,o,l,s);const t=n[o]||[],r=new Set;if(!s.every((e=>u(t,e,r))))throw new Error("Can not add duplicate data to array");n[o]=t.concat(s)}else{if(c(s)||i(e,o,l,s),!a(n,s))throw new Error(`Can not add duplicate data to ${e}`);n[o]=s}}}}e.checkForInput=r,e.checkForOutput=n,e.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((t=>t.key.equals(e.key))).length)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)},e.getEnumLength=function(e){let t=0;return Object.keys(e).forEach((e=>{Number(isNaN(Number(e)))&&t++})),t},e.inputCheckUncleanFinalized=function(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){const e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw new Error(`Input #${e} has too much or too little data to clean`)},e.updateGlobal=o("global"),e.updateInput=o("input"),e.updateOutput=o("output"),e.addInputAttributes=function(t,n){const i=r(t,t.length-1);e.updateInput(n,i)},e.addOutputAttributes=function(t,r){const i=n(t,t.length-1);e.updateOutput(r,i)},e.defaultVersionSetter=function(e,t){if(!lr(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},e.defaultLocktimeSetter=function(e,t){if(!lr(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}(ON),Object.defineProperty(KC,"__esModule",{value:!0});const CN=qC,MN=$C,NN=JC,RN=ON;KC.Psbt=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){const r=Tt.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t){const r=Tt.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t){const r=MN.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return MN.psbtToBuffer(this)}updateGlobal(e){return RN.updateGlobal(e,this.globalMap),this}updateInput(e,t){const r=RN.checkForInput(this.inputs,e);return RN.updateInput(t,r),this}updateOutput(e,t){const r=RN.checkForOutput(this.outputs,e);return RN.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return RN.checkHasKey(e,this.globalMap.unknownKeyVals,RN.getEnumLength(NN.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){const r=RN.checkForInput(this.inputs,e);return RN.checkHasKey(t,r.unknownKeyVals,RN.getEnumLength(NN.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){const r=RN.checkForOutput(this.outputs,e);return RN.checkHasKey(t,r.unknownKeyVals,RN.getEnumLength(NN.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(r,e))),RN.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(r,e))),RN.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const t=RN.checkForInput(this.inputs,e);RN.inputCheckUncleanFinalized(e,t);for(const e of Object.keys(t))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(e)||delete t[e];return this}combine(...e){const t=CN.combine([this].concat(e));return Object.assign(this,t),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}},Object.defineProperty(HC,"__esModule",{value:!0});const LN=KC,jN=EM,DN=ON,BN=BT,UN=sC,FN=RP,zN=$O,VN=FT,HN=VT,KN=yC,qN={network:UT.bitcoin,maximumFeeRate:5e3};class $N{constructor(e={},t=new LN.Psbt(new GN)){this.data=t,this.opts=Object.assign({},qN,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}static fromBase64(e,t={}){const r=Tt.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t={}){const r=Tt.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t={}){const r=LN.Psbt.fromBuffer(e,WN),n=new $N(t,r);return function(e,t){e.ins.forEach((e=>{uR(t,e)}))}(n.__CACHE.__TX,n.__CACHE),n}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:UN.cloneBuffer(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=BN.fromOutputScript(e.script,this.opts.network)}catch(e){}return{script:UN.cloneBuffer(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=$N.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){oR(e),this.opts.maximumFeeRate=e}setVersion(e){oR(e),sR(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){oR(e),sR(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){oR(t),sR(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");sR(this.data.inputs,"addInput"),e.witnessScript&&ER(e.witnessScript);const t=this.__CACHE;this.data.addInput(e),uR(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&vR(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");sR(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:r}=this.opts,n=BN.toOutputScript(t,r);e=Object.assign(e,{script:n})}const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(XN))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return bR(this.data.inputs,r,t,!0),r}getFeeRate(){return fR("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return fR("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return DN.checkForInput(this.data.inputs,0),AR(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t=dR){const r=DN.checkForInput(this.data.inputs,e),{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=function(e,t,r){const n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=wR(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||tR(i.script))&&(i.isSegwit=!0),i}(e,r,this.__CACHE);if(!n)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach((e=>{const{hashType:t}=HN.signature.decode(e.signature);if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}(r);const{finalScriptSig:a,finalScriptWitness:u}=t(e,r,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}getInputType(e){const t=DN.checkForInput(this.data.inputs,e),r=SR(_R(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=HN.decompile(e);if(!t)return;const r=t[t.length-1];var n;if(lr(r)&&!xR(r)&&(n=r,!HN.isCanonicalScriptSignature(n))&&HN.decompile(r))return r}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=yR(e),r=t[t.length-1];return!xR(r)&&HN.decompile(r)?r:void 0}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+IR(r.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,r,n){const i=_R(r,t,n),{meaningfulScript:o}=SR(i,r,"input",t.redeemScript,t.witnessScript);return kR(e,o)}(t,DN.checkForInput(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const r=DN.checkForInput(this.data.inputs,e),n=iR(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function(e,t,r,n){const i=n.__TX.outs[r].script,{meaningfulScript:o}=SR(i,r,"output",t.redeemScript,t.witnessScript);return kR(e,o)}(t,DN.checkForOutput(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const r=DN.checkForOutput(this.data.outputs,e),n=iR(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(){return DN.checkForInput(this.data.inputs,0),AR(this.data.inputs.length).map((e=>this.validateSignaturesOfInput(e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t){const r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");const i=t?n.filter((e=>e.pubkey.equals(t))):n;if(i.length<1)throw new Error("No signatures for this pubkey");const o=[];let s,a,u;for(const t of i){const n=HN.signature.decode(t.signature),{hash:i,script:c}=u!==n.hashType?gR(e,Object.assign({},r,{sighashType:n.hashType}),this.__CACHE,!0):{hash:s,script:a};u=n.hashType,s=i,a=c,aR(t.pubkey,c,"verify");const l=zN.fromPublicKey(t.pubkey);o.push(l.verify(i,n.signature))}return o.every((e=>!0===e))}signAllInputsHD(e,t=[KN.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of AR(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[KN.Transaction.SIGHASH_ALL]){return new Promise(((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const r of AR(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInputHD(e,t,r=[KN.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return mR(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,r))),this}signInputHDAsync(e,t,r=[KN.Transaction.SIGHASH_ALL]){return new Promise(((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=mR(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,r)));return Promise.all(o).then((()=>{n()})).catch(i)}))}signAllInputs(e,t=[KN.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of AR(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t=[KN.Transaction.SIGHASH_ALL]){return new Promise(((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const i=[],o=[];for(const[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInput(e,t,r=[KN.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=pR(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:HN.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}signInputAsync(e,t,r=[KN.Transaction.SIGHASH_ALL]){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=pR(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then((r=>{const n=[{pubkey:t.publicKey,signature:HN.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})}))}))}toBuffer(){return JN(this.__CACHE),this.data.toBuffer()}toHex(){return JN(this.__CACHE),this.data.toHex()}toBase64(){return JN(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&ER(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&vR(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){return this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}HC.Psbt=$N;const WN=e=>new GN(e);class GN{constructor(e=Tt.from([2,0,0,0,0,0,0,0,0,0])){this.tx=KN.Transaction.fromBuffer(e),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!lr(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?UN.reverseBuffer(Tt.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!lr(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function JN(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function XN(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function YN(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}const ZN=YN(VN.p2ms),QN=YN(VN.p2pk),eR=YN(VN.p2pkh),tR=YN(VN.p2wpkh),rR=YN(VN.p2wsh),nR=YN(VN.p2sh);function iR(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function oR(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function sR(e,t){e.forEach((e=>{let r=!1,n=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;n=function(e){const t=e.finalScriptSig&&HN.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&HN.decompile(e.finalScriptWitness)||[];return t.concat(r).filter((e=>lr(e)&&HN.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else n=e.partialSig;if(n.forEach((e=>{const{hashType:n}=HN.signature.decode(e.signature),i=[];switch(n&KN.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case KN.Transaction.SIGHASH_ALL:break;case KN.Transaction.SIGHASH_SINGLE:case KN.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(t)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function aR(e,t,r){if(!kR(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function uR(e,t){const r=UN.reverseBuffer(Tt.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function cR(e,t){return(r,n,i,o)=>{const s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}const lR=cR(VN.p2sh,"Redeem script"),hR=cR(VN.p2wsh,"Witness script");function fR(e,t,r,n){if(!r.every(XN))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let i,o=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),bR(r,i,n,o),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function dR(e,t,r,n,i,o){IR(r);throw new Error(`Can not finalize input #${e}`)}function pR(e,t,r,n,i){const o=DN.checkForInput(e,t),{hash:s,sighashType:a,script:u}=gR(t,o,n,!1,i);return aR(r,u,"sign"),{hash:s,sighashType:a}}function gR(e,t,r,n,i){const o=r.__TX,s=t.sighashType||KN.Transaction.SIGHASH_ALL;if(i&&i.indexOf(s)<0){const e=function(e){let t=e&KN.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case KN.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case KN.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case KN.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(s);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${e}`)}let a,u;if(t.nonWitnessUtxo){const n=wR(r,t,e),i=o.ins[e].hash,s=n.getHash();if(!i.equals(s))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const a=o.ins[e].index;u=n.outs[a]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");u=t.witnessUtxo}const{meaningfulScript:c,type:l}=SR(u.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(l)>=0)a=o.hashForWitnessV0(e,c,u.value,s);else if(tR(c)){const t=VN.p2pkh({hash:c.slice(2)}).output;a=o.hashForWitnessV0(e,t,u.value,s)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${c.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=o.hashForSignature(e,c,s)}return{script:c,sighashType:s,hash:a}}function mR(e,t,r){const n=DN.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=n.bip32Derivation.map((e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");const o=i.map((e=>{const t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}));return o}function yR(e){let t=0;function r(){const r=jN.decode(e,t);return t+=jN.decode.bytes,r}function n(){return function(r){return t+=r,e.slice(t-r,t)}(r())}return function(){const e=r(),t=[];for(let r=0;r<e;r++)t.push(n());return t}()}function vR(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=KN.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function bR(e,t,r,n){let i=0;e.forEach(((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=yR(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=wR(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}}));const o=t.outs.reduce(((e,t)=>e+t.value),0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");const a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function wR(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||vR(e,t,r),n[r]}function _R(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo)return wR(r,t,e).outs[r.__TX.ins[e].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function xR(e){return 33===e.length&&HN.isCanonicalPubKey(e)}function SR(e,t,r,n,i){const o=nR(e),s=o&&n&&rR(n),a=rR(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return s?(u=i,lR(t,e,n,r),hR(t,n,i,r),ER(u)):a?(u=i,hR(t,e,i,r),ER(u)):o?(u=n,lR(t,e,n,r)):u=e,{meaningfulScript:u,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function ER(e){if(tR(e)||nR(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function kR(e,t){const r=FN.hash160(e),n=HN.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((t=>"number"!=typeof t&&(t.equals(e)||t.equals(r))))}function IR(e){return tR(e)?"witnesspubkeyhash":eR(e)?"pubkeyhash":ZN(e)?"multisig":QN(e)?"pubkey":"nonstandard"}function AR(e){return[...Array(e).keys()]}var TR={},PR={},OR={},CR={};Object.defineProperty(CR,"__esModule",{value:!0});const MR=VT,NR=VT;function RR(e){return e===NR.OPS.OP_0||MR.isCanonicalScriptSignature(e)}function LR(e,t){const r=MR.decompile(e);return!(r.length<2)&&r[0]===NR.OPS.OP_0&&(t?r.slice(1).every(RR):r.slice(1).every(MR.isCanonicalScriptSignature))}CR.check=LR,LR.toJSON=()=>"multisig input";var jR={};Object.defineProperty(jR,"__esModule",{value:!0});const DR=VT,BR=VT,UR=qT,FR=BR.OPS.OP_RESERVED;function zR(e,t){const r=DR.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==BR.OPS.OP_CHECKMULTISIG)return!1;if(!UR.Number(r[0]))return!1;if(!UR.Number(r[r.length-2]))return!1;const n=r[0]-FR,i=r[r.length-2]-FR;return!(n<=0)&&(!(i>16)&&(!(n>i)&&(i===r.length-3&&(!!t||r.slice(1,-2).every(DR.isCanonicalPubKey)))))}jR.check=zR,zR.toJSON=()=>"multi-sig output",Object.defineProperty(OR,"__esModule",{value:!0});const VR=CR;OR.input=VR;const HR=jR;OR.output=HR;var KR={};Object.defineProperty(KR,"__esModule",{value:!0});const qR=VT,$R=qR.OPS;function WR(e){const t=qR.compile(e);return t.length>1&&t[0]===$R.OP_RETURN}KR.check=WR,WR.toJSON=()=>"null data output";const GR={check:WR};KR.output=GR;var JR={},XR={};Object.defineProperty(XR,"__esModule",{value:!0});const YR=VT;function ZR(e){const t=YR.decompile(e);return 1===t.length&&YR.isCanonicalScriptSignature(t[0])}XR.check=ZR,ZR.toJSON=()=>"pubKey input";var QR={};Object.defineProperty(QR,"__esModule",{value:!0});const eL=VT,tL=VT;function rL(e){const t=eL.decompile(e);return 2===t.length&&eL.isCanonicalPubKey(t[0])&&t[1]===tL.OPS.OP_CHECKSIG}QR.check=rL,rL.toJSON=()=>"pubKey output",Object.defineProperty(JR,"__esModule",{value:!0});const nL=XR;JR.input=nL;const iL=QR;JR.output=iL;var oL={},sL={};Object.defineProperty(sL,"__esModule",{value:!0});const aL=VT;function uL(e){const t=aL.decompile(e);return 2===t.length&&aL.isCanonicalScriptSignature(t[0])&&aL.isCanonicalPubKey(t[1])}sL.check=uL,uL.toJSON=()=>"pubKeyHash input";var cL={};Object.defineProperty(cL,"__esModule",{value:!0});const lL=VT,hL=VT;function fL(e){const t=lL.compile(e);return 25===t.length&&t[0]===hL.OPS.OP_DUP&&t[1]===hL.OPS.OP_HASH160&&20===t[2]&&t[23]===hL.OPS.OP_EQUALVERIFY&&t[24]===hL.OPS.OP_CHECKSIG}cL.check=fL,fL.toJSON=()=>"pubKeyHash output",Object.defineProperty(oL,"__esModule",{value:!0});const dL=sL;oL.input=dL;const pL=cL;oL.output=pL;var gL={},mL={},yL={};Object.defineProperty(yL,"__esModule",{value:!0});const vL=VT,bL=VT;function wL(e){const t=vL.compile(e);return 22===t.length&&t[0]===bL.OPS.OP_0&&20===t[1]}yL.check=wL,wL.toJSON=()=>"Witness pubKeyHash output";var _L={};Object.defineProperty(_L,"__esModule",{value:!0});const xL=VT,SL=VT;function EL(e){const t=xL.compile(e);return 34===t.length&&t[0]===SL.OPS.OP_0&&32===t[1]}_L.check=EL,EL.toJSON=()=>"Witness scriptHash output",Object.defineProperty(mL,"__esModule",{value:!0});const kL=VT,IL=OR,AL=JR,TL=oL,PL=yL,OL=_L;function CL(e,t){const r=kL.decompile(e);if(r.length<1)return!1;const n=r[r.length-1];if(!lr(n))return!1;const i=kL.decompile(kL.compile(r.slice(0,-1))),o=kL.decompile(n);return!!o&&!!kL.isPushOnly(i)&&(1===r.length?OL.check(o)||PL.check(o):!(!TL.input.check(i)||!TL.output.check(o))||!(!IL.input.check(i,t)||!IL.output.check(o))||!(!AL.input.check(i)||!AL.output.check(o)))}mL.check=CL,CL.toJSON=()=>"scriptHash input";var ML={};Object.defineProperty(ML,"__esModule",{value:!0});const NL=VT,RL=VT;function LL(e){const t=NL.compile(e);return 23===t.length&&t[0]===RL.OPS.OP_HASH160&&20===t[1]&&t[22]===RL.OPS.OP_EQUAL}ML.check=LL,LL.toJSON=()=>"scriptHash output",Object.defineProperty(gL,"__esModule",{value:!0});const jL=mL;gL.input=jL;const DL=ML;gL.output=DL;var BL={},UL={};Object.defineProperty(UL,"__esModule",{value:!0});const FL=VT,zL=VT,VL=qT,HL=yT,KL=Tt.from("aa21a9ed","hex");function qL(e){const t=FL.compile(e);return t.length>37&&t[0]===zL.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(KL)}UL.check=qL,qL.toJSON=()=>"Witness commitment output",UL.encode=function(e){HL(VL.Hash256bit,e);const t=Tt.allocUnsafe(36);return KL.copy(t,0),e.copy(t,4),FL.compile([zL.OPS.OP_RETURN,t])},UL.decode=function(e){return HL(qL,e),FL.decompile(e)[1].slice(4,36)},Object.defineProperty(BL,"__esModule",{value:!0});const $L=UL;BL.output=$L;var WL={},GL={};Object.defineProperty(GL,"__esModule",{value:!0});const JL=VT;function XL(e){const t=JL.decompile(e);return 2===t.length&&JL.isCanonicalScriptSignature(t[0])&&function(e){return JL.isCanonicalPubKey(e)&&33===e.length}(t[1])}GL.check=XL,XL.toJSON=()=>"witnessPubKeyHash input",Object.defineProperty(WL,"__esModule",{value:!0});const YL=GL;WL.input=YL;const ZL=yL;WL.output=ZL;var QL={},ej={};Object.defineProperty(ej,"__esModule",{value:!0});const tj=VT,rj=yT,nj=OR,ij=JR,oj=oL;function sj(e,t){if(rj(rj.Array,e),e.length<1)return!1;const r=e[e.length-1];if(!lr(r))return!1;const n=tj.decompile(r);if(!n||0===n.length)return!1;const i=tj.compile(e.slice(0,-1));return!(!oj.input.check(i)||!oj.output.check(n))||!(!nj.input.check(i,t)||!nj.output.check(n))||!(!ij.input.check(i)||!ij.output.check(n))}ej.check=sj,sj.toJSON=()=>"witnessScriptHash input",Object.defineProperty(QL,"__esModule",{value:!0});const aj=ej;QL.input=aj;const uj=_L;QL.output=uj,Object.defineProperty(PR,"__esModule",{value:!0});const cj=VT,lj=OR,hj=KR,fj=JR,dj=oL,pj=gL,gj=BL,mj=WL,yj=QL,vj={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};PR.types=vj,PR.output=function(e){if(mj.output.check(e))return vj.P2WPKH;if(yj.output.check(e))return vj.P2WSH;if(dj.output.check(e))return vj.P2PKH;if(pj.output.check(e))return vj.P2SH;const t=cj.decompile(e);if(!t)throw new TypeError("Invalid script");return lj.output.check(t)?vj.P2MS:fj.output.check(t)?vj.P2PK:gj.output.check(t)?vj.WITNESS_COMMITMENT:hj.output.check(t)?vj.NULLDATA:vj.NONSTANDARD},PR.input=function(e,t){const r=cj.decompile(e);if(!r)throw new TypeError("Invalid script");return dj.input.check(r)?vj.P2PKH:pj.input.check(r,t)?vj.P2SH:lj.input.check(r,t)?vj.P2MS:fj.input.check(r)?vj.P2PK:vj.NONSTANDARD},PR.witness=function(e,t){const r=cj.decompile(e);if(!r)throw new TypeError("Invalid script");return mj.input.check(r)?vj.P2WPKH:yj.input.check(r,t)?vj.P2WSH:vj.NONSTANDARD},Object.defineProperty(TR,"__esModule",{value:!0});const bj=BT,wj=sC,_j=PR,xj=RP,Sj=$O,Ej=UT,kj=FT,Ij=VT,Aj=VT,Tj=yC,Pj=qT,Oj=yT,Cj=_j.types,Mj=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function Nj(e,t,r){try{Oj(e,t)}catch(e){throw new Error(r)}}class Rj{constructor(e=Ej.bitcoin,t=2500){this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new Tj.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(e,t){const r=new Rj(t);return r.setVersion(e.version),r.setLockTime(e.locktime),e.outs.forEach((e=>{r.addOutput(e.script,e.value)})),e.ins.forEach((e=>{r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),r.__INPUTS.forEach(((t,r)=>{!function(e,t,r){if(e.redeemScriptType!==Cj.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;const n=e.signatures.concat();e.signatures=e.pubkeys.map((i=>{const o=Sj.fromPublicKey(i);let s;return n.some(((i,a)=>{if(!i)return!1;const u=Ij.signature.decode(i),c=t.hashForSignature(r,e.redeemScript,u.hashType);return!!o.verify(c,u.signature)&&(n[a]=void 0,s=i,!0)})),s}))}(t,e,r)})),r}setLowR(e){return Oj(Oj.maybe(Oj.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}setLockTime(e){if(Oj(Pj.UInt32,e),this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>void 0!==e)))))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}setVersion(e){Oj(Pj.UInt32,e),this.__TX.version=e}addInput(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let i;if("string"==typeof(o=e)||o instanceof String)e=wj.reverseBuffer(Tt.from(e,"hex"));else if(function(e){return e instanceof Tj.Transaction}(e)){const r=e.outs[t];n=r.script,i=r.value,e=e.getHash(!1)}var o;return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}addOutput(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=bj.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(e,t,r,n,i,o){!function({input:e,ourPubKey:t,keyPair:r,signatureHash:n,hashType:i,useLowR:o}){let s=!1;for(const[a,u]of e.pubkeys.entries()){if(!t.equals(u))continue;if(e.signatures[a])throw new Error("Signature already exists");if(33!==t.length&&e.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const c=r.sign(n,o);e.signatures[a]=Ij.signature.encode(c,i),s=!0}if(!s)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,n,i,o,s,a,u,c,l){let h;if("number"==typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),h=i;else{if("object"!=typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!Mj.has(t.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${t.prevOutScriptType}"`);Nj(Oj.Number,t.vin,"sign must include vin parameter as Number (input index)"),Nj(Pj.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),Nj(Oj.maybe(Oj.Number),t.hashType,"sign hashType parameter must be a number");const r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2pkh: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),Nj(Oj.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${t.vin} is not of type p2pk: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),Nj(Oj.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2wpkh: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),Nj(Pj.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${t.vin} is not of type p2ms: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),Nj(Oj.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type p2sh-p2wpkh: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.Buffer,t.redeemScript,`${n} requires redeemScript`),Nj(Pj.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);Nj(Oj.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),Nj(Oj.Buffer,t.redeemScript,`${n} requires redeemScript`),Nj(Oj.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);Nj(Oj.Buffer,t.witnessScript,`${n} requires witnessScript`),Nj(Oj.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),Nj(Pj.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);Nj(Oj.Buffer,t.witnessScript,`${n} requires witnessScript`),Nj(Oj.Buffer,t.redeemScript,`${n} requires witnessScript`),Nj(Pj.Satoshi,t.witnessValue,`${n} requires witnessScript`)}}(t,i),({vin:h,keyPair:o,redeemScript:s,hashType:a,witnessValue:u,witnessScript:c}=i)}if(void 0===o)throw new Error("sign requires keypair");if(o.network&&o.network!==e)throw new TypeError("Inconsistent network");if(!t[h])throw new Error("No input at index: "+h);if(r(a=a||Tj.Transaction.SIGHASH_ALL))throw new Error("Transaction needs outputs");const f=t[h];if(void 0!==f.redeemScript&&s&&!f.redeemScript.equals(s))throw new Error("Inconsistent redeemScript");const d=o.publicKey||o.getPublicKey&&o.getPublicKey();if(!Bj(f)){if(void 0!==u){if(void 0!==f.value&&f.value!==u)throw new Error("Input did not match witnessValue");Oj(Pj.Satoshi,u),f.value=u}if(!Bj(f)){const e=function(e,t,r,n){if(r&&n){const i=kj.p2wsh({redeem:{output:n}}),o=kj.p2wsh({output:r}),s=kj.p2sh({redeem:{output:r}}),a=kj.p2sh({redeem:i});if(!i.hash.equals(o.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!s.hash.equals(a.hash))throw new Error("Redeem script inconsistent with prevOutScript");const u=jj(i.redeem.output,t);if(!u.pubkeys)throw new Error(u.type+" not supported as witnessScript ("+Ij.toASM(n)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(u.signatures=e.signatures);const c=n;if(u.type===Cj.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:Cj.P2WSH,witnessScript:n,witnessScriptType:u.type,prevOutType:Cj.P2SH,prevOutScript:s.output,hasWitness:!0,signScript:c,signType:u.type,pubkeys:u.pubkeys,signatures:u.signatures,maxSignatures:u.maxSignatures}}if(r){const n=kj.p2sh({redeem:{output:r}});if(e.prevOutScript){let t;try{t=kj.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!n.hash.equals(t.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const i=jj(n.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as redeemScript ("+Ij.toASM(r)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(i.signatures=e.signatures);let o=r;return i.type===Cj.P2WPKH&&(o=kj.p2pkh({pubkey:i.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:i.type,prevOutType:Cj.P2SH,prevOutScript:n.output,hasWitness:i.type===Cj.P2WPKH,signScript:o,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(n){const r=kj.p2wsh({redeem:{output:n}});if(e.prevOutScript){const t=kj.p2wsh({output:e.prevOutScript});if(!r.hash.equals(t.hash))throw new Error("Witness script inconsistent with prevOutScript")}const i=jj(r.redeem.output,t);if(!i.pubkeys)throw new Error(i.type+" not supported as witnessScript ("+Ij.toASM(n)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(i.signatures=e.signatures);const o=n;if(i.type===Cj.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:i.type,prevOutType:Cj.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:o,signType:i.type,pubkeys:i.pubkeys,signatures:i.signatures,maxSignatures:i.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===Cj.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===Cj.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");const r=jj(e.prevOutScript,t);if(!r.pubkeys)throw new Error(r.type+" not supported ("+Ij.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(r.signatures=e.signatures);let n=e.prevOutScript;return r.type===Cj.P2WPKH&&(n=kj.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:e.prevOutScript,hasWitness:r.type===Cj.P2WPKH,signScript:n,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const i=kj.p2pkh({pubkey:t}).output;return{prevOutType:Cj.P2PKH,prevOutScript:i,hasWitness:!1,signScript:i,signType:Cj.P2PKH,pubkeys:[t],signatures:[void 0]}}(f,d,s,c);Object.assign(f,e)}if(!Bj(f))throw Error(f.prevOutType+" not supported")}let p;return p=f.hasWitness?n.hashForWitnessV0(h,f.signScript,f.value,a):n.hashForSignature(h,f.signScript,a),{input:f,ourPubKey:d,keyPair:o,signatureHash:p,hashType:a,useLowR:!!l}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,n,i,o,this.__USE_LOW_R))}__addInputUnsafe(e,t,r){if(Tj.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);let i={};if(void 0!==r.script&&(i=Lj(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){let e;if(!i.pubkeys&&!i.signatures){const t=jj(r.prevOutScript);t.pubkeys&&(i.pubkeys=t.pubkeys,i.signatures=t.signatures),e=t.type}i.prevOutScript=r.prevOutScript,i.prevOutType=e||_j.output(r.prevOutScript)}const o=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[o]=i,this.__PREV_TX_SET[n]=!0,o}__build(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const t=this.__TX.clone();if(this.__INPUTS.forEach(((r,n)=>{if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");const i=Dj(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===Cj.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}__canModifyInputs(){return this.__INPUTS.every((e=>!e.signatures||e.signatures.every((e=>!e||0!=(Uj(e)&Tj.Transaction.SIGHASH_ANYONECANPAY)))))}__needsOutputs(e){return e===Tj.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>!!e&&!(Uj(e)&Tj.Transaction.SIGHASH_NONE)))))}__canModifyOutputs(){const e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((r=>void 0===r.signatures||r.signatures.every((r=>{if(!r)return!0;const n=31&Uj(r);return n===Tj.Transaction.SIGHASH_NONE||n===Tj.Transaction.SIGHASH_SINGLE&&e<=t}))))}__overMaximumFees(e){const t=this.__INPUTS.reduce(((e,t)=>e+(t.value>>>0)),0),r=this.__TX.outs.reduce(((e,t)=>e+t.value),0);return(t-r)/e>this.maximumFeeRate}}function Lj(e,t,r,n){if(0===e.length&&0===t.length)return{};if(!r){let n=_j.input(e,!0),i=_j.witness(t,!0);n===Cj.NONSTANDARD&&(n=void 0),i===Cj.NONSTANDARD&&(i=void 0),r=n||i}switch(r){case Cj.P2WPKH:{const{output:e,pubkey:r,signature:n}=kj.p2wpkh({witness:t});return{prevOutScript:e,prevOutType:Cj.P2WPKH,pubkeys:[r],signatures:[n]}}case Cj.P2PKH:{const{output:t,pubkey:r,signature:n}=kj.p2pkh({input:e});return{prevOutScript:t,prevOutType:Cj.P2PKH,pubkeys:[r],signatures:[n]}}case Cj.P2PK:{const{signature:t}=kj.p2pk({input:e});return{prevOutType:Cj.P2PK,pubkeys:[void 0],signatures:[t]}}case Cj.P2MS:{const{m:t,pubkeys:r,signatures:i}=kj.p2ms({input:e,output:n},{allowIncomplete:!0});return{prevOutType:Cj.P2MS,pubkeys:r,signatures:i,maxSignatures:t}}}if(r===Cj.P2SH){const{output:r,redeem:n}=kj.p2sh({input:e,witness:t}),i=_j.output(n.output),o=Lj(n.input,n.witness,i,n.output);return o.prevOutType?{prevOutScript:r,prevOutType:Cj.P2SH,redeemScript:n.output,redeemScriptType:o.prevOutType,witnessScript:o.witnessScript,witnessScriptType:o.witnessScriptType,pubkeys:o.pubkeys,signatures:o.signatures}:{}}if(r===Cj.P2WSH){const{output:r,redeem:n}=kj.p2wsh({input:e,witness:t}),i=_j.output(n.output);let o;return o=i===Cj.P2WPKH?Lj(n.input,n.witness,i):Lj(Ij.compile(n.witness),[],i,n.output),o.prevOutType?{prevOutScript:r,prevOutType:Cj.P2WSH,witnessScript:n.output,witnessScriptType:o.prevOutType,pubkeys:o.pubkeys,signatures:o.signatures}:{}}return{prevOutType:Cj.NONSTANDARD,prevOutScript:e}}function jj(e,t){Oj(Pj.Buffer,e);const r=_j.output(e);switch(r){case Cj.P2PKH:{if(!t)return{type:r};const n=kj.p2pkh({output:e}).hash,i=xj.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case Cj.P2WPKH:{if(!t)return{type:r};const n=kj.p2wpkh({output:e}).hash,i=xj.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case Cj.P2PK:return{type:r,pubkeys:[kj.p2pk({output:e}).pubkey],signatures:[void 0]};case Cj.P2MS:{const t=kj.p2ms({output:e});return{type:r,pubkeys:t.pubkeys,signatures:t.pubkeys.map((()=>{})),maxSignatures:t.m}}}return{type:r}}function Dj(e,t,r){const n=t.pubkeys||[];let i=t.signatures||[];switch(e){case Cj.P2PKH:if(0===n.length)break;if(0===i.length)break;return kj.p2pkh({pubkey:n[0],signature:i[0]});case Cj.P2WPKH:if(0===n.length)break;if(0===i.length)break;return kj.p2wpkh({pubkey:n[0],signature:i[0]});case Cj.P2PK:if(0===n.length)break;if(0===i.length)break;return kj.p2pk({signature:i[0]});case Cj.P2MS:{const e=t.maxSignatures;i=r?i.map((e=>e||Aj.OPS.OP_0)):i.filter((e=>e));const o=!r||e===i.length;return kj.p2ms({m:e,pubkeys:n,signatures:i},{allowIncomplete:r,validate:o})}case Cj.P2SH:{const e=Dj(t.redeemScriptType,t,r);if(!e)return;return kj.p2sh({redeem:{output:e.output||t.redeemScript,input:e.input,witness:e.witness}})}case Cj.P2WSH:{const e=Dj(t.witnessScriptType,t,r);if(!e)return;return kj.p2wsh({redeem:{output:t.witnessScript,input:e.input,witness:e.witness}})}}}function Bj(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function Uj(e){return e.readUInt8(e.length-1)}TR.TransactionBuilder=Rj,Object.defineProperty(q_,"__esModule",{value:!0});const Fj=$_;q_.bip32=Fj;const zj=BT;q_.address=zj;const Vj=RP;q_.crypto=Vj;const Hj=$O;q_.ECPair=Hj;const Kj=UT;var qj=q_.networks=Kj;const $j=FT;var Wj=q_.payments=$j;const Gj=VT;q_.script=Gj;var Jj=oC;q_.Block=Jj.Block;var Xj=HC;q_.Psbt=Xj.Psbt;var Yj=VT;q_.opcodes=Yj.OPS;var Zj=yC;q_.Transaction=Zj.Transaction;var Qj=TR;q_.TransactionBuilder=Qj.TransactionBuilder;var eD={exports:{}};function tD(e,t){const r=(e=>{const t=(e=>{const t=__.from({...e,crv:"K-256"},"jwk").toString("blk","public"),r=H_.publicKeyConvert(K_.from(t,"hex"),!0);return K_.from(r).toString("hex")})(e);let r=K_.from(t,"hex"),n=32-r.length;for(;n>0;)r=K_.concat([K_.from("00","hex"),r]),n--;return r})(e.publicKeyJwk);let n="";switch(t.code){case pi.Bitcoin:case pi.Mocknet:case pi.Testnet:n=function(e,t){return Wj.p2pkh({pubkey:e,network:qj[t.code]}).address}(r,t);break;case pi.Ethmain:case pi.Ethropst:case pi.Ethrinkeby:n=function(e,t){const r=e.toString("hex"),n=new xy.ec("secp256k1").keyFromPublic(r,"hex").getPublic().encode("hex").slice(2);return`0x${eD.exports.keccak256(Buffer.from(n,"hex")).slice(24).toString()}`}(r);break;default:throw new ji("deriveIssuingAddressFromPublicKey",`${zg} - ${Hl.i18n.getText("errors","deriveIssuingAddressFromPublicKey")}`)}return n}function rD(e,t){if(e!==t)throw new ji("compareHashes",Oi("errors","ensureHashesEqual"));return!0}function nD(e,t){if(e!==t)throw new ji("checkMerkleRoot",Oi("errors","ensureMerkleRootEqual"));return!0}function iD(e,t,r){let n="";const i=function(e,t){let r=null;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&n.toLowerCase()===t.toLowerCase()&&(r=n);return e[r]}(e,t),o=Fl(r);if(i?(i.created&&o<=i.created&&(n="invalidIssuingAddressCreationTime"),i.revoked&&o>=i.revoked&&(n="invalidIssuingAddressRevoked"),i.expires&&o>=i.expires&&(n="invalidIssuingAddressExpired")):n="invalidIssuingAddressUnknown",n)throw new ji("checkAuthenticity",Oi("errors",n))}function oD(e){let t=e.targetHash;const r=e.merkleRoot;try{const r=e.proof||e.path;if(r)for(const e in r){const n=r[e];let i;if(void 0!==n.left)i=jg(`${n.left}${t}`),t=Lg(i);else{if(void 0===n.right)throw new ji("checkReceipt","Trigger catch error.");i=jg(`${t}${n.right}`),t=Lg(i)}}}catch(e){throw new ji("checkReceipt",Oi("errors","ensureValidReceipt"))}if(t!==r)throw new ji("checkReceipt",Oi("errors","invalidMerkleReceipt"))}function sD(e){if("string"==typeof e&&e.length>0)return e;throw new ji("getTransactionId",Oi("errors","isTransactionIdValid"))}!function(e){!function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof Eo&&Eo.versions&&Eo.versions.node?n=lt:i&&(n=self);var o=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),u=[4,1024,262144,67108864],c=[0,8,16,24],l=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],f=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var g=function(e,t,r){return function(n){return new O(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new O(e,t,i).update(n)[r]()}},y=function(e,t,r){return function(t,n,i,o){return x["cshake"+e].update(t,n,i,o)[r]()}},v=function(e,t,r){return function(t,n,i,o){return x["kmac"+e].update(t,n,i,o)[r]()}},b=function(e,t,r,n){for(var i=0;i<d.length;++i){var o=d[i];e[o]=t(r,n,o)}return e},w=function(e,t){var r=g(e,t,"hex");return r.create=function(){return new O(e,t,e)},r.update=function(e){return r.create().update(e)},b(r,g,e,t)},_=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:f,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new O(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},b(r,m,e,t)}},{name:"cshake",padding:u,bits:f,createMethod:function(e,t){var r=p[e],n=y(e,0,"hex");return n.create=function(n,i,o){return i||o?new O(e,t,n).bytepad([i,o],r):x["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},b(n,y,e,t)}},{name:"kmac",padding:u,bits:f,createMethod:function(e,t){var r=p[e],n=v(e,0,"hex");return n.create=function(n,i,o){return new C(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},b(n,v,e,t)}}],x={},S=[],E=0;E<_.length;++E)for(var k=_[E],I=k.bits,A=0;A<I.length;++A){var T=k.name+"_"+I[A];if(S.push(T),x[T]=k.createMethod(I[A],k.padding),"sha3"!==k.name){var P=k.name+I[A];S.push(P),x[P]=x[T]}}function O(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function C(e,t,r){O.call(this,e,t,r)}O.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,u=this.byteCount,l=e.length,h=this.blockCount,f=0,d=this.s;f<l;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<h+1;++i)a[i]=0;if(r)for(i=this.start;f<l&&i<u;++f)a[i>>2]|=e[f]<<c[3&i++];else for(i=this.start;f<l&&i<u;++f)(o=e.charCodeAt(f))<128?a[i>>2]|=o<<c[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++f)),a[i>>2]|=(240|o>>18)<<c[3&i++],a[i>>2]|=(128|o>>12&63)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]);if(this.lastByteIndex=i,i>=u){for(this.start=i-u,this.block=a[h],i=0;i<h;++i)d[i]^=a[i];M(d),this.reset=!0}else this.start=i}return this},O.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},O.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var u=e.charCodeAt(a);u<128?i+=1:u<2048?i+=2:u<55296||u>=57344?i+=3:(u=65536+((1023&u)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},O.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];M(n)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,u="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],u+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(M(r),o=0)}return i&&(e=r[o],u+=a[e>>4&15]+a[15&e],i>1&&(u+=a[e>>12&15]+a[e>>8&15]),i>2&&(u+=a[e>>20&15]+a[e>>16&15])),u},O.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)u[s]=r[o];s%t==0&&M(r)}return i&&(u[o]=r[o],e=e.slice(0,a)),e},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,u=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;a%r==0&&M(n)}return o&&(e=a<<2,t=n[s],u[e]=255&t,o>1&&(u[e+1]=t>>8&255),o>2&&(u[e+2]=t>>16&255)),u},C.prototype=new O,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var M=function(e){var t,r,n,i,o,s,a,u,c,h,f,d,p,g,m,y,v,b,w,_,x,S,E,k,I,A,T,P,O,C,M,N,R,L,j,D,B,U,F,z,V,H,K,q,$,W,G,J,X,Y,Z,Q,ee,te,re,ne,ie,oe,se,ae,ue,ce,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],f=e[7]^e[17]^e[27]^e[37]^e[47],t=(d=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(u<<1|c>>>31),r=o^(c<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(h<<1|f>>>31),r=a^(f<<1|h>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(d<<1|p>>>31),r=c^(p<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=h^(i<<1|o>>>31),r=f^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,g=e[0],m=e[1],W=e[11]<<4|e[10]>>>28,G=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,L=e[2]<<1|e[3]>>>31,j=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,M=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,D=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,R=e[44]<<29|e[45]>>>3,k=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,U=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,x=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,q=e[8]<<27|e[9]>>>5,$=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,V=e[39]<<8|e[38]>>>24,S=e[48]<<14|e[49]>>>18,E=e[49]<<14|e[48]>>>18,e[0]=g^~y&b,e[1]=m^~v&w,e[10]=k^~A&P,e[11]=I^~T&O,e[20]=L^~D&U,e[21]=j^~B&F,e[30]=q^~W&J,e[31]=$^~G&X,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=y^~b&_,e[3]=v^~w&x,e[12]=A^~P&C,e[13]=T^~O&M,e[22]=D^~U&z,e[23]=B^~F&V,e[32]=W^~J&Y,e[33]=G^~X&Z,e[42]=ne^~oe&ae,e[43]=ie^~se&ue,e[4]=b^~_&S,e[5]=w^~x&E,e[14]=P^~C&N,e[15]=O^~M&R,e[24]=U^~z&H,e[25]=F^~V&K,e[34]=J^~Y&Q,e[35]=X^~Z&ee,e[44]=oe^~ae&ce,e[45]=se^~ue&le,e[6]=_^~S&g,e[7]=x^~E&m,e[16]=C^~N&k,e[17]=M^~R&I,e[26]=z^~H&L,e[27]=V^~K&j,e[36]=Y^~Q&q,e[37]=Z^~ee&$,e[46]=ae^~ce&te,e[47]=ue^~le&re,e[8]=S^~g&y,e[9]=E^~m&v,e[18]=N^~k&A,e[19]=R^~I&T,e[28]=H^~L&D,e[29]=K^~j&B,e[38]=Q^~q&W,e[39]=ee^~$&G,e[48]=ce^~te&ne,e[49]=le^~re&ie,e[0]^=l[n],e[1]^=l[n+1]};if(o)e.exports=x;else for(E=0;E<S.length;++E)n[S[E]]=x[S[E]]}()}(eD);var aD={};!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var n="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),s=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",l=t(n,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(n+t(n,i,"[\\+\\-\\.]")+"*"),r(r(s+"|"+t(l,a,"[\\:]"))+"*");var h=r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("0?[1-9]"+i)+"|0?0?"+i),f=r(h+"\\."+h+"\\."+h+"\\."+h),d=r(o+"{1,4}"),p=r(r(d+"\\:"+d)+"|"+f),g=r(r(d+"\\:")+"{6}"+p),m=r("\\:\\:"+r(d+"\\:")+"{5}"+p),y=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+p),v=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+p),b=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+p),w=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),_=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),x=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),S=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),E=r([g,m,y,v,b,w,_,x,S].join("|")),k=r(r(l+"|"+s)+"+");r("[vV]"+o+"+\\."+t(l,a,"[\\:]")+"+"),r(r(s+"|"+t(l,a))+"*");var I=r(s+"|"+t(l,a,"[\\:\\@]"));return r(r(s+"|"+t(l,a,"[\\@]"))+"+"),r(r(I+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",n,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,a),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,u),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+k+")")+"?\\]?$")}}var s=o(!1),a=o(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=36,h=/^xn--/,f=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(d,".")).split("."),t).join(".")}function b(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}var w=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l},_=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,r){var n=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;n+=l)e=g(e/35);return g(n+36*e/(e+38))},S=function(e){var t=[],r=e.length,n=0,i=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var a=0;a<s;++a)e.charCodeAt(a)>=128&&y("not-basic"),t.push(e.charCodeAt(a));for(var u=s>0?s+1:0;u<r;){for(var h=n,f=1,d=l;;d+=l){u>=r&&y("invalid-input");var p=w(e.charCodeAt(u++));(p>=l||p>g((c-n)/f))&&y("overflow"),n+=p*f;var m=d<=o?1:d>=o+26?26:d-o;if(p<m)break;var v=l-m;f>g(c/v)&&y("overflow"),f*=v}var b=t.length+1;o=x(n-h,b,0==h),g(n/b)>c-i&&y("overflow"),i+=g(n/b),n%=b,t.splice(n++,0,i)}return String.fromCodePoint.apply(String,t)},E=function(e){var t=[],r=(e=b(e)).length,n=128,i=0,o=72,s=!0,a=!1,u=void 0;try{for(var h,f=e[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var d=h.value;d<128&&t.push(m(d))}}catch(e){a=!0,u=e}finally{try{!s&&f.return&&f.return()}finally{if(a)throw u}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var w=c,S=!0,E=!1,k=void 0;try{for(var I,A=e[Symbol.iterator]();!(S=(I=A.next()).done);S=!0){var T=I.value;T>=n&&T<w&&(w=T)}}catch(e){E=!0,k=e}finally{try{!S&&A.return&&A.return()}finally{if(E)throw k}}var P=v+1;w-n>g((c-i)/P)&&y("overflow"),i+=(w-n)*P,n=w;var O=!0,C=!1,M=void 0;try{for(var N,R=e[Symbol.iterator]();!(O=(N=R.next()).done);O=!0){var L=N.value;if(L<n&&++i>c&&y("overflow"),L==n){for(var j=i,D=l;;D+=l){var B=D<=o?1:D>=o+26?26:D-o;if(j<B)break;var U=j-B,F=l-B;t.push(m(_(B+U%F,0))),j=g(U/F)}t.push(m(_(j,0))),o=x(i,P,v==p),i=0,++v}}}catch(e){C=!0,M=e}finally{try{!O&&R.return&&R.return()}finally{if(C)throw M}}++i,++n}return t.join("")},k=function(e){return v(e,(function(e){return f.test(e)?"xn--"+E(e):e}))},I=function(e){return v(e,(function(e){return h.test(e)?S(e.slice(4).toLowerCase()):e}))},A={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var s=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,i)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function M(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(C).join("."):e}function N(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],o=n[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=u(s,2),c=a[0],l=a[1],h=l?l.split(":").map(C):[],f=c.split(":").map(C),d=t.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,g=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=h[y]||f[g+y]||"";d&&(m[p-1]=M(m[p-1],t));var v=m.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=m.slice(0,v.index),_=m.slice(v.index+v.length);b=w.join(":")+"::"+_.join(":")}else b=m.join(":");return o&&(b+="%"+o),b}return e}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,L=void 0==="".match(/(){0}/)[1];function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(R);if(i){L?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=N(M(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=A[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)O(r,n);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=k(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,s)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function D(e,t){var r=!1!==t.iri?a:s,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(N(M(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var B=/^\.\.?\//,U=/^\/\.(\/|$)/,F=/^\/\.\.(\/|$)/,z=/^\/?(?:.|\n)*?(?=\/|$)/;function V(e){for(var t=[];e.length;)if(e.match(B))e=e.replace(B,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(F))e=e.replace(F,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(z);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:s,n=[],i=A[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?I(e.host):k(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var o=D(e,t);if(void 0!==o&&("suffix"!==t.reference&&n.push("//"),n.push(o),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=V(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function K(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=j(H(e,r),r),t=j(H(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=V(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=V(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=V(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=V(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function q(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:s.PCT_ENCODED,P)}var $={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize};function G(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var J={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=G(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(G(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=u(r,2),i=n[0],o=n[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},X={scheme:"wss",domainHost:J.domainHost,parse:J.parse,serialize:J.serialize},Y={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",ee=r(r("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+r("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+r("%"+Q+Q)),te=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),re=new RegExp(Z,"g"),ne=new RegExp(ee,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',te),"g"),oe=new RegExp(t("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=oe;function ae(e){var t=P(e);return t.match(re)?t:e}var ue={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},s=r.query.split("&"),a=0,u=s.length;a<u;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),h=0,f=l.length;h<f;++h)n.push(l[h]);break;case"subject":r.subject=q(c[1],t);break;case"body":r.body=q(c[1],t);break;default:i=!0,o[q(c[0],t)]=q(c[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var d=0,p=n.length;d<p;++d){var g=n[d].split("@");if(g[0]=q(g[0]),t.unicodeSupport)g[1]=q(g[1],t).toLowerCase();else try{g[1]=k(q(g[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[d]=g.join("@")}return r},serialize:function(e,t){var r=e,n=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var o=0,s=n.length;o<s;++o){var a=String(n[o]),u=a.lastIndexOf("@"),c=a.slice(0,u).replace(ne,ae).replace(ne,i).replace(ie,T),l=a.slice(u+1);try{l=t.iri?I(l):k(q(l,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[o]=c+"@"+l}r.path=n.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var f=[];for(var d in h)h[d]!==Y[d]&&f.push(d.replace(ne,ae).replace(ne,i).replace(oe,T)+"="+h[d].replace(ne,ae).replace(ne,i).replace(se,T));return f.length&&(r.query=f.join("&")),r}},ce=/^([^\:]+)\:(.*)/,le={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ce),n=e;if(r){var i=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),s=r[2],a=i+":"+(t.nid||o),u=A[a];n.nid=o,n.nss=s,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),o=A[i];o&&(e=o.serialize(e,t));var s=e,a=e.nss;return s.path=(n||t.nid)+":"+a,s}},he=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,fe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(he)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};A[$.scheme]=$,A[W.scheme]=W,A[J.scheme]=J,A[X.scheme]=X,A[ue.scheme]=ue,A[le.scheme]=le,A[fe.scheme]=fe,e.SCHEMES=A,e.pctEncChar=T,e.pctDecChars=P,e.parse=j,e.removeDotSegments=V,e.serialize=H,e.resolveComponents=K,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return H(K(j(e,n),j(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=H(j(e,t),t):"object"===n(e)&&(e=j(H(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=H(j(e,r),r):"object"===n(e)&&(e=H(e,r)),"string"==typeof t?t=H(j(t,r),r):"object"===n(t)&&(t=H(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:s.ESCAPE,T)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(aD);var uD=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},cD={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:lD,checkDataTypes:function(e,t,r){if(1===e.length)return lD(e[0],t,r,!0);var n="",i=fD(e);for(var o in i.array&&i.object&&(n=i.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)n+=(n?" && ":"")+lD(o,t,r,!0);return n},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(hD[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(hD[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:fD,getProperty:gD,escapeQuotes:mD,equal:uD,ucs2length:function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:yD,getPathExpr:function(e,t,r,n){return wD(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return wD(e,yD(r?"/"+_D(t):gD(t)))},getData:function(e,t,r){var n,i,o,s;if(""===e)return"rootData";if("/"==e[0]){if(!vD.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(s=e.match(bD)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(i=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(o="data"+(t-n||""),!i)return o}for(var a=o,u=i.split("/"),c=0;c<u.length;c++){var l=u[c];l&&(a+=" && "+(o+=gD(xD(l))))}return a},unescapeFragment:function(e){return xD(decodeURIComponent(e))},unescapeJsonPointer:xD,escapeFragment:function(e){return encodeURIComponent(_D(e))},escapeJsonPointer:_D};function lD(e,t,r,n){var i=n?" !== ":" === ",o=n?" || ":" && ",s=n?"!":"",a=n?"":"!";switch(e){case"null":return t+i+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+o+"typeof "+t+i+'"object"'+o+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+a+"("+t+" % 1)"+o+t+i+t+(r?o+s+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?o+s+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var hD=fD(["string","number","integer","boolean","null"]);function fD(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var dD=/^[a-z$_][a-z$_0-9]*$/i,pD=/'|\\/g;function gD(e){return"number"==typeof e?"["+e+"]":dD.test(e)?"."+e:"['"+mD(e)+"']"}function mD(e){return e.replace(pD,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function yD(e){return"'"+mD(e)+"'"}var vD=/^\/(?:[^~]|~0|~1)*$/,bD=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function wD(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function _D(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function xD(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var SD=cD,ED=function(e){SD.copy(e,this)},kD={exports:{}},ID=kD.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),AD(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function AD(e,t,r,n,i,o,s,a,u,c){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var l in t(n,i,o,s,a,u,c),n){var h=n[l];if(Array.isArray(h)){if(l in ID.arrayKeywords)for(var f=0;f<h.length;f++)AD(e,t,r,h[f],i+"/"+l+"/"+f,o,i,l,n,f)}else if(l in ID.propsKeywords){if(h&&"object"==typeof h)for(var d in h)AD(e,t,r,h[d],i+"/"+l+"/"+d.replace(/~/g,"~0").replace(/\//g,"~1"),o,i,l,n,d)}else(l in ID.keywords||e.allKeys&&!(l in ID.skipKeywords))&&AD(e,t,r,h,i+"/"+l,o,i,l,n)}r(n,i,o,s,a,u,c)}}ID.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},ID.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},ID.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},ID.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var TD=aD,PD=uD,OD=cD,CD=ED,MD=kD.exports,ND=RD;function RD(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return RD.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof CD)return FD(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,s,a=LD.call(this,t,r);return a&&(i=a.schema,t=a.root,s=a.baseId),i instanceof CD?o=i.validate||e.call(this,i.schema,t,void 0,s):void 0!==i&&(o=FD(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function LD(e,t){var r=TD.parse(t),n=KD(r),i=HD(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==i){var o=$D(n),s=this._refs[o];if("string"==typeof s)return jD.call(this,e,s,r);if(s instanceof CD)s.validate||this._compile(s),e=s;else{if(!((s=this._schemas[o])instanceof CD))return;if(s.validate||this._compile(s),o==$D(t))return{schema:s,root:e,baseId:i};e=s}if(!e.schema)return;i=HD(this._getId(e.schema))}return BD.call(this,r,i,e.schema,e)}function jD(e,t,r){var n=LD.call(this,e,t);if(n){var i=n.schema,o=n.baseId;e=n.root;var s=this._getId(i);return s&&(o=WD(o,s)),BD.call(this,r,o,i,e)}}RD.normalizeId=$D,RD.fullPath=HD,RD.url=WD,RD.ids=function(e){var t=$D(this._getId(e)),r={"":t},n={"":HD(t,!1)},i={},o=this;return MD(e,{allKeys:!0},(function(e,t,s,a,u,c,l){if(""!==t){var h=o._getId(e),f=r[a],d=n[a]+"/"+u;if(void 0!==l&&(d+="/"+("number"==typeof l?l:OD.escapeFragment(l))),"string"==typeof h){h=f=$D(f?TD.resolve(f,h):h);var p=o._refs[h];if("string"==typeof p&&(p=o._refs[p]),p&&p.schema){if(!PD(e,p.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=$D(d))if("#"==h[0]){if(i[h]&&!PD(e,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=e}else o._refs[h]=d}r[t]=f,n[t]=d}})),i},RD.inlineRef=FD,RD.schema=LD;var DD=OD.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function BD(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(void 0===(r=r[s=OD.unescapeFragment(s)]))break;var a;if(!DD[s]&&((a=this._getId(r))&&(t=WD(t,a)),r.$ref)){var u=WD(t,r.$ref),c=LD.call(this,n,u);c&&(r=c.schema,n=c.root,t=c.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var UD=OD.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function FD(e,t){return!1!==t&&(void 0===t||!0===t?zD(e):t?VD(e)<=t:void 0)}function zD(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!zD(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!zD(t))return!1}return!0}function VD(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&(r+=VD(t)),r==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(UD[i])r++;else if("object"==typeof(t=e[i])&&(r+=VD(t)+1),r==1/0)return 1/0}return r}function HD(e,t){return!1!==t&&(e=$D(e)),KD(TD.parse(e))}function KD(e){return TD.serialize(e).split("#")[0]+"#"}var qD=/#\/?$/;function $D(e){return e?e.replace(qD,""):""}function WD(e,t){return t=$D(t),TD.resolve(e,t)}var GD=ND,JD={Validation:YD((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:YD(XD)};function XD(e,t,r){this.message=r||XD.message(e,t),this.missingRef=GD.url(e,t),this.missingSchema=GD.normalizeId(GD.fullPath(this.missingRef))}function YD(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}XD.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var ZD=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&function(e){return function(t){return function(r,n){var i={key:r,value:t[r]},o={key:n,value:t[n]};return e(i,o)}}}(t.cmp),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var o,s;if(Array.isArray(t)){for(s="[",o=0;o<t.length;o++)o&&(s+=","),s+=e(t[o])||"null";return s+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=i.push(t)-1,u=Object.keys(t).sort(n&&n(t));for(s="",o=0;o<u.length;o++){var c=u[o],l=e(t[c]);l&&(s&&(s+=","),s+=JSON.stringify(c)+":"+l)}return i.splice(a,1),"{"+s+"}"}}(e)},QD=function(e,t,r){var n="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var u="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(u);e.logger.warn(u)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){t="false schema";var c=e.level,l=e.dataLevel,h=e.schema[t],f=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,g="data"+(l||""),m="valid"+c;if(!1===e.schema){e.isTop?p=!0:n+=" var "+m+" = false; ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ";var y=n;n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+m+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;if(c=e.level=0,l=e.dataLevel=0,g="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(c=e.level,g="data"+((l=e.dataLevel)||""),s&&(e.baseId=e.resolve.url(e.baseId,s)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}m="valid"+c,p=!e.opts.allErrors;var w="",_="",x=e.schema.type,S=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(S?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],S=!0)),S&&1==x.length&&(x=x[0],S=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,x);var k=e.RULES.types[x];if(E||S||!0===k||k&&!Y(k)){f=e.schemaPath+".type",d=e.errSchemaPath+"/type",f=e.schemaPath+".type",d=e.errSchemaPath+"/type";var I=S?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[I](x,g,e.opts.strictNumbers,!0)+") { ",E){var A="dataType"+c,T="coerced"+c;n+=" var "+A+" = typeof "+g+"; var "+T+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+A+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+A+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+T+" = "+g+"; } "),n+=" if ("+T+" !== undefined) ; ";var P=E;if(P)for(var O,C=-1,M=P.length-1;C<M;)"string"==(O=P[C+=1])?n+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+T+" = '' + "+g+"; else if ("+g+" === null) "+T+" = ''; ":"number"==O||"integer"==O?(n+=" else if ("+A+" == 'boolean' || "+g+" === null || ("+A+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==O&&(n+=" && !("+g+" % 1)"),n+=")) "+T+" = +"+g+"; "):"boolean"==O?n+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+T+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+T+" = true; ":"null"==O?n+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+g+" == null) "+T+" = ["+g+"]; ");n+=" else {   ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",y=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+T+" !== undefined) {  ";var N=l?"data"+(l-1||""):"parentData";n+=" "+g+" = "+T+"; ",l||(n+="if ("+N+" !== undefined)"),n+=" "+N+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+T+"; } "}else(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",y=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(e.schema.$ref&&!o)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(n+=" } if (errors === ",n+=v?"0":"errs_"+c,n+=") { ",_+="}");else{var R=e.RULES;if(R)for(var L=-1,j=R.length-1;L<j;)if(Y(k=R[L+=1])){if(k.type&&(n+=" if ("+e.util.checkDataType(k.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==k.type&&e.schema.properties){h=e.schema.properties;var D=Object.keys(h);if(D)for(var B,U=-1,F=D.length-1;U<F;)if(void 0!==(H=h[B=D[U+=1]]).default){var z=g+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+z,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}else if("array"==k.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){C=-1;for(var H,K=V.length-1;C<K;)if(void 0!==(H=V[C+=1]).default)if(z=g+"["+C+"]",e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+z,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(H.default)+" ":n+=" "+JSON.stringify(H.default)+" ",n+="; "}}var q,$=k.rules;if($)for(var W,G=-1,J=$.length-1;G<J;)if(Z(W=$[G+=1])){var X=W.code(e,W.keyword,k.type);X&&(n+=" "+X+" ",p&&(w+="}"))}if(p&&(n+=" "+w+" ",w=""),k.type&&(n+=" } ",x&&x===k.type&&!E))n+=" else { ",f=e.schemaPath+".type",d=e.errSchemaPath+"/type",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=S?""+x.join(","):""+x,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=S?""+x.join(","):""+x,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),n+=" } "):n+=" {} ",y=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ";p&&(n+=" if (errors === ",n+=v?"0":"errs_"+c,n+=") { ",_+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return p&&(n+=" "+_+" "),v?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+m+" = errors === errs_"+c+";",n},eB=ND,tB=cD,rB=JD,nB=ZD,iB=QD,oB=tB.ucs2length,sB=uD,aB=rB.Validation;function uB(e,t,r){var n=lB.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function cB(e,t,r){var n=lB.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function lB(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function hB(e,t){return"var pattern"+e+" = new RegExp("+tB.toQuotedString(t[e])+");"}function fB(e){return"var default"+e+" = defaults["+e+"];"}function dB(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function pB(e){return"var customRule"+e+" = customRules["+e+"];"}function gB(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}var mB={exports:{}},yB=mB.exports=function(){this._cache={}};yB.prototype.put=function(e,t){this._cache[e]=t},yB.prototype.get=function(e){return this._cache[e]},yB.prototype.del=function(e){delete this._cache[e]},yB.prototype.clear=function(){this._cache={}};var vB=cD,bB=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,wB=[0,31,28,31,30,31,30,31,31,30,31,30,31],_B=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,xB=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,SB=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,EB=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,kB=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,IB=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,AB=/^(?:\/(?:[^~/]|~0|~1)*)*$/,TB=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,PB=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,OB=CB;function CB(e){return e="full"==e?"full":"fast",vB.copy(CB[e])}function MB(e){var t=e.match(bB);if(!t)return!1;var r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:wB[n])}function NB(e,t){var r=e.match(_B);if(!r)return!1;var n=r[1],i=r[2],o=r[3],s=r[5];return(n<=23&&i<=59&&o<=59||23==n&&59==i&&60==o)&&(!t||s)}CB.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":EB,url:kB,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:xB,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:DB,uuid:IB,"json-pointer":AB,"json-pointer-uri-fragment":TB,"relative-json-pointer":PB},CB.full={date:MB,time:NB,"date-time":function(e){var t=e.split(RB);return 2==t.length&&MB(t[0])&&NB(t[1],!0)},uri:function(e){return LB.test(e)&&SB.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":EB,url:kB,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:xB,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:DB,uuid:IB,"json-pointer":AB,"json-pointer-uri-fragment":TB,"relative-json-pointer":PB};var RB=/t|\s/i,LB=/\/|:/,jB=/[^\\]\\Z/;function DB(e){if(jB.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var BB=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[p],m=e.opts.$data&&g&&g.$data,y=d?"<":">",v=d?">":"<",b=void 0;if(!f&&"number"!=typeof a&&void 0!==a)throw new Error(t+" must be number");if(!m&&void 0!==g&&"number"!=typeof g&&"boolean"!=typeof g)throw new Error(p+" must be number or boolean");if(m){var w,_=e.util.getData(g.$data,s,e.dataPathArr),x="exclusive"+o,S="exclType"+o,E="exclIsNumber"+o,k="' + "+(A="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+_+"; ",i+=" var "+x+"; var "+S+" = typeof "+(_="schemaExcl"+o)+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ",b=p,(w=w||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var I=i;i=w.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+S+" == 'number' ? ( ("+x+" = "+n+" === undefined || "+_+" "+y+"= "+n+") ? "+h+" "+v+"= "+_+" : "+h+" "+v+" "+n+" ) : ( ("+x+" = "+_+" === true) ? "+h+" "+v+"= "+n+" : "+h+" "+v+" "+n+" ) || "+h+" !== "+h+") { var op"+o+" = "+x+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(b=p,c=e.errSchemaPath+"/"+p,n=_,f=m)}else if(k=y,(E="number"==typeof g)&&f){var A="'"+k+"'";i+=" if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+g+" "+y+"= "+n+" ? "+h+" "+v+"= "+g+" : "+h+" "+v+" "+n+" ) || "+h+" !== "+h+") { "}else E&&void 0===a?(x=!0,b=p,c=e.errSchemaPath+"/"+p,n=g,v+="="):(E&&(n=Math[d?"min":"max"](g,a)),g===(!E||n)?(x=!0,b=p,c=e.errSchemaPath+"/"+p,v+="="):(x=!1,k+="=")),A="'"+k+"'",i+=" if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+h+" "+v+" "+n+" || "+h+" !== "+h+") { ";return b=b||t,(w=w||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+A+", limit: "+n+", exclusive: "+x+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+k+" ",i+=f?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",I=i,i=w.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i},UB=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!f&&"number"!=typeof a)throw new Error(t+" must be number");i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=f?"' + "+n+" + '":""+a,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},FB=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!f&&"number"!=typeof a)throw new Error(t+" must be number");var d="maxLength"==t?">":"<";i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+d+" "+n+") { ";var p=t,g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=f?"' + "+n+" + '":""+a,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},zB=function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!f&&"number"!=typeof a)throw new Error(t+" must be number");i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=f?"' + "+n+" + '":""+a,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},VB={$ref:function(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f="valid"+s;if("#"==u||"#/"==u)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var g=o;o=v.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,p);e.logger.warn(p),l&&(o+=" if (true) { ")}}else if(d.inline){var m=e.util.copy(e);m.level++;var y="valid"+m.level;m.schema=d.schema,m.schemaPath="",m.errSchemaPath=u,o+=" "+e.validate(m).replace(/validate\.schema/g,d.code)+" ",l&&(o+=" if ("+y+") { ")}else n=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+h+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+f+"; "),o+=" try { await "+b+"; ",l&&(o+=" "+f+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+f+" = false; "),o+=" } ",l&&(o+=" if ("+f+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o},allOf:function(e,t,r){var n=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,h=u.baseId,f=!0,d=i;if(d)for(var p,g=-1,m=d.length-1;g<m;)p=d[g+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,u.schema=p,u.schemaPath=o+"["+g+"]",u.errSchemaPath=s+"/"+g,n+="  "+e.validate(u)+" ",u.baseId=h,a&&(n+=" if ("+l+") { ",c+="}"));return a&&(n+=f?" if (true) { ":" "+c.slice(0,-1)+" "),n},anyOf:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var g="valid"+d.level,m=s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}));if(m){var y=d.baseId;n+=" var "+f+" = errors; var "+h+" = false;  ";var v=e.compositeRule;e.compositeRule=d.compositeRule=!0;var b=s;if(b)for(var w,_=-1,x=b.length-1;_<x;)w=b[_+=1],d.schema=w,d.schemaPath=a+"["+_+"]",d.errSchemaPath=u+"/"+_,n+="  "+e.validate(d)+" ",d.baseId=y,n+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",p+="}";e.compositeRule=d.compositeRule=v,n+=" "+p+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else c&&(n+=" if (true) { ");return n},$comment:function(e,t,r){var n=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t;e.opts.allErrors;var s=e.util.toQuotedString(i);return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(o)+", validate.root.schema);"),n},const:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&s&&s.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; "),f||(n+=" var schema"+i+" = validate.schema"+a+";"),n+="var "+h+" = equal("+l+", schema"+i+"); if (!"+h+") {   ";var d=d||[];d.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n},contains:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,g="i"+i,m=d.dataLevel=e.dataLevel+1,y="data"+m,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+f+" = errors;var "+h+";",b){var w=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=s,d.schemaPath=a,d.errSchemaPath=u,n+=" var "+p+" = false; for (var "+g+" = 0; "+g+" < "+l+".length; "+g+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var _=l+"["+g+"]";d.dataPathArr[m]=g;var x=e.validate(d);d.baseId=v,e.util.varOccurences(x,y)<2?n+=" "+e.util.varReplace(x,y,_)+" ":n+=" var "+y+" = "+_+"; "+x+" ",n+=" if ("+p+") break; }  ",e.compositeRule=d.compositeRule=w,n+="  if (!"+p+") {"}else n+=" if ("+l+".length == 0) {";var S=S||[];S.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var E=n;return n=S.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n},dependencies:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,g={},m={},y=e.opts.ownProperties;for(_ in s)if("__proto__"!=_){var v=s[_],b=Array.isArray(v)?m:g;b[_]=v}n+="var "+h+" = errors;";var w=e.errorPath;for(var _ in n+="var missing"+i+";",m)if((b=m[_]).length){if(n+=" if ( "+l+e.util.getProperty(_)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(_)+"') "),c){n+=" && ( ";var x=b;if(x)for(var S=-1,E=x.length-1;S<E;)O=x[S+=1],S&&(n+=" || "),n+=" ( ( "+(R=l+(N=e.util.getProperty(O)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:N)+") ) ";n+=")) {  ";var k="missing"+i,I="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,k,!0):w+" + "+k);var A=A||[];A.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+I+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var T=n;n=A.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var P=b;if(P)for(var O,C=-1,M=P.length-1;C<M;){O=P[C+=1];var N=e.util.getProperty(O),R=(I=e.util.escapeQuotes(O),l+N);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+I+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(d+="}",n+=" else { ")}e.errorPath=w;var L=f.baseId;for(var _ in g)v=g[_],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+p+" = true; if ( "+l+e.util.getProperty(_)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(_)+"') "),n+=") { ",f.schema=v,f.schemaPath=a+e.util.getProperty(_),f.errSchemaPath=u+"/"+e.util.escapeFragment(_),n+="  "+e.validate(f)+" ",f.baseId=L,n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}"));return c&&(n+="   "+d+" if ("+h+" == errors) {"),n},enum:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&s&&s.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;f||(n+=" var "+p+" = validate.schema"+a+";"),n+="var "+h+";",f&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=h+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+l+", "+p+"["+d+"])) { "+h+" = true; break; }",f&&(n+="  }  "),n+=" if (!"+h+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var m=n;return n=g.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n},format:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var h,f=e.opts.$data&&s&&s.$data;f?(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=s;var d=e.opts.unknownFormats,p=Array.isArray(d);if(f)n+=" var "+(g="format"+i)+" = formats["+h+"]; var "+(m="isObject"+i)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(y="formatType"+i)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",e.async&&(n+=" var async"+i+" = "+g+".async; "),n+=" "+g+" = "+g+".validate; } if (  ",f&&(n+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),n+=" (","ignore"!=d&&(n+=" ("+h+" && !"+g+" ",p&&(n+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),n+=") || "),n+=" ("+g+" && "+y+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?n+=" (async"+i+" ? await "+g+"("+l+") : "+g+"("+l+")) ":n+=" "+g+"("+l+") ",n+=" : "+g+".test("+l+"))))) {";else{var g;if(!(g=e.formats[s])){if("ignore"==d)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(p&&d.indexOf(s)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,y=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var v=!0===g.async;g=g.validate}if(y!=r)return c&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(s)+".validate")+"("+l+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(s);m&&(b+=".validate"),n+="function"==typeof g?" "+b+"("+l+") ":" "+b+".test("+l+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",n+=f?""+h:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=f?"' + "+h+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var _=n;return n=w.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n},if:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,g=e.schema.then,m=e.schema.else,y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),b=d.baseId;if(y||v){var w;d.createErrors=!1,d.schema=s,d.schemaPath=a,d.errSchemaPath=u,n+=" var "+f+" = errors; var "+h+" = true;  ";var _=e.compositeRule;e.compositeRule=d.compositeRule=!0,n+="  "+e.validate(d)+" ",d.baseId=b,d.createErrors=!0,n+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=_,y?(n+=" if ("+p+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(d)+" ",d.baseId=b,n+=" "+h+" = "+p+"; ",y&&v?n+=" var "+(w="ifClause"+i)+" = 'then'; ":w="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+p+") { ",v&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(d)+" ",d.baseId=b,n+=" "+h+" = "+p+"; ",y&&v?n+=" var "+(w="ifClause"+i)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { ")}else c&&(n+=" if (true) { ");return n},items:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var g="valid"+d.level,m="i"+i,y=d.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+f+" = errors;var "+h+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){n+=" "+h+" = "+l+".length <= "+s.length+"; ";var _=u;u=e.errSchemaPath+"/additionalItems",n+="  if (!"+h+") {   ";var x=x||[];x.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;n=x.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+S+"]); ":n+=" validate.errors = ["+S+"]; return false; ":n+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=_,c&&(p+="}",n+=" else { ")}var E=s;if(E)for(var k,I=-1,A=E.length-1;I<A;)if(k=E[I+=1],e.opts.strictKeywords?"object"==typeof k&&Object.keys(k).length>0||!1===k:e.util.schemaHasRules(k,e.RULES.all)){n+=" "+g+" = true; if ("+l+".length > "+I+") { ";var T=l+"["+I+"]";d.schema=k,d.schemaPath=a+"["+I+"]",d.errSchemaPath=u+"/"+I,d.errorPath=e.util.getPathExpr(e.errorPath,I,e.opts.jsonPointers,!0),d.dataPathArr[y]=I;var P=e.validate(d);d.baseId=b,e.util.varOccurences(P,v)<2?n+=" "+e.util.varReplace(P,v,T)+" ":n+=" var "+v+" = "+T+"; "+P+" ",n+=" }  ",c&&(n+=" if ("+g+") { ",p+="}")}"object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))&&(d.schema=w,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+g+" = true; if ("+l+".length > "+s.length+") {  for (var "+m+" = "+s.length+"; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),T=l+"["+m+"]",d.dataPathArr[y]=m,P=e.validate(d),d.baseId=b,e.util.varOccurences(P,v)<2?n+=" "+e.util.varReplace(P,v,T)+" ":n+=" var "+v+" = "+T+"; "+P+" ",c&&(n+=" if (!"+g+") break; "),n+=" } }  ",c&&(n+=" if ("+g+") { ",p+="}"))}else(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all))&&(d.schema=s,d.schemaPath=a,d.errSchemaPath=u,n+="  for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),T=l+"["+m+"]",d.dataPathArr[y]=m,P=e.validate(d),d.baseId=b,e.util.varOccurences(P,v)<2?n+=" "+e.util.varReplace(P,v,T)+" ":n+=" var "+v+" = "+T+"; "+P+" ",c&&(n+=" if (!"+g+") break; "),n+=" }");return c&&(n+=" "+p+" if ("+f+" == errors) {"),n},maximum:BB,minimum:BB,maxItems:UB,minItems:UB,maxLength:FB,minLength:FB,maxProperties:zB,minProperties:zB,multipleOf:function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,!f&&"number"!=typeof a)throw new Error(t+" must be number");i+="var division"+o+";if (",f&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",f&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=f?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},not:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=u,n+=" var "+h+" = errors;  ";var p,g=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),n+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=g,n+=" if ("+d+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n},oneOf:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var g="valid"+d.level,m=d.baseId,y="prevValid"+i,v="passingSchemas"+i;n+="var "+f+" = errors , "+y+" = false , "+h+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0;var w=s;if(w)for(var _,x=-1,S=w.length-1;x<S;)_=w[x+=1],(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))?(d.schema=_,d.schemaPath=a+"["+x+"]",d.errSchemaPath=u+"/"+x,n+="  "+e.validate(d)+" ",d.baseId=m):n+=" var "+g+" = true; ",x&&(n+=" if ("+g+" && "+y+") { "+h+" = false; "+v+" = ["+v+", "+x+"]; } else { ",p+="}"),n+=" if ("+g+") { "+h+" = "+y+" = true; "+v+" = "+x+"; }";return e.compositeRule=d.compositeRule=b,n+=p+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n},pattern:function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+(f?"(new RegExp("+n+"))":e.usePattern(a))+".test("+h+") ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=f?""+n:""+e.util.toQuotedString(a),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=f?"' + "+n+" + '":""+e.util.escapeQuotes(a),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},properties:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,g="key"+i,m="idx"+i,y=f.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+i,w=Object.keys(s||{}).filter(N),_=e.schema.patternProperties||{},x=Object.keys(_).filter(N),S=e.schema.additionalProperties,E=w.length||x.length,k=!1===S,I="object"==typeof S&&Object.keys(S).length,A=e.opts.removeAdditional,T=k||I||A,P=e.opts.ownProperties,O=e.baseId,C=e.schema.required;if(C&&(!e.opts.$data||!C.$data)&&C.length<e.opts.loopRequired)var M=e.util.toHash(C);function N(e){return"__proto__"!==e}if(n+="var "+h+" = errors;var "+p+" = true;",P&&(n+=" var "+b+" = undefined;"),T){if(n+=P?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+l+") { ",E){if(n+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+g+") ";else{var R=w;if(R)for(var L=-1,j=R.length-1;L<j;)J=R[L+=1],n+=" || "+g+" == "+e.util.toQuotedString(J)+" "}if(x.length){var D=x;if(D)for(var B=-1,U=D.length-1;B<U;)oe=D[B+=1],n+=" || "+e.usePattern(oe)+".test("+g+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==A)n+=" delete "+l+"["+g+"]; ";else{var F=e.errorPath,z="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),k)if(A)n+=" delete "+l+"["+g+"]; ";else{n+=" "+p+" = false; ";var V=u;u=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+z+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var H=n;n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=V,c&&(n+=" break; ")}else if(I)if("failing"==A){n+=" var "+h+" = errors;  ";var K=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=S,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var q=l+"["+g+"]";f.dataPathArr[y]=g;var $=e.validate(f);f.baseId=O,e.util.varOccurences($,v)<2?n+=" "+e.util.varReplace($,v,q)+" ":n+=" var "+v+" = "+q+"; "+$+" ",n+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+g+"]; }  ",e.compositeRule=f.compositeRule=K}else f.schema=S,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),q=l+"["+g+"]",f.dataPathArr[y]=g,$=e.validate(f),f.baseId=O,e.util.varOccurences($,v)<2?n+=" "+e.util.varReplace($,v,q)+" ":n+=" var "+v+" = "+q+"; "+$+" ",c&&(n+=" if (!"+p+") break; ");e.errorPath=F}E&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(w.length){var G=w;if(G)for(var J,X=-1,Y=G.length-1;X<Y;){var Z=s[J=G[X+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){var Q=e.util.getProperty(J),ee=(q=l+Q,W&&void 0!==Z.default);if(f.schema=Z,f.schemaPath=a+Q,f.errSchemaPath=u+"/"+e.util.escapeFragment(J),f.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),f.dataPathArr[y]=e.util.toQuotedString(J),$=e.validate(f),f.baseId=O,e.util.varOccurences($,v)<2){$=e.util.varReplace($,v,q);var te=q}else te=v,n+=" var "+v+" = "+q+"; ";if(ee)n+=" "+$+" ";else{if(M&&M[J]){n+=" if ( "+te+" === undefined ",P&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+p+" = false; ",F=e.errorPath,V=u;var re,ne=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,J,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",H=n,n=re.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+H+"]); ":n+=" validate.errors = ["+H+"]; return false; ":n+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=V,e.errorPath=F,n+=" } else { "}else c?(n+=" if ( "+te+" === undefined ",P&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=") { "+p+" = true; } else { "):(n+=" if ("+te+" !== undefined ",P&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(J)+"') "),n+=" ) { ");n+=" "+$+" } "}}c&&(n+=" if ("+p+") { ",d+="}")}}if(x.length){var ie=x;if(ie)for(var oe,se=-1,ae=ie.length-1;se<ae;)Z=_[oe=ie[se+=1]],(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all))&&(f.schema=Z,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),n+=P?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+l+") { ",n+=" if ("+e.usePattern(oe)+".test("+g+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),q=l+"["+g+"]",f.dataPathArr[y]=g,$=e.validate(f),f.baseId=O,e.util.varOccurences($,v)<2?n+=" "+e.util.varReplace($,v,q)+" ":n+=" var "+v+" = "+q+"; "+$+" ",c&&(n+=" if (!"+p+") break; "),n+=" } ",c&&(n+=" else "+p+" = true; "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}"))}return c&&(n+=" "+d+" if ("+h+" == errors) {"),n},propertyNames:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(n+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=u;var p="key"+i,g="idx"+i,m="i"+i,y="' + "+p+" + '",v="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+i,w=e.opts.ownProperties,_=e.baseId;w&&(n+=" var "+b+" = undefined; "),n+=w?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+p+" = "+b+"["+g+"]; ":" for (var "+p+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var x=p,S=e.compositeRule;e.compositeRule=f.compositeRule=!0;var E=e.validate(f);f.baseId=_,e.util.varOccurences(E,v)<2?n+=" "+e.util.varReplace(E,v,x)+" ":n+=" var "+v+" = "+x+"; "+E+" ",e.compositeRule=f.compositeRule=S,n+=" if (!"+d+") { for (var "+m+"=startErrs"+i+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+h+" == errors) {"),n},required:function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&s&&s.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var d="schema"+i;if(!f)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],g=s;if(g)for(var m,y=-1,v=g.length-1;y<v;){m=g[y+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=m)}}else p=s;if(f||p.length){var w=e.errorPath,_=f||p.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",_){f||(n+=" var "+d+" = validate.schema"+a+"; ");var S="' + "+(P="schema"+i+"["+(A="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,P,e.opts.jsonPointers)),n+=" var "+h+" = true; ",f&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=" for (var "+A+" = 0; "+A+" < "+d+".length; "+A+"++) { "+h+" = "+l+"["+d+"["+A+"]] !== undefined ",x&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+d+"["+A+"]) "),n+="; if (!"+h+") break; } ",f&&(n+="  }  "),n+="  if (!"+h+") {   ",(k=k||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var E=n;n=k.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var k,I=p;if(I)for(var A=-1,T=I.length-1;A<T;)C=I[A+=1],A&&(n+=" || "),n+=" ( ( "+(L=l+(R=e.util.getProperty(C)))+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(C)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:R)+") ) ";n+=") {  ",S="' + "+(P="missing"+i)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,P,!0):w+" + "+P),(k=k||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",E=n,n=k.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(_){var P;f||(n+=" var "+d+" = validate.schema"+a+"; "),S="' + "+(P="schema"+i+"["+(A="i"+i)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,P,e.opts.jsonPointers)),f&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+A+" = 0; "+A+" < "+d+".length; "+A+"++) { if ("+l+"["+d+"["+A+"]] === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+d+"["+A+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(n+="  }  ")}else{var O=p;if(O)for(var C,M=-1,N=O.length-1;M<N;){C=O[M+=1];var R=e.util.getProperty(C),L=(S=e.util.escapeQuotes(C),l+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,C,e.opts.jsonPointers)),n+=" if ( "+L+" === undefined ",x&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(C)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(n+=" if (true) {");return n},uniqueItems:function(e,t,r){var n,i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f="valid"+o,d=e.opts.$data&&a&&a.$data;if(d?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+o):n=a,(a||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+f+"; if ("+n+" === false || "+n+" === undefined) "+f+" = true; else if (typeof "+n+" != 'boolean') "+f+" = false; else { "),i+=" var i = "+h+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,g=Array.isArray(p);if(!p||"object"==p||"array"==p||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+f+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var m="checkDataType"+(g?"s":"");i+=" if ("+e.util[m](p,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",d&&(i+="  }  "),i+=" if (!"+f+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;i=y.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i},validate:QD},HB=VB,KB=cD.toHash,qB=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],$B=JD.MissingRef,WB={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},GB=WB,JB={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:GB.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:GB.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},XB=/^[a-z_$][a-z0-9_$-]*$/i,YB=function(e,t,r){var n,i,o=" ",s=e.level,a=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,f="data"+(a||""),d="valid"+s,p="errs__"+s,g=e.opts.$data&&u&&u.$data;g?(o+=" var schema"+s+" = "+e.util.getData(u.$data,a,e.dataPathArr)+"; ",i="schema"+s):i=u;var m,y,v,b,w,_=this,x="definition"+s,S=_.definition,E="";if(g&&S.$data){w="keywordValidate"+s;var k=S.validateSchema;o+=" var "+x+" = RULES.custom['"+t+"'].definition; var "+w+" = "+x+".validate;"}else{if(!(b=e.useCustomRule(_,u,e.schema,e)))return;i="validate.schema"+c,w=b.code,m=S.compile,y=S.inline,v=S.macro}var I=w+".errors",A="i"+s,T="ruleErr"+s,P=S.async;if(P&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(o+=I+" = null;"),o+="var "+p+" = errors;var "+d+";",g&&S.$data&&(E+="}",o+=" if ("+i+" === undefined) { "+d+" = true; } else { ",k&&(E+="}",o+=" "+d+" = "+x+".validateSchema("+i+"); if ("+d+") { ")),y)S.statements?o+=" "+b.validate+" ":o+=" "+d+" = "+b.validate+"; ";else if(v){var O=e.util.copy(e);E="",O.level++;var C="valid"+O.level;O.schema=b.validate,O.schemaPath="";var M=e.compositeRule;e.compositeRule=O.compositeRule=!0;var N=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=M,o+=" "+N}else{(D=D||[]).push(o),o="",o+="  "+w+".call( ",e.opts.passContext?o+="this":o+="self",m||!1===S.schema?o+=" , "+f+" ":o+=" , "+i+" , "+f+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var R=a?"data"+(a-1||""):"parentData",L=a?e.dataPathArr[a]:"parentDataProperty",j=o+=" , "+R+" , "+L+" , rootData )  ";o=D.pop(),!1===S.errors?(o+=" "+d+" = ",P&&(o+="await "),o+=j+"; "):o+=P?" var "+(I="customErrors"+s)+" = null; try { "+d+" = await "+j+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+I+" = e.errors; else throw e; } ":" "+I+" = null; "+d+" = "+j+"; "}if(S.modifying&&(o+=" if ("+R+") "+f+" = "+R+"["+L+"];"),o+=""+E,S.valid)h&&(o+=" if (true) { ");else{var D;o+=" if ( ",void 0===S.valid?(o+=" !",o+=v?""+C:""+d):o+=" "+!S.valid+" ",o+=") { ",n=_.keyword,(D=D||[]).push(o),o="",(D=D||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var B=o;o=D.pop(),!e.compositeRule&&h?e.async?o+=" throw new ValidationError(["+B+"]); ":o+=" validate.errors = ["+B+"]; return false; ":o+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var U=o;o=D.pop(),y?S.errors?"full"!=S.errors&&(o+="  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+i+"; "+T+".data = "+f+"; "),o+=" } "):!1===S.errors?o+=" "+U+" ":(o+=" if ("+p+" == errors) { "+U+" } else {  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+i+"; "+T+".data = "+f+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===S.errors?o+=" "+U+" ":(o+=" if (Array.isArray("+I+")) { if (vErrors === null) vErrors = "+I+"; else vErrors = vErrors.concat("+I+"); errors = vErrors.length;  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(o+=" "+T+".schema = "+i+"; "+T+".data = "+f+"; "),o+=" } } else { "+U+" } "),o+=" } ",h&&(o+=" else { ")}return o},ZB=JB,QB={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!XB.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var n=t.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)s(e,n[i],t);else s(e,n,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function s(e,t,n){for(var i,o=0;o<r.length;o++){var s=r[o];if(s.type==t){i=s;break}}i||(i={type:t,rules:[]},r.push(i));var a={keyword:e,definition:n,custom:!0,code:YB,implements:n.implements};i.rules.push(a),r.custom[e]=a}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(ZB,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}},eU={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},tU=function e(t,r,n,i){var o=this,s=this._opts,a=[void 0],u={},c=[],l={},h=[],f={},d=[];r=r||{schema:t,refVal:a,refs:u};var p=uB.call(this,t,r,i),g=this._compilations[p.index];if(p.compiling)return g.callValidate=function e(){var t=g.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var m=this._formats,y=this.RULES;try{var v=w(t,r,n,i);g.validate=v;var b=g.callValidate;return b&&(b.schema=v.schema,b.errors=null,b.refs=v.refs,b.refVal=v.refVal,b.root=v.root,b.$async=v.$async,s.sourceCode&&(b.source=v.source)),v}finally{cB.call(this,t,r,i)}function w(t,n,i,l){var f=!n||n&&n.schema==t;if(n.schema!=r.schema)return e.call(o,t,n,i,l);var p,g=!0===t.$async,v=iB({isTop:!0,schema:t,isRoot:f,baseId:l,root:n,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:rB.MissingRef,RULES:y,validate:iB,util:tB,resolve:eB,resolveRef:_,usePattern:E,useDefault:k,useCustomRule:I,opts:s,formats:m,logger:o.logger,self:o});v=gB(a,dB)+gB(c,hB)+gB(h,fB)+gB(d,pB)+v,s.processCode&&(v=s.processCode(v,t));try{p=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",v)(o,y,m,r,a,h,d,sB,oB,aB),a[0]=p}catch(e){throw o.logger.error("Error compiling schema, function code:",v),e}return p.schema=t,p.errors=null,p.refs=u,p.refVal=a,p.root=f?p:n,g&&(p.$async=!0),!0===s.sourceCode&&(p.source={code:v,patterns:c,defaults:h}),p}function _(t,i,c){i=eB.url(t,i);var l,h,f=u[i];if(void 0!==f)return S(l=a[f],h="refVal["+f+"]");if(!c&&r.refs){var d=r.refs[i];if(void 0!==d)return S(l=r.refVal[d],h=x(i,l))}h=x(i);var p=eB.call(o,w,r,i);if(void 0===p){var g=n&&n[i];g&&(p=eB.inlineRef(g,s.inlineRefs)?g:e.call(o,g,r,n,t))}if(void 0!==p)return function(e,t){var r=u[e];a[r]=t}(i,p),S(p,h);!function(e){delete u[e]}(i)}function x(e,t){var r=a.length;return a[r]=t,u[e]=r,"refVal"+r}function S(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function E(e){var t=l[e];return void 0===t&&(t=l[e]=c.length,c[t]=e),"pattern"+t}function k(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return tB.toQuotedString(e);case"object":if(null===e)return"null";var t=nB(e),r=f[t];return void 0===r&&(r=f[t]=h.length,h[r]=e),"default"+r}}function I(e,t,r,n){if(!1!==o._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var a=e.definition.validateSchema;if(a&&!a(t)){var u="keyword schema is invalid: "+o.errorsText(a.errors);if("log"!=o._opts.validateSchema)throw new Error(u);o.logger.error(u)}}var c,l=e.definition.compile,h=e.definition.inline,f=e.definition.macro;if(l)c=l.call(o,t,r,n);else if(f)c=f.call(o,t,r,n),!1!==s.validateSchema&&o.validateSchema(c,!0);else if(h)c=h.call(o,n,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var p=d.length;return d[p]=c,{code:"customRule"+p,validate:c}}},rU=ND,nU=mB.exports,iU=ED,oU=ZD,sU=OB,aU=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var n,i=t[r].split("/"),o=e;for(n=1;n<i.length;n++)o=o[i[n]];for(n=0;n<qB.length;n++){var s=qB[n],a=o[s];a&&(o[s]={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},uU=cD,cU=gU;gU.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i},gU.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},gU.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return _U(this,t=rU.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,n,!0),this},gU.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},gU.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(fU)?fU:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},gU.prototype.getSchema=function(e){var t=mU(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=rU.schema.call(e,{schema:{}},t);if(r){var n=r.schema,i=r.root,o=r.baseId,s=tU.call(e,n,i,void 0,o);return e._fragments[t]=new iU({ref:t,fragment:!0,schema:n,root:i,baseId:o,validate:s}),s}}(this,e)}},gU.prototype.removeSchema=function(e){if(e instanceof RegExp)return yU(this,this._schemas,e),yU(this,this._refs,e),this;switch(typeof e){case"undefined":return yU(this,this._schemas),yU(this,this._refs),this._cache.clear(),this;case"string":var t=mU(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var i=this._getId(e);i&&(i=rU.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},gU.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},gU.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var s=e[o];s&&(i+=n+s.dataPath+" "+s.message+r)}return i.slice(0,-r.length)},gU.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(e):e,s=this._cache.get(o);if(s)return s;n=n||!1!==this._opts.addUsedSchema;var a=rU.normalizeId(this._getId(e));a&&n&&_U(this,a);var u,c=!1!==this._opts.validateSchema&&!t;c&&!(u=a&&a==rU.normalizeId(e.$schema))&&this.validateSchema(e,!0);var l=rU.ids.call(this,e),h=new iU({id:a,schema:e,localRefs:l,cacheKey:o,meta:r});return"#"!=a[0]&&n&&(this._refs[a]=h),this._cache.put(o,h),c&&u&&this.validateSchema(e,!0),h},gU.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=tU.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},gU.prototype.compileAsync=function e(t,r,n){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(n=r,r=void 0);var o=s(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||a(e)}));return n&&o.then((function(e){n(null,e)}),n),o;function s(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}function a(e){try{return i._compile(e)}catch(t){if(t instanceof $B)return function(t){var n=t.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var o=i._loadingSchemas[n];return o||(o=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(u,u),o.then((function(e){if(!c(n))return s(e).then((function(){c(n)||i.addSchema(e,n,void 0,r)}))})).then((function(){return a(e)}));function u(){delete i._loadingSchemas[n]}function c(e){return i._refs[e]||i._schemas[e]}}(t);throw t}}};var lU=QB;gU.prototype.addKeyword=lU.add,gU.prototype.getKeyword=lU.get,gU.prototype.removeKeyword=lU.remove,gU.prototype.validateKeyword=lU.validate;var hU=JD;gU.ValidationError=hU.Validation,gU.MissingRefError=hU.MissingRef,gU.$dataMetaSchema=aU;var fU="http://json-schema.org/draft-07/schema",dU=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],pU=["/properties"];function gU(e){if(!(this instanceof gU))return new gU(e);e=this._opts=uU.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:xU,warn:xU,error:xU};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=sU(e.format),this._cache=e.cache||new nU,this._loadingSchemas={},this._compilations=[],this.RULES=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=KB(t),e.types=KB(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var n;if("object"==typeof r){var i=Object.keys(r)[0];n=r[i],r=i,n.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:HB[r],implements:n}})),e.all.$comment={keyword:"$comment",code:HB.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=KB(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}(),this._getId=function(e){switch(e.schemaId){case"auto":return wU;case"id":return vU;default:return bU}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=oU),this._metaOpts=function(e){for(var t=uU.copy(e._opts),r=0;r<dU.length;r++)delete t[dU[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=eU,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=WB;e._opts.$data&&(r=aU(r,pU)),e.addMetaSchema(r,fU,!0),e._refs["http://json-schema.org/schema"]=fU}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function mU(e,t){return t=rU.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function yU(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function vU(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function bU(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function wU(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function _U(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function xU(){}const SU={type:"object",required:["merkleRoot","targetHash","anchors"],properties:{merkleRoot:{type:"string",minLength:64,maxLength:64},targetHash:{type:"string",minLength:64,maxLength:64},anchors:{type:"array",minLength:1,items:{type:"string"}}}};var EU={validate:(new cU).compile(SU)},kU={root:{merkleRoot:0,targetHash:1,anchors:2,path:3},path:{left:0,right:1},chain:{btc:{id:0,networks:{mainnet:1,testnet:3}},eth:{id:1,networks:{mainnet:1,ropsten:3,rinkeby:4}},mtc:{id:2,networks:{mainnet:137,mumbai:80001}}}},IU={},AU=ht(ms),TU={},PU={};!function(e){const t=pr.exports.BigNumber;e.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},e.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},e.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},e.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},e.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},e.SHIFT32=4294967296,e.BI={MINUS_ONE:-1,MAXINT32:4294967295,MAXINT64:"0xffffffffffffffff",SHIFT32:e.SHIFT32};const r=new t(-1);e.BN={MINUS_ONE:r,NEG_MAX:r.minus(new t(Number.MAX_SAFE_INTEGER.toString(16),16)),MAXINT:new t("0x20000000000000"),MAXINT32:new t(4294967295),MAXINT64:new t("0xffffffffffffffff"),SHIFT32:new t(e.SHIFT32)}}(PU),function(e){const t=AU,r=pr.exports.BigNumber,n=PU.NUMBYTES,i=PU.SHIFT32;e.hasBigInt="function"==typeof BigInt;const o="function"==typeof TextDecoder?TextDecoder:t.TextDecoder;if(o){const t=new o("utf8",{fatal:!0,ignoreBOM:!0});e.utf8=e=>t.decode(e),e.utf8.checksUTF8=!0}else e.utf8=e=>e.toString("utf8"),e.utf8.checksUTF8=!1;e.parseCBORint=function(e,t){switch(e){case n.ONE:return t.readUInt8(0);case n.TWO:return t.readUInt16BE(0);case n.FOUR:return t.readUInt32BE(0);case n.EIGHT:const o=t.readUInt32BE(0),s=t.readUInt32BE(4);return o>2097151?new r(o).times(i).plus(s):o*i+s;default:throw new Error("Invalid additional info for int: "+e)}},e.writeHalf=function(e,t){const r=Tt.allocUnsafe(4);r.writeFloatBE(t,0);const n=r.readUInt32BE(0);if(0!=(8191&n))return!1;let i=n>>16&32768;const o=n>>23&255,s=8388607&n;if(o>=113&&o<=142)i+=(o-112<<10)+(s>>13);else{if(!(o>=103&&o<113))return!1;if(s&(1<<126-o)-1)return!1;i+=s+8388608>>126-o}return e.writeUInt16BE(i),!0},e.parseHalf=function(e){const t=128&e[0]?-1:1,r=(124&e[0])>>2,n=(3&e[0])<<8|e[1];return r?31===r?t*(n?NaN:1/0):t*Math.pow(2,r-25)*(1024+n):5.960464477539063e-8*t*n},e.parseCBORfloat=function(t){switch(t.length){case 2:return e.parseHalf(t);case 4:return t.readFloatBE(0);case 8:return t.readDoubleBE(0);default:throw new Error("Invalid float size: "+t.length)}},e.hex=function(e){return Tt.from(e.replace(/^0x/,""),"hex")},e.bin=function(e){let t=0,r=(e=e.replace(/\s/g,"")).length%8||8;const n=[];for(;r<=e.length;)n.push(parseInt(e.slice(t,r),2)),t=r,r+=8;return Tt.from(n)},e.extend=function(e={},...t){const r=t.length;for(let n=0;n<r;n++){const r=t[n];for(const t in r){const n=r[t];e[t]=n}}return e},e.arrayEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,r)=>e===t[r]))},e.bufferEqual=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(!lr(e)||!lr(t)||e.length!==t.length)return!1;const r=e.length;let n,i,o=!0;for(n=i=0;i<r;n=++i){const r=e[n];o=o&&t[n]===r}return!!o},e.bufferToBignumber=function(e){return new r(e.toString("hex"),16)},e.toBigInt=function(t){return e.hasBigInt?BigInt(t):Number(t)},e.bigIntize=function(t){const r={};for(const n in t)r[n]=e.toBigInt(t[n]);return r},e.bufferToBigInt=function(t){return e.toBigInt("0x"+t.toString("hex"))},e.guessEncoding=function(e){if("string"==typeof e)return"hex";if(!lr(e))throw new Error("Unknown input type")}}(TU);const OU=AU,CU=PU.MT,MU=PU.SIMPLE,NU=PU.SYMS;class RU{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}[OU.inspect.custom](e,t){return"simple("+this.value+")"}inspect(e,t){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,CU.SIMPLE_FLOAT)}static isSimple(e){return e instanceof RU}static decode(e,t=!0,r=!1){switch(e){case MU.FALSE:return!1;case MU.TRUE:return!0;case MU.NULL:return t?null:NU.NULL;case MU.UNDEFINED:return t?void 0:NU.UNDEFINED;case-1:if(!t||!r)throw new Error("Invalid BREAK");return NU.BREAK;default:return new RU(e)}}}var LU=RU;const jU=TI,DU=AU;class BU extends jU.Transform{constructor(e,t,r){let n,i;switch(null==r&&(r={}),typeof e){case"object":lr(e)?(n=e,null!=t&&"object"==typeof t&&(r=t)):r=e;break;case"string":n=e,null!=t&&"object"==typeof t?r=t:i=t}null==r&&(r={}),null==n&&(n=r.input),null==i&&(i=r.inputEncoding),delete r.input,delete r.inputEncoding;const o=null==r.watchPipe||r.watchPipe;delete r.watchPipe;const s=!!r.readError;delete r.readError,super(r),this.readError=s,o&&this.on("pipe",(e=>{const t=e._readableState.objectMode;if(this.length>0&&t!==this._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");return this._readableState.objectMode=t,this._writableState.objectMode=t})),null!=n&&this.end(n,i)}static isNoFilter(e){return e instanceof this}static compare(e,t){if(!(e instanceof this))throw new TypeError("Arguments must be NoFilters");return e===t?0:e.compare(t)}static concat(e,t){if(!Array.isArray(e))throw new TypeError("list argument must be an Array of NoFilters");if(0===e.length||0===t)return Tt.alloc(0);null==t&&(t=e.reduce(((e,t)=>{if(!(t instanceof BU))throw new TypeError("list argument must be an Array of NoFilters");return e+t.length}),0));let r=!0,n=!0;const i=e.map((e=>{if(!(e instanceof BU))throw new TypeError("list argument must be an Array of NoFilters");const t=e.slice();return lr(t)?n=!1:r=!1,t}));if(r)return Tt.concat(i,t);if(n)return[].concat(...i).slice(0,t);throw new Error("Concatenating mixed object and byte streams not supported")}_transform(e,t,r){this._readableState.objectMode||lr(e)||(e=Tt.from(e,t)),this.push(e),r()}_bufArray(){let e=this._readableState.buffer;if(!Array.isArray(e)){let t=e.head;for(e=[];null!=t;)e.push(t.data),t=t.next}return e}read(e){const t=super.read(e);if(null!=t){if(this.emit("read",t),this.readError&&t.length<e)throw new Error(`Read ${t.length}, wanted ${e}`)}else if(this.readError)throw new Error(`No data available, wanted ${e}`);return t}promise(e){let t=!1;return new Promise(((r,n)=>{this.on("finish",(()=>{const n=this.read();null==e||t||(t=!0,e(null,n)),r(n)})),this.on("error",(r=>{null==e||t||(t=!0,e(r)),n(r)}))}))}compare(e){if(!(e instanceof BU))throw new TypeError("Arguments must be NoFilters");if(this===e)return 0;{const t=this.slice(),r=e.slice();if(lr(t)&&lr(r))return t.compare(r);throw new Error("Cannot compare streams in object mode")}}equals(e){return 0===this.compare(e)}slice(e,t){if(this._readableState.objectMode)return this._bufArray().slice(e,t);const r=this._bufArray();switch(r.length){case 0:return Tt.alloc(0);case 1:return r[0].slice(e,t);default:return Tt.concat(r).slice(e,t)}}get(e){return this.slice()[e]}toJSON(){const e=this.slice();return lr(e)?e.toJSON():e}toString(e,t,r){const n=this.slice(t,r);return lr(n)?e&&"utf8"!==e||!DU.TextDecoder?n.toString(e,t,r):new DU.TextDecoder("utf8",{fatal:!0,ignoreBOM:!0}).decode(n):JSON.stringify(n)}inspect(e,t){return this[DU.inspect.custom](e,t)}[DU.inspect.custom](e,t){const r=this._bufArray().map((e=>lr(e)?(null!=t?t.stylize:void 0)?t.stylize(e.toString("hex"),"string"):e.toString("hex"):DU.inspect(e,t))).join(", ");return`${this.constructor.name} [${r}]`}get length(){return this._readableState.length}writeBigInt(e){let t=e.toString(16);if(e<0){const r=BigInt(Math.floor(t.length/2));t=(e=(BigInt(1)<<r*BigInt(8))+e).toString(16)}return t.length%2&&(t="0"+t),this.push(Tt.from(t,"hex"))}readUBigInt(e){const t=this.read(e);return lr(t)?BigInt("0x"+t.toString("hex")):null}readBigInt(e){const t=this.read(e);if(!lr(t))return null;let r=BigInt("0x"+t.toString("hex"));return 128&t[0]&&(r-=BigInt(1)<<BigInt(t.length)*BigInt(8)),r}}function UU(e,t){return function(r){const n=this.read(t);return lr(n)?n[e].call(n,0,!0):null}}function FU(e,t){return function(r){const n=Tt.alloc(t);return n[e].call(n,r,0,!0),this.push(n)}}Object.assign(BU.prototype,{writeUInt8:FU("writeUInt8",1),writeUInt16LE:FU("writeUInt16LE",2),writeUInt16BE:FU("writeUInt16BE",2),writeUInt32LE:FU("writeUInt32LE",4),writeUInt32BE:FU("writeUInt32BE",4),writeInt8:FU("writeInt8",1),writeInt16LE:FU("writeInt16LE",2),writeInt16BE:FU("writeInt16BE",2),writeInt32LE:FU("writeInt32LE",4),writeInt32BE:FU("writeInt32BE",4),writeFloatLE:FU("writeFloatLE",4),writeFloatBE:FU("writeFloatBE",4),writeDoubleLE:FU("writeDoubleLE",8),writeDoubleBE:FU("writeDoubleBE",8),readUInt8:UU("readUInt8",1),readUInt16LE:UU("readUInt16LE",2),readUInt16BE:UU("readUInt16BE",2),readUInt32LE:UU("readUInt32LE",4),readUInt32BE:UU("readUInt32BE",4),readInt8:UU("readInt8",1),readInt16LE:UU("readInt16LE",2),readInt16BE:UU("readInt16BE",2),readInt32LE:UU("readInt32LE",4),readInt32BE:UU("readInt32BE",4),readFloatLE:UU("readFloatLE",4),readFloatBE:UU("readFloatBE",4),readDoubleLE:UU("readDoubleLE",8),readDoubleBE:UU("readDoubleBE",8)});var zU=BU;const VU=zU,HU=TI.Transform;const KU=pr.exports.BigNumber,qU=TU,$U=$s,WU=new KU(-1),GU=new KU(2);class JU{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){let t=null!=e?e[this.tag]:void 0;if("function"!=typeof t&&(t=JU["_tag_"+this.tag],"function"!=typeof t))return this;try{return t.call(JU,this.value)}catch(e){return this.err=e,this}}static _tag_0(e){return new Date(e)}static _tag_1(e){return new Date(1e3*e)}static _tag_2(e){return qU.bufferToBignumber(e)}static _tag_3(e){return WU.minus(qU.bufferToBignumber(e))}static _tag_4(e){return KU(e[1]).shiftedBy(e[0])}static _tag_5(e){return GU.pow(e[0]).times(e[1])}static _tag_32(e){return $U.parse(e)}static _tag_35(e){return new RegExp(e)}}var XU=JU;const YU=TI,ZU=class extends HU{constructor(e){super(e),this._writableState.objectMode=!1,this._readableState.objectMode=!0,this.bs=new VU,this.__restart()}_transform(e,t,r){for(this.bs.write(e);this.bs.length>=this.__needed;){let t;const n=null===this.__needed?void 0:this.bs.read(this.__needed);try{t=this.__parser.next(n)}catch(e){return r(e)}this.__needed&&(this.__fresh=!1),t.done?(this.push(t.value),this.__restart()):this.__needed=t.value||0}return r()}*_parse(){throw new Error("Must be implemented in subclass")}__restart(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}_flush(e){e(this.__fresh?null:new Error("unexpected end of input"))}},QU=XU,eF=LU,tF=TU,rF=pr.exports.BigNumber,nF=zU,iF=PU,oF=iF.MT,sF=iF.NUMBYTES,aF=iF.SYMS,uF=tF.bigIntize(iF.BI),cF=iF.BN,lF=Symbol("count"),hF=Symbol("major type"),fF=Symbol("error"),dF=Symbol("not found");function pF(e,t,r){const n=[];return n[lF]=r,n[aF.PARENT]=e,n[hF]=t,n}function gF(e,t){const r=new nF;return r[lF]=-1,r[aF.PARENT]=e,r[hF]=t,r}function mF(e){return tF.bufferToBigInt(e)}function yF(e){return uF.MINUS_ONE-tF.bufferToBigInt(e)}class vF extends ZU{constructor(e){const t=(e=e||{}).tags;delete e.tags;const r=null!=e.max_depth?e.max_depth:-1;delete e.max_depth;const n=!!tF.hasBigInt&&!!e.bigint;delete e.bigint,super(e),this.running=!0,this.max_depth=r,this.tags=t,n&&(null==this.tags&&(this.tags={}),null==this.tags[2]&&(this.tags[2]=mF),null==this.tags[3]&&(this.tags[3]=yF))}static nullcheck(e){switch(e){case aF.NULL:return null;case aF.UNDEFINED:return;case dF:throw new Error("Value not found");default:return e}}static decodeFirstSync(e,t){let r,n={};switch(typeof(t=t||{encoding:"hex"})){case"string":r=t;break;case"object":n=tF.extend({},t),r=n.encoding,delete n.encoding}const i=new vF(n),o=e instanceof YU.Readable?e:new nF(e,null!=r?r:tF.guessEncoding(e)),s=i._parse();let a=s.next();for(;!a.done;){const e=o.read(a.value);if(null==e||e.length!==a.value)throw new Error("Insufficient data");a=s.next(e)}const u=vF.nullcheck(a.value);if(o.length>0){const e=o.read(1);o.unshift(e);const t=new Error("Unexpected data: 0x"+e[0].toString(16));throw t.value=u,t}return u}static decodeAllSync(e,t){let r,n={};switch(typeof(t=t||{encoding:"hex"})){case"string":r=t;break;case"object":n=tF.extend({},t),r=n.encoding,delete n.encoding}const i=new vF(n),o=e instanceof YU.Readable?e:new nF(e,null!=r?r:tF.guessEncoding(e)),s=[];for(;o.length>0;){const e=i._parse();let t=e.next();for(;!t.done;){const r=o.read(t.value);if(null==r||r.length!==t.value)throw new Error("Insufficient data");t=e.next(r)}s.push(vF.nullcheck(t.value))}return s}static decodeFirst(e,t,r){let n={},i=!1,o="hex";switch(typeof t){case"function":r=t,o=tF.guessEncoding(e);break;case"string":o=t;break;case"object":n=tF.extend({},t),o=null!=n.encoding?n.encoding:tF.guessEncoding(e),delete n.encoding,i=null!=n.required&&n.required,delete n.required}const s=new vF(n);let a=dF;const u=new Promise(((e,t)=>{s.on("data",(e=>{a=vF.nullcheck(e),s.close()})),s.once("error",(e=>(a!==dF&&(e.value=a),a=fF,s.close(),t(e)))),s.once("end",(()=>{switch(a){case dF:return i?t(new Error("No CBOR found")):e(a);case fF:return;default:return e(a)}}))}));return"function"==typeof r&&u.then((e=>r(null,e)),r),s.end(e,o),u}static decodeAll(e,t,r){let n={},i="hex";switch(typeof t){case"function":r=t,i=tF.guessEncoding(e);break;case"string":i=t;break;case"object":n=tF.extend({},t),i=null!=n.encoding?n.encoding:tF.guessEncoding(e),delete n.encoding}const o=new vF(n),s=[];o.on("data",(e=>s.push(vF.nullcheck(e))));const a=new Promise(((e,t)=>{o.on("error",t),o.on("end",(()=>e(s)))}));return"function"==typeof r&&a.then((e=>r(null,e)),r),o.end(e,i),a}close(){this.running=!1,this.__fresh=!0}*_parse(){let e=null,t=0,r=null;for(;;){if(this.max_depth>=0&&t>this.max_depth)throw new Error("Maximum depth "+this.max_depth+" exceeded");const n=(yield 1)[0];if(!this.running)throw new Error("Unexpected data: 0x"+n.toString(16));const i=n>>5,o=31&n,s=null!=e?e[hF]:void 0,a=null!=e?e.length:void 0;switch(o){case sF.ONE:this.emit("more-bytes",i,1,s,a),r=(yield 1)[0];break;case sF.TWO:case sF.FOUR:case sF.EIGHT:const e=1<<o-24;this.emit("more-bytes",i,e,s,a);const t=yield e;r=i===oF.SIMPLE_FLOAT?t:tF.parseCBORint(o,t);break;case 28:case 29:case 30:throw this.running=!1,new Error("Additional info not implemented: "+o);case sF.INDEFINITE:switch(i){case oF.POS_INT:case oF.NEG_INT:case oF.TAG:throw new Error(`Invalid indefinite encoding for MT ${i}`)}r=-1;break;default:r=o}switch(i){case oF.POS_INT:break;case oF.NEG_INT:r=r===Number.MAX_SAFE_INTEGER?cF.NEG_MAX:r instanceof rF?cF.MINUS_ONE.minus(r):-1-r;break;case oF.BYTE_STRING:case oF.UTF8_STRING:switch(r){case 0:this.emit("start-string",i,r,s,a),r=i===oF.BYTE_STRING?Tt.allocUnsafe(0):"";break;case-1:this.emit("start",i,aF.STREAM,s,a),e=gF(e,i),t++;continue;default:this.emit("start-string",i,r,s,a),r=yield r,i===oF.UTF8_STRING&&(r=tF.utf8(r))}break;case oF.ARRAY:case oF.MAP:switch(r){case 0:r=i===oF.MAP?{}:[];break;case-1:this.emit("start",i,aF.STREAM,s,a),e=pF(e,i,-1),t++;continue;default:this.emit("start",i,r,s,a),e=pF(e,i,r*(i-3)),t++;continue}break;case oF.TAG:this.emit("start",i,r,s,a),e=pF(e,i,1),e.push(r),t++;continue;case oF.SIMPLE_FLOAT:if("number"==typeof r){if(o===sF.ONE&&r<32)throw new Error(`Invalid two-byte encoding of simple value ${r}`);const t=null!=e;r=eF.decode(r,t,t&&e[lF]<0)}else r=tF.parseCBORfloat(r)}this.emit("value",r,s,a,o);let u=!1;for(;null!=e;){switch(!1){case r!==aF.BREAK:e[lF]=1;break;case!Array.isArray(e):e.push(r);break;case!(e instanceof nF):const t=e[hF];if(null!=t&&t!==i)throw this.running=!1,new Error("Invalid major type in indefinite encoding");e.write(r)}if(0!=--e[lF]){u=!0;break}if(--t,delete e[lF],Array.isArray(e))switch(e[hF]){case oF.ARRAY:r=e;break;case oF.MAP:let t=!0;if(e.length%2!=0)throw new Error("Invalid map length: "+e.length);for(let r=0,n=e.length;r<n;r+=2)if("string"!=typeof e[r]){t=!1;break}if(t){r={};for(let t=0,n=e.length;t<n;t+=2)r[e[t]]=e[t+1]}else{r=new Map;for(let t=0,n=e.length;t<n;t+=2)r.set(e[t],e[t+1])}break;case oF.TAG:r=new QU(e[0],e[1]).convert(this.tags)}else if(e instanceof nF)switch(e[hF]){case oF.BYTE_STRING:r=e.slice();break;case oF.UTF8_STRING:r=e.toString("utf-8")}this.emit("stop",e[hF]);const n=e;e=e[aF.PARENT],delete n[aF.PARENT],delete n[hF]}if(!u)return r}}}vF.NOT_FOUND=dF;var bF=vF;const wF=TI,_F=AU,xF=bF,SF=PU,EF=pr.exports.BigNumber,kF=zU,IF=SF.MT,AF=SF.NUMBYTES,TF=SF.SYMS;function PF(e){return e>1?"s":""}class OF extends wF.Transform{constructor(e){const t=Object.assign({depth:1,max_depth:10,no_summary:!1},e,{readableObjectMode:!1,writableObjectMode:!1}),r=t.max_depth;delete t.max_depth;const n=t.depth;delete t.depth,super(t),this.depth=n,this.max_depth=r,this.all=new kF,t.tags={24:this._tag_24.bind(this)},this.parser=new xF(t),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("start-string",this._on_start_string.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("error",this._on_error.bind(this)),t.no_summary||this.parser.on("data",this._on_data.bind(this)),this.parser.bs.on("read",this._on_read.bind(this))}_tag_24(e){const t=new OF({depth:this.depth+1,no_summary:!0});t.on("data",(e=>this.push(e))),t.on("error",(e=>this.emit("error",e))),t.end(e)}_transform(e,t,r){this.parser.write(e,t,r)}_flush(e){return this.parser._flush(e)}static comment(e,t,r){if(null==e)throw new Error("input required");let n="string"==typeof e?"hex":void 0,i=10;switch(typeof t){case"function":r=t;break;case"string":n=t;break;case"number":i=t;break;case"object":const e=t.encoding,o=t.max_depth;n=null!=e?e:n,i=null!=o?o:i;break;case"undefined":break;default:throw new Error("Unknown option type")}const o=new kF,s=new OF({max_depth:i});let a=null;return"function"==typeof r?(s.on("end",(()=>{r(null,o.toString("utf8"))})),s.on("error",r)):a=new Promise(((e,t)=>(s.on("end",(()=>{e(o.toString("utf8"))})),s.on("error",t)))),s.pipe(o),s.end(e,n),a}_on_error(e){this.push("ERROR: "),this.push(e.toString()),this.push("\n")}_on_read(e){this.all.write(e);const t=e.toString("hex");this.push(new Array(this.depth+1).join("  ")),this.push(t);let r=2*(this.max_depth-this.depth);return r-=t.length,r<1&&(r=1),this.push(new Array(r+1).join(" ")),this.push("-- ")}_on_more(e,t,r,n){this.depth++;let i="";switch(e){case IF.POS_INT:i="Positive number,";break;case IF.NEG_INT:i="Negative number,";break;case IF.ARRAY:i="Array, length";break;case IF.MAP:i="Map, count";break;case IF.BYTE_STRING:i="Bytes, length";break;case IF.UTF8_STRING:i="String, length";break;case IF.SIMPLE_FLOAT:i=1===t?"Simple value,":"Float,"}return this.push(i+" next "+t+" byte"+PF(t)+"\n")}_on_start_string(e,t,r,n){this.depth++;let i="";switch(e){case IF.BYTE_STRING:i="Bytes, length: "+t;break;case IF.UTF8_STRING:i="String, length: "+t.toString()}return this.push(i+"\n")}_on_start(e,t,r,n){if(this.depth++,t!==TF.BREAK)switch(r){case IF.ARRAY:this.push(`[${n}], `);break;case IF.MAP:n%2?this.push(`{Val:${Math.floor(n/2)}}, `):this.push(`{Key:${Math.floor(n/2)}}, `)}switch(e){case IF.TAG:this.push(`Tag #${t}`),24==t&&this.push(" Encoded CBOR data item");break;case IF.ARRAY:t===TF.STREAM?this.push("Array (streaming)"):this.push(`Array, ${t} item${PF(t)}`);break;case IF.MAP:t===TF.STREAM?this.push("Map (streaming)"):this.push(`Map, ${t} pair${PF(t)}`);break;case IF.BYTE_STRING:this.push("Bytes (streaming)");break;case IF.UTF8_STRING:this.push("String (streaming)")}return this.push("\n")}_on_stop(e){return this.depth--}_on_value(e,t,r,n){if(e!==TF.BREAK)switch(t){case IF.ARRAY:this.push(`[${r}], `);break;case IF.MAP:r%2?this.push(`{Val:${Math.floor(r/2)}}, `):this.push(`{Key:${Math.floor(r/2)}}, `)}switch(e===TF.BREAK?this.push("BREAK\n"):e===TF.NULL?this.push("null\n"):e===TF.UNDEFINED?this.push("undefined\n"):"string"==typeof e?(this.depth--,e.length>0&&(this.push(JSON.stringify(e)),this.push("\n"))):lr(e)?(this.depth--,e.length>0&&(this.push(e.toString("hex")),this.push("\n"))):e instanceof EF?(this.push(e.toString()),this.push("\n")):(this.push(_F.inspect(e)),this.push("\n")),n){case AF.ONE:case AF.TWO:case AF.FOUR:case AF.EIGHT:this.depth--}}_on_data(){return this.push("0x"),this.push(this.all.read().toString("hex")),this.push("\n")}}var CF=OF;const MF=TI,NF=AU,RF=bF,LF=TU,jF=PU,DF=pr.exports.BigNumber,BF=zU,UF=jF.MT,FF=jF.SYMS;class zF extends MF.Transform{constructor(e){const t=Object.assign({separator:"\n",stream_errors:!1},e,{readableObjectMode:!1,writableObjectMode:!1}),r=t.separator;delete t.separator;const n=t.stream_errors;delete t.stream_errors,super(t),this.float_bytes=-1,this.separator=r,this.stream_errors=n,this.parser=new RF(t),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.on("error",this._on_error.bind(this))}_transform(e,t,r){return this.parser.write(e,t,r)}_flush(e){return this.parser._flush((t=>this.stream_errors?(t&&this._on_error(t),e()):e(t)))}static diagnose(e,t,r){if(null==e)throw new Error("input required");let n={},i="hex";switch(typeof t){case"function":r=t,i=LF.guessEncoding(e);break;case"object":n=LF.extend({},t),i=null!=n.encoding?n.encoding:LF.guessEncoding(e),delete n.encoding;break;default:i=null!=t?t:"hex"}const o=new BF,s=new zF(n);let a=null;return"function"==typeof r?(s.on("end",(()=>r(null,o.toString("utf8")))),s.on("error",r)):a=new Promise(((e,t)=>(s.on("end",(()=>e(o.toString("utf8")))),s.on("error",t)))),s.pipe(o),s.end(e,i),a}_on_error(e){return this.stream_errors?this.push(e.toString()):this.emit("error",e)}_on_more(e,t,r,n){if(e===UF.SIMPLE_FLOAT)return this.float_bytes={2:1,4:2,8:3}[t]}_fore(e,t){switch(e){case UF.BYTE_STRING:case UF.UTF8_STRING:case UF.ARRAY:if(t>0)return this.push(", ");break;case UF.MAP:if(t>0)return t%2?this.push(": "):this.push(", ")}}_on_value(e,t,r){if(e!==FF.BREAK)return this._fore(t,r),this.push((()=>{switch(!1){case e!==FF.NULL:return"null";case e!==FF.UNDEFINED:return"undefined";case"string"!=typeof e:return JSON.stringify(e);case!(this.float_bytes>0):const t=this.float_bytes;return this.float_bytes=-1,NF.inspect(e)+"_"+t;case!lr(e):return"h'"+e.toString("hex")+"'";case!(e instanceof DF):return e.toString();default:return NF.inspect(e)}})())}_on_start(e,t,r,n){switch(this._fore(r,n),e){case UF.TAG:this.push(`${t}(`);break;case UF.ARRAY:this.push("[");break;case UF.MAP:this.push("{");break;case UF.BYTE_STRING:case UF.UTF8_STRING:this.push("(")}if(t===FF.STREAM)return this.push("_ ")}_on_stop(e){switch(e){case UF.TAG:return this.push(")");case UF.ARRAY:return this.push("]");case UF.MAP:return this.push("}");case UF.BYTE_STRING:case UF.UTF8_STRING:return this.push(")")}}_on_data(){return this.push(this.separator)}}var VF=zF;const HF=TI,KF=$s;pr.exports.BigNumber;const qF=zU,$F=TU,WF=PU,GF=WF.MT,JF=WF.NUMBYTES,XF=WF.SHIFT32,YF=WF.SYMS,ZF=WF.TAG,QF=WF.MT.SIMPLE_FLOAT<<5|WF.NUMBYTES.TWO,ez=WF.MT.SIMPLE_FLOAT<<5|WF.NUMBYTES.FOUR,tz=WF.MT.SIMPLE_FLOAT<<5|WF.NUMBYTES.EIGHT,rz=WF.MT.SIMPLE_FLOAT<<5|WF.SIMPLE.TRUE,nz=WF.MT.SIMPLE_FLOAT<<5|WF.SIMPLE.FALSE,iz=WF.MT.SIMPLE_FLOAT<<5|WF.SIMPLE.UNDEFINED,oz=WF.MT.SIMPLE_FLOAT<<5|WF.SIMPLE.NULL,sz=Tt.from([255]),az=$F.bigIntize(WF.BI),uz=WF.BN,cz=Tt.from("f97e00","hex"),lz=Tt.from("f9fc00","hex"),hz=Tt.from("f97c00","hex"),fz=Tt.from("f98000","hex"),dz=Symbol("CBOR_LOOP_DETECT");class pz extends HF.Transform{constructor(e){const t=Object.assign({},e,{readableObjectMode:!1,writableObjectMode:!0});super(t),this.canonical=t.canonical,this.encodeUndefined=t.encodeUndefined,this.disallowUndefinedKeys=!!t.disallowUndefinedKeys,this.dateType=null!=t.dateType?t.dateType.toLowerCase():"number",this.collapseBigIntegers=!!t.collapseBigIntegers,"symbol"==typeof t.detectLoops?this.detectLoops=t.detectLoops:this.detectLoops=t.detectLoops?Symbol("CBOR_DETECT"):null,this.semanticTypes={Array:this._pushArray,Date:this._pushDate,Buffer:this._pushBuffer,Map:this._pushMap,NoFilter:this._pushNoFilter,RegExp:this._pushRegexp,Set:this._pushSet,BigNumber:this._pushBigNumber,ArrayBuffer:this._pushUint8Array,Uint8ClampedArray:this._pushUint8Array,Uint8Array:this._pushUint8Array,Uint16Array:this._pushArray,Uint32Array:this._pushArray,Int8Array:this._pushArray,Int16Array:this._pushArray,Int32Array:this._pushArray,Float32Array:this._pushFloat32Array,Float64Array:this._pushFloat64Array},KF.Url&&this.addSemanticType("Url",this._pushUrl),KF.URL&&this.addSemanticType("URL",this._pushURL);const r=t.genTypes||[];for(let e=0,t=r.length;e<t;e+=2)this.addSemanticType(r[e],r[e+1])}_transform(e,t,r){return r(!1===this.pushAny(e)?new Error("Push Error"):void 0)}_flush(e){return e()}addSemanticType(e,t){if("function"!=typeof t)throw new TypeError("fun must be of type function");const r="string"==typeof e?e:e.name,n=this.semanticTypes[r];return this.semanticTypes[r]=t,n}_pushUInt8(e){const t=Tt.allocUnsafe(1);return t.writeUInt8(e,0),this.push(t)}_pushUInt16BE(e){const t=Tt.allocUnsafe(2);return t.writeUInt16BE(e,0),this.push(t)}_pushUInt32BE(e){const t=Tt.allocUnsafe(4);return t.writeUInt32BE(e,0),this.push(t)}_pushFloatBE(e){const t=Tt.allocUnsafe(4);return t.writeFloatBE(e,0),this.push(t)}_pushDoubleBE(e){const t=Tt.allocUnsafe(8);return t.writeDoubleBE(e,0),this.push(t)}_pushNaN(){return this.push(cz)}_pushInfinity(e){const t=e<0?lz:hz;return this.push(t)}_pushFloat(e){if(this.canonical){const t=Tt.allocUnsafe(2);if($F.writeHalf(t,e))return this._pushUInt8(QF)&&this.push(t)}return Math.fround(e)===e?this._pushUInt8(ez)&&this._pushFloatBE(e):this._pushUInt8(tz)&&this._pushDoubleBE(e)}_pushInt(e,t,r){const n=t<<5;switch(!1){case!(e<24):return this._pushUInt8(n|e);case!(e<=255):return this._pushUInt8(n|JF.ONE)&&this._pushUInt8(e);case!(e<=65535):return this._pushUInt8(n|JF.TWO)&&this._pushUInt16BE(e);case!(e<=4294967295):return this._pushUInt8(n|JF.FOUR)&&this._pushUInt32BE(e);case!(e<=Number.MAX_SAFE_INTEGER):return this._pushUInt8(n|JF.EIGHT)&&this._pushUInt32BE(Math.floor(e/XF))&&this._pushUInt32BE(e%XF);default:return t===GF.NEG_INT?this._pushFloat(r):this._pushFloat(e)}}_pushIntNum(e){return Object.is(e,-0)?this.push(fz):e<0?this._pushInt(-e-1,GF.NEG_INT,e):this._pushInt(e,GF.POS_INT)}_pushNumber(e){switch(!1){case!isNaN(e):return this._pushNaN();case isFinite(e):return this._pushInfinity(e);case Math.round(e)!==e:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=Tt.byteLength(e,"utf8");return this._pushInt(t,GF.UTF8_STRING)&&this.push(e,"utf8")}_pushBoolean(e){return this._pushUInt8(e?rz:nz)}_pushUndefined(e){switch(typeof this.encodeUndefined){case"undefined":return this._pushUInt8(iz);case"function":return this.pushAny(this.encodeUndefined.call(this,e));case"object":if(lr(this.encodeUndefined))return this.push(this.encodeUndefined)}return this.pushAny(this.encodeUndefined)}_pushNull(e){return this._pushUInt8(oz)}_pushArray(e,t,r){r=Object.assign({indefinite:!1},r);const n=t.length;if(r.indefinite){if(!e._pushUInt8(GF.ARRAY<<5|JF.INDEFINITE))return!1}else if(!e._pushInt(n,GF.ARRAY))return!1;for(let r=0;r<n;r++)if(!e.pushAny(t[r]))return!1;return!(r.indefinite&&!e.push(sz))}_pushTag(e){return this._pushInt(e,GF.TAG)}_pushDate(e,t){switch(e.dateType){case"string":return e._pushTag(ZF.DATE_STRING)&&e._pushString(t.toISOString());case"int":case"integer":return e._pushTag(ZF.DATE_EPOCH)&&e._pushIntNum(Math.round(t/1e3));case"float":return e._pushTag(ZF.DATE_EPOCH)&&e._pushFloat(t/1e3);default:return e._pushTag(ZF.DATE_EPOCH)&&e.pushAny(t/1e3)}}_pushBuffer(e,t){return e._pushInt(t.length,GF.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(ZF.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,GF.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(ZF.URI)&&e.pushAny(t.format())}_pushURL(e,t){return e._pushTag(ZF.URI)&&e.pushAny(t.toString())}_pushBigint(e){let t=GF.POS_INT,r=ZF.POS_BIGINT;if(e.isNegative()&&(e=e.negated().minus(1),t=GF.NEG_INT,r=ZF.NEG_BIGINT),this.collapseBigIntegers&&e.lte(uz.MAXINT64))return e.lte(uz.MAXINT32)?this._pushInt(e.toNumber(),t):this._pushUInt8(t<<5|JF.EIGHT)&&this._pushUInt32BE(e.dividedToIntegerBy(uz.SHIFT32).toNumber())&&this._pushUInt32BE(e.mod(uz.SHIFT32).toNumber());let n=e.toString(16);n.length%2&&(n="0"+n);const i=Tt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushJSBigint(e){let t=GF.POS_INT,r=ZF.POS_BIGINT;if(e<0&&(e=-e+az.MINUS_ONE,t=GF.NEG_INT,r=ZF.NEG_BIGINT),this.collapseBigIntegers&&e<=az.MAXINT64)return e<=4294967295?this._pushInt(Number(e),t):this._pushUInt8(t<<5|JF.EIGHT)&&this._pushUInt32BE(Number(e/az.SHIFT32))&&this._pushUInt32BE(Number(e%az.SHIFT32));let n=e.toString(16);n.length%2&&(n="0"+n);const i=Tt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(ZF.DECIMAL_FRAC)||!e._pushInt(2,GF.ARRAY))return!1;const r=t.decimalPlaces(),n=t.shiftedBy(r);return!!e._pushIntNum(-r)&&(n.abs().isLessThan(uz.MAXINT)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}_pushMap(e,t,r){if((r=Object.assign({indefinite:!1},r)).indefinite){if(!e._pushUInt8(GF.MAP<<5|JF.INDEFINITE))return!1}else if(!e._pushInt(t.size,GF.MAP))return!1;if(e.canonical){const r=[...t.entries()],n=new pz(this),i=new qF({highWaterMark:this.readableHighWaterMark});n.pipe(i),r.sort((([e],[t])=>{n.pushAny(e);const r=i.read();n.pushAny(t);const o=i.read();return r.compare(o)}));for(const[t,n]of r){if(e.disallowUndefinedKeys&&void 0===t)throw new Error("Invalid Map key: undefined");if(!e.pushAny(t)||!e.pushAny(n))return!1}}else for(const[r,n]of t){if(e.disallowUndefinedKeys&&void 0===r)throw new Error("Invalid Map key: undefined");if(!e.pushAny(r)||!e.pushAny(n))return!1}return!(r.indefinite&&!e.push(sz))}_pushUint8Array(e,t){return e._pushBuffer(e,Tt.from(t))}_pushFloat32Array(e,t){const r=t.length;if(!e._pushInt(r,GF.ARRAY))return!1;for(let n=0;n<r;n++)if(!e._pushUInt8(ez)||!e._pushFloatBE(t[n]))return!1;return!0}_pushFloat64Array(e,t){const r=t.length;if(!e._pushInt(r,GF.ARRAY))return!1;for(let n=0;n<r;n++)if(!e._pushUInt8(tz)||!e._pushDoubleBE(t[n]))return!1;return!0}removeLoopDetectors(e){return!!this.detectLoops&&pz.removeLoopDetectors(e,this.detectLoops)}static removeLoopDetectors(e,t=null){if("object"!=typeof e||!e)return!1;const r=e[dz];if(!r)return!1;if(null==t)t=r;else if(t!==r)return!1;if(delete e[dz],Array.isArray(e))for(const r of e)this.removeLoopDetectors(r,t);else for(const r in e)this.removeLoopDetectors(e[r],t);return!0}_pushObject(e,t){if(!e)return this._pushNull(e);if(!(t=Object.assign({indefinite:!1,skipTypes:!1},t)).indefinite&&this.detectLoops){if(e[dz]===this.detectLoops)throw new Error("Loop detected while CBOR encoding");e[dz]=this.detectLoops}if(!t.skipTypes){const t=e.encodeCBOR;if("function"==typeof t)return t.call(e,this);const r=this.semanticTypes[e.constructor.name];if(r)return r.call(e,this,e)}const r=Object.keys(e).filter((t=>"function"!=typeof e[t])),n={};if(this.canonical&&r.sort(((e,t)=>{const r=n[e]||(n[e]=pz.encode(e)),i=n[t]||(n[t]=pz.encode(t));return r.compare(i)})),t.indefinite){if(!this._pushUInt8(GF.MAP<<5|JF.INDEFINITE))return!1}else if(!this._pushInt(r.length,GF.MAP))return!1;let i;for(let t=0,o=r.length;t<o;t++){const o=r[t];if(this.canonical&&(i=n[o])){if(!this.push(i))return!1}else if(!this._pushString(o))return!1;if(!this.pushAny(e[o]))return!1}return!(t.indefinite&&!this.push(sz))}pushAny(e){switch(typeof e){case"number":return this._pushNumber(e);case"bigint":return this._pushJSBigint(e);case"string":return this._pushString(e);case"boolean":return this._pushBoolean(e);case"undefined":return this._pushUndefined(e);case"object":return this._pushObject(e);case"symbol":switch(e){case YF.NULL:return this._pushNull(null);case YF.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e.toString?e.toString():""))}}_pushAny(e){return this.pushAny(e)}_encodeAll(e){const t=new qF({highWaterMark:this.readableHighWaterMark});this.pipe(t);for(const t of e)this.pushAny(t);return this.end(),t.read()}static encodeIndefinite(e,t,r){if(null==t){if(null==this)throw new Error("No object to encode");t=this}r=Object.assign({chunkSize:4096},r);let n=!0;const i=typeof t;if("string"===i){n=n&&e._pushUInt8(GF.UTF8_STRING<<5|JF.INDEFINITE);let i=0;for(;i<t.length;){const o=i+r.chunkSize;n=n&&e._pushString(t.slice(i,o)),i=o}n=n&&e.push(sz)}else if(lr(t)){n=n&&e._pushUInt8(GF.BYTE_STRING<<5|JF.INDEFINITE);let i=0;for(;i<t.length;){const o=i+r.chunkSize;n=n&&e._pushBuffer(e,t.slice(i,o)),i=o}n=n&&e.push(sz)}else if(Array.isArray(t))n=n&&e._pushArray(e,t,{indefinite:!0});else if(t instanceof Map)n=n&&e._pushMap(e,t,{indefinite:!0});else{if("object"!==i)throw new Error("Invalid indefinite encoding");n=n&&e._pushObject(t,{indefinite:!0,skipTypes:!0})}return n}static encode(...e){return(new pz)._encodeAll(e)}static encodeCanonical(...e){return new pz({canonical:!0})._encodeAll(e)}static encodeOne(e,t){return new pz(t)._encodeAll([e])}static encodeAsync(e,t){return new Promise(((r,n)=>{const i=[],o=new pz(t);o.on("data",(e=>i.push(e))),o.on("error",n),o.on("finish",(()=>r(Tt.concat(i)))),o.pushAny(e),o.end()}))}}var gz=pz;const mz=gz,yz=bF,vz=PU.MT;class bz extends Map{constructor(e){super(e)}static _encode(e){return mz.encodeCanonical(e).toString("base64")}static _decode(e){return yz.decodeFirstSync(e,"base64")}get(e){return super.get(bz._encode(e))}set(e,t){return super.set(bz._encode(e),t)}delete(e){return super.delete(bz._encode(e))}has(e){return super.has(bz._encode(e))}*keys(){for(const e of super.keys())yield bz._decode(e)}*entries(){for(const e of super.entries())yield[bz._decode(e[0]),e[1]]}[Symbol.iterator](){return this.entries()}forEach(e,t){if("function"!=typeof e)throw new TypeError("Must be function");for(const t of super.entries())e.call(this,t[1],bz._decode(t[0]),this)}encodeCBOR(e){if(!e._pushInt(this.size,vz.MAP))return!1;if(e.canonical){const t=Array.from(super.entries()).map((e=>[Tt.from(e[0],"base64"),e[1]]));t.sort(((e,t)=>e[0].compare(t[0])));for(const r of t)if(!e.push(r[0])||!e.pushAny(r[1]))return!1}else for(const t of super.entries())if(!e.push(Tt.from(t[0],"base64"))||!e.pushAny(t[1]))return!1;return!0}}var wz=bz;!function(e){e.BigNumber=pr.exports.BigNumber,e.Commented=CF,e.Diagnose=VF,e.Decoder=bF,e.Encoder=gz,e.Simple=LU,e.Tagged=XU,e.Map=wz,e.comment=e.Commented.comment,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.decodeAllSync=e.Decoder.decodeAllSync,e.decodeFirstSync=e.Decoder.decodeFirstSync,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.encodeCanonical=e.Encoder.encodeCanonical,e.encodeOne=e.Encoder.encodeOne,e.encodeAsync=e.Encoder.encodeAsync,e.decode=e.Decoder.decodeFirstSync,e.leveldb={decode:e.Decoder.decodeAllSync,encode:e.Encoder.encode,buffer:!0,name:"cbor"},e.hasBigInt=TU.hasBigInt}(IU);var _z={exports:{}};const{Buffer:xz}=fr;const{Buffer:Sz}=fr,Ez=class{constructor(e,t,r,n){this.name=e,this.code=t,this.alphabet=n,r&&n&&(this.engine=r(n))}encode(e){return this.engine.encode(e)}decode(e){return this.engine.decode(e)}isImplemented(){return this.engine}},kz=function(e){return{encode:t=>function(e,t){const r=e.byteLength,n=new Uint8Array(e),i=t.indexOf("=")===t.length-1;i&&(t=t.substring(0,t.length-1));let o=0,s=0,a="";for(let e=0;e<r;e++)for(s=s<<8|n[e],o+=8;o>=5;)a+=t[s>>>o-5&31],o-=5;if(o>0&&(a+=t[s<<5-o&31]),i)for(;a.length%8!=0;)a+="=";return a}("string"==typeof t?Uint8Array.from(t):t,e),decode(t){for(const r of t)if(e.indexOf(r)<0)throw new Error("invalid base32 character");return function(e,t){const r=(e=e.replace(new RegExp("=","g"),"")).length;let n=0,i=0,o=0;const s=new Uint8Array(5*r/8|0);for(let a=0;a<r;a++)i=i<<5|t.indexOf(e[a]),n+=5,n>=8&&(s[o++]=i>>>n-8&255,n-=8);return s.buffer}(t,e)}}},Iz=function(e){const t=e.indexOf("=")>-1,r=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode(e){let n="";n="string"==typeof e?Sz.from(e).toString("base64"):e.toString("base64"),r&&(n=n.replace(/\+/g,"-").replace(/\//g,"_"));const i=n.indexOf("=");return i>0&&!t&&(n=n.substring(0,i)),n},decode(t){for(const r of t)if(e.indexOf(r)<0)throw new Error("invalid base64 character");return Sz.from(t,"base64")}}},Az=[["base1","1","","1"],["base2","0",E_,"01"],["base8","7",E_,"01234567"],["base10","9",E_,"0123456789"],["base16","f",function(e){return{encode:e=>"string"==typeof e?xz.from(e).toString("hex"):e.toString("hex"),decode(t){for(const r of t)if(e.indexOf(r)<0)throw new Error("invalid base16 character");return xz.from(t,"hex")}}},"0123456789abcdef"],["base32","b",kz,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",kz,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",kz,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",kz,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",kz,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",E_,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",E_,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",Iz,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Iz,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Iz,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Iz,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Tz=Az.reduce(((e,t)=>(e[t[0]]=new Ez(t[0],t[1],t[2],t[3]),e)),{}),Pz=Az.reduce(((e,t)=>(e[t[1]]=Tz[t[0]],e)),{});var Oz={names:Tz,codes:Pz};!function(e,t){const{Buffer:r}=fr,n=Oz;(t=e.exports=o).encode=function(e,t){const n=s(e);return o(n.name,r.from(n.encode(t)))},t.decode=function(e){r.isBuffer(e)&&(e=e.toString());const t=e.substring(0,1);"string"==typeof(e=e.substring(1,e.length))&&(e=r.from(e));const n=s(t);return r.from(n.decode(e.toString()))},t.isEncoded=function(e){if(r.isBuffer(e)&&(e=e.toString()),"[object String]"!==Object.prototype.toString.call(e))return!1;const t=e.substring(0,1);try{return s(t).name}catch(e){return!1}},t.names=Object.freeze(Object.keys(n.names)),t.codes=Object.freeze(Object.keys(n.codes));const i=new Error("Unsupported encoding");function o(e,t){if(!t)throw new Error("requires an encoded buffer");const n=s(e),i=r.from(n.code);return function(e,t){s(e).decode(t.toString())}(n.name,t),r.concat([i,t])}function s(e){let t;if(n.names[e])t=n.names[e];else{if(!n.codes[e])throw i;t=n.codes[e]}if(!t.isImplemented())throw new Error("Base "+e+" is not implemented yet");return t}}(_z,_z.exports);var Cz={exports:{}};
/**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */!function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",s=32,a=128,u=1/0,c=9007199254740991,l=NaN,h=4294967295,f=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],d="[object Arguments]",p="[object Array]",g="[object Boolean]",m="[object Date]",y="[object Error]",v="[object Function]",b="[object GeneratorFunction]",w="[object Map]",_="[object Number]",x="[object Object]",S="[object Promise]",E="[object RegExp]",k="[object Set]",I="[object String]",A="[object Symbol]",T="[object WeakMap]",P="[object ArrayBuffer]",O="[object DataView]",C="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",R="[object Int16Array]",L="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",B="[object Uint16Array]",U="[object Uint32Array]",F=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,q=RegExp(H.source),$=RegExp(K.source),W=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Q=/[\\^$.*+?()[\]{}|]/g,ee=RegExp(Q.source),te=/^\s+/,re=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,de=/^\[object .+?Constructor\]$/,pe=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Se="["+xe+"]",Ee="["+be+"]",ke="\\d+",Ie="["+we+"]",Ae="[^\\ud800-\\udfff"+xe+ke+"\\u2700-\\u27bf"+we+_e+"]",Te="\\ud83c[\\udffb-\\udfff]",Pe="[^\\ud800-\\udfff]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+_e+"]",Ne="(?:"+Ie+"|"+Ae+")",Re="(?:"+Me+"|"+Ae+")",Le="(?:['](?:d|ll|m|re|s|t|ve))?",je="(?:['](?:D|LL|M|RE|S|T|VE))?",De="(?:"+Ee+"|"+Te+")?",Be="[\\ufe0e\\ufe0f]?",Ue=Be+De+"(?:\\u200d(?:"+[Pe,Oe,Ce].join("|")+")"+Be+De+")*",Fe="(?:"+["[\\u2700-\\u27bf]",Oe,Ce].join("|")+")"+Ue,ze="(?:"+[Pe+Ee+"?",Ee,Oe,Ce,"[\\ud800-\\udfff]"].join("|")+")",Ve=RegExp("[']","g"),He=RegExp(Ee,"g"),Ke=RegExp(Te+"(?="+Te+")|"+ze+Ue,"g"),qe=RegExp([Me+"?"+Ie+"+"+Le+"(?="+[Se,Me,"$"].join("|")+")",Re+"+"+je+"(?="+[Se,Me+Ne,"$"].join("|")+")",Me+"?"+Ne+"+"+Le,Me+"+"+je,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ke,Fe].join("|"),"g"),$e=RegExp("[\\u200d\\ud800-\\udfff"+be+"\\ufe0e\\ufe0f]"),We=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ge=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Je=-1,Xe={};Xe[C]=Xe[M]=Xe[N]=Xe[R]=Xe[L]=Xe[j]=Xe[D]=Xe[B]=Xe[U]=!0,Xe[d]=Xe[p]=Xe[P]=Xe[g]=Xe[O]=Xe[m]=Xe[y]=Xe[v]=Xe[w]=Xe[_]=Xe[x]=Xe[E]=Xe[k]=Xe[I]=Xe[T]=!1;var Ye={};Ye[d]=Ye[p]=Ye[P]=Ye[O]=Ye[g]=Ye[m]=Ye[C]=Ye[M]=Ye[N]=Ye[R]=Ye[L]=Ye[w]=Ye[_]=Ye[x]=Ye[E]=Ye[k]=Ye[I]=Ye[A]=Ye[j]=Ye[D]=Ye[B]=Ye[U]=!0,Ye[y]=Ye[v]=Ye[T]=!1;var Ze={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qe=parseFloat,et=parseInt,tt="object"==typeof lt&&lt&&lt.Object===Object&&lt,rt="object"==typeof self&&self&&self.Object===Object&&self,nt=tt||rt||Function("return this")(),it=t&&!t.nodeType&&t,ot=it&&e&&!e.nodeType&&e,st=ot&&ot.exports===it,at=st&&tt.process,ut=function(){try{return ot&&ot.require&&ot.require("util").types||at&&at.binding&&at.binding("util")}catch(e){}}(),ct=ut&&ut.isArrayBuffer,ht=ut&&ut.isDate,ft=ut&&ut.isMap,dt=ut&&ut.isRegExp,pt=ut&&ut.isSet,gt=ut&&ut.isTypedArray;function mt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function yt(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function vt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function bt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function _t(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function xt(e,t){return!(null==e||!e.length)&&Mt(e,t,0)>-1}function St(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Et(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function kt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function It(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function At(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Pt=jt("length");function Ot(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Ct(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Mt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ct(e,Rt,r)}function Nt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Rt(e){return e!=e}function Lt(e,t){var r=null==e?0:e.length;return r?Ut(e,t)/r:l}function jt(e){return function(t){return null==t?r:t[e]}}function Dt(e){return function(t){return null==e?r:e[t]}}function Bt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function Ut(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Ft(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function zt(e){return e?e.slice(0,ir(e)+1).replace(te,""):e}function Vt(e){return function(t){return e(t)}}function Ht(e,t){return Et(t,(function(t){return e[t]}))}function Kt(e,t){return e.has(t)}function qt(e,t){for(var r=-1,n=e.length;++r<n&&Mt(t,e[r],0)>-1;);return r}function $t(e,t){for(var r=e.length;r--&&Mt(t,e[r],0)>-1;);return r}function Wt(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var Gt=Dt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Jt=Dt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xt(e){return"\\"+Ze[e]}function Yt(e){return $e.test(e)}function Zt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function Qt(e,t){return function(r){return e(t(r))}}function er(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var a=e[r];a!==t&&a!==o||(e[r]=o,s[i++]=r)}return s}function tr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function rr(e){return Yt(e)?function(e){for(var t=Ke.lastIndex=0;Ke.test(e);)++t;return t}(e):Pt(e)}function nr(e){return Yt(e)?function(e){return e.match(Ke)||[]}(e):function(e){return e.split("")}(e)}function ir(e){for(var t=e.length;t--&&re.test(e.charAt(t)););return t}var or=Dt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sr=function e(t){var re,be=(t=null==t?nt:sr.defaults(nt.Object(),t,sr.pick(nt,Ge))).Array,we=t.Date,_e=t.Error,xe=t.Function,Se=t.Math,Ee=t.Object,ke=t.RegExp,Ie=t.String,Ae=t.TypeError,Te=be.prototype,Pe=xe.prototype,Oe=Ee.prototype,Ce=t["__core-js_shared__"],Me=Pe.toString,Ne=Oe.hasOwnProperty,Re=0,Le=(re=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+re:"",je=Oe.toString,De=Me.call(Ee),Be=nt._,Ue=ke("^"+Me.call(Ne).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=st?t.Buffer:r,ze=t.Symbol,Ke=t.Uint8Array,$e=Fe?Fe.allocUnsafe:r,Ze=Qt(Ee.getPrototypeOf,Ee),tt=Ee.create,rt=Oe.propertyIsEnumerable,it=Te.splice,ot=ze?ze.isConcatSpreadable:r,at=ze?ze.iterator:r,ut=ze?ze.toStringTag:r,lt=function(){try{var e=uo(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),Pt=t.clearTimeout!==nt.clearTimeout&&t.clearTimeout,Dt=we&&we.now!==nt.Date.now&&we.now,ar=t.setTimeout!==nt.setTimeout&&t.setTimeout,ur=Se.ceil,cr=Se.floor,lr=Ee.getOwnPropertySymbols,hr=Fe?Fe.isBuffer:r,fr=t.isFinite,dr=Te.join,pr=Qt(Ee.keys,Ee),gr=Se.max,mr=Se.min,yr=we.now,vr=t.parseInt,br=Se.random,wr=Te.reverse,_r=uo(t,"DataView"),xr=uo(t,"Map"),Sr=uo(t,"Promise"),Er=uo(t,"Set"),kr=uo(t,"WeakMap"),Ir=uo(Ee,"create"),Ar=kr&&new kr,Tr={},Pr=jo(_r),Or=jo(xr),Cr=jo(Sr),Mr=jo(Er),Nr=jo(kr),Rr=ze?ze.prototype:r,Lr=Rr?Rr.valueOf:r,jr=Rr?Rr.toString:r;function Dr(e){if(Qs(e)&&!Vs(e)&&!(e instanceof zr)){if(e instanceof Fr)return e;if(Ne.call(e,"__wrapped__"))return Do(e)}return new Fr(e)}var Br=function(){function e(){}return function(t){if(!Zs(t))return{};if(tt)return tt(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Ur(){}function Fr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function zr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Kr;++t<r;)this.add(e[t])}function $r(e){var t=this.__data__=new Hr(e);this.size=t.size}function Wr(e,t){var r=Vs(e),n=!r&&zs(e),i=!r&&!n&&$s(e),o=!r&&!n&&!i&&aa(e),s=r||n||i||o,a=s?Ft(e.length,Ie):[],u=a.length;for(var c in e)!t&&!Ne.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mo(c,u))||a.push(c);return a}function Gr(e){var t=e.length;return t?e[qn(0,t-1)]:r}function Jr(e,t){return No(Ii(e),on(t,0,e.length))}function Xr(e){return No(Ii(e))}function Yr(e,t,n){(n!==r&&!Bs(e[t],n)||n===r&&!(t in e))&&rn(e,t,n)}function Zr(e,t,n){var i=e[t];Ne.call(e,t)&&Bs(i,n)&&(n!==r||t in e)||rn(e,t,n)}function Qr(e,t){for(var r=e.length;r--;)if(Bs(e[r][0],t))return r;return-1}function en(e,t,r,n){return ln(e,(function(e,i,o){t(n,e,r(e),o)})),n}function tn(e,t){return e&&Ai(t,Pa(t),e)}function rn(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function nn(e,t){for(var n=-1,i=t.length,o=be(i),s=null==e;++n<i;)o[n]=s?r:Ea(e,t[n]);return o}function on(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function sn(e,t,n,i,o,s){var a,u=1&t,c=2&t,l=4&t;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!Zs(e))return e;var h=Vs(e);if(h){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Ii(e,a)}else{var f=ho(e),p=f==v||f==b;if($s(e))return wi(e,u);if(f==x||f==d||p&&!o){if(a=c||p?{}:po(e),!u)return c?function(e,t){return Ai(e,lo(e),t)}(e,function(e,t){return e&&Ai(t,Oa(t),e)}(a,e)):function(e,t){return Ai(e,co(e),t)}(e,tn(a,e))}else{if(!Ye[f])return o?e:{};a=function(e,t,r){var n,i=e.constructor;switch(t){case P:return _i(e);case g:case m:return new i(+e);case O:return function(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case C:case M:case N:case R:case L:case j:case D:case B:case U:return xi(e,r);case w:case k:return new i;case _:case I:return new i(e);case E:return function(e){var t=new e.constructor(e.source,le.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return n=e,Lr?Ee(Lr.call(n)):{}}}(e,f,u)}}s||(s=new $r);var y=s.get(e);if(y)return y;s.set(e,a),ia(e)?e.forEach((function(r){a.add(sn(r,t,n,r,e,s))})):ea(e)&&e.forEach((function(r,i){a.set(i,sn(r,t,n,i,e,s))}));var S=h?r:(l?c?to:eo:c?Oa:Pa)(e);return vt(S||e,(function(r,i){S&&(r=e[i=r]),Zr(a,i,sn(r,t,n,i,e,s))})),a}function an(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ee(e);i--;){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function un(e,t,i){if("function"!=typeof e)throw new Ae(n);return Po((function(){e.apply(r,i)}),t)}function cn(e,t,r,n){var i=-1,o=xt,s=!0,a=e.length,u=[],c=t.length;if(!a)return u;r&&(t=Et(t,Vt(r))),n?(o=St,s=!1):t.length>=200&&(o=Kt,s=!1,t=new qr(t));e:for(;++i<a;){var l=e[i],h=null==r?l:r(l);if(l=n||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else o(t,h,n)||u.push(l)}return u}Dr.templateSettings={escape:W,evaluate:G,interpolate:J,variable:"",imports:{_:Dr}},Dr.prototype=Ur.prototype,Dr.prototype.constructor=Dr,Fr.prototype=Br(Ur.prototype),Fr.prototype.constructor=Fr,zr.prototype=Br(Ur.prototype),zr.prototype.constructor=zr,Vr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},Vr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vr.prototype.get=function(e){var t=this.__data__;if(Ir){var n=t[e];return n===i?r:n}return Ne.call(t,e)?t[e]:r},Vr.prototype.has=function(e){var t=this.__data__;return Ir?t[e]!==r:Ne.call(t,e)},Vr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ir&&t===r?i:t,this},Hr.prototype.clear=function(){this.__data__=[],this.size=0},Hr.prototype.delete=function(e){var t=this.__data__,r=Qr(t,e);return!(r<0||(r==t.length-1?t.pop():it.call(t,r,1),--this.size,0))},Hr.prototype.get=function(e){var t=this.__data__,n=Qr(t,e);return n<0?r:t[n][1]},Hr.prototype.has=function(e){return Qr(this.__data__,e)>-1},Hr.prototype.set=function(e,t){var r=this.__data__,n=Qr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Kr.prototype.clear=function(){this.size=0,this.__data__={hash:new Vr,map:new(xr||Hr),string:new Vr}},Kr.prototype.delete=function(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t},Kr.prototype.get=function(e){return so(this,e).get(e)},Kr.prototype.has=function(e){return so(this,e).has(e)},Kr.prototype.set=function(e,t){var r=so(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},qr.prototype.add=qr.prototype.push=function(e){return this.__data__.set(e,i),this},qr.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.clear=function(){this.__data__=new Hr,this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},$r.prototype.get=function(e){return this.__data__.get(e)},$r.prototype.has=function(e){return this.__data__.has(e)},$r.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Hr){var n=r.__data__;if(!xr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kr(n)}return r.set(e,t),this.size=r.size,this};var ln=Oi(vn),hn=Oi(bn,!0);function fn(e,t){var r=!0;return ln(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function dn(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(u===r?a==a&&!sa(a):n(a,u)))var u=a,c=s}return c}function pn(e,t){var r=[];return ln(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function gn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=go),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?gn(a,t-1,r,n,i):kt(i,a):n||(i[i.length]=a)}return i}var mn=Ci(),yn=Ci(!0);function vn(e,t){return e&&mn(e,t,Pa)}function bn(e,t){return e&&yn(e,t,Pa)}function wn(e,t){return _t(t,(function(t){return Js(e[t])}))}function _n(e,t){for(var n=0,i=(t=mi(t,e)).length;null!=e&&n<i;)e=e[Lo(t[n++])];return n&&n==i?e:r}function xn(e,t,r){var n=t(e);return Vs(e)?n:kt(n,r(e))}function Sn(e){return null==e?e===r?"[object Undefined]":"[object Null]":ut&&ut in Ee(e)?function(e){var t=Ne.call(e,ut),n=e[ut];try{e[ut]=r;var i=!0}catch(e){}var o=je.call(e);return i&&(t?e[ut]=n:delete e[ut]),o}(e):function(e){return je.call(e)}(e)}function En(e,t){return e>t}function kn(e,t){return null!=e&&Ne.call(e,t)}function In(e,t){return null!=e&&t in Ee(e)}function An(e,t,n){for(var i=n?St:xt,o=e[0].length,s=e.length,a=s,u=be(s),c=1/0,l=[];a--;){var h=e[a];a&&t&&(h=Et(h,Vt(t))),c=mr(h.length,c),u[a]=!n&&(t||o>=120&&h.length>=120)?new qr(a&&h):r}h=e[0];var f=-1,d=u[0];e:for(;++f<o&&l.length<c;){var p=h[f],g=t?t(p):p;if(p=n||0!==p?p:0,!(d?Kt(d,g):i(l,g,n))){for(a=s;--a;){var m=u[a];if(!(m?Kt(m,g):i(e[a],g,n)))continue e}d&&d.push(g),l.push(p)}}return l}function Tn(e,t,n){var i=null==(e=ko(e,t=mi(t,e)))?e:e[Lo(Go(t))];return null==i?r:mt(i,e,n)}function Pn(e){return Qs(e)&&Sn(e)==d}function On(e,t,n,i,o){return e===t||(null==e||null==t||!Qs(e)&&!Qs(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var a=Vs(e),u=Vs(t),c=a?p:ho(e),l=u?p:ho(t),h=(c=c==d?x:c)==x,f=(l=l==d?x:l)==x,v=c==l;if(v&&$s(e)){if(!$s(t))return!1;a=!0,h=!1}if(v&&!h)return s||(s=new $r),a||aa(e)?Zi(e,t,n,i,o,s):function(e,t,r,n,i,o,s){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case g:case m:case _:return Bs(+e,+t);case y:return e.name==t.name&&e.message==t.message;case E:case I:return e==t+"";case w:var a=Zt;case k:var u=1&n;if(a||(a=tr),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var l=Zi(a(e),a(t),n,i,o,s);return s.delete(e),l;case A:if(Lr)return Lr.call(e)==Lr.call(t)}return!1}(e,t,c,n,i,o,s);if(!(1&n)){var b=h&&Ne.call(e,"__wrapped__"),S=f&&Ne.call(t,"__wrapped__");if(b||S){var T=b?e.value():e,C=S?t.value():t;return s||(s=new $r),o(T,C,n,i,s)}}return!!v&&(s||(s=new $r),function(e,t,n,i,o,s){var a=1&n,u=eo(e),c=u.length;if(c!=eo(t).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in t:Ne.call(t,h)))return!1}var f=s.get(e),d=s.get(t);if(f&&d)return f==t&&d==e;var p=!0;s.set(e,t),s.set(t,e);for(var g=a;++l<c;){var m=e[h=u[l]],y=t[h];if(i)var v=a?i(y,m,h,t,e,s):i(m,y,h,e,t,s);if(!(v===r?m===y||o(m,y,n,i,s):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,o,s))}(e,t,n,i,On,o))}function Cn(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;for(e=Ee(e);o--;){var u=n[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var c=(u=n[o])[0],l=e[c],h=u[1];if(a&&u[2]){if(l===r&&!(c in e))return!1}else{var f=new $r;if(i)var d=i(l,h,c,e,t,f);if(!(d===r?On(h,l,3,i,f):d))return!1}}return!0}function Mn(e){return!(!Zs(e)||(t=e,Le&&Le in t))&&(Js(e)?Ue:de).test(jo(e));var t}function Nn(e){return"function"==typeof e?e:null==e?tu:"object"==typeof e?Vs(e)?Bn(e[0],e[1]):Dn(e):lu(e)}function Rn(e){if(!_o(e))return pr(e);var t=[];for(var r in Ee(e))Ne.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Ln(e,t){return e<t}function jn(e,t){var r=-1,n=Ks(e)?be(e.length):[];return ln(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function Dn(e){var t=ao(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(r){return r===e||Cn(r,e,t)}}function Bn(e,t){return vo(e)&&xo(t)?So(Lo(e),t):function(n){var i=Ea(n,e);return i===r&&i===t?ka(n,e):On(t,i,3)}}function Un(e,t,n,i,o){e!==t&&mn(t,(function(s,a){if(o||(o=new $r),Zs(s))!function(e,t,n,i,o,s,a){var u=Ao(e,n),c=Ao(t,n),l=a.get(c);if(l)Yr(e,n,l);else{var h=s?s(u,c,n+"",e,t,a):r,f=h===r;if(f){var d=Vs(c),p=!d&&$s(c),g=!d&&!p&&aa(c);h=c,d||p||g?Vs(u)?h=u:qs(u)?h=Ii(u):p?(f=!1,h=wi(c,!0)):g?(f=!1,h=xi(c,!0)):h=[]:ra(c)||zs(c)?(h=u,zs(u)?h=ga(u):Zs(u)&&!Js(u)||(h=po(c))):f=!1}f&&(a.set(c,h),o(h,c,i,s,a),a.delete(c)),Yr(e,n,h)}}(e,t,a,n,Un,i,o);else{var u=i?i(Ao(e,a),s,a+"",e,t,o):r;u===r&&(u=s),Yr(e,a,u)}}),Oa)}function Fn(e,t){var n=e.length;if(n)return mo(t+=t<0?n:0,n)?e[t]:r}function zn(e,t,r){t=t.length?Et(t,(function(e){return Vs(e)?function(t){return _n(t,1===e.length?e[0]:e)}:e})):[tu];var n=-1;t=Et(t,Vt(oo()));var i=jn(e,(function(e,r,i){var o=Et(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var u=Si(i[n],o[n]);if(u)return n>=a?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Vn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=_n(e,s);r(a,s)&&Xn(o,mi(s,e),a)}return o}function Hn(e,t,r,n){var i=n?Nt:Mt,o=-1,s=t.length,a=e;for(e===t&&(t=Ii(t)),r&&(a=Et(e,Vt(r)));++o<s;)for(var u=0,c=t[o],l=r?r(c):c;(u=i(a,l,u,n))>-1;)a!==e&&it.call(a,u,1),it.call(e,u,1);return e}function Kn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;mo(i)?it.call(e,i,1):ui(e,i)}}return e}function qn(e,t){return e+cr(br()*(t-e+1))}function $n(e,t){var r="";if(!e||t<1||t>c)return r;do{t%2&&(r+=e),(t=cr(t/2))&&(e+=e)}while(t);return r}function Wn(e,t){return Oo(Eo(e,t,tu),e+"")}function Gn(e){return Gr(Ba(e))}function Jn(e,t){var r=Ba(e);return No(r,on(t,0,r.length))}function Xn(e,t,n,i){if(!Zs(e))return e;for(var o=-1,s=(t=mi(t,e)).length,a=s-1,u=e;null!=u&&++o<s;){var c=Lo(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var h=u[c];(l=i?i(h,c,u):r)===r&&(l=Zs(h)?h:mo(t[o+1])?[]:{})}Zr(u,c,l),u=u[c]}return e}var Yn=Ar?function(e,t){return Ar.set(e,t),e}:tu,Zn=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:Za(t),writable:!0})}:tu;function Qn(e){return No(Ba(e))}function ei(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=be(i);++n<i;)o[n]=e[n+t];return o}function ti(e,t){var r;return ln(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!sa(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return ni(e,t,tu,r)}function ni(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,u=null===t,c=sa(t),l=t===r;o<s;){var h=cr((o+s)/2),f=n(e[h]),d=f!==r,p=null===f,g=f==f,m=sa(f);if(a)var y=i||g;else y=l?g&&(i||d):u?g&&d&&(i||!p):c?g&&d&&!p&&(i||!m):!p&&!m&&(i?f<=t:f<t);y?o=h+1:s=h}return mr(s,4294967294)}function ii(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!Bs(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function oi(e){return"number"==typeof e?e:sa(e)?l:+e}function si(e){if("string"==typeof e)return e;if(Vs(e))return Et(e,si)+"";if(sa(e))return jr?jr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ai(e,t,r){var n=-1,i=xt,o=e.length,s=!0,a=[],u=a;if(r)s=!1,i=St;else if(o>=200){var c=t?null:$i(e);if(c)return tr(c);s=!1,i=Kt,u=new qr}else u=t?[]:a;e:for(;++n<o;){var l=e[n],h=t?t(l):l;if(l=r||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),a.push(l)}else i(u,h,r)||(u!==a&&u.push(h),a.push(l))}return a}function ui(e,t){return null==(e=ko(e,t=mi(t,e)))||delete e[Lo(Go(t))]}function ci(e,t,r,n){return Xn(e,t,r(_n(e,t)),n)}function li(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?ei(e,n?0:o,n?o+1:i):ei(e,n?o+1:0,n?i:o)}function hi(e,t){var r=e;return r instanceof zr&&(r=r.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,kt([e],t.args))}),r)}function fi(e,t,r){var n=e.length;if(n<2)return n?ai(e[0]):[];for(var i=-1,o=be(n);++i<n;)for(var s=e[i],a=-1;++a<n;)a!=i&&(o[i]=cn(o[i]||s,e[a],t,r));return ai(gn(o,1),t,r)}function di(e,t,n){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var u=i<s?t[i]:r;n(a,e[i],u)}return a}function pi(e){return qs(e)?e:[]}function gi(e){return"function"==typeof e?e:tu}function mi(e,t){return Vs(e)?e:vo(e,t)?[e]:Ro(ma(e))}var yi=Wn;function vi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ei(e,t,n)}var bi=Pt||function(e){return nt.clearTimeout(e)};function wi(e,t){if(t)return e.slice();var r=e.length,n=$e?$e(r):new e.constructor(r);return e.copy(n),n}function _i(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function xi(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=sa(e),a=t!==r,u=null===t,c=t==t,l=sa(t);if(!u&&!l&&!s&&e>t||s&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&e<t||l&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Ei(e,t,r,n){for(var i=-1,o=e.length,s=r.length,a=-1,u=t.length,c=gr(o-s,0),l=be(u+c),h=!n;++a<u;)l[a]=t[a];for(;++i<s;)(h||i<o)&&(l[r[i]]=e[i]);for(;c--;)l[a++]=e[i++];return l}function ki(e,t,r,n){for(var i=-1,o=e.length,s=-1,a=r.length,u=-1,c=t.length,l=gr(o-a,0),h=be(l+c),f=!n;++i<l;)h[i]=e[i];for(var d=i;++u<c;)h[d+u]=t[u];for(;++s<a;)(f||i<o)&&(h[d+r[s]]=e[i++]);return h}function Ii(e,t){var r=-1,n=e.length;for(t||(t=be(n));++r<n;)t[r]=e[r];return t}function Ai(e,t,n,i){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var u=t[s],c=i?i(n[u],e[u],u,n,e):r;c===r&&(c=e[u]),o?rn(n,u,c):Zr(n,u,c)}return n}function Ti(e,t){return function(r,n){var i=Vs(r)?yt:en,o=t?t():{};return i(r,e,oo(n,2),o)}}function Pi(e){return Wn((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&yo(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=Ee(t);++i<o;){var u=n[i];u&&e(t,u,i,s)}return t}))}function Oi(e,t){return function(r,n){if(null==r)return r;if(!Ks(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Ee(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Ci(e){return function(t,r,n){for(var i=-1,o=Ee(t),s=n(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===r(o[u],u,o))break}return t}}function Mi(e){return function(t){var n=Yt(t=ma(t))?nr(t):r,i=n?n[0]:t.charAt(0),o=n?vi(n,1).join(""):t.slice(1);return i[e]()+o}}function Ni(e){return function(t){return It(Ja(za(t).replace(Ve,"")),e,"")}}function Ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Br(e.prototype),n=e.apply(r,t);return Zs(n)?n:r}}function Li(e){return function(t,n,i){var o=Ee(t);if(!Ks(t)){var s=oo(n,3);t=Pa(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function ji(e){return Qi((function(t){var i=t.length,o=i,s=Fr.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new Ae(n);if(s&&!u&&"wrapper"==no(a))var u=new Fr([],!0)}for(o=u?o:i;++o<i;){var c=no(a=t[o]),l="wrapper"==c?ro(a):r;u=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[no(l[0])].apply(u,l[3]):1==a.length&&bo(a)?u[c]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Vs(r))return u.plant(r).value();for(var n=0,o=i?t[n].apply(this,e):r;++n<i;)o=t[n].call(this,o);return o}}))}function Di(e,t,n,i,o,s,u,c,l,h){var f=t&a,d=1&t,p=2&t,g=24&t,m=512&t,y=p?r:Ri(e);return function r(){for(var a=arguments.length,v=be(a),b=a;b--;)v[b]=arguments[b];if(g)var w=io(r),_=Wt(v,w);if(i&&(v=Ei(v,i,o,g)),s&&(v=ki(v,s,u,g)),a-=_,g&&a<h){var x=er(v,w);return Ki(e,t,Di,r.placeholder,n,v,x,c,l,h-a)}var S=d?n:this,E=p?S[e]:e;return a=v.length,c?v=Io(v,c):m&&a>1&&v.reverse(),f&&l<a&&(v.length=l),this&&this!==nt&&this instanceof r&&(E=y||Ri(E)),E.apply(S,v)}}function Bi(e,t){return function(r,n){return function(e,t,r,n){return vn(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Ui(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=si(n),i=si(i)):(n=oi(n),i=oi(i)),o=e(n,i)}return o}}function Fi(e){return Qi((function(t){return t=Et(t,Vt(oo())),Wn((function(r){var n=this;return e(t,(function(e){return mt(e,n,r)}))}))}))}function zi(e,t){var n=(t=t===r?" ":si(t)).length;if(n<2)return n?$n(t,e):t;var i=$n(t,ur(e/rr(t)));return Yt(t)?vi(nr(i),0,e).join(""):i.slice(0,e)}function Vi(e){return function(t,n,i){return i&&"number"!=typeof i&&yo(t,n,i)&&(n=i=r),t=ha(t),n===r?(n=t,t=0):n=ha(n),function(e,t,r,n){for(var i=-1,o=gr(ur((t-e)/(r||1)),0),s=be(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:ha(i),e)}}function Hi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=pa(t),r=pa(r)),e(t,r)}}function Ki(e,t,n,i,o,a,u,c,l,h){var f=8&t;t|=f?s:64,4&(t&=~(f?64:s))||(t&=-4);var d=[e,t,o,f?a:r,f?u:r,f?r:a,f?r:u,c,l,h],p=n.apply(r,d);return bo(e)&&To(p,d),p.placeholder=i,Co(p,e,t)}function qi(e){var t=Se[e];return function(e,r){if(e=pa(e),(r=null==r?0:mr(fa(r),292))&&fr(e)){var n=(ma(e)+"e").split("e");return+((n=(ma(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var $i=Er&&1/tr(new Er([,-0]))[1]==u?function(e){return new Er(e)}:su;function Wi(e){return function(t){var r=ho(t);return r==w?Zt(t):r==k?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Et(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Gi(e,t,i,u,c,l,h,f){var d=2&t;if(!d&&"function"!=typeof e)throw new Ae(n);var p=u?u.length:0;if(p||(t&=-97,u=c=r),h=h===r?h:gr(fa(h),0),f=f===r?f:fa(f),p-=c?c.length:0,64&t){var g=u,m=c;u=c=r}var y=d?r:ro(e),v=[e,t,i,u,c,g,m,l,h,f];if(y&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<131,u=n==a&&8==r||n==a&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!u)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ei(l,c,t[4]):c,e[4]=l?er(e[3],o):t[4]}(c=t[5])&&(l=e[5],e[5]=l?ki(l,c,t[6]):c,e[6]=l?er(e[5],o):t[6]),(c=t[7])&&(e[7]=c),n&a&&(e[8]=null==e[8]?t[8]:mr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(v,y),e=v[0],t=v[1],i=v[2],u=v[3],c=v[4],!(f=v[9]=v[9]===r?d?0:e.length:gr(v[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var i=Ri(e);return function o(){for(var s=arguments.length,a=be(s),u=s,c=io(o);u--;)a[u]=arguments[u];var l=s<3&&a[0]!==c&&a[s-1]!==c?[]:er(a,c);return(s-=l.length)<n?Ki(e,t,Di,o.placeholder,r,a,l,r,r,n-s):mt(this&&this!==nt&&this instanceof o?i:e,this,a)}}(e,t,f):t!=s&&33!=t||c.length?Di.apply(r,v):function(e,t,r,n){var i=1&t,o=Ri(e);return function t(){for(var s=-1,a=arguments.length,u=-1,c=n.length,l=be(c+a),h=this&&this!==nt&&this instanceof t?o:e;++u<c;)l[u]=n[u];for(;a--;)l[u++]=arguments[++s];return mt(h,i?r:this,l)}}(e,t,i,u);else var b=function(e,t,r){var n=1&t,i=Ri(e);return function t(){return(this&&this!==nt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return Co((y?Yn:To)(b,v),e,t)}function Ji(e,t,n,i){return e===r||Bs(e,Oe[n])&&!Ne.call(i,n)?t:e}function Xi(e,t,n,i,o,s){return Zs(e)&&Zs(t)&&(s.set(t,e),Un(e,t,r,Xi,s),s.delete(t)),e}function Yi(e){return ra(e)?r:e}function Zi(e,t,n,i,o,s){var a=1&n,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(e),h=s.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&n?new qr:r;for(s.set(e,t),s.set(t,e);++f<u;){var g=e[f],m=t[f];if(i)var y=a?i(m,g,f,t,e,s):i(g,m,f,e,t,s);if(y!==r){if(y)continue;d=!1;break}if(p){if(!Tt(t,(function(e,t){if(!Kt(p,t)&&(g===e||o(g,e,n,i,s)))return p.push(t)}))){d=!1;break}}else if(g!==m&&!o(g,m,n,i,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Qi(e){return Oo(Eo(e,r,Ho),e+"")}function eo(e){return xn(e,Pa,co)}function to(e){return xn(e,Oa,lo)}var ro=Ar?function(e){return Ar.get(e)}:su;function no(e){for(var t=e.name+"",r=Tr[t],n=Ne.call(Tr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function io(e){return(Ne.call(Dr,"placeholder")?Dr:e).placeholder}function oo(){var e=Dr.iteratee||ru;return e=e===ru?Nn:e,arguments.length?e(arguments[0],arguments[1]):e}function so(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ao(e){for(var t=Pa(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,xo(i)]}return t}function uo(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Mn(n)?n:r}var co=lr?function(e){return null==e?[]:(e=Ee(e),_t(lr(e),(function(t){return rt.call(e,t)})))}:du,lo=lr?function(e){for(var t=[];e;)kt(t,co(e)),e=Ze(e);return t}:du,ho=Sn;function fo(e,t,r){for(var n=-1,i=(t=mi(t,e)).length,o=!1;++n<i;){var s=Lo(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Ys(i)&&mo(s,i)&&(Vs(e)||zs(e))}function po(e){return"function"!=typeof e.constructor||_o(e)?{}:Br(Ze(e))}function go(e){return Vs(e)||zs(e)||!!(ot&&e&&e[ot])}function mo(e,t){var r=typeof e;return!!(t=null==t?c:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,r){if(!Zs(r))return!1;var n=typeof t;return!!("number"==n?Ks(r)&&mo(t,r.length):"string"==n&&t in r)&&Bs(r[t],e)}function vo(e,t){if(Vs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!sa(e))||Y.test(e)||!X.test(e)||null!=t&&e in Ee(t)}function bo(e){var t=no(e),r=Dr[t];if("function"!=typeof r||!(t in zr.prototype))return!1;if(e===r)return!0;var n=ro(r);return!!n&&e===n[0]}(_r&&ho(new _r(new ArrayBuffer(1)))!=O||xr&&ho(new xr)!=w||Sr&&ho(Sr.resolve())!=S||Er&&ho(new Er)!=k||kr&&ho(new kr)!=T)&&(ho=function(e){var t=Sn(e),n=t==x?e.constructor:r,i=n?jo(n):"";if(i)switch(i){case Pr:return O;case Or:return w;case Cr:return S;case Mr:return k;case Nr:return T}return t});var wo=Ce?Js:pu;function _o(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function xo(e){return e==e&&!Zs(e)}function So(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in Ee(n))}}function Eo(e,t,n){return t=gr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=gr(r.length-t,0),s=be(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=be(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),mt(e,this,a)}}function ko(e,t){return t.length<2?e:_n(e,ei(t,0,-1))}function Io(e,t){for(var n=e.length,i=mr(t.length,n),o=Ii(e);i--;){var s=t[i];e[i]=mo(s,n)?o[s]:r}return e}function Ao(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var To=Mo(Yn),Po=ar||function(e,t){return nt.setTimeout(e,t)},Oo=Mo(Zn);function Co(e,t,r){var n=t+"";return Oo(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ne,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return vt(f,(function(r){var n="_."+r[0];t&r[1]&&!xt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ie);return t?t[1].split(oe):[]}(n),r)))}function Mo(e){var t=0,n=0;return function(){var i=yr(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function No(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=qn(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Ro=function(e){var t=Ms((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,r,n,i){t.push(n?i.replace(ue,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}();function Lo(e){if("string"==typeof e||sa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Do(e){if(e instanceof zr)return e.clone();var t=new Fr(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Wn((function(e,t){return qs(e)?cn(e,gn(t,1,qs,!0)):[]})),Uo=Wn((function(e,t){var n=Go(t);return qs(n)&&(n=r),qs(e)?cn(e,gn(t,1,qs,!0),oo(n,2)):[]})),Fo=Wn((function(e,t){var n=Go(t);return qs(n)&&(n=r),qs(e)?cn(e,gn(t,1,qs,!0),r,n):[]}));function zo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=gr(n+i,0)),Ct(e,oo(t,3),i)}function Vo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=fa(n),o=n<0?gr(i+o,0):mr(o,i-1)),Ct(e,oo(t,3),o,!0)}function Ho(e){return null!=e&&e.length?gn(e,1):[]}function Ko(e){return e&&e.length?e[0]:r}var qo=Wn((function(e){var t=Et(e,pi);return t.length&&t[0]===e[0]?An(t):[]})),$o=Wn((function(e){var t=Go(e),n=Et(e,pi);return t===Go(n)?t=r:n.pop(),n.length&&n[0]===e[0]?An(n,oo(t,2)):[]})),Wo=Wn((function(e){var t=Go(e),n=Et(e,pi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?An(n,r,t):[]}));function Go(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Jo=Wn(Xo);function Xo(e,t){return e&&e.length&&t&&t.length?Hn(e,t):e}var Yo=Qi((function(e,t){var r=null==e?0:e.length,n=nn(e,t);return Kn(e,Et(t,(function(e){return mo(e,r)?+e:e})).sort(Si)),n}));function Zo(e){return null==e?e:wr.call(e)}var Qo=Wn((function(e){return ai(gn(e,1,qs,!0))})),es=Wn((function(e){var t=Go(e);return qs(t)&&(t=r),ai(gn(e,1,qs,!0),oo(t,2))})),ts=Wn((function(e){var t=Go(e);return t="function"==typeof t?t:r,ai(gn(e,1,qs,!0),r,t)}));function rs(e){if(!e||!e.length)return[];var t=0;return e=_t(e,(function(e){if(qs(e))return t=gr(e.length,t),!0})),Ft(t,(function(t){return Et(e,jt(t))}))}function ns(e,t){if(!e||!e.length)return[];var n=rs(e);return null==t?n:Et(n,(function(e){return mt(t,r,e)}))}var is=Wn((function(e,t){return qs(e)?cn(e,t):[]})),os=Wn((function(e){return fi(_t(e,qs))})),ss=Wn((function(e){var t=Go(e);return qs(t)&&(t=r),fi(_t(e,qs),oo(t,2))})),as=Wn((function(e){var t=Go(e);return t="function"==typeof t?t:r,fi(_t(e,qs),r,t)})),us=Wn(rs),cs=Wn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ns(e,n)}));function ls(e){var t=Dr(e);return t.__chain__=!0,t}function hs(e,t){return t(e)}var fs=Qi((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return nn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof zr&&mo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:hs,args:[o],thisArg:r}),new Fr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)})),ds=Ti((function(e,t,r){Ne.call(e,r)?++e[r]:rn(e,r,1)})),ps=Li(zo),gs=Li(Vo);function ms(e,t){return(Vs(e)?vt:ln)(e,oo(t,3))}function ys(e,t){return(Vs(e)?bt:hn)(e,oo(t,3))}var vs=Ti((function(e,t,r){Ne.call(e,r)?e[r].push(t):rn(e,r,[t])})),bs=Wn((function(e,t,r){var n=-1,i="function"==typeof t,o=Ks(e)?be(e.length):[];return ln(e,(function(e){o[++n]=i?mt(t,e,r):Tn(e,t,r)})),o})),ws=Ti((function(e,t,r){rn(e,r,t)}));function _s(e,t){return(Vs(e)?Et:jn)(e,oo(t,3))}var xs=Ti((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Ss=Wn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&yo(e,t[0],t[1])?t=[]:r>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),zn(e,gn(t,1),[])})),Es=Dt||function(){return nt.Date.now()};function ks(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Gi(e,a,r,r,r,r,t)}function Is(e,t){var i;if("function"!=typeof t)throw new Ae(n);return e=fa(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var As=Wn((function(e,t,r){var n=1;if(r.length){var i=er(r,io(As));n|=s}return Gi(e,n,t,r,i)})),Ts=Wn((function(e,t,r){var n=3;if(r.length){var i=er(r,io(Ts));n|=s}return Gi(t,n,e,r,i)}));function Ps(e,t,i){var o,s,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ae(n);function g(t){var n=o,i=s;return o=s=r,h=t,u=e.apply(i,n)}function m(e){return h=e,c=Po(v,t),f?g(e):u}function y(e){var n=e-l;return l===r||n>=t||n<0||d&&e-h>=a}function v(){var e=Es();if(y(e))return b(e);c=Po(v,function(e){var r=t-(e-l);return d?mr(r,a-(e-h)):r}(e))}function b(e){return c=r,p&&o?g(e):(o=s=r,u)}function w(){var e=Es(),n=y(e);if(o=arguments,s=this,l=e,n){if(c===r)return m(l);if(d)return bi(c),c=Po(v,t),g(l)}return c===r&&(c=Po(v,t)),u}return t=pa(t)||0,Zs(i)&&(f=!!i.leading,a=(d="maxWait"in i)?gr(pa(i.maxWait)||0,t):a,p="trailing"in i?!!i.trailing:p),w.cancel=function(){c!==r&&bi(c),h=0,o=l=s=c=r},w.flush=function(){return c===r?u:b(Es())},w}var Os=Wn((function(e,t){return un(e,1,t)})),Cs=Wn((function(e,t,r){return un(e,pa(t)||0,r)}));function Ms(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ms.Cache||Kr),r}function Ns(e){if("function"!=typeof e)throw new Ae(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ms.Cache=Kr;var Rs=yi((function(e,t){var r=(t=1==t.length&&Vs(t[0])?Et(t[0],Vt(oo())):Et(gn(t,1),Vt(oo()))).length;return Wn((function(n){for(var i=-1,o=mr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return mt(e,this,n)}))})),Ls=Wn((function(e,t){var n=er(t,io(Ls));return Gi(e,s,r,t,n)})),js=Wn((function(e,t){var n=er(t,io(js));return Gi(e,64,r,t,n)})),Ds=Qi((function(e,t){return Gi(e,256,r,r,r,t)}));function Bs(e,t){return e===t||e!=e&&t!=t}var Us=Hi(En),Fs=Hi((function(e,t){return e>=t})),zs=Pn(function(){return arguments}())?Pn:function(e){return Qs(e)&&Ne.call(e,"callee")&&!rt.call(e,"callee")},Vs=be.isArray,Hs=ct?Vt(ct):function(e){return Qs(e)&&Sn(e)==P};function Ks(e){return null!=e&&Ys(e.length)&&!Js(e)}function qs(e){return Qs(e)&&Ks(e)}var $s=hr||pu,Ws=ht?Vt(ht):function(e){return Qs(e)&&Sn(e)==m};function Gs(e){if(!Qs(e))return!1;var t=Sn(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ra(e)}function Js(e){if(!Zs(e))return!1;var t=Sn(e);return t==v||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xs(e){return"number"==typeof e&&e==fa(e)}function Ys(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function Zs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qs(e){return null!=e&&"object"==typeof e}var ea=ft?Vt(ft):function(e){return Qs(e)&&ho(e)==w};function ta(e){return"number"==typeof e||Qs(e)&&Sn(e)==_}function ra(e){if(!Qs(e)||Sn(e)!=x)return!1;var t=Ze(e);if(null===t)return!0;var r=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Me.call(r)==De}var na=dt?Vt(dt):function(e){return Qs(e)&&Sn(e)==E},ia=pt?Vt(pt):function(e){return Qs(e)&&ho(e)==k};function oa(e){return"string"==typeof e||!Vs(e)&&Qs(e)&&Sn(e)==I}function sa(e){return"symbol"==typeof e||Qs(e)&&Sn(e)==A}var aa=gt?Vt(gt):function(e){return Qs(e)&&Ys(e.length)&&!!Xe[Sn(e)]},ua=Hi(Ln),ca=Hi((function(e,t){return e<=t}));function la(e){if(!e)return[];if(Ks(e))return oa(e)?nr(e):Ii(e);if(at&&e[at])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[at]());var t=ho(e);return(t==w?Zt:t==k?tr:Ba)(e)}function ha(e){return e?(e=pa(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fa(e){var t=ha(e),r=t%1;return t==t?r?t-r:t:0}function da(e){return e?on(fa(e),0,h):0}function pa(e){if("number"==typeof e)return e;if(sa(e))return l;if(Zs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var r=fe.test(e);return r||pe.test(e)?et(e.slice(2),r?2:8):he.test(e)?l:+e}function ga(e){return Ai(e,Oa(e))}function ma(e){return null==e?"":si(e)}var ya=Pi((function(e,t){if(_o(t)||Ks(t))Ai(t,Pa(t),e);else for(var r in t)Ne.call(t,r)&&Zr(e,r,t[r])})),va=Pi((function(e,t){Ai(t,Oa(t),e)})),ba=Pi((function(e,t,r,n){Ai(t,Oa(t),e,n)})),wa=Pi((function(e,t,r,n){Ai(t,Pa(t),e,n)})),_a=Qi(nn),xa=Wn((function(e,t){e=Ee(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&yo(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],a=Oa(s),u=-1,c=a.length;++u<c;){var l=a[u],h=e[l];(h===r||Bs(h,Oe[l])&&!Ne.call(e,l))&&(e[l]=s[l])}return e})),Sa=Wn((function(e){return e.push(r,Xi),mt(Ma,r,e)}));function Ea(e,t,n){var i=null==e?r:_n(e,t);return i===r?n:i}function ka(e,t){return null!=e&&fo(e,t,In)}var Ia=Bi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=r}),Za(tu)),Aa=Bi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),Ne.call(e,t)?e[t].push(r):e[t]=[r]}),oo),Ta=Wn(Tn);function Pa(e){return Ks(e)?Wr(e):Rn(e)}function Oa(e){return Ks(e)?Wr(e,!0):function(e){if(!Zs(e))return function(e){var t=[];if(null!=e)for(var r in Ee(e))t.push(r);return t}(e);var t=_o(e),r=[];for(var n in e)("constructor"!=n||!t&&Ne.call(e,n))&&r.push(n);return r}(e)}var Ca=Pi((function(e,t,r){Un(e,t,r)})),Ma=Pi((function(e,t,r,n){Un(e,t,r,n)})),Na=Qi((function(e,t){var r={};if(null==e)return r;var n=!1;t=Et(t,(function(t){return t=mi(t,e),n||(n=t.length>1),t})),Ai(e,to(e),r),n&&(r=sn(r,7,Yi));for(var i=t.length;i--;)ui(r,t[i]);return r})),Ra=Qi((function(e,t){return null==e?{}:function(e,t){return Vn(e,t,(function(t,r){return ka(e,r)}))}(e,t)}));function La(e,t){if(null==e)return{};var r=Et(to(e),(function(e){return[e]}));return t=oo(t),Vn(e,r,(function(e,r){return t(e,r[0])}))}var ja=Wi(Pa),Da=Wi(Oa);function Ba(e){return null==e?[]:Ht(e,Pa(e))}var Ua=Ni((function(e,t,r){return t=t.toLowerCase(),e+(r?Fa(t):t)}));function Fa(e){return Ga(ma(e).toLowerCase())}function za(e){return(e=ma(e))&&e.replace(me,Gt).replace(He,"")}var Va=Ni((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Ha=Ni((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ka=Mi("toLowerCase"),qa=Ni((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),$a=Ni((function(e,t,r){return e+(r?" ":"")+Ga(t)})),Wa=Ni((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Ga=Mi("toUpperCase");function Ja(e,t,n){return e=ma(e),(t=n?r:t)===r?function(e){return We.test(e)}(e)?function(e){return e.match(qe)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Xa=Wn((function(e,t){try{return mt(e,r,t)}catch(e){return Gs(e)?e:new _e(e)}})),Ya=Qi((function(e,t){return vt(t,(function(t){t=Lo(t),rn(e,t,As(e[t],e))})),e}));function Za(e){return function(){return e}}var Qa=ji(),eu=ji(!0);function tu(e){return e}function ru(e){return Nn("function"==typeof e?e:sn(e,1))}var nu=Wn((function(e,t){return function(r){return Tn(r,e,t)}})),iu=Wn((function(e,t){return function(r){return Tn(e,r,t)}}));function ou(e,t,r){var n=Pa(t),i=wn(t,n);null!=r||Zs(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=wn(t,Pa(t)));var o=!(Zs(r)&&"chain"in r&&!r.chain),s=Js(e);return vt(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=Ii(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,kt([this.value()],arguments))})})),e}function su(){}var au=Fi(Et),uu=Fi(wt),cu=Fi(Tt);function lu(e){return vo(e)?jt(Lo(e)):function(e){return function(t){return _n(t,e)}}(e)}var hu=Vi(),fu=Vi(!0);function du(){return[]}function pu(){return!1}var gu,mu=Ui((function(e,t){return e+t}),0),yu=qi("ceil"),vu=Ui((function(e,t){return e/t}),1),bu=qi("floor"),wu=Ui((function(e,t){return e*t}),1),_u=qi("round"),xu=Ui((function(e,t){return e-t}),0);return Dr.after=function(e,t){if("function"!=typeof t)throw new Ae(n);return e=fa(e),function(){if(--e<1)return t.apply(this,arguments)}},Dr.ary=ks,Dr.assign=ya,Dr.assignIn=va,Dr.assignInWith=ba,Dr.assignWith=wa,Dr.at=_a,Dr.before=Is,Dr.bind=As,Dr.bindAll=Ya,Dr.bindKey=Ts,Dr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vs(e)?e:[e]},Dr.chain=ls,Dr.chunk=function(e,t,n){t=(n?yo(e,t,n):t===r)?1:gr(fa(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=be(ur(i/t));o<i;)a[s++]=ei(e,o,o+=t);return a},Dr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},Dr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=be(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return kt(Vs(r)?Ii(r):[r],gn(t,1))},Dr.cond=function(e){var t=null==e?0:e.length,r=oo();return e=t?Et(e,(function(e){if("function"!=typeof e[1])throw new Ae(n);return[r(e[0]),e[1]]})):[],Wn((function(r){for(var n=-1;++n<t;){var i=e[n];if(mt(i[0],this,r))return mt(i[1],this,r)}}))},Dr.conforms=function(e){return function(e){var t=Pa(e);return function(r){return an(r,e,t)}}(sn(e,1))},Dr.constant=Za,Dr.countBy=ds,Dr.create=function(e,t){var r=Br(e);return null==t?r:tn(r,t)},Dr.curry=function e(t,n,i){var o=Gi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},Dr.curryRight=function e(t,n,i){var o=Gi(t,16,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},Dr.debounce=Ps,Dr.defaults=xa,Dr.defaultsDeep=Sa,Dr.defer=Os,Dr.delay=Cs,Dr.difference=Bo,Dr.differenceBy=Uo,Dr.differenceWith=Fo,Dr.drop=function(e,t,n){var i=null==e?0:e.length;return i?ei(e,(t=n||t===r?1:fa(t))<0?0:t,i):[]},Dr.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ei(e,0,(t=i-(t=n||t===r?1:fa(t)))<0?0:t):[]},Dr.dropRightWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!0,!0):[]},Dr.dropWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!0):[]},Dr.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&yo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=fa(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:fa(i))<0&&(i+=o),i=n>i?0:da(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Dr.filter=function(e,t){return(Vs(e)?_t:pn)(e,oo(t,3))},Dr.flatMap=function(e,t){return gn(_s(e,t),1)},Dr.flatMapDeep=function(e,t){return gn(_s(e,t),u)},Dr.flatMapDepth=function(e,t,n){return n=n===r?1:fa(n),gn(_s(e,t),n)},Dr.flatten=Ho,Dr.flattenDeep=function(e){return null!=e&&e.length?gn(e,u):[]},Dr.flattenDepth=function(e,t){return null!=e&&e.length?gn(e,t=t===r?1:fa(t)):[]},Dr.flip=function(e){return Gi(e,512)},Dr.flow=Qa,Dr.flowRight=eu,Dr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Dr.functions=function(e){return null==e?[]:wn(e,Pa(e))},Dr.functionsIn=function(e){return null==e?[]:wn(e,Oa(e))},Dr.groupBy=vs,Dr.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},Dr.intersection=qo,Dr.intersectionBy=$o,Dr.intersectionWith=Wo,Dr.invert=Ia,Dr.invertBy=Aa,Dr.invokeMap=bs,Dr.iteratee=ru,Dr.keyBy=ws,Dr.keys=Pa,Dr.keysIn=Oa,Dr.map=_s,Dr.mapKeys=function(e,t){var r={};return t=oo(t,3),vn(e,(function(e,n,i){rn(r,t(e,n,i),e)})),r},Dr.mapValues=function(e,t){var r={};return t=oo(t,3),vn(e,(function(e,n,i){rn(r,n,t(e,n,i))})),r},Dr.matches=function(e){return Dn(sn(e,1))},Dr.matchesProperty=function(e,t){return Bn(e,sn(t,1))},Dr.memoize=Ms,Dr.merge=Ca,Dr.mergeWith=Ma,Dr.method=nu,Dr.methodOf=iu,Dr.mixin=ou,Dr.negate=Ns,Dr.nthArg=function(e){return e=fa(e),Wn((function(t){return Fn(t,e)}))},Dr.omit=Na,Dr.omitBy=function(e,t){return La(e,Ns(oo(t)))},Dr.once=function(e){return Is(2,e)},Dr.orderBy=function(e,t,n,i){return null==e?[]:(Vs(t)||(t=null==t?[]:[t]),Vs(n=i?r:n)||(n=null==n?[]:[n]),zn(e,t,n))},Dr.over=au,Dr.overArgs=Rs,Dr.overEvery=uu,Dr.overSome=cu,Dr.partial=Ls,Dr.partialRight=js,Dr.partition=xs,Dr.pick=Ra,Dr.pickBy=La,Dr.property=lu,Dr.propertyOf=function(e){return function(t){return null==e?r:_n(e,t)}},Dr.pull=Jo,Dr.pullAll=Xo,Dr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Hn(e,t,oo(r,2)):e},Dr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hn(e,t,r,n):e},Dr.pullAt=Yo,Dr.range=hu,Dr.rangeRight=fu,Dr.rearg=Ds,Dr.reject=function(e,t){return(Vs(e)?_t:pn)(e,Ns(oo(t,3)))},Dr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=oo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return Kn(e,i),r},Dr.rest=function(e,t){if("function"!=typeof e)throw new Ae(n);return Wn(e,t=t===r?t:fa(t))},Dr.reverse=Zo,Dr.sampleSize=function(e,t,n){return t=(n?yo(e,t,n):t===r)?1:fa(t),(Vs(e)?Jr:Jn)(e,t)},Dr.set=function(e,t,r){return null==e?e:Xn(e,t,r)},Dr.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Xn(e,t,n,i)},Dr.shuffle=function(e){return(Vs(e)?Xr:Qn)(e)},Dr.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&yo(e,t,n)?(t=0,n=i):(t=null==t?0:fa(t),n=n===r?i:fa(n)),ei(e,t,n)):[]},Dr.sortBy=Ss,Dr.sortedUniq=function(e){return e&&e.length?ii(e):[]},Dr.sortedUniqBy=function(e,t){return e&&e.length?ii(e,oo(t,2)):[]},Dr.split=function(e,t,n){return n&&"number"!=typeof n&&yo(e,t,n)&&(t=n=r),(n=n===r?h:n>>>0)?(e=ma(e))&&("string"==typeof t||null!=t&&!na(t))&&!(t=si(t))&&Yt(e)?vi(nr(e),0,n):e.split(t,n):[]},Dr.spread=function(e,t){if("function"!=typeof e)throw new Ae(n);return t=null==t?0:gr(fa(t),0),Wn((function(r){var n=r[t],i=vi(r,0,t);return n&&kt(i,n),mt(e,this,i)}))},Dr.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},Dr.take=function(e,t,n){return e&&e.length?ei(e,0,(t=n||t===r?1:fa(t))<0?0:t):[]},Dr.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ei(e,(t=i-(t=n||t===r?1:fa(t)))<0?0:t,i):[]},Dr.takeRightWhile=function(e,t){return e&&e.length?li(e,oo(t,3),!1,!0):[]},Dr.takeWhile=function(e,t){return e&&e.length?li(e,oo(t,3)):[]},Dr.tap=function(e,t){return t(e),e},Dr.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new Ae(n);return Zs(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Ps(e,t,{leading:i,maxWait:t,trailing:o})},Dr.thru=hs,Dr.toArray=la,Dr.toPairs=ja,Dr.toPairsIn=Da,Dr.toPath=function(e){return Vs(e)?Et(e,Lo):sa(e)?[e]:Ii(Ro(ma(e)))},Dr.toPlainObject=ga,Dr.transform=function(e,t,r){var n=Vs(e),i=n||$s(e)||aa(e);if(t=oo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Zs(e)&&Js(o)?Br(Ze(e)):{}}return(i?vt:vn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Dr.unary=function(e){return ks(e,1)},Dr.union=Qo,Dr.unionBy=es,Dr.unionWith=ts,Dr.uniq=function(e){return e&&e.length?ai(e):[]},Dr.uniqBy=function(e,t){return e&&e.length?ai(e,oo(t,2)):[]},Dr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ai(e,r,t):[]},Dr.unset=function(e,t){return null==e||ui(e,t)},Dr.unzip=rs,Dr.unzipWith=ns,Dr.update=function(e,t,r){return null==e?e:ci(e,t,gi(r))},Dr.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ci(e,t,gi(n),i)},Dr.values=Ba,Dr.valuesIn=function(e){return null==e?[]:Ht(e,Oa(e))},Dr.without=is,Dr.words=Ja,Dr.wrap=function(e,t){return Ls(gi(t),e)},Dr.xor=os,Dr.xorBy=ss,Dr.xorWith=as,Dr.zip=us,Dr.zipObject=function(e,t){return di(e||[],t||[],Zr)},Dr.zipObjectDeep=function(e,t){return di(e||[],t||[],Xn)},Dr.zipWith=cs,Dr.entries=ja,Dr.entriesIn=Da,Dr.extend=va,Dr.extendWith=ba,ou(Dr,Dr),Dr.add=mu,Dr.attempt=Xa,Dr.camelCase=Ua,Dr.capitalize=Fa,Dr.ceil=yu,Dr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=pa(n))==n?n:0),t!==r&&(t=(t=pa(t))==t?t:0),on(pa(e),t,n)},Dr.clone=function(e){return sn(e,4)},Dr.cloneDeep=function(e){return sn(e,5)},Dr.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:r)},Dr.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:r)},Dr.conformsTo=function(e,t){return null==t||an(e,t,Pa(t))},Dr.deburr=za,Dr.defaultTo=function(e,t){return null==e||e!=e?t:e},Dr.divide=vu,Dr.endsWith=function(e,t,n){e=ma(e),t=si(t);var i=e.length,o=n=n===r?i:on(fa(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},Dr.eq=Bs,Dr.escape=function(e){return(e=ma(e))&&$.test(e)?e.replace(K,Jt):e},Dr.escapeRegExp=function(e){return(e=ma(e))&&ee.test(e)?e.replace(Q,"\\$&"):e},Dr.every=function(e,t,n){var i=Vs(e)?wt:fn;return n&&yo(e,t,n)&&(t=r),i(e,oo(t,3))},Dr.find=ps,Dr.findIndex=zo,Dr.findKey=function(e,t){return Ot(e,oo(t,3),vn)},Dr.findLast=gs,Dr.findLastIndex=Vo,Dr.findLastKey=function(e,t){return Ot(e,oo(t,3),bn)},Dr.floor=bu,Dr.forEach=ms,Dr.forEachRight=ys,Dr.forIn=function(e,t){return null==e?e:mn(e,oo(t,3),Oa)},Dr.forInRight=function(e,t){return null==e?e:yn(e,oo(t,3),Oa)},Dr.forOwn=function(e,t){return e&&vn(e,oo(t,3))},Dr.forOwnRight=function(e,t){return e&&bn(e,oo(t,3))},Dr.get=Ea,Dr.gt=Us,Dr.gte=Fs,Dr.has=function(e,t){return null!=e&&fo(e,t,kn)},Dr.hasIn=ka,Dr.head=Ko,Dr.identity=tu,Dr.includes=function(e,t,r,n){e=Ks(e)?e:Ba(e),r=r&&!n?fa(r):0;var i=e.length;return r<0&&(r=gr(i+r,0)),oa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Mt(e,t,r)>-1},Dr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=gr(n+i,0)),Mt(e,t,i)},Dr.inRange=function(e,t,n){return t=ha(t),n===r?(n=t,t=0):n=ha(n),function(e,t,r){return e>=mr(t,r)&&e<gr(t,r)}(e=pa(e),t,n)},Dr.invoke=Ta,Dr.isArguments=zs,Dr.isArray=Vs,Dr.isArrayBuffer=Hs,Dr.isArrayLike=Ks,Dr.isArrayLikeObject=qs,Dr.isBoolean=function(e){return!0===e||!1===e||Qs(e)&&Sn(e)==g},Dr.isBuffer=$s,Dr.isDate=Ws,Dr.isElement=function(e){return Qs(e)&&1===e.nodeType&&!ra(e)},Dr.isEmpty=function(e){if(null==e)return!0;if(Ks(e)&&(Vs(e)||"string"==typeof e||"function"==typeof e.splice||$s(e)||aa(e)||zs(e)))return!e.length;var t=ho(e);if(t==w||t==k)return!e.size;if(_o(e))return!Rn(e).length;for(var r in e)if(Ne.call(e,r))return!1;return!0},Dr.isEqual=function(e,t){return On(e,t)},Dr.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?On(e,t,r,n):!!i},Dr.isError=Gs,Dr.isFinite=function(e){return"number"==typeof e&&fr(e)},Dr.isFunction=Js,Dr.isInteger=Xs,Dr.isLength=Ys,Dr.isMap=ea,Dr.isMatch=function(e,t){return e===t||Cn(e,t,ao(t))},Dr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Cn(e,t,ao(t),n)},Dr.isNaN=function(e){return ta(e)&&e!=+e},Dr.isNative=function(e){if(wo(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},Dr.isNil=function(e){return null==e},Dr.isNull=function(e){return null===e},Dr.isNumber=ta,Dr.isObject=Zs,Dr.isObjectLike=Qs,Dr.isPlainObject=ra,Dr.isRegExp=na,Dr.isSafeInteger=function(e){return Xs(e)&&e>=-9007199254740991&&e<=c},Dr.isSet=ia,Dr.isString=oa,Dr.isSymbol=sa,Dr.isTypedArray=aa,Dr.isUndefined=function(e){return e===r},Dr.isWeakMap=function(e){return Qs(e)&&ho(e)==T},Dr.isWeakSet=function(e){return Qs(e)&&"[object WeakSet]"==Sn(e)},Dr.join=function(e,t){return null==e?"":dr.call(e,t)},Dr.kebabCase=Va,Dr.last=Go,Dr.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=fa(n))<0?gr(i+o,0):mr(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Ct(e,Rt,o,!0)},Dr.lowerCase=Ha,Dr.lowerFirst=Ka,Dr.lt=ua,Dr.lte=ca,Dr.max=function(e){return e&&e.length?dn(e,tu,En):r},Dr.maxBy=function(e,t){return e&&e.length?dn(e,oo(t,2),En):r},Dr.mean=function(e){return Lt(e,tu)},Dr.meanBy=function(e,t){return Lt(e,oo(t,2))},Dr.min=function(e){return e&&e.length?dn(e,tu,Ln):r},Dr.minBy=function(e,t){return e&&e.length?dn(e,oo(t,2),Ln):r},Dr.stubArray=du,Dr.stubFalse=pu,Dr.stubObject=function(){return{}},Dr.stubString=function(){return""},Dr.stubTrue=function(){return!0},Dr.multiply=wu,Dr.nth=function(e,t){return e&&e.length?Fn(e,fa(t)):r},Dr.noConflict=function(){return nt._===this&&(nt._=Be),this},Dr.noop=su,Dr.now=Es,Dr.pad=function(e,t,r){e=ma(e);var n=(t=fa(t))?rr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return zi(cr(i),r)+e+zi(ur(i),r)},Dr.padEnd=function(e,t,r){e=ma(e);var n=(t=fa(t))?rr(e):0;return t&&n<t?e+zi(t-n,r):e},Dr.padStart=function(e,t,r){e=ma(e);var n=(t=fa(t))?rr(e):0;return t&&n<t?zi(t-n,r)+e:e},Dr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),vr(ma(e).replace(te,""),t||0)},Dr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ha(e),t===r?(t=e,e=0):t=ha(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=br();return mr(e+o*(t-e+Qe("1e-"+((o+"").length-1))),t)}return qn(e,t)},Dr.reduce=function(e,t,r){var n=Vs(e)?It:Bt,i=arguments.length<3;return n(e,oo(t,4),r,i,ln)},Dr.reduceRight=function(e,t,r){var n=Vs(e)?At:Bt,i=arguments.length<3;return n(e,oo(t,4),r,i,hn)},Dr.repeat=function(e,t,n){return t=(n?yo(e,t,n):t===r)?1:fa(t),$n(ma(e),t)},Dr.replace=function(){var e=arguments,t=ma(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Dr.result=function(e,t,n){var i=-1,o=(t=mi(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[Lo(t[i])];s===r&&(i=o,s=n),e=Js(s)?s.call(e):s}return e},Dr.round=_u,Dr.runInContext=e,Dr.sample=function(e){return(Vs(e)?Gr:Gn)(e)},Dr.size=function(e){if(null==e)return 0;if(Ks(e))return oa(e)?rr(e):e.length;var t=ho(e);return t==w||t==k?e.size:Rn(e).length},Dr.snakeCase=qa,Dr.some=function(e,t,n){var i=Vs(e)?Tt:ti;return n&&yo(e,t,n)&&(t=r),i(e,oo(t,3))},Dr.sortedIndex=function(e,t){return ri(e,t)},Dr.sortedIndexBy=function(e,t,r){return ni(e,t,oo(r,2))},Dr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ri(e,t);if(n<r&&Bs(e[n],t))return n}return-1},Dr.sortedLastIndex=function(e,t){return ri(e,t,!0)},Dr.sortedLastIndexBy=function(e,t,r){return ni(e,t,oo(r,2),!0)},Dr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ri(e,t,!0)-1;if(Bs(e[r],t))return r}return-1},Dr.startCase=$a,Dr.startsWith=function(e,t,r){return e=ma(e),r=null==r?0:on(fa(r),0,e.length),t=si(t),e.slice(r,r+t.length)==t},Dr.subtract=xu,Dr.sum=function(e){return e&&e.length?Ut(e,tu):0},Dr.sumBy=function(e,t){return e&&e.length?Ut(e,oo(t,2)):0},Dr.template=function(e,t,n){var i=Dr.templateSettings;n&&yo(e,t,n)&&(t=r),e=ma(e),t=ba({},t,i,Ji);var o,s,a=ba({},t.imports,i.imports,Ji),u=Pa(a),c=Ht(a,u),l=0,h=t.interpolate||ye,f="__p += '",d=ke((t.escape||ye).source+"|"+h.source+"|"+(h===J?ce:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),p="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Je+"]")+"\n";e.replace(d,(function(t,r,n,i,a,u){return n||(n=i),f+=e.slice(l,u).replace(ve,Xt),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var g=Ne.call(t,"variable")&&t.variable;if(g){if(ae.test(g))throw new _e("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(F,""):f).replace(z,"$1").replace(V,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Xa((function(){return xe(u,p+"return "+f).apply(r,c)}));if(m.source=f,Gs(m))throw m;return m},Dr.times=function(e,t){if((e=fa(e))<1||e>c)return[];var r=h,n=mr(e,h);t=oo(t),e-=h;for(var i=Ft(n,t);++r<e;)t(r);return i},Dr.toFinite=ha,Dr.toInteger=fa,Dr.toLength=da,Dr.toLower=function(e){return ma(e).toLowerCase()},Dr.toNumber=pa,Dr.toSafeInteger=function(e){return e?on(fa(e),-9007199254740991,c):0===e?e:0},Dr.toString=ma,Dr.toUpper=function(e){return ma(e).toUpperCase()},Dr.trim=function(e,t,n){if((e=ma(e))&&(n||t===r))return zt(e);if(!e||!(t=si(t)))return e;var i=nr(e),o=nr(t);return vi(i,qt(i,o),$t(i,o)+1).join("")},Dr.trimEnd=function(e,t,n){if((e=ma(e))&&(n||t===r))return e.slice(0,ir(e)+1);if(!e||!(t=si(t)))return e;var i=nr(e);return vi(i,0,$t(i,nr(t))+1).join("")},Dr.trimStart=function(e,t,n){if((e=ma(e))&&(n||t===r))return e.replace(te,"");if(!e||!(t=si(t)))return e;var i=nr(e);return vi(i,qt(i,nr(t))).join("")},Dr.truncate=function(e,t){var n=30,i="...";if(Zs(t)){var o="separator"in t?t.separator:o;n="length"in t?fa(t.length):n,i="omission"in t?si(t.omission):i}var s=(e=ma(e)).length;if(Yt(e)){var a=nr(e);s=a.length}if(n>=s)return e;var u=n-rr(i);if(u<1)return i;var c=a?vi(a,0,u).join(""):e.slice(0,u);if(o===r)return c+i;if(a&&(u+=c.length-u),na(o)){if(e.slice(u).search(o)){var l,h=c;for(o.global||(o=ke(o.source,ma(le.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===r?u:f)}}else if(e.indexOf(si(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+i},Dr.unescape=function(e){return(e=ma(e))&&q.test(e)?e.replace(H,or):e},Dr.uniqueId=function(e){var t=++Re;return ma(e)+t},Dr.upperCase=Wa,Dr.upperFirst=Ga,Dr.each=ms,Dr.eachRight=ys,Dr.first=Ko,ou(Dr,(gu={},vn(Dr,(function(e,t){Ne.call(Dr.prototype,t)||(gu[t]=e)})),gu),{chain:!1}),Dr.VERSION="4.17.21",vt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Dr[e].placeholder=Dr})),vt(["drop","take"],(function(e,t){zr.prototype[e]=function(n){n=n===r?1:gr(fa(n),0);var i=this.__filtered__&&!t?new zr(this):this.clone();return i.__filtered__?i.__takeCount__=mr(n,i.__takeCount__):i.__views__.push({size:mr(n,h),type:e+(i.__dir__<0?"Right":"")}),i},zr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),vt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;zr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),vt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");zr.prototype[e]=function(){return this[r](1).value()[0]}})),vt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");zr.prototype[e]=function(){return this.__filtered__?new zr(this):this[r](1)}})),zr.prototype.compact=function(){return this.filter(tu)},zr.prototype.find=function(e){return this.filter(e).head()},zr.prototype.findLast=function(e){return this.reverse().find(e)},zr.prototype.invokeMap=Wn((function(e,t){return"function"==typeof e?new zr(this):this.map((function(r){return Tn(r,e,t)}))})),zr.prototype.reject=function(e){return this.filter(Ns(oo(e)))},zr.prototype.slice=function(e,t){e=fa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=fa(t))<0?n.dropRight(-t):n.take(t-e)),n)},zr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zr.prototype.toArray=function(){return this.take(h)},vn(zr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Dr[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(Dr.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,u=t instanceof zr,c=a[0],l=u||Vs(t),h=function(e){var t=o.apply(Dr,kt([e],a));return i&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=u&&!d;if(!s&&l){t=g?t:new zr(this);var m=e.apply(t,a);return m.__actions__.push({func:hs,args:[h],thisArg:r}),new Fr(m,f)}return p&&g?e.apply(this,a):(m=this.thru(h),p?i?m.value()[0]:m.value():m)})})),vt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Dr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Vs(i)?i:[],e)}return this[r]((function(r){return t.apply(Vs(r)?r:[],e)}))}})),vn(zr.prototype,(function(e,t){var r=Dr[t];if(r){var n=r.name+"";Ne.call(Tr,n)||(Tr[n]=[]),Tr[n].push({name:t,func:r})}})),Tr[Di(r,2).name]=[{name:"wrapper",func:r}],zr.prototype.clone=function(){var e=new zr(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},zr.prototype.reverse=function(){if(this.__filtered__){var e=new zr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Vs(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=mr(t,e+s);break;case"takeRight":e=gr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=n?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=mr(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return hi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var g=-1,m=e[c+=t];++g<h;){var y=l[g],v=y.iteratee,b=y.type,w=v(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}p[f++]=m}return p},Dr.prototype.at=fs,Dr.prototype.chain=function(){return ls(this)},Dr.prototype.commit=function(){return new Fr(this.value(),this.__chain__)},Dr.prototype.next=function(){this.__values__===r&&(this.__values__=la(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Dr.prototype.plant=function(e){for(var t,n=this;n instanceof Ur;){var i=Do(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},Dr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zr){var t=e;return this.__actions__.length&&(t=new zr(this)),(t=t.reverse()).__actions__.push({func:hs,args:[Zo],thisArg:r}),new Fr(t,this.__chain__)}return this.thru(Zo)},Dr.prototype.toJSON=Dr.prototype.valueOf=Dr.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Dr.prototype.first=Dr.prototype.head,at&&(Dr.prototype[at]=function(){return this}),Dr}();ot?((ot.exports=sr)._=sr,it._=sr):nt._=sr}).call(lt)}(Cz,Cz.exports);const{validate:Mz}=EU;const Nz=kU,Rz=IU,Lz=_z.exports,jz=Cz.exports;var Dz,Bz,Uz=class{constructor(e){if(!Lz.isEncoded(e))throw new Error("Base58 string is invalid. Cannot construct Decoder.");this.base58=e}constructRootJSON(e){const t=jz.invert(Nz.root);return e.reduce(((e,r)=>{const n=t[r[0]];let i=r[1];return i instanceof Array&&("anchors"===n&&(i=this.constructAnchorsJSON(i)),"path"===n&&(i=this.constructPathJSON(i))),i instanceof Tt&&(i=Rz.decode(i).toString("hex")),e[n]=i,e}),{})}constructAnchorsJSON(e){const t=jz.invertBy(Nz.chain,(e=>e.id));return e.map((e=>e.reduce(((e,r)=>{if(0===r[0])return`${e}:${t[r[1]]}`;if(1===r[0]){const t=e.split(":").pop();return`${e}:${jz.invert(Nz.chain[t].networks)[r[1]]}`}return`${e}:${Rz.decode(r[1]).toString("hex")}`}),"blink")))}constructPathJSON(e){const t=jz.invert(Nz.path);return e.map((e=>({[t[e[0]]]:Rz.decode(e[1]).toString("hex")})))}decode(){const e=Lz.decode(this.base58),t=Rz.decode(e);return this.constructRootJSON(t)}};class Fz{constructor(e){}}function zz(e){return Array.isArray(e)?e.find((e=>"ChainedProof2021"!==e.type)).verificationMethod:e.verificationMethod}!function(e){e.getTransactionId="getTransactionId",e.computeLocalHash="computeLocalHash",e.fetchRemoteHash="fetchRemoteHash",e.parseIssuerKeys="parseIssuerKeys",e.compareHashes="compareHashes",e.checkImagesIntegrity="checkImagesIntegrity",e.checkMerkleRoot="checkMerkleRoot",e.checkReceipt="checkReceipt",e.retrieveVerificationMethodPublicKey="retrieveVerificationMethodPublicKey",e.deriveIssuingAddressFromPublicKey="deriveIssuingAddressFromPublicKey",e.compareIssuingAddress="compareIssuingAddress",e.checkAuthenticity="checkAuthenticity"}(Dz||(Dz={}));class Vz extends Fz{proofVerificationProcess=[Dz.getTransactionId,Dz.computeLocalHash,Dz.fetchRemoteHash,Dz.compareHashes,Dz.checkMerkleRoot,Dz.checkReceipt,Dz.parseIssuerKeys,Dz.checkAuthenticity];identityVerificationProcess=[Dz.retrieveVerificationMethodPublicKey,Dz.deriveIssuingAddressFromPublicKey,Dz.compareIssuingAddress];transactionId;localHash;documentToVerify;txData;chain;explorerAPIs;receipt;issuerPublicKeyList;issuer;verificationMethodPublicKey;derivedIssuingAddress;hasDid;proof;type="MerkleProof2019";constructor(e){var t;super(e),this._doAction=e.actionMethod,this.documentToVerify=e.document,this.explorerAPIs=e.explorerAPIs,this.proof=e.proof,this.issuer=e.issuer,this.validateProofType(),this.receipt=(t=this.proof,new Uz(t.proofValue).decode()),this.chain=Hl.certificates.getChain("",this.receipt),this.transactionId=Hl.certificates.getTransactionId(this.receipt),this.setHasDid()}async verifyProof(){await this.setIssuerFromProofVerificationMethod(),await this.verifyProcess(this.proofVerificationProcess)}async verifyIdentity(){this.hasDid&&await this.verifyProcess(this.identityVerificationProcess)}getProofVerificationSteps(e){return this.proofVerificationProcess.map((t=>Hl.verifier.convertToVerificationSubsteps(e,t)))}getIdentityVerificationSteps(e){return this.hasDid?this.identityVerificationProcess.map((t=>Hl.verifier.convertToVerificationSubsteps(e,t))):[]}getIssuerPublicKey(){return this.txData?this.txData.issuingAddress:(console.error("Trying to access issuing address when txData not available yet. Did you run the `verify` method yet?"),"")}getIssuerName(){return this.issuer.name}getIssuerProfileDomain(){return new URL(this.getIssuerProfileUrl())?.hostname}getIssuerProfileUrl(){return this.issuer.id}getSigningDate(){return this.proof.created}getChain(){return this.chain}getReceipt(){return this.receipt}getTransactionIdString(){return Hl.certificates.getTransactionId(this.getReceipt())}getTransactionLink(){return Hl.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).transactionLink}getRawTransactionLink(){return Hl.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).rawTransactionLink}isProofChain(){return"ChainedProof2021"===this.proof.type}async setIssuerFromProofVerificationMethod(){if(this.isProofChain()){const e=this.proof.verificationMethod.split("#")[0];this.issuer=await Hl.verifier.getIssuerProfile(e)}}setHasDid(){if(this.isProofChain()){const e=this.proof.verificationMethod.split("#")[0];this.hasDid=Wu(e)}else this.hasDid=!!this.issuer.didDocument}validateProofType(){const e=this.isProofChain()?this.proof.chainedProofType:this.proof.type;if(e!==this.type)throw new Error(`Incompatible proof type passed. Expected: ${this.type}, Got: ${e}`)}async verifyProcess(e){for(const t of e){if(!this[t])return void console.error("verification logic for",t,"not implemented");await this[t]()}}async _doAction(e,t,r){throw new Error("doAction method needs to be overwritten by injecting from CVJS")}async getTransactionId(){await this._doAction(Dz.getTransactionId,(()=>sD(this.transactionId)),this.type)}async computeLocalHash(){this.localHash=await this._doAction(Dz.computeLocalHash,(async()=>await Fg(this.documentToVerify)),this.type)}async fetchRemoteHash(){this.txData=await this._doAction(Dz.fetchRemoteHash,(async()=>await Hl.verifier.lookForTx({transactionId:this.transactionId,chain:this.chain.code,explorerAPIs:this.explorerAPIs})),this.type)}async compareHashes(){await this._doAction(Dz.compareHashes,(()=>rD(this.localHash,this.receipt.targetHash)),this.type)}async checkMerkleRoot(){await this._doAction(Dz.checkMerkleRoot,(()=>nD(this.receipt.merkleRoot,this.txData.remoteHash)),this.type)}async checkReceipt(){await this._doAction(Dz.checkReceipt,(()=>oD(this.receipt)),this.type)}async parseIssuerKeys(){this.issuerPublicKeyList=await this._doAction(Dz.parseIssuerKeys,(()=>Hl.verifier.parseIssuerKeys(this.issuer)),this.type)}async checkAuthenticity(){await this._doAction(Dz.checkAuthenticity,(()=>iD(this.issuerPublicKeyList,this.txData.issuingAddress,this.txData.time)),this.type)}async retrieveVerificationMethodPublicKey(){this.verificationMethodPublicKey=await this._doAction(Dz.retrieveVerificationMethodPublicKey,(()=>function(e,t){const r=t.split("#")[1],n=e.verificationMethod.filter((e=>e.id===`#${r}`))[0];if(!n)throw new ji("retrieveVerificationMethodPublicKey",`${zg} - ${Hl.i18n.getText("errors","retrieveVerificationMethodPublicKey")}`);return n}(this.issuer.didDocument,zz(this.proof))),this.type)}async deriveIssuingAddressFromPublicKey(){this.derivedIssuingAddress=await this._doAction(Dz.deriveIssuingAddressFromPublicKey,(()=>tD(this.verificationMethodPublicKey,this.chain)),this.type)}async compareIssuingAddress(){await this._doAction(Dz.compareIssuingAddress,(()=>function(e,t){if(e!==t)throw new ji("compareIssuingAddress",`${zg} - ${Hl.i18n.getText("errors","compareIssuingAddress")}`)}(this.txData.issuingAddress,this.derivedIssuingAddress)),this.type)}}!function(e){e.getTransactionId="getTransactionId",e.computeLocalHash="computeLocalHash",e.fetchRemoteHash="fetchRemoteHash",e.parseIssuerKeys="parseIssuerKeys",e.compareHashes="compareHashes",e.checkMerkleRoot="checkMerkleRoot",e.checkReceipt="checkReceipt",e.checkAuthenticity="checkAuthenticity"}(Bz||(Bz={}));class Hz extends Fz{verificationProcess=[Bz.getTransactionId,Bz.computeLocalHash,Bz.fetchRemoteHash,Bz.compareHashes,Bz.checkMerkleRoot,Bz.checkReceipt,Bz.parseIssuerKeys,Bz.checkAuthenticity];transactionId;localHash;documentToVerify;txData;chain;explorerAPIs;receipt;issuerPublicKeyList;issuer;proof;type="MerkleProof2017";constructor(e){super(e),e.actionMethod&&(this._doAction=e.actionMethod),this.documentToVerify=e.document,this.explorerAPIs=e.explorerAPIs,this.issuer=e.issuer,this.proof=e.proof,this.validateProofType(),this.receipt=this.documentToVerify.signature,this.chain=Hl.certificates.getChain("",this.receipt),this.transactionId=Hl.certificates.getTransactionId(this.receipt),this.adaptVerificationProcessToChain()}async verifyProof(){for(const e of this.verificationProcess){if(!this[e])return void console.error("verification logic for",e,"not implemented");await this[e]()}}async verifyIdentity(){}getProofVerificationSteps(e){return this.verificationProcess.map((t=>Hl.verifier.convertToVerificationSubsteps(e,t)))}getIdentityVerificationSteps(){return[]}getIssuerPublicKey(){return Hl.chains.isMockChain(this.chain)?"This mock chain does not support issuing addresses":this.txData?this.txData.issuingAddress:void console.error("Trying to access issuing address when txData not available yet. Did you run the `verify` method yet?")}getIssuerName(){return this.issuer.name}getIssuerProfileDomain(){return new URL(this.getIssuerProfileUrl())?.hostname}getIssuerProfileUrl(){return this.issuer.id}getSigningDate(){return this.documentToVerify.issuedOn}getChain(){return this.chain}getReceipt(){return this.receipt}getTransactionIdString(){return Hl.certificates.getTransactionId(this.getReceipt())}getTransactionLink(){return Hl.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).transactionLink}getRawTransactionLink(){return Hl.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).rawTransactionLink}validateProofType(){if(this.proof.type[0]!==this.type)throw new Error(`Incompatible proof type passed. Expected: ${this.type}, Got: ${this.proof.type[0]}`)}adaptVerificationProcessToChain(){Hl.chains.isMockChain(this.chain)&&(zi(this.verificationProcess,Bz.getTransactionId),zi(this.verificationProcess,Bz.fetchRemoteHash),zi(this.verificationProcess,Bz.parseIssuerKeys),zi(this.verificationProcess,Bz.checkMerkleRoot),zi(this.verificationProcess,Bz.checkAuthenticity))}async _doAction(e,t,r){throw new Error("doAction method needs to be overwritten by injecting from CVJS")}async getTransactionId(){await this._doAction(Bz.getTransactionId,(()=>sD(this.transactionId)),this.type)}async computeLocalHash(){this.localHash=await this._doAction(Bz.computeLocalHash,(async()=>await Fg(this.documentToVerify)),this.type)}async fetchRemoteHash(){this.txData=await this._doAction(Bz.fetchRemoteHash,(async()=>await Hl.verifier.lookForTx({transactionId:this.transactionId,chain:this.chain.code,explorerAPIs:this.explorerAPIs})),this.type)}async compareHashes(){await this._doAction(Bz.compareHashes,(()=>rD(this.localHash,this.receipt.targetHash)),this.type)}async checkMerkleRoot(){await this._doAction(Bz.checkMerkleRoot,(()=>nD(this.receipt.merkleRoot,this.txData.remoteHash)),this.type)}async checkReceipt(){await this._doAction(Bz.checkReceipt,(()=>oD(this.receipt)),this.type)}async parseIssuerKeys(){this.issuerPublicKeyList=await this._doAction(Bz.parseIssuerKeys,(()=>Hl.verifier.parseIssuerKeys(this.issuer)),this.type)}async checkAuthenticity(){await this._doAction(Bz.checkAuthenticity,(()=>iD(this.issuerPublicKeyList,this.txData.issuingAddress,this.txData.time)),this.type)}}var Kz=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){const n=t.contexts=new Map,i=t.constants=r(1);n.set(i.SECURITY_CONTEXT_V1_URL,r(2)),n.set(i.SECURITY_CONTEXT_V2_URL,r(3))},function(e,t,r){t.SECURITY_CONTEXT_V1_URL="https://w3id.org/security/v1",t.SECURITY_CONTEXT_V2_URL="https://w3id.org/security/v2"},function(e,t){e.exports={"@context":{id:"@id",type:"@type",dc:"http://purl.org/dc/terms/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",EcdsaKoblitzSignature2016:"sec:EcdsaKoblitzSignature2016",Ed25519Signature2018:"sec:Ed25519Signature2018",EncryptedMessage:"sec:EncryptedMessage",GraphSignature2012:"sec:GraphSignature2012",LinkedDataSignature2015:"sec:LinkedDataSignature2015",LinkedDataSignature2016:"sec:LinkedDataSignature2016",CryptographicKey:"sec:Key",authenticationTag:"sec:authenticationTag",canonicalizationAlgorithm:"sec:canonicalizationAlgorithm",cipherAlgorithm:"sec:cipherAlgorithm",cipherData:"sec:cipherData",cipherKey:"sec:cipherKey",created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},digestAlgorithm:"sec:digestAlgorithm",digestValue:"sec:digestValue",domain:"sec:domain",encryptionKey:"sec:encryptionKey",expiration:{"@id":"sec:expiration","@type":"xsd:dateTime"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},initializationVector:"sec:initializationVector",iterationCount:"sec:iterationCount",nonce:"sec:nonce",normalizationAlgorithm:"sec:normalizationAlgorithm",owner:{"@id":"sec:owner","@type":"@id"},password:"sec:password",privateKey:{"@id":"sec:privateKey","@type":"@id"},privateKeyPem:"sec:privateKeyPem",publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyBase58:"sec:publicKeyBase58",publicKeyPem:"sec:publicKeyPem",publicKeyWif:"sec:publicKeyWif",publicKeyService:{"@id":"sec:publicKeyService","@type":"@id"},revoked:{"@id":"sec:revoked","@type":"xsd:dateTime"},salt:"sec:salt",signature:"sec:signature",signatureAlgorithm:"sec:signingAlgorithm",signatureValue:"sec:signatureValue"}}},function(e,t){e.exports={"@context":[{"@version":1.1},"https://w3id.org/security/v1",{AesKeyWrappingKey2019:"sec:AesKeyWrappingKey2019",DeleteKeyOperation:"sec:DeleteKeyOperation",DeriveSecretOperation:"sec:DeriveSecretOperation",EcdsaSecp256k1Signature2019:"sec:EcdsaSecp256k1Signature2019",EcdsaSecp256r1Signature2019:"sec:EcdsaSecp256r1Signature2019",EcdsaSecp256k1VerificationKey2019:"sec:EcdsaSecp256k1VerificationKey2019",EcdsaSecp256r1VerificationKey2019:"sec:EcdsaSecp256r1VerificationKey2019",Ed25519Signature2018:"sec:Ed25519Signature2018",Ed25519VerificationKey2018:"sec:Ed25519VerificationKey2018",EquihashProof2018:"sec:EquihashProof2018",ExportKeyOperation:"sec:ExportKeyOperation",GenerateKeyOperation:"sec:GenerateKeyOperation",KmsOperation:"sec:KmsOperation",RevokeKeyOperation:"sec:RevokeKeyOperation",RsaSignature2018:"sec:RsaSignature2018",RsaVerificationKey2018:"sec:RsaVerificationKey2018",Sha256HmacKey2019:"sec:Sha256HmacKey2019",SignOperation:"sec:SignOperation",UnwrapKeyOperation:"sec:UnwrapKeyOperation",VerifyOperation:"sec:VerifyOperation",WrapKeyOperation:"sec:WrapKeyOperation",X25519KeyAgreementKey2019:"sec:X25519KeyAgreementKey2019",allowedAction:"sec:allowedAction",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},capability:{"@id":"sec:capability","@type":"@id"},capabilityAction:"sec:capabilityAction",capabilityChain:{"@id":"sec:capabilityChain","@type":"@id","@container":"@list"},capabilityDelegation:{"@id":"sec:capabilityDelegationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"sec:capabilityInvocationMethod","@type":"@id","@container":"@set"},caveat:{"@id":"sec:caveat","@type":"@id","@container":"@set"},challenge:"sec:challenge",ciphertext:"sec:ciphertext",controller:{"@id":"sec:controller","@type":"@id"},delegator:{"@id":"sec:delegator","@type":"@id"},equihashParameterK:{"@id":"sec:equihashParameterK","@type":"xsd:integer"},equihashParameterN:{"@id":"sec:equihashParameterN","@type":"xsd:integer"},invocationTarget:{"@id":"sec:invocationTarget","@type":"@id"},invoker:{"@id":"sec:invoker","@type":"@id"},jws:"sec:jws",keyAgreement:{"@id":"sec:keyAgreementMethod","@type":"@id","@container":"@set"},kmsModule:{"@id":"sec:kmsModule"},parentCapability:{"@id":"sec:parentCapability","@type":"@id"},plaintext:"sec:plaintext",proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},proofValue:"sec:proofValue",referenceId:"sec:referenceId",unwrappedKey:"sec:unwrappedKey",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},verifyData:"sec:verifyData",wrappedKey:"sec:wrappedKey"}]}}]))}(t={exports:{}},t.exports),t.exports}(),qz=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Kz),$z=Kz.contexts,Wz=Kz.constants,Gz=ht(Object.freeze({__proto__:null,default:qz,constants:Wz,contexts:$z}));
/*!
   * Copyright (c) 2017-2018 Digital Bazaar, Inc. All rights reserved.
   */const{constants:Jz}=Gz;var Xz={SECURITY_CONTEXT_URL:Jz.SECURITY_CONTEXT_V2_URL,SECURITY_CONTEXT_V1_URL:Jz.SECURITY_CONTEXT_V1_URL,SECURITY_CONTEXT_V2_URL:Jz.SECURITY_CONTEXT_V2_URL,SECURITY_PROOF_URL:"https://w3id.org/security#proof",SECURITY_SIGNATURE_URL:"https://w3id.org/security#signature"};const Yz=Xz,{contexts:Zz}=Gz,Qz=new Map([[Yz.SECURITY_CONTEXT_V1_URL,Zz.get(Yz.SECURITY_CONTEXT_V1_URL)],[Yz.SECURITY_CONTEXT_V2_URL,Zz.get(Yz.SECURITY_CONTEXT_V2_URL)]]),eV={};
/*!
   * Copyright (c) 2018-2021 Digital Bazaar, Inc. All rights reserved.
   */var tV=eV;eV.extendContextLoader=e=>async t=>{const r=Qz.get(t);return void 0!==r?{contextUrl:null,documentUrl:t,document:r,tag:"static"}:e(t)},eV.strictDocumentLoader=eV.extendContextLoader((e=>{throw new Error(`${e} not found.`)}));class rV extends Error{constructor(e){super(rV._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,rV)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch(t){return String(e)}}}const nV=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],iV=Symbol(".toJSON called"),oV=({from:e,seen:t,to_:r,forceEnumerable:n,maxDepth:i,depth:o})=>{const s=r||(Array.isArray(e)?[]:{});if(t.push(e),o>=i)return s;if("function"==typeof e.toJSON&&!0!==e[iV])return(e=>{e[iV]=!0;const t=e.toJSON();return delete e[iV],t})(e);for(const[r,a]of Object.entries(e))lr(a)?s[r]="[object Buffer]":"function"!=typeof a&&(a&&"object"==typeof a?t.includes(e[r])?s[r]="[Circular]":(o++,s[r]=oV({from:e[r],seen:t.slice(),forceEnumerable:n,maxDepth:i,depth:o})):s[r]=a);for(const{property:t,enumerable:r}of nV)"string"==typeof e[t]&&Object.defineProperty(s,t,{value:e[t],enumerable:!!n||r,configurable:!0,writable:!0});return s};var sV={serializeError:(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return"object"==typeof e&&null!==e?oV({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e},deserializeError:(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return oV({from:e,seen:[],to_:t,maxDepth:r,depth:0}),t}return new rV(e)}};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */const aV=Xz,uV=Cg,{extendContextLoader:cV,strictDocumentLoader:lV}=tV,{serializeError:hV}=sV,fV=e=>{if(e.unmappedProperty)throw new Error('The property "'+e.unmappedProperty+'" in the input was not defined in the context.')};function dV(e){Object.defineProperty(e,"toJSON",{value:function(){return hV(this)},configurable:!0,writable:!0})}
/*!
   * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.
   */class pV extends Error{constructor(e){super("Verification error(s)."),this.name="VerificationError",this.errors=[].concat(e)}}var gV=pV,mV=class{constructor({type:e}={}){if("string"!=typeof e)throw new TypeError('A LinkedDataProof must have a "type".');this.type=e}async createProof({}){throw new Error('"createProof" must be implemented in a derived class.')}async verifyProof({}){throw new Error('"verifyProof" must be implemented in a derived class.')}async matchProof({proof:e}){return e.type===this.type}};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */const yV={};var vV=yV;yV.w3cDate=e=>{null==e?e=new Date:"number"!=typeof e&&"string"!=typeof e||(e=new Date(e));const t=e.toISOString();return t.substr(0,t.length-5)+"Z"},yV.concat=(e,t)=>{const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r};const bV=self&&(self.crypto||self.msCrypto);var wV={async sha256digest({string:e}){const t=(new TextEncoder).encode(e);return new Uint8Array(await bV.subtle.digest("SHA-256",t))}};
/*!
   * Copyright (c) 2017-2021 Digital Bazaar, Inc. All rights reserved.
   */const _V=Xz,xV=Cg,SV=vV,{sha256digest:EV}=wV,kV=mV,IV={};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */var AV=IV;IV.suites={LinkedDataProof:mV,LinkedDataSignature:class extends kV{constructor({type:e,proof:t,LDKeyClass:r,date:n,key:i,signer:o,verifier:s,useNativeCanonize:a,contextUrl:u}={}){super({type:e}),this.LDKeyClass=r,this.contextUrl=u,this.proof=t;const c=function({key:e,signer:t,verifier:r}){const n={};if(e){if(n.key=e,n.verificationMethod=e.id,"function"==typeof e.signer&&(n.signer=e.signer()),"function"==typeof e.verifier&&(n.verifier=e.verifier()),!n.signer&&!n.verifier)throw new TypeError('The "key" parameter must contain a "signer" or "verifier" method.')}else n.verificationMethod=t&&t.id||r&&r.id,n.signer=t,n.verifier=r;if(n.signer&&"function"!=typeof n.signer.sign)throw new TypeError("A signer API has not been specified.");if(n.verifier&&"function"!=typeof n.verifier.verify)throw new TypeError("A verifier API has not been specified.");return n}({key:i,signer:o,verifier:s});if(this.verificationMethod=c.verificationMethod,this.key=c.key,this.signer=c.signer,this.verifier=c.verifier,n&&(this.date=new Date(n),isNaN(this.date)))throw TypeError(`"date" "${n}" is not a valid date.`);this.useNativeCanonize=a,this._hashCache=null}async createProof({document:e,purpose:t,documentLoader:r,expansionMap:n}){let i;i=this.proof?{...this.proof}:{},i.type=this.type;let o=this.date;void 0===i.created&&void 0===o&&(o=new Date),o&&"string"!=typeof o&&(o=SV.w3cDate(o)),o&&(i.created=o),i.verificationMethod=this.verificationMethod,i=await this.updateProof({document:e,proof:i,purpose:t,documentLoader:r,expansionMap:n}),i=await t.update(i,{document:e,suite:this,documentLoader:r,expansionMap:n});const s=await this.createVerifyData({document:e,proof:i,documentLoader:r,expansionMap:n});return i=await this.sign({verifyData:s,document:e,proof:i,documentLoader:r,expansionMap:n}),i}async updateProof({proof:e}){return e}async verifyProof({proof:e,document:t,documentLoader:r,expansionMap:n}){try{const i=await this.createVerifyData({document:t,proof:e,documentLoader:r,expansionMap:n}),o=await this.getVerificationMethod({proof:e,document:t,documentLoader:r,expansionMap:n});if(!await this.verifySignature({verifyData:i,verificationMethod:o,document:t,proof:e,documentLoader:r,expansionMap:n}))throw new Error("Invalid signature.");return{verified:!0,verificationMethod:o}}catch(e){return{verified:!1,error:e}}}async canonize(e,{documentLoader:t,expansionMap:r,skipExpansion:n}){return xV.canonize(e,{algorithm:"URDNA2015",format:"application/n-quads",documentLoader:t,expansionMap:r,skipExpansion:n,useNative:this.useNativeCanonize})}async canonizeProof(e,{document:t,documentLoader:r,expansionMap:n}){return delete(e={"@context":t["@context"]||_V.SECURITY_CONTEXT_URL,...e}).jws,delete e.signatureValue,delete e.proofValue,this.canonize(e,{documentLoader:r,expansionMap:n,skipExpansion:!1})}async createVerifyData({document:e,proof:t,documentLoader:r,expansionMap:n}){let i;const{_hashCache:o}=this;o&&o.document===e?i=o.hash:this._hashCache={document:e,hash:i=this.canonize(e,{documentLoader:r,expansionMap:n}).then((e=>EV({string:e})))};const[s,a]=await Promise.all([this.canonizeProof(t,{document:e,documentLoader:r,expansionMap:n}).then((e=>EV({string:e}))),i]);return SV.concat(s,a)}async getVerificationMethod({proof:e,documentLoader:t}){let{verificationMethod:r}=e;if("object"==typeof r&&(r=r.id),!r)throw new Error('No "verificationMethod" found in proof.');const n=await xV.frame(r,{"@context":_V.SECURITY_CONTEXT_URL,"@embed":"@always",id:r},{documentLoader:t,compactToRelative:!1});if(!n)throw new Error(`Verification method ${r} not found.`);if(void 0!==n.revoked)throw new Error("The verification method has been revoked.");return n}async sign(){throw new Error("Must be implemented by a derived class.")}async verifySignature(){throw new Error("Must be implemented by a derived class.")}ensureSuiteContext({document:e,addSuiteContext:t}){const{contextUrl:r}=this;if(function({document:e,contextUrl:t}){const r=e["@context"];return r===t||Array.isArray(r)&&r.includes(t)}({document:e,contextUrl:r}))return;if(!t)throw new TypeError(`The document to be signed must contain this suite's @context, "${r}".`);const n=e["@context"]||[];e["@context"]=Array.isArray(n)?[...n,r]:[n,r]}}};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */
var TV=class{constructor({term:e,date:t,maxTimestampDelta:r=1/0}={}){if(void 0===e)throw new Error('"term" is required.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxTimestampDelta" must be a number.');if(this.term=e,void 0!==t&&(this.date=new Date(t),isNaN(this.date)))throw TypeError(`"date" "${t}" is not a valid date.`);this.maxTimestampDelta=r}async validate(e,{}){try{if(this.maxTimestampDelta!==1/0){const t=(this.date||new Date).getTime(),r=1e3*this.maxTimestampDelta,n=new Date(e.created).getTime();if(!(n>=t-r&&n<=t+r))throw new Error("The proof's created timestamp is out of range.")}return{valid:!0}}catch(e){return{valid:!1,error:e}}}async update(e,{}){return e.proofPurpose=this.term,e}async match(e,{}){return e.proofPurpose===this.term}};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */const PV=Xz,OV=Cg,CV=TV,MV=["assertionMethod","authentication","capabilityInvocation","capabilityDelegation","keyAgreement","verificationMethod"];var NV=class extends CV{constructor({term:e,controller:t,date:r,maxTimestampDelta:n=1/0}={}){if(super({term:e,date:r,maxTimestampDelta:n}),void 0!==t){if("object"!=typeof t)throw new TypeError('"controller" must be an object.');this.controller=t}this._termDefinedByDIDContext=MV.includes(e)}async validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n}){try{const i=await super.validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n});if(!i.valid)throw i.error;const{id:o}=t,{term:s,_termDefinedByDIDContext:a}=this;if(this.controller)i.controller=this.controller;else{const{controller:e}=t;let n;if(e)if("object"==typeof e)n=e.id;else{if("string"!=typeof e)throw new TypeError('"controller" must be a string representing a URL.');n=e}let{document:u}=await r(n);!(a&&"https://www.w3.org/ns/did/v1"===u["@context"]||Array.isArray(u["@context"])&&"https://www.w3.org/ns/did/v1"===u["@context"][0])&&(u=await OV.frame(u,{"@context":PV.SECURITY_CONTEXT_URL,id:n,[s]:{"@embed":"@never",id:o}},{documentLoader:r,compactToRelative:!1})),i.controller=u}const u=OV.getValues(i.controller,s);if(i.valid=u.some((e=>e===o||"object"==typeof e&&e.id===o)),!i.valid)throw new Error(`Verification method "${t.id}" not authorized by controller for proof purpose "${this.term}".`);return i}catch(e){return{valid:!1,error:e}}}};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */const RV=NV,LV=NV,jV={};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */var DV=jV;jV.purposes={AssertionProofPurpose:class extends RV{constructor({term:e="assertionMethod",controller:t,date:r,maxTimestampDelta:n=1/0}={}){super({term:e,controller:t,date:r,maxTimestampDelta:n})}},AuthenticationProofPurpose:class extends LV{constructor({term:e="authentication",controller:t,challenge:r,date:n,domain:i,maxTimestampDelta:o=1/0}={}){if(super({term:e,controller:t,date:n,maxTimestampDelta:o}),"string"!=typeof r)throw new TypeError('"challenge" must be a string.');if(void 0!==i&&"string"!=typeof i)throw new TypeError('"domain" must be a string.');this.challenge=r,this.domain=i}async validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n}){try{if(e.challenge!==this.challenge)throw new Error(`The challenge is not as expected; challenge="${e.challenge}", expected="${this.challenge}"`);if(void 0!==this.domain&&e.domain!==this.domain)throw new Error(`The domain is not as expected; domain="${e.domain}", expected="${this.domain}"`);return super.validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n})}catch(e){return{valid:!1,error:e}}}async update(e,{document:t,suite:r,documentLoader:n,expansionMap:i}){return(e=await super.update(e,{document:t,suite:r,documentLoader:n,expansionMap:i})).challenge=this.challenge,void 0!==this.domain&&(e.domain=this.domain),e}},ControllerProofPurpose:NV,ProofPurpose:TV};
/*!
   * Copyright (c) 2010-2018 Digital Bazaar, Inc. All rights reserved.
   */
const BV={};var UV=BV;const FV=Xz;Object.assign(BV,FV);const zV=class{async add(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i}={}){if(!t)throw new TypeError('"options.suite" is required.');if(!r)throw new TypeError('"options.purpose" is required.');n=n?cV(n):lV,void 0===i?i=fV:!1===i&&(i=void 0);const o={...e};delete o.proof;const s=await t.createProof({document:o,purpose:r,documentLoader:n,expansionMap:i});return uV.addValue(e,"proof",s),e}async verify(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i}={}){if(!t)throw new TypeError('"options.suite" is required.');if(!r)throw new TypeError('"options.purpose" is required.');const o=Array.isArray(t)?t:[t];if(0===o.length)throw new TypeError("At least one suite is required.");n=n?cV(n):lV,void 0===i?i=fV:!1===i&&(i=void 0);try{e={...e};const{proofSet:t,document:s}=await async function({document:e}){let t;if(t=uV.getValues(e,"proof"),delete e.proof,0===t.length)throw new Error("No matching proofs found in the given document.");const r=e["@context"]||aV.SECURITY_CONTEXT_URL;return t=t.map((e=>({"@context":r,...e}))),{proofSet:t,document:e}}({document:e,documentLoader:n,expansionMap:i});e=s;const a=await async function({document:e,suites:t,proofSet:r,purpose:n,documentLoader:i,expansionMap:o}){const s=Array.isArray(n)?n:[n],a=new Map,u=new Map,c=new Map;if(await Promise.all(s.map((n=>async function({purposeToProofs:e,proofToSuite:t,purpose:r,proofSet:n,suites:i,suiteMatchQueue:o,document:s,documentLoader:a,expansionMap:u}){for(const c of n){if(!await r.match(c,{document:s,documentLoader:a,expansionMap:u}))continue;let n=!1;for(const e of i){let r=o.get(e);r||o.set(e,r=new Map);let i=r.get(c);if(i||(i=e.matchProof({proof:c,document:s,documentLoader:a,expansionMap:u}),r.set(c,i)),await i){n=!0,t.set(c,e);break}}if(n){const t=e.get(r);t?t.push(c):e.set(r,[c])}}}({purposeToProofs:a,proofToSuite:u,purpose:n,proofSet:r,suites:t,suiteMatchQueue:c,document:e,documentLoader:i,expansionMap:o})))),a.size<s.length)return[];const l=new Map;return await Promise.all([...u.entries()].map((async([t,r])=>{let n;try{let s;const a={validate:async(e,{verificationMethod:t})=>(s=t,{valid:!0})},{verified:u,verificationMethod:c,error:l}=await r.verifyProof({proof:t,document:e,purpose:a,documentLoader:i,expansionMap:o});s||(s=c),n={proof:t,verified:u,verificationMethod:s,error:l}}catch(e){n={proof:t,verified:!1,error:e}}n.error&&dV(n.error),l.set(t,n)}))),await Promise.all([...a.entries()].map((async([t,r])=>{for(const n of r){const r=l.get(n);if(!r.verified)continue;const{verificationMethod:s}=r,a=u.get(n);let c;try{c=await t.validate(n,{document:e,suite:a,verificationMethod:s,documentLoader:i,expansionMap:o})}catch(e){c={valid:!1,error:e}}r.purposeResult?Array.isArray(r.purposeResult)?r.purposeResult.push(c):r.purposeResult=[r.purposeResult,c]:r.purposeResult=c,c.valid||(dV(c.error),r.error||(r.verified=!1,r.error=c.error))}}))),[...l.values()]}({document:e,suites:o,proofSet:t,purpose:r,documentLoader:n,expansionMap:i});if(0===a.length){const e=new Error("Did not verify any proofs; insufficient proofs matched the acceptable suite(s) and required purpose(s).");throw e.name="NotFoundError",e}const u=a.some((e=>e.verified));if(!u){const e=[].concat(...a.filter((e=>e.error)).map((e=>e.error))),t={verified:u,results:a};return e.length>0&&(t.error=e),t}return{verified:u,results:a}}catch(e){return dV(e),{verified:!1,error:e}}}},VV=gV;BV.sign=async function(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i,addSuiteContext:o=!0}={}){if("object"!=typeof e)throw new TypeError('The "document" parameter must be an object.');t.ensureSuiteContext({document:e,addSuiteContext:o});try{return await(new zV).add(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i})}catch(e){if(!n&&"jsonld.InvalidUrl"===e.name){const{details:{url:t}}=e,r=new Error(`A URL "${t}" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "sign".`);throw r.cause=e,r}throw e}},BV.verify=async function(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i}={}){if("object"!=typeof e)throw new TypeError('The "document" parameter must be an object.');const o=await(new zV).verify(e,{suite:t,purpose:r,documentLoader:n,expansionMap:i}),{error:s}=o;if(s)if(n||"jsonld.InvalidUrl"!==s.name)o.error=new VV(s);else{const{details:{url:e}}=s,t=new Error(`A URL "${e}" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "verify".`);o.error=new VV(t)}return o},BV.suites=AV.suites,BV.purposes=DV.purposes,Object.assign(BV,tV);var HV=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2020:{"@id":"https://w3id.org/security#Ed25519VerificationKey2020","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyMultibase:{"@id":"https://w3id.org/security#publicKeyMultibase","@type":"https://w3id.org/security#multibase"}}},Ed25519Signature2020:{"@id":"https://w3id.org/security#Ed25519Signature2020","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={CONTEXT_FILENAME:"ed25519-signature-2020-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2020/v1",CBORLD_CODEC_VALUE:20}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
const n=r(0),i=r(1),{documentLoader:o}=r(3),{CONTEXT_URL:s,CBORLD_CODEC_VALUE:a}=i,u=new Map;u.set(i.CONTEXT_URL,n);const c=new Map;c.set(s,a),e.exports={constants:i,contexts:u,appContextMap:c,documentLoader:o,CONTEXT_URL:s,CONTEXT:n}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
const{CONTEXT_URL:n}=r(1),i=r(0);e.exports={documentLoader(e){if(e!==n)throw new Error(`Loading document "${e}" is not allowed.`);return{contextUrl:null,document:i,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),KV=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(HV);HV.contexts,HV.constants,HV.CONTEXT,HV.CONTEXT_URL,HV.appContextMap,HV.documentLoader;var qV=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2018:{"@id":"https://w3id.org/security#Ed25519VerificationKey2018","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyBase58:{"@id":"https://w3id.org/security#publicKeyBase58"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},jws:{"@id":"https://w3id.org/security#jws"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={CONTEXT_FILENAME:"ed25519-signature-2018-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2018/v1",CBORLD_CODEC_VALUE:19}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
const n=r(0),i=r(1),{documentLoader:o}=r(3),{CONTEXT_URL:s,CBORLD_CODEC_VALUE:a}=i,u=new Map;u.set(s,n);const c=new Map;c.set(s,a),e.exports={constants:i,contexts:u,appContextMap:c,documentLoader:o,CONTEXT_URL:s,CONTEXT:n}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
const{CONTEXT_URL:n}=r(1),i=r(0);e.exports={documentLoader(e){if(e!==n)throw new Error(`Loading document "${e}" is not allowed.`);return{contextUrl:null,document:i,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),$V=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(qV);qV.contexts,qV.constants,qV.CONTEXT,qV.CONTEXT_URL,qV.appContextMap,qV.documentLoader;
/*!
   * Copyright (c) 2020-2021 Digital Bazaar, Inc. All rights reserved.
   */
const{suites:{LinkedDataSignature:WV}}=UV,GV=KV.constants.CONTEXT_URL,JV=$V.constants.CONTEXT_URL;class XV extends WV{constructor({key:e,signer:t,verifier:r,proof:n,date:i,useNativeCanonize:o}={}){super({type:"Ed25519Signature2020",LDKeyClass:Uc,contextUrl:GV,key:e,signer:t,verifier:r,proof:n,date:i,useNativeCanonize:o}),this.requiredKeyType="Ed25519VerificationKey2020"}async sign({verifyData:e,proof:t}){if(!this.signer||"function"!=typeof this.signer.sign)throw new Error("A signer API has not been specified.");const r=await this.signer.sign({data:e});return t.proofValue="z"+Yu(r),t}async verifySignature({verifyData:e,verificationMethod:t,proof:r}){const{proofValue:n}=r;if(!n||"string"!=typeof n)throw new TypeError('The proof does not include a valid "proofValue" property.');if("z"!==n[0])throw new Error("Only base58btc multibase encoding is supported.");const i=Zu(n.substr(1));let{verifier:o}=this;return o||(o=(await this.LDKeyClass.from(t)).verifier()),o.verify({data:e,signature:i})}async assertVerificationMethod({verificationMethod:e}){let t;if("Ed25519VerificationKey2020"===e.type)t=GV;else{if("Ed25519VerificationKey2018"!==e.type)throw new Error(`Unsupported key type "${e.type}".`);t=JV}if(!YV({document:e,contextUrl:t}))throw new TypeError(`The verification method (key) must contain "${t}" context.`);if(void 0!==e.revoked)throw new Error("The verification method has been revoked.")}async getVerificationMethod({proof:e,documentLoader:t}){if(this.key)return this.key.export({publicKey:!0});let{verificationMethod:r}=e;if("object"==typeof r&&(r=r.id),!r)throw new Error('No "verificationMethod" found in proof.');const{document:n}=await t(r);return r="string"==typeof n?JSON.parse(n):n,await this.assertVerificationMethod({verificationMethod:r}),"Ed25519VerificationKey2018"===r.type&&(r=(await Uc.fromEd25519VerificationKey2018({keyPair:r})).export({publicKey:!0,includeContext:!0})),r}async matchProof({proof:e,document:t,purpose:r,documentLoader:n,expansionMap:i}){if(!YV({document:t,contextUrl:GV}))return!1;if(!await super.matchProof({proof:e,document:t,purpose:r,documentLoader:n,expansionMap:i}))return!1;if(!this.key)return!0;const{verificationMethod:o}=e;return"object"==typeof o?o.id===this.key.id:o===this.key.id}}function YV({document:e,contextUrl:t}){const r=e["@context"];return r===t||Array.isArray(r)&&r.includes(t)}XV.CONTEXT_URL=GV,XV.CONTEXT=KV.contexts.get(GV);const{purposes:{AssertionProofPurpose:ZV}}=UV;var QV;!function(e){e.retrieveVerificationMethodPublicKey="retrieveVerificationMethodPublicKey",e.checkDocumentSignature="checkDocumentSignature"}(QV||(QV={}));class eH extends Fz{verificationProcess=[QV.retrieveVerificationMethodPublicKey,QV.checkDocumentSignature];documentToVerify;issuer;proof;type="Ed25519Signature2020";verificationKey;constructor(e){super(e),e.actionMethod&&(this._doAction=e.actionMethod),this.documentToVerify=e.document,this.issuer=e.issuer,this.proof=e.proof,this.validateProofType()}async verifyProof(){for(const e of this.verificationProcess){if(!this[e])return void console.error("verification logic for",e,"not implemented");await this[e]()}}async verifyIdentity(){}getProofVerificationSteps(e){return this.verificationProcess.map((t=>Hl.verifier.convertToVerificationSubsteps(e,t)))}getIdentityVerificationSteps(){return[]}getIssuerPublicKey(){const{verificationMethod:e}=this.proof;return this.issuer.didDocument.verificationMethod.find((t=>t.id===e)).publicKeyMultibase}getIssuerName(){return this.issuer.name??""}getIssuerProfileDomain(){try{return new URL(this.getIssuerProfileUrl()).hostname??""}catch(e){return""}}getIssuerProfileUrl(){return this.issuer.id??""}getSigningDate(){return this.proof.created}async _doAction(e,t,r){throw new Error("doAction method needs to be overwritten by injecting from CVJS")}validateProofType(){const e=this.isProofChain()?this.proof.chainedProofType:this.proof.type;if(e!==this.type)throw new Error(`Incompatible proof type passed. Expected: ${this.type}, Got: ${e}`)}isProofChain(){return"ChainedProof2021"===this.proof.type}generateDocumentLoader(){return xi[this.documentToVerify.issuer]=this.issuer.didDocument,function(e){return e in xi?{contextUrl:null,document:xi[e],documentUrl:e}:Cg.documentLoader(e)}}retrieveInitialDocument(){const e=Ug(this.documentToVerify);if(Array.isArray(e.proof)){const t=e.proof.find((e=>e.type===this.type));delete e.proof,e.proof=t}return e}async retrieveVerificationMethodPublicKey(){this.verificationKey=await this._doAction(QV.retrieveVerificationMethodPublicKey,(async()=>{const e=this.issuer.didDocument.verificationMethod.find((e=>e.id===this.proof.verificationMethod));if(!e)throw new ji(QV.retrieveVerificationMethodPublicKey,"The verification method of the document does not match the provided issuer.");const t=await Uc.from({...e});if(!t)throw new ji(QV.retrieveVerificationMethodPublicKey,"Could not derive the verification key");if(t.revoked)throw new ji(QV.retrieveVerificationMethodPublicKey,"The verification key has been revoked");return t}),this.type)}async checkDocumentSignature(){await this._doAction(QV.checkDocumentSignature,(async()=>{const e=new XV({key:this.verificationKey});e.date=new Date(Date.now()).toISOString();const t=await UV.verify(this.retrieveInitialDocument(),{suite:e,purpose:new ZV,documentLoader:this.generateDocumentLoader()});if(!t.verified)throw console.error(JSON.stringify(t,null,2)),new ji(QV.checkDocumentSignature,`The document's ${this.type} signature could not be confirmed`);console.log("Credential Ed25519 signature successfully verified")}),this.type)}}const tH=Ql("Verifier");class rH{expires;id;issuer;revocationKey;documentToVerify;explorerAPIs;txData;_stepsStatuses=[];hashlinkVerifier;verificationSteps;supportedVerificationSuites;proofVerifiers=[];verificationProcess;proofMap;constructor({certificateJson:e,expires:t,hashlinkVerifier:r,id:n,issuer:i,revocationKey:o,explorerAPIs:s}){this.expires=t,this.id=n,this.issuer=i,this.hashlinkVerifier=r,this.revocationKey=o,this.explorerAPIs=s,this.documentToVerify=Object.assign({},e),this.instantiateProofVerifiers(),this.prepareVerificationProcess()}getVerificationSteps(){return this.verificationSteps}getSignersData(){return this.proofVerifiers.map((e=>({signingDate:e.getSigningDate(),signatureSuiteType:e.type,issuerPublicKey:e.getIssuerPublicKey(),issuerName:e.getIssuerName(),issuerProfileDomain:e.getIssuerProfileDomain(),issuerProfileUrl:e.getIssuerProfileUrl(),chain:e.getChain?.(),transactionId:e.getTransactionIdString?.(),transactionLink:e.getTransactionLink?.(),rawTransactionLink:e.getRawTransactionLink?.()})))}async verify(e=(()=>{})){this._stepCallback=e,this._stepsStatuses=[];for(let e=0;e<this.proofVerifiers.length;e++)await this.proofVerifiers[e].verifyProof();for(const e of this.verificationProcess){if(!this[e])return void console.error("verification logic for",e,"not implemented");await this[e]()}for(let e=0;e<this.proofVerifiers.length;e++)await this.proofVerifiers[e].verifyIdentity();const t=this._stepsStatuses.find((e=>e.status===Dl.FAILURE));return t?this._failed(t):this._succeed()}getRevocationListUrl(){return this.issuer.revocationList}getProofTypes(){const e=[];return this.proofMap.forEach((t=>{let{type:r}=t;"ChainedProof2021"===r&&(r=t.chainedProofType),Array.isArray(r)&&(r=r[0]),e.push(r)})),e}getProofMap(e){const t=new Map;return"proof"in e?Array.isArray(e.proof)?e.proof.forEach(((e,r)=>t.set(r,e))):t.set(0,e.proof):"signature"in e&&t.set(0,e.signature),t}instantiateProofVerifiers(){this.supportedVerificationSuites={MerkleProof2017:Hz,MerkleProof2019:Vz,Ed25519Signature2020:eH},this.proofMap=this.getProofMap(this.documentToVerify);const e=this.getProofTypes(),t=function(e=[],t=[]){return t.filter((t=>!e.includes(t)))}(Object.keys(this.supportedVerificationSuites),e);if(t.length)throw new Error(`No support for proof verification of type: ${t.join(", ")}`);this.proofMap.forEach(((t,r)=>{this.proofVerifiers.push(new this.supportedVerificationSuites[e[r]]({actionMethod:this._doAction.bind(this),document:this.documentToVerify,proof:t,explorerAPIs:this.explorerAPIs,issuer:this.issuer}))}))}prepareVerificationProcess(){const e=Hl.certificates.getVerificationMap(!!this.issuer.didDocument);this.verificationSteps=e.verificationMap,this.verificationProcess=e.verificationProcess,this.registerSignatureVerificationSteps(),this.registerIdentityVerificationSteps(),this.verificationSteps=this.verificationSteps.filter((e=>e.subSteps?.length>0||e.suites?.some((e=>e.subSteps.length>0))))}registerSignatureVerificationSteps(){const e=Bi.proofVerification;this.verificationSteps.find((t=>t.code===e)).suites=this.getSuiteSubsteps(e)}getSuiteSubsteps(e){const t={[Bi.proofVerification]:"getProofVerificationSteps",[Bi.identityVerification]:"getIdentityVerificationSteps"};return this.proofVerifiers.map((r=>({proofType:r.type,subSteps:r[t[e]](e)})))}registerIdentityVerificationSteps(){const e=Bi.identityVerification;this.verificationSteps.find((t=>t.code===e)).suites=this.getSuiteSubsteps(e)}async _doAction(e,t,r){if(this._isFailing())return;let n;e&&(n=Hl.i18n.getText("subSteps",`${e}LabelPending`),tH(n),this._updateStatusCallback(e,Dl.STARTING,r));try{const n=await t();return e&&(this._updateStatusCallback(e,Dl.SUCCESS,r),this._stepsStatuses.push({code:e,status:Dl.SUCCESS})),n}catch(t){e&&(this._updateStatusCallback(e,Dl.FAILURE,r,t.message),this._stepsStatuses.push({code:e,message:t.message,status:Dl.FAILURE}))}}_stepCallback(e){}async checkImagesIntegrity(){await this._doAction(Ui.checkImagesIntegrity,(async()=>{await this.hashlinkVerifier.verifyHashlinkTable().catch((e=>{throw console.error("hashlink verification error",e),new ji(Ui.checkImagesIntegrity,Oi("errors","checkImagesIntegrity"))}))}))}async checkRevokedStatus(){const e=this.getRevocationListUrl();if(!e)return console.warn("No revocation list url was set on the issuer."),void await this._doAction(Ui.checkRevokedStatus,(()=>!0));const t=await this._doAction(null,(async()=>await Hl.verifier.getRevokedAssertions(e,this.id)));await this._doAction(Ui.checkRevokedStatus,(()=>function(e,t){if(!e||!t)return;Array.isArray(t)||(t=[t]),t=t.filter((e=>null!=e));const r=function(e=[],t=[]){return e.filter((e=>t.includes(e))).filter(((e,t,r)=>r.indexOf(e)===t))}(t,e.map((e=>e.id)));if(r.length>0){const t=e.findIndex((e=>e.id===r[0]));if(t>-1)throw new ji(Ui.checkRevokedStatus,Hl.certificates.generateRevocationReason(e[t].revocationReason))}}(t,this.id)))}async checkExpiresDate(){await this._doAction(Ui.checkExpiresDate,(()=>function(e=null){if(!e)return;const t=Fl(e);if((new Date).getTime()>=t)throw new ji(Ui.checkExpiresDate,Oi("errors","ensureNotExpired"))}(this.expires)))}async controlVerificationMethod(){await this._doAction(Ui.controlVerificationMethod,(()=>{!function(e,t=""){const r=function(e){return e.id}(e);if(r!==t.split("#")[0])throw new ji(Ui.controlVerificationMethod,`${zg} - ${Hl.i18n.getText("errors","controlVerificationMethod")}`)}(this.issuer.didDocument,zz(this.documentToVerify.proof))}))}findStepFromVerificationProcess(e,t){return Hl.verifier.findVerificationSubstep(e,this.verificationSteps,t)}_failed(e){const{message:t}=e;return tH(`failure:${t}`),this._setFinalStep({status:Dl.FAILURE,message:t})}_isFailing(){return this._stepsStatuses.some((e=>e.status===Dl.FAILURE))}_succeed(){let e;return 1===this.proofVerifiers.length&&(e=Hl.chains.isMockChain(this.proofVerifiers[0].getChain())?Hl.i18n.getText("success","mocknet"):Hl.i18n.getText("success","blockchain"),tH(e)),this.proofVerifiers.length>1&&(e=Hl.i18n.getText("success","multisign")),this._setFinalStep({status:Dl.SUCCESS,message:e})}_setFinalStep({status:e,message:t}){return{code:Bi.final,status:e,message:t}}_updateStatusCallback(e,t,r="",n=""){if(null!=e){const i=this.findStepFromVerificationProcess(e,r),o={code:e,status:t,parentStep:i.parentStep,label:i.labelPending};n&&(o.errorMessage=n),this._stepCallback(o)}}}class nH{certificateImage;certificateJson;description;display;expires;explorerAPIs=[];id;isFormatValid;issuedOn;issuer;locale;metadataJson;name;options;recipientFullName;recordLink;revocationKey;sealImage;signature;signatureImage;signers=[];subtitle;hashlinkVerifier;verificationSteps;verifier;constructor(e,t={}){if(this._setOptions(t),"object"!=typeof e)try{e=JSON.parse(e)}catch(e){throw new Error(Hl.i18n.getText("errors","certificateNotValid"))}this.certificateJson=Ug(e),this.hashlinkVerifier=new hi}async init(){await this.parseJson(this.certificateJson),this.verifier=new rH({certificateJson:this.certificateJson,expires:this.expires,id:this.id,issuer:this.issuer,hashlinkVerifier:this.hashlinkVerifier,revocationKey:this.revocationKey,explorerAPIs:Ug(this.explorerAPIs)}),this.verificationSteps=this.verifier.getVerificationSteps()}async verify(e){const t=await this.verifier.verify(e);return this.setSigners(),t}async parseJson(e){const t=await async function(e){try{const t=ql(e["@context"]),r=await $l[t.versionNumber](e);return r.isFormatValid=!0,r}catch(e){return{isFormatValid:!1,error:e.message}}}(e);if(!t.isFormatValid)throw new Error(t.error);await this._setProperties(t)}setSigners(){this.signers=this.verifier.getSignersData()}_setOptions(e){this.options=Object.assign({},Ii,e),this.locale=Hl.i18n.ensureIsSupported("auto"===this.options.locale?Hl.i18n.detectLocale():this.options.locale),this.explorerAPIs=this.options.explorerAPIs||[],e.didResolverUrl&&(Hl.did.didResolver.url=e.didResolverUrl),Ti.locale=this.locale}async _setProperties({certificateImage:e,description:t,display:r,expires:n,id:i,isFormatValid:o,issuedOn:s,issuer:a,metadataJson:u,name:c,recipientFullName:l,recordLink:h,revocationKey:f,sealImage:d,signature:p,signatureImage:g,subtitle:m}){this.isFormatValid=o,this.certificateImage=e,this.description=t,this.expires=n,this.id=i,this.issuedOn=s,this.issuer=a,this.metadataJson=u,this.name=c,this.recipientFullName=l,this.recordLink=h,this.revocationKey=f,this.sealImage=d,this.signature=p,this.signatureImage=g,this.subtitle=m,this.display=await this.parseHashlinksInDisplay(r)}async parseHashlinksInDisplay(e){const t=Ug(e);if(t)return"text/html"!==t.contentMediaType||(t.content=await async function(e,t){const r=[...e.matchAll(/hl:{1}[a-zA-Z0-9]+:{1}[a-zA-Z0-9]+/gm)].map((e=>e[0])).filter((e=>!!e));if(r.length){const n=await async function(e,t){return(await Promise.all(e.map((async e=>await t.decode(e))))).reduce((function(e,t){return e.push(t.meta.url[0]),e}),[])}(r,t);e=function(e,t,r){return t.forEach(((t,n)=>{e=e.replace(r[n],t)})),e}(e,n,r)}return e}(t.content,this.hashlinkVerifier)),t}}function iH(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}function oH(e){return/^(\.\/|\.\.\/|[A-Z]:\/\/|\/)[^ "]+$/.test(e)}function sH(){return{certificateDefinition:null,errorMessage:"errors.invalidBlockcertsUrl"}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function aH(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}function uH(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}var cH,lH;!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(cH||(cH={})),function(e){e.V1_1="1.1",e.V1_2="1.2"}(lH||(lH={}));var hH=lH;const fH={formatValidation:{label:"Format validation",labelPending:"Validating format",subSteps:[]},hashComparison:{label:"Hash comparison",labelPending:"Comparing hash",subSteps:[]},statusCheck:{label:"Status check",labelPending:"Checking record status",subSteps:[]}};Object.freeze({__proto__:null,final:"final",formatValidation:"formatValidation",hashComparison:"hashComparison",statusCheck:"statusCheck",language:fH});var dH={"en-US":{steps:{formatValidationLabel:"Format validation",formatValidationLabelPending:"Validating format",hashComparisonLabel:"Hash comparison",hashComparisonLabelPending:"Comparing hash",statusCheckLabel:"Status check",statusCheckLabelPending:"Checking record status"},subSteps:{getTransactionIdLabel:"Get transaction ID",getTransactionIdLabelPending:"Getting transaction ID",computeLocalHashLabel:"Compute local hash",computeLocalHashLabelPending:"Computing local hash",fetchRemoteHashLabel:"Fetch remote hash",fetchRemoteHashLabelPending:"Fetching remote hash",getIssuerProfileLabel:"Get issuer profile",getIssuerProfileLabelPending:"Getting issuer profile",parseIssuerKeysLabel:"Parse issuer keys",parseIssuerKeysLabelPending:"Parsing issuer keys",compareHashesLabel:"Compare hashes",compareHashesLabelPending:"Comparing hashes",checkMerkleRootLabel:"Check Merkle Root",checkMerkleRootLabelPending:"Checking Merkle Root",checkReceiptLabel:"Check Receipt",checkReceiptLabelPending:"Checking Receipt",checkIssuerSignatureLabel:"Check Issuer Signature",checkIssuerSignatureLabelPending:"Checking Issuer Signature",checkAuthenticityLabel:"Check Authenticity",checkAuthenticityLabelPending:"Checking Authenticity",checkRevokedStatusLabel:"Check Revoked Status",checkRevokedStatusLabelPending:"Checking Revoked Status",checkExpiresDateLabel:"Check Expiration Date",checkExpiresDateLabelPending:"Checking Expiration Date"},revocation:{preReason:"Reason given:",reason:"This certificate has been revoked by the issuer."},success:{mocknet:{label:"This Mocknet credential passed all checks",description:"Mocknet credentials are used for test purposes only. They are not recorded on a blockchain, and they should not be considered verified Blockcerts."},blockchain:{label:"Verified",description:"This is a valid ${chain} certificate.",linkText:"View transaction link"}},errors:{certificateNotValid:"This is not a valid certificate",checkEtherScanConfirmations:"Number of transaction confirmations were less than the minimum required, according to EtherScan API",couldNotConfirmTx:"Could not confirm the transaction",ensureHashesEqual:"Computed hash does not match remote hash",ensureIssuerSignature:"Issuer key does not match derived address.",ensureMerkleRootEqual:"Merkle root does not match remote hash.",ensureNotExpired:"This certificate has expired.",ensureValidReceipt:"The receipt is malformed. There was a problem navigating the merkle tree in the receipt.",failedJsonLdNormalization:"Failed JSON-LD normalization",foundUnmappedFields:"Found unmapped fields during JSON-LD normalization",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Didn't recognize chain value",getIssuerProfile:"Unable to get issuer profile",getRevokedAssertions:"Unable to get revocation assertions",getTransactionId:"Cannot verify this certificate without a transaction ID to compare against.",invalidMerkleReceipt:"Invalid Merkle Receipt. Proof hash did not match Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Cannot verify this certificate without a transaction ID to compare against.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"Could not confirm the transaction. No blockchain apis returned a response. This could be because of rate limiting.",lookForTxDifferentAddresses:"Issuing addresses returned by the blockchain APIs were different",lookForTxDifferentRemoteHashes:"Remote hashes returned by the blockchain APIs were different",lookForTxInvalidAppConfig:"Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value",lookForTxInvalidChain:"Invalid chain; does not map to known BlockchainExplorers.",parseBlockCypherResponse:"Number of transaction confirmations were less than the minimum required, according to Blockcypher API",parseBlockstreamResponse:"Number of transaction confirmations were less than the minimum required, according to Blockstream API",parseIssuerKeys:"Unable to parse JSON out of issuer identification data.",unableToGetRemoteHash:"Unable to get remote hash"}},fr:{steps:{formatValidationLabel:"Validation du format",formatValidationLabelPending:"Validation du format",hashComparisonLabel:"Comparaison du hash",hashComparisonLabelPending:"Comparaison du hash",statusCheckLabel:"Vrification du status",statusCheckLabelPending:"Vrification du status"},subSteps:{getTransactionIdLabel:"Obtention de l'identifiant de transaction",getTransactionIdLabelPending:"Obtention de l'identifiant de transaction",computeLocalHashLabel:"Calcul du hash local",computeLocalHashLabelPending:"Calcul du hash local",fetchRemoteHashLabel:"Rcupration du hash distant",fetchRemoteHashLabelPending:"Rcupration du hash distant",getIssuerProfileLabel:"Obtention du profil de l'metteur",getIssuerProfileLabelPending:"Obtention du profil de l'metteur",parseIssuerKeysLabel:"Traitement des cls de l'metteur",parseIssuerKeysLabelPending:"Traitement des cls de l'metteur",compareHashesLabel:"Comparaison des hash",compareHashesLabelPending:"Comparaison des hashs",checkMerkleRootLabel:"Vrification du Merkle Root",checkMerkleRootLabelPending:"Vrification du  Merkle Root",checkReceiptLabel:"Vrification du reu",checkReceiptLabelPending:"Vrification du reu",checkIssuerSignatureLabel:"Vrification de la signature de l'metteur",checkIssuerSignatureLabelPending:"Vrification de la signature de l'metteur",checkAuthenticityLabel:"Vrification de l'authenticit",checkAuthenticityLabelPending:"Vrification de l'authenticit",checkRevokedStatusLabel:"Vrification du status de rvocation",checkRevokedStatusLabelPending:"Vrification du status de rvocation",checkExpiresDateLabel:"Vrification de la date d'expiration",checkExpiresDateLabelPending:"Vrification de la date d'expiration"},revocation:{preReason:"Raison :",reason:"Ce certificat a t rvoqu par l'metteur."},success:{mocknet:{label:"Cet enregistrement Mocknet a t vrifi",description:"Le mode Mocknet est utilis  des fins de tests uniquement. Ce Blockcert n'a pas t enregistr sur une blockchain, et en tant que tel ne peut pas tre considr un Blockcert valide."},blockchain:{label:"Vrifi",description:"Ceci est un certificat ${chain} valide.",linkText:"Voir la transaction"}},errors:{certificateNotValid:"Certificat invalide",checkEtherScanConfirmations:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API EtherScan",couldNotConfirmTx:"Impossible de confirmer la transaction",ensureHashesEqual:"Calcul du hash local diffrent du hash distant",ensureIssuerSignature:"La cl de l'metteur ne correspond pas  l'adresse drive",ensureMerkleRootEqual:"Le Merkle root ne correspond pas au hash distant",ensureNotExpired:"Certificat expir",ensureValidReceipt:"Erreur d'criture du reu. Un problme est survenu lors de la navigation de l'arbre Merkle du reu.",failedJsonLdNormalization:"Erreur de normalisation JSON-LD",foundUnmappedFields:"Champs non lis dcouverts durant la normalisation JSON-LD",invalidIssuingAddressCreationTime:"L'adresse d'mission utilise a t cre aprs la transaction d'enregistrement.",invalidIssuingAddressRevoked:"L'adresse d'mission utilise a t dcommissionne par l'metteur avant la transaction d'enregistrement.",invalidIssuingAddressExpired:"L'adresse d'mission utilise a expir avant la transaction.",invalidIssuingAddressUnknown:"L'adresse utilise pour mettre ce Blockcerts n'appartient  l'metteur dclar.",getChain:"Valeur de chaine non reconnue",getIssuerProfile:"Profil de l'metteur indisponible",getRevokedAssertions:"Impossible d'obtenir les raisons de revocation",getTransactionId:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",invalidMerkleReceipt:"Reu Merkle invalide. Hash de preuve diffrent du Merkle root",invalidMerkleVersion:"La version du Merkle utilis est incompatible avec la version Blockcerts.",isTransactionIdValid:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",issuerProfileNotSet:"l'URL de l'metteur n'est pas dfinie",issuerProfileInvalid:"le document distant ne semble pas tre un profil d'metteur valide",lookForTxCouldNotConfirm:"Impossible de confirmer la transaction. Aucune API blockchain n'a rpondu. Potentiellement d  une limite de dbit rseau.",lookForTxDifferentAddresses:"Les adresses d'mission reues de l'API blockchain ne concordent pas",lookForTxDifferentRemoteHashes:"Les hashs distants reus de l'API blockchain ne concordent pas",lookForTxInvalidAppConfig:"Configuration de l'application invalide : vrifiez la valeur de configuration de CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Chaine invalide : non lie  un BlockchainExplorers connu",parseBlockCypherResponse:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API Blockcypher",parseBlockstreamResponse:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API Blockstream",parseIssuerKeys:"Impossible de lire le JSON d'identification de l'metteur",unableToGetRemoteHash:"Impossible d'obtenir le hash distant"}},es:{steps:{formatValidationLabel:"Validacin de formato",formatValidationLabelPending:"Validando el formato",hashComparisonLabel:"Comparacin de cadena binaria",hashComparisonLabelPending:"Comparando cadena binaria",statusCheckLabel:"Estado de Verificacin",statusCheckLabelPending:"Verificando Estado de Grabacin"},subSteps:{getTransactionIdLabel:"Obtener Identificacin de Transaccin",getTransactionIdLabelPending:"Obteniendo Identificacin de Transaccin",computeLocalHashLabel:"Calcular cadena binaria local",computeLocalHashLabelPending:"Calculando cadena binaria local",fetchRemoteHashLabel:"Obtener cadena binaria remota",fetchRemoteHashLabelPending:"Obeniendo cadena binaria remota",getIssuerProfileLabel:"Obtener perfil de emisor",getIssuerProfileLabelPending:"Obteniendo perfil de emisor",parseIssuerKeysLabel:"Analizar claves del emisor",parseIssuerKeysLabelPending:"Analizando claves del emisor",compareHashesLabel:"Comparar cadenas binarias",compareHashesLabelPending:"Comparando cadenas binarias",checkMerkleRootLabel:"Verificar Merkle Root",checkMerkleRootLabelPending:"Verificando Merkle Root",checkReceiptLabel:"Verificar Recibo",checkReceiptLabelPending:"Verificando Recibo",checkIssuerSignatureLabel:"Verificar Firma del Emisor",checkIssuerSignatureLabelPending:"Verificando Firma del Emisor",checkAuthenticityLabel:"Verificar Autenticidad",checkAuthenticityLabelPending:"Verificando Autenticidad",checkRevokedStatusLabel:"Verificar Estado de Revocacin",checkRevokedStatusLabelPending:"Verificando Estado de Revocacin",checkExpiresDateLabel:"Verificar Fechas de Expiracin",checkExpiresDateLabelPending:"Verificando Fechas de Expiracin"},revocation:{preReason:"Razn dada:",reason:"Este certificado ha sido revocado por el emisor"},success:{mocknet:{label:"Esta credencial de Mocknet pas todas las comprobaciones",description:"Las credenciales de Mocknet se usan solo con fines de prueba. No se graban en una cadena de bloques, y no se deben considerar Blockcerts Verificados."},blockchain:{label:"Verificado",description:"Este es un certificado vlido de ${chain}.",linkText:"Ver enlace de transaccin"}},errors:{certificateNotValid:"Este no es un certificado vlido",checkEtherScanConfirmations:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API EtherScan",couldNotConfirmTx:"No se ha podido confirmar la transaccin",ensureHashesEqual:"La cadena binaria calculada no corresponde con la cadena binaria remota",ensureIssuerSignature:"La llave del emisor no corresponde con la direccin obtenida",ensureMerkleRootEqual:"La raz Merkle no corresponde con la cadena binaria remota",ensureNotExpired:"Este certificado ha expirado",ensureValidReceipt:"El recibo est malformado. Hubo un problema navegando el rbol Merkle en el recibo",failedJsonLdNormalization:"La normalizacin del JSON-LD ha fallado",foundUnmappedFields:"Se han encontrado campos no mapeados durante la normalizacin de JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Valor de cadena no reconocido",getIssuerProfile:"No se ha podido obtener el perfil del emisor",getRevokedAssertions:"No se ha podido obtener aseveraciones de revocacin",getTransactionId:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",invalidMerkleReceipt:"Recibo Merkle invlido. La cadena binaria de prueba no corresponde con la raz Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",issuerProfileNotSet:"URL del emisor no definido",issuerProfileInvalid:"el documento recogido no parece ser un perfil de emisor valido",lookForTxCouldNotConfirm:"No se ha podido confirmar la transaccin. Ninguna del las APIs de blockchain gener una respuesta. Esto puede ser causado por limitaciones de tasa.",lookForTxDifferentAddresses:"Las direcciones emisoras generadas por las APIs del blockchain son distintas",lookForTxDifferentRemoteHashes:"Las cadenas binarias remotas generadas por las APIs del blockchain son distintas",lookForTxInvalidAppConfig:"Configuracin de aplicacin invlida; cheque el valor de configuracin CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Cadena invlida; no corresponde a BlockchainExplorers reconocidos",parseBlockCypherResponse:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API Blockcypher",parseBlockstreamResponse:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API Blockstream",parseIssuerKeys:"No se ha podido analizar el JSON de la informacin de identificacin del emisor",unableToGetRemoteHash:"No se ha podido obtener la cadena binaria remota"}},mt:{steps:{formatValidationLabel:"Validazzjoni tal-format",formatValidationLabelPending:"Il-format qed jii vvalidat",hashComparisonLabel:"Paragun tal-Hash",hashComparisonLabelPending:"Il-hash qed jii pparagunat",statusCheckLabel:"Status check",statusCheckLabelPending:"Ir-record status qed jii ekkjat"},subSteps:{getTransactionIdLabel:"Ikseb l-ID ta' tranazzjoni",getTransactionIdLabelPending:"L-ID ta' tranazzjoni qed tii mnila",computeLocalHashLabel:"Ikkalkula l-hash lokali",computeLocalHashLabelPending:"Il-hash lokali qed jii kkalkulat",fetchRemoteHashLabel:"Fittex ir-remote hash",fetchRemoteHashLabelPending:"Ir-remote hash qed jii mfittex",getIssuerProfileLabel:"Ikseb il-profil tal-emittent",getIssuerProfileLabelPending:"Il-profil tal-emittent qed jii mniel",parseIssuerKeysLabel:"Estratta -wievet tal-emittent",parseIssuerKeysLabelPending:"I-wievet tal-emittent qed jiu estratti",compareHashesLabel:"Ikkumpara l-hashes",compareHashesLabelPending:"Il-hashes qed jiu kkomparati",checkMerkleRootLabel:"Iekkja l-Merkle Root",checkMerkleRootLabelPending:"Il-Merkle Root Qed Tii ekkjata",checkReceiptLabel:"Iekkja l-Irevuta",checkReceiptLabelPending:"L-Irevuta Qed Tii ekkjata",checkIssuerSignatureLabel:"Iekkja l-Firma tal-Emittent",checkIssuerSignatureLabelPending:"Il-Firma tal-Emittent Qed Tii ekkjata",checkAuthenticityLabel:"Iekkja l-Awtentiit",checkAuthenticityLabelPending:"L-Awtentiit Qed Tii ekkjata",checkRevokedStatusLabel:"Iekkja l-Istatus Revokat",checkRevokedStatusLabelPending:"L-Istatus Revokat Qed Jii ekkjat",checkExpiresDateLabel:"Iekkja d-Data ta' Skadenza",checkExpiresDateLabelPending:"Id-Data ta' Skadenza Qed Tii ekkjata"},revocation:{preReason:"Rauni mogtija:",reason:"Dan i-ertifikat ie revokat mill-emittent."},success:{mocknet:{label:"Din il-kredenzjali tal-Mocknet gaddiet il-kontrolli kollha",description:"Il-kredenzjali tal-Mocknet jintuaw biss gal skopijiet ta 'ttestjar. Dawn mhumiex irreistrati fuq blockchain, u ma gandhomx jiu kkunsidrati bala blockcerts verifikati."},blockchain:{label:"Ivverifikat",description:"Dan huwa ertifikat ${chain} huwa validu.",linkText:"Ara l-link tat-transazzjoni"}},errors:{certificateNotValid:"Dan mhux ertifikat validu",checkEtherScanConfirmations:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont EtherScan API",couldNotConfirmTx:"Ma setgetx tii kkonfermata t-tranazzjoni",ensureHashesEqual:"Il-hash ikkalkulat ma jikkorrispondix mar-remote hash",ensureIssuerSignature:"I-avetta tal-emittent ma taqbilx mal-indirizz derivat",ensureMerkleRootEqual:"Merkle root ma taqbilx mar-remote hash",ensureNotExpired:"Dan i-ertifikat skada",ensureValidReceipt:"L-irevuta hija malformata. Kien hemm problema fin-navigazzjoni tal-merkle tree fl-irevuta",failedJsonLdNormalization:"In-normalizzazzjoni ta' JSON-LD ma rnexxietx",foundUnmappedFields:"Instabu unmapped fields matul in-normalizzazzjoni JSON-LD",invalidIssuingAddressCreationTime:"L-indirizz elettroniku tal-ru speifikat inoloq wara li seet it-tranazzjoni.",invalidIssuingAddressRevoked:"L-indirizz elettroniku tal-ru speifikat ie revokat mill-emittent qabel ma seet it-tranazzjoni.",invalidIssuingAddressExpired:"L-indirizz elettroniku tal-ru speifikat skada qabel ma seet it-tranazzjoni.",invalidIssuingAddressUnknown:"L-indirizz elettroniku uat biex jinaru dawn il-Blockcerts ma jappartjenix gall-emittent mitlub.",getChain:"I-chain value ma ntgarafx",getIssuerProfile:"Mhux possibbli jinkiseb il-profil tal-emittent",getRevokedAssertions:"Mhux possibbli jinkisbu dikjarazzjonijiet revokati",getTransactionId:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",invalidMerkleReceipt:"Irevuta Merkle invalida. Il-proof hash ma kienx jaqbel mal-Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"It-tranazzjoni ma setgetx tii kkonferma. L-ebda blockchain apis ma rritorna rispons. Dan jista' jkun minabba limitazzjoni tar-rata",lookForTxDifferentAddresses:"L-indirizzi tal-ru mibguta lura mill-blockchain APIs kienu differenti",lookForTxDifferentRemoteHashes:"Ir-remote hashes mibguta lura mill-blockchain APIs kienu differenti",lookForTxInvalidAppConfig:"Konfigurazzjoni tal-applikazzjoni invalida; Iekkja l-valur konfigurattiv f' CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Chain invalidu; BlockchainExplorers mhux qed isib chain magrufa",parseBlockCypherResponse:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont Blockcypher API",parseBlockstreamResponse:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont Blockstream API",parseIssuerKeys:"Ma jistax jii estratt JSON mid-data tal-identifikazzjoni tal-emittent",unableToGetRemoteHash:"Mhux possibbli jinkiseb ir-remote hash"}},"it-IT":{steps:{formatValidationLabel:"Convalidare formato",formatValidationLabelPending:"Convalida formato",hashComparisonLabel:"Confrontare hash",hashComparisonLabelPending:"Confronta hash",statusCheckLabel:"Verificare stato",statusCheckLabelPending:"Verifica stato del record"},subSteps:{getTransactionIdLabel:"Ottenere ID transazione",getTransactionIdLabelPending:"Ottieni ID transazione",computeLocalHashLabel:"Calcolare hash locale",computeLocalHashLabelPending:"Calcola hash locale",fetchRemoteHashLabel:"Recuperare hash remoto",fetchRemoteHashLabelPending:"Recupera hash remoto",getIssuerProfileLabel:"Ottenere profilo issuer",getIssuerProfileLabelPending:"Ottieni profilo issuer",parseIssuerKeysLabel:"Analizzare chiavi issuer",parseIssuerKeysLabelPending:"Analizza chiavi issuer",compareHashesLabel:"Confrontare gli hash",compareHashesLabelPending:"Confronto hash",checkMerkleRootLabel:"Controllare radice di Merkle",checkMerkleRootLabelPending:"Controllo radice di Merkle",checkReceiptLabel:"Verificare ricevuta",checkReceiptLabelPending:"Verifica ricevuta",checkIssuerSignatureLabel:"Verificare firma Issuer",checkIssuerSignatureLabelPending:"Verifica firma Issuer",checkAuthenticityLabel:"Verificare autenticit",checkAuthenticityLabelPending:"Verifica autenticit",checkRevokedStatusLabel:"Verificare stato revocato",checkRevokedStatusLabelPending:"Verifica stato revocato",checkExpiresDateLabel:"Verificare data di scadenza",checkExpiresDateLabelPending:"Verifica data di scadenza"},revocation:{preReason:"Motivo indicato:",reason:"Questo certificato  stato revocato dall'emittente."},success:{mocknet:{label:"Questo Blockcert simulato ha superato tutti i controlli.",description:"La modalit Mocknet  utilizzata solo dagli emittenti per testare il loro flusso di lavoro localmente. Questo Blockcert non  stato registrato su una blockchain e non dovrebbe essere considerato un Blockcert verificato."},blockchain:{label:"Verificato",description:"Questo  un certificato ${chain} valido.",linkText:"Vedi la transazione"}},errors:{certificateNotValid:"Questo non  un certificato valido",checkEtherScanConfirmations:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API EtherScan",couldNotConfirmTx:"Impossibile confermare la transazione",ensureHashesEqual:"L'hash calcolato non corrisponde all'hash remoto",ensureIssuerSignature:"La chiave dell'issuer non corrisponde all'indirizzo derivato.",ensureMerkleRootEqual:"La radice di Merkle non corrisponde all'hash remoto.",ensureNotExpired:"Questo certificato  scaduto.",ensureValidReceipt:"La ricevuta  malformata. C' stato un problema nella navigazione dell'albero di Merkle nella ricevuta.",failedJsonLdNormalization:"Normalizzazione JSON-LD fallita",foundUnmappedFields:"Campi non mappati trovati durante la normalizzazione JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Il valore della catena non  stato riconosciuto",getIssuerProfile:"Impossibile ottenere il profilo dell'emittente",getRevokedAssertions:"Impossibile ottenere le asserzioni di revoca",getTransactionId:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",invalidMerkleReceipt:"Ricevuta Merkle non valida. L'hash di prova non corrisponde alla radice di Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"Impossibile confermare la transazione. Nessuna API blockchain ha risposto. Potrebbe essere a causa della limitazione della velocit.",lookForTxDifferentAddresses:"Gli indirizzi di emissione restituiti dalle API blockchain erano diversi",lookForTxDifferentRemoteHashes:"Gli hash remoti restituiti dalle API blockchain erano diversi",lookForTxInvalidAppConfig:"Configurazione dell'applicazione non valida, verificare il valore di configurazione di CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Catena non valida; non mappa BlockchainExplorers noti.",parseBlockCypherResponse:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API Blockcypher",parseBlockstreamResponse:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API Blockstream",parseIssuerKeys:"Impossibile analizzare JSON dai dati di identificazione dell'emittente.",unableToGetRemoteHash:"Impossibile ottenere l'hash remoto"}},ja:{steps:{formatValidationLabel:"",formatValidationLabelPending:"",hashComparisonLabel:"",hashComparisonLabelPending:"",statusCheckLabel:"",statusCheckLabelPending:""},subSteps:{getTransactionIdLabel:"ID",getTransactionIdLabelPending:"ID",computeLocalHashLabel:"",computeLocalHashLabelPending:"",fetchRemoteHashLabel:"",fetchRemoteHashLabelPending:"",getIssuerProfileLabel:"",getIssuerProfileLabelPending:"",parseIssuerKeysLabel:"",parseIssuerKeysLabelPending:"",compareHashesLabel:"",compareHashesLabelPending:"",checkMerkleRootLabel:"Merkle Root",checkMerkleRootLabelPending:"Merkle Root",checkReceiptLabel:"",checkReceiptLabelPending:"",checkIssuerSignatureLabel:"",checkIssuerSignatureLabelPending:"",checkAuthenticityLabel:"",checkAuthenticityLabelPending:"",checkRevokedStatusLabel:"",checkRevokedStatusLabelPending:"",checkExpiresDateLabel:"",checkExpiresDateLabelPending:""},revocation:{preReason:"",reason:""},success:{mocknet:{label:"Mocknet",description:"MocknetBlockcert"},blockchain:{label:"",description:"${chain}",linkText:""}},errors:{certificateNotValid:"",checkEtherScanConfirmations:"EtherScan API",couldNotConfirmTx:"",ensureHashesEqual:"",ensureIssuerSignature:"",ensureMerkleRootEqual:"Merkle root",ensureNotExpired:"",ensureValidReceipt:"Merkle tree",failedJsonLdNormalization:"JSON-LD",foundUnmappedFields:"JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"",getIssuerProfile:"",getRevokedAssertions:"assertions",getTransactionId:"ID",invalidMerkleReceipt:"MerkleMerkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"ID",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"API ",lookForTxDifferentAddresses:"API",lookForTxDifferentRemoteHashes:"API",lookForTxInvalidAppConfig:"CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"BlockchainExplorers",parseBlockCypherResponse:"Blockcypher API",parseBlockstreamResponse:"Blockstream API",parseIssuerKeys:"JSON",unableToGetRemoteHash:""}}};function pH(e,t){return dH["en-US"].subSteps[`${e}${t}`]}const gH={formatValidation:["getTransactionId","computeLocalHash","fetchRemoteHash","getIssuerProfile","parseIssuerKeys"],hashComparison:["compareHashes","checkMerkleRoot","checkReceipt"],statusCheck:["checkIssuerSignature","checkAuthenticity","checkRevokedStatus","checkExpiresDate"]},mH=Object.keys(gH).reduce(((e,t)=>{return Object.assign(e,gH[r=t].reduce(((e,t)=>(e[t]={code:t,label:pH(t,"Label"),labelPending:pH(t,"LabelPending"),parentStep:r},e)),{}));var r}),{});var yH;Object.freeze({__proto__:null,getTransactionId:"getTransactionId",computeLocalHash:"computeLocalHash",fetchRemoteHash:"fetchRemoteHash",getIssuerProfile:"getIssuerProfile",parseIssuerKeys:"parseIssuerKeys",compareHashes:"compareHashes",checkMerkleRoot:"checkMerkleRoot",checkReceipt:"checkReceipt",checkIssuerSignature:"checkIssuerSignature",checkAuthenticity:"checkAuthenticity",checkRevokedStatus:"checkRevokedStatus",checkExpiresDate:"checkExpiresDate",language:mH}),Object.freeze({__proto__:null,FAILURE:"failure",STARTING:"starting",SUCCESS:"success"}),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(yH||(yH={}));const vH={[yH.Bitcoin]:{code:yH.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}},[yH.Ethmain]:{code:yH.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}},[yH.Ethropst]:{code:yH.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}},[yH.Ethrinkeby]:{code:yH.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}},[yH.Mocknet]:{code:yH.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}},[yH.Regtest]:{code:yH.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}},[yH.Testnet]:{code:yH.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}},bH="mainnet",wH="testnet";var _H={"@context":[{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",extensions:"https://w3id.org/openbadges/extensions#",validation:"obi:validation",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",sec:"https://w3id.org/security#",Assertion:"bc:Assertion",Certificate:"bc:Certificate",Issuer:"bc:Issuer",BlockchainCertificate:"bc:BlockchainCertificate",CertificateDocument:"bc:CertificateDocument",issuer:{"@id":"bc:issuer","@type":"@id"},blockchaincertificate:{"@id":"bc:blockchaincertificate","@type":"@id"},certificate:{"@id":"bc:certificate","@type":"@id"},document:{"@id":"bc:document","@type":"@id"},assertion:{"@id":"bc:assertion","@type":"@id"},verify:{"@id":"bc:verify","@type":"@id"},recipient:{"@id":"bc:recipient","@type":"@id"},receipt:{"@id":"bc:receipt","@type":"@id"},publicKey:{"@id":"bc:publicKey"},revocationKey:{"@id":"bc:revocationKey"},"image:signature":{"@id":"bc:image:signature"},signature:{"@id":"bc:signature"},familyName:{"@id":"schema:familyName"},givenName:{"@id":"schema:givenName"},jobTitle:{"@id":"schema:jobTitle"},signer:{"@id":"bc:signer","@type":"@id"},"attribute-signed":{"@id":"bc:attribute-signed"},"ECDSA(secp256k1)":"bc:SignedBadge",subtitle:{"@id":"bc:subtitle"},email:"schema:email",hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},image:{"@id":"schema:image","@type":"@id"},salt:{"@id":"obi:salt"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},evidence:{"@id":"obi:evidence","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},tags:{"@id":"schema:keywords"},alignment:{"@id":"obi:alignment","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},url:{"@id":"schema:url","@type":"@id"},uid:{"@id":"obi:uid"},TypeValidation:"obi:TypeValidation",FrameValidation:"obi:FrameValidation",validatesType:"obi:validatesType",validationSchema:"obi:validationSchema",validationFrame:"obi:validationFrame",ChainpointSHA224v2:"cp:ChainpointSHA224v2",ChainpointSHA256v2:"cp:ChainpointSHA256v2",ChainpointSHA384v2:"cp:ChainpointSHA384v2",ChainpointSHA512v2:"cp:ChainpointSHA512v2","ChainpointSHA3-224v2":"cp:ChainpointSHA3-224v2","ChainpointSHA3-256v2":"cp:ChainpointSHA3-256v2","ChainpointSHA3-384v2":"cp:ChainpointSHA3-384v2","ChainpointSHA3-512v2":"cp:ChainpointSHA3-512v2",BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"}],validation:[{type:"TypeValidation",validatesType:"Assertion",validationSchema:"https://w3id.org/blockcerts/schema/1.2/assertion-1.2.json"},{type:"TypeValidation",validatesType:"Certificate",validationSchema:"https://w3id.org/blockcerts/schema/1.2/certificate-1.2.json"},{type:"TypeValidation",validatesType:"Issuer",validationSchema:"https://w3id.org/blockcerts/schema/1.2/issuer-1.2.json"},{type:"TypeValidation",validatesType:"CertificateDocument",validationSchema:"https://w3id.org/blockcerts/schema/1.2/certificate-document-1.2.json"},{type:"TypeValidation",validatesType:"BlockchainCertificate",validationSchema:"https://w3id.org/blockcerts/schema/1.2/blockchain-certificate-1.2.json"},{type:"TypeValidation",validatesType:"BlockchainReceipt",validationSchema:"https://w3id.org/blockcerts/schema/1.2/blockchain-receipt-1.2.json"}]},xH={"@context":{id:"@id",type:"@type",extensions:"https://w3id.org/openbadges/extensions#",obi:"https://w3id.org/openbadges#",validation:"obi:validation",cred:"https://w3id.org/credentials#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",AlignmentObject:"schema:AlignmentObject",CryptographicKey:"sec:Key",Endorsement:"cred:Credential",Assertion:"obi:Assertion",BadgeClass:"obi:BadgeClass",Criteria:"obi:Criteria",Evidence:"obi:Evidence",Extension:"obi:Extension",FrameValidation:"obi:FrameValidation",IdentityObject:"obi:IdentityObject",Image:"obi:Image",HostedBadge:"obi:HostedBadge",hosted:"obi:HostedBadge",Issuer:"obi:Issuer",Profile:"obi:Profile",RevocationList:"obi:RevocationList",SignedBadge:"obi:SignedBadge",signed:"obi:SignedBadge",TypeValidation:"obi:TypeValidation",VerificationObject:"obi:VerificationObject",author:{"@id":"schema:author","@type":"@id"},caption:{"@id":"schema:caption"},claim:{"@id":"cred:claim","@type":"@id"},created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},endorsement:{"@id":"cred:credential","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},genre:{"@id":"schema:genre"},image:{"@id":"schema:image","@type":"@id"},name:{"@id":"schema:name"},owner:{"@id":"sec:owner","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyPem:{"@id":"sec:publicKeyPem"},related:{"@id":"dc:relation","@type":"@id"},startsWith:{"@id":"http://purl.org/dqm-vocabulary/v1/dqm#startsWith"},tags:{"@id":"schema:keywords"},targetDescription:{"@id":"schema:targetDescription"},targetFramework:{"@id":"schema:targetFramework"},targetName:{"@id":"schema:targetName"},targetUrl:{"@id":"schema:targetUrl"},telephone:{"@id":"schema:telephone"},url:{"@id":"schema:url","@type":"@id"},version:{"@id":"schema:version"},alignment:{"@id":"obi:alignment","@type":"@id"},allowedOrigins:{"@id":"obi:allowedOrigins"},audience:{"@id":"obi:audience"},badge:{"@id":"obi:badge","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},endorsementComment:{"@id":"obi:endorsementComment"},evidence:{"@id":"obi:evidence","@type":"@id"},hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},issuer:{"@id":"obi:issuer","@type":"@id"},narrative:{"@id":"obi:narrative"},recipient:{"@id":"obi:recipient","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},revocationReason:{"@id":"obi:revocationReason"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},revokedAssertions:{"@id":"obi:revoked"},salt:{"@id":"obi:salt"},targetCode:{"@id":"obi:targetCode"},uid:{"@id":"obi:uid"},validatesType:"obi:validatesType",validationFrame:"obi:validationFrame",validationSchema:"obi:validationSchema",verification:{"@id":"obi:verify","@type":"@id"},verificationProperty:{"@id":"obi:verificationProperty"},verify:"verification"}};const SH={};SH["https://w3id.org/blockcerts/v1"]=_H,SH["https://w3id.org/openbadges/v2"]=xH,SH["https://openbadgespec.org/v2/context.json"]=xH;const EH={locale:"en-US"};var kH=Object.freeze({__proto__:null,isMainnet:function(e){return uH(e,"1")||uH(e,"ecdsa-koblitz-pubkey:1")}}),IH={locale:"en-US"};function AH(e,t){return e&&t?dH[IH.locale]?dH[IH.locale][e]?dH[IH.locale][e][t]?dH[IH.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]":""}var TH=Object.freeze({__proto__:null,detectLocale:function(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||EH.locale},ensureIsSupported:function(e){let t;const r=IG.i18n.getSupportedLanguages().map((e=>e.toLowerCase()));if(t=r.indexOf(e.toLowerCase())>-1,!t){const n=e.substr(0,2).toLowerCase(),i=r.map((e=>e.split("-")[0])).indexOf(n);t=i>-1,t&&(e=r[i])}return t||(e=EH.locale),function(e){const t=e.split("-");return t.length>1?`${t[0].toLowerCase()}-${t[1].toUpperCase()}`:t[0].toLowerCase()}(e)},getText:AH,getSupportedLanguages:function(){return Object.keys(dH)}});function PH(e=""){return kH.isMainnet(e)?vH.bitcoin:vH.testnet}function OH(e){const t=Object.keys(vH).map((e=>vH[e])).find((t=>t.signatureValue===e));if(void 0===t)throw new Error(AH("errors","getChain"));return t}class CH{constructor(e,t,r,n){this.publicKey=e,this.created=t,this.revoked=r,this.expires=n}}class MH{constructor(e,t,r){this.image=e,this.jobTitle=t,this.name=r}}class NH extends Error{constructor(e,t){super(t),this.stepCode=e}}var RH=Object.freeze({__proto__:null,isMockChain:function(e){if(e){const t="string"==typeof e?e:e.code;return!!Object.keys(vH).some((e=>e===t))&&!!vH[t].test}return!1}}),LH="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function jH(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DH(e,t){return e(t={exports:{}},t.exports),t.exports}function BH(e){return e&&e.default||e}var UH=DH((function(e,t){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Boolean]",s="[object Date]",a="[object Function]",u="[object GeneratorFunction]",c="[object Map]",l="[object Number]",h="[object Object]",f="[object Promise]",d="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",y="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",I="[object Uint8ClampedArray]",A="[object Uint16Array]",T="[object Uint32Array]",P=/\w*$/,O=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,M={};M[i]=M["[object Array]"]=M[v]=M[b]=M[o]=M[s]=M[w]=M[_]=M[x]=M[S]=M[E]=M[c]=M[l]=M[h]=M[d]=M[p]=M[g]=M[m]=M[k]=M[I]=M[A]=M[T]=!0,M["[object Error]"]=M[a]=M[y]=!1;var N="object"==typeof LH&&LH&&LH.Object===Object&&LH,R="object"==typeof self&&self&&self.Object===Object&&self,L=N||R||Function("return this")(),j=t&&!t.nodeType&&t,D=j&&e&&!e.nodeType&&e,B=D&&D.exports===j;function U(e,t){return e.set(t[0],t[1]),e}function F(e,t){return e.add(t),e}function z(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function H(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function K(e,t){return function(r){return e(t(r))}}function q(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var $,W=Array.prototype,G=Function.prototype,J=Object.prototype,X=L["__core-js_shared__"],Y=($=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",Z=G.toString,Q=J.hasOwnProperty,ee=J.toString,te=RegExp("^"+Z.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=B?L.Buffer:void 0,ne=L.Symbol,ie=L.Uint8Array,oe=K(Object.getPrototypeOf,Object),se=Object.create,ae=J.propertyIsEnumerable,ue=W.splice,ce=Object.getOwnPropertySymbols,le=re?re.isBuffer:void 0,he=K(Object.keys,Object),fe=Le(L,"DataView"),de=Le(L,"Map"),pe=Le(L,"Promise"),ge=Le(L,"Set"),me=Le(L,"WeakMap"),ye=Le(Object,"create"),ve=Fe(fe),be=Fe(de),we=Fe(pe),_e=Fe(ge),xe=Fe(me),Se=ne?ne.prototype:void 0,Ee=Se?Se.valueOf:void 0;function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){this.__data__=new Ie(e)}function Pe(e,t,r){var n=e[t];Q.call(e,t)&&ze(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Oe(e,t){for(var r=e.length;r--;)if(ze(e[r][0],t))return r;return-1}function Ce(e,t,r,n,f,y,O){var C;if(n&&(C=y?n(e,f,y,O):n(e)),void 0!==C)return C;if(!$e(e))return e;var N=Ve(e);if(N){if(C=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Q.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,C)}else{var R=De(e),L=R==a||R==u;if(Ke(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(R==h||R==i||L&&!y){if(V(e))return y?e:{};if(C=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:$e(t=oe(e))?se(t):{};var t}(L?{}:e),!t)return function(e,t){return Ne(e,je(e),t)}(e,function(e,t){return e&&Ne(t,We(t),e)}(C,e))}else{if(!M[R])return y?e:{};C=function(e,t,r,n){var i,a=e.constructor;switch(t){case v:return Me(e);case o:case s:return new a(+e);case b:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case w:case _:case x:case S:case E:case k:case I:case A:case T:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case c:return function(e,t,r){return z(t?r(H(e),!0):H(e),U,new e.constructor)}(e,n,r);case l:case g:return new a(e);case d:return function(e){var t=new e.constructor(e.source,P.exec(e));return t.lastIndex=e.lastIndex,t}(e);case p:return function(e,t,r){return z(t?r(q(e),!0):q(e),F,new e.constructor)}(e,n,r);case m:return i=e,Ee?Object(Ee.call(i)):{}}}(e,R,Ce,t)}}O||(O=new Te);var j=O.get(e);if(j)return j;if(O.set(e,C),!N)var D=r?function(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,We,je)}(e):We(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(D||e,(function(i,o){D&&(i=e[o=i]),Pe(C,o,Ce(i,t,r,n,o,e,O))})),C}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Ne(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n?n(r[s],e[s],s,r,e):void 0;Pe(r,s,void 0===a?e[s]:a)}return r}function Re(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Le(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!$e(e)||(t=e,Y&&Y in t))&&(qe(e)||V(e)?te:O).test(Fe(e));var t}(r)?r:void 0}ke.prototype.clear=function(){this.__data__=ye?ye(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(ye){var n=t[e];return n===r?void 0:n}return Q.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:Q.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=ye&&void 0===t?r:t,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var t=this.__data__,r=Oe(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ie.prototype.get=function(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]},Ie.prototype.has=function(e){return Oe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var r=this.__data__,n=Oe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new ke,map:new(de||Ie),string:new ke}},Ae.prototype.delete=function(e){return Re(this,e).delete(e)},Ae.prototype.get=function(e){return Re(this,e).get(e)},Ae.prototype.has=function(e){return Re(this,e).has(e)},Ae.prototype.set=function(e,t){return Re(this,e).set(e,t),this},Te.prototype.clear=function(){this.__data__=new Ie},Te.prototype.delete=function(e){return this.__data__.delete(e)},Te.prototype.get=function(e){return this.__data__.get(e)},Te.prototype.has=function(e){return this.__data__.has(e)},Te.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ie){var n=r.__data__;if(!de||n.length<199)return n.push([e,t]),this;r=this.__data__=new Ae(n)}return r.set(e,t),this};var je=ce?K(ce,Object):function(){return[]},De=function(e){return ee.call(e)};function Be(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}function Fe(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(fe&&De(new fe(new ArrayBuffer(1)))!=b||de&&De(new de)!=c||pe&&De(pe.resolve())!=f||ge&&De(new ge)!=p||me&&De(new me)!=y)&&(De=function(e){var t=ee.call(e),r=t==h?e.constructor:void 0,n=r?Fe(r):void 0;if(n)switch(n){case ve:return b;case be:return c;case we:return f;case _e:return p;case xe:return y}return t});var Ve=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!qe(e)}var Ke=le||function(){return!1};function qe(e){var t=$e(e)?ee.call(e):"";return t==a||t==u}function $e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function We(e){return He(e)?function(e,t){var r=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&He(e)}(e)&&Q.call(e,"callee")&&(!ae.call(e,"callee")||ee.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var s in e)!t&&!Q.call(e,s)||o&&("length"==s||Be(s,n))||r.push(s);return r}(e):function(e){if(!Ue(e))return he(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Ce(e,!0,!0)}}));function FH(e){return UH(e)}const zH={[bH]:["getTransactionId","computeLocalHash","fetchRemoteHash","getIssuerProfile","parseIssuerKeys","compareHashes","checkMerkleRoot","checkReceipt","checkRevokedStatus","checkAuthenticity","checkExpiresDate"],[wH]:["computeLocalHash","compareHashes","checkReceipt","checkExpiresDate"]};var VH=Object.freeze({__proto__:null,getChain:function(e,t=null){const r=t||{};if(r.anchors){const e=r.anchors[0];if(e.chain)return OH(e.chain);if("string"==typeof e)return function(e){const t={btc:{chainName:vH.bitcoin.name},eth:{chainName:vH.ethmain.name}},r=e.split(":"),n=r.findIndex((e=>Object.keys(t).includes(e)));if(n>-1){const e=r[n],i=r[n+1];return OH(t[e].chainName.toLowerCase()+function(e){const t=e.substr(0,1),r=e.substr(1,e.length-1);return t.toUpperCase()+r.toLowerCase()}(i))}return PH()}(e)}return PH(e)},generateRevocationReason:function(e){return e=(e=e.trim()).length>0?` ${AH("revocation","preReason")} ${e}${"."!==e.slice(-1)?".":""}`:"",`${AH("revocation","reason")}${e}`},getTransactionId:function(e={}){try{const{anchors:t}=e,r=t[0];if(r.sourceId)return r.sourceId;if("string"==typeof r)return r.split(":").pop()}catch(e){throw new NH("",AH("errors","getTransactionId"))}},getTransactionLink:function(e,t,r=!1){return e&&t?t.transactionTemplates[r?"raw":"full"].replace("{transaction_id}",e):""},getVerificationMap:function(e){if(!e)return[];const t=RH.isMockChain(e)?wH:bH;return function(e){const t=function(e){const t=FH(fH);return e.forEach((e=>t[e.parentStep].subSteps.push(e))),t}(e.map((e=>({...Object.assign({},mH[e]),label:AH("subSteps",`${e}Label`),labelPending:AH("subSteps",`${e}LabelPending`)}))));return r=t,Object.keys(r).map((e=>({...r[e],code:e,label:AH("steps",`${e}Label`),labelPending:AH("steps",`${e}LabelPending`)})));var r}(Object.assign(zH)[t])}}),HH="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},KH=[],qH=[],$H="undefined"!=typeof Uint8Array?Uint8Array:Array,WH=!1;function GH(){WH=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)KH[t]=e[t],qH[e.charCodeAt(t)]=t;qH["-".charCodeAt(0)]=62,qH["_".charCodeAt(0)]=63}function JH(e,t,r){for(var n,i,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(KH[(i=n)>>18&63]+KH[i>>12&63]+KH[i>>6&63]+KH[63&i]);return o.join("")}function XH(e){var t;WH||GH();for(var r=e.length,n=r%3,i="",o=[],s=16383,a=0,u=r-n;a<u;a+=s)o.push(JH(e,a,a+s>u?u:a+s));return 1===n?(t=e[r-1],i+=KH[t>>2],i+=KH[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=KH[t>>10],i+=KH[t>>4&63],i+=KH[t<<2&63],i+="="),o.push(i),o.join("")}function YH(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)}function ZH(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}var QH={}.toString,eK=Array.isArray||function(e){return"[object Array]"==QH.call(e)};iK.TYPED_ARRAY_SUPPORT=void 0===HH.TYPED_ARRAY_SUPPORT||HH.TYPED_ARRAY_SUPPORT;var tK=rK();function rK(){return iK.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function nK(e,t){if(rK()<t)throw new RangeError("Invalid typed array length");return iK.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=iK.prototype:(null===e&&(e=new iK(t)),e.length=t),e}function iK(e,t,r){if(!(iK.TYPED_ARRAY_SUPPORT||this instanceof iK))return new iK(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return aK(this,e)}return oK(this,e,t,r)}function oK(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),iK.TYPED_ARRAY_SUPPORT?(e=t).__proto__=iK.prototype:e=uK(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!iK.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|hK(t,r),i=(e=nK(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(lK(t)){var r=0|cK(t.length);return 0===(e=nK(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?nK(e,0):uK(e,t);if("Buffer"===t.type&&eK(t.data))return uK(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function sK(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function aK(e,t){if(sK(t),e=nK(e,t<0?0:0|cK(t)),!iK.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function uK(e,t){var r=t.length<0?0:0|cK(t.length);e=nK(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function cK(e){if(e>=rK())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rK().toString(16)+" bytes");return 0|e}function lK(e){return!(null==e||!e._isBuffer)}function hK(e,t){if(lK(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return DK(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return BK(e).length;default:if(n)return DK(e).length;t=(""+t).toLowerCase(),n=!0}}function fK(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return IK(this,t,r);case"utf8":case"utf-8":return SK(this,t,r);case"ascii":return EK(this,t,r);case"latin1":case"binary":return kK(this,t,r);case"base64":return xK(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AK(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function dK(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function pK(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=iK.from(t,n)),lK(t))return 0===t.length?-1:gK(e,t,r,n,i);if("number"==typeof t)return t&=255,iK.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):gK(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function gK(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function mK(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function yK(e,t,r,n){return UK(DK(t,e.length-r),e,r,n)}function vK(e,t,r,n){return UK(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function bK(e,t,r,n){return vK(e,t,r,n)}function wK(e,t,r,n){return UK(BK(t),e,r,n)}function _K(e,t,r,n){return UK(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function xK(e,t,r){return 0===t&&r===e.length?XH(e):XH(e.slice(t,r))}function SK(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function EK(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function kK(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function IK(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=jK(e[o]);return i}function AK(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function TK(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function PK(e,t,r,n,i,o){if(!lK(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function OK(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function CK(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function MK(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function NK(e,t,r,n,i){return i||MK(e,0,r,4),ZH(e,t,r,n,23,4),r+4}function RK(e,t,r,n,i){return i||MK(e,0,r,8),ZH(e,t,r,n,52,8),r+8}iK.poolSize=8192,iK._augment=function(e){return e.__proto__=iK.prototype,e},iK.from=function(e,t,r){return oK(null,e,t,r)},iK.TYPED_ARRAY_SUPPORT&&(iK.prototype.__proto__=Uint8Array.prototype,iK.__proto__=Uint8Array),iK.alloc=function(e,t,r){return function(e,t,r,n){return sK(t),t<=0?nK(e,t):void 0!==r?"string"==typeof n?nK(e,t).fill(r,n):nK(e,t).fill(r):nK(e,t)}(null,e,t,r)},iK.allocUnsafe=function(e){return aK(null,e)},iK.allocUnsafeSlow=function(e){return aK(null,e)},iK.isBuffer=FK,iK.compare=function(e,t){if(!lK(e)||!lK(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},iK.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},iK.concat=function(e,t){if(!eK(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return iK.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=iK.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!lK(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},iK.byteLength=hK,iK.prototype._isBuffer=!0,iK.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)dK(this,t,t+1);return this},iK.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)dK(this,t,t+3),dK(this,t+1,t+2);return this},iK.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)dK(this,t,t+7),dK(this,t+1,t+6),dK(this,t+2,t+5),dK(this,t+3,t+4);return this},iK.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?SK(this,0,e):fK.apply(this,arguments)},iK.prototype.equals=function(e){if(!lK(e))throw new TypeError("Argument must be a Buffer");return this===e||0===iK.compare(this,e)},iK.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},iK.prototype.compare=function(e,t,r,n,i){if(!lK(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},iK.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},iK.prototype.indexOf=function(e,t,r){return pK(this,e,t,r,!0)},iK.prototype.lastIndexOf=function(e,t,r){return pK(this,e,t,r,!1)},iK.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return mK(this,e,t,r);case"utf8":case"utf-8":return yK(this,e,t,r);case"ascii":return vK(this,e,t,r);case"latin1":case"binary":return bK(this,e,t,r);case"base64":return wK(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _K(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},iK.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},iK.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),iK.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=iK.prototype;else{var i=t-e;r=new iK(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},iK.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||TK(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},iK.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||TK(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},iK.prototype.readUInt8=function(e,t){return t||TK(e,1,this.length),this[e]},iK.prototype.readUInt16LE=function(e,t){return t||TK(e,2,this.length),this[e]|this[e+1]<<8},iK.prototype.readUInt16BE=function(e,t){return t||TK(e,2,this.length),this[e]<<8|this[e+1]},iK.prototype.readUInt32LE=function(e,t){return t||TK(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},iK.prototype.readUInt32BE=function(e,t){return t||TK(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},iK.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||TK(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},iK.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||TK(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},iK.prototype.readInt8=function(e,t){return t||TK(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},iK.prototype.readInt16LE=function(e,t){t||TK(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},iK.prototype.readInt16BE=function(e,t){t||TK(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},iK.prototype.readInt32LE=function(e,t){return t||TK(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},iK.prototype.readInt32BE=function(e,t){return t||TK(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},iK.prototype.readFloatLE=function(e,t){return t||TK(e,4,this.length),YH(this,e,!0,23,4)},iK.prototype.readFloatBE=function(e,t){return t||TK(e,4,this.length),YH(this,e,!1,23,4)},iK.prototype.readDoubleLE=function(e,t){return t||TK(e,8,this.length),YH(this,e,!0,52,8)},iK.prototype.readDoubleBE=function(e,t){return t||TK(e,8,this.length),YH(this,e,!1,52,8)},iK.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||PK(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},iK.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||PK(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},iK.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,1,255,0),iK.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},iK.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,2,65535,0),iK.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):OK(this,e,t,!0),t+2},iK.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,2,65535,0),iK.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):OK(this,e,t,!1),t+2},iK.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,4,4294967295,0),iK.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):CK(this,e,t,!0),t+4},iK.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,4,4294967295,0),iK.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):CK(this,e,t,!1),t+4},iK.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);PK(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},iK.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);PK(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},iK.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,1,127,-128),iK.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},iK.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,2,32767,-32768),iK.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):OK(this,e,t,!0),t+2},iK.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,2,32767,-32768),iK.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):OK(this,e,t,!1),t+2},iK.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,4,2147483647,-2147483648),iK.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):CK(this,e,t,!0),t+4},iK.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||PK(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),iK.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):CK(this,e,t,!1),t+4},iK.prototype.writeFloatLE=function(e,t,r){return NK(this,e,t,!0,r)},iK.prototype.writeFloatBE=function(e,t,r){return NK(this,e,t,!1,r)},iK.prototype.writeDoubleLE=function(e,t,r){return RK(this,e,t,!0,r)},iK.prototype.writeDoubleBE=function(e,t,r){return RK(this,e,t,!1,r)},iK.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!iK.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},iK.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!iK.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=lK(e)?e:DK(new iK(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var LK=/[^+\/0-9A-Za-z-_]/g;function jK(e){return e<16?"0"+e.toString(16):e.toString(16)}function DK(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function BK(e){return function(e){var t,r,n,i,o,s;WH||GH();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new $H(3*a/4-o),n=o>0?a-4:a;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=qH[e.charCodeAt(t)]<<18|qH[e.charCodeAt(t+1)]<<12|qH[e.charCodeAt(t+2)]<<6|qH[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=qH[e.charCodeAt(t)]<<2|qH[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===o&&(i=qH[e.charCodeAt(t)]<<10|qH[e.charCodeAt(t+1)]<<4|qH[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(LK,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function UK(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function FK(e){return null!=e&&(!!e._isBuffer||zK(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&zK(e.slice(0,0))}(e))}function zK(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var VK=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:tK,Buffer:iK,SlowBuffer:function(e){return+e!=e&&(e=0),iK.alloc(+e)},isBuffer:FK});function HK(){throw new Error("setTimeout has not been defined")}function KK(){throw new Error("clearTimeout has not been defined")}var qK=HK,$K=KK;function WK(e){if(qK===setTimeout)return setTimeout(e,0);if((qK===HK||!qK)&&setTimeout)return qK=setTimeout,setTimeout(e,0);try{return qK(e,0)}catch(t){try{return qK.call(null,e,0)}catch(t){return qK.call(this,e,0)}}}"function"==typeof HH.setTimeout&&(qK=setTimeout),"function"==typeof HH.clearTimeout&&($K=clearTimeout);var GK,JK=[],XK=!1,YK=-1;function ZK(){XK&&GK&&(XK=!1,GK.length?JK=GK.concat(JK):YK=-1,JK.length&&QK())}function QK(){if(!XK){var e=WK(ZK);XK=!0;for(var t=JK.length;t;){for(GK=JK,JK=[];++YK<t;)GK&&GK[YK].run();YK=-1,t=JK.length}GK=null,XK=!1,function(e){if($K===clearTimeout)return clearTimeout(e);if(($K===KK||!$K)&&clearTimeout)return $K=clearTimeout,clearTimeout(e);try{$K(e)}catch(t){try{return $K.call(null,e)}catch(t){return $K.call(this,e)}}}(e)}}function eq(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];JK.push(new tq(e,t)),1!==JK.length||XK||WK(QK)}function tq(e,t){this.fun=e,this.array=t}function rq(){}tq.prototype.run=function(){this.fun.apply(null,this.array)};var nq=rq,iq=rq,oq=rq,sq=rq,aq=rq,uq=rq,cq=rq,lq=HH.performance||{},hq=lq.now||lq.mozNow||lq.msNow||lq.oNow||lq.webkitNow||function(){return(new Date).getTime()},fq=new Date,dq={nextTick:eq,title:"browser",browser:!0,env:{},argv:[],version:"11.0.0",versions:{},on:nq,addListener:iq,once:oq,off:sq,removeListener:aq,removeAllListeners:uq,emit:cq,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*hq.call(lq),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-fq)/1e3}},pq=/[^\x20-\x7E]/,gq=/[\x2E\u3002\uFF0E\uFF61]/g,mq={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},yq=Math.floor,vq=String.fromCharCode;
/*! https://mths.be/punycode v1.4.1 by @mathias */function bq(e){throw new RangeError(mq[e])}function wq(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _q(e,t,r){var n=0;for(e=r?yq(e/700):e>>1,e+=yq(e/t);e>455;n+=36)e=yq(e/35);return yq(n+36*e/(e+38))}function xq(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(gq,".")).split("."),(function(e){return pq.test(e)?"xn--"+function(e){var t,r,n,i,o,s,a,u,c,l,h,f,d,p,g,m=[];for(f=(e=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=128,r=0,o=72,s=0;s<f;++s)(h=e[s])<128&&m.push(vq(h));for(n=i=m.length,i&&m.push("-");n<f;){for(a=2147483647,s=0;s<f;++s)(h=e[s])>=t&&h<a&&(a=h);for(a-t>yq((2147483647-r)/(d=n+1))&&bq("overflow"),r+=(a-t)*d,t=a,s=0;s<f;++s)if((h=e[s])<t&&++r>2147483647&&bq("overflow"),h==t){for(u=r,c=36;!(u<(l=c<=o?1:c>=o+26?26:c-o));c+=36)g=u-l,p=36-l,m.push(vq(wq(l+g%p,0))),u=yq(g/p);m.push(vq(wq(u,0))),o=_q(r,d,n==i),r=0,++n}++r,++t}return m.join("")}(e):e})).join(".");return n+i}(e)}var Sq="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Eq=/%[sdj%]/g;function kq(e){if(!Dq(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Pq(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(Eq,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])jq(s)||!Fq(s)?o+=" "+s:o+=" "+Pq(s);return o}function Iq(e,t){if(Bq(HH.process))return function(){return Iq(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var Aq,Tq={};function Pq(e,t){var r={seen:[],stylize:Cq};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Lq(t)?r.showHidden=t:t&&qq(r,t),Bq(r.showHidden)&&(r.showHidden=!1),Bq(r.depth)&&(r.depth=2),Bq(r.colors)&&(r.colors=!1),Bq(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Oq),Mq(r,e,r.depth)}function Oq(e,t){var r=Pq.styles[t];return r?"["+Pq.colors[r][0]+"m"+e+"["+Pq.colors[r][1]+"m":e}function Cq(e,t){return e}function Mq(e,t,r){if(e.customInspect&&t&&Hq(t.inspect)&&t.inspect!==Pq&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Dq(n)||(n=Mq(e,n,r)),n}var i=function(e,t){if(Bq(t))return e.stylize("undefined","undefined");if(Dq(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return"number"==typeof t?e.stylize(""+t,"number"):Lq(t)?e.stylize(""+t,"boolean"):jq(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Vq(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Nq(t);if(0===o.length){if(Hq(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Uq(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(zq(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Vq(t))return Nq(t)}var u,c,l="",h=!1,f=["{","}"];return u=t,Array.isArray(u)&&(h=!0,f=["[","]"]),Hq(t)&&(l=" [Function"+(t.name?": "+t.name:"")+"]"),Uq(t)&&(l=" "+RegExp.prototype.toString.call(t)),zq(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Vq(t)&&(l=" "+Nq(t)),0!==o.length||h&&0!=t.length?r<0?Uq(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=h?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)$q(t,String(s))?o.push(Rq(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Rq(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return Rq(e,t,r,s,n,h)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,f)):f[0]+l+f[1]}function Nq(e){return"["+Error.prototype.toString.call(e)+"]"}function Rq(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),$q(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=jq(r)?Mq(e,u.value,null):Mq(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),Bq(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Lq(e){return"boolean"==typeof e}function jq(e){return null===e}function Dq(e){return"string"==typeof e}function Bq(e){return void 0===e}function Uq(e){return Fq(e)&&"[object RegExp]"===Kq(e)}function Fq(e){return"object"==typeof e&&null!==e}function zq(e){return Fq(e)&&"[object Date]"===Kq(e)}function Vq(e){return Fq(e)&&("[object Error]"===Kq(e)||e instanceof Error)}function Hq(e){return"function"==typeof e}function Kq(e){return Object.prototype.toString.call(e)}function qq(e,t){if(!t||!Fq(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function $q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wq(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Pq.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Pq.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Gq=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Jq(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Xq(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var Yq=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function Zq(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,l,h,f,d=e[u].replace(o,"%20"),p=d.indexOf(r);p>=0?(c=d.substr(0,p),l=d.substr(p+1)):(c=d,l=""),h=decodeURIComponent(c),f=decodeURIComponent(l),Wq(i,h)?Gq(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i}var Qq={parse:d$,resolve:function(e,t){return d$(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?d$(e,!1,!0).resolveObject(t):t},format:function(e){return Dq(e)&&(e=p$({},e)),g$(e)},Url:e$};function e$(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t$=/^([a-z0-9.+-]+:)/i,r$=/:[0-9]*$/,n$=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i$=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),o$=["'"].concat(i$),s$=["%","/","?",";","#"].concat(o$),a$=["/","?","#"],u$=/^[+a-z0-9A-Z_-]{0,63}$/,c$=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,l$={javascript:!0,"javascript:":!0},h$={javascript:!0,"javascript:":!0},f$={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function d$(e,t,r){if(e&&Fq(e)&&e instanceof e$)return e;var n=new e$;return n.parse(e,t,r),n}function p$(e,t,r,n){if(!Dq(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(o);if(a=a.trim(),!n&&1===t.split("#").length){var u=n$.exec(a);if(u)return e.path=a,e.href=a,e.pathname=u[1],u[2]?(e.search=u[2],e.query=r?Zq(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var c,l,h,f,d=t$.exec(a);if(d){var p=(d=d[0]).toLowerCase();e.protocol=p,a=a.substr(d.length)}if(n||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===a.substr(0,2);!g||d&&h$[d]||(a=a.substr(2),e.slashes=!0)}if(!h$[d]&&(g||d&&!f$[d])){var m,y,v=-1;for(c=0;c<a$.length;c++)-1!==(l=a.indexOf(a$[c]))&&(-1===v||l<v)&&(v=l);for(-1!==(y=-1===v?a.lastIndexOf("@"):a.lastIndexOf("@",v))&&(m=a.slice(0,y),a=a.slice(y+1),e.auth=decodeURIComponent(m)),v=-1,c=0;c<s$.length;c++)-1!==(l=a.indexOf(s$[c]))&&(-1===v||l<v)&&(v=l);-1===v&&(v=a.length),e.host=a.slice(0,v),a=a.slice(v),m$(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var w=e.hostname.split(/\./);for(c=0,h=w.length;c<h;c++){var _=w[c];if(_&&!_.match(u$)){for(var x="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?x+="x":x+=_[S];if(!x.match(u$)){var k=w.slice(0,c),I=w.slice(c+1),A=_.match(c$);A&&(k.push(A[1]),I.unshift(A[2])),I.length&&(a="/"+I.join(".")+a),e.hostname=k.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=xq(e.hostname)),f=e.port?":"+e.port:"";var T=e.hostname||"";e.host=T+f,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!l$[p])for(c=0,h=o$.length;c<h;c++){var P=o$[c];if(-1!==a.indexOf(P)){var O=encodeURIComponent(P);O===P&&(O=escape(P)),a=a.split(P).join(O)}}var C=a.indexOf("#");-1!==C&&(e.hash=a.substr(C),a=a.slice(0,C));var M=a.indexOf("?");if(-1!==M?(e.search=a.substr(M),e.query=a.substr(M+1),r&&(e.query=Zq(e.query)),a=a.slice(0,M)):r&&(e.search="",e.query={}),a&&(e.pathname=a),f$[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){f=e.pathname||"";var N=e.search||"";e.path=f+N}return e.href=g$(e),e}function g$(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&Fq(e.query)&&Object.keys(e.query).length&&(s=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Xq(Yq(e),(function(n){var i=encodeURIComponent(Jq(n))+r;return Gq(e[n])?Xq(e[n],(function(e){return i+encodeURIComponent(Jq(e))})).join(t):i+encodeURIComponent(Jq(e[n]))})).join(t):""}(e.query));var a=e.search||s&&"?"+s||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||f$[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),r+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i}function m$(e){var t=e.host,r=r$.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}e$.prototype.parse=function(e,t,r){return p$(this,e,t,r)},e$.prototype.format=function(){return g$(this)},e$.prototype.resolve=function(e){return this.resolveObject(d$(e,!1,!0)).format()},e$.prototype.resolveObject=function(e){if(Dq(e)){var t=new e$;t.parse(e,!1,!0),e=t}for(var r,n=new e$,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(n[c]=e[c])}return f$[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!f$[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var f=l[h];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||h$[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g,m=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=y||m||n.host&&e.pathname,b=v,w=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!f$[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),v=v&&(""===r[0]||""===w[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(null!=e.search)return _&&(n.hostname=n.host=w.shift(),(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),n.search=e.search,n.query=e.query,jq(n.pathname)&&jq(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===x||".."===x)||""===x,E=0,k=w.length;k>=0;k--)"."===(x=w[k])?w.splice(k,1):".."===x?(w.splice(k,1),E++):E&&(w.splice(k,1),E--);if(!v&&!b)for(;E--;E)w.unshift("..");!v||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(n.hostname=n.host=I?"":w.length?w.shift():"",(g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=g.shift(),n.host=n.hostname=g.shift())),(v=v||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),jq(n.pathname)&&jq(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},e$.prototype.parseHost=function(){return m$(this)};var y$,v$,b$={},w$=P$(HH.fetch)&&P$(HH.ReadableStream);function _$(e){v$||(v$=new HH.XMLHttpRequest).open("GET",HH.location.host?"/":"https://example.com");try{return v$.responseType=e,v$.responseType===e}catch(e){return!1}}var x$=void 0!==HH.ArrayBuffer,S$=x$&&P$(HH.ArrayBuffer.prototype.slice),E$=x$&&_$("arraybuffer"),k$=!w$&&S$&&_$("ms-stream"),I$=!w$&&x$&&_$("moz-chunked-arraybuffer"),A$=P$(v$.overrideMimeType),T$=P$(HH.VBArray);function P$(e){return"function"==typeof e}function O$(){}function C$(){C$.init.call(this)}function M$(e){return void 0===e._maxListeners?C$.defaultMaxListeners:e._maxListeners}function N$(e,t,r){if(t)e.call(r);else for(var n=e.length,i=z$(e,n),o=0;o<n;++o)i[o].call(r)}function R$(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=z$(e,i),s=0;s<i;++s)o[s].call(r,n)}function L$(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=z$(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function j$(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=z$(e,s),u=0;u<s;++u)a[u].call(r,n,i,o)}function D$(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=z$(e,i),s=0;s<i;++s)o[s].apply(r,n)}function B$(e,t,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]):(o=e._events=new O$,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),!s.warned&&(i=M$(e))&&i>0&&s.length>i){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=r,++e._eventsCount;return e}function U$(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function F$(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function z$(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function V$(){this.head=null,this.tail=null,this.length=0}v$=null,O$.prototype=Object.create(null),C$.EventEmitter=C$,C$.usingDomains=!1,C$.prototype.domain=void 0,C$.prototype._events=void 0,C$.prototype._maxListeners=void 0,C$.defaultMaxListeners=10,C$.init=function(){this.domain=null,C$.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new O$,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C$.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},C$.prototype.getMaxListeners=function(){return M$(this)},C$.prototype.emit=function(e){var t,r,n,i,o,s,a,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:N$(r,l,this);break;case 2:R$(r,l,this,arguments[1]);break;case 3:L$(r,l,this,arguments[1],arguments[2]);break;case 4:j$(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];D$(r,l,this,i)}return!0},C$.prototype.addListener=function(e,t){return B$(this,e,t,!1)},C$.prototype.on=C$.prototype.addListener,C$.prototype.prependListener=function(e,t){return B$(this,e,t,!0)},C$.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,U$(this,e,t)),this},C$.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,U$(this,e,t)),this},C$.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new O$:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new O$,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,s||t)}return this},C$.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new O$,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new O$:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new O$,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},C$.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},C$.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):F$.call(e,t)},C$.prototype.listenerCount=F$,C$.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},V$.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},V$.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},V$.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},V$.prototype.clear=function(){this.head=this.tail=null,this.length=0},V$.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},V$.prototype.concat=function(e){if(0===this.length)return iK.alloc(0);if(1===this.length)return this.head.data;for(var t=iK.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var H$=iK.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function K$(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!H$(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=$$;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=W$;break;default:return void(this.write=q$)}this.charBuffer=new iK(6),this.charReceived=0,this.charLength=0}function q$(e){return e.toString(this.encoding)}function $$(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function W$(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}K$.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((n=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(n=t.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},K$.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},K$.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t};var G$=Object.freeze({__proto__:null,StringDecoder:K$});Y$.ReadableState=X$;var J$=function(e){return Bq(Aq)&&(Aq=""),e=e.toUpperCase(),Tq[e]||(new RegExp("\\b"+e+"\\b","i").test(Aq)?Tq[e]=function(){var t=kq.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:Tq[e]=function(){}),Tq[e]}("stream");function X$(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof EW&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new V$,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new K$(e.encoding),this.encoding=e.encoding)}function Y$(e){if(!(this instanceof Y$))return new Y$(e);this._readableState=new X$(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),C$.call(this)}function Z$(e,t,r,n,i){var o=function(e,t){var r=null;return FK(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,eW(e)}}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&eW(e))),function(e,t){t.readingMore||(t.readingMore=!0,eq(rW,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function Q$(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function eW(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(J$("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?eq(tW,e):tW(e))}function tW(e){J$("emit readable"),e.emit("readable"),oW(e)}function rW(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(J$("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function nW(e){J$("readable nexttick read 0"),e.read(0)}function iW(e,t){t.reading||(J$("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),oW(e),t.flowing&&!t.reading&&e.read(0)}function oW(e){var t=e._readableState;for(J$("flow",t.flowing);t.flowing&&null!==e.read(););}function sW(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=iK.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0==(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function aW(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,eq(uW,t,e))}function uW(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function cW(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function lW(){}function hW(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function fW(e,t){Object.defineProperty(this,"buffer",{get:Iq((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof EW&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?eq(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=yW(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||mW(e,r),n?eq(gW,e,r,o,i):gW(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new wW(this)}function dW(e){if(!(this instanceof dW||this instanceof EW))return new dW(e);this._writableState=new fW(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),C$.call(this)}function pW(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function gW(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),bW(e,t)}function mW(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;pW(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new wW(t)}else{for(;r;){var a=r.chunk,u=r.encoding,c=r.callback;if(pW(e,t,!1,t.objectMode?1:a.length,a,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function yW(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function vW(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function bW(e,t){var r=yW(t);return r&&(0===t.pendingcb?(vW(e,t),t.finished=!0,e.emit("finish")):vW(e,t)),r}function wW(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Sq(Y$,C$),Y$.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=iK.from(e,t),t=""),Z$(this,r,e,t,!1)},Y$.prototype.unshift=function(e){return Z$(this,this._readableState,e,"",!0)},Y$.prototype.isPaused=function(){return!1===this._readableState.flowing},Y$.prototype.setEncoding=function(e){return this._readableState.decoder=new K$(e),this._readableState.encoding=e,this},Y$.prototype.read=function(e){J$("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return J$("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?aW(this):eW(this),null;if(0===(e=Q$(e,t))&&t.ended)return 0===t.length&&aW(this),null;var n,i=t.needReadable;return J$("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&J$("length less than watermark",i=!0),t.ended||t.reading?J$("reading or ended",i=!1):i&&(J$("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Q$(r,t))),null===(n=e>0?sW(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&aW(this)),null!==n&&this.emit("data",n),n},Y$.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Y$.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,J$("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end?c:s;function o(e){J$("onunpipe"),e===r&&c()}function s(){J$("onend"),e.end()}n.endEmitted?eq(i):r.once("end",i),e.on("unpipe",o);var a=function(e){return function(){var t=e._readableState;J$("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,oW(e))}}(r);e.on("drain",a);var u=!1;function c(){J$("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",c),r.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||a()}var l=!1;function h(t){J$("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==cW(n.pipes,e))&&!u&&(J$("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function f(t){J$("onerror",t),g(),e.removeListener("error",f),0===("error",e.listeners("error").length)&&e.emit("error",t)}function d(){e.removeListener("finish",p),g()}function p(){J$("onfinish"),e.removeListener("close",d),g()}function g(){J$("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(J$("pipe resume"),r.resume()),e},Y$.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=cW(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},Y$.prototype.on=function(e,t){var r=C$.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&eW(this):eq(nW,this))}return r},Y$.prototype.addListener=Y$.prototype.on,Y$.prototype.resume=function(){var e=this._readableState;return e.flowing||(J$("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,eq(iW,e,t))}(this,e)),this},Y$.prototype.pause=function(){return J$("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(J$("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Y$.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(J$("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){J$("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){J$("wrapped _read",t),r&&(r=!1,e.resume())},n},Y$._fromList=sW,dW.WritableState=fW,Sq(dW,C$),fW.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},dW.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},dW.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),iK.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=lW),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),eq(t,r)}(this,r):function(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):iK.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),eq(n,o),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=iK.from(t,r)),t}(t,r,n),iK.isBuffer(r)&&(n="buffer");var o=t.objectMode?1:r.length;t.length+=o;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new hW(r,n,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else pW(e,t,!1,o,r,n,i);return s}(this,n,e,t,r)),i},dW.prototype.cork=function(){this._writableState.corked++},dW.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||mW(this,e))},dW.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},dW.prototype._write=function(e,t,r){r(new Error("not implemented"))},dW.prototype._writev=null,dW.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,bW(e,t),r&&(t.finished?eq(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},Sq(EW,Y$);for(var _W=Object.keys(dW.prototype),xW=0;xW<_W.length;xW++){var SW=_W[xW];EW.prototype[SW]||(EW.prototype[SW]=dW.prototype[SW])}function EW(e){if(!(this instanceof EW))return new EW(e);Y$.call(this,e),dW.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",kW)}function kW(){this.allowHalfOpen||this._writableState.ended||eq(IW,this)}function IW(e){e.end()}function AW(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function TW(e){if(!(this instanceof TW))return new TW(e);EW.call(this,e),this._transformState=new AW(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){PW(t,e)})):PW(t)}))}function PW(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function OW(e){if(!(this instanceof OW))return new OW(e);TW.call(this,e)}function CW(){C$.call(this)}Sq(TW,EW),TW.prototype.push=function(e,t){return this._transformState.needTransform=!1,EW.prototype.push.call(this,e,t)},TW.prototype._transform=function(e,t,r){throw new Error("Not implemented")},TW.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},TW.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Sq(OW,TW),OW.prototype._transform=function(e,t,r){r(null,e)},Sq(CW,C$),CW.Readable=Y$,CW.Writable=dW,CW.Duplex=EW,CW.Transform=TW,CW.PassThrough=OW,CW.Stream=CW,CW.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===C$.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};function MW(e,t,r){var n,i=this;if(Y$.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){eq((function(){i.emit("close")}))})),"fetch"===r){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var o,s,a=t.headers[Symbol.iterator]();o=(s=a.next()).value,!s.done;)i.headers[o[0].toLowerCase()]=o[1],i.rawHeaders.push(o[0],o[1]);var u=t.body.getReader();(n=function(){u.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new iK(e.value)),n()))}))})()}else if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(t[2])):void 0!==i.headers[r]?i.headers[r]+=", "+t[2]:i.headers[r]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!A$){var c=i.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase())}i._charset||(i._charset="utf-8")}}function NW(e){var t,r=this;dW.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new iK(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!A$;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return w$&&t?"fetch":I$?"moz-chunked-arraybuffer":k$?"ms-stream":E$&&e?"arraybuffer":T$&&e?"text:vbarray":"text"}(t,n),r.on("finish",(function(){r._onFinish()}))}Sq(MW,Y$),MW.prototype._read=function(){},MW.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(4!==t.readyState)break;try{r=new HH.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new iK(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new iK(n.length),o=0;o<n.length;o++)i[o]=255&n.charCodeAt(o);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(4!==t.readyState||!t.response)break;r=t.response,e.push(new iK(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,3!==t.readyState||!r)break;e.push(new iK(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,3!==t.readyState)break;var s=new HH.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new iK(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r)}4===e._xhr.readyState&&"ms-stream"!==e._mode&&e.push(null)},Sq(NW,dW);var RW=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];function LW(e,t){"string"==typeof e&&(e=d$(e));var r=-1===HH.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new NW(e);return t&&a.on("response",t),a}function jW(){}NW.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===RW.indexOf(r)&&(this._headers[r]={name:e,value:t})},NW.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},NW.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},NW.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,r=e._opts,n=e._headers;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method||(t=function(){if(void 0!==y$)return y$;try{new HH.Blob([new ArrayBuffer(1)]),y$=!0}catch(e){y$=!1}return y$}()?new HH.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(FK(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(n["content-type"]||{}).value||""}):iK.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(n).map((function(e){return[n[e].name,n[e].value]}));HH.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var o=e._xhr=new HH.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(t){return void eq((function(){e.emit("error",t)}))}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach((function(e){o.setRequestHeader(n[e].name,n[e].value)})),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case 3:case 4:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(t)}catch(t){return void eq((function(){e.emit("error",t)}))}}}},NW.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},NW.prototype._connect=function(){var e=this;e._destroyed||(e._response=new MW(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},NW.prototype._write=function(e,t,r){this._body.push(e),r()},NW.prototype.abort=NW.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},NW.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),dW.prototype.end.call(this,e,t,r)},NW.prototype.flushHeaders=function(){},NW.prototype.setTimeout=function(){},NW.prototype.setNoDelay=function(){},NW.prototype.setSocketKeepAlive=function(){},jW.defaultMaxSockets=4;var DW={request:LW,get:function(e,t){var r=LW(e,t);return r.end(),r},Agent:jW,METHODS:["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},BW=b$.spawn,UW=function(){var e,t,r=this,n=DW,i=DW,o={},s=!1,a={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u={},c={},l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],h=["TRACE","TRACK","CONNECT"],f=!1,d=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1,this.open=function(e,t,r,n,i){if(this.abort(),d=!1,!function(e){return e&&-1===h.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");o={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},g(this.OPENED)},this.setDisableHeaderCheck=function(e){s=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return s||e&&-1===l.indexOf(e.toLowerCase())}(e)){if(f)throw new Error("INVALID_STATE_ERR: send flag is true");e=c[e.toLowerCase()]||e,c[e.toLowerCase()]=e,u[e]=u[e]?u[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!d?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||d)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&c[e.toLowerCase()]?u[c[e.toLowerCase()]]:""},this.send=function(s){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(f)throw new Error("INVALID_STATE_ERR: send has already been called");var l,h=!1,p=!1,m=Qq.parse(o.url);switch(m.protocol){case"https:":h=!0;case"http:":l=m.hostname;break;case"file:":p=!0;break;case void 0:case null:case"":l="localhost";break;default:throw new Error("Protocol not supported.")}if(p){if("GET"!==o.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)b$.readFile(m.pathname,"utf8",(function(e,t){e?r.handleError(e):(r.status=200,r.responseText=t,g(r.DONE))}));else try{this.responseText=b$.readFileSync(m.pathname,"utf8"),this.status=200,g(r.DONE)}catch(e){this.handleError(e)}}else{var y=m.port||(h?443:80),v=m.pathname+(m.search?m.search:"");for(var b in a)c[b.toLowerCase()]||(u[b]=a[b]);if(u.Host=l,h&&443===y||80===y||(u.Host+=":"+m.port),o.user){void 0===o.password&&(o.password="");var w=new iK(o.user+":"+o.password);u.Authorization="Basic "+w.toString("base64")}"GET"===o.method||"HEAD"===o.method?s=null:s?(u["Content-Length"]=FK(s)?s.length:iK.byteLength(s),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===o.method&&(u["Content-Length"]=0);var _={host:l,port:y,path:v,method:o.method,headers:u,agent:!1,withCredentials:r.withCredentials};if(d=!1,o.async){var x=h?i.request:n.request;f=!0,r.dispatchEvent("readystatechange");var S=function(e){r.handleError(e)};e=x(_,(function n(i){if(301!==(t=i).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),g(r.HEADERS_RECEIVED),r.status=t.statusCode,t.on("data",(function(e){e&&(r.responseText+=e),f&&g(r.LOADING)})),t.on("end",(function(){f&&(g(r.DONE),f=!1)})),t.on("error",(function(e){r.handleError(e)}));else{o.url=t.headers.location;var s=Qq.parse(o.url);l=s.hostname;var a={hostname:s.hostname,port:s.port,path:s.path,method:303===t.statusCode?"GET":o.method,headers:u,withCredentials:r.withCredentials};(e=x(a,n).on("error",S)).end()}})).on("error",S),s&&e.write(s),e.end(),r.dispatchEvent("loadstart")}else{var E=".node-xmlhttprequest-content-"+dq.pid,k=".node-xmlhttprequest-sync-"+dq.pid;b$.writeFileSync(k,"","utf8");for(var I="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(_)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+E+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+k+"');});response.on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+k+"');});}).on('error', function(error) {fs.writeFileSync('"+E+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+k+"');});"+(s?"req.write('"+JSON.stringify(s).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=BW(dq.argv[0],["-e",I]);b$.existsSync(k););var T=JSON.parse(b$.readFileSync(E,"utf8"));A.stdin.end(),b$.unlinkSync(E),T.err?r.handleError(T.err):(t=T.data,r.status=T.data.statusCode,r.responseText=T.data.text,g(r.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,d=!0,g(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),u=a,this.status=0,this.responseText="",this.responseXML="",d=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!f||this.readyState===this.DONE||(f=!1,g(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof r["on"+e]&&r["on"+e](),e in p)for(var t=0,n=p[e].length;t<n;t++)p[e][t].call(r)};var g=function(e){e!=r.LOADING&&r.readyState===e||(r.readyState=e,(o.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState!==r.DONE||d||(r.dispatchEvent("load"),r.dispatchEvent("loadend")))}},FW=6e4,zW=60*FW,VW=24*zW,HW=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*VW;case"hours":case"hour":case"hrs":case"hr":case"h":return r*zW;case"minutes":case"minute":case"mins":case"min":case"m":return r*FW;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=VW?KW(e,t,VW,"day"):t>=zW?KW(e,t,zW,"hour"):t>=FW?KW(e,t,FW,"minute"):t>=1e3?KW(e,t,1e3,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=VW?Math.round(e/VW)+"d":t>=zW?Math.round(e/zW)+"h":t>=FW?Math.round(e/FW)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function KW(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var qW=DH((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==dq&&"env"in dq&&(e=dq.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=function(e){function t(e){let n,i=null;function o(...e){if(!o.enabled)return;const r=o,i=Number(new Date),s=i-(n||i);r.diff=s,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];n=o.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===i?t.enabled(e):i,set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=HW,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}));qW.formatArgs,qW.save,qW.load,qW.useColors,qW.storage,qW.destroy,qW.colors,qW.log;const $W=qW("request");function WW(e){return new Promise(((t,r)=>{let n=e.url;n||r(new Error("URL is missing")),"http://"===n.substr(0,7)&&(console.warn(`Upgrading requested url ${n} to https protocol.`),n=n.replace("http://","https://"));const i=new("undefined"==typeof XMLHttpRequest?UW:XMLHttpRequest);i.onload=()=>{if(i.status>=200&&i.status<300)t(i.responseText);else{const e=`Error fetching url:${n}; status code:${i.status}`;r(new Error(e))}},i.ontimeout=e=>{console.log("ontimeout",e)},i.onreadystatechange=()=>{404===i.status&&r(new Error(`Error fetching url:${n}; status code:${i.status}`))},i.onerror=()=>{$W(`Request failed with error ${i.responseText}`),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}))}var GW,JW;!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(GW||(GW={})),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(JW||(JW={}));const XW={[JW.Bitcoin]:{code:JW.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}},[JW.Ethmain]:{code:JW.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}},[JW.Ethropst]:{code:JW.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}},[JW.Ethrinkeby]:{code:JW.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}},[JW.Mocknet]:{code:JW.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}},[JW.Regtest]:{code:JW.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}},[JW.Testnet]:{code:JW.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}};function YW(e){return e!==XW.bitcoin.code&&e!==XW.ethmain.code}function ZW(e,t,r=[]){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if((e=Array.from(e)).length<t)throw new Error("Could not retrieve tx data");const n=e.map(((e,t)=>e.then((()=>t)).catch((e=>{throw t}))));return Promise.race(n).then((n=>(e.splice(n,1)[0].then((e=>r.push(e))),1===t?r:ZW(e,t-1,r)))).catch((n=>(e.splice(n,1),ZW(e,t,r))))}))}function QW({explorerAPI:e,transactionIdPlaceholder:t="{transaction_id}",transactionId:r="",isTestApi:n=!1}){const{serviceURL:i}=e;let o="string"==typeof i?i:n?i.test:i.main;return o=o.replace(t,r),o=function(e,t){if(!t.key)return e;if(t.key&&!t.keyPropertyName)throw new Error(`No keyPropertyName defined for explorerAPI ${t.serviceName}`);return function(e,t,r){const n=e.includes("?")?"&":"?";return`${e}${n}${t}=${r}`}(e,t.keyPropertyName,t.key)}(o,e),o}function eG(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return yield new Promise(((t,r)=>{const n=e.url;n||r(new Error("URL is missing"));const i=new("undefined"==typeof XMLHttpRequest?UW:XMLHttpRequest);i.onload=()=>{if(i.status>=200&&i.status<300)t(i.responseText);else{console.log(i.responseText);const e=`Error fetching url:${n}; status code:${i.status}`;r(new Error(e))}},i.ontimeout=e=>{console.log("ontimeout",e)},i.onreadystatechange=()=>{404===i.status&&r(new Error(`Error fetching url:${n}; status code:${i.status}`))},i.onerror=()=>{console.error(`Request failed with error ${i.responseText}`),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}))}))}function tG(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function rG(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(tG(e,n))return e.slice(n.length)}return e}var nG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};const iG="https://api.etherscan.io/api?module=proxy",oG="https://api-ropsten.etherscan.io/api?module=proxy",sG={serviceURL:{main:`${iG}&action=eth_getTransactionByHash&txhash={transaction_id}`,test:`${oG}&action=eth_getTransactionByHash&txhash={transaction_id}`},serviceName:GW.etherscan,parsingFunction:function({jsonResponse:e,chain:t,key:r,keyPropertyName:n}){return nG(this,void 0,void 0,(function*(){const i={serviceURL:{main:`${iG}&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}`,test:`${oG}&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}`}},o={serviceURL:{main:`${iG}&action=eth_blockNumber`,test:`${oG}&action=eth_blockNumber`}},s=yield function(e,t){return nG(this,void 0,void 0,(function*(){const s=e.result.blockNumber,a=QW({explorerAPI:Object.assign(Object.assign({},i),{key:r,keyPropertyName:n}),transactionId:s,isTestApi:YW(t)});try{const e=yield eG({url:a}),i=JSON.parse(e).result;return yield function(e,t){return nG(this,void 0,void 0,(function*(){const i=QW({explorerAPI:Object.assign(Object.assign({},o),{key:r,keyPropertyName:n}),isTestApi:YW(e)});let s;try{s=yield eG({url:i})}catch(e){throw new Error("Unable to get remote hash")}const a=JSON.parse(s).result;if(a-t<1)throw new Error("Not enough");return a}))}(t,s),i}catch(e){throw new Error("Unable to get remote hash")}}))}(e,t);return function(e,t){const r=e.result,n=new Date(1e3*parseInt(t.timestamp,16)),i=r.from;return{remoteHash:rG(r.input,XW.ethmain.prefixes),issuingAddress:i,time:n,revokedAddresses:[]}}(e,s)}))},priority:-1};function aG(e){return""===e?"":function(e){const t=Date.parse(e);if(t)return new Date(t);const r=function(e){let t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));const r=e.slice(-5);let n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t.getTime()}(e);return r||function(e){let t,r;const n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}(`${e}`)}function uG(e){return new Date(1e3*e)}const cG={serviceURL:{main:"https://api.blockcypher.com/v1/eth/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/beth/test/txs/{transaction_id}?limit=500"},serviceName:GW.blockcypher,parsingFunction:function({jsonResponse:e}){if(e.confirmations<1)throw new Error("Not enough");const t=aG(e.received),r=e.outputs,n=r[r.length-1];let i=e.inputs[0].addresses[0];const o=rG(n.script,XW.ethmain.prefixes);return i=function(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(!tG(e,n))return`${n}${e}`}return e}(i,XW.ethmain.prefixes),{remoteHash:o,issuingAddress:i,time:t,revokedAddresses:r.filter((e=>!!e.spent_by)).map((e=>e.addresses[0]))}},priority:-1},lG={serviceURL:{main:"https://blockstream.info/api/tx/{transaction_id}",test:"https://blockstream.info/testnet/api/tx/{transaction_id}"},serviceName:GW.blockstream,parsingFunction:function({jsonResponse:e}){if(!e.status.confirmed)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockstream API");const t=uG(e.status.block_time),r=e.vout,n=r[r.length-1],i=e.vout[0].scriptpubkey_address;return{remoteHash:rG(n.scriptpubkey,XW.bitcoin.prefixes),issuingAddress:i,time:t,revokedAddresses:r.filter((e=>!!e.scriptpubkey_address)).map((e=>e.scriptpubkey_address))}},priority:-1},hG={serviceURL:{main:"https://api.blockcypher.com/v1/btc/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/btc/test3/txs/{transaction_id}?limit=500"},serviceName:GW.blockcypher,parsingFunction:function({jsonResponse:e}){if(e.confirmations<1)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockcypher API");const t=aG(e.received),r=e.outputs,n=r[r.length-1],i=e.inputs[0].addresses[0];return{remoteHash:rG(n.script,XW.bitcoin.prefixes),issuingAddress:i,time:t,revokedAddresses:r.filter((e=>!!e.spent_by)).map((e=>e.addresses[0]))}},priority:-1};var fG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function dG(e){return e.map((e=>({getTxData:(t,r)=>fG(this,void 0,void 0,(function*(){return yield function(e,t,r){return fG(this,void 0,void 0,(function*(){const n=QW({explorerAPI:e,transactionId:t,isTestApi:YW(r)});try{const t=yield eG({url:n});return yield e.parsingFunction(Object.assign({jsonResponse:JSON.parse(t),chain:r},e))}catch(e){throw new Error("Unable to get remote hash")}}))}(e,t,r)})),priority:e.priority})))}const pG=[hG,lG],gG=[sG,cG];function mG({serviceUrl:e,transactionId:t}){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const r={method:"eth_getTransactionByHash",jsonrpc:"2.0",id:"getbyhash",params:["0x"+t]},n=yield eG({url:e,body:r,method:"POST"}),i=JSON.parse(n),o={method:"eth_getBlockByNumber",jsonrpc:"2.0",id:"blockbynumber",params:[i.result.blockNumber,!0]},s=yield eG({url:e,body:o,method:"POST"}),a=JSON.parse(s),u=i.result,c=a.result,l=new Date(1e3*parseInt(c.timestamp,16)),h=u.from;return{remoteHash:rG(u.input,["0x"]),issuingAddress:h,time:l,revokedAddresses:[]}}))}function yG({serviceUrl:e,transactionId:t}){return function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const r={method:"getrawtransaction",jsonrpc:"2.0",id:"rpctest",params:[t,!0]},n=yield eG({url:e,body:r,method:"POST"}),i=JSON.parse(n).result;return{issuingAddress:i.vout[0].scriptPubKey.addresses[0],remoteHash:rG(i.vout[1].scriptPubKey.asm,["6a20","OP_RETURN "]),time:uG(i.blocktime),revokedAddresses:i.vout.filter((e=>!!e.scriptPubKey.addresses)).map((e=>e.scriptPubKey.addresses)).flat()}}))}const vG=[];function bG(e=[],t=[],r=!1){const n=e.map((e=>e.serviceName)).filter((e=>!!e)).filter((e=>!!GW[e]));return n.length?t.reduce(((t,i)=>{if(n.includes(i.serviceName)){const r=Object.assign({},i),n=e.find((e=>e.serviceName===i.serviceName));if(function(e){if(e.key&&!e.keyPropertyName)throw new Error(`Property keyPropertyName is not set for ${e.serviceName}. Cannot pass the key property to the service.`);return!0}(n)){const i=Object.assign(r,n);t.push(i);const o=e.findIndex((e=>e.serviceName===i.serviceName));vG.includes(o)||vG.push(o)}}else t.push(i);return r&&function(e,t){t.forEach((t=>e.splice(t,1)))}(e,vG),t}),[]):t}function wG(e){return e.map((e=>(e.parsingFunction||(e.parsingFunction="btc"===e.chainType?yG:mG),e))).map((e=>({getTxData:t=>function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){return yield e.parsingFunction(Object.assign(Object.assign({},e),{transactionId:t}))})),priority:e.priority})))}var _G=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function xG(e,t){var r;switch(e){case XW[JW.Bitcoin].code:case XW[JW.Regtest].code:case XW[JW.Testnet].code:case XW[JW.Mocknet].code:return t.bitcoin;case XW[JW.Ethmain].code:case XW[JW.Ethropst].code:case XW[JW.Ethrinkeby].code:return t.ethereum;default:if(!(null===(r=t.custom)||void 0===r?void 0:r.length))throw new Error("Chain is not natively supported. Use custom explorers to retrieve tx data.");return t.custom}}function SG(e,t,r,n){return _G(this,void 0,void 0,(function*(){try{const i=function(e,t,r){if(1>e.length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");const n=[],i=e.length;for(let o=0;o<i;o++)n.push(e[o].getTxData(t,r));return n}(e[t],r,n);return yield function(e){return _G(this,void 0,void 0,(function*(){let t;try{t=yield ZW(e,1)}catch(e){throw new Error(`Transaction lookup error: ${e.message}`)}if(!t||0===t.length)throw new Error("Could not confirm transaction data.");const r=t[0];for(let e=1;e<t.length;e++){const n=t[e];if(r.issuingAddress!==n.issuingAddress)throw new Error("Issuing addresses do not match consistently");if(r.remoteHash!==n.remoteHash)throw new Error("Remote hashes do not match consistently")}return r}))}(i)}catch(i){if(t<e.length-1)return t++,yield SG(e,t,r,n);throw i}}))}function EG(e){return""===e?0:function(e){const t=Date.parse(e);if(t)return new Date(t);const r=function(e){let t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));const r=e.slice(-5);let n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t}(e);return r||function(e){let t,r;const n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}(`${e}`).getTime()}function kG(e,t=null){const r=e.created?EG(e.created):null,n=e.revoked?EG(e.revoked):null,i=e.expires?EG(e.expires):null;let o=t;return t||(o=(e.id||e.publicKey).replace("ecdsa-koblitz-pubkey:","")),new CH(o,r,n,i)}var IG={addresses:kH,certificates:VH,chains:RH,i18n:TH,verifier:Object.freeze({__proto__:null,getIssuerProfile:function(e){return aH(this,void 0,void 0,(function*(){const t=AH("errors","getIssuerProfile");if(!e)throw new NH("getIssuerProfile",`${t} - ${AH("errors","issuerProfileNotSet")}`);if("object"==typeof e&&(e=e.id),!function(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}(e))throw new NH("getIssuerProfile",`${t} - ${AH("errors","issuerProfileNotSet")}`);let r=yield WW({url:e}).catch((()=>{throw new NH("getIssuerProfile",t)}));if(r=JSON.parse(r),!function(e){const{issuer_key:t,revocation_key:r,issuerKeys:n,revocationKeys:i}=e;return!(!t||!r)||!(!n||!i)}(r))throw new NH("getIssuerProfile",`${t} - ${AH("errors","issuerProfileInvalid")}`);return r}))},getRevokedAssertions:function(e,t){var r;return aH(this,void 0,void 0,(function*(){if(!e)return[];const n=AH("errors","getRevokedAssertions");t&&(e=function(e,t,r){const n=e.includes("?")?"&":"?";return`${e}${n}assertionId=${r}`}(e,0,encodeURIComponent(t)));const i=yield WW({url:e}).catch((()=>{throw new NH("parseIssuerKeys",n)})),o=JSON.parse(i);return null!==(r=o.revokedAssertions)&&void 0!==r?r:[]}))},lookForTx:function({transactionId:e,chain:t,explorerAPIs:r=[]}){return _G(this,void 0,void 0,(function*(){const n=function(e){const{bitcoin:t,ethereum:r}={bitcoin:dG(bG(n=e,pG)),ethereum:dG(bG(n,gG))};var n;const{custom:i}=function(e){return{custom:wG(e)}}(e.filter((e=>"rpc"===e.apiType)));return{bitcoin:t,ethereum:r,custom:[...i,...dG(e.filter((e=>"rpc"!==e.apiType)))]}}(r),i=function({defaultAPIs:e,customAPIs:t}){const r=[e];if(null==t?void 0:t.length){const e=t[0].priority;r.splice(e,0,t)}if(1>e.concat(t).length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");return r}({defaultAPIs:xG(t,n),customAPIs:n.custom});return yield SG(i,0,e,t)}))},parseIssuerKeys:function(e){try{const t={};if("@context"in e){const r=e.publicKey||e.publicKeys;for(let e=0;e<r.length;e++){const n=kG(r[e]);t[n.publicKey]=n}}else{const r=kG({},(e.issuerKeys||[])[0].key);t[r.publicKey]=r}return t}catch(e){throw new NH("parseIssuerKeys",AH("errors","parseIssuerKeys"))}},parseRevocationKey:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"revocationKeys")&&e.revocationKeys.length>0?e.revocationKeys[0].key:null}})};const AG={1:function(e){var t,r;const n=e.certificate||e.document.certificate,i=e.recipient||e.document.recipient,o=e.document.assertion,s=e.receipt,a=void 0===s?hH.V1_1:hH.V1_2;let{image:u,description:c,issuer:l,subtitle:h}=n;const f=i.publicKey,d=IG.certificates.getChain(f),p=o.expires,g=o.uid,m=o.issuedOn,y=o.metadataJson,v=`${i.givenName} ${i.familyName}`,b=o.id,w=i.revocationKey||null,_=l.image,x=e.document.signature,S=function(e,t){const r=[];switch(t){case hH.V1_1:case hH.V1_2:if(e.constructor===Array)for(const t in e){const n=e[t],i="jobTitle"in n?n.jobTitle:null,o="name"in n?n.name:null,s=new MH(n.image,i,o);r.push(s)}else{const t=new MH(e,null,null);r.push(t)}break;case hH.V2_0:for(const t in e){const n=e[t],i=new MH(n.image,n.jobTitle,n.name);r.push(i)}}return r}(null===(r=null===(t=e.document)||void 0===t?void 0:t.assertion)||void 0===r?void 0:r["image:signature"],a);return"object"==typeof h&&(h=h.display?h.content:""),{certificateImage:u,chain:d,description:c,expires:p,id:g,issuedOn:m,issuer:l,metadataJson:y,name:n.title||n.name,publicKey:f,receipt:s,recipientFullName:v,recordLink:b,revocationKey:w,sealImage:_,signature:x,signatureImage:S,subtitle:h,version:a}}};function TG(e){return aH(this,void 0,void 0,(function*(){try{const t=function(e){"string"==typeof e&&(e=[e]);const t=e.filter((e=>"string"==typeof e)).find((e=>e.toLowerCase().indexOf("blockcerts")>0)).split("/").filter((e=>""!==e)),r=Object.keys(AG);return parseInt(r.filter((e=>function(e,t){return e.some((e=>e.includes(`v${t}`)||e.includes(`${t}.`)))}(t,e.toString())))[0],10)}(e["@context"]);if(1!==t){const e="The document you are trying to parse is not Blockcerts V1. Please refer to cert-verifier-js to parse and verify newer versions: https://github.com/blockchain-certificates/cert-verifier-js";return console.warn(e),{isFormatValid:!1,error:e}}const r=yield AG[t](e);return r.isFormatValid=!0,r}catch(e){return{isFormatValid:!1,error:e}}}))}var PG=DH((function(e,t){var r;t=e.exports=$,r="object"==typeof dq&&dq.env&&dq.env.NODE_DEBUG&&/\bsemver\b/i.test(dq.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var u=s++;o[u]="[0-9]+";var c=s++;o[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=s++;o[l]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var h=s++;o[h]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var f=s++;o[f]="(?:"+o[a]+"|"+o[c]+")";var d=s++;o[d]="(?:"+o[u]+"|"+o[c]+")";var p=s++;o[p]="(?:-("+o[f]+"(?:\\."+o[f]+")*))";var g=s++;o[g]="(?:-?("+o[d]+"(?:\\."+o[d]+")*))";var m=s++;o[m]="[0-9A-Za-z-]+";var y=s++;o[y]="(?:\\+("+o[m]+"(?:\\."+o[m]+")*))";var v=s++,b="v?"+o[l]+o[p]+"?"+o[y]+"?";o[v]="^"+b+"$";var w="[v=\\s]*"+o[h]+o[g]+"?"+o[y]+"?",_=s++;o[_]="^"+w+"$";var x=s++;o[x]="((?:<|>)?=?)";var S=s++;o[S]=o[u]+"|x|X|\\*";var E=s++;o[E]=o[a]+"|x|X|\\*";var k=s++;o[k]="[v=\\s]*("+o[E]+")(?:\\.("+o[E]+")(?:\\.("+o[E]+")(?:"+o[p]+")?"+o[y]+"?)?)?";var I=s++;o[I]="[v=\\s]*("+o[S]+")(?:\\.("+o[S]+")(?:\\.("+o[S]+")(?:"+o[g]+")?"+o[y]+"?)?)?";var A=s++;o[A]="^"+o[x]+"\\s*"+o[k]+"$";var T=s++;o[T]="^"+o[x]+"\\s*"+o[I]+"$";var P=s++;o[P]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var O=s++;o[O]="(?:~>?)";var C=s++;o[C]="(\\s*)"+o[O]+"\\s+",i[C]=new RegExp(o[C],"g");var M=s++;o[M]="^"+o[O]+o[k]+"$";var N=s++;o[N]="^"+o[O]+o[I]+"$";var R=s++;o[R]="(?:\\^)";var L=s++;o[L]="(\\s*)"+o[R]+"\\s+",i[L]=new RegExp(o[L],"g");var j=s++;o[j]="^"+o[R]+o[k]+"$";var D=s++;o[D]="^"+o[R]+o[I]+"$";var B=s++;o[B]="^"+o[x]+"\\s*("+w+")$|^$";var U=s++;o[U]="^"+o[x]+"\\s*("+b+")$|^$";var F=s++;o[F]="(\\s*)"+o[x]+"\\s*("+w+"|"+o[k]+")",i[F]=new RegExp(o[F],"g");var z=s++;o[z]="^\\s*("+o[k]+")\\s+-\\s+("+o[k]+")\\s*$";var V=s++;o[V]="^\\s*("+o[I]+")\\s+-\\s+("+o[I]+")\\s*$";var H=s++;o[H]="(<|>)?=?\\s*\\*";for(var K=0;K<35;K++)r(K,o[K]),i[K]||(i[K]=new RegExp(o[K]));function q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[_]:i[v]).test(e))return null;try{return new $(e,t)}catch(e){return null}}function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof $))return new $(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[_]:i[v]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=q,t.valid=function(e,t){var r=q(e,t);return r?r.version:null},t.clean=function(e,t){var r=q(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return G(n,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new $(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Z(e,t))return null;var r=q(e),n=q(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},t.compareIdentifiers=G;var W=/^[0-9]+$/;function G(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function J(e,t,r){return new $(e,r).compare(new $(t,r))}function X(e,t,r){return J(e,t,r)>0}function Y(e,t,r){return J(e,t,r)<0}function Z(e,t,r){return 0===J(e,t,r)}function Q(e,t,r){return 0!==J(e,t,r)}function ee(e,t,r){return J(e,t,r)>=0}function te(e,t,r){return J(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return Q(e,r,n);case">":return X(e,r,n);case">=":return ee(e,r,n);case"<":return Y(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new $(e,t).major},t.minor=function(e,t){return new $(e,t).minor},t.patch=function(e,t){return new $(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,r){return J(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=X,t.lt=Y,t.eq=Z,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof ne)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,r,n,i,o,s,a,u,c,l,h,f){return((t=se(r)?"":se(n)?">="+r+".0.0":se(i)?">="+r+"."+n+".0":">="+t)+" "+(a=se(u)?"":se(c)?"<"+(+u+1)+".0.0":se(l)?"<"+u+"."+(+c+1)+".0":h?"<="+u+"."+c+"."+l+"-"+h:"<="+a)).trim()}function ue(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){try{t=new oe(t,r)}catch(e){return!1}return t.test(e)}function le(e,t,r,n){var i,o,s,a,u;switch(e=new $(e,n),t=new oe(t,n),r){case">":i=X,o=te,s=Y,a=">",u=">=";break;case"<":i=Y,o=ee,s=X,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],h=null,f=null;if(l.forEach((function(e){e.semver===ie&&(e=new ne(">=0.0.0")),h=h||e,f=f||e,i(e.semver,h.semver,n)?h=e:s(e.semver,f.semver,n)&&(f=e)})),h.operator===a||h.operator===u)return!1;if((!f.operator||f.operator===a)&&o(e,f.semver))return!1;if(f.operator===u&&s(e,f.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?i[B]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new $(r[2],this.options.loose):this.semver=ie},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new $(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new oe(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new oe(this.value,t),ce(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||i||o&&s||a||u},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[V]:i[z];e=e.replace(n,ae),r("hyphen replace",e),e=e.replace(i[F],"$1$2$3"),r("comparator trim",e,i[F]),e=(e=(e=e.replace(i[C],"$1~")).replace(i[L],"$1^")).split(/\s+/).join(" ");var o=t?i[B]:i[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[D]:i[j];return e.replace(n,(function(t,n,i,o,s){var a;return r("caret",e,t,n,i,o,s),se(n)?a="":se(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[N]:i[M];return e.replace(n,(function(t,n,i,o,s){var a;return r("tilde",e,t,n,i,o,s),se(n)?a="":se(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+i+"."+o+"-"+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[T]:i[A];return e.replace(n,(function(t,n,i,o,s,a){r("xRange",e,t,n,i,o,s,a);var u=se(i),c=u||se(o),l=c||se(s);return"="===n&&l&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(c&&(o=0),s=0,">"===n?(n=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",c?i=+i+1:o=+o+1),t=n+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[H],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s.map((function(e){return new ne(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==i.compare(e)||(i=new $(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var o=new oe(t,r)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==i.compare(e)||(i=new $(n=e,r)))})),n},t.minVersion=function(e,t){e=new oe(e,t);var r=new $("0.0.0");if(e.test(r))return r;if(r=new $("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!X(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return le(e,t,"<",r)},t.gtr=function(e,t,r){return le(e,t,">",r)},t.outside=le,t.prerelease=function(e,t){var r=q(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new oe(e,r),t=new oe(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(i[P]);return null==t?null:q(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}));PG.SEMVER_SPEC_VERSION,PG.re,PG.src,PG.parse,PG.valid,PG.clean,PG.SemVer,PG.inc,PG.diff,PG.compareIdentifiers,PG.rcompareIdentifiers,PG.major,PG.minor,PG.patch,PG.compare,PG.compareLoose,PG.rcompare,PG.sort,PG.rsort,PG.gt,PG.lt,PG.eq,PG.neq,PG.gte,PG.lte,PG.cmp,PG.Comparator,PG.Range,PG.toComparators,PG.satisfies,PG.maxSatisfying,PG.minSatisfying,PG.minVersion,PG.validRange,PG.ltr,PG.gtr,PG.outside,PG.prerelease,PG.intersects,PG.coerce;const OG={};var CG=OG;const MG="function"==typeof setImmediate&&setImmediate,NG=MG?e=>MG(e):e=>setTimeout(e,0);function RG(e,t,r){try{return e(t,r)}catch(e){eq((()=>{throw e}))}}OG.nextTick="object"==typeof dq?eq:NG,OG.setImmediate=MG?NG:OG.nextTick,OG.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=OG.clone(e[r])}else if(OG.isObject(e)){t={};for(const r in e)t[r]=OG.clone(e[r])}else t=e.toString();return t}return e},OG.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),OG.isUndefined=e=>void 0===e,OG.callbackify=e=>async function(...t){const r=t[t.length-1];let n;"function"==typeof r&&t.pop();try{n=await e.apply(null,t)}catch(e){if("function"==typeof r)return RG(r,e);throw e}return"function"==typeof r?RG(r,null,n):n};var LG=class e{constructor(e){this.prefix=e,this.counter=0,this.existing={}}clone(){const t=new e(this.prefix);return t.counter=this.counter,t.existing=CG.clone(this.existing),t}getId(e){if(e&&e in this.existing)return this.existing[e];const t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t}hasId(e){return e in this.existing}},jG={options:{usePureJavaScript:!1}};jG.md=jG.md||{},jG.md.algorithms=jG.md.algorithms||{};var DG={},BG=DG,UG={};DG.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%o,c=c/o|0;for(;c>0;)a.push(c%o),c=c/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),o=[0];for(r=0;r<e.length();++r){for(var s=0,a=e.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=i;for(r=o.length-1;r>=0;--r)u+=t[o[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},DG.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=UG[t];if(!r){r=UG[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,o=t.charAt(0),s=[0];for(n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(void 0===a)return;for(var u=0,c=a;u<s.length;++u)c+=s[u]*i,s[u]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var l=0;e[l]===o&&l<e.length-1;++l)s.push(0);return iK.from(s.reverse())},DH((function(e){var t=e.exports=jG.util=jG.util||{};function r(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if(e instanceof iK)this.data=e.toString("binary");else{var r=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,r)}catch(e){for(var i=0;i<r.length;++i)this.putByte(r[i])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];t.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,o=document.createElement("div");r=[],new MutationObserver((function(){var e=r.slice();r.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var s=t.setImmediate;t.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),s(e)):(r.push(e),1===r.length&&o.setAttribute("a",i=!i))}}t.nextTick=t.setImmediate}(),t.isNodejs=void 0!==dq&&dq.versions&&dq.versions.node,t.globalScope=t.isNodejs?LH:"undefined"==typeof self?window:self,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=n,t.ByteStringBuffer=n,t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){r(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,r){r=r||{},this.read=r.readOffset||0,this.growSize=r.growSize||1024;var n=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in r?r.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in r&&(this.write=r.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,r){if(t.isArrayBufferView(e)){var n=(i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-i.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=n,this}if(t.isArrayBuffer(e)){var i=new Uint8Array(e);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data))return i=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(i.byteLength),new Uint8Array(e.data.byteLength,this.write).set(i),this.write+=i.byteLength,this;if(e instanceof t.ByteStringBuffer&&(e=e.data,r="binary"),r=r||"binary","string"==typeof e){var o;if("hex"===r)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if("base64"===r)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;if("utf8"===r&&(e=t.encodeUtf8(e),r="binary"),"binary"===r||"raw"===r)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if("utf16"===r)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+r)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){r(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return r(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var r=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(r);if("hex"===e)return t.binary.hex.encode(r);if("base64"===e)return t.binary.base64.encode(r);if("utf8"===e)return t.text.utf8.decode(r);if("utf16"===e)return t.text.utf16.decode(r);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,r){return r=r||"raw",void 0!==e&&"utf8"===r&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},t.xorBytes=function(e,t,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+o},t.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var r,n,o,s="",a="",u=0;u<e.length;)r=e.charCodeAt(u++),n=e.charCodeAt(u++),o=e.charCodeAt(u++),s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+s},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",a=0;a<e.length;)t=o[e.charCodeAt(a++)-43],r=o[e.charCodeAt(a++)-43],n=o[e.charCodeAt(a++)-43],i=o[e.charCodeAt(a++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:BG.encode,decode:BG.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,o=r=r||0;for(1&e.length&&(i=1,n[o++]=parseInt(e[0],16));i<e.length;i+=2)n[o++]=parseInt(e.substr(i,2),16);return t?o-r:n},t.binary.base64.encode=function(e,t){for(var r,n,o,s="",a="",u=0;u<e.byteLength;)r=e[u++],n=e[u++],o=e[u++],s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+s},t.binary.base64.decode=function(e,t,r){var n,i,s,a,u=t;u||(u=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=r=r||0;c<e.length;)n=o[e.charCodeAt(c++)-43],i=o[e.charCodeAt(c++)-43],s=o[e.charCodeAt(c++)-43],a=o[e.charCodeAt(c++)-43],u[l++]=n<<2|i>>4,64!==s&&(u[l++]=(15&i)<<4|s>>2,64!==a&&(u[l++]=(3&s)<<6|a));return t?l-r:u.subarray(0,l)},t.binary.base58.encode=function(e,r){return t.binary.baseN.encode(e,s,r)},t.binary.base58.decode=function(e,r){return t.binary.baseN.decode(e,s,r)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,r,n){e=t.encodeUtf8(e);var i=r;i||(i=new Uint8Array(e.length));for(var o=n=n||0,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s);return r?o-n:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<e.length;++a)i[s++]=e.charCodeAt(a),o+=2;return t?o-r:n},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,r,n){if(r=t.decode64(e.deflate(t.encode64(r)).rval),n){var i=2;32&r.charCodeAt(1)&&(i=6),r=r.substring(i,r.length-4)}return r},t.inflate=function(e,r,n){var i=e.inflate(t.encode64(r)).rval;return null===i?null:t.decode64(i)};var a=function(e,r,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(r):(n=t.encode64(JSON.stringify(n)),i=e.setItem(r,n)),void 0!==i&&!0!==i.rval){var o=new Error(i.error.message);throw o.id=i.error.id,o.name=i.error.name,o}},u=function(e,r){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(r);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(t.decode64(n))),n},c=function(e,t,r,n){var i=u(e,t);null===i&&(i={}),i[r]=n,a(e,t,i)},l=function(e,t,r){var n=u(e,t);return null!==n&&(n=r in n?n[r]:null),n},h=function(e,t,r){var n=u(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),a(e,t,n)}},f=function(e,t){a(e,t,null)},d=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),o="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),o=!0)}catch(e){s=e}if(o)break}if(!o)throw s;return i};t.setItem=function(e,t,r,n,i){d(c,arguments,i)},t.getItem=function(e,t,r,n){return d(l,arguments,n)},t.removeItem=function(e,t,r,n){d(h,arguments,n)},t.clearItems=function(e,t,r){d(f,arguments,r)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(80!==n.port&&"http"===n.scheme||443!==n.port&&"https"===n.scheme)&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var p=null;t.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,o,s=r[n].indexOf("=");s>0?(i=r[n].substring(0,s),o=r[n].substring(s+1)):(i=r[n],o=null),i in t||(t[i]=[]),i in Object.prototype||null===o||t[i].push(unescape(o))}return t};return void 0===e?(null===p&&(p="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=p):t=r(e),t},t.parseFragment=function(e){var r=e,n="",i=e.indexOf("?");i>0&&(r=e.substring(0,i),n=e.substring(i+1));var o=r.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:r,queryString:n,path:o,query:""===n?{}:t.getQueryVariables(n)}},t.makeRequest=function(e){var r=t.parseFragment(e),n={path:r.pathString,query:r.queryString,getPath:function(e){return void 0===e?r.path:r.path[e]},getQuery:function(e,t){var n;return void 0===e?n=r.query:(n=r.query[e])&&void 0!==t&&(n=n[t]),n},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},t.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,r,n=/%./g,i=0,o=[],s=0;t=n.exec(e);){(r=e.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(e.substring(s)),o.join("")},t.formatNumber=function(e,t,r,n){var i=e,o=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,a=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+a:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-c).toFixed(o).slice(2):"")},t.formatSize=function(e){return e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var r=t.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;r.putByte(i)}return r.getBytes()},t.bytesFromIPv6=function(e){for(var r=0,n=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++r,!0}))).length+r),i=t.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var s=t.hexToBytes(e[o]);s.length<2&&i.putByte(0),i.putBytes(s)}else i.fillWithByte(0,n),n=0;return i.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var r=[],n=[],i=0,o=0;o<e.length;o+=2){for(var s=t.bytesToHex(e[o]+e[o+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=n[n.length-1],u=r.length;a&&u===a.end+1?(a.end=u,a.end-a.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:u,end:u})}r.push(s)}if(n.length>0){var c=n[i];c.end-c.start>0&&(r.splice(c.start,c.end-c.start+1,""),0===c.start&&r.unshift(""),7===c.end&&r.push(""))}return r.join(":")},t.estimateCores=function(e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},"cores"in t&&!e.update)return r(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,r(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,r(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,r(null,t.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(i,o,s){if(0===o){var a=Math.floor(i.reduce((function(e,t){return e+t}),0)/i.length);return t.cores=Math.max(1,a),URL.revokeObjectURL(n),r(null,t.cores)}!function(e,t){for(var r=[],i=[],o=0;o<e;++o){var s=new Worker(n);s.addEventListener("message",(function(n){if(i.push(n.data),i.length===e){for(var o=0;o<e;++o)r[o].terminate();t(null,i)}})),r.push(s)}for(o=0;o<e;++o)r[o].postMessage(o)}(s,(function(t,r){i.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],o=r[n]=[],s=0;s<e;++s)if(n!==s){var a=t[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(i,o-1,s)}))}([],5,16)}})),DH((function(e){var t=e.exports=jG.sha1=jG.sha1||{};jG.md.sha1=jG.md.algorithms.sha1=t,t.create=function(){n||(r=String.fromCharCode(128),r+=jG.util.fillString(String.fromCharCode(0),64),n=!0);var e=null,t=jG.util.createBuffer(),o=new Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=jG.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s}};return s.start(),s.update=function(r,n){"utf8"===n&&(r=jG.util.encodeUtf8(r));var a=r.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=a[1],a[1]=a[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(r),i(e,o,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=jG.util.createBuffer();n.putBytes(t.bytes());var a,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;n.putBytes(r.substr(0,s.blockLength-u));for(var c=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)c+=(a=8*s.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=a>>>0;n.putInt32(c);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};i(h,o,n);var f=jG.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f},s};var r=null,n=!1;function i(e,t,r){for(var n,i,o,s,a,u,c,l=r.length();l>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+u+1518500249+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+1859775393+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+u+2400959708+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(o^s^a)+u+3395469782+n,u=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+u|0,l-=64}}})),DH((function(e){var t=e.exports=jG.sha256=jG.sha256||{};jG.md.sha256=jG.md.algorithms.sha256=t,t.create=function(){n||(r=String.fromCharCode(128),r+=jG.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var e=null,t=jG.util.createBuffer(),s=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var r=a.messageLengthSize/4,n=0;n<r;++n)a.fullMessageLength.push(0);return t=jG.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a}};return a.start(),a.update=function(r,n){"utf8"===n&&(r=jG.util.encodeUtf8(r));var i=r.length;a.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var u=a.fullMessageLength.length-1;u>=0;--u)a.fullMessageLength[u]+=i[1],i[1]=i[0]+(a.fullMessageLength[u]/4294967296>>>0),a.fullMessageLength[u]=a.fullMessageLength[u]>>>0,i[0]=i[1]/4294967296>>>0;return t.putBytes(r),o(e,s,t),(t.read>2048||0===t.length())&&t.compact(),a},a.digest=function(){var n=jG.util.createBuffer();n.putBytes(t.bytes());var i,u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;n.putBytes(r.substr(0,a.blockLength-u));for(var c=8*a.fullMessageLength[0],l=0;l<a.fullMessageLength.length-1;++l)c+=(i=8*a.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=i>>>0;n.putInt32(c);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};o(h,s,n);var f=jG.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f.putInt32(h.h5),f.putInt32(h.h6),f.putInt32(h.h7),f},a};var r=null,n=!1,i=null;function o(e,t,r){for(var n,o,s,a,u,c,l,h,f,d,p,g,m,y=r.length();y>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=t[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=n+t[u-7]+o+t[u-16]|0;for(c=e.h0,l=e.h1,h=e.h2,f=e.h3,d=e.h4,p=e.h5,g=e.h6,m=e.h7,u=0;u<64;++u)s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),a=c&l|h&(c^l),n=m+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(g^d&(p^g))+i[u]+t[u],m=g,g=p,p=d,d=f+n>>>0,f=h,h=l,l=c,c=n+(o=s+a)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+f|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+g|0,e.h7=e.h7+m|0,y-=64}}}));var FG=class{constructor(e){this.md=jG.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}},zG=class{constructor(e){this.list=e.sort(),this.done=!1,this.left={};for(let t=0;t<e.length;++t)this.left[e[t]]=!0}hasNext(){return!this.done}next(){const e=this.list.slice();let t=null,r=0;const n=this.list.length;for(let e=0;e<n;++e){const i=this.list[e],o=this.left[i];(null===t||i>t)&&(o&&e>0&&i>this.list[e-1]||!o&&e<n-1&&i>this.list[e+1])&&(t=i,r=e)}if(null===t)this.done=!0;else{const e=this.left[t]?r-1:r+1;this.list[r]=this.list[e],this.list[e]=t;for(let e=0;e<n;++e)this.list[e]>t&&(this.left[this.list[e]]=!this.left[this.list[e]])}return e}};const VG="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",HG="http://www.w3.org/2001/XMLSchema#string",KG={eoln:/(?:\r\n)|(?:\n)|(?:\r)/g};KG.empty=new RegExp("^[ \\t]*$"),KG.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$');var qG=class e{static parse(e){const t=[],r={},n=e.split(KG.eoln);let i=0;for(const e of n){if(i++,KG.empty.test(e))continue;const n=e.match(KG.quad);if(null===n)throw new Error("N-Quads parse error on line "+i+".");const o={};if(void 0!==n[1]?o.subject={termType:"NamedNode",value:n[1]}:o.subject={termType:"BlankNode",value:n[2]},o.predicate={termType:"NamedNode",value:n[3]},void 0!==n[4]?o.object={termType:"NamedNode",value:n[4]}:void 0!==n[5]?o.object={termType:"BlankNode",value:n[5]}:(o.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==n[7]?o.object.datatype.value=n[7]:void 0!==n[8]?(o.object.datatype.value=VG,o.object.language=n[8]):o.object.datatype.value=HG,o.object.value=JG(n[6])),void 0!==n[9]?o.graph={termType:"NamedNode",value:n[9]}:void 0!==n[10]?o.graph={termType:"BlankNode",value:n[10]}:o.graph={termType:"DefaultGraph",value:""},o.graph.value in r){let e=!0;const n=r[o.graph.value];for(const t of n)if($G(t,o)){e=!1;break}e&&(n.push(o),t.push(o))}else r[o.graph.value]=[o],t.push(o)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const r=[];for(const n of t)r.push(e.serializeQuad(n));return r.sort().join("")}static serializeQuad(e){const t=e.subject,r=e.predicate,n=e.object,i=e.graph;let o="";return[t,r].forEach((e=>{"NamedNode"===e.termType?o+="<"+e.value+">":o+=e.value,o+=" "})),"NamedNode"===n.termType?o+="<"+n.value+">":"BlankNode"===n.termType?o+=n.value:(o+='"'+function(e){return e.replace(WG,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(n.value)+'"',n.datatype.value===VG?n.language&&(o+="@"+n.language):n.datatype.value!==HG&&(o+="^^<"+n.datatype.value+">")),"NamedNode"===i.termType?o+=" <"+i.value+">":"BlankNode"===i.termType&&(o+=" "+i.value),o+=" .\n",o}static legacyDatasetToQuads(e){const t=[],r={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const n in e)e[n].forEach((e=>{const i={};for(const t in e){const n=e[t],o={termType:r[n.type],value:n.value};"Literal"===o.termType&&(o.datatype={termType:"NamedNode"},"datatype"in n&&(o.datatype.value=n.datatype),"language"in n?("datatype"in n||(o.datatype.value=VG),o.language=n.language):"datatype"in n||(o.datatype.value=HG)),i[t]=o}i.graph="@default"===n?{termType:"DefaultGraph",value:""}:{termType:n.startsWith("_:")?"BlankNode":"NamedNode",value:n},t.push(i)}));return t}};function $G(e,t){for(const r in e)if(e[r].termType!==t[r].termType||e[r].value!==t[r].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.datatype.value===t.object.datatype.value&&e.object.language===t.object.language}const WG=/["\\\n\r]/g,GG=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function JG(e){return e.replace(GG,(function(e,t,r,n){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(n)throw new Error("Unsupported U escape")}))}const XG={subject:"s",object:"o",graph:"g"};var YG=class extends class{constructor({maxCallStackDepth:e=500,maxTotalCallStackDepth:t=4294967295,timeSlice:r=10}={}){this.schedule={},this.schedule.MAX_DEPTH=e,this.schedule.MAX_TOTAL_DEPTH=t,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=r}doWork(e,t){const r=this.schedule;if(r.totalDepth>=r.MAX_TOTAL_DEPTH)return t(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function n(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,CG.nextTick(n);const i=Date.now();if(r.running||(r.start=Date.now(),r.deadline=r.start+r.timeSlice),i<r.deadline)return r.running=!0,r.depth++,r.totalDepth++,e(((e,n)=>{r.depth--,r.totalDepth--,t(e,n)}));r.depth=0,r.running=!1,CG.setImmediate(n)}()}forEach(e,t,r){const n=this;let i,o,s=0;if(Array.isArray(e))o=e.length,i=()=>s!==o&&(i.value=e[s++],i.key=s,!0);else{const t=Object.keys(e);o=t.length,i=()=>s!==o&&(i.key=t[s++],i.value=e[i.key],!0)}!function e(o){return o?r(o):i()?n.doWork((()=>t(i.value,i.key,e))):void r()}()}waterfall(e,t){const r=this;r.forEach(e,((e,t,n)=>r.doWork(e,n)),t)}whilst(e,t,r){const n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()}}{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new LG("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,t){const r=this;let n;r.schedule.start=Date.now(),r.quads=e;const i={};r.waterfall([t=>{r.forEach(e,((e,t,n)=>{r.forEachComponent(e,(t=>{if("BlankNode"!==t.termType)return;const n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})})),n()}),t)},e=>{let t=!0;r.whilst((()=>t),(e=>{t=!1,r.hashToBlankNodes={},r.waterfall([e=>{r.forEach(i,((e,t,n)=>{r.hashFirstDegreeQuads(t,((e,i)=>{if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()}))}),e)},e=>{const n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,((e,n,o)=>{const s=r.hashToBlankNodes[e];if(s.length>1)return o();const a=s[0];r.canonicalIssuer.getId(a),delete i[a],delete r.hashToBlankNodes[e],t=!0,o()}),e)}],e)}),e)},e=>{const t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,((e,t,n)=>{const i=[],o=r.hashToBlankNodes[e];r.waterfall([e=>{r.forEach(o,((e,t,n)=>{if(r.canonicalIssuer.hasId(e))return n();const o=new LG("_:b");o.getId(e),r.hashNDegreeQuads(e,o,((e,t)=>{if(e)return n(e);i.push(t),n()}))}),e)},e=>{i.sort(((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0)),r.forEach(i,((e,t,n)=>{for(const t in e.issuer.existing)r.canonicalIssuer.getId(t);n()}),e)}],n)}),e)},e=>{const t=[];r.waterfall([e=>{r.forEach(r.quads,((e,n,i)=>{r.forEachComponent(e,(e=>{"BlankNode"!==e.termType||e.value.startsWith(r.canonicalIssuer.prefix)||(e.value=r.canonicalIssuer.getId(e.value))})),t.push(qG.serializeQuad(e)),i()}),e)},e=>(t.sort(),n=t.join(""),e())],e)}],(e=>t(e,n)))}hashFirstDegreeQuads(e,t){const r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);const i=[],o=n.quads;r.forEach(o,((t,n,o)=>{const s={predicate:t.predicate};r.forEachComponent(t,((t,n)=>{s[n]=r.modifyFirstDegreeComponent(e,t,n)})),i.push(qG.serializeQuad(s)),o()}),(e=>{if(e)return t(e);i.sort();const o=new FG(r.hashAlgorithm);for(let e=0;e<i.length;++e)o.update(i[e]);n.hash=o.digest(),t(null,n.hash)}))}hashRelatedBlankNode(e,t,r,n,i){const o=this;let s;o.waterfall([t=>o.canonicalIssuer.hasId(e)?(s=o.canonicalIssuer.getId(e),t()):r.hasId(e)?(s=r.getId(e),t()):void o.hashFirstDegreeQuads(e,((e,r)=>{if(e)return t(e);s=r,t()}))],(e=>{if(e)return i(e);const r=new FG(o.hashAlgorithm);return r.update(n),"g"!==n&&r.update(o.getRelatedPredicate(t)),r.update(s),i(null,r.digest())}))}hashNDegreeQuads(e,t,r){const n=this;let i;const o=new FG(n.hashAlgorithm);n.waterfall([r=>n.createHashToRelated(e,t,((e,t)=>{if(e)return r(e);i=t,r()})),e=>{const r=Object.keys(i).sort();n.forEach(r,((e,r,s)=>{o.update(e);let a,u="";const c=new zG(i[e]);n.whilst((()=>c.hasNext()),(e=>{const r=c.next();let i=t.clone(),o="";const s=[];n.waterfall([t=>{n.forEach(r,((t,r,a)=>{if(n.canonicalIssuer.hasId(t)?o+=n.canonicalIssuer.getId(t):(i.hasId(t)||s.push(t),o+=i.getId(t)),0!==u.length&&o>u)return e();a()}),t)},t=>{n.forEach(s,((t,r,s)=>{n.hashNDegreeQuads(t,i,((r,n)=>r?s(r):(o+=i.getId(t),o+="<"+n.hash+">",i=n.issuer,0!==u.length&&o>u?e():void s())))}),t)},e=>{(0===u.length||o<u)&&(u=o,a=i),e()}],e)}),(e=>{if(e)return s(e);o.update(u),t=a,s()}))}),e)}],(e=>{r(e,{hash:o.digest(),issuer:t})}))}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType||((t=CG.clone(t)).value=t.value===e?"_:a":"_:z"),t}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t,r){const n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,((r,o,s)=>{n.forEach(r,((o,s,a)=>{if("predicate"===s||"BlankNode"!==o.termType||o.value===e)return a();const u=o.value,c=XG[s];n.hashRelatedBlankNode(u,r,t,c,((e,t)=>{if(e)return a(e);t in i?i[t].push(u):i[t]=[u],a()}))}),s)}),(e=>r(e,i)))}forEachComponent(e,t){for(const r in e)"predicate"!==r&&t(e[r],r,e)}},ZG=class extends YG{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType||((t=CG.clone(t)).value="name"===r?"_:g":t.value===e?"_:a":"_:z"),t}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,r){const n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,((r,o,s)=>{let a,u;if("BlankNode"===r.subject.termType&&r.subject.value!==e)u=r.subject.value,a="p";else{if("BlankNode"!==r.object.termType||r.object.value===e)return s();u=r.object.value,a="r"}n.hashRelatedBlankNode(u,r,t,a,((e,t)=>{if(e)return s(e);t in i?i[t].push(u):i[t]=[u],s()}))}),(e=>r(e,i)))}};const QG={subject:"s",object:"o",graph:"g"};var eJ=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new LG("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const t=this;t.quads=e;const r={};for(const n of e)t.forEachComponent(n,(e=>{if("BlankNode"!==e.termType)return;const i=e.value;i in t.blankNodeInfo?t.blankNodeInfo[i].quads.push(n):(r[i]=!0,t.blankNodeInfo[i]={quads:[n]})}));let n=!0;for(;n;){n=!1,t.hashToBlankNodes={};for(const e in r){const r=t.hashFirstDegreeQuads(e);r in t.hashToBlankNodes?t.hashToBlankNodes[r].push(e):t.hashToBlankNodes[r]=[e]}const e=Object.keys(t.hashToBlankNodes).sort();for(let i=0;i<e.length;++i){const o=e[i],s=t.hashToBlankNodes[o];if(s.length>1)continue;const a=s[0];t.canonicalIssuer.getId(a),delete r[a],delete t.hashToBlankNodes[o],n=!0}}const i=Object.keys(t.hashToBlankNodes).sort();for(let e=0;e<i.length;++e){const r=[],n=i[e],o=t.hashToBlankNodes[n];for(let e=0;e<o.length;++e){const n=o[e];if(t.canonicalIssuer.hasId(n))continue;const i=new LG("_:b");i.getId(n);const s=t.hashNDegreeQuads(n,i);r.push(s)}r.sort(((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0));for(let e=0;e<r.length;++e){const n=r[e];for(const e in n.issuer.existing)t.canonicalIssuer.getId(e)}}const o=[];for(let e=0;e<t.quads.length;++e){const r=t.quads[e];t.forEachComponent(r,(e=>{"BlankNode"!==e.termType||e.value.startsWith(t.canonicalIssuer.prefix)||(e.value=t.canonicalIssuer.getId(e.value))})),o.push(qG.serializeQuad(r))}return o.sort(),o.join("")}hashFirstDegreeQuads(e){const t=this,r=t.blankNodeInfo[e];if("hash"in r)return r.hash;const n=[],i=r.quads;for(let r=0;r<i.length;++r){const o=i[r],s={predicate:o.predicate};t.forEachComponent(o,((r,n)=>{s[n]=t.modifyFirstDegreeComponent(e,r,n)})),n.push(qG.serializeQuad(s))}n.sort();const o=new FG(t.hashAlgorithm);for(let e=0;e<n.length;++e)o.update(n[e]);return r.hash=o.digest(),r.hash}hashRelatedBlankNode(e,t,r,n){const i=this;let o;o=i.canonicalIssuer.hasId(e)?i.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):i.hashFirstDegreeQuads(e);const s=new FG(i.hashAlgorithm);return s.update(n),"g"!==n&&s.update(i.getRelatedPredicate(t)),s.update(o),s.digest()}hashNDegreeQuads(e,t){const r=this,n=new FG(r.hashAlgorithm),i=r.createHashToRelated(e,t),o=Object.keys(i).sort();for(let e=0;e<o.length;++e){const s=o[e];n.update(s);let a,u="";const c=new zG(i[s]);for(;c.hasNext();){const e=c.next();let n=t.clone(),i="";const o=[];let s=!1;for(let t=0;t<e.length;++t){const a=e[t];if(r.canonicalIssuer.hasId(a)?i+=r.canonicalIssuer.getId(a):(n.hasId(a)||o.push(a),i+=n.getId(a)),0!==u.length&&i>u){s=!0;break}}if(!s){for(let e=0;e<o.length;++e){const t=o[e],a=r.hashNDegreeQuads(t,n);if(i+=n.getId(t),i+="<"+a.hash+">",n=a.issuer,0!==u.length&&i>u){s=!0;break}}s||(0===u.length||i<u)&&(u=i,a=n)}}n.update(u),t=a}return{hash:n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType||((t=CG.clone(t)).value=t.value===e?"_:a":"_:z"),t}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t){const r=this,n={},i=r.blankNodeInfo[e].quads;for(let o=0;o<i.length;++o){const s=i[o];for(const i in s){const o=s[i];if("predicate"===i||"BlankNode"!==o.termType||o.value===e)continue;const a=o.value,u=QG[i],c=r.hashRelatedBlankNode(a,s,t,u);c in n?n[c].push(a):n[c]=[a]}}return n}forEachComponent(e,t){for(const r in e)"predicate"!==r&&t(e[r],r,e)}},tJ=class extends eJ{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType||((t=CG.clone(t)).value="name"===r?"_:g":t.value===e?"_:a":"_:z"),t}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const r=this,n={},i=r.blankNodeInfo[e].quads;for(let o=0;o<i.length;++o){const s=i[o];let a,u;if("BlankNode"===s.subject.termType&&s.subject.value!==e)u=s.subject.value,a="p";else{if("BlankNode"!==s.object.termType||s.object.value===e)continue;u=s.object.value,a="r"}const c=r.hashRelatedBlankNode(u,s,t,a);c in n?n[c].push(u):n[c]=[u]}return n}},rJ=BH(Object.freeze({__proto__:null,default:{}}));let nJ;try{nJ=rJ}catch(aH){}const iJ={};var oJ=iJ;iJ.NQuads=qG,iJ.IdentifierIssuer=LG,iJ._rdfCanonizeNative=function(e){return e&&(nJ=e),nJ},iJ.canonize=CG.callbackify((async function(e,t){let r;const n=new Promise(((e,t)=>{r=(r,n)=>{if(r)return t(r);e(n)}}));if(Array.isArray(e)||(e=iJ.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!nJ)throw new Error("rdf-canonize-native not available");nJ.canonize(e,t,r)}else if("URDNA2015"===t.algorithm)new YG(t).main(e,r);else{if("URGNA2012"!==t.algorithm)throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new ZG(t).main(e,r)}return n})),iJ.canonizeSync=function(e,t){if(Array.isArray(e)||(e=iJ.NQuads.legacyDatasetToQuads(e)),t.useNative){if(nJ)return nJ.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new eJ(t).main(e);if("URGNA2012"===t.algorithm)return new tJ(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)};const sJ={};var aJ=sJ;sJ.isArray=Array.isArray,sJ.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),sJ.isDouble=e=>sJ.isNumber(e)&&-1!==String(e).indexOf("."),sJ.isEmptyObject=e=>sJ.isObject(e)&&0===Object.keys(e).length,sJ.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),sJ.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),sJ.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),sJ.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),sJ.isUndefined=e=>void 0===e;const uJ={};var cJ=uJ;uJ.isSubject=e=>!(!aJ.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),uJ.isSubjectReference=e=>aJ.isObject(e)&&1===Object.keys(e).length&&"@id"in e,uJ.isValue=e=>aJ.isObject(e)&&"@value"in e,uJ.isList=e=>aJ.isObject(e)&&"@list"in e,uJ.isGraph=e=>aJ.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,uJ.isSimpleGraph=e=>uJ.isGraph(e)&&!("@id"in e),uJ.isBlankNode=e=>!!aJ.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e));var lJ=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}};const hJ=oJ.IdentifierIssuer,fJ=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,dJ=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,pJ=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,gJ="application/ld+json, application/json",mJ={};var yJ=mJ;mJ.IdentifierIssuer=hJ;const vJ="function"==typeof setImmediate&&setImmediate,bJ=vJ?e=>vJ(e):e=>setTimeout(e,0);function wJ(e,t,r){mJ.nextTick((()=>e(t,r)))}function _J(e,t){if(aJ.isArray(t))for(let r=0;r<t.length;++r)t[r]=_J(e,t[r]);else if(cJ.isList(t))t["@list"]=_J(e,t["@list"]);else if(aJ.isObject(t)){cJ.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const r=Object.keys(t).sort();for(let n=0;n<r.length;++n){const i=r[n];"@id"!==i&&(t[i]=_J(e,t[i]))}}return t}mJ.nextTick="object"==typeof dq?eq:bJ,mJ.setImmediate=vJ?bJ:mJ.nextTick,mJ.clone=function(e){if(e&&"object"==typeof e){let t;if(aJ.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=mJ.clone(e[r])}else if(e instanceof Map){t=new Map;for(const[r,n]of e)t.set(r,mJ.clone(n))}else if(e instanceof Set){t=new Set;for(const r of e)t.add(mJ.clone(r))}else if(aJ.isObject(e)){t={};for(const r in e)t[r]=mJ.clone(e[r])}else t=e.toString();return t}return e},mJ.asArray=function(e){return Array.isArray(e)?e:[e]},mJ.buildHeaders=(e={})=>{if(Object.keys(e).some((e=>"accept"===e.toLowerCase())))throw new RangeError('Accept header may not be specified; only "'+gJ+'" is supported.');return Object.assign({Accept:gJ},e)},mJ.parseLinkHeader=e=>{const t={},r=e.match(fJ);for(let e=0;e<r.length;++e){let n=r[e].match(dJ);if(!n)continue;const i={target:n[1]},o=n[2];for(;n=pJ.exec(o);)i[n[1]]=void 0===n[2]?n[3]:n[2];const s=i.rel||"";Array.isArray(t[s])?t[s].push(i):t.hasOwnProperty(s)?t[s]=[t[s],i]:t[s]=i}return t},mJ.validateTypeValue=e=>{if(aJ.isString(e)||aJ.isEmptyObject(e))return;let t=!1;if(aJ.isArray(e)){t=!0;for(let r=0;r<e.length;++r)if(!aJ.isString(e[r])){t=!1;break}}if(!t)throw new lJ('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})},mJ.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const r=e[t];return!aJ.isArray(r)||r.length>0}return!1},mJ.hasValue=(e,t,r)=>{if(mJ.hasProperty(e,t)){let n=e[t];const i=cJ.isList(n);if(aJ.isArray(n)||i){i&&(n=n["@list"]);for(let e=0;e<n.length;++e)if(mJ.compareValues(r,n[e]))return!0}else if(!aJ.isArray(r))return mJ.compareValues(r,n)}return!1},mJ.addValue=(e,t,r,n)=>{if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),n.valueIsArray)e[t]=r;else if(aJ.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]);for(let i=0;i<r.length;++i)mJ.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){const i=!n.allowDuplicate&&mJ.hasValue(e,t,r);aJ.isArray(e[t])||i&&!n.propertyIsArray||(e[t]=[e[t]]),i||e[t].push(r)}else e[t]=n.propertyIsArray?[r]:r},mJ.getValues=(e,t)=>[].concat(e[t]||[]),mJ.removeProperty=(e,t)=>{delete e[t]},mJ.removeValue=(e,t,r,n)=>{"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);const i=mJ.getValues(e,t).filter((e=>!mJ.compareValues(e,r)));0===i.length?mJ.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},mJ.relabelBlankNodes=(e,t)=>_J((t=t||{}).issuer||new hJ("_:b"),e),mJ.compareValues=(e,t)=>e===t||!(!cJ.isValue(e)||!cJ.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(aJ.isObject(e)&&"@id"in e&&aJ.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],mJ.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1,mJ.normalizeDocumentLoader=e=>e.length<2?mJ.callbackify(e):async function(t){const r=arguments[1];return new Promise(((n,i)=>{try{e(t,((e,t)=>{if("function"==typeof r)return wJ(r,e,t);e?i(e):n(t)}))}catch(e){if("function"==typeof r)return wJ(r,e);i(e)}}))},mJ.callbackify=e=>async function(...t){const r=t[t.length-1];let n;"function"==typeof r&&t.pop();try{n=await e.apply(null,t)}catch(e){if("function"==typeof r)return wJ(r,e);throw e}return"function"==typeof r?wJ(r,null,n):n};var xJ=oJ.NQuads;const SJ="http://www.w3.org/1999/02/22-rdf-syntax-ns#",EJ="http://www.w3.org/2001/XMLSchema#";var kJ={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:SJ,RDF_LIST:SJ+"List",RDF_FIRST:SJ+"first",RDF_REST:SJ+"rest",RDF_NIL:SJ+"nil",RDF_TYPE:SJ+"type",RDF_PLAIN_LITERAL:SJ+"PlainLiteral",RDF_XML_LITERAL:SJ+"XMLLiteral",RDF_JSON_LITERAL:SJ+"JSON",RDF_OBJECT:SJ+"object",RDF_LANGSTRING:SJ+"langString",XSD:EJ,XSD_BOOLEAN:EJ+"boolean",XSD_DOUBLE:EJ+"double",XSD_INTEGER:EJ+"integer",XSD_STRING:EJ+"string"};const{RDF_LANGSTRING:IJ,RDF_PLAIN_LITERAL:AJ,RDF_OBJECT:TJ,RDF_XML_LITERAL:PJ,XSD_STRING:OJ}=kJ;let CJ;CJ="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};const{clone:MJ}=yJ,NJ={};var RJ=NJ;NJ.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},NJ.parse=(e,t)=>{const r={},n=NJ.parsers[t||"full"],i=n.regex.exec(e);let o=n.keys.length;for(;o--;)r[n.keys[o]]=void 0===i[o]?null:i[o];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=NJ.removeDotSegments(r.path),r},NJ.prependBase=(e,t)=>{if(null===e)return t;if(-1!==t.indexOf(":"))return t;aJ.isString(e)&&(e=NJ.parse(e||""));const r=NJ.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),t.length>0&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,n.path=t}n.query=r.query}""!==r.path&&(n.path=NJ.removeDotSegments(n.path));let i=n.protocol;return null!==n.authority&&(i+="//"+n.authority),i+=n.path,null!==n.query&&(i+="?"+n.query),null!==r.fragment&&(i+="#"+r.fragment),""===i&&(i="./"),i},NJ.removeBase=(e,t)=>{if(null===e)return t;aJ.isString(e)&&(e=NJ.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const n=NJ.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),o=n.normalizedPath.split("/"),s=n.fragment||n.query?0:1;for(;i.length>0&&o.length>s&&i[0]===o[0];)i.shift(),o.shift();let a="";if(i.length>0){i.pop();for(let e=0;e<i.length;++e)a+="../"}return a+=o.join("/"),null!==n.query&&(a+="?"+n.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},NJ.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),n=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),n&&r.push("")):n&&r.push("")}return r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const LJ=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;NJ.isAbsolute=e=>aJ.isString(e)&&LJ.test(e),NJ.isRelative=e=>aJ.isString(e);const{isArray:jJ,isObject:DJ,isString:BJ,isUndefined:UJ}=aJ,{isAbsolute:FJ,isRelative:zJ,prependBase:VJ,parse:HJ}=RJ,{asArray:KJ,compareShortestLeast:qJ}=yJ,$J=new Map,WJ={};var GJ=WJ;function JJ(e,t,r,n,i,o){if(null===t||!BJ(t)||WJ.isKeyword(t))return t;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&WJ.createTermDefinition(e,n,t,i,o),e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext),(r=r||{}).vocab){const r=e.mappings.get(t);if(null===r)return null;if(r)return r["@id"]}const s=t.indexOf(":");if(-1!==s){const r=t.substr(0,s),a=t.substr(s+1);return"_"===r||0===a.indexOf("//")?t:(n&&n.hasOwnProperty(r)&&WJ.createTermDefinition(e,n,r,i,o),e.mappings.has(r)?e.mappings.get(r)["@id"]+a:t)}return r.vocab&&"@vocab"in e?e["@vocab"]+t:r.base?VJ(e["@base"],t):t}function XJ(e,t,r,n){if(jJ(e))for(const i of e)XJ(i,t,r,n);else if(DJ(e))for(const i in e){if("@context"!==i){XJ(e[i],t,r,n);continue}const o=e[i];if(jJ(o)){let e=o.length;for(let i=0;i<e;++i){const s=o[i];if(BJ(s)){const a=VJ(n,s),u=t.get(a);r?jJ(u)?(Array.prototype.splice.apply(o,[i,1].concat(u)),i+=u.length-1,e=o.length):!1!==u&&(o[i]=u):void 0===u&&t.set(a,!1)}else for(const e in s)DJ(s[e])&&XJ(s[e],t,r,n)}}else if(BJ(o)){const s=VJ(n,o),a=t.get(s);r?!1!==a&&(e[i]=a):void 0===a&&t.set(s,!1)}else for(const e in o)DJ(o[e])&&XJ(o[e],t,r,n)}}function YJ(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const r=Array.isArray(e);if(r!==Array.isArray(t))return!1;if(r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!YJ(e[r],t[r]))return!1;return!0}const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const r in e){let n=e[r],i=t[r];if("@container"===r&&Array.isArray(n)&&Array.isArray(i)&&(n=n.slice().sort(),i=i.slice().sort()),!YJ(n,i))return!1}return!0}WJ.cache=new class{constructor(e=100){this.order=[],this.cache=new Map,this.size=e}get(e,t){const r=this.cache.get(e);if(r){const e=JSON.stringify(t);return r.get(e)||null}return null}set(e,t,r){if(this.order.length===this.size){const e=this.order.shift();this.cache.get(e.activeCtx).delete(e.localCtx)}const n=JSON.stringify(t);this.order.push({activeCtx:e,localCtx:n});let i=this.cache.get(e);i||(i=new Map,this.cache.set(e,i)),i.set(n,MJ(r))}},WJ.process=({activeCtx:e,localCtx:t,options:r,isPropertyTermScopedContext:n=!1,isTypeScopedContext:i=!1})=>{DJ(t)&&"@context"in t&&jJ(t["@context"])&&(t=t["@context"]);const o=KJ(t);if(0===o.length)return e;const s=e.previousContext||e;if(n&&e.previousContext)return(e=e.clone()).isPropertyTermScoped=!0,e.previousContext=WJ.process({activeCtx:e.previousContext,localCtx:o,options:r,isPropertyTermScopedContext:n}),e;let a=e;for(let u=0;u<o.length;++u){let c=o[u];if(e=a,null===c){if(!n&&0!==Object.keys(e.protected).length){const n=r&&r.protectedMode||"error";if("error"===n)throw new lJ("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===n){console.warn("WARNING: invalid context nullification");const t=e;a=e=WJ.getInitialContext(r).clone();for(const[r,n]of Object.entries(t.protected))n&&(e.mappings[r]=yJ.clone(t.mappings[r]));e.protected=yJ.clone(t.protected),WJ.cache&&WJ.cache.set(t,c,a);continue}throw new lJ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:n})}a=e=WJ.getInitialContext(r).clone(),i&&(a.previousContext=s.clone());continue}if(WJ.cache){const t=WJ.cache.get(e,c);if(t){a=e=t;continue}}if(DJ(c)&&"@context"in c&&(c=c["@context"]),!DJ(c))throw new lJ("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c});a=a.clone();const l=new Map;if("@version"in c){if(1.1!==c["@version"])throw new lJ("Unsupported JSON-LD version: "+c["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:c});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new lJ("@version: "+c["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:c});a.processingMode="json-ld-1.1",a["@version"]=c["@version"],l.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode||"json-ld-1.0","@base"in c){let t=c["@base"];if(null===t);else if(FJ(t))t=HJ(t);else{if(!zJ(t))throw new lJ('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:c});t=HJ(VJ(e["@base"].href,t))}a["@base"]=t,l.set("@base",!0)}if("@vocab"in c){const e=c["@vocab"];if(null===e)delete a["@vocab"];else{if(!BJ(e))throw new lJ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});if(!FJ(e))throw new lJ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});a["@vocab"]=e}l.set("@vocab",!0)}if("@language"in c){const e=c["@language"];if(null===e)delete a["@language"];else{if(!BJ(e))throw new lJ('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:c});a["@language"]=e.toLowerCase()}l.set("@language",!0)}l.set("@protected",c["@protected"]||!1);for(const e in c)WJ.createTermDefinition(a,c,e,l,r,n);i&&!a.previousContext&&(a.previousContext=s.clone()),WJ.cache&&WJ.cache.set(e,c,a)}return a},WJ.createTermDefinition=(e,t,r,n,i,o=!1)=>{if(n.has(r)){if(n.get(r))return;throw new lJ("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n.set(r,!1),WJ.isKeyword(r))throw new lJ("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new lJ("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const s=e.mappings.get(r);let a;if(e.mappings.has(r)&&e.mappings.delete(r),t.hasOwnProperty(r)&&(a=t[r]),null===a||DJ(a)&&null===a["@id"])return e.mappings.set(r,null),void n.set(r,!0);let u=!1;if(BJ(a)&&(u=!0,a={"@id":a}),!DJ(a))throw new lJ("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const c={};e.mappings.set(r,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];WJ.processingMode(e,1.1)&&l.push("@context","@nest","@prefix","@protected");for(const e in a)if(!l.includes(e))throw new lJ("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const h=r.indexOf(":");if(c._termHasColon=-1!==h,"@reverse"in a){if("@id"in a)throw new lJ("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in a)throw new lJ("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const r=a["@reverse"];if(!BJ(r))throw new lJ("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});const o=JJ(e,r,{vocab:!0,base:!1},t,n,i);if(!FJ(o))throw new lJ("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=o,c.reverse=!0}else if("@id"in a){let o=a["@id"];if(!BJ(o))throw new lJ("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(o!==r){if(o=JJ(e,o,{vocab:!0,base:!1},t,n,i),!FJ(o)&&!WJ.isKeyword(o))throw new lJ("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=o,c._prefix=!c._termHasColon&&o.match(/[:\/\?#\[\]@]$/)&&(u||WJ.processingMode(e,1))}}if(!("@id"in c))if(c._termHasColon){const o=r.substr(0,h);if(t.hasOwnProperty(o)&&WJ.createTermDefinition(e,t,o,n,i),e.mappings.has(o)){const t=r.substr(h+1);c["@id"]=e.mappings.get(o)["@id"]+t}else c["@id"]=r}else{if(!("@vocab"in e))throw new lJ("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((!0===a["@protected"]||!0===n.get("@protected")&&!1!==a["@protected"])&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in a){let r=a["@type"];if(!BJ(r))throw new lJ("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==r&&"@vocab"!==r&&"@json"!==r){if(r=JJ(e,r,{vocab:!0,base:!1},t,n,i),!FJ(r))throw new lJ("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===r.indexOf("_:"))throw new lJ("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=r}if("@container"in a){const r=BJ(a["@container"])?[a["@container"]]:a["@container"]||[],n=["@list","@set","@index","@language"];let i=!0;const o=r.includes("@set");if(WJ.processingMode(e,1.1))if(n.push("@graph","@id","@type"),r.includes("@list")){if(1!==r.length)throw new lJ("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(r.includes("@graph")){if(r.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new lJ("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=r.length<=(o?2:1);else i&=!jJ(a["@container"]),i&=r.length<=1;if(i&=r.every((e=>n.includes(e))),i&=!(o&&r.includes("@list")),!i)throw new lJ("Invalid JSON-LD syntax; @context @container value must be one of the following: "+n.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!r.every((e=>["@index","@set"].includes(e))))throw new lJ("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=r}if("@context"in a&&(c["@context"]=a["@context"]),"@language"in a&&!("@type"in a)){let e=a["@language"];if(null!==e&&!BJ(e))throw new lJ("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in a){if(c._termHasColon)throw new lJ("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof a["@prefix"])throw new lJ("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});c._prefix=!0===a["@prefix"]}if("@nest"in a){const e=a["@nest"];if(!BJ(e)||"@nest"!==e&&0===e.indexOf("@"))throw new lJ("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=e}
// disallow aliasing @context and @preserve
const f=c["@id"];if("@context"===f||"@preserve"===f)throw new lJ("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(s&&s.protected&&!o&&(e.protected[r]=!0,c.protected=!0,!YJ(s,c))){const e=i&&i.protectedMode||"error";if("error"===e)throw new lJ("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:r});throw new lJ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:r,protectedMode:e})}},WJ.expandIri=(e,t,r,n)=>JJ(e,t,r,void 0,void 0,n),WJ.getInitialContext=e=>{const t=HJ(e.base||""),r=JSON.stringify({base:t,processingMode:e.processingMode}),n=$J.get(r);if(n)return n;const i={"@base":t,processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},r=e.fastCurieMap={},n={},i=e["@language"]||"@none",a=e.mappings,u=[...a.keys()].sort(qJ);for(const e of u){const o=a.get(e);if(null===o)continue;let u=o["@container"]||"@none";u=[].concat(u).sort().join("");const c=KJ(o["@id"]);for(const a of c){let c=t[a];const l=WJ.isKeyword(a);if(c)l||o._termHasColon||n[a].push(e);else if(t[a]=c={},!l&&!o._termHasColon){n[a]=[e];const t={iri:a,terms:n[a]};a[0]in r?r[a[0]].push(t):r[a[0]]=[t]}if(c[u]||(c[u]={"@language":{},"@type":{},"@any":{}}),c=c[u],s(e,c["@any"],"@none"),o.reverse)s(e,c["@type"],"@reverse");else if("@type"in o)s(e,c["@type"],o["@type"]);else if("@language"in o){const t=o["@language"]||"@null";s(e,c["@language"],t)}else s(e,c["@language"],i),s(e,c["@type"],"@none"),s(e,c["@language"],"@none")}}for(const e in r)o(r,e,1);return t},clone:function(){const e={};return e["@base"]=this["@base"],e.mappings=yJ.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=yJ.clone(this.protected),this.previousContext&&(e.isPropertyTermScoped=this.previousContext.isPropertyTermScoped,e.previousContext=this.previousContext.clone()),e.revertTypeScopedContext=this.revertTypeScopedContext,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertTypeScopedContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===$J.size&&$J.clear(),$J.set(r,i),i;function o(e,t,r){const n=e[t],i=e[t]={};let s,a;for(const e of n)s=e.iri,a=r>=s.length?"":s[r],a in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&o(i,e,r+1)}function s(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},WJ.getContextValue=(e,t,r)=>{if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){const n=e.mappings.get(t);if(UJ(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&e.hasOwnProperty(r)?e[r]:"@context"!==r?null:void 0},WJ.getAllContexts=async(e,t)=>async function(e,t){const r=yJ.normalizeDocumentLoader(t.documentLoader);return await async function e(r,n,i){if(n.size>10)throw new lJ("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});const o=new Map;if(XJ(r,o,!1,t.base),0===o.size)return;const s=[...o.keys()].filter((e=>!1===o.get(e)));return Promise.all(s.map((async s=>{if(n.has(s))throw new lJ("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:s});const a=new Set(n);let u,c;a.add(s);try{u=await i(s),c=u.document||null,BJ(c)&&(c=JSON.parse(c))}catch(e){throw new lJ("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:s,cause:e})}if(!DJ(c))throw new lJ("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:s});c="@context"in c?{"@context":c["@context"]}:{"@context":{}},u.contextUrl&&(jJ(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(u.contextUrl)),await e(c,a,i),o.set(s,c["@context"]),XJ(r,o,!0,t.base)})))}(e,new Set,r),e}(e,t),WJ.processingMode=(e,t)=>t.toString()>="1.1"?e.processingMode&&e.processingMode>="json-ld-"+t.toString():!e.processingMode||"json-ld-1.0"===e.processingMode,WJ.isKeyword=e=>{if(!BJ(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};const{isArray:ZJ,isObject:QJ,isEmptyObject:eX,isString:tX,isUndefined:rX}=aJ,{isList:nX,isValue:iX,isGraph:oX}=cJ,{expandIri:sX,getContextValue:aX,isKeyword:uX,process:cX,processingMode:lX}=GJ,{isAbsolute:hX}=RJ,{addValue:fX,asArray:dX,getValues:pX,validateTypeValue:gX}=yJ,mX={};var yX=mX;function vX({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o={},insideList:s,expansionMap:a}){const u=Object.keys(n).sort(),c=[];for(const l of u){let u,h=n[l];if("@context"===l)continue;let f=sX(e,l,{vocab:!0},o);if((null===f||!hX(f)&&!uX(f))&&(f=a({unmappedProperty:l,activeCtx:e,activeProperty:t,parent:n,options:o,insideList:s,value:h,expandedParent:i}),void 0===f))continue;if(uX(f)){if("@reverse"===r)throw new lJ("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:h});if(f in i)throw new lJ("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:f})}if("@id"===f){if(!tX(h)){if(!o.isFrame)throw new lJ('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:h});if(QJ(h)){if(!eX(h))throw new lJ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}else{if(!ZJ(h))throw new lJ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h});if(!h.every((e=>tX(e))))throw new lJ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}}fX(i,"@id",dX(h).map((t=>tX(t)?sX(e,t,{base:!0},o):t)),{propertyIsArray:o.isFrame});continue}if("@type"===f){gX(h),fX(i,"@type",dX(h).map((t=>tX(t)?sX(e.previousContext||e,t,{base:!0,vocab:!0},o):t)),{propertyIsArray:o.isFrame});continue}if("@graph"===f&&!QJ(h)&&!ZJ(h))throw new lJ('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:h});if("@value"===f){fX(i,"@value",h,{propertyIsArray:o.isFrame});continue}if("@language"===f){if(null===h)continue;if(!tX(h)&&!o.isFrame)throw new lJ('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:h});h=dX(h).map((e=>tX(e)?e.toLowerCase():e)),fX(i,"@language",h,{propertyIsArray:o.isFrame});continue}if("@index"===f){if(!tX(h))throw new lJ('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:h});fX(i,"@index",h);continue}if("@reverse"===f){if(!QJ(h))throw new lJ('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:h});if(u=mX.expand({activeCtx:e,activeProperty:"@reverse",element:h,options:o,expansionMap:a}),"@reverse"in u)for(const e in u["@reverse"])fX(i,e,u["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in u){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),fX(t,e,[],{propertyIsArray:!0});const r=u[e];for(let n=0;n<r.length;++n){const i=r[n];if(iX(i)||nX(i))throw new lJ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:u});fX(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===f){c.push(l);continue}let d=e;const p=aX(e,l,"@context");rX(p)||(d=cX({activeCtx:e,localCtx:p,isPropertyTermScopedContext:!0,options:o}));const g=aX(d,l,"@container")||[];if(g.includes("@language")&&QJ(h))u=bX(d,h,o);else if(g.includes("@index")&&QJ(h)){const e=g.includes("@graph");u=wX({activeCtx:d,options:o,activeProperty:l,value:h,expansionMap:a,asGraph:e,indexKey:"@index"})}else if(g.includes("@id")&&QJ(h)){const e=g.includes("@graph");u=wX({activeCtx:d,options:o,activeProperty:l,value:h,expansionMap:a,asGraph:e,indexKey:"@id"})}else if(g.includes("@type")&&QJ(h))u=wX({activeCtx:d.revertTypeScopedContext(),options:o,activeProperty:l,value:h,expansionMap:a,asGraph:!1,indexKey:"@type"});else{const n="@list"===f;if(n||"@set"===f){let e=t;n&&"@graph"===r&&(e=null),u=mX.expand({activeCtx:d,activeProperty:e,element:h,options:o,insideList:n,expansionMap:a})}else u="@json"===aX(e,l,"@type")?{"@type":"@json","@value":h}:mX.expand({activeCtx:d,activeProperty:l,element:h,options:o,insideList:!1,expansionMap:a})}if(null===u&&"@value"!==f&&(u=a({unmappedValue:h,expandedProperty:f,activeCtx:d,activeProperty:t,parent:n,options:o,insideList:s,key:l,expandedParent:i}),void 0===u))continue;if("@list"!==f&&!nX(u)&&g.includes("@list")&&(u={"@list":dX(u)}),g.includes("@graph")&&!g.some((e=>"@id"===e||"@index"===e))&&(u=dX(u).map((e=>oX(e)?e:{"@graph":dX(e)}))),d.mappings.has(l)&&d.mappings.get(l).reverse){const e=i["@reverse"]=i["@reverse"]||{};u=dX(u);for(let t=0;t<u.length;++t){const r=u[t];if(iX(r)||nX(r))throw new lJ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:u});fX(e,f,r,{propertyIsArray:!0})}continue}const m=!["@index","@id","@type","@value","@language"].includes(f);fX(i,f,u,{propertyIsArray:m})}if("@value"in n){const t=n["@value"];if("@json"===n["@type"]&&lX(e,1.1));else if((QJ(t)||ZJ(t))&&!o.isFrame)throw new lJ('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:t})}for(const u of c){const c=ZJ(n[u])?n[u]:[n[u]];for(const n of c){if(!QJ(n)||Object.keys(n).some((t=>"@value"===sX(e,t,{vocab:!0},o))))throw new lJ("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:n});vX({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o,insideList:s,expansionMap:a})}}}function bX(e,t,r){const n=[],i=Object.keys(t).sort();for(const o of i){const i=sX(e,o,{vocab:!0},r);let s=t[o];ZJ(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!tX(e))throw new lJ("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const r={"@value":e};"@none"!==i&&(r["@language"]=o.toLowerCase()),n.push(r)}}return n}function wX({activeCtx:e,options:t,activeProperty:r,value:n,expansionMap:i,asGraph:o,indexKey:s}){const a=[],u=Object.keys(n).sort(),c="@type"===s;for(let l of u){if(c){const r=aX(e,l,"@context");rX(r)||(e=cX({activeCtx:e,localCtx:r,isTypeScopedContext:!0,options:t}))}let u=n[l];ZJ(u)||(u=[u]);const h=sX(e,l,{vocab:!0},t);"@id"===s?l=sX(e,l,{base:!0},t):c&&(l=h),u=mX.expand({activeCtx:e,activeProperty:r,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i});for(let e of u)o&&!oX(e)&&(e={"@graph":[e]}),"@type"===s?"@none"===h||(e["@type"]?e["@type"]=[l].concat(e["@type"]):e["@type"]=[l]):"@none"===h||s in e||(e[s]=l),a.push(e)}return a}mX.expand=({activeCtx:e,activeProperty:t=null,element:r,options:n={},insideList:i=!1,insideIndex:o=!1,typeScopedContext:s=null,expansionMap:a=(()=>{})})=>{if(null==r)return null;if("@default"===t&&(n=Object.assign({},n,{isFrame:!1})),!ZJ(r)&&!QJ(r)){if(!i&&(null===t||"@graph"===sX(e,t,{vocab:!0},n))){const o=a({unmappedValue:r,activeCtx:e,activeProperty:t,options:n,insideList:i});return void 0===o?null:o}return function({activeCtx:e,activeProperty:t,value:r,options:n}){if(null==r)return null;const i=sX(e,t,{vocab:!0},n);if("@id"===i)return sX(e,r,{base:!0},n);if("@type"===i)return sX(e,r,{vocab:!0,base:!0},n);const o=aX(e,t,"@type");if(("@id"===o||"@graph"===i)&&tX(r))return{"@id":sX(e,r,{base:!0},n)};if("@vocab"===o&&tX(r))return{"@id":sX(e,r,{vocab:!0,base:!0},n)};if(uX(i))return r;const s={};if(o&&!["@id","@vocab"].includes(o))s["@type"]=o;else if(tX(r)){const r=aX(e,t,"@language");null!==r&&(s["@language"]=r)}return["boolean","number","string"].includes(typeof r)||(r=r.toString()),s["@value"]=r,s}({activeCtx:e,activeProperty:t,value:r,options:n})}if(ZJ(r)){let u=[];const c=aX(e,t,"@container")||[];i=i||c.includes("@list");for(let c=0;c<r.length;++c){let l=mX.expand({activeCtx:e,activeProperty:t,element:r[c],options:n,expansionMap:a,insideIndex:o,typeScopedContext:s});i&&ZJ(l)&&(l={"@list":l}),null===l&&(l=a({unmappedValue:r[c],activeCtx:e,activeProperty:t,parent:r,index:c,options:n,expandedParent:u,insideList:i}),void 0===l)||(ZJ(l)?u=u.concat(l):u.push(l))}return u}const u=sX(e,t,{vocab:!0},n);s=s||(e.previousContext?e:null);let c=Object.keys(r).sort(),l=!o;if(l&&s&&c.length<=2&&!c.includes("@context"))for(const t of c){const r=sX(s,t,{vocab:!0},n);if("@value"===r){l=!1,e=s;break}if("@id"===r&&1===c.length){l=!1;break}}l&&(e=e.revertTypeScopedContext()),"@context"in r&&(e=cX({activeCtx:e,localCtx:r["@context"],options:n}));for(const t of c)if("@type"===sX(e,t,{vocab:!0},n)){const i=r[t],o=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of o){const r=aX(e.previousContext||e,t,"@context");rX(r)||(e=cX({activeCtx:e,localCtx:r,options:n,isTypeScopedContext:!0}))}}let h={};vX({activeCtx:e,activeProperty:t,expandedActiveProperty:u,element:r,expandedParent:h,options:n,insideList:i,typeScopedContext:s,expansionMap:a}),c=Object.keys(h);let f=c.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new lJ('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});let o=f-1;if("@type"in h&&(o-=1),"@index"in h&&(o-=1),"@language"in h&&(o-=1),0!==o)throw new lJ('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});const s=null===h["@value"]?[]:dX(h["@value"]),u=pX(h,"@type");if(0===s.length){const o=a({unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}else{if(!s.every((e=>tX(e)||eX(e)))&&"@language"in h)throw new lJ("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if(lX(e,1.1)&&u.includes("@json")&&1===u.length);else if(!u.every((e=>hX(e)&&!(tX(e)&&0===e.indexOf("_:"))||eX(e))))throw new lJ('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!ZJ(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(f>1&&(2!==f||!("@index"in h)))throw new lJ('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],c=Object.keys(h),f=c.length)}else if(1===f&&"@language"in h){const o=a(h,{unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}if(QJ(h)&&!n.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===u)&&(0===f||"@value"in h||"@list"in h||1===f&&"@id"in h)){const o=a({unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}return h};const{isKeyword:_X}=GJ,xX={};var SX=xX;xX.createMergedNodeMap=(e,t)=>{const r=(t=t||{}).issuer||new yJ.IdentifierIssuer("_:b"),n={"@default":{}};return xX.createNodeMap(e,n,"@default",r),xX.mergeNodeMaps(n)},xX.createNodeMap=(e,t,r,n,i,o)=>{if(aJ.isArray(e)){for(const i of e)xX.createNodeMap(i,t,r,n,void 0,o);return}if(!aJ.isObject(e))return void(o&&o.push(e));if(cJ.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=n.getId(t))}return void(o&&o.push(e))}if(o&&cJ.isList(e)){const s=[];return xX.createNodeMap(e["@list"],t,r,n,i,s),void o.push({"@list":s})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&n.getId(e)}aJ.isUndefined(i)&&(i=cJ.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),o&&o.push({"@id":i});const s=t[r],a=s[i]=s[i]||{};a["@id"]=i;const u=Object.keys(e).sort();for(let o of u){if("@id"===o)continue;if("@reverse"===o){const o={"@id":i},a=e["@reverse"];for(const e in a){const i=a[e];for(const a of i){let i=a["@id"];cJ.isBlankNode(a)&&(i=n.getId(i)),xX.createNodeMap(a,t,r,n,i),yJ.addValue(s[i],e,o,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){i in t||(t[i]={}),xX.createNodeMap(e[o],t,i,n);continue}if("@type"!==o&&_X(o)){if("@index"===o&&o in a&&(e[o]!==a[o]||e[o]["@id"]!==a[o]["@id"]))throw new lJ("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[o]=e[o];continue}const u=e[o];if(0===o.indexOf("_:")&&(o=n.getId(o)),0!==u.length)for(let e of u)if("@type"===o&&(e=0===e.indexOf("_:")?n.getId(e):e),cJ.isSubject(e)||cJ.isSubjectReference(e)){const i=cJ.isBlankNode(e)?n.getId(e["@id"]):e["@id"];yJ.addValue(a,o,{"@id":i},{propertyIsArray:!0,allowDuplicate:!1}),xX.createNodeMap(e,t,r,n,i)}else if(cJ.isValue(e))yJ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(cJ.isList(e)){const s=[];xX.createNodeMap(e["@list"],t,r,n,i,s),e={"@list":s},yJ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else xX.createNodeMap(e,t,r,n,i),yJ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else yJ.addValue(a,o,[],{propertyIsArray:!0})}},xX.mergeNodeMapGraphs=e=>{const t={};for(const r of Object.keys(e).sort())for(const n of Object.keys(e[r]).sort()){const i=e[r][n];n in t||(t[n]={"@id":n});const o=t[n];for(const e of Object.keys(i).sort())if(_X(e))o[e]=yJ.clone(i[e]);else for(const t of i[e])yJ.addValue(o,e,yJ.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},xX.mergeNodeMaps=e=>{const t=e["@default"],r=Object.keys(e).sort();for(const n of r){if("@default"===n)continue;const r=e[n];let i=t[n];i?"@graph"in i||(i["@graph"]=[]):t[n]=i={"@id":n,"@graph":[]};const o=i["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];cJ.isSubjectReference(t)||o.push(t)}}return t};const{isSubjectReference:EX}=cJ,{createMergedNodeMap:kX}=SX,IX={};var AX=IX;IX.flatten=e=>{const t=kX(e),r=[],n=Object.keys(t).sort();for(let e=0;e<n.length;++e){const i=t[n[e]];EX(i)||r.push(i)}return r};const{RDF_LIST:TX,RDF_FIRST:PX,RDF_REST:OX,RDF_NIL:CX,RDF_TYPE:MX,RDF_JSON_LITERAL:NX,XSD_BOOLEAN:RX,XSD_DOUBLE:LX,XSD_INTEGER:jX,XSD_STRING:DX}=kJ,BX={};var UX=BX;function FX(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};const r={"@value":e.value};if(e.language)r["@language"]=e.language;else{let n=e.datatype.value;if(n||(n=DX),n===NX){n="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(e){throw new lJ("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:e})}}if(t){if(n===RX)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(aJ.isNumeric(r["@value"]))if(n===jX){const e=parseInt(r["@value"],10);e.toFixed(0)===r["@value"]&&(r["@value"]=e)}else n===LX&&(r["@value"]=parseFloat(r["@value"]));[RX,jX,LX,DX].includes(n)||(r["@type"]=n)}else n!==DX&&(r["@type"]=n)}return r}BX.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:r=!1})=>{const n={},i={"@default":n},o={};for(const s of e){const e="DefaultGraph"===s.graph.termType?"@default":s.graph.value;e in i||(i[e]={}),"@default"===e||e in n||(n[e]={"@id":e});const a=i[e],u=s.subject.value,c=s.predicate.value,l=s.object;u in a||(a[u]={"@id":u});const h=a[u],f=l.termType.endsWith("Node");if(f&&!(l.value in a)&&(a[l.value]={"@id":l.value}),c===MX&&!t&&f){yJ.addValue(h,"@type",l.value,{propertyIsArray:!0});continue}const d=FX(l,r);if(yJ.addValue(h,c,d,{propertyIsArray:!0}),f)if(l.value===CX){const e=a[l.value];"usages"in e||(e.usages=[]),e.usages.push({node:h,property:c,value:d})}else l.value in o?o[l.value]=!1:o[l.value]={node:h,property:c,value:d}}for(const e in i){const t=i[e];if(!(CX in t))continue;const r=t[CX];if(r.usages){for(let e of r.usages){let r=e.node,n=e.property,i=e.value;const s=[],a=[];let u=Object.keys(r).length;for(;n===OX&&aJ.isObject(o[r["@id"]])&&aJ.isArray(r[PX])&&1===r[PX].length&&aJ.isArray(r[OX])&&1===r[OX].length&&(3===u||4===u&&aJ.isArray(r["@type"])&&1===r["@type"].length&&r["@type"][0]===TX)&&(s.push(r[PX][0]),a.push(r["@id"]),e=o[r["@id"]],r=e.node,n=e.property,i=e.value,u=Object.keys(r).length,cJ.isBlankNode(r)););delete i["@id"],i["@list"]=s.reverse();for(const e of a)delete t[e]}delete r.usages}}const s=[],a=Object.keys(n).sort();for(const e of a){const t=n[e];if(e in i){const r=t["@graph"]=[],n=i[e],o=Object.keys(n).sort();for(const e of o){const t=n[e];cJ.isSubjectReference(t)||r.push(t)}}cJ.isSubjectReference(t)||s.push(t)}return s};var zX=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,r,n)=>t+(0===n?"":",")+e(void 0===r||"symbol"==typeof r?null:r)),"")+"]":"{"+Object.keys(t).sort().reduce(((r,n,i)=>void 0===t[n]||"symbol"==typeof t[n]?r:r+(0===r.length?"":",")+e(n)+":"+e(t[n])),"")+"}"};const{createNodeMap:VX}=SX,{isKeyword:HX}=GJ,{RDF_FIRST:KX,RDF_REST:qX,RDF_NIL:$X,RDF_TYPE:WX,RDF_JSON_LITERAL:GX,RDF_LANGSTRING:JX,XSD_BOOLEAN:XX,XSD_DOUBLE:YX,XSD_INTEGER:ZX,XSD_STRING:QX}=kJ,{isAbsolute:eY}=RJ,tY={};var rY=tY;function nY(e,t,r,n,i){const o=Object.keys(t).sort();for(const s of o){const o=t[s],a=Object.keys(o).sort();for(let t of a){const a=o[t];if("@type"===t)t=WX;else if(HX(t))continue;for(const o of a){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!eY(s))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!eY(t))continue;if("BlankNode"===u.termType&&!i.produceGeneralizedRdf)continue;const c=iY(o,n,e,r);c&&e.push({subject:a,predicate:u,object:c,graph:r})}}}}function iY(e,t,r,n){const i={};if(cJ.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let t=e["@value"];const r=e["@type"]||null;"@json"===r?(i.value=zX(t),i.datatype.value=GX):aJ.isBoolean(t)?(i.value=t.toString(),i.datatype.value=r||XX):aJ.isDouble(t)||r===YX?(aJ.isDouble(t)||(t=parseFloat(t)),i.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=r||YX):aJ.isNumber(t)?(i.value=t.toFixed(0),i.datatype.value=r||ZX):"@language"in e?(i.value=t,i.datatype.value=r||JX,i.language=e["@language"]):(i.value=t,i.datatype.value=r||QX)}else if(cJ.isList(e)){const o=function(e,t,r,n){const i={termType:"NamedNode",value:KX},o={termType:"NamedNode",value:qX},s={termType:"NamedNode",value:$X},a=e.pop(),u=a?{termType:"BlankNode",value:t.getId()}:s;let c=u;for(const s of e){const e=iY(s,t,r,n),a={termType:"BlankNode",value:t.getId()};r.push({subject:c,predicate:i,object:e,graph:n}),r.push({subject:c,predicate:o,object:a,graph:n}),c=a}if(a){const e=iY(a,t,r,n);r.push({subject:c,predicate:i,object:e,graph:n}),r.push({subject:c,predicate:o,object:s,graph:n})}return u}(e["@list"],t,r,n);i.termType=o.termType,i.value=o.value}else{const t=aJ.isObject(e)?e["@id"]:e;i.termType=t.startsWith("_:")?"BlankNode":"NamedNode",i.value=t}return"NamedNode"!==i.termType||eY(i.value)?i:null}tY.toRDF=(e,t)=>{const r=new yJ.IdentifierIssuer("_:b"),n={"@default":{}};VX(e,n,"@default",r);const i=[],o=Object.keys(n).sort();for(const e of o){let o;if("@default"===e)o={termType:"DefaultGraph",value:""};else{if(!eY(e))continue;o=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},o.value=e}nY(i,n[e],o,r,t)}return i};const{isKeyword:oY}=GJ,{createNodeMap:sY,mergeNodeMapGraphs:aY}=SX,uY={};var cY=uY;function lY(e){const t={};for(const r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function hY(e,t,r){for(let n=r.length-1;n>=0;--n){const i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function fY(e,t,r){const n="@"+r;let i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function dY(e){if(!aJ.isArray(e)||1!==e.length||!aJ.isObject(e[0]))throw new lJ("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function pY(e,t,r,n){let i=!0,o=!1;for(const s in r){let a=!1;const u=yJ.getValues(t,s),c=0===yJ.getValues(r,s).length;if(oY(s)){if("@id"!==s&&"@type"!==s)continue;if(i=!1,"@id"===s){if(r["@id"].length>=0&&!aJ.isEmptyObject(r["@id"][0]))return r["@id"].includes(u[0]);a=!0;continue}if("@type"in r)if(c){if(u.length>0)return!1;a=!0}else{if(1!==r["@type"].length||!aJ.isEmptyObject(r["@type"][0])){for(const e of r["@type"])if(u.some((t=>t===e)))return!0;return!1}a=u.length>0}}const l=yJ.getValues(r,s)[0];let h=!1;if(l&&(dY([l]),h="@default"in l),i=!1,0!==u.length||!h){if(u.length>0&&c)return!1;if(void 0===l){if(u.length>0)return!1;a=!0}else if(aJ.isObject(l))a=u.length>0;else if(cJ.isValue(l))a=u.some((e=>vY(l,e)));else if(cJ.isSubject(l)||cJ.isSubjectReference(l))a=u.some((t=>yY(e,l,t,n)));else if(cJ.isList(l)){const t=l["@list"][0];if(cJ.isList(u[0])){const r=u[0]["@list"];cJ.isValue(t)?a=r.some((e=>vY(t,e))):(cJ.isSubject(t)||cJ.isSubjectReference(t))&&(a=r.some((r=>yY(e,t,r,n))))}else a=!1}if(!a&&n.requireAll)return!1;o=o||a}}return i||o}function gY(e,t){const r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,o=n.property,s={"@id":t};if(aJ.isArray(i)){for(let e=0;e<i.length;++e)if(yJ.compareValues(i[e],s)){i[e]=s;break}}else{const e=aJ.isArray(i[o]);yJ.removeValue(i,o,s,{propertyIsArray:e}),yJ.addValue(i,o,s,{propertyIsArray:e})}const a=e=>{const t=Object.keys(r);for(const n of t)n in r&&aJ.isObject(r[n].parent)&&r[n].parent["@id"]===e&&(delete r[n],a(n))};a(t)}function mY(e,t,r){aJ.isObject(e)?yJ.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function yY(e,t,r,n){if(!("@id"in r))return!1;const i=e.subjects[r["@id"]];return i&&pY(e,i,t,n)}function vY(e,t){const r=t["@value"],n=t["@type"],i=t["@language"],o=e["@value"]?aJ.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?aJ.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],a=e["@language"]?aJ.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===o.length&&0===s.length&&0===a.length||!(!o.includes(r)&&!aJ.isEmptyObject(o[0]))&&!!(!n&&0===s.length||s.includes(n)||n&&aJ.isEmptyObject(s[0]))&&!!(!i&&0===a.length||a.includes(i)||i&&aJ.isEmptyObject(a[0]))}uY.frameMergedOrDefault=(e,t,r)=>{const n={options:r,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},i=new yJ.IdentifierIssuer("_:b");sY(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=aY(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];const o=[];return uY.frame(n,Object.keys(n.subjects).sort(),t,o),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((e=>1===n.bnodeMap[e].length))),o},uY.frame=(e,t,r,n,i=null)=>{dY(r),r=r[0];const o=e.options,s={embed:fY(r,o,"embed"),explicit:fY(r,o,"explicit"),requireAll:fY(r,o,"requireAll")},a=function(e,t,r,n){const i={};for(const o of t){const t=e.graphMap[e.graph][o];pY(e,t,r,n)&&(i[o]=t)}return i}(e,t,r,s),u=Object.keys(a).sort();for(const t of u){const u=a[t];if("@link"===s.embed&&t in e.link){mY(n,i,e.link[t]);continue}null===i?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};const c={};if(c["@id"]=t,0===t.indexOf("_:")&&yJ.addValue(e.bnodeMap,t,c,{propertyIsArray:!0}),e.link[t]=c,"@never"===s.embed||hY(u,e.graph,e.subjectStack))mY(n,i,c);else{if("@last"===s.embed&&(t in e.uniqueEmbeds[e.graph]&&gY(e,t),e.uniqueEmbeds[e.graph][t]={parent:n,property:i}),e.subjectStack.push({subject:u,graph:e.graph}),t in e.graphMap){let n=!1,i=null;"@graph"in r?(i=r["@graph"][0],aJ.isObject(i)||(i={}),n=!("@merged"===t||"@default"===t)):(n="@merged"!==e.graph,i={}),n&&(e.graphStack.push(e.graph),e.graph=t,uY.frame(e,Object.keys(e.graphMap[t]).sort(),[i],c,"@graph"),e.graph=e.graphStack.pop)}for(const t of Object.keys(u).sort())if(oY(t)){if(c[t]=yJ.clone(u[t]),"@type"===t)for(const t of u["@type"])0===t.indexOf("_:")&&yJ.addValue(e.bnodeMap,t,c,{propertyIsArray:!0})}else if(!s.explicit||t in r)for(let n of u[t]){const i=t in r?r[t]:lY(s);if(cJ.isList(n)){const i={"@list":[]};mY(c,t,i);const o=n["@list"];for(const a in o)if(n=o[a],cJ.isSubjectReference(n)){const o=t in r?r[t][0]["@list"]:lY(s);uY.frame(e,[n["@id"]],o,i,"@list")}else mY(i,"@list",yJ.clone(n))}else cJ.isSubjectReference(n)?uY.frame(e,[n["@id"]],i,c,t):vY(i[0],n)&&mY(c,t,yJ.clone(n))}for(const e of Object.keys(r).sort()){if(oY(e))continue;const t=r[e][0]||{};if(!fY(t,o,"omitDefault")&&!(e in c)){let r="@null";"@default"in t&&(r=yJ.clone(t["@default"])),aJ.isArray(r)||(r=[r]),c[e]=[{"@preserve":r}]}}if("@reverse"in r)for(const n of Object.keys(r["@reverse"]).sort()){const o=r["@reverse"][n];for(const r of Object.keys(e.subjects))yJ.getValues(e.subjects[r],n).some((e=>e["@id"]===t))&&(c["@reverse"]=c["@reverse"]||{},yJ.addValue(c["@reverse"],n,[],{propertyIsArray:!0}),uY.frame(e,[r],o,c["@reverse"][n],i))}mY(n,i,c),e.subjectStack.pop()}}};const{isArray:bY,isObject:wY,isString:_Y,isUndefined:xY}=aJ,{isList:SY,isValue:EY,isGraph:kY,isSimpleGraph:IY,isSubjectReference:AY}=cJ,{expandIri:TY,getContextValue:PY,isKeyword:OY,process:CY}=GJ,{removeBase:MY}=RJ,{addValue:NY,asArray:RY,compareShortestLeast:LY}=yJ,jY={};var DY=jY;function BY(e,t,r){if("@nest"!==TY(e,t,{vocab:!0},r))throw new lJ("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}jY.compact=({activeCtx:e,activeProperty:t=null,element:r,options:n={},compactionMap:i=(()=>{})})=>{if(bY(r)){let o=[];for(let s=0;s<r.length;++s){let a=jY.compact({activeCtx:e,activeProperty:t,element:r[s],options:n,compactionMap:i});null===a&&(a=i({unmappedValue:r[s],activeCtx:e,activeProperty:t,parent:r,index:s,options:n}),void 0===a)||o.push(a)}return n.compactArrays&&1===o.length&&0===(PY(e,t,"@container")||[]).length&&(o=o[0]),o}const o=PY(e,t,"@context");if(xY(o)||(e=CY({activeCtx:e,localCtx:o,isPropertyTermScopedContext:!0,options:n})),wY(r)){if(n.link&&"@id"in r&&n.link.hasOwnProperty(r["@id"])){const e=n.link[r["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===r)return e[t].compacted}if(EY(r)||AY(r)){const i=jY.compactValue({activeCtx:e,activeProperty:t,value:r,options:n});return n.link&&AY(r)&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:i})),i}if(SY(r)&&(PY(e,t,"@container")||[]).includes("@list"))return jY.compact({activeCtx:e,activeProperty:t,element:r["@list"],options:n,compactionMap:i});const o="@reverse"===t,s={};e=e.revertTypeScopedContext(),n.link&&"@id"in r&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:s}));let a=r["@type"]||[];a.length>1&&(a=Array.from(a).sort());const u=e;for(const t of a){const r=jY.compactIri({activeCtx:u,iri:t,relativeTo:{vocab:!0}}),i=PY(u,r,"@context");xY(i)||(e=CY({activeCtx:e,localCtx:i,options:n,isTypeScopedContext:!0}))}const c=Object.keys(r).sort();for(const a of c){const u=r[a];if("@id"!==a&&"@type"!==a)if("@reverse"!==a)if("@preserve"!==a)if("@index"!==a)if("@graph"!==a&&"@list"!==a&&OY(a)){const t=jY.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});NY(s,t,u)}else{if(!bY(u))throw new lJ("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===u.length){const t=jY.compactIri({activeCtx:e,iri:a,value:u,relativeTo:{vocab:!0},reverse:o}),r=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let i=s;r&&(BY(e,r,n),wY(s[r])||(s[r]={}),i=s[r]),NY(i,t,u,{propertyIsArray:!0})}for(const t of u){const r=jY.compactIri({activeCtx:e,iri:a,value:t,relativeTo:{vocab:!0},reverse:o}),u=e.mappings.has(r)?e.mappings.get(r)["@nest"]:null;let c=s;u&&(BY(e,u,n),wY(s[u])||(s[u]={}),c=s[u]);const l=PY(e,r,"@container")||[],h=kY(t),f=SY(t);let d;f?d=t["@list"]:h&&(d=t["@graph"]);let p=jY.compact({activeCtx:e,activeProperty:r,element:f||h?d:t,options:n,compactionMap:i});if(f){if(bY(p)||(p=[p]),l.includes("@list")){NY(c,r,p,{valueIsArray:!0,allowDuplicate:!0});continue}p={[jY.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:p},"@index"in t&&(p[jY.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(h)if(l.includes("@graph")&&(l.includes("@id")||l.includes("@index")&&IY(t))){let i;c.hasOwnProperty(r)?i=c[r]:c[r]=i={};const o=(l.includes("@id")?t["@id"]:t["@index"])||jY.compactIri({activeCtx:e,iri:"@none",vocab:!0});NY(i,o,p,{propertyIsArray:!n.compactArrays||l.includes("@set")})}else l.includes("@graph")&&IY(t)||(bY(p)&&1===p.length&&n.compactArrays&&(p=p[0]),p={[jY.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:p},"@id"in t&&(p[jY.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(p[jY.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])),NY(c,r,p,{propertyIsArray:!n.compactArrays||l.includes("@set")});else if(l.includes("@language")||l.includes("@index")||l.includes("@id")||l.includes("@type")){let n,i;if(c.hasOwnProperty(r)?n=c[r]:c[r]=n={},l.includes("@language"))EY(p)&&(p=p["@value"]),i=t["@language"];else if(l.includes("@index"))i=t["@index"];else if(l.includes("@id")){const t=jY.compactIri({activeCtx:e,iri:"@id",vocab:!0});i=p[t],delete p[t]}else if(l.includes("@type")){const t=jY.compactIri({activeCtx:e,iri:"@type",vocab:!0});let r;switch([i,...r]=RY(p[t]||[]),r.length){case 0:delete p[t];break;case 1:p[t]=r[0];break;default:p[t]=r}}i||(i=jY.compactIri({activeCtx:e,iri:"@none",vocab:!0})),NY(n,i,p,{propertyIsArray:l.includes("@set")})}else{const e=!n.compactArrays||l.includes("@set")||l.includes("@list")||bY(p)&&0===p.length||"@list"===a||"@graph"===a;NY(c,r,p,{propertyIsArray:e})}}}else{if((PY(e,t,"@container")||[]).includes("@index"))continue;const r=jY.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});NY(s,r,u)}else{const r=jY.compact({activeCtx:e,activeProperty:t,element:u,options:n,compactionMap:i});bY(r)&&0===r.length||NY(s,a,r)}else{const t=jY.compact({activeCtx:e,activeProperty:"@reverse",element:u,options:n,compactionMap:i});for(const r in t)if(e.mappings.has(r)&&e.mappings.get(r).reverse){const i=t[r],o=(PY(e,r,"@container")||[]).includes("@set")||!n.compactArrays;NY(s,r,i,{propertyIsArray:o}),delete t[r]}if(Object.keys(t).length>0){const r=jY.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});NY(s,r,t)}}else{const t="@type"===a,r=t&&e.previousContext||e;let n=RY(u).map((e=>jY.compactIri({activeCtx:r,iri:e,relativeTo:{vocab:t}})));1===n.length&&(n=n[0]);const i=jY.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}}),o=bY(n)&&0===u.length;NY(s,i,n,{propertyIsArray:o})}}return s}return r},jY.compactIri=({activeCtx:e,iri:t,value:r=null,relativeTo:n={vocab:!1},reverse:i=!1})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if(OY(t)&&t in o&&"@none"in o[t]&&"@type"in o[t]["@none"]&&"@none"in o[t]["@none"]["@type"])return o[t]["@none"]["@type"]["@none"];if(n.vocab&&t in o){const n=e["@language"]||"@none",o=[];wY(r)&&"@index"in r&&!("@graph"in r)&&o.push("@index","@index@set"),wY(r)&&"@preserve"in r&&(r=r["@preserve"][0]),kY(r)?("@index"in r&&o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r&&o.push("@graph@id","@graph@id@set"),o.push("@graph","@graph@set","@set"),"@index"in r||o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r||o.push("@graph@id","@graph@id@set")):wY(r)&&!EY(r)&&o.push("@id","@id@set","@type","@set@type");let s="@language",a="@null";if(i)s="@type",a="@reverse",o.push("@set");else if(SY(r)){"@index"in r||o.push("@list");const e=r["@list"];if(0===e.length)s="@any",a="@none";else{let t=0===e.length?n:null,r=null;for(let n=0;n<e.length;++n){const i=e[n];let o="@none",s="@none";if(EY(i)?"@language"in i?o=i["@language"]:"@type"in i?s=i["@type"]:o="@null":s="@id",null===t?t=o:o!==t&&EY(i)&&(t="@none"),null===r?r=s:s!==r&&(r="@none"),"@none"===t&&"@none"===r)break}t=t||"@none",r=r||"@none","@none"!==r?(s="@type",a=r):a=t}}else EY(r)?"@language"in r&&!("@index"in r)?(o.push("@language","@language@set"),a=r["@language"]):"@type"in r&&(s="@type",a=r["@type"]):(s="@type",a="@id"),o.push("@set");o.push("@none"),wY(r)&&!("@index"in r)&&o.push("@index","@index@set"),EY(r)&&1===Object.keys(r).length&&o.push("@language","@language@set");const u=function(e,t,r,n,i,o){null===o&&(o="@null");const s=[];if("@id"!==o&&"@reverse"!==o||!AY(r))s.push(o);else{"@reverse"===o&&s.push("@reverse");const t=jY.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}s.push("@none");const a=e.inverse[t];for(let e=0;e<n.length;++e){const t=n[e];if(!(t in a))continue;const r=a[t][i];for(let e=0;e<s.length;++e){const t=s[e];if(t in r)return r[t]}}return null}(e,t,r,o,s,a);if(null!==u)return u}if(n.vocab&&"@vocab"in e){const r=e["@vocab"];if(0===t.indexOf(r)&&t!==r){const n=t.substr(r.length);if(!e.mappings.has(n))return n}}let s=null;const a=[];let u=e.fastCurieMap;const c=t.length-1;for(let e=0;e<c&&t[e]in u;++e)u=u[t[e]],""in u&&a.push(u[""][0]);for(let n=a.length-1;n>=0;--n){const i=a[n],o=i.terms;for(const n of o){const o=n+":"+t.substr(i.iri.length);e.mappings.get(n)._prefix&&(!e.mappings.has(o)||null===r&&e.mappings.get(o)["@id"]===t)&&(null===s||LY(o,s)<0)&&(s=o)}}return null!==s?s:n.vocab?t:MY(e["@base"],t)},jY.compactValue=({activeCtx:e,activeProperty:t,value:r,options:n})=>{if(EY(r)){const n=PY(e,t,"@type"),i=PY(e,t,"@language"),o=PY(e,t,"@container")||[],s="@index"in r&&!o.includes("@index");if(!s&&(r["@type"]===n||r["@language"]===i))return r["@value"];const a=Object.keys(r).length,u=1===a||2===a&&"@index"in r&&!s,c="@language"in e,l=_Y(r["@value"]),h=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(u&&(!c||!l||h))return r["@value"];const f={};return s&&(f[jY.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=r["@index"]),"@type"in r?f[jY.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=jY.compactIri({activeCtx:e,iri:r["@type"],relativeTo:{vocab:!0}}):"@language"in r&&(f[jY.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=r["@language"]),f[jY.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=r["@value"],f}const i=TY(e,t,{vocab:!0},n),o=PY(e,t,"@type"),s=jY.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:"@vocab"===o}});return"@id"===o||"@vocab"===o||"@graph"===i?s:{[jY.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}},
/**
   * Removes the @preserve keywords as the last step of the compaction
   * algorithm when it is running on framed output.
   *
   * @param ctx the active context used to compact the input.
   * @param input the framed, compacted output.
   * @param options the compaction options used.
   *
   * @return the resulting output.
   */
jY.removePreserve=(e,t,r)=>{if(bY(t)){const n=[];for(let i=0;i<t.length;++i){const o=jY.removePreserve(e,t[i],r);null!==o&&n.push(o)}t=n}else if(wY(t)){
// remove @preserve
if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(EY(t))return t;if(SY(t))return t["@list"]=jY.removePreserve(e,t["@list"],r),t;const n=jY.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(t.hasOwnProperty(n)){const e=t[n];if(r.link.hasOwnProperty(e)){const n=r.link[e].indexOf(t);if(-1!==n)return r.link[e][n];r.link[e].push(t)}else r.link[e]=[t]}const i=jY.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(const o in t){if(o===n&&r.bnodesToClear.includes(t[o])){delete t[n];continue}let s=jY.removePreserve(e,t[o],r);const a=PY(e,o,"@container")||[];r.compactArrays&&bY(s)&&1===s.length&&0===a.length&&o!==i&&(s=s[0]),t[o]=s}}return t};const{callbackify:UY,normalizeDocumentLoader:FY}=yJ;var zY=class{constructor(){this._requests={},this.add=UY(this.add.bind(this))}wrapLoader(e){const t=this;return t._loader=FY(e),function(){return t.add.apply(t,arguments)}}async add(e){const t=this;let r=t._requests[e];if(r)return Promise.resolve(r);r=t._requests[e]=t._loader(e);try{return await r}finally{delete t._requests[e]}}};const{parseLinkHeader:VY,buildHeaders:HY}=yJ,{LINK_HEADER_REL:KY}=kJ;var qY=({secure:e,strictSSL:t=!0,maxRedirects:r=-1,request:n,headers:i={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{i=HY(i),n=n||rJ;const o=rJ;return(new zY).wrapLoader((function(e){return s(e,[])}));async function s(a,u){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new lJ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new lJ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let c,l=null;if(null!==l)return l;try{c=await function(e,t){return new Promise(((r,n)=>{e(t,((e,t,i)=>{e?n(e):r({res:t,body:i})}))}))}(n,{url:a,headers:i,strictSSL:t,followRedirect:!1})}catch(e){throw new lJ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}const{res:h,body:f}=c;l={contextUrl:null,documentUrl:a,document:f||null};const d=o.STATUS_CODES[h.statusCode];if(h.statusCode>=400)throw new lJ("URL could not be dereferenced: "+d,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:h.statusCode});if(h.headers.link&&"application/ld+json"!==h.headers["content-type"]){const e=VY(h.headers.link)[KY];if(Array.isArray(e))throw new lJ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});e&&(l.contextUrl=e.target)}if(h.statusCode>=300&&h.statusCode<400&&h.headers.location){if(u.length===r)throw new lJ("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:h.statusCode,redirects:u});if(-1!==u.indexOf(a))throw new lJ("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:h.statusCode,redirects:u});return u.push(a),s(h.headers.location,u)}return u.push(a),l}};const{parseLinkHeader:$Y,buildHeaders:WY}=yJ,{LINK_HEADER_REL:GY}=kJ,JY=/(^|(\r\n))link:/i;var XY=({secure:e,headers:t={},xhr:r}={headers:{}})=>(t=WY(t),(new zY).wrapLoader((async function(n){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))throw new lJ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n});if(e&&0!==n.indexOf("https"))throw new lJ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n});let i;try{i=await function(e,t,r){const n=new(e=e||XMLHttpRequest);return new Promise(((e,i)=>{n.onload=()=>e(n),n.onerror=e=>i(e),n.open("GET",t,!0);for(const e in r)n.setRequestHeader(e,r[e]);n.send()}))}(r,n,t)}catch(e){throw new lJ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:e})}if(i.status>=400)throw new lJ("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:n,httpStatusCode:i.status});const o={contextUrl:null,documentUrl:n,document:i.response},s=i.getResponseHeader("Content-Type");let a;if(JY.test(i.getAllResponseHeaders())&&(a=i.getResponseHeader("Link")),a&&"application/ld+json"!==s){if(a=$Y(a)[GY],Array.isArray(a))throw new lJ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n});a&&(o.contextUrl=a.target)}return o})));
/**
   * A JavaScript implementation of the JSON-LD API.
   *
   * @author Dave Longley
   *
   * @license BSD 3-Clause License
   * Copyright (c) 2011-2017 Digital Bazaar, Inc.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * Redistributions of source code must retain the above copyright notice,
   * this list of conditions and the following disclaimer.
   *
   * Redistributions in binary form must reproduce the above copyright
   * notice, this list of conditions and the following disclaimer in the
   * documentation and/or other materials provided with the distribution.
   *
   * Neither the name of the Digital Bazaar, Inc. nor the names of its
   * contributors may be used to endorse or promote products derived from
   * this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
   * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
   * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */const YY=yJ.IdentifierIssuer,{expand:ZY}=yX,{flatten:QY}=AX,{fromRDF:eZ}=UX,{toRDF:tZ}=rY,{frameMergedOrDefault:rZ}=cY,{isArray:nZ,isObject:iZ,isString:oZ}=aJ,{isSubjectReference:sZ}=cJ,{getInitialContext:aZ,process:uZ,getAllContexts:cZ}=GJ,{compact:lZ,compactIri:hZ,removePreserve:fZ}=DY,{createNodeMap:dZ,createMergedNodeMap:pZ,mergeNodeMaps:gZ}=SX,mZ=void 0!==dq&&dq.versions&&dq.versions.node,yZ=!mZ&&("undefined"!=typeof window||"undefined"!=typeof self),vZ=function(e){const t={};function r(t,{documentLoader:r=e.documentLoader,...n}){return Object.assign({},{documentLoader:r},n,t)}return e.compact=yJ.callbackify((async function(t,n,i){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new lJ("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;(i=r(i,{base:oZ(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new YY("_:b")})).link&&(i.skipExpansion=!0),i.compactToRelative||delete i.base,o=i.skipExpansion?t:await e.expand(t,i);const s=await e.processContext(aZ(i),n,i);let a=lZ({activeCtx:s,element:o,options:i,compactionMap:i.compactionMap});i.compactArrays&&!i.graph&&nZ(a)?1===a.length?a=a[0]:0===a.length&&(a={}):i.graph&&iZ(a)&&(a=[a]),iZ(n)&&"@context"in n&&(n=n["@context"]),n=yJ.clone(n),nZ(n)||(n=[n]);const u=n;n=[];for(let e=0;e<u.length;++e)(!iZ(u[e])||Object.keys(u[e]).length>0)&&n.push(u[e]);const c=n.length>0;if(1===n.length&&(n=n[0]),nZ(a)){const e=hZ({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=a;a={},c&&(a["@context"]=n),a[e]=t}else if(iZ(a)&&c){const e=a;a={"@context":n};for(const t in e)a[t]=e[t]}if(i.framing){const e=hZ({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}});
// remove @preserve from results
i.link={},a[e]=fZ(s,a[e],i)}return a})),e.expand=yJ.callbackify((async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=r(n,{keepFreeFloatingNodes:!1})).expansionMap&&(n.expansionMap=void 0);const i={},o=[];if("expandContext"in n){const e=yJ.clone(n.expandContext);iZ(e)&&"@context"in e?i.expandContext=e:i.expandContext={"@context":e},o.push(i.expandContext)}let s;if(oZ(t)){const r=await e.get(t,n);s=r.documentUrl,i.input=r.document,r.contextUrl&&(i.remoteContext={"@context":r.contextUrl},o.push(i.remoteContext))}else i.input=yJ.clone(t);"base"in n||(n.base=s||""),await cZ(i,n);let a=aZ(n);o.forEach((e=>{a=uZ({activeCtx:a,localCtx:e,options:n})}));let u=ZY({activeCtx:a,element:i.input,options:n,expansionMap:n.expansionMap});return iZ(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),nZ(u)||(u=[u]),u})),e.flatten=yJ.callbackify((async function(t,n,i){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,i=r(i,{base:oZ(t)?t:""});const o=await e.expand(t,i),s=QY(o);if(null===n)return s;i.graph=!0,i.skipExpansion=!0;const a=await e.compact(s,n,i);return a})),e.frame=yJ.callbackify((async function(t,n,i){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(i=r(i,{base:oZ(t)?t:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[]}),oZ(n)){const t=await e.get(n,i);if(n=t.document,t.contextUrl){let e=n["@context"];e?nZ(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const o=n&&n["@context"]||{},s=await e.expand(t,i),a=yJ.clone(i);a.isFrame=!0,a.keepFreeFloatingNodes=!0;const u=await e.expand(n,a);a.merged=!("@graph"in n);const c=rZ(s,u,a);a.graph=!0,a.skipExpansion=!0,a.link={},a.framing=!0;const l=await e.compact(c,o,a);return l})),e.link=yJ.callbackify((async function(t,r,n){const i={};return r&&(i["@context"]=r),i["@embed"]="@link",e.frame(t,i,n)})),e.normalize=e.canonize=yJ.callbackify((async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=r(n,{base:oZ(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new lJ("Unknown canonicalization input format.","jsonld.CanonizeError");const e=xJ.parse(t);return oJ.canonize(e,n)}const i=yJ.clone(n);delete i.format,i.produceGeneralizedRdf=!1;const o=await e.toRDF(t,i);return oJ.canonize(o,n)})),e.fromRDF=yJ.callbackify((async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=r(n,{format:oZ(e)?"application/n-quads":void 0});const{format:i}=n;let o,{rdfParser:s}=n;if(i){if(s=s||t[i],!s)throw new lJ("Unknown input format.","jsonld.UnknownFormat",{format:i})}else s=()=>e;return o=s.length>1?new Promise(((t,r)=>{s(e,((e,n)=>{e?r(e):t(n)}))})):Promise.resolve(s(e)),o=await o,Array.isArray(o)||(o=xJ.legacyDatasetToQuads(o)),eZ(o,n)})),e.toRDF=yJ.callbackify((async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let i;i=(n=r(n,{base:oZ(t)?t:"",skipExpansion:!1})).skipExpansion?t:await e.expand(t,n);const o=tZ(i,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return await xJ.serialize(o);throw new lJ("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return o})),e.createNodeMap=yJ.callbackify((async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=r(n,{base:oZ(t)?t:""});const i=await e.expand(t,n);return pZ(i,n)})),e.merge=yJ.callbackify((async function(t,n,i){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!nZ(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,i=r(i,{});const o=await Promise.all(t.map((t=>{const r=Object.assign({},i);return e.expand(t,r)})));let s=!0;"mergeNodes"in i&&(s=i.mergeNodes);const a=i.issuer||new YY("_:b"),u={"@default":{}};for(let e=0;e<o.length;++e){const t=yJ.relabelBlankNodes(o[e],{issuer:new YY("_:b"+e+"-")}),r=s||0===e?u:{"@default":{}};if(dZ(t,r,"@default",a),r!==u)for(const e in r){const t=r[e];if(!(e in u)){u[e]=t;continue}const n=u[e];for(const e in t)e in n||(n[e]=t[e])}}const c=gZ(u),l=[],h=Object.keys(c).sort();for(let e=0;e<h.length;++e){const t=c[h[e]];sZ(t)||l.push(t)}if(null===n)return l;i.graph=!0,i.skipExpansion=!0;const f=await e.compact(l,n,i);return f})),Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=yJ.normalizeDocumentLoader(t)}),e.documentLoader=async e=>{throw new lJ("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.loadDocument=yJ.callbackify((async function(){return e.documentLoader.apply(null,arguments)})),e.get=yJ.callbackify((async function(t,r){let n;n="function"==typeof r.documentLoader?yJ.normalizeDocumentLoader(r.documentLoader):e.documentLoader;const i=await n(t);try{if(!i.document)throw new lJ("No remote document found at the given URL.","jsonld.NullRemoteDocument");oZ(i.document)&&(i.document=JSON.parse(i.document))}catch(e){throw new lJ("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:i})}return i})),e.processContext=yJ.callbackify((async function(e,t,n){if(n=r(n,{base:""}),null===t)return aZ(n);t=yJ.clone(t),iZ(t)&&"@context"in t||(t={"@context":t});const i=await cZ(t,n);return uZ({activeCtx:e,localCtx:i,options:n})})),e.getContextValue=GJ.getContextValue,e.documentLoaders={},e.documentLoaders.node=qY,e.documentLoaders.xhr=XY,e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new lJ('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",xJ.parse),e.registerRDFParser("application/nquads",xJ.parse),e.registerRDFParser("rdfa-api",class{parse(e){const t={"@default":[]},r=e.getSubjects();for(let n=0;n<r.length;++n){const i=r[n];if(null===i)continue;const o=e.getSubjectTriples(i);if(null===o)continue;const s=o.predicates;for(const e in s){const r=s[e].objects;for(let n=0;n<r.length;++n){const o=r[n],s={};0===i.indexOf("_:")?s.subject={type:"blank node",value:i}:s.subject={type:"IRI",value:i},0===e.indexOf("_:")?s.predicate={type:"blank node",value:e}:s.predicate={type:"IRI",value:e};let a=o.value;if(o.type===PJ){const e=new("undefined"==typeof XMLSerializer?rJ.XMLSerializer:XMLSerializer);a="";for(let t=0;t<o.value.length;t++)o.value[t].nodeType===CJ.ELEMENT_NODE?a+=e.serializeToString(o.value[t]):o.value[t].nodeType===CJ.TEXT_NODE&&(a+=o.value[t].nodeValue)}s.object={},o.type===TJ?0===o.value.indexOf("_:")?s.object.type="blank node":s.object.type="IRI":(s.object.type="literal",o.type===AJ?o.language?(s.object.datatype=IJ,s.object.language=o.language):s.object.datatype=OJ:s.object.datatype=o.type),s.object.value=a,t["@default"].push(s)}}}return t}}.parse),e.url=RJ,e.util=yJ,Object.assign(e,yJ),e.promises=e,e.RequestQueue=zY,e.JsonLdProcessor=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t})(e),yZ&&void 0===LH.JsonLdProcessor&&Object.defineProperty(LH,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),mZ?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},bZ=function(){return vZ((function(){return bZ()}))};vZ(bZ);var wZ=bZ;const _Z={};var xZ=_Z;_Z.isArray=Array.isArray,_Z.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),_Z.isDouble=e=>_Z.isNumber(e)&&-1!==String(e).indexOf("."),_Z.isEmptyObject=e=>_Z.isObject(e)&&0===Object.keys(e).length,_Z.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),_Z.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),_Z.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),_Z.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),_Z.isUndefined=e=>void 0===e;const SZ={};var EZ=SZ;SZ.isSubject=e=>!(!xZ.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),SZ.isSubjectReference=e=>xZ.isObject(e)&&1===Object.keys(e).length&&"@id"in e,SZ.isValue=e=>xZ.isObject(e)&&"@value"in e,SZ.isList=e=>xZ.isObject(e)&&"@list"in e,SZ.isGraph=e=>xZ.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,SZ.isSimpleGraph=e=>SZ.isGraph(e)&&!("@id"in e),SZ.isBlankNode=e=>!!xZ.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e));var kZ=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}};function IZ(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function AZ(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){IZ(o,n,i,s,a,"next",e)}function a(e){IZ(o,n,i,s,a,"throw",e)}s(void 0)}))}}const TZ=oJ.IdentifierIssuer,PZ=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,OZ=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,CZ=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,MZ="application/ld+json, application/json",NZ={};var RZ=NZ;NZ.IdentifierIssuer=TZ;const LZ="function"==typeof setImmediate&&setImmediate,jZ=LZ?e=>LZ(e):e=>setTimeout(e,0);function DZ(e,t,r){NZ.nextTick((()=>e(t,r)))}function BZ(e,t){if(xZ.isArray(t))for(let r=0;r<t.length;++r)t[r]=BZ(e,t[r]);else if(EZ.isList(t))t["@list"]=BZ(e,t["@list"]);else if(xZ.isObject(t)){EZ.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const r=Object.keys(t).sort();for(let n=0;n<r.length;++n){const i=r[n];"@id"!==i&&(t[i]=BZ(e,t[i]))}}return t}NZ.nextTick="object"==typeof dq?eq:jZ,NZ.setImmediate=LZ?jZ:NZ.nextTick,NZ.clone=function(e){if(e&&"object"==typeof e){let t;if(xZ.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=NZ.clone(e[r])}else if(e instanceof Map){t=new Map;for(const[r,n]of e)t.set(r,NZ.clone(n))}else if(e instanceof Set){t=new Set;for(const r of e)t.add(NZ.clone(r))}else if(xZ.isObject(e)){t={};for(const r in e)t[r]=NZ.clone(e[r])}else t=e.toString();return t}return e},NZ.asArray=function(e){return Array.isArray(e)?e:[e]},NZ.buildHeaders=(e={})=>{if(Object.keys(e).some((e=>"accept"===e.toLowerCase())))throw new RangeError('Accept header may not be specified; only "'+MZ+'" is supported.');return Object.assign({Accept:MZ},e)},NZ.parseLinkHeader=e=>{const t={},r=e.match(PZ);for(let e=0;e<r.length;++e){let n=r[e].match(OZ);if(!n)continue;const i={target:n[1]},o=n[2];for(;n=CZ.exec(o);)i[n[1]]=void 0===n[2]?n[3]:n[2];const s=i.rel||"";Array.isArray(t[s])?t[s].push(i):t.hasOwnProperty(s)?t[s]=[t[s],i]:t[s]=i}return t},NZ.validateTypeValue=e=>{if(xZ.isString(e)||xZ.isEmptyObject(e))return;let t=!1;if(xZ.isArray(e)){t=!0;for(let r=0;r<e.length;++r)if(!xZ.isString(e[r])){t=!1;break}}if(!t)throw new kZ('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})},NZ.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const r=e[t];return!xZ.isArray(r)||r.length>0}return!1},NZ.hasValue=(e,t,r)=>{if(NZ.hasProperty(e,t)){let n=e[t];const i=EZ.isList(n);if(xZ.isArray(n)||i){i&&(n=n["@list"]);for(let e=0;e<n.length;++e)if(NZ.compareValues(r,n[e]))return!0}else if(!xZ.isArray(r))return NZ.compareValues(r,n)}return!1},NZ.addValue=(e,t,r,n)=>{if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),n.valueIsArray)e[t]=r;else if(xZ.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]);for(let i=0;i<r.length;++i)NZ.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){const i=!n.allowDuplicate&&NZ.hasValue(e,t,r);xZ.isArray(e[t])||i&&!n.propertyIsArray||(e[t]=[e[t]]),i||e[t].push(r)}else e[t]=n.propertyIsArray?[r]:r},NZ.getValues=(e,t)=>[].concat(e[t]||[]),NZ.removeProperty=(e,t)=>{delete e[t]},NZ.removeValue=(e,t,r,n)=>{"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);const i=NZ.getValues(e,t).filter((e=>!NZ.compareValues(e,r)));0===i.length?NZ.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},NZ.relabelBlankNodes=(e,t)=>BZ((t=t||{}).issuer||new TZ("_:b"),e),NZ.compareValues=(e,t)=>e===t||!(!EZ.isValue(e)||!EZ.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(xZ.isObject(e)&&"@id"in e&&xZ.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],NZ.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1,NZ.normalizeDocumentLoader=e=>e.length<2?NZ.callbackify(e):function(){var t=AZ((function*(t){const r=arguments[1];return new Promise(((n,i)=>{try{e(t,((e,t)=>{if("function"==typeof r)return DZ(r,e,t);e?i(e):n(t)}))}catch(e){if("function"==typeof r)return DZ(r,e);i(e)}}))}));return function(e){return t.apply(this,arguments)}}(),NZ.callbackify=e=>function(){var t=AZ((function*(...t){const r=t[t.length-1];let n;"function"==typeof r&&t.pop();try{n=yield e.apply(null,t)}catch(e){if("function"==typeof r)return DZ(r,e);throw e}return"function"==typeof r?DZ(r,null,n):n}));return function(){return t.apply(this,arguments)}}();var UZ=oJ.NQuads;const FZ="http://www.w3.org/1999/02/22-rdf-syntax-ns#",zZ="http://www.w3.org/2001/XMLSchema#";var VZ={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:FZ,RDF_LIST:FZ+"List",RDF_FIRST:FZ+"first",RDF_REST:FZ+"rest",RDF_NIL:FZ+"nil",RDF_TYPE:FZ+"type",RDF_PLAIN_LITERAL:FZ+"PlainLiteral",RDF_XML_LITERAL:FZ+"XMLLiteral",RDF_JSON_LITERAL:FZ+"JSON",RDF_OBJECT:FZ+"object",RDF_LANGSTRING:FZ+"langString",XSD:zZ,XSD_BOOLEAN:zZ+"boolean",XSD_DOUBLE:zZ+"double",XSD_INTEGER:zZ+"integer",XSD_STRING:zZ+"string"};const{RDF_LANGSTRING:HZ,RDF_PLAIN_LITERAL:KZ,RDF_OBJECT:qZ,RDF_XML_LITERAL:$Z,XSD_STRING:WZ}=VZ;let GZ;GZ="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};const{clone:JZ}=RZ,XZ={};var YZ=XZ;XZ.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},XZ.parse=(e,t)=>{const r={},n=XZ.parsers[t||"full"],i=n.regex.exec(e);let o=n.keys.length;for(;o--;)r[n.keys[o]]=void 0===i[o]?null:i[o];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=XZ.removeDotSegments(r.path),r},XZ.prependBase=(e,t)=>{if(null===e)return t;if(-1!==t.indexOf(":"))return t;xZ.isString(e)&&(e=XZ.parse(e||""));const r=XZ.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),t.length>0&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,n.path=t}n.query=r.query}""!==r.path&&(n.path=XZ.removeDotSegments(n.path));let i=n.protocol;return null!==n.authority&&(i+="//"+n.authority),i+=n.path,null!==n.query&&(i+="?"+n.query),null!==r.fragment&&(i+="#"+r.fragment),""===i&&(i="./"),i},XZ.removeBase=(e,t)=>{if(null===e)return t;xZ.isString(e)&&(e=XZ.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const n=XZ.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),o=n.normalizedPath.split("/"),s=n.fragment||n.query?0:1;for(;i.length>0&&o.length>s&&i[0]===o[0];)i.shift(),o.shift();let a="";if(i.length>0){i.pop();for(let e=0;e<i.length;++e)a+="../"}return a+=o.join("/"),null!==n.query&&(a+="?"+n.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a},XZ.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),n=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),n&&r.push("")):n&&r.push("")}return r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const ZZ=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;function QZ(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function eQ(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){QZ(o,n,i,s,a,"next",e)}function a(e){QZ(o,n,i,s,a,"throw",e)}s(void 0)}))}}XZ.isAbsolute=e=>xZ.isString(e)&&ZZ.test(e),XZ.isRelative=e=>xZ.isString(e);const{isArray:tQ,isObject:rQ,isString:nQ,isUndefined:iQ}=xZ,{isAbsolute:oQ,isRelative:sQ,prependBase:aQ,parse:uQ}=YZ,{asArray:cQ,compareShortestLeast:lQ}=RZ,hQ=new Map,fQ={};var dQ=fQ;function pQ(e,t,r,n,i,o){if(null===t||!nQ(t)||fQ.isKeyword(t))return t;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&fQ.createTermDefinition(e,n,t,i,o),e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext),(r=r||{}).vocab){const r=e.mappings.get(t);if(null===r)return null;if(r)return r["@id"]}const s=t.indexOf(":");if(-1!==s){const r=t.substr(0,s),a=t.substr(s+1);return"_"===r||0===a.indexOf("//")?t:(n&&n.hasOwnProperty(r)&&fQ.createTermDefinition(e,n,r,i,o),e.mappings.has(r)?e.mappings.get(r)["@id"]+a:t)}return r.vocab&&"@vocab"in e?e["@vocab"]+t:r.base?aQ(e["@base"],t):t}function gQ(){return(gQ=eQ((function*(e,t){const r=RZ.normalizeDocumentLoader(t.documentLoader);return yield n(e,new Set,r),e;function n(e,t,r){return i.apply(this,arguments)}function i(){return(i=eQ((function*(e,r,i){if(r.size>10)throw new kZ("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});const o=new Map;if(mQ(e,o,!1,t.base),0===o.size)return;const s=[...o.keys()].filter((e=>!1===o.get(e)));return Promise.all(s.map(function(){var s=eQ((function*(s){if(r.has(s))throw new kZ("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:s});const a=new Set(r);let u,c;a.add(s);try{u=yield i(s),c=u.document||null,nQ(c)&&(c=JSON.parse(c))}catch(e){throw new kZ("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:s,cause:e})}if(!rQ(c))throw new kZ("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:s});c="@context"in c?{"@context":c["@context"]}:{"@context":{}},u.contextUrl&&(tQ(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(u.contextUrl)),yield n(c,a,i),o.set(s,c["@context"]),mQ(e,o,!0,t.base)}));return function(e){return s.apply(this,arguments)}}()))}))).apply(this,arguments)}}))).apply(this,arguments)}function mQ(e,t,r,n){if(tQ(e))for(const i of e)mQ(i,t,r,n);else if(rQ(e))for(const i in e){if("@context"!==i){mQ(e[i],t,r,n);continue}const o=e[i];if(tQ(o)){let e=o.length;for(let i=0;i<e;++i){const s=o[i];if(nQ(s)){const a=aQ(n,s),u=t.get(a);r?tQ(u)?(Array.prototype.splice.apply(o,[i,1].concat(u)),i+=u.length-1,e=o.length):!1!==u&&(o[i]=u):void 0===u&&t.set(a,!1)}else for(const e in s)rQ(s[e])&&mQ(s[e],t,r,n)}}else if(nQ(o)){const s=aQ(n,o),a=t.get(s);r?!1!==a&&(e[i]=a):void 0===a&&t.set(s,!1)}else for(const e in o)rQ(o[e])&&mQ(o[e],t,r,n)}}function yQ(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const r=Array.isArray(e);if(r!==Array.isArray(t))return!1;if(r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!yQ(e[r],t[r]))return!1;return!0}const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const r in e){let n=e[r],i=t[r];if("@container"===r&&Array.isArray(n)&&Array.isArray(i)&&(n=n.slice().sort(),i=i.slice().sort()),!yQ(n,i))return!1}return!0}fQ.cache=new class{constructor(e=100){this.order=[],this.cache=new Map,this.size=e}get(e,t){const r=this.cache.get(e);if(r){const e=JSON.stringify(t);return r.get(e)||null}return null}set(e,t,r){if(this.order.length===this.size){const e=this.order.shift();this.cache.get(e.activeCtx).delete(e.localCtx)}const n=JSON.stringify(t);this.order.push({activeCtx:e,localCtx:n});let i=this.cache.get(e);i||(i=new Map,this.cache.set(e,i)),i.set(n,JZ(r))}},fQ.process=({activeCtx:e,localCtx:t,options:r,isPropertyTermScopedContext:n=!1,isTypeScopedContext:i=!1})=>{rQ(t)&&"@context"in t&&tQ(t["@context"])&&(t=t["@context"]);const o=cQ(t);if(0===o.length)return e;const s=e.previousContext||e;if(n&&e.previousContext)return(e=e.clone()).isPropertyTermScoped=!0,e.previousContext=fQ.process({activeCtx:e.previousContext,localCtx:o,options:r,isPropertyTermScopedContext:n}),e;let a=e;for(let u=0;u<o.length;++u){let c=o[u];if(e=a,null===c){if(!n&&0!==Object.keys(e.protected).length){const n=r&&r.protectedMode||"error";if("error"===n)throw new kZ("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===n){console.warn("WARNING: invalid context nullification");const t=e;a=e=fQ.getInitialContext(r).clone();for(const[r,n]of Object.entries(t.protected))n&&(e.mappings[r]=RZ.clone(t.mappings[r]));e.protected=RZ.clone(t.protected),fQ.cache&&fQ.cache.set(t,c,a);continue}throw new kZ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:n})}a=e=fQ.getInitialContext(r).clone(),i&&(a.previousContext=s.clone());continue}if(fQ.cache){const t=fQ.cache.get(e,c);if(t){a=e=t;continue}}if(rQ(c)&&"@context"in c&&(c=c["@context"]),!rQ(c))throw new kZ("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c});a=a.clone();const l=new Map;if("@version"in c){if(1.1!==c["@version"])throw new kZ("Unsupported JSON-LD version: "+c["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:c});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new kZ("@version: "+c["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:c});a.processingMode="json-ld-1.1",a["@version"]=c["@version"],l.set("@version",!0)}if(a.processingMode=a.processingMode||e.processingMode||"json-ld-1.0","@base"in c){let t=c["@base"];if(null===t);else if(oQ(t))t=uQ(t);else{if(!sQ(t))throw new kZ('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:c});t=uQ(aQ(e["@base"].href,t))}a["@base"]=t,l.set("@base",!0)}if("@vocab"in c){const e=c["@vocab"];if(null===e)delete a["@vocab"];else{if(!nQ(e))throw new kZ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});if(!oQ(e))throw new kZ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:c});a["@vocab"]=e}l.set("@vocab",!0)}if("@language"in c){const e=c["@language"];if(null===e)delete a["@language"];else{if(!nQ(e))throw new kZ('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:c});a["@language"]=e.toLowerCase()}l.set("@language",!0)}l.set("@protected",c["@protected"]||!1);for(const e in c)fQ.createTermDefinition(a,c,e,l,r,n);i&&!a.previousContext&&(a.previousContext=s.clone()),fQ.cache&&fQ.cache.set(e,c,a)}return a},fQ.createTermDefinition=(e,t,r,n,i,o=!1)=>{if(n.has(r)){if(n.get(r))return;throw new kZ("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n.set(r,!1),fQ.isKeyword(r))throw new kZ("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new kZ("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const s=e.mappings.get(r);let a;if(e.mappings.has(r)&&e.mappings.delete(r),t.hasOwnProperty(r)&&(a=t[r]),null===a||rQ(a)&&null===a["@id"])return e.mappings.set(r,null),void n.set(r,!0);let u=!1;if(nQ(a)&&(u=!0,a={"@id":a}),!rQ(a))throw new kZ("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const c={};e.mappings.set(r,c),c.reverse=!1;const l=["@container","@id","@language","@reverse","@type"];fQ.processingMode(e,1.1)&&l.push("@context","@nest","@prefix","@protected");for(const e in a)if(!l.includes(e))throw new kZ("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const h=r.indexOf(":");if(c._termHasColon=-1!==h,"@reverse"in a){if("@id"in a)throw new kZ("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in a)throw new kZ("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const r=a["@reverse"];if(!nQ(r))throw new kZ("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});const o=pQ(e,r,{vocab:!0,base:!1},t,n,i);if(!oQ(o))throw new kZ("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=o,c.reverse=!0}else if("@id"in a){let o=a["@id"];if(!nQ(o))throw new kZ("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(o!==r){if(o=pQ(e,o,{vocab:!0,base:!1},t,n,i),!oQ(o)&&!fQ.isKeyword(o))throw new kZ("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=o,c._prefix=!c._termHasColon&&o.match(/[:\/\?#\[\]@]$/)&&(u||fQ.processingMode(e,1))}}if(!("@id"in c))if(c._termHasColon){const o=r.substr(0,h);if(t.hasOwnProperty(o)&&fQ.createTermDefinition(e,t,o,n,i),e.mappings.has(o)){const t=r.substr(h+1);c["@id"]=e.mappings.get(o)["@id"]+t}else c["@id"]=r}else{if(!("@vocab"in e))throw new kZ("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((!0===a["@protected"]||!0===n.get("@protected")&&!1!==a["@protected"])&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in a){let r=a["@type"];if(!nQ(r))throw new kZ("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==r&&"@vocab"!==r&&"@json"!==r){if(r=pQ(e,r,{vocab:!0,base:!1},t,n,i),!oQ(r))throw new kZ("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===r.indexOf("_:"))throw new kZ("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=r}if("@container"in a){const r=nQ(a["@container"])?[a["@container"]]:a["@container"]||[],n=["@list","@set","@index","@language"];let i=!0;const o=r.includes("@set");if(fQ.processingMode(e,1.1))if(n.push("@graph","@id","@type"),r.includes("@list")){if(1!==r.length)throw new kZ("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(r.includes("@graph")){if(r.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new kZ("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=r.length<=(o?2:1);else i&=!tQ(a["@container"]),i&=r.length<=1;if(i&=r.every((e=>n.includes(e))),i&=!(o&&r.includes("@list")),!i)throw new kZ("Invalid JSON-LD syntax; @context @container value must be one of the following: "+n.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!r.every((e=>["@index","@set"].includes(e))))throw new kZ("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=r}if("@context"in a&&(c["@context"]=a["@context"]),"@language"in a&&!("@type"in a)){let e=a["@language"];if(null!==e&&!nQ(e))throw new kZ("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),c["@language"]=e}if("@prefix"in a){if(c._termHasColon)throw new kZ("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof a["@prefix"])throw new kZ("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});c._prefix=!0===a["@prefix"]}if("@nest"in a){const e=a["@nest"];if(!nQ(e)||"@nest"!==e&&0===e.indexOf("@"))throw new kZ("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=e}// disallow aliasing @context and @preserve
const f=c["@id"];if("@context"===f||"@preserve"===f)throw new kZ("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(s&&s.protected&&!o&&(e.protected[r]=!0,c.protected=!0,!yQ(s,c))){const e=i&&i.protectedMode||"error";if("error"===e)throw new kZ("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:r});throw new kZ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:r,protectedMode:e})}},fQ.expandIri=(e,t,r,n)=>pQ(e,t,r,void 0,void 0,n),fQ.getInitialContext=e=>{const t=uQ(e.base||""),r=JSON.stringify({base:t,processingMode:e.processingMode}),n=hQ.get(r);if(n)return n;const i={"@base":t,processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},r=e.fastCurieMap={},n={},i=e["@language"]||"@none",a=e.mappings,u=[...a.keys()].sort(lQ);for(const e of u){const o=a.get(e);if(null===o)continue;let u=o["@container"]||"@none";u=[].concat(u).sort().join("");const c=cQ(o["@id"]);for(const a of c){let c=t[a];const l=fQ.isKeyword(a);if(c)l||o._termHasColon||n[a].push(e);else if(t[a]=c={},!l&&!o._termHasColon){n[a]=[e];const t={iri:a,terms:n[a]};a[0]in r?r[a[0]].push(t):r[a[0]]=[t]}if(c[u]||(c[u]={"@language":{},"@type":{},"@any":{}}),c=c[u],s(e,c["@any"],"@none"),o.reverse)s(e,c["@type"],"@reverse");else if("@type"in o)s(e,c["@type"],o["@type"]);else if("@language"in o){const t=o["@language"]||"@null";s(e,c["@language"],t)}else s(e,c["@language"],i),s(e,c["@type"],"@none"),s(e,c["@language"],"@none")}}for(const e in r)o(r,e,1);return t},clone:function(){const e={};return e["@base"]=this["@base"],e.mappings=RZ.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=RZ.clone(this.protected),this.previousContext&&(e.isPropertyTermScoped=this.previousContext.isPropertyTermScoped,e.previousContext=this.previousContext.clone()),e.revertTypeScopedContext=this.revertTypeScopedContext,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertTypeScopedContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===hQ.size&&hQ.clear(),hQ.set(r,i),i;function o(e,t,r){const n=e[t],i=e[t]={};let s,a;for(const e of n)s=e.iri,a=r>=s.length?"":s[r],a in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&o(i,e,r+1)}function s(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},fQ.getContextValue=(e,t,r)=>{if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){const n=e.mappings.get(t);if(iQ(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&e.hasOwnProperty(r)?e[r]:"@context"!==r?null:void 0},fQ.getAllContexts=function(){var e=eQ((function*(e,t){return function(e,t){return gQ.apply(this,arguments)}(e,t)}));return function(t,r){return e.apply(this,arguments)}}(),fQ.processingMode=(e,t)=>t.toString()>="1.1"?e.processingMode&&e.processingMode>="json-ld-"+t.toString():!e.processingMode||"json-ld-1.0"===e.processingMode,fQ.isKeyword=e=>{if(!nQ(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};const{isArray:vQ,isObject:bQ,isEmptyObject:wQ,isString:_Q,isUndefined:xQ}=xZ,{isList:SQ,isValue:EQ,isGraph:kQ}=EZ,{expandIri:IQ,getContextValue:AQ,isKeyword:TQ,process:PQ,processingMode:OQ}=dQ,{isAbsolute:CQ}=YZ,{addValue:MQ,asArray:NQ,getValues:RQ,validateTypeValue:LQ}=RZ,jQ={};var DQ=jQ;function BQ({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o={},insideList:s,expansionMap:a}){const u=Object.keys(n).sort(),c=[];for(const l of u){let u,h=n[l];if("@context"===l)continue;let f=IQ(e,l,{vocab:!0},o);if((null===f||!CQ(f)&&!TQ(f))&&(f=a({unmappedProperty:l,activeCtx:e,activeProperty:t,parent:n,options:o,insideList:s,value:h,expandedParent:i}),void 0===f))continue;if(TQ(f)){if("@reverse"===r)throw new kZ("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:h});if(f in i)throw new kZ("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:f})}if("@id"===f){if(!_Q(h)){if(!o.isFrame)throw new kZ('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:h});if(bQ(h)){if(!wQ(h))throw new kZ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}else{if(!vQ(h))throw new kZ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h});if(!h.every((e=>_Q(e))))throw new kZ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}}MQ(i,"@id",NQ(h).map((t=>_Q(t)?IQ(e,t,{base:!0},o):t)),{propertyIsArray:o.isFrame});continue}if("@type"===f){LQ(h),MQ(i,"@type",NQ(h).map((t=>_Q(t)?IQ(e.previousContext||e,t,{base:!0,vocab:!0},o):t)),{propertyIsArray:o.isFrame});continue}if("@graph"===f&&!bQ(h)&&!vQ(h))throw new kZ('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:h});if("@value"===f){MQ(i,"@value",h,{propertyIsArray:o.isFrame});continue}if("@language"===f){if(null===h)continue;if(!_Q(h)&&!o.isFrame)throw new kZ('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:h});h=NQ(h).map((e=>_Q(e)?e.toLowerCase():e)),MQ(i,"@language",h,{propertyIsArray:o.isFrame});continue}if("@index"===f){if(!_Q(h))throw new kZ('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:h});MQ(i,"@index",h);continue}if("@reverse"===f){if(!bQ(h))throw new kZ('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:h});if(u=jQ.expand({activeCtx:e,activeProperty:"@reverse",element:h,options:o,expansionMap:a}),"@reverse"in u)for(const e in u["@reverse"])MQ(i,e,u["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in u){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),MQ(t,e,[],{propertyIsArray:!0});const r=u[e];for(let n=0;n<r.length;++n){const i=r[n];if(EQ(i)||SQ(i))throw new kZ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:u});MQ(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===f){c.push(l);continue}let d=e;const p=AQ(e,l,"@context");xQ(p)||(d=PQ({activeCtx:e,localCtx:p,isPropertyTermScopedContext:!0,options:o}));const g=AQ(d,l,"@container")||[];if(g.includes("@language")&&bQ(h))u=UQ(d,h,o);else if(g.includes("@index")&&bQ(h)){const e=g.includes("@graph");u=FQ({activeCtx:d,options:o,activeProperty:l,value:h,expansionMap:a,asGraph:e,indexKey:"@index"})}else if(g.includes("@id")&&bQ(h)){const e=g.includes("@graph");u=FQ({activeCtx:d,options:o,activeProperty:l,value:h,expansionMap:a,asGraph:e,indexKey:"@id"})}else if(g.includes("@type")&&bQ(h))u=FQ({activeCtx:d.revertTypeScopedContext(),options:o,activeProperty:l,value:h,expansionMap:a,asGraph:!1,indexKey:"@type"});else{const n="@list"===f;if(n||"@set"===f){let e=t;n&&"@graph"===r&&(e=null),u=jQ.expand({activeCtx:d,activeProperty:e,element:h,options:o,insideList:n,expansionMap:a})}else u="@json"===AQ(e,l,"@type")?{"@type":"@json","@value":h}:jQ.expand({activeCtx:d,activeProperty:l,element:h,options:o,insideList:!1,expansionMap:a})}if(null===u&&"@value"!==f&&(u=a({unmappedValue:h,expandedProperty:f,activeCtx:d,activeProperty:t,parent:n,options:o,insideList:s,key:l,expandedParent:i}),void 0===u))continue;if("@list"!==f&&!SQ(u)&&g.includes("@list")&&(u={"@list":NQ(u)}),g.includes("@graph")&&!g.some((e=>"@id"===e||"@index"===e))&&(u=NQ(u).map((e=>kQ(e)?e:{"@graph":NQ(e)}))),d.mappings.has(l)&&d.mappings.get(l).reverse){const e=i["@reverse"]=i["@reverse"]||{};u=NQ(u);for(let t=0;t<u.length;++t){const r=u[t];if(EQ(r)||SQ(r))throw new kZ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:u});MQ(e,f,r,{propertyIsArray:!0})}continue}const m=!["@index","@id","@type","@value","@language"].includes(f);MQ(i,f,u,{propertyIsArray:m})}if("@value"in n){const t=n["@value"];if("@json"===n["@type"]&&OQ(e,1.1));else if((bQ(t)||vQ(t))&&!o.isFrame)throw new kZ('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:t})}for(const u of c){const c=vQ(n[u])?n[u]:[n[u]];for(const n of c){if(!bQ(n)||Object.keys(n).some((t=>"@value"===IQ(e,t,{vocab:!0},o))))throw new kZ("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:n});BQ({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o,insideList:s,expansionMap:a})}}}function UQ(e,t,r){const n=[],i=Object.keys(t).sort();for(const o of i){const i=IQ(e,o,{vocab:!0},r);let s=t[o];vQ(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!_Q(e))throw new kZ("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const r={"@value":e};"@none"!==i&&(r["@language"]=o.toLowerCase()),n.push(r)}}return n}function FQ({activeCtx:e,options:t,activeProperty:r,value:n,expansionMap:i,asGraph:o,indexKey:s}){const a=[],u=Object.keys(n).sort(),c="@type"===s;for(let l of u){if(c){const r=AQ(e,l,"@context");xQ(r)||(e=PQ({activeCtx:e,localCtx:r,isTypeScopedContext:!0,options:t}))}let u=n[l];vQ(u)||(u=[u]);const h=IQ(e,l,{vocab:!0},t);"@id"===s?l=IQ(e,l,{base:!0},t):c&&(l=h),u=jQ.expand({activeCtx:e,activeProperty:r,element:u,options:t,insideList:!1,insideIndex:!0,expansionMap:i});for(let e of u)o&&!kQ(e)&&(e={"@graph":[e]}),"@type"===s?"@none"===h||(e["@type"]?e["@type"]=[l].concat(e["@type"]):e["@type"]=[l]):"@none"===h||s in e||(e[s]=l),a.push(e)}return a}jQ.expand=({activeCtx:e,activeProperty:t=null,element:r,options:n={},insideList:i=!1,insideIndex:o=!1,typeScopedContext:s=null,expansionMap:a=(()=>{})})=>{if(null==r)return null;if("@default"===t&&(n=Object.assign({},n,{isFrame:!1})),!vQ(r)&&!bQ(r)){if(!i&&(null===t||"@graph"===IQ(e,t,{vocab:!0},n))){const o=a({unmappedValue:r,activeCtx:e,activeProperty:t,options:n,insideList:i});return void 0===o?null:o}return function({activeCtx:e,activeProperty:t,value:r,options:n}){if(null==r)return null;const i=IQ(e,t,{vocab:!0},n);if("@id"===i)return IQ(e,r,{base:!0},n);if("@type"===i)return IQ(e,r,{vocab:!0,base:!0},n);const o=AQ(e,t,"@type");if(("@id"===o||"@graph"===i)&&_Q(r))return{"@id":IQ(e,r,{base:!0},n)};if("@vocab"===o&&_Q(r))return{"@id":IQ(e,r,{vocab:!0,base:!0},n)};if(TQ(i))return r;const s={};if(o&&!["@id","@vocab"].includes(o))s["@type"]=o;else if(_Q(r)){const r=AQ(e,t,"@language");null!==r&&(s["@language"]=r)}return["boolean","number","string"].includes(typeof r)||(r=r.toString()),s["@value"]=r,s}({activeCtx:e,activeProperty:t,value:r,options:n})}if(vQ(r)){let u=[];const c=AQ(e,t,"@container")||[];i=i||c.includes("@list");for(let c=0;c<r.length;++c){let l=jQ.expand({activeCtx:e,activeProperty:t,element:r[c],options:n,expansionMap:a,insideIndex:o,typeScopedContext:s});i&&vQ(l)&&(l={"@list":l}),null===l&&(l=a({unmappedValue:r[c],activeCtx:e,activeProperty:t,parent:r,index:c,options:n,expandedParent:u,insideList:i}),void 0===l)||(vQ(l)?u=u.concat(l):u.push(l))}return u}const u=IQ(e,t,{vocab:!0},n);s=s||(e.previousContext?e:null);let c=Object.keys(r).sort(),l=!o;if(l&&s&&c.length<=2&&!c.includes("@context"))for(const t of c){const r=IQ(s,t,{vocab:!0},n);if("@value"===r){l=!1,e=s;break}if("@id"===r&&1===c.length){l=!1;break}}l&&(e=e.revertTypeScopedContext()),"@context"in r&&(e=PQ({activeCtx:e,localCtx:r["@context"],options:n}));for(const t of c)if("@type"===IQ(e,t,{vocab:!0},n)){const i=r[t],o=Array.isArray(i)?i.length>1?i.slice().sort():i:[i];for(const t of o){const r=AQ(e.previousContext||e,t,"@context");xQ(r)||(e=PQ({activeCtx:e,localCtx:r,options:n,isTypeScopedContext:!0}))}}let h={};BQ({activeCtx:e,activeProperty:t,expandedActiveProperty:u,element:r,expandedParent:h,options:n,insideList:i,typeScopedContext:s,expansionMap:a}),c=Object.keys(h);let f=c.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new kZ('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});let o=f-1;if("@type"in h&&(o-=1),"@index"in h&&(o-=1),"@language"in h&&(o-=1),0!==o)throw new kZ('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});const s=null===h["@value"]?[]:NQ(h["@value"]),u=RQ(h,"@type");if(0===s.length){const o=a({unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}else{if(!s.every((e=>_Q(e)||wQ(e)))&&"@language"in h)throw new kZ("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if(OQ(e,1.1)&&u.includes("@json")&&1===u.length);else if(!u.every((e=>CQ(e)&&!(_Q(e)&&0===e.indexOf("_:"))||wQ(e))))throw new kZ('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!vQ(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(f>1&&(2!==f||!("@index"in h)))throw new kZ('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],c=Object.keys(h),f=c.length)}else if(1===f&&"@language"in h){const o=a(h,{unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}if(bQ(h)&&!n.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===u)&&(0===f||"@value"in h||"@list"in h||1===f&&"@id"in h)){const o=a({unmappedValue:h,activeCtx:e,activeProperty:t,element:r,options:n,insideList:i});h=void 0!==o?o:null}return h};const{isKeyword:zQ}=dQ,VQ={};var HQ=VQ;VQ.createMergedNodeMap=(e,t)=>{const r=(t=t||{}).issuer||new RZ.IdentifierIssuer("_:b"),n={"@default":{}};return VQ.createNodeMap(e,n,"@default",r),VQ.mergeNodeMaps(n)},VQ.createNodeMap=(e,t,r,n,i,o)=>{if(xZ.isArray(e)){for(const i of e)VQ.createNodeMap(i,t,r,n,void 0,o);return}if(!xZ.isObject(e))return void(o&&o.push(e));if(EZ.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=n.getId(t))}return void(o&&o.push(e))}if(o&&EZ.isList(e)){const s=[];return VQ.createNodeMap(e["@list"],t,r,n,i,s),void o.push({"@list":s})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&n.getId(e)}xZ.isUndefined(i)&&(i=EZ.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),o&&o.push({"@id":i});const s=t[r],a=s[i]=s[i]||{};a["@id"]=i;const u=Object.keys(e).sort();for(let o of u){if("@id"===o)continue;if("@reverse"===o){const o={"@id":i},a=e["@reverse"];for(const e in a){const i=a[e];for(const a of i){let i=a["@id"];EZ.isBlankNode(a)&&(i=n.getId(i)),VQ.createNodeMap(a,t,r,n,i),RZ.addValue(s[i],e,o,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){i in t||(t[i]={}),VQ.createNodeMap(e[o],t,i,n);continue}if("@type"!==o&&zQ(o)){if("@index"===o&&o in a&&(e[o]!==a[o]||e[o]["@id"]!==a[o]["@id"]))throw new kZ("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[o]=e[o];continue}const u=e[o];if(0===o.indexOf("_:")&&(o=n.getId(o)),0!==u.length)for(let e of u)if("@type"===o&&(e=0===e.indexOf("_:")?n.getId(e):e),EZ.isSubject(e)||EZ.isSubjectReference(e)){const i=EZ.isBlankNode(e)?n.getId(e["@id"]):e["@id"];RZ.addValue(a,o,{"@id":i},{propertyIsArray:!0,allowDuplicate:!1}),VQ.createNodeMap(e,t,r,n,i)}else if(EZ.isValue(e))RZ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(EZ.isList(e)){const s=[];VQ.createNodeMap(e["@list"],t,r,n,i,s),e={"@list":s},RZ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else VQ.createNodeMap(e,t,r,n,i),RZ.addValue(a,o,e,{propertyIsArray:!0,allowDuplicate:!1});else RZ.addValue(a,o,[],{propertyIsArray:!0})}},VQ.mergeNodeMapGraphs=e=>{const t={};for(const r of Object.keys(e).sort())for(const n of Object.keys(e[r]).sort()){const i=e[r][n];n in t||(t[n]={"@id":n});const o=t[n];for(const e of Object.keys(i).sort())if(zQ(e))o[e]=RZ.clone(i[e]);else for(const t of i[e])RZ.addValue(o,e,RZ.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},VQ.mergeNodeMaps=e=>{const t=e["@default"],r=Object.keys(e).sort();for(const n of r){if("@default"===n)continue;const r=e[n];let i=t[n];i?"@graph"in i||(i["@graph"]=[]):t[n]=i={"@id":n,"@graph":[]};const o=i["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];EZ.isSubjectReference(t)||o.push(t)}}return t};const{isSubjectReference:KQ}=EZ,{createMergedNodeMap:qQ}=HQ,$Q={};var WQ=$Q;function GQ(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}$Q.flatten=e=>{const t=qQ(e),r=[],n=Object.keys(t).sort();for(let e=0;e<n.length;++e){const i=t[n[e]];KQ(i)||r.push(i)}return r};const{RDF_LIST:JQ,RDF_FIRST:XQ,RDF_REST:YQ,RDF_NIL:ZQ,RDF_TYPE:QQ,RDF_JSON_LITERAL:e0,XSD_BOOLEAN:t0,XSD_DOUBLE:r0,XSD_INTEGER:n0,XSD_STRING:i0}=VZ,o0={};var s0=o0;function a0(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};const r={"@value":e.value};if(e.language)r["@language"]=e.language;else{let n=e.datatype.value;if(n||(n=i0),n===e0){n="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(e){throw new kZ("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:e})}}if(t){if(n===t0)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(xZ.isNumeric(r["@value"]))if(n===n0){const e=parseInt(r["@value"],10);e.toFixed(0)===r["@value"]&&(r["@value"]=e)}else n===r0&&(r["@value"]=parseFloat(r["@value"]));[t0,n0,r0,i0].includes(n)||(r["@type"]=n)}else n!==i0&&(r["@type"]=n)}return r}o0.fromRDF=function(){var e,t=(e=function*(e,{useRdfType:t=!1,useNativeTypes:r=!1}){const n={},i={"@default":n},o={};for(const s of e){const e="DefaultGraph"===s.graph.termType?"@default":s.graph.value;e in i||(i[e]={}),"@default"===e||e in n||(n[e]={"@id":e});const a=i[e],u=s.subject.value,c=s.predicate.value,l=s.object;u in a||(a[u]={"@id":u});const h=a[u],f=l.termType.endsWith("Node");if(f&&!(l.value in a)&&(a[l.value]={"@id":l.value}),c===QQ&&!t&&f){RZ.addValue(h,"@type",l.value,{propertyIsArray:!0});continue}const d=a0(l,r);if(RZ.addValue(h,c,d,{propertyIsArray:!0}),f)if(l.value===ZQ){const e=a[l.value];"usages"in e||(e.usages=[]),e.usages.push({node:h,property:c,value:d})}else l.value in o?o[l.value]=!1:o[l.value]={node:h,property:c,value:d}}for(const e in i){const t=i[e];if(!(ZQ in t))continue;const r=t[ZQ];if(r.usages){for(let e of r.usages){let r=e.node,n=e.property,i=e.value;const s=[],a=[];let u=Object.keys(r).length;for(;n===YQ&&xZ.isObject(o[r["@id"]])&&xZ.isArray(r[XQ])&&1===r[XQ].length&&xZ.isArray(r[YQ])&&1===r[YQ].length&&(3===u||4===u&&xZ.isArray(r["@type"])&&1===r["@type"].length&&r["@type"][0]===JQ)&&(s.push(r[XQ][0]),a.push(r["@id"]),e=o[r["@id"]],r=e.node,n=e.property,i=e.value,u=Object.keys(r).length,EZ.isBlankNode(r)););delete i["@id"],i["@list"]=s.reverse();for(const e of a)delete t[e]}delete r.usages}}const s=[],a=Object.keys(n).sort();for(const e of a){const t=n[e];if(e in i){const r=t["@graph"]=[],n=i[e],o=Object.keys(n).sort();for(const e of o){const t=n[e];EZ.isSubjectReference(t)||r.push(t)}}EZ.isSubjectReference(t)||s.push(t)}return s},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){GQ(o,n,i,s,a,"next",e)}function a(e){GQ(o,n,i,s,a,"throw",e)}s(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();const{createNodeMap:u0}=HQ,{isKeyword:c0}=dQ,{RDF_FIRST:l0,RDF_REST:h0,RDF_NIL:f0,RDF_TYPE:d0,RDF_JSON_LITERAL:p0,RDF_LANGSTRING:g0,XSD_BOOLEAN:m0,XSD_DOUBLE:y0,XSD_INTEGER:v0,XSD_STRING:b0}=VZ,{isAbsolute:w0}=YZ,_0={};var x0=_0;function S0(e,t,r,n,i){const o=Object.keys(t).sort();for(const s of o){const o=t[s],a=Object.keys(o).sort();for(let t of a){const a=o[t];if("@type"===t)t=d0;else if(c0(t))continue;for(const o of a){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!w0(s))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!w0(t))continue;if("BlankNode"===u.termType&&!i.produceGeneralizedRdf)continue;const c=E0(o,n,e,r);c&&e.push({subject:a,predicate:u,object:c,graph:r})}}}}function E0(e,t,r,n){const i={};if(EZ.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};let t=e["@value"];const r=e["@type"]||null;"@json"===r?(i.value=zX(t),i.datatype.value=p0):xZ.isBoolean(t)?(i.value=t.toString(),i.datatype.value=r||m0):xZ.isDouble(t)||r===y0?(xZ.isDouble(t)||(t=parseFloat(t)),i.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=r||y0):xZ.isNumber(t)?(i.value=t.toFixed(0),i.datatype.value=r||v0):"@language"in e?(i.value=t,i.datatype.value=r||g0,i.language=e["@language"]):(i.value=t,i.datatype.value=r||b0)}else if(EZ.isList(e)){const o=function(e,t,r,n){const i={termType:"NamedNode",value:l0},o={termType:"NamedNode",value:h0},s={termType:"NamedNode",value:f0},a=e.pop(),u=a?{termType:"BlankNode",value:t.getId()}:s;let c=u;for(const s of e){const e=E0(s,t,r,n),a={termType:"BlankNode",value:t.getId()};r.push({subject:c,predicate:i,object:e,graph:n}),r.push({subject:c,predicate:o,object:a,graph:n}),c=a}if(a){const e=E0(a,t,r,n);r.push({subject:c,predicate:i,object:e,graph:n}),r.push({subject:c,predicate:o,object:s,graph:n})}return u}(e["@list"],t,r,n);i.termType=o.termType,i.value=o.value}else{const t=xZ.isObject(e)?e["@id"]:e;i.termType=t.startsWith("_:")?"BlankNode":"NamedNode",i.value=t}return"NamedNode"!==i.termType||w0(i.value)?i:null}_0.toRDF=(e,t)=>{const r=new RZ.IdentifierIssuer("_:b"),n={"@default":{}};u0(e,n,"@default",r);const i=[],o=Object.keys(n).sort();for(const e of o){let o;if("@default"===e)o={termType:"DefaultGraph",value:""};else{if(!w0(e))continue;o=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},o.value=e}S0(i,n[e],o,r,t)}return i};const{isKeyword:k0}=dQ,{createNodeMap:I0,mergeNodeMapGraphs:A0}=HQ,T0={};var P0=T0;function O0(e){const t={};for(const r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function C0(e,t,r){for(let n=r.length-1;n>=0;--n){const i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function M0(e,t,r){const n="@"+r;let i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function N0(e){if(!xZ.isArray(e)||1!==e.length||!xZ.isObject(e[0]))throw new kZ("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function R0(e,t,r,n){let i=!0,o=!1;for(const s in r){let a=!1;const u=RZ.getValues(t,s),c=0===RZ.getValues(r,s).length;if(k0(s)){if("@id"!==s&&"@type"!==s)continue;if(i=!1,"@id"===s){if(r["@id"].length>=0&&!xZ.isEmptyObject(r["@id"][0]))return r["@id"].includes(u[0]);a=!0;continue}if("@type"in r)if(c){if(u.length>0)return!1;a=!0}else{if(1!==r["@type"].length||!xZ.isEmptyObject(r["@type"][0])){for(const e of r["@type"])if(u.some((t=>t===e)))return!0;return!1}a=u.length>0}}const l=RZ.getValues(r,s)[0];let h=!1;if(l&&(N0([l]),h="@default"in l),i=!1,0!==u.length||!h){if(u.length>0&&c)return!1;if(void 0===l){if(u.length>0)return!1;a=!0}else if(xZ.isObject(l))a=u.length>0;else if(EZ.isValue(l))a=u.some((e=>B0(l,e)));else if(EZ.isSubject(l)||EZ.isSubjectReference(l))a=u.some((t=>D0(e,l,t,n)));else if(EZ.isList(l)){const t=l["@list"][0];if(EZ.isList(u[0])){const r=u[0]["@list"];EZ.isValue(t)?a=r.some((e=>B0(t,e))):(EZ.isSubject(t)||EZ.isSubjectReference(t))&&(a=r.some((r=>D0(e,t,r,n))))}else a=!1}if(!a&&n.requireAll)return!1;o=o||a}}return i||o}function L0(e,t){const r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,o=n.property,s={"@id":t};if(xZ.isArray(i)){for(let e=0;e<i.length;++e)if(RZ.compareValues(i[e],s)){i[e]=s;break}}else{const e=xZ.isArray(i[o]);RZ.removeValue(i,o,s,{propertyIsArray:e}),RZ.addValue(i,o,s,{propertyIsArray:e})}const a=e=>{const t=Object.keys(r);for(const n of t)n in r&&xZ.isObject(r[n].parent)&&r[n].parent["@id"]===e&&(delete r[n],a(n))};a(t)}function j0(e,t,r){xZ.isObject(e)?RZ.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function D0(e,t,r,n){if(!("@id"in r))return!1;const i=e.subjects[r["@id"]];return i&&R0(e,i,t,n)}function B0(e,t){const r=t["@value"],n=t["@type"],i=t["@language"],o=e["@value"]?xZ.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?xZ.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],a=e["@language"]?xZ.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===o.length&&0===s.length&&0===a.length||!(!o.includes(r)&&!xZ.isEmptyObject(o[0]))&&!!(!n&&0===s.length||s.includes(n)||n&&xZ.isEmptyObject(s[0]))&&!!(!i&&0===a.length||a.includes(i)||i&&xZ.isEmptyObject(a[0]))}T0.frameMergedOrDefault=(e,t,r)=>{const n={options:r,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},i=new RZ.IdentifierIssuer("_:b");I0(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=A0(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];const o=[];return T0.frame(n,Object.keys(n.subjects).sort(),t,o),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((e=>1===n.bnodeMap[e].length))),o},T0.frame=(e,t,r,n,i=null)=>{N0(r),r=r[0];const o=e.options,s={embed:M0(r,o,"embed"),explicit:M0(r,o,"explicit"),requireAll:M0(r,o,"requireAll")},a=function(e,t,r,n){const i={};for(const o of t){const t=e.graphMap[e.graph][o];R0(e,t,r,n)&&(i[o]=t)}return i}(e,t,r,s),u=Object.keys(a).sort();for(const t of u){const u=a[t];if("@link"===s.embed&&t in e.link){j0(n,i,e.link[t]);continue}null===i?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};const c={};if(c["@id"]=t,0===t.indexOf("_:")&&RZ.addValue(e.bnodeMap,t,c,{propertyIsArray:!0}),e.link[t]=c,"@never"===s.embed||C0(u,e.graph,e.subjectStack))j0(n,i,c);else{if("@last"===s.embed&&(t in e.uniqueEmbeds[e.graph]&&L0(e,t),e.uniqueEmbeds[e.graph][t]={parent:n,property:i}),e.subjectStack.push({subject:u,graph:e.graph}),t in e.graphMap){let n=!1,i=null;"@graph"in r?(i=r["@graph"][0],xZ.isObject(i)||(i={}),n=!("@merged"===t||"@default"===t)):(n="@merged"!==e.graph,i={}),n&&(e.graphStack.push(e.graph),e.graph=t,T0.frame(e,Object.keys(e.graphMap[t]).sort(),[i],c,"@graph"),e.graph=e.graphStack.pop)}for(const t of Object.keys(u).sort())if(k0(t)){if(c[t]=RZ.clone(u[t]),"@type"===t)for(const t of u["@type"])0===t.indexOf("_:")&&RZ.addValue(e.bnodeMap,t,c,{propertyIsArray:!0})}else if(!s.explicit||t in r)for(let n of u[t]){const i=t in r?r[t]:O0(s);if(EZ.isList(n)){const i={"@list":[]};j0(c,t,i);const o=n["@list"];for(const a in o)if(n=o[a],EZ.isSubjectReference(n)){const o=t in r?r[t][0]["@list"]:O0(s);T0.frame(e,[n["@id"]],o,i,"@list")}else j0(i,"@list",RZ.clone(n))}else EZ.isSubjectReference(n)?T0.frame(e,[n["@id"]],i,c,t):B0(i[0],n)&&j0(c,t,RZ.clone(n))}for(const e of Object.keys(r).sort()){if(k0(e))continue;const t=r[e][0]||{};if(!M0(t,o,"omitDefault")&&!(e in c)){let r="@null";"@default"in t&&(r=RZ.clone(t["@default"])),xZ.isArray(r)||(r=[r]),c[e]=[{"@preserve":r}]}}if("@reverse"in r)for(const n of Object.keys(r["@reverse"]).sort()){const o=r["@reverse"][n];for(const r of Object.keys(e.subjects))RZ.getValues(e.subjects[r],n).some((e=>e["@id"]===t))&&(c["@reverse"]=c["@reverse"]||{},RZ.addValue(c["@reverse"],n,[],{propertyIsArray:!0}),T0.frame(e,[r],o,c["@reverse"][n],i))}j0(n,i,c),e.subjectStack.pop()}}};const{isArray:U0,isObject:F0,isString:z0,isUndefined:V0}=xZ,{isList:H0,isValue:K0,isGraph:q0,isSimpleGraph:$0,isSubjectReference:W0}=EZ,{expandIri:G0,getContextValue:J0,isKeyword:X0,process:Y0}=dQ,{removeBase:Z0}=YZ,{addValue:Q0,asArray:e1,compareShortestLeast:t1}=RZ,r1={};var n1=r1;function i1(e,t,r){if("@nest"!==G0(e,t,{vocab:!0},r))throw new kZ("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}function o1(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}r1.compact=({activeCtx:e,activeProperty:t=null,element:r,options:n={},compactionMap:i=(()=>{})})=>{if(U0(r)){let o=[];for(let s=0;s<r.length;++s){let a=r1.compact({activeCtx:e,activeProperty:t,element:r[s],options:n,compactionMap:i});null===a&&(a=i({unmappedValue:r[s],activeCtx:e,activeProperty:t,parent:r,index:s,options:n}),void 0===a)||o.push(a)}return n.compactArrays&&1===o.length&&0===(J0(e,t,"@container")||[]).length&&(o=o[0]),o}const o=J0(e,t,"@context");if(V0(o)||(e=Y0({activeCtx:e,localCtx:o,isPropertyTermScopedContext:!0,options:n})),F0(r)){if(n.link&&"@id"in r&&n.link.hasOwnProperty(r["@id"])){const e=n.link[r["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===r)return e[t].compacted}if(K0(r)||W0(r)){const i=r1.compactValue({activeCtx:e,activeProperty:t,value:r,options:n});return n.link&&W0(r)&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:i})),i}if(H0(r)&&(J0(e,t,"@container")||[]).includes("@list"))return r1.compact({activeCtx:e,activeProperty:t,element:r["@list"],options:n,compactionMap:i});const o="@reverse"===t,s={};e=e.revertTypeScopedContext(),n.link&&"@id"in r&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:s}));let a=r["@type"]||[];a.length>1&&(a=Array.from(a).sort());const u=e;for(const t of a){const r=r1.compactIri({activeCtx:u,iri:t,relativeTo:{vocab:!0}}),i=J0(u,r,"@context");V0(i)||(e=Y0({activeCtx:e,localCtx:i,options:n,isTypeScopedContext:!0}))}const c=Object.keys(r).sort();for(const a of c){const u=r[a];if("@id"!==a&&"@type"!==a)if("@reverse"!==a)if("@preserve"!==a)if("@index"!==a)if("@graph"!==a&&"@list"!==a&&X0(a)){const t=r1.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});Q0(s,t,u)}else{if(!U0(u))throw new kZ("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===u.length){const t=r1.compactIri({activeCtx:e,iri:a,value:u,relativeTo:{vocab:!0},reverse:o}),r=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let i=s;r&&(i1(e,r,n),F0(s[r])||(s[r]={}),i=s[r]),Q0(i,t,u,{propertyIsArray:!0})}for(const t of u){const r=r1.compactIri({activeCtx:e,iri:a,value:t,relativeTo:{vocab:!0},reverse:o}),u=e.mappings.has(r)?e.mappings.get(r)["@nest"]:null;let c=s;u&&(i1(e,u,n),F0(s[u])||(s[u]={}),c=s[u]);const l=J0(e,r,"@container")||[],h=q0(t),f=H0(t);let d;f?d=t["@list"]:h&&(d=t["@graph"]);let p=r1.compact({activeCtx:e,activeProperty:r,element:f||h?d:t,options:n,compactionMap:i});if(f){if(U0(p)||(p=[p]),l.includes("@list")){Q0(c,r,p,{valueIsArray:!0,allowDuplicate:!0});continue}p={[r1.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:p},"@index"in t&&(p[r1.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(h)if(l.includes("@graph")&&(l.includes("@id")||l.includes("@index")&&$0(t))){let i;c.hasOwnProperty(r)?i=c[r]:c[r]=i={};const o=(l.includes("@id")?t["@id"]:t["@index"])||r1.compactIri({activeCtx:e,iri:"@none",vocab:!0});Q0(i,o,p,{propertyIsArray:!n.compactArrays||l.includes("@set")})}else l.includes("@graph")&&$0(t)||(U0(p)&&1===p.length&&n.compactArrays&&(p=p[0]),p={[r1.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:p},"@id"in t&&(p[r1.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(p[r1.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])),Q0(c,r,p,{propertyIsArray:!n.compactArrays||l.includes("@set")});else if(l.includes("@language")||l.includes("@index")||l.includes("@id")||l.includes("@type")){let n,i;if(c.hasOwnProperty(r)?n=c[r]:c[r]=n={},l.includes("@language"))K0(p)&&(p=p["@value"]),i=t["@language"];else if(l.includes("@index"))i=t["@index"];else if(l.includes("@id")){const t=r1.compactIri({activeCtx:e,iri:"@id",vocab:!0});i=p[t],delete p[t]}else if(l.includes("@type")){const t=r1.compactIri({activeCtx:e,iri:"@type",vocab:!0});let r;switch([i,...r]=e1(p[t]||[]),r.length){case 0:delete p[t];break;case 1:p[t]=r[0];break;default:p[t]=r}}i||(i=r1.compactIri({activeCtx:e,iri:"@none",vocab:!0})),Q0(n,i,p,{propertyIsArray:l.includes("@set")})}else{const e=!n.compactArrays||l.includes("@set")||l.includes("@list")||U0(p)&&0===p.length||"@list"===a||"@graph"===a;Q0(c,r,p,{propertyIsArray:e})}}}else{if((J0(e,t,"@container")||[]).includes("@index"))continue;const r=r1.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});Q0(s,r,u)}else{const r=r1.compact({activeCtx:e,activeProperty:t,element:u,options:n,compactionMap:i});U0(r)&&0===r.length||Q0(s,a,r)}else{const t=r1.compact({activeCtx:e,activeProperty:"@reverse",element:u,options:n,compactionMap:i});for(const r in t)if(e.mappings.has(r)&&e.mappings.get(r).reverse){const i=t[r],o=(J0(e,r,"@container")||[]).includes("@set")||!n.compactArrays;Q0(s,r,i,{propertyIsArray:o}),delete t[r]}if(Object.keys(t).length>0){const r=r1.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});Q0(s,r,t)}}else{const t="@type"===a,r=t&&e.previousContext||e;let n=e1(u).map((e=>r1.compactIri({activeCtx:r,iri:e,relativeTo:{vocab:t}})));1===n.length&&(n=n[0]);const i=r1.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}}),o=U0(n)&&0===u.length;Q0(s,i,n,{propertyIsArray:o})}}return s}return r},r1.compactIri=({activeCtx:e,iri:t,value:r=null,relativeTo:n={vocab:!1},reverse:i=!1})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if(X0(t)&&t in o&&"@none"in o[t]&&"@type"in o[t]["@none"]&&"@none"in o[t]["@none"]["@type"])return o[t]["@none"]["@type"]["@none"];if(n.vocab&&t in o){const n=e["@language"]||"@none",o=[];F0(r)&&"@index"in r&&!("@graph"in r)&&o.push("@index","@index@set"),F0(r)&&"@preserve"in r&&(r=r["@preserve"][0]),q0(r)?("@index"in r&&o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r&&o.push("@graph@id","@graph@id@set"),o.push("@graph","@graph@set","@set"),"@index"in r||o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r||o.push("@graph@id","@graph@id@set")):F0(r)&&!K0(r)&&o.push("@id","@id@set","@type","@set@type");let s="@language",a="@null";if(i)s="@type",a="@reverse",o.push("@set");else if(H0(r)){"@index"in r||o.push("@list");const e=r["@list"];if(0===e.length)s="@any",a="@none";else{let t=0===e.length?n:null,r=null;for(let n=0;n<e.length;++n){const i=e[n];let o="@none",s="@none";if(K0(i)?"@language"in i?o=i["@language"]:"@type"in i?s=i["@type"]:o="@null":s="@id",null===t?t=o:o!==t&&K0(i)&&(t="@none"),null===r?r=s:s!==r&&(r="@none"),"@none"===t&&"@none"===r)break}t=t||"@none",r=r||"@none","@none"!==r?(s="@type",a=r):a=t}}else K0(r)?"@language"in r&&!("@index"in r)?(o.push("@language","@language@set"),a=r["@language"]):"@type"in r&&(s="@type",a=r["@type"]):(s="@type",a="@id"),o.push("@set");o.push("@none"),F0(r)&&!("@index"in r)&&o.push("@index","@index@set"),K0(r)&&1===Object.keys(r).length&&o.push("@language","@language@set");const u=function(e,t,r,n,i,o){null===o&&(o="@null");const s=[];if("@id"!==o&&"@reverse"!==o||!W0(r))s.push(o);else{"@reverse"===o&&s.push("@reverse");const t=r1.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}s.push("@none");const a=e.inverse[t];for(let e=0;e<n.length;++e){const t=n[e];if(!(t in a))continue;const r=a[t][i];for(let e=0;e<s.length;++e){const t=s[e];if(t in r)return r[t]}}return null}(e,t,r,o,s,a);if(null!==u)return u}if(n.vocab&&"@vocab"in e){const r=e["@vocab"];if(0===t.indexOf(r)&&t!==r){const n=t.substr(r.length);if(!e.mappings.has(n))return n}}let s=null;const a=[];let u=e.fastCurieMap;const c=t.length-1;for(let e=0;e<c&&t[e]in u;++e)u=u[t[e]],""in u&&a.push(u[""][0]);for(let n=a.length-1;n>=0;--n){const i=a[n],o=i.terms;for(const n of o){const o=n+":"+t.substr(i.iri.length);e.mappings.get(n)._prefix&&(!e.mappings.has(o)||null===r&&e.mappings.get(o)["@id"]===t)&&(null===s||t1(o,s)<0)&&(s=o)}}return null!==s?s:n.vocab?t:Z0(e["@base"],t)},r1.compactValue=({activeCtx:e,activeProperty:t,value:r,options:n})=>{if(K0(r)){const n=J0(e,t,"@type"),i=J0(e,t,"@language"),o=J0(e,t,"@container")||[],s="@index"in r&&!o.includes("@index");if(!s&&(r["@type"]===n||r["@language"]===i))return r["@value"];const a=Object.keys(r).length,u=1===a||2===a&&"@index"in r&&!s,c="@language"in e,l=z0(r["@value"]),h=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(u&&(!c||!l||h))return r["@value"];const f={};return s&&(f[r1.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=r["@index"]),"@type"in r?f[r1.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=r1.compactIri({activeCtx:e,iri:r["@type"],relativeTo:{vocab:!0}}):"@language"in r&&(f[r1.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=r["@language"]),f[r1.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=r["@value"],f}const i=G0(e,t,{vocab:!0},n),o=J0(e,t,"@type"),s=r1.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:"@vocab"===o}});return"@id"===o||"@vocab"===o||"@graph"===i?s:{[r1.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}},
/**
   * Removes the @preserve keywords as the last step of the compaction
   * algorithm when it is running on framed output.
   *
   * @param ctx the active context used to compact the input.
   * @param input the framed, compacted output.
   * @param options the compaction options used.
   *
   * @return the resulting output.
   */
r1.removePreserve=(e,t,r)=>{if(U0(t)){const n=[];for(let i=0;i<t.length;++i){const o=r1.removePreserve(e,t[i],r);null!==o&&n.push(o)}t=n}else if(F0(t)){
// remove @preserve
if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(K0(t))return t;if(H0(t))return t["@list"]=r1.removePreserve(e,t["@list"],r),t;const n=r1.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(t.hasOwnProperty(n)){const e=t[n];if(r.link.hasOwnProperty(e)){const n=r.link[e].indexOf(t);if(-1!==n)return r.link[e][n];r.link[e].push(t)}else r.link[e]=[t]}const i=r1.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(const o in t){if(o===n&&r.bnodesToClear.includes(t[o])){delete t[n];continue}let s=r1.removePreserve(e,t[o],r);const a=J0(e,o,"@container")||[];r.compactArrays&&U0(s)&&1===s.length&&0===a.length&&o!==i&&(s=s[0]),t[o]=s}}return t};const{callbackify:s1,normalizeDocumentLoader:a1}=RZ;var u1=class{constructor(){this._requests={},this.add=s1(this.add.bind(this))}wrapLoader(e){const t=this;return t._loader=a1(e),function(){return t.add.apply(t,arguments)}}add(e){var t,r=this;return(t=function*(){const t=r;let n=t._requests[e];if(n)return Promise.resolve(n);n=t._requests[e]=t._loader(e);try{return yield n}finally{delete t._requests[e]}},function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(e){o1(o,n,i,s,a,"next",e)}function a(e){o1(o,n,i,s,a,"throw",e)}s(void 0)}))})()}};function c1(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function l1(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){c1(o,n,i,s,a,"next",e)}function a(e){c1(o,n,i,s,a,"throw",e)}s(void 0)}))}}const{parseLinkHeader:h1,buildHeaders:f1}=RZ,{LINK_HEADER_REL:d1}=VZ;var p1=({secure:e,strictSSL:t=!0,maxRedirects:r=-1,request:n,headers:i={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{i=f1(i),n=n||rJ;const o=rJ;return(new u1).wrapLoader((function(e){return s(e,[])}));function s(e,t){return a.apply(this,arguments)}function a(){return(a=l1((function*(a,u){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new kZ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new kZ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let c,l=null;if(null!==l)return l;try{c=yield g1(n,{url:a,headers:i,strictSSL:t,followRedirect:!1})}catch(e){throw new kZ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}const{res:h,body:f}=c;l={contextUrl:null,documentUrl:a,document:f||null};const d=o.STATUS_CODES[h.statusCode];if(h.statusCode>=400)throw new kZ("URL could not be dereferenced: "+d,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:h.statusCode});if(h.headers.link&&"application/ld+json"!==h.headers["content-type"]){const e=h1(h.headers.link)[d1];if(Array.isArray(e))throw new kZ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});e&&(l.contextUrl=e.target)}if(h.statusCode>=300&&h.statusCode<400&&h.headers.location){if(u.length===r)throw new kZ("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:h.statusCode,redirects:u});if(-1!==u.indexOf(a))throw new kZ("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:h.statusCode,redirects:u});return u.push(a),s(h.headers.location,u)}return u.push(a),l}))).apply(this,arguments)}};function g1(e,t){return new Promise(((r,n)=>{e(t,((e,t,i)=>{e?n(e):r({res:t,body:i})}))}))}function m1(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function y1(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){m1(o,n,i,s,a,"next",e)}function a(e){m1(o,n,i,s,a,"throw",e)}s(void 0)}))}}const{parseLinkHeader:v1,buildHeaders:b1}=RZ,{LINK_HEADER_REL:w1}=VZ,_1=/(^|(\r\n))link:/i;var x1=({secure:e,headers:t={},xhr:r}={headers:{}})=>{return t=b1(t),(new u1).wrapLoader((function(e){return n.apply(this,arguments)}));function n(){return(n=y1((function*(n){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))throw new kZ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n});if(e&&0!==n.indexOf("https"))throw new kZ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n});let i;try{i=yield S1(r,n,t)}catch(e){throw new kZ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:e})}if(i.status>=400)throw new kZ("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:n,httpStatusCode:i.status});const o={contextUrl:null,documentUrl:n,document:i.response},s=i.getResponseHeader("Content-Type");let a;if(_1.test(i.getAllResponseHeaders())&&(a=i.getResponseHeader("Link")),a&&"application/ld+json"!==s){if(a=v1(a)[w1],Array.isArray(a))throw new kZ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n});a&&(o.contextUrl=a.target)}return o}))).apply(this,arguments)}};function S1(e,t,r){const n=new(e=e||XMLHttpRequest);return new Promise(((e,i)=>{n.onload=()=>e(n),n.onerror=e=>i(e),n.open("GET",t,!0);for(const e in r)n.setRequestHeader(e,r[e]);n.send()}))}function E1(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function k1(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){E1(o,n,i,s,a,"next",e)}function a(e){E1(o,n,i,s,a,"throw",e)}s(void 0)}))}}
/**
   * A JavaScript implementation of the JSON-LD API.
   *
   * @author Dave Longley
   *
   * @license BSD 3-Clause License
   * Copyright (c) 2011-2017 Digital Bazaar, Inc.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * Redistributions of source code must retain the above copyright notice,
   * this list of conditions and the following disclaimer.
   *
   * Redistributions in binary form must reproduce the above copyright
   * notice, this list of conditions and the following disclaimer in the
   * documentation and/or other materials provided with the distribution.
   *
   * Neither the name of the Digital Bazaar, Inc. nor the names of its
   * contributors may be used to endorse or promote products derived from
   * this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
   * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
   * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */const I1=RZ.IdentifierIssuer,{expand:A1}=DQ,{flatten:T1}=WQ,{fromRDF:P1}=s0,{toRDF:O1}=x0,{frameMergedOrDefault:C1}=P0,{isArray:M1,isObject:N1,isString:R1}=xZ,{isSubjectReference:L1}=EZ,{getInitialContext:j1,process:D1,getAllContexts:B1}=dQ,{compact:U1,compactIri:F1,removePreserve:z1}=n1,{createNodeMap:V1,createMergedNodeMap:H1,mergeNodeMaps:K1}=HQ,q1=void 0!==dq&&dq.versions&&dq.versions.node,$1=!q1&&("undefined"!=typeof window||"undefined"!=typeof self),W1=function(e){const t={};function r(t,r){let{documentLoader:n=e.documentLoader}=r,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,["documentLoader"]);return Object.assign({},{documentLoader:n},i,t)}return e.compact=RZ.callbackify(function(){var t=k1((function*(t,n,i){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new kZ("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;(i=r(i,{base:R1(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new I1("_:b")})).link&&(i.skipExpansion=!0),i.compactToRelative||delete i.base,o=i.skipExpansion?t:yield e.expand(t,i);const s=yield e.processContext(j1(i),n,i);let a=U1({activeCtx:s,element:o,options:i,compactionMap:i.compactionMap});i.compactArrays&&!i.graph&&M1(a)?1===a.length?a=a[0]:0===a.length&&(a={}):i.graph&&N1(a)&&(a=[a]),N1(n)&&"@context"in n&&(n=n["@context"]),n=RZ.clone(n),M1(n)||(n=[n]);const u=n;n=[];for(let e=0;e<u.length;++e)(!N1(u[e])||Object.keys(u[e]).length>0)&&n.push(u[e]);const c=n.length>0;if(1===n.length&&(n=n[0]),M1(a)){const e=F1({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=a;a={},c&&(a["@context"]=n),a[e]=t}else if(N1(a)&&c){const e=a;a={"@context":n};for(const t in e)a[t]=e[t]}if(i.framing){const e=F1({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}});// remove @preserve from results
i.link={},a[e]=z1(s,a[e],i)}return a}));return function(e,r,n){return t.apply(this,arguments)}}()),e.expand=RZ.callbackify(function(){var t=k1((function*(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=r(n,{keepFreeFloatingNodes:!1})).expansionMap&&(n.expansionMap=void 0);const i={},o=[];if("expandContext"in n){const e=RZ.clone(n.expandContext);N1(e)&&"@context"in e?i.expandContext=e:i.expandContext={"@context":e},o.push(i.expandContext)}let s;if(R1(t)){const r=yield e.get(t,n);s=r.documentUrl,i.input=r.document,r.contextUrl&&(i.remoteContext={"@context":r.contextUrl},o.push(i.remoteContext))}else i.input=RZ.clone(t);"base"in n||(n.base=s||""),yield B1(i,n);let a=j1(n);o.forEach((e=>{a=D1({activeCtx:a,localCtx:e,options:n})}));let u=A1({activeCtx:a,element:i.input,options:n,expansionMap:n.expansionMap});return N1(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),M1(u)||(u=[u]),u}));return function(e,r){return t.apply(this,arguments)}}()),e.flatten=RZ.callbackify(function(){var t=k1((function*(t,n,i){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,i=r(i,{base:R1(t)?t:""});const o=yield e.expand(t,i),s=T1(o);if(null===n)return s;i.graph=!0,i.skipExpansion=!0;const a=yield e.compact(s,n,i);return a}));return function(e,r,n){return t.apply(this,arguments)}}()),e.frame=RZ.callbackify(function(){var t=k1((function*(t,n,i){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(i=r(i,{base:R1(t)?t:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[]}),R1(n)){const t=yield e.get(n,i);if(n=t.document,t.contextUrl){let e=n["@context"];e?M1(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const o=n&&n["@context"]||{},s=yield e.expand(t,i),a=RZ.clone(i);a.isFrame=!0,a.keepFreeFloatingNodes=!0;const u=yield e.expand(n,a);a.merged=!("@graph"in n);const c=C1(s,u,a);a.graph=!0,a.skipExpansion=!0,a.link={},a.framing=!0;const l=yield e.compact(c,o,a);return l}));return function(e,r,n){return t.apply(this,arguments)}}()),e.link=RZ.callbackify(function(){var t=k1((function*(t,r,n){const i={};return r&&(i["@context"]=r),i["@embed"]="@link",e.frame(t,i,n)}));return function(e,r,n){return t.apply(this,arguments)}}()),e.normalize=e.canonize=RZ.callbackify(function(){var t=k1((function*(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=r(n,{base:R1(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new kZ("Unknown canonicalization input format.","jsonld.CanonizeError");const e=UZ.parse(t);return oJ.canonize(e,n)}const i=RZ.clone(n);delete i.format,i.produceGeneralizedRdf=!1;const o=yield e.toRDF(t,i);return oJ.canonize(o,n)}));return function(e,r){return t.apply(this,arguments)}}()),e.fromRDF=RZ.callbackify(function(){var e=k1((function*(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=r(n,{format:R1(e)?"application/n-quads":void 0});const{format:i}=n;let o,{rdfParser:s}=n;if(i){if(s=s||t[i],!s)throw new kZ("Unknown input format.","jsonld.UnknownFormat",{format:i})}else s=()=>e;return o=s.length>1?new Promise(((t,r)=>{s(e,((e,n)=>{e?r(e):t(n)}))})):Promise.resolve(s(e)),o=yield o,Array.isArray(o)||(o=UZ.legacyDatasetToQuads(o)),P1(o,n)}));return function(t,r){return e.apply(this,arguments)}}()),e.toRDF=RZ.callbackify(function(){var t=k1((function*(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let i;i=(n=r(n,{base:R1(t)?t:"",skipExpansion:!1})).skipExpansion?t:yield e.expand(t,n);const o=O1(i,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return yield UZ.serialize(o);throw new kZ("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return o}));return function(e,r){return t.apply(this,arguments)}}()),e.createNodeMap=RZ.callbackify(function(){var t=k1((function*(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=r(n,{base:R1(t)?t:""});const i=yield e.expand(t,n);return H1(i,n)}));return function(e,r){return t.apply(this,arguments)}}()),e.merge=RZ.callbackify(function(){var t=k1((function*(t,n,i){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!M1(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,i=r(i,{});const o=yield Promise.all(t.map((t=>{const r=Object.assign({},i);return e.expand(t,r)})));let s=!0;"mergeNodes"in i&&(s=i.mergeNodes);const a=i.issuer||new I1("_:b"),u={"@default":{}};for(let e=0;e<o.length;++e){const t=RZ.relabelBlankNodes(o[e],{issuer:new I1("_:b"+e+"-")}),r=s||0===e?u:{"@default":{}};if(V1(t,r,"@default",a),r!==u)for(const e in r){const t=r[e];if(!(e in u)){u[e]=t;continue}const n=u[e];for(const e in t)e in n||(n[e]=t[e])}}const c=K1(u),l=[],h=Object.keys(c).sort();for(let e=0;e<h.length;++e){const t=c[h[e]];L1(t)||l.push(t)}if(null===n)return l;i.graph=!0,i.skipExpansion=!0;const f=yield e.compact(l,n,i);return f}));return function(e,r,n){return t.apply(this,arguments)}}()),Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=RZ.normalizeDocumentLoader(t)}),e.documentLoader=function(){var e=k1((function*(e){throw new kZ("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}));return function(t){return e.apply(this,arguments)}}(),e.loadDocument=RZ.callbackify(k1((function*(){return e.documentLoader.apply(null,arguments)}))),e.get=RZ.callbackify(function(){var t=k1((function*(t,r){let n;n="function"==typeof r.documentLoader?RZ.normalizeDocumentLoader(r.documentLoader):e.documentLoader;const i=yield n(t);try{if(!i.document)throw new kZ("No remote document found at the given URL.","jsonld.NullRemoteDocument");R1(i.document)&&(i.document=JSON.parse(i.document))}catch(e){throw new kZ("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:i})}return i}));return function(e,r){return t.apply(this,arguments)}}()),e.processContext=RZ.callbackify(function(){var e=k1((function*(e,t,n){if(n=r(n,{base:""}),null===t)return j1(n);t=RZ.clone(t),N1(t)&&"@context"in t||(t={"@context":t});const i=yield B1(t,n);return D1({activeCtx:e,localCtx:i,options:n})}));return function(t,r,n){return e.apply(this,arguments)}}()),e.getContextValue=dQ.getContextValue,e.documentLoaders={},e.documentLoaders.node=p1,e.documentLoaders.xhr=x1,e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new kZ('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",UZ.parse),e.registerRDFParser("application/nquads",UZ.parse),e.registerRDFParser("rdfa-api",class{parse(e){const t={"@default":[]},r=e.getSubjects();for(let n=0;n<r.length;++n){const i=r[n];if(null===i)continue;const o=e.getSubjectTriples(i);if(null===o)continue;const s=o.predicates;for(const e in s){const r=s[e].objects;for(let n=0;n<r.length;++n){const o=r[n],s={};0===i.indexOf("_:")?s.subject={type:"blank node",value:i}:s.subject={type:"IRI",value:i},0===e.indexOf("_:")?s.predicate={type:"blank node",value:e}:s.predicate={type:"IRI",value:e};let a=o.value;if(o.type===$Z){const e=new("undefined"==typeof XMLSerializer?rJ.XMLSerializer:XMLSerializer);a="";for(let t=0;t<o.value.length;t++)o.value[t].nodeType===GZ.ELEMENT_NODE?a+=e.serializeToString(o.value[t]):o.value[t].nodeType===GZ.TEXT_NODE&&(a+=o.value[t].nodeValue)}s.object={},o.type===qZ?0===o.value.indexOf("_:")?s.object.type="blank node":s.object.type="IRI":(s.object.type="literal",o.type===KZ?o.language?(s.object.datatype=HZ,s.object.language=o.language):s.object.datatype=WZ:s.object.datatype=o.type),s.object.value=a,t["@default"].push(s)}}}return t}}.parse),e.url=YZ,e.util=RZ,Object.assign(e,RZ),e.promises=e,e.RequestQueue=u1,e.JsonLdProcessor=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t})(e),$1&&void 0===LH.JsonLdProcessor&&Object.defineProperty(LH,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),q1?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},G1=function(){return W1((function(){return G1()}))};W1(G1);var J1=G1,X1=DH((function(e){PG.gte(dq.version,"8.6.0")?e.exports=wZ:e.exports=J1}));X1.jsonld;var Y1=DH((function(e){!function(t){var r={bytesToHex:function(e){return function(e){return e.map((function(e){return 2,(t=e.toString(16)).length>2?t:Array(2-t.length+1).join("0")+t;var t})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=r:t.convertHex=r}(LH)})),Z1=DH((function(e){!function(t){var r={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};r.UTF8={bytesToString:function(e){return decodeURIComponent(escape(r.bytesToString(e)))},stringToBytes:function(e){return r.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=r:t.convertString=r}(LH)})),Q1=DH((function(e){!function(t){var r={};e.exports?(r.bytesToHex=Y1.bytesToHex,r.convertString=Z1,e.exports=s):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=s);var n=[];!function(){function e(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(n[i]=t(Math.pow(r,1/3)),i++),r++}();var i=[],o=function(e,t,r){for(var o=e[0],s=e[1],a=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7],d=0;d<64;d++){if(d<16)i[d]=0|t[r+d];else{var p=i[d-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=i[d-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;i[d]=g+i[d-7]+y+i[d-16]}var v=o&s^o&a^s&a,b=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),w=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&h)+n[d]+i[d];f=h,h=l,l=c,c=u+w|0,u=a,a=s,s=o,o=w+(b+v)|0}e[0]=e[0]+o|0,e[1]=e[1]+s|0,e[2]=e[2]+a|0,e[3]=e[3]+u|0,e[4]=e[4]+c|0,e[5]=e[5]+l|0,e[6]=e[6]+h|0,e[7]=e[7]+f|0};function s(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}(e),s=8*e.length;i[s>>5]|=128<<24-s%32,i[15+(s+64>>9<<4)]=s;for(var a=0;a<i.length;a+=16)o(n,i,a);var u=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}(n);return t&&t.asBytes?u:t&&t.asString?r.convertString.bytesToString(u):r.bytesToHex(u)}s.x2=function(e,t){return s(s(e,{asBytes:!0}),t)}}(LH)}));function e2(e){e=e.trim();const t=[];for(let r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t}var t2=DH((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),r2=DH((function(e,t){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=VK.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=VK:(n(VK,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return VK.SlowBuffer(e)}}));r2.Buffer;var n2=C$.EventEmitter;function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s2=VK.Buffer,a2=rJ.inspect,u2=a2&&a2.custom||"inspect";function c2(e,t,r){s2.prototype.copy.call(e,t,r)}var l2=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return(t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s2.alloc(0);for(var t=s2.allocUnsafe(e>>>0),r=this.head,n=0;r;)c2(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s2.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u2,value:function(e,t){return a2(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i2(Object(r),!0).forEach((function(t){o2(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function h2(e,t){d2(e,t),f2(e)}function f2(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function d2(e,t){e.emit("error",t)}var p2=function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,eq(d2,this,e)):eq(d2,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?eq(f2,r):(r._writableState.errorEmitted=!0,eq(h2,r,e)):eq(h2,r,e):t?(eq(f2,r),t(e)):eq(f2,r)})),this)},g2=function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},m2=function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)},y2={};function v2(e,t,r){r||(r=Error);var n=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);n.prototype.name=r.name,n.prototype.code=e,y2[e]=n}function b2(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}v2("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),v2("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(n," ").concat(b2(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(n," ").concat(b2(t,"type"))}return o+". Received type ".concat(typeof r)}),TypeError),v2("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),v2("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),v2("ERR_STREAM_PREMATURE_CLOSE","Premature close"),v2("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),v2("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),v2("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),v2("ERR_STREAM_WRITE_AFTER_END","write after end"),v2("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v2("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),v2("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var w2={codes:y2},_2=w2.codes.ERR_INVALID_OPT_VALUE,x2=function(e,t,r,n){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new _2(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384};function S2(e){try{if(!LH.localStorage)return!1}catch(e){return!1}var t=LH.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var E2,k2=K2;function I2(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}K2.WritableState=H2;var A2,T2=function(e,t){if(S2("noDeprecation"))return e;var r=!1;return function(){if(!r){if(S2("throwDeprecation"))throw new Error(t);S2("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}},P2=VK.Buffer,O2=LH.Uint8Array||function(){},C2=x2,M2=w2.codes,N2=M2.ERR_INVALID_ARG_TYPE,R2=M2.ERR_METHOD_NOT_IMPLEMENTED,L2=M2.ERR_MULTIPLE_CALLBACK,j2=M2.ERR_STREAM_CANNOT_PIPE,D2=M2.ERR_STREAM_DESTROYED,B2=M2.ERR_STREAM_NULL_VALUES,U2=M2.ERR_STREAM_WRITE_AFTER_END,F2=M2.ERR_UNKNOWN_ENCODING,z2=m2;function V2(){}function H2(e,t,r){E2=E2||Z2,e=e||{},"boolean"!=typeof r&&(r=t instanceof E2),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=C2(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new L2;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(eq(i,n),eq(X2,e,t),e._writableState.errorEmitted=!0,z2(e,n)):(i(n),e._writableState.errorEmitted=!0,z2(e,n),X2(e,t))}(e,r,n,t,i);else{var o=G2(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||W2(e,r),n?eq($2,e,r,o,i):$2(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new I2(this)}function K2(e){var t=this instanceof(E2=E2||Z2);if(!t&&!A2.call(K2,this))return new K2(e);this._writableState=new H2(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n2.call(this)}function q2(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new D2("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function $2(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),X2(e,t)}function W2(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,q2(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new I2(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback;if(q2(e,t,!1,t.objectMode?1:u.length,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function G2(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function J2(e,t){e._final((function(r){t.pendingcb--,r&&z2(e,r),t.prefinished=!0,e.emit("prefinish"),X2(e,t)}))}function X2(e,t){var r=G2(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,eq(J2,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}t2(K2,n2),H2.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(H2.prototype,"buffer",{get:T2((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A2=Function.prototype[Symbol.hasInstance],Object.defineProperty(K2,Symbol.hasInstance,{value:function(e){return!!A2.call(this,e)||this===K2&&e&&e._writableState instanceof H2}})):A2=function(e){return e instanceof this},K2.prototype.pipe=function(){z2(this,new j2)},K2.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,P2.isBuffer(n)||n instanceof O2);return s&&!P2.isBuffer(e)&&(e=function(e){return P2.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=V2),i.ending?function(e,t){var r=new U2;z2(e,r),eq(t,r)}(this,r):(s||function(e,t,r,n){var i;return null===r?i=new B2:"string"==typeof r||t.objectMode||(i=new N2("chunk",["string","Buffer"],r)),!i||(z2(e,i),eq(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=P2.from(t,r)),t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else q2(e,t,!1,a,n,i,o);return u}(this,i,s,e,t,r)),o},K2.prototype.cork=function(){this._writableState.corked++},K2.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||W2(this,e))},K2.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new F2(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(K2.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(K2.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K2.prototype._write=function(e,t,r){r(new R2("_write()"))},K2.prototype._writev=null,K2.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,X2(e,t),r&&(t.finished?eq(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(K2.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(K2.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),K2.prototype.destroy=p2,K2.prototype._undestroy=g2,K2.prototype._destroy=function(e,t){t(e)};var Y2=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},Z2=r3;t2(r3,B3);for(var Q2=Y2(k2.prototype),e3=0;e3<Q2.length;e3++){var t3=Q2[e3];r3.prototype[t3]||(r3.prototype[t3]=k2.prototype[t3])}function r3(e){if(!(this instanceof r3))return new r3(e);B3.call(this,e),k2.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n3)))}function n3(){this._writableState.ended||eq(i3,this)}function i3(e){e.end()}Object.defineProperty(r3.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r3.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r3.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(r3.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var o3=r2.Buffer,s3=o3.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},a3=u3;function u3(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o3.isEncoding===s3||!s3(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=h3,this.end=f3,t=4;break;case"utf8":this.fillLast=l3,t=4;break;case"base64":this.text=d3,this.end=p3,t=3;break;default:return this.write=g3,void(this.end=m3)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o3.allocUnsafe(t)}function c3(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l3(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h3(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function f3(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d3(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p3(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g3(e){return e.toString(this.encoding)}function m3(e){return e&&e.length?this.write(e):""}u3.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},u3.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},u3.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=c3(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=c3(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=c3(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},u3.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var y3={StringDecoder:a3},v3=w2.codes.ERR_STREAM_PREMATURE_CLOSE;function b3(){}var w3,_3=function e(t,r,n){if("function"==typeof r)return e(t,null,r);r||(r={}),n=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(n||b3);var i=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,s=function(){t.writable||u()},a=t._writableState&&t._writableState.finished,u=function(){o=!1,a=!0,i||n.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){i=!1,c=!0,o||n.call(t)},h=function(e){n.call(t,e)},f=function(){var e;return i&&!c?(t._readableState&&t._readableState.ended||(e=new v3),n.call(t,e)):o&&!a?(t._writableState&&t._writableState.ended||(e=new v3),n.call(t,e)):void 0},d=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?d():t.on("request",d)):o&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",u),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",l),t.removeListener("error",h),t.removeListener("close",f)}};function x3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S3=Symbol("lastResolve"),E3=Symbol("lastReject"),k3=Symbol("error"),I3=Symbol("ended"),A3=Symbol("lastPromise"),T3=Symbol("handlePromise"),P3=Symbol("stream");function O3(e,t){return{value:e,done:t}}function C3(e){var t=e[S3];if(null!==t){var r=e[P3].read();null!==r&&(e[A3]=null,e[S3]=null,e[E3]=null,t(O3(r,!1)))}}function M3(e){eq(C3,e)}var N3,R3=Object.getPrototypeOf((function(){})),L3=Object.setPrototypeOf((x3(w3={get stream(){return this[P3]},next:function(){var e=this,t=this[k3];if(null!==t)return Promise.reject(t);if(this[I3])return Promise.resolve(O3(void 0,!0));if(this[P3].destroyed)return new Promise((function(t,r){eq((function(){e[k3]?r(e[k3]):t(O3(void 0,!0))}))}));var r,n=this[A3];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[I3]?r(O3(void 0,!0)):t[T3](r,n)}),n)}}(n,this));else{var i=this[P3].read();if(null!==i)return Promise.resolve(O3(i,!1));r=new Promise(this[T3])}return this[A3]=r,r}},Symbol.asyncIterator,(function(){return this})),x3(w3,"return",(function(){var e=this;return new Promise((function(t,r){e[P3].destroy(null,(function(e){e?r(e):t(O3(void 0,!0))}))}))})),w3),R3),j3=function(e){var t,r=Object.create(L3,(x3(t={},P3,{value:e,writable:!0}),x3(t,S3,{value:null,writable:!0}),x3(t,E3,{value:null,writable:!0}),x3(t,k3,{value:null,writable:!0}),x3(t,I3,{value:e._readableState.endEmitted,writable:!0}),x3(t,T3,{value:function(e,t){var n=r[P3].read();n?(r[A3]=null,r[S3]=null,r[E3]=null,e(O3(n,!1))):(r[S3]=e,r[E3]=t)},writable:!0}),t));return r[A3]=null,_3(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[E3];return null!==t&&(r[A3]=null,r[S3]=null,r[E3]=null,t(e)),void(r[k3]=e)}var n=r[S3];null!==n&&(r[A3]=null,r[S3]=null,r[E3]=null,n(O3(void 0,!0))),r[I3]=!0})),e.on("readable",M3.bind(null,r)),r},D3=function(){throw new Error("Readable.from is not available in the browser")},B3=t5;t5.ReadableState=e5;var U3,F3=function(e,t){return e.listeners(t).length},z3=VK.Buffer,V3=LH.Uint8Array||function(){};U3=rJ&&rJ.debuglog?rJ.debuglog("stream"):function(){};var H3,K3,q3,$3=x2,W3=w2.codes,G3=W3.ERR_INVALID_ARG_TYPE,J3=W3.ERR_STREAM_PUSH_AFTER_EOF,X3=W3.ERR_METHOD_NOT_IMPLEMENTED,Y3=W3.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t2(t5,n2);var Z3=m2,Q3=["error","close","destroy","pause","resume"];function e5(e,t,r){N3=N3||Z2,e=e||{},"boolean"!=typeof r&&(r=t instanceof N3),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=$3(this,e,"readableHighWaterMark",r),this.buffer=new l2,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(H3||(H3=y3.StringDecoder),this.decoder=new H3(e.encoding),this.encoding=e.encoding)}function t5(e){if(N3=N3||Z2,!(this instanceof t5))return new t5(e);var t=this instanceof N3;this._readableState=new e5(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),n2.call(this)}function r5(e,t,r,n,i){U3("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(U3("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?o5(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,s5(e)))}}(e,s);else if(i||(o=function(e,t){var r,n;return n=t,z3.isBuffer(n)||n instanceof V3||"string"==typeof t||void 0===t||e.objectMode||(r=new G3("chunk",["string","Buffer","Uint8Array"],t)),r}(s,t)),o)Z3(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===z3.prototype||(t=function(e){return z3.from(e)}(t)),n)s.endEmitted?Z3(e,new Y3):n5(e,s,t,!0);else if(s.ended)Z3(e,new J3);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?n5(e,s,t,!1):a5(e,s)):n5(e,s,t,!1)}else n||(s.reading=!1,a5(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function n5(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&o5(e)),a5(e,t)}function i5(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function o5(e){var t=e._readableState;U3("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(U3("emitReadable",t.flowing),t.emittedReadable=!0,eq(s5,e))}function s5(e){var t=e._readableState;U3("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,f5(e)}function a5(e,t){t.readingMore||(t.readingMore=!0,eq(u5,e,t))}function u5(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(U3("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function c5(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function l5(e){U3("readable nexttick read 0"),e.read(0)}function h5(e,t){U3("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),f5(e),t.flowing&&!t.reading&&e.read(0)}function f5(e){var t=e._readableState;for(U3("flow",t.flowing);t.flowing&&null!==e.read(););}function d5(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function p5(e){var t=e._readableState;U3("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,eq(g5,t,e))}function g5(e,t){if(U3("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function m5(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Object.defineProperty(t5.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),t5.prototype.destroy=p2,t5.prototype._undestroy=g2,t5.prototype._destroy=function(e,t){t(e)},t5.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=z3.from(e,t),t=""),r=!0),r5(this,e,t,!1,r)},t5.prototype.unshift=function(e){return r5(this,e,null,!0,!1)},t5.prototype.isPaused=function(){return!1===this._readableState.flowing},t5.prototype.setEncoding=function(e){H3||(H3=y3.StringDecoder);var t=new H3(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},t5.prototype.read=function(e){U3("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return U3("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?p5(this):o5(this),null;if(0===(e=i5(e,t))&&t.ended)return 0===t.length&&p5(this),null;var n,i=t.needReadable;return U3("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&U3("length less than watermark",i=!0),t.ended||t.reading?U3("reading or ended",i=!1):i&&(U3("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=i5(r,t))),null===(n=e>0?d5(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&p5(this)),null!==n&&this.emit("data",n),n},t5.prototype._read=function(e){Z3(this,new X3("_read()"))},t5.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,U3("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end||e===dq.stdout||e===dq.stderr?f:o;function o(){U3("onend"),e.end()}n.endEmitted?eq(i):r.once("end",i),e.on("unpipe",(function t(i,d){U3("onunpipe"),i===r&&d&&!1===d.hasUnpiped&&(d.hasUnpiped=!0,U3("cleanup"),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("drain",s),e.removeListener("error",c),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",f),r.removeListener("data",u),a=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s())}));var s=function(e){return function(){var t=e._readableState;U3("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&F3(e,"data")&&(t.flowing=!0,f5(e))}}(r);e.on("drain",s);var a=!1;function u(t){U3("ondata");var i=e.write(t);U3("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==m5(n.pipes,e))&&!a&&(U3("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(t){U3("onerror",t),f(),e.removeListener("error",c),0===F3(e,"error")&&Z3(e,t)}function l(){e.removeListener("finish",h),f()}function h(){U3("onfinish"),e.removeListener("close",l),f()}function f(){U3("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",c),e.once("close",l),e.once("finish",h),e.emit("pipe",r),n.flowing||(U3("pipe resume"),r.resume()),e},t5.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=m5(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},t5.prototype.on=function(e,t){var r=n2.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,U3("on readable",n.length,n.reading),n.length?o5(this):n.reading||eq(l5,this))),r},t5.prototype.addListener=t5.prototype.on,t5.prototype.removeListener=function(e,t){var r=n2.prototype.removeListener.call(this,e,t);return"readable"===e&&eq(c5,this),r},t5.prototype.removeAllListeners=function(e){var t=n2.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||eq(c5,this),t},t5.prototype.resume=function(){var e=this._readableState;return e.flowing||(U3("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,eq(h5,e,t))}(this,e)),e.paused=!1,this},t5.prototype.pause=function(){return U3("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U3("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},t5.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(U3("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){U3("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<Q3.length;o++)e.on(Q3[o],this.emit.bind(this,Q3[o]));return this._read=function(t){U3("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(t5.prototype[Symbol.asyncIterator]=function(){return void 0===K3&&(K3=j3),K3(this)}),Object.defineProperty(t5.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(t5.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(t5.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),t5._fromList=d5,Object.defineProperty(t5.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(t5.from=function(e,t){return void 0===q3&&(q3=D3),q3(t5,e,t)});var y5=E5,v5=w2.codes,b5=v5.ERR_METHOD_NOT_IMPLEMENTED,w5=v5.ERR_MULTIPLE_CALLBACK,_5=v5.ERR_TRANSFORM_ALREADY_TRANSFORMING,x5=v5.ERR_TRANSFORM_WITH_LENGTH_0;function S5(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new w5);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function E5(e){if(!(this instanceof E5))return new E5(e);Z2.call(this,e),this._transformState={afterTransform:S5.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",k5)}function k5(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?I5(this,null,null):this._flush((function(t,r){I5(e,t,r)}))}function I5(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new x5;if(e._transformState.transforming)throw new _5;return e.push(null)}t2(E5,Z2),E5.prototype.push=function(e,t){return this._transformState.needTransform=!1,Z2.prototype.push.call(this,e,t)},E5.prototype._transform=function(e,t,r){r(new b5("_transform()"))},E5.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},E5.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},E5.prototype._destroy=function(e,t){Z2.prototype._destroy.call(this,e,(function(e){t(e)}))};var A5,T5=P5;function P5(e){if(!(this instanceof P5))return new P5(e);y5.call(this,e)}t2(P5,y5),P5.prototype._transform=function(e,t,r){r(null,e)};var O5=w2.codes,C5=O5.ERR_MISSING_ARGS,M5=O5.ERR_STREAM_DESTROYED;function N5(e){if(e)throw e}function R5(e,t,r,n){n=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(n);var i=!1;e.on("close",(function(){i=!0})),void 0===A5&&(A5=_3),A5(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var o=!1;return function(t){if(!i&&!o)return o=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new M5("pipe"))}}function L5(e){e()}function j5(e,t){return e.pipe(t)}function D5(e){return e.length?"function"!=typeof e[e.length-1]?N5:e.pop():N5}var B5=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=D5(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new C5("streams");var o=t.map((function(e,r){var s=r<t.length-1;return R5(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(L5),s||(o.forEach(L5),i(n))}))}));return t.reduce(j5)},U5=DH((function(e,t){(t=e.exports=B3).Stream=t,t.Readable=t,t.Writable=k2,t.Duplex=Z2,t.Transform=y5,t.PassThrough=T5,t.finished=_3,t.pipeline=B5}));U5.Stream,U5.Readable,U5.Writable,U5.Duplex,U5.Transform,U5.PassThrough,U5.finished,U5.pipeline;var F5=r2.Buffer,z5=U5.Transform;function V5(e){z5.call(this),this._block=F5.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t2(V5,z5),V5.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},V5.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},V5.prototype.update=function(e,t){if(function(e,t){if(!F5.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");F5.isBuffer(e)||(e=F5.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var o=0,s=8*e.length;s>0;++o)this._length[o]+=s,(s=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*s);return this},V5.prototype._update=function(){throw new Error("_update is not implemented")},V5.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},V5.prototype._digest=function(){throw new Error("_digest is not implemented")};var H5=V5,K5=r2.Buffer,q5=new Array(16);function $5(){H5.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function W5(e,t){return e<<t|e>>>32-t}function G5(e,t,r,n,i,o,s){return W5(e+(t&r|~t&n)+i+o|0,s)+t|0}function J5(e,t,r,n,i,o,s){return W5(e+(t&n|r&~n)+i+o|0,s)+t|0}function X5(e,t,r,n,i,o,s){return W5(e+(t^r^n)+i+o|0,s)+t|0}function Y5(e,t,r,n,i,o,s){return W5(e+(r^(t|~n))+i+o|0,s)+t|0}t2($5,H5),$5.prototype._update=function(){for(var e=q5,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=G5(r,n,i,o,e[0],3614090360,7),o=G5(o,r,n,i,e[1],3905402710,12),i=G5(i,o,r,n,e[2],606105819,17),n=G5(n,i,o,r,e[3],3250441966,22),r=G5(r,n,i,o,e[4],4118548399,7),o=G5(o,r,n,i,e[5],1200080426,12),i=G5(i,o,r,n,e[6],2821735955,17),n=G5(n,i,o,r,e[7],4249261313,22),r=G5(r,n,i,o,e[8],1770035416,7),o=G5(o,r,n,i,e[9],2336552879,12),i=G5(i,o,r,n,e[10],4294925233,17),n=G5(n,i,o,r,e[11],2304563134,22),r=G5(r,n,i,o,e[12],1804603682,7),o=G5(o,r,n,i,e[13],4254626195,12),i=G5(i,o,r,n,e[14],2792965006,17),r=J5(r,n=G5(n,i,o,r,e[15],1236535329,22),i,o,e[1],4129170786,5),o=J5(o,r,n,i,e[6],3225465664,9),i=J5(i,o,r,n,e[11],643717713,14),n=J5(n,i,o,r,e[0],3921069994,20),r=J5(r,n,i,o,e[5],3593408605,5),o=J5(o,r,n,i,e[10],38016083,9),i=J5(i,o,r,n,e[15],3634488961,14),n=J5(n,i,o,r,e[4],3889429448,20),r=J5(r,n,i,o,e[9],568446438,5),o=J5(o,r,n,i,e[14],3275163606,9),i=J5(i,o,r,n,e[3],4107603335,14),n=J5(n,i,o,r,e[8],1163531501,20),r=J5(r,n,i,o,e[13],2850285829,5),o=J5(o,r,n,i,e[2],4243563512,9),i=J5(i,o,r,n,e[7],1735328473,14),r=X5(r,n=J5(n,i,o,r,e[12],2368359562,20),i,o,e[5],4294588738,4),o=X5(o,r,n,i,e[8],2272392833,11),i=X5(i,o,r,n,e[11],1839030562,16),n=X5(n,i,o,r,e[14],4259657740,23),r=X5(r,n,i,o,e[1],2763975236,4),o=X5(o,r,n,i,e[4],1272893353,11),i=X5(i,o,r,n,e[7],4139469664,16),n=X5(n,i,o,r,e[10],3200236656,23),r=X5(r,n,i,o,e[13],681279174,4),o=X5(o,r,n,i,e[0],3936430074,11),i=X5(i,o,r,n,e[3],3572445317,16),n=X5(n,i,o,r,e[6],76029189,23),r=X5(r,n,i,o,e[9],3654602809,4),o=X5(o,r,n,i,e[12],3873151461,11),i=X5(i,o,r,n,e[15],530742520,16),r=Y5(r,n=X5(n,i,o,r,e[2],3299628645,23),i,o,e[0],4096336452,6),o=Y5(o,r,n,i,e[7],1126891415,10),i=Y5(i,o,r,n,e[14],2878612391,15),n=Y5(n,i,o,r,e[5],4237533241,21),r=Y5(r,n,i,o,e[12],1700485571,6),o=Y5(o,r,n,i,e[3],2399980690,10),i=Y5(i,o,r,n,e[10],4293915773,15),n=Y5(n,i,o,r,e[1],2240044497,21),r=Y5(r,n,i,o,e[8],1873313359,6),o=Y5(o,r,n,i,e[15],4264355552,10),i=Y5(i,o,r,n,e[6],2734768916,15),n=Y5(n,i,o,r,e[13],1309151649,21),r=Y5(r,n,i,o,e[4],4149444226,6),o=Y5(o,r,n,i,e[11],3174756917,10),i=Y5(i,o,r,n,e[2],718787259,15),n=Y5(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},$5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=K5.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};var Z5=$5,Q5=VK.Buffer,e6=new Array(16),t6=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],r6=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],n6=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],i6=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],o6=[0,1518500249,1859775393,2400959708,2840853838],s6=[1352829926,1548603684,1836072691,2053994217,0];function a6(){H5.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function u6(e,t){return e<<t|e>>>32-t}function c6(e,t,r,n,i,o,s,a){return u6(e+(t^r^n)+o+s|0,a)+i|0}function l6(e,t,r,n,i,o,s,a){return u6(e+(t&r|~t&n)+o+s|0,a)+i|0}function h6(e,t,r,n,i,o,s,a){return u6(e+((t|~r)^n)+o+s|0,a)+i|0}function f6(e,t,r,n,i,o,s,a){return u6(e+(t&n|r&~n)+o+s|0,a)+i|0}function d6(e,t,r,n,i,o,s,a){return u6(e+(t^(r|~n))+o+s|0,a)+i|0}t2(a6,H5),a6.prototype._update=function(){for(var e=e6,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._a,u=0|this._b,c=0|this._c,l=0|this._d,h=0|this._e,f=0;f<80;f+=1){var d,p;f<16?(d=c6(r,n,i,o,s,e[t6[f]],o6[0],n6[f]),p=d6(a,u,c,l,h,e[r6[f]],s6[0],i6[f])):f<32?(d=l6(r,n,i,o,s,e[t6[f]],o6[1],n6[f]),p=f6(a,u,c,l,h,e[r6[f]],s6[1],i6[f])):f<48?(d=h6(r,n,i,o,s,e[t6[f]],o6[2],n6[f]),p=h6(a,u,c,l,h,e[r6[f]],s6[2],i6[f])):f<64?(d=f6(r,n,i,o,s,e[t6[f]],o6[3],n6[f]),p=l6(a,u,c,l,h,e[r6[f]],s6[3],i6[f])):(d=d6(r,n,i,o,s,e[t6[f]],o6[4],n6[f]),p=c6(a,u,c,l,h,e[r6[f]],s6[4],i6[f])),r=s,s=o,o=u6(i,10),i=n,n=d,a=h,h=l,l=u6(c,10),c=u,u=p}var g=this._b+i+l|0;this._b=this._c+o+h|0,this._c=this._d+s+a|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=g},a6.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=Q5.alloc?Q5.alloc(20):new Q5(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};var p6=a6,g6=r2.Buffer;function m6(e,t){this._block=g6.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}m6.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=g6.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,o=this._len,s=0;s<i;){for(var a=o%n,u=Math.min(i-s,n-a),c=0;c<u;c++)r[a+c]=e[s+c];s+=u,(o+=u)%n==0&&this._update(r)}return this._len+=i,this},m6.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},m6.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var y6=m6,v6=r2.Buffer,b6=[1518500249,1859775393,-1894007588,-899497514],w6=new Array(80);function _6(){this.init(),this._w=w6,y6.call(this,64,56)}function x6(e){return e<<30|e>>>2}function S6(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}t2(_6,y6),_6.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},_6.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l=~~(c/20),h=0|((t=n)<<5|t>>>27)+S6(l,i,o,s)+a+r[c]+b6[l];a=s,s=o,o=x6(i),i=n,n=h}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},_6.prototype._hash=function(){var e=v6.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var E6=_6,k6=r2.Buffer,I6=[1518500249,1859775393,-1894007588,-899497514],A6=new Array(80);function T6(){this.init(),this._w=A6,y6.call(this,64,56)}function P6(e){return e<<5|e>>>27}function O6(e){return e<<30|e>>>2}function C6(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}t2(T6,y6),T6.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},T6.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=(t=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|t>>>31;for(var c=0;c<80;++c){var l=~~(c/20),h=P6(n)+C6(l,i,o,s)+a+r[c]+I6[l]|0;a=s,s=o,o=O6(i),i=n,n=h}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},T6.prototype._hash=function(){var e=k6.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var M6=T6,N6=r2.Buffer,R6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],L6=new Array(64);function j6(){this.init(),this._w=L6,y6.call(this,64,56)}function D6(e,t,r){return r^e&(t^r)}function B6(e,t,r){return e&t|r&(e|t)}function U6(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function F6(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function z6(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function V6(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}t2(j6,y6),j6.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},j6.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._f,u=0|this._g,c=0|this._h,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<64;++l)t[l]=V6(t[l-2])+t[l-7]+z6(t[l-15])+t[l-16]|0;for(var h=0;h<64;++h){var f=c+F6(s)+D6(s,a,u)+R6[h]+t[h]|0,d=U6(r)+B6(r,n,i)|0;c=u,u=a,a=s,s=o+f|0,o=i,i=n,n=r,r=f+d|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=c+this._h|0},j6.prototype._hash=function(){var e=N6.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var H6=j6,K6=r2.Buffer,q6=new Array(64);function $6(){this.init(),this._w=q6,y6.call(this,64,56)}t2($6,H6),$6.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},$6.prototype._hash=function(){var e=K6.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var W6=$6,G6=r2.Buffer,J6=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],X6=new Array(160);function Y6(){this.init(),this._w=X6,y6.call(this,128,112)}function Z6(e,t,r){return r^e&(t^r)}function Q6(e,t,r){return e&t|r&(e|t)}function e4(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function t4(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function r4(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function n4(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function i4(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function o4(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function s4(e,t){return e>>>0<t>>>0?1:0}t2(Y6,y6),Y6.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Y6.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,a=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,h=0|this._bl,f=0|this._cl,d=0|this._dl,p=0|this._el,g=0|this._fl,m=0|this._gl,y=0|this._hl,v=0;v<32;v+=2)t[v]=e.readInt32BE(4*v),t[v+1]=e.readInt32BE(4*v+4);for(;v<160;v+=2){var b=t[v-30],w=t[v-30+1],_=r4(b,w),x=n4(w,b),S=i4(b=t[v-4],w=t[v-4+1]),E=o4(w,b),k=t[v-14],I=t[v-14+1],A=t[v-32],T=t[v-32+1],P=x+I|0,O=_+k+s4(P,x)|0;O=(O=O+S+s4(P=P+E|0,E)|0)+A+s4(P=P+T|0,T)|0,t[v]=O,t[v+1]=P}for(var C=0;C<160;C+=2){O=t[C],P=t[C+1];var M=Q6(r,n,i),N=Q6(l,h,f),R=e4(r,l),L=e4(l,r),j=t4(s,p),D=t4(p,s),B=J6[C],U=J6[C+1],F=Z6(s,a,u),z=Z6(p,g,m),V=y+D|0,H=c+j+s4(V,y)|0;H=(H=(H=H+F+s4(V=V+z|0,z)|0)+B+s4(V=V+U|0,U)|0)+O+s4(V=V+P|0,P)|0;var K=L+N|0,q=R+M+s4(K,L)|0;c=u,y=m,u=a,m=g,a=s,g=p,s=o+H+s4(p=d+V|0,d)|0,o=i,d=f,i=n,f=h,n=r,h=l,r=H+q+s4(l=V+K|0,V)|0}this._al=this._al+l|0,this._bl=this._bl+h|0,this._cl=this._cl+f|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+g|0,this._gl=this._gl+m|0,this._hl=this._hl+y|0,this._ah=this._ah+r+s4(this._al,l)|0,this._bh=this._bh+n+s4(this._bl,h)|0,this._ch=this._ch+i+s4(this._cl,f)|0,this._dh=this._dh+o+s4(this._dl,d)|0,this._eh=this._eh+s+s4(this._el,p)|0,this._fh=this._fh+a+s4(this._fl,g)|0,this._gh=this._gh+u+s4(this._gl,m)|0,this._hh=this._hh+c+s4(this._hl,y)|0},Y6.prototype._hash=function(){var e=G6.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var a4=Y6,u4=r2.Buffer,c4=new Array(160);function l4(){this.init(),this._w=c4,y6.call(this,128,112)}t2(l4,a4),l4.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l4.prototype._hash=function(){var e=u4.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var h4=l4,f4=DH((function(e){var t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};t.sha=E6,t.sha1=M6,t.sha224=W6,t.sha256=H6,t.sha384=h4,t.sha512=a4})),d4=r2.Buffer,p4=CW.Transform,g4=G$.StringDecoder;function m4(e){p4.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t2(m4,p4),m4.prototype.update=function(e,t,r){"string"==typeof e&&(e=d4.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},m4.prototype.setAutoPadding=function(){},m4.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},m4.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},m4.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},m4.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},m4.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},m4.prototype._finalOrDigest=function(e){var t=this.__final()||d4.alloc(0);return e&&(t=this._toString(t,e,!0)),t},m4.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new g4(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var y4=m4;function v4(e){y4.call(this,"digest"),this._hash=e}t2(v4,y4),v4.prototype._update=function(e){this._hash.update(e)},v4.prototype._final=function(){return this._hash.digest()};var b4=function(e){return"md5"===(e=e.toLowerCase())?new Z5:"rmd160"===e||"ripemd160"===e?new p6:new v4(f4(e))},w4=r2.Buffer,_4=w4.alloc(128);function x4(e,t){y4.call(this,"digest"),"string"==typeof t&&(t=w4.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=w4.concat([t,_4],64));for(var r=this._ipad=w4.allocUnsafe(64),n=this._opad=w4.allocUnsafe(64),i=0;i<64;i++)r[i]=54^t[i],n[i]=92^t[i];this._hash=[r]}t2(x4,y4),x4.prototype._update=function(e){this._hash.push(e)},x4.prototype._final=function(){var e=this._alg(w4.concat(this._hash));return this._alg(w4.concat([this._opad,e]))};var S4=x4,E4=function(e){return(new Z5).update(e).digest()},k4=r2.Buffer,I4=k4.alloc(128);function A4(e,t){y4.call(this,"digest"),"string"==typeof t&&(t=k4.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new p6:f4(e)).update(t).digest():t.length<r&&(t=k4.concat([t,I4],r));for(var n=this._ipad=k4.allocUnsafe(r),i=this._opad=k4.allocUnsafe(r),o=0;o<r;o++)n[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new p6:f4(e),this._hash.update(n)}t2(A4,y4),A4.prototype._update=function(e){this._hash.update(e)},A4.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new p6:f4(this._alg)).update(this._opad).update(e).digest()};var T4=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new A4("rmd160",t):"md5"===e?new S4(E4,t):new A4(e,t)},P4=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash160=function(e){const t=b4("sha256").update(e).digest();try{return b4("rmd160").update(t).digest()}catch(e){return b4("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return T4("sha512",e).update(t).digest()}}));jH(P4),P4.hash160,P4.hmacSHA512;var O4=r2.Buffer,C4=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return O4.alloc(0);var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*u+1>>>0,c=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=s*c[f]>>>0,c[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,r++}if(" "!==e[r]){for(var d=o-i;d!==o&&0===c[d];)d++;var p=O4.allocUnsafe(n+(o-d));p.fill(0,0,n);for(var g=n;d!==o;)p[g++]=c[d++];return p}}}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=O4.from(t)),!O4.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var h=t[i],f=0,d=u-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),M4=r2.Buffer,N4=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return C4.encode(M4.concat([t,r],t.length+4))},decode:function(e){var r=t(C4.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=C4.decodeUnsafe(e);if(r)return t(r)}}}((function(e){var t=b4("sha256").update(e).digest();return b4("sha256").update(t).digest()})),R4=DH((function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:rJ.Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!=(o=a>>>24-i&16777215)||s!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var f=l[e],d=h[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(e);n=(p=p.idivn(d)).isZero()?g+n:c[f-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==o),this.toArrayLike(o,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===t,c=new e(o),l=this.clone();if(u){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),c[o-a-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var n,i,o,s=e.words,a=t.words,u=r.words,c=0,l=0|s[0],h=8191&l,f=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,v=m>>>13,b=0|s[3],w=8191&b,_=b>>>13,x=0|s[4],S=8191&x,E=x>>>13,k=0|s[5],I=8191&k,A=k>>>13,T=0|s[6],P=8191&T,O=T>>>13,C=0|s[7],M=8191&C,N=C>>>13,R=0|s[8],L=8191&R,j=R>>>13,D=0|s[9],B=8191&D,U=D>>>13,F=0|a[0],z=8191&F,V=F>>>13,H=0|a[1],K=8191&H,q=H>>>13,$=0|a[2],W=8191&$,G=$>>>13,J=0|a[3],X=8191&J,Y=J>>>13,Z=0|a[4],Q=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ue=8191&ae,ce=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(c+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,V))+Math.imul(f,z)|0))<<13)|0;c=((o=Math.imul(f,V))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,V))+Math.imul(g,z)|0,o=Math.imul(g,V);var ye=(c+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,q)|0)+Math.imul(f,K)|0))<<13)|0;c=((o=o+Math.imul(f,q)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,V))+Math.imul(v,z)|0,o=Math.imul(v,V),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(g,K)|0,o=o+Math.imul(g,q)|0;var ve=(c+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,G)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,V))+Math.imul(_,z)|0,o=Math.imul(_,V),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,q)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,q)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,G)|0;var be=(c+(n=n+Math.imul(h,X)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,X)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,V))+Math.imul(E,z)|0,o=Math.imul(E,V),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,q)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,G)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,Y)|0;var we=(c+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,V))+Math.imul(A,z)|0,o=Math.imul(A,V),n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(E,K)|0,o=o+Math.imul(E,q)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,G)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0;var _e=(c+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(f,re)|0))<<13)|0;c=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,V))+Math.imul(O,z)|0,o=Math.imul(O,V),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,K)|0,o=o+Math.imul(A,q)|0,n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(w,X)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var xe=(c+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,z),i=(i=Math.imul(M,V))+Math.imul(N,z)|0,o=Math.imul(N,V),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(O,K)|0,o=o+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,G)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Se=(c+(n=n+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,V))+Math.imul(j,z)|0,o=Math.imul(j,V),n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(N,K)|0,o=o+Math.imul(N,q)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,G)|0)+Math.imul(O,W)|0,o=o+Math.imul(O,G)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(g,ue)|0,o=o+Math.imul(g,ce)|0;var Ee=(c+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,z),i=(i=Math.imul(B,V))+Math.imul(U,z)|0,o=Math.imul(U,V),n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(j,K)|0,o=o+Math.imul(j,q)|0,n=n+Math.imul(M,W)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(P,X)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,o=o+Math.imul(A,ee)|0,n=n+Math.imul(S,re)|0,i=(i=i+Math.imul(S,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,he)|0,o=o+Math.imul(g,fe)|0;var ke=(c+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,K),i=(i=Math.imul(B,q))+Math.imul(U,K)|0,o=Math.imul(U,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(j,W)|0,o=o+Math.imul(j,G)|0,n=n+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,o=o+Math.imul(A,ne)|0,n=n+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,fe)|0;var Ie=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;c=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,W),i=(i=Math.imul(B,G))+Math.imul(U,W)|0,o=Math.imul(U,G),n=n+Math.imul(L,X)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(j,X)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(O,re)|0,o=o+Math.imul(O,ne)|0,n=n+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,se)|0,n=n+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ae=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,X),i=(i=Math.imul(B,Y))+Math.imul(U,X)|0,o=Math.imul(U,Y),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(N,re)|0,o=o+Math.imul(N,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,se)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,n=n+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Te=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Q),i=(i=Math.imul(B,ee))+Math.imul(U,Q)|0,o=Math.imul(U,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(j,re)|0,o=o+Math.imul(j,ne)|0,n=n+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,se)|0)+Math.imul(N,oe)|0,o=o+Math.imul(N,se)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Pe=(c+(n=n+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,ge)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,re),i=(i=Math.imul(B,ne))+Math.imul(U,re)|0,o=Math.imul(U,ne),n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,n=n+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(N,ue)|0,o=o+Math.imul(N,ce)|0,n=n+Math.imul(P,he)|0,i=(i=i+Math.imul(P,fe)|0)+Math.imul(O,he)|0,o=o+Math.imul(O,fe)|0;var Oe=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,oe),i=(i=Math.imul(B,se))+Math.imul(U,oe)|0,o=Math.imul(U,se),n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(j,ue)|0,o=o+Math.imul(j,ce)|0,n=n+Math.imul(M,he)|0,i=(i=i+Math.imul(M,fe)|0)+Math.imul(N,he)|0,o=o+Math.imul(N,fe)|0;var Ce=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(U,ue)|0,o=Math.imul(U,ce),n=n+Math.imul(L,he)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,fe)|0;var Me=(c+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ge)|0)+Math.imul(N,pe)|0))<<13)|0;c=((o=o+Math.imul(N,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(U,he)|0,o=Math.imul(U,fe);var Ne=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ge)|0)+Math.imul(j,pe)|0))<<13)|0;c=((o=o+Math.imul(j,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Re=(c+(n=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,ge))+Math.imul(U,pe)|0))<<13)|0;return c=((o=Math.imul(U,ge))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u[0]=me,u[1]=ye,u[2]=ve,u[3]=be,u[4]=we,u[5]=_e,u[6]=xe,u[7]=Se,u[8]=Ee,u[9]=ke,u[10]=Ie,u[11]=Ae,u[12]=Te,u[13]=Pe,u[14]=Oe,u[15]=Ce,u[16]=Me,u[17]=Ne,u[18]=Re,0!==c&&(u[19]=c,r.length++),r};function p(e,t,r){return(new g).mulp(e,t,r)}function g(e,t){this.x=e,this.y=t}Math.imul||(d=f),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?f(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):p(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},g.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},g.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},g.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=u,f=c,d=0;d<s;d++){var p=r[l+d],g=n[l+d],m=r[l+d+s],y=n[l+d+s],v=h*m-f*y;y=h*y+f*m,m=v,r[l+d]=p+m,n[l+d]=g+y,r[l+d+s]=p-m,n[l+d+s]=g-y,d!==a&&(v=u*h-c*f,f=u*f+c*h,h=v)}},g.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},g.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},g.prototype.convert13b=function(e,t,n,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},g.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,o,a,u,n,i),this.transform(c,o,l,h,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-u[d]*h[d];u[d]=a[d]*h[d]+u[d]*l[d],a[d]=p}return this.conjugate(a,u,n),this.transform(a,u,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),p(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,u=(0|this.words[t])-a<<n;this.words[t]=u|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&a}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o,s=e.length+n;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+a;var u=(0|e.words[i])*t;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),o=e,s=0|o.words[o.length-1];0!=(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==t){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var l=n.clone()._ishlnsubmul(o,1,u);0===l.negative&&(n=l,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|n.words[o.length+h])+(0|n.words[o.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(o,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(o,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(o=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:o,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,s,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(l),u.isub(h)),a.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a),s.isub(u)):(n.isub(t),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(o=0===t.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var m={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},n(v,y),v.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,y),n(w,y),n(_,y),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(m[e])return m[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new b;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return m[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(h,new i(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],s=0,a=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var h=c>>l&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(4==++a||0===n&&0===l)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},n(S,x),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,LH)})),L4="lib/elliptic.js",j4=["lib"],D4={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},B4={type:"git",url:"git@github.com:indutny/elliptic"},U4=["EC","Elliptic","curve","Cryptography"],F4="Fedor Indutny <fedor@indutny.com>",z4={url:"https://github.com/indutny/elliptic/issues"},V4="https://github.com/indutny/elliptic",H4={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},K4={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},q4={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:L4,files:j4,scripts:D4,repository:B4,keywords:U4,author:F4,license:"MIT",bugs:z4,homepage:V4,devDependencies:H4,dependencies:K4},$4=Object.freeze({__proto__:null,name:"elliptic",version:"6.5.4",description:"EC cryptography",main:L4,files:j4,scripts:D4,repository:B4,keywords:U4,author:F4,license:"MIT",bugs:z4,homepage:V4,devDependencies:H4,dependencies:K4,default:q4}),W4=G4;function G4(e,t){if(!e)throw new Error(t||"Assertion failed")}G4.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var J4,X4=DH((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),Y4=DH((function(e,t){var r=t;r.assert=W4,r.toArray=X4.toArray,r.zero2=X4.zero2,r.toHex=X4.toHex,r.encode=X4.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=0==(1&u)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(s),a=0==(1&c)?0:3!=(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new R4(e,"hex","le")}})),Z4=function(e){return J4||(J4=new Q4(null)),J4.generate(e)};function Q4(e){this.rand=e}var e8=Q4;if(Q4.prototype.generate=function(e){return this._rand(e)},Q4.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Q4.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Q4.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(Q4.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t8=rJ;if("function"!=typeof t8.randomBytes)throw new Error("Not supported");Q4.prototype._rand=function(e){return t8.randomBytes(e)}}catch(aH){}Z4.Rand=e8;var r8=Y4.getNAF,n8=Y4.getJSF,i8=Y4.assert;function o8(e,t){this.type=e,this.p=new R4(t.p,16),this.red=t.prime?R4.red(t.prime):R4.mont(this.p),this.zero=new R4(0).toRed(this.red),this.one=new R4(1).toRed(this.red),this.two=new R4(2).toRed(this.red),this.n=t.n&&new R4(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var s8=o8;function a8(e,t){this.curve=e,this.type=t,this.precomputed=null}o8.prototype.point=function(){throw new Error("Not implemented")},o8.prototype.validate=function(){throw new Error("Not implemented")},o8.prototype._fixedNafMul=function(e,t){i8(e.precomputed);var r=e._getDoubles(),n=r8(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l)}return c.toP()},o8.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=r8(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];i8(0!==c),s="affine"===e.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===e.type?s.toP():s},o8.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);u[o]=f.wnd,c[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=n8(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var v=0|y[0][s],b=0|y[1][s];l[d][s]=m[3*(v+1)+(b+1)],l[p][s]=0,c[d]=g}}else l[d]=r8(r[d],u[d],this._bitLength),l[p]=r8(r[p],u[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(o=h;o>=0;o--){for(var x=0;o>=0;){var S=!0;for(s=0;s<n;s++)_[s]=0|l[s][o],0!==_[s]&&(S=!1);if(!S)break;x++,o--}if(o>=0&&x++,w=w.dblp(x),o<0)break;for(s=0;s<n;s++){var E=_[s];0!==E&&(E>0?a=c[s][E-1>>1]:E<0&&(a=c[s][-E-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},o8.BasePoint=a8,a8.prototype.eq=function(){throw new Error("Not implemented")},a8.prototype.validate=function(){return this.curve.validate(this)},o8.prototype.decodePoint=function(e,t){e=Y4.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?i8(e[e.length-1]%2==0):7===e[0]&&i8(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},a8.prototype.encodeCompressed=function(e){return this.encode(e,!0)},a8.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},a8.prototype.encode=function(e,t){return Y4.encode(this._encode(t),e)},a8.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},a8.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},a8.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},a8.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},a8.prototype._getBeta=function(){return null},a8.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var u8=Y4.assert;function c8(e){s8.call(this,"short",e),this.a=new R4(e.a,16).toRed(this.red),this.b=new R4(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t2(c8,s8);var l8=c8;function h8(e,t,r,n){s8.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new R4(t,16),this.y=new R4(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f8(e,t,r,n){s8.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new R4(0)):(this.x=new R4(t,16),this.y=new R4(r,16),this.z=new R4(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}function d8(e){s8.call(this,"mont",e),this.a=new R4(e.a,16).toRed(this.red),this.b=new R4(e.b,16).toRed(this.red),this.i4=new R4(4).toRed(this.red).redInvm(),this.two=new R4(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}c8.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new R4(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new R4(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],u8(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new R4(e.a,16),b:new R4(e.b,16)}})):this._getEndoBasis(r)}}},c8.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:R4.mont(e),r=new R4(2).toRed(t).redInvm(),n=r.redNeg(),i=new R4(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},c8.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new R4(1),p=new R4(0),g=new R4(0),m=new R4(1),y=0;0!==h.cmpn(0);){var v=f.div(h);u=f.sub(v.mul(h)),c=g.sub(v.mul(d));var b=m.sub(v.mul(p));if(!n&&u.cmp(l)<0)t=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++y)break;a=u,f=h,h=u,g=d,d=c,m=p,p=b}o=u.neg(),s=c;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},c8.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:u.add(c).neg()}},c8.prototype.pointFromX=function(e,t){(e=new R4(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},c8.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c8.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},t2(h8,s8.BasePoint),c8.prototype.point=function(e,t,r){return new h8(this,e,t,r)},c8.prototype.pointFromJSON=function(e,t){return h8.fromJSON(this,e,t)},h8.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},h8.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h8.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},h8.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h8.prototype.isInfinity=function(){return this.inf},h8.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},h8.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},h8.prototype.getX=function(){return this.x.fromRed()},h8.prototype.getY=function(){return this.y.fromRed()},h8.prototype.mul=function(e){return e=new R4(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},h8.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},h8.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},h8.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},h8.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},h8.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},t2(f8,s8.BasePoint),c8.prototype.jpoint=function(e,t,r){return new f8(this,e,t,r)},f8.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},f8.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f8.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=n.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},f8.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},f8.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var v=c.redMul(a);t+1<e&&(u=u.redMul(f)),o=g,a=v,c=y}return this.curve.jpoint(o,c.redMul(i),a)},f8.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f8.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},f8.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},f8.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},f8.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},f8.prototype.mul=function(e,t){return e=new R4(e,t),this.curve._wnafMul(this,e)},f8.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},f8.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},f8.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f8.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},t2(d8,s8);var p8=d8;function g8(e,t,r){s8.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new R4(t,16),this.z=new R4(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}d8.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},t2(g8,s8.BasePoint),d8.prototype.decodePoint=function(e,t){return this.point(Y4.toArray(e,t),1)},d8.prototype.point=function(e,t){return new g8(this,e,t)},d8.prototype.pointFromJSON=function(e){return g8.fromJSON(this,e)},g8.prototype.precompute=function(){},g8.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},g8.fromJSON=function(e,t){return new g8(e,t[0],t[1]||e.one)},g8.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},g8.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},g8.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},g8.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},g8.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),u=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,u)},g8.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},g8.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},g8.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},g8.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},g8.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},g8.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var m8=Y4.assert;function y8(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s8.call(this,"edwards",e),this.a=new R4(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new R4(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new R4(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),m8(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}t2(y8,s8);var v8=y8;function b8(e,t,r,n,i){s8.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new R4(t,16),this.y=new R4(r,16),this.z=n?new R4(n,16):this.curve.one,this.t=i&&new R4(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}y8.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},y8.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},y8.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},y8.prototype.pointFromX=function(e,t){(e=new R4(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)},y8.prototype.pointFromY=function(e,t){(e=new R4(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},y8.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},t2(b8,s8.BasePoint),y8.prototype.pointFromJSON=function(e){return b8.fromJSON(this,e)},y8.prototype.point=function(e,t,r,n){return new b8(this,e,t,r,n)},b8.fromJSON=function(e,t){return new b8(e,t[0],t[1],t[2])},b8.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},b8.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},b8.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),u=i.redMul(s),c=o.redMul(a),l=i.redMul(a),h=s.redMul(o);return this.curve.point(u,c,h,l)},b8.prototype._projDbl=function(){var e,t,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(a)).redAdd(u);this.zOne?(e=s.redSub(a).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),e=s.redSub(a).redISub(u).redMul(o),t=c.redMul(n.redSub(u)),r=c.redMul(o))}else n=a.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(n)).redMul(o),t=this.curve._mulC(n).redMul(a.redISub(u)),r=n.redMul(o);return this.curve.point(e,t,r)},b8.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},b8.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),u=r.redAdd(t),c=o.redMul(s),l=a.redMul(u),h=o.redMul(u),f=s.redMul(a);return this.curve.point(c,l,f,h)},b8.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),u=i.redSub(a),c=i.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),h=n.redMul(u).redMul(l);return this.curve.twisted?(t=n.redMul(c).redMul(s.redSub(this.curve._mulA(o))),r=u.redMul(c)):(t=n.redMul(c).redMul(s.redSub(o)),r=this.curve._mulC(u).redMul(c)),this.curve.point(h,t,r)},b8.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},b8.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},b8.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},b8.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},b8.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},b8.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},b8.prototype.getX=function(){return this.normalize(),this.x.fromRed()},b8.prototype.getY=function(){return this.normalize(),this.y.fromRed()},b8.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},b8.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},b8.prototype.toP=b8.prototype.normalize,b8.prototype.mixedAdd=b8.prototype.add;var w8=DH((function(e,t){var r=t;r.base=s8,r.short=l8,r.mont=p8,r.edwards=v8}));function _8(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function x8(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function S8(e){return 1===e.length?"0"+e:e}function E8(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var k8={inherits:t2,toArray:function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):_8(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},toHex:function(e){for(var t="",r=0;r<e.length;r++)t+=S8(e[r].toString(16));return t},htonl:x8,toHex32:function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=x8(i)),r+=E8(i.toString(16))}return r},zero2:S8,zero8:E8,join32:function(e,t,r,n){var i=r-t;W4(i%4==0);for(var o=new Array(i/4),s=0,a=t;s<o.length;s++,a+=4){var u;u="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=u>>>0}return o},split32:function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},rotr32:function(e,t){return e>>>t|e<<32-t},rotl32:function(e,t){return e<<t|e>>>32-t},sum32:function(e,t){return e+t>>>0},sum32_3:function(e,t,r){return e+t+r>>>0},sum32_4:function(e,t,r,n){return e+t+r+n>>>0},sum32_5:function(e,t,r,n,i){return e+t+r+n+i>>>0},sum64:function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},sum64_hi:function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},sum64_lo:function(e,t,r,n){return t+n>>>0},sum64_4_hi:function(e,t,r,n,i,o,s,a){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},sum64_4_lo:function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},sum64_5_hi:function(e,t,r,n,i,o,s,a,u,c){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+a>>>0)<a?1:0,e+r+i+s+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},sum64_5_lo:function(e,t,r,n,i,o,s,a,u,c){return t+n+o+a+c>>>0},rotr64_hi:function(e,t,r){return(t<<32-r|e>>>r)>>>0},rotr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0},shr64_hi:function(e,t,r){return e>>>r},shr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0}};function I8(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var A8=I8;I8.prototype.update=function(e,t){if(e=k8.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=k8.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},I8.prototype.digest=function(e){return this.update(this._pad()),W4(null===this.pending),this._digest(e)},I8.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var T8={BlockHash:A8},P8=k8.rotr32;function O8(e,t,r){return e&t^~e&r}function C8(e,t,r){return e&t^e&r^t&r}function M8(e,t,r){return e^t^r}var N8=function(e,t,r,n){return 0===e?O8(t,r,n):1===e||3===e?M8(t,r,n):2===e?C8(t,r,n):void 0},R8=O8,L8=C8,j8=function(e){return P8(e,2)^P8(e,13)^P8(e,22)},D8=function(e){return P8(e,6)^P8(e,11)^P8(e,25)},B8=function(e){return P8(e,7)^P8(e,18)^e>>>3},U8=function(e){return P8(e,17)^P8(e,19)^e>>>10},F8=k8.rotl32,z8=k8.sum32,V8=k8.sum32_5,H8=N8,K8=T8.BlockHash,q8=[1518500249,1859775393,2400959708,3395469782];function $8(){if(!(this instanceof $8))return new $8;K8.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}k8.inherits($8,K8);var W8=$8;$8.blockSize=512,$8.outSize=160,$8.hmacStrength=80,$8.padLength=64,$8.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=F8(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),l=V8(F8(i,5),H8(c,o,s,a),u,r[n],q8[c]);u=a,a=s,s=F8(o,30),o=i,i=l}this.h[0]=z8(this.h[0],i),this.h[1]=z8(this.h[1],o),this.h[2]=z8(this.h[2],s),this.h[3]=z8(this.h[3],a),this.h[4]=z8(this.h[4],u)},$8.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h,"big"):k8.split32(this.h,"big")};var G8=k8.sum32,J8=k8.sum32_4,X8=k8.sum32_5,Y8=R8,Z8=L8,Q8=j8,e9=D8,t9=B8,r9=U8,n9=T8.BlockHash,i9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function o9(){if(!(this instanceof o9))return new o9;n9.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=i9,this.W=new Array(64)}k8.inherits(o9,n9);var s9=o9;function a9(){if(!(this instanceof a9))return new a9;s9.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o9.blockSize=512,o9.outSize=256,o9.hmacStrength=192,o9.padLength=64,o9.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=J8(r9(r[n-2]),r[n-7],t9(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],h=this.h[7];for(W4(this.k.length===r.length),n=0;n<r.length;n++){var f=X8(h,e9(u),Y8(u,c,l),this.k[n],r[n]),d=G8(Q8(i),Z8(i,o,s));h=l,l=c,c=u,u=G8(a,f),a=s,s=o,o=i,i=G8(f,d)}this.h[0]=G8(this.h[0],i),this.h[1]=G8(this.h[1],o),this.h[2]=G8(this.h[2],s),this.h[3]=G8(this.h[3],a),this.h[4]=G8(this.h[4],u),this.h[5]=G8(this.h[5],c),this.h[6]=G8(this.h[6],l),this.h[7]=G8(this.h[7],h)},o9.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h,"big"):k8.split32(this.h,"big")},k8.inherits(a9,s9);var u9=a9;a9.blockSize=512,a9.outSize=224,a9.hmacStrength=192,a9.padLength=64,a9.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h.slice(0,7),"big"):k8.split32(this.h.slice(0,7),"big")};var c9=k8.rotr64_hi,l9=k8.rotr64_lo,h9=k8.shr64_hi,f9=k8.shr64_lo,d9=k8.sum64,p9=k8.sum64_hi,g9=k8.sum64_lo,m9=k8.sum64_4_hi,y9=k8.sum64_4_lo,v9=k8.sum64_5_hi,b9=k8.sum64_5_lo,w9=T8.BlockHash,_9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function x9(){if(!(this instanceof x9))return new x9;w9.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_9,this.W=new Array(160)}k8.inherits(x9,w9);var S9=x9;function E9(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function k9(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function I9(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function A9(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function T9(e,t){var r=c9(e,t,28)^c9(t,e,2)^c9(t,e,7);return r<0&&(r+=4294967296),r}function P9(e,t){var r=l9(e,t,28)^l9(t,e,2)^l9(t,e,7);return r<0&&(r+=4294967296),r}function O9(e,t){var r=c9(e,t,14)^c9(e,t,18)^c9(t,e,9);return r<0&&(r+=4294967296),r}function C9(e,t){var r=l9(e,t,14)^l9(e,t,18)^l9(t,e,9);return r<0&&(r+=4294967296),r}function M9(e,t){var r=c9(e,t,1)^c9(e,t,8)^h9(e,t,7);return r<0&&(r+=4294967296),r}function N9(e,t){var r=l9(e,t,1)^l9(e,t,8)^f9(e,t,7);return r<0&&(r+=4294967296),r}function R9(e,t){var r=c9(e,t,19)^c9(t,e,29)^h9(e,t,6);return r<0&&(r+=4294967296),r}function L9(e,t){var r=l9(e,t,19)^l9(t,e,29)^f9(e,t,6);return r<0&&(r+=4294967296),r}function j9(){if(!(this instanceof j9))return new j9;S9.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}x9.blockSize=1024,x9.outSize=512,x9.hmacStrength=192,x9.padLength=128,x9.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=R9(r[n-4],r[n-3]),o=L9(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=M9(r[n-30],r[n-29]),c=N9(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=m9(i,o,s,a,u,c,l,h),r[n+1]=y9(i,o,s,a,u,c,l,h)}},x9.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],h=this.h[8],f=this.h[9],d=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],y=this.h[14],v=this.h[15];W4(this.k.length===r.length);for(var b=0;b<r.length;b+=2){var w=y,_=v,x=O9(h,f),S=C9(h,f),E=E9(h,0,d,0,g),k=k9(0,f,0,p,0,m),I=this.k[b],A=this.k[b+1],T=r[b],P=r[b+1],O=v9(w,_,x,S,E,k,I,A,T,P),C=b9(w,_,x,S,E,k,I,A,T,P);w=T9(n,i),_=P9(n,i),x=I9(n,0,o,0,a),S=A9(0,i,0,s,0,u);var M=p9(w,_,x,S),N=g9(w,_,x,S);y=g,v=m,g=d,m=p,d=h,p=f,h=p9(c,l,O,C),f=g9(l,l,O,C),c=a,l=u,a=o,u=s,o=n,s=i,n=p9(O,C,M,N),i=g9(O,C,M,N)}d9(this.h,0,n,i),d9(this.h,2,o,s),d9(this.h,4,a,u),d9(this.h,6,c,l),d9(this.h,8,h,f),d9(this.h,10,d,p),d9(this.h,12,g,m),d9(this.h,14,y,v)},x9.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h,"big"):k8.split32(this.h,"big")},k8.inherits(j9,S9);var D9=j9;j9.blockSize=1024,j9.outSize=384,j9.hmacStrength=192,j9.padLength=128,j9.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h.slice(0,12),"big"):k8.split32(this.h.slice(0,12),"big")};var B9={sha1:W8,sha224:u9,sha256:s9,sha384:D9,sha512:S9},U9=k8.rotl32,F9=k8.sum32,z9=k8.sum32_3,V9=k8.sum32_4,H9=T8.BlockHash;function K9(){if(!(this instanceof K9))return new K9;H9.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}k8.inherits(K9,H9);var q9=K9;function $9(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function W9(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function G9(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}K9.blockSize=512,K9.outSize=160,K9.hmacStrength=192,K9.padLength=64,K9.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,u=n,c=i,l=o,h=s,f=0;f<80;f++){var d=F9(U9(V9(r,$9(f,n,i,o),e[J9[f]+t],W9(f)),Y9[f]),s);r=s,s=o,o=U9(i,10),i=n,n=d,d=F9(U9(V9(a,$9(79-f,u,c,l),e[X9[f]+t],G9(f)),Z9[f]),h),a=h,h=l,l=U9(c,10),c=u,u=d}d=z9(this.h[1],i,l),this.h[1]=z9(this.h[2],o,h),this.h[2]=z9(this.h[3],s,a),this.h[3]=z9(this.h[4],r,u),this.h[4]=z9(this.h[0],n,c),this.h[0]=d},K9.prototype._digest=function(e){return"hex"===e?k8.toHex32(this.h,"little"):k8.split32(this.h,"little")};var J9=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],X9=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Y9=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Z9=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Q9={ripemd160:q9};function e7(e,t,r){if(!(this instanceof e7))return new e7(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(k8.toArray(t,r))}var t7=e7;e7.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),W4(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},e7.prototype.update=function(e,t){return this.inner.update(e,t),this},e7.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var r7=DH((function(e,t){var r=t;r.utils=k8,r.common=T8,r.sha=B9,r.ripemd=Q9,r.hmac=t7,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160})),n7={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},i7=DH((function(e,t){var r,n=t,i=Y4.assert;function o(e){"short"===e.type?this.curve=new w8.short(e):"edwards"===e.type?this.curve=new w8.edwards(e):this.curve=new w8.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r7.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r7.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r7.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r7.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r7.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r7.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r7.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n7}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r7.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function o7(e){if(!(this instanceof o7))return new o7(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=X4.toArray(e.entropy,e.entropyEnc||"hex"),r=X4.toArray(e.nonce,e.nonceEnc||"hex"),n=X4.toArray(e.pers,e.persEnc||"hex");W4(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var s7=o7;o7.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},o7.prototype._hmac=function(){return new r7.hmac(this.hash,this.K)},o7.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o7.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=X4.toArray(e,t),r=X4.toArray(r,n),W4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o7.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=X4.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,X4.encode(o,t)};var a7=Y4.assert;function u7(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var c7=u7;u7.fromPublic=function(e,t,r){return t instanceof u7?t:new u7(e,{pub:t,pubEnc:r})},u7.fromPrivate=function(e,t,r){return t instanceof u7?t:new u7(e,{priv:t,privEnc:r})},u7.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},u7.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},u7.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},u7.prototype._importPrivate=function(e,t){this.priv=new R4(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},u7.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?a7(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a7(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},u7.prototype.derive=function(e){return e.validate()||a7(e.validate(),"public point not validated"),e.mul(this.priv).getX()},u7.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},u7.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},u7.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var l7=Y4.assert;function h7(e,t){if(e instanceof h7)return e;this._importDER(e,t)||(l7(e.r&&e.s,"Signature without r or s"),this.r=new R4(e.r,16),this.s=new R4(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var f7=h7;function d7(){this.place=0}function p7(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function g7(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function m7(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}h7.prototype._importDER=function(e,t){e=Y4.toArray(e,t);var r=new d7;if(48!==e[r.place++])return!1;var n=p7(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=p7(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=p7(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new R4(o),this.s=new R4(a),this.recoveryParam=null,!0},h7.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=g7(t),r=g7(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];m7(n,t.length),(n=n.concat(t)).push(2),m7(n,r.length);var i=n.concat(r),o=[48];return m7(o,i.length),o=o.concat(i),Y4.encode(o,e)};var y7=Y4.assert;function v7(e){if(!(this instanceof v7))return new v7(e);"string"==typeof e&&(y7(Object.prototype.hasOwnProperty.call(i7,e),"Unknown curve "+e),e=i7[e]),e instanceof i7.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var b7=v7;v7.prototype.keyPair=function(e){return new c7(this,e)},v7.prototype.keyFromPrivate=function(e,t){return c7.fromPrivate(this,e,t)},v7.prototype.keyFromPublic=function(e,t){return c7.fromPublic(this,e,t)},v7.prototype.genKeyPair=function(e){e||(e={});for(var t=new s7({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Z4(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new R4(2));;){var i=new R4(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},v7.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},v7.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new R4(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),s=e.toArray("be",i),a=new s7({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new R4(1)),c=0;;c++){var l=n.k?n.k(c):new R4(a.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var f=h.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=l.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var g=(h.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),g^=1),new f7({r:d,s:p,recoveryParam:g})}}}}}},v7.prototype.verify=function(e,t,r,n){e=this._truncateToN(new R4(e,16)),r=this.keyFromPublic(r,n);var i=(t=new f7(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),u=a.mul(e).umod(this.n),c=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},v7.prototype.recoverPubKey=function(e,t,r,n){y7((3&r)===r,"The recovery param is more than two bits"),t=new f7(t,n);var i=this.n,o=new R4(e),s=t.r,a=t.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},v7.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new f7(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var w7=Y4.assert,_7=Y4.parseBytes,x7=Y4.cachedProperty;function S7(e,t){this.eddsa=e,this._secret=_7(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=_7(t.pub)}S7.fromPublic=function(e,t){return t instanceof S7?t:new S7(e,{pub:t})},S7.fromSecret=function(e,t){return t instanceof S7?t:new S7(e,{secret:t})},S7.prototype.secret=function(){return this._secret},x7(S7,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),x7(S7,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),x7(S7,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),x7(S7,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),x7(S7,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),x7(S7,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),S7.prototype.sign=function(e){return w7(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},S7.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},S7.prototype.getSecret=function(e){return w7(this._secret,"KeyPair is public only"),Y4.encode(this.secret(),e)},S7.prototype.getPublic=function(e){return Y4.encode(this.pubBytes(),e)};var E7=S7,k7=Y4.assert,I7=Y4.cachedProperty,A7=Y4.parseBytes;function T7(e,t){this.eddsa=e,"object"!=typeof t&&(t=A7(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),k7(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof R4&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}I7(T7,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),I7(T7,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),I7(T7,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),I7(T7,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),T7.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},T7.prototype.toHex=function(){return Y4.encode(this.toBytes(),"hex").toUpperCase()};var P7=T7,O7=Y4.assert,C7=Y4.parseBytes;function M7(e){if(O7("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof M7))return new M7(e);e=i7[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r7.sha512}var N7=M7;M7.prototype.sign=function(e,t){e=C7(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),a=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},M7.prototype.verify=function(e,t,r){e=C7(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},M7.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Y4.intFromLE(e.digest()).umod(this.curve.n)},M7.prototype.keyFromPublic=function(e){return E7.fromPublic(this,e)},M7.prototype.keyFromSecret=function(e){return E7.fromSecret(this,e)},M7.prototype.makeSignature=function(e){return e instanceof P7?e:new P7(this,e)},M7.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},M7.prototype.decodePoint=function(e){var t=(e=Y4.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=Y4.intFromLE(r);return this.curve.pointFromY(i,n)},M7.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},M7.prototype.decodeInt=function(e){return Y4.intFromLE(e)},M7.prototype.isPoint=function(e){return e instanceof this.pointClass};var R7=BH($4),L7=DH((function(e,t){var r=t;r.version=R7.version,r.utils=Y4,r.rand=Z4,r.curve=w8,r.curves=i7,r.ec=b7,r.eddsa=N7}));const j7=iK.alloc(1,1),D7=iK.alloc(1,0);const B7=new L7.ec("secp256k1"),U7=iK.alloc(32,0),F7=iK.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),z7=iK.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),V7=B7.curve.n,H7=V7.shrn(1),K7=B7.curve.g;function q7(e){return FK(e)&&32===e.length}function $7(e){return!!q7(e)&&e.compare(F7)<0}function W7(e){if(!FK(e))return!1;if(e.length<33)return!1;const t=e[0],r=e.slice(1,33);if(0===r.compare(U7))return!1;if(r.compare(z7)>=0)return!1;if((2===t||3===t)&&33===e.length){try{Q7(e)}catch(e){return!1}return!0}const n=e.slice(33);return 0!==n.compare(U7)&&!(n.compare(z7)>=0)&&4===t&&65===e.length}function G7(e){return 4!==e[0]}function J7(e){return!!q7(e)&&e.compare(U7)>0&&e.compare(F7)<0}function X7(e,t){return void 0===e&&void 0!==t?G7(t):void 0===e||e}function Y7(e){return new R4(e)}function Z7(e){return e.toArrayLike(iK,"be",32)}function Q7(e){return B7.curve.decodePoint(e)}function eee(e,t){return iK.from(e._encode(t))}function tee(e,t,r){if(!q7(e))throw new TypeError("Expected Hash");if(!J7(t))throw new TypeError("Expected Private");if(void 0!==r&&!q7(r))throw new TypeError("Expected Extra Data (32 bytes)");const n=Y7(t),i=Y7(e);let o,s;(function(e,t,r,n,i){let o=iK.alloc(32,0),s=iK.alloc(32,1);o=T4("sha256",o).update(s).update(D7).update(t).update(e).update(i||"").digest(),s=T4("sha256",o).update(s).digest(),o=T4("sha256",o).update(s).update(j7).update(t).update(e).update(i||"").digest(),s=T4("sha256",o).update(s).digest(),s=T4("sha256",o).update(s).digest();let a=s;for(;!n(a)||!r(a);)o=T4("sha256",o).update(s).update(D7).digest(),s=T4("sha256",o).update(s).digest(),s=T4("sha256",o).update(s).digest(),a=s})(e,t,(function(e){const t=Y7(e),r=K7.mul(t);return!r.isInfinity()&&(o=r.x.umod(V7),0!==o.isZero()&&(s=t.invm(V7).mul(i.add(n.mul(o))).umod(V7),0!==s.isZero()))}),J7,r),s.cmp(H7)>0&&(s=V7.sub(s));const a=iK.allocUnsafe(64);return Z7(o).copy(a,0),Z7(s).copy(a,32),a}var ree={isPoint:W7,isPointCompressed:function(e){return!!W7(e)&&G7(e)},isPrivate:J7,pointAdd:function(e,t,r){if(!W7(e))throw new TypeError("Expected Point");if(!W7(t))throw new TypeError("Expected Point");const n=Q7(e),i=Q7(t),o=n.add(i);return o.isInfinity()?null:eee(o,X7(r,e))},pointAddScalar:function(e,t,r){if(!W7(e))throw new TypeError("Expected Point");if(!$7(t))throw new TypeError("Expected Tweak");const n=X7(r,e),i=Q7(e);if(0===t.compare(U7))return eee(i,n);const o=Y7(t),s=K7.mul(o),a=i.add(s);return a.isInfinity()?null:eee(a,n)},pointCompress:function(e,t){if(!W7(e))throw new TypeError("Expected Point");const r=Q7(e);if(r.isInfinity())throw new TypeError("Expected Point");return eee(r,X7(t,e))},pointFromScalar:function(e,t){if(!J7(e))throw new TypeError("Expected Private");const r=Y7(e),n=K7.mul(r);return n.isInfinity()?null:eee(n,X7(t))},pointMultiply:function(e,t,r){if(!W7(e))throw new TypeError("Expected Point");if(!$7(t))throw new TypeError("Expected Tweak");const n=X7(r,e),i=Q7(e),o=Y7(t),s=i.mul(o);return s.isInfinity()?null:eee(s,n)},privateAdd:function(e,t){if(!J7(e))throw new TypeError("Expected Private");if(!$7(t))throw new TypeError("Expected Tweak");const r=Y7(e),n=Y7(t),i=Z7(r.add(n).umod(V7));return J7(i)?i:null},privateSub:function(e,t){if(!J7(e))throw new TypeError("Expected Private");if(!$7(t))throw new TypeError("Expected Tweak");const r=Y7(e),n=Y7(t),i=Z7(r.sub(n).umod(V7));return J7(i)?i:null},sign:function(e,t){return tee(e,t)},signWithEntropy:function(e,t,r){return tee(e,t,r)},verify:function(e,t,r,n){if(!q7(e))throw new TypeError("Expected Hash");if(!W7(t))throw new TypeError("Expected Point");if(!function(e){const t=e.slice(0,32),r=e.slice(32,64);return FK(e)&&64===e.length&&t.compare(F7)<0&&r.compare(F7)<0}(r))throw new TypeError("Expected Signature");const i=Q7(t),o=Y7(r.slice(0,32)),s=Y7(r.slice(32,64));if(n&&s.cmp(H7)>0)return!1;if(o.gtn(0)<=0)return!1;if(s.gtn(0)<=0)return!1;const a=Y7(e),u=s.invm(V7),c=a.mul(u).umod(V7),l=o.mul(u).umod(V7),h=K7.mulAdd(c,i,l);return!h.isInfinity()&&h.x.umod(V7).eq(o)}},nee={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var iee in nee.Null=nee.Nil,nee)nee[iee].toJSON=function(e){return e}.bind(null,iee);var oee=nee;function see(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function aee(e){return oee.Nil(e)?"":see(e.constructor)}function uee(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function cee(e){return oee.Function(e)?e.toJSON?e.toJSON():see(e):oee.Array(e)?"Array":e&&oee.Object(e)?"Object":void 0!==e?e:""}function lee(e,t,r){var n=function(e){return oee.Function(e)?"":oee.String(e)?JSON.stringify(e):e&&oee.Object(e)?"":e}(t);return"Expected "+cee(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function hee(e,t,r){r=r||aee(t),this.message=lee(e,t,r),uee(this,hee),this.__type=e,this.__value=t,this.__valueTypeName=r}function fee(e,t,r,n,i){e?(i=i||aee(n),this.message=function(e,t,r,n,i){var o='" of type ';return"key"===t&&(o='" with key type '),lee('property "'+cee(r)+o+cee(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',uee(this,hee),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}hee.prototype=Object.create(Error.prototype),hee.prototype.constructor=hee,fee.prototype=Object.create(Error.prototype),fee.prototype.constructor=hee;var dee=hee,pee=fee,gee=function(e,t){return new hee(e,{},t)},mee=function(e,t,r){return e instanceof fee?(t=t+"."+e.__property,e=new fee(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof hee&&(e=new fee(e.__type,t,r,e.__value,e.__valueTypeName)),uee(e),e},yee=cee,vee=aee;function bee(e){return FK(e)}function wee(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function _ee(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw gee(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var xee=_ee.bind(null,oee.Array),See=_ee.bind(null,bee),Eee=_ee.bind(null,wee),kee=_ee.bind(null,oee.String),Iee=Math.pow(2,53)-1,Aee={ArrayN:xee,Buffer:bee,BufferN:See,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:wee,HexN:Eee,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-Iee&&e<=Iee&&Math.floor(e)===e},Range:function(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||oee.Number,n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n},StringN:kee,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=Iee&&Math.floor(e)===e}};for(var Tee in Aee)Aee[Tee].toJSON=function(e){return e}.bind(null,Tee);var Pee=Aee,Oee=yee,Cee=dee,Mee=pee,Nee=mee,Ree=vee,Lee={arrayOf:function(e,t){function r(r,n){return!!oee.Array(r)&&!oee.Nil(r)&&!(void 0!==t.minLength&&r.length<t.minLength)&&!(void 0!==t.maxLength&&r.length>t.maxLength)&&(void 0===t.length||r.length===t.length)&&r.every((function(t,r){try{return Dee(e,t,n)}catch(e){throw Nee(e,r)}}))}return e=jee(e),t=t||{},r.toJSON=function(){var r="["+Oee(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return oee.Nil(r)||t(r,n,e)}return t=jee(t),r.toJSON=function(){return"?"+Oee(t)},r},map:function(e,t){function r(r,n){if(!oee.Object(r))return!1;if(oee.Nil(r))return!1;for(var i in r){try{t&&Dee(t,i,n)}catch(e){throw Nee(e,i,"key")}try{var o=r[i];Dee(e,o,n)}catch(e){throw Nee(e,i)}}return!0}return e=jee(e),t&&(t=jee(t)),r.toJSON=t?function(){return"{"+Oee(t)+": "+Oee(e)+"}"}:function(){return"{"+Oee(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=jee(e[r]);function n(e,r){if(!oee.Object(e))return!1;if(oee.Nil(e))return!1;var n;try{for(n in t)Dee(t[n],e[n],r)}catch(e){throw Nee(e,n)}if(r)for(n in e)if(!t[n])throw new Mee(void 0,n);return!0}return n.toJSON=function(){return Oee(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(jee);function t(t,r){return e.some((function(e){try{return Dee(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(Oee).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(jee);function t(t,r){return e.every((function(e){try{return Dee(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(Oee).join(" & ")},t},quacksLike:function(e){function t(t){return e===Ree(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(jee);function t(t,r){return!oee.Nil(t)&&!oee.Nil(t.length)&&(!r||t.length===e.length)&&e.every((function(e,n){try{return Dee(e,t[n],r)}catch(e){throw Nee(e,n)}}))}return t.toJSON=function(){return"("+e.map(Oee).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function jee(e){if(oee.String(e))return"?"===e[0]?Lee.maybe(e.slice(1)):oee[e]||Lee.quacksLike(e);if(e&&oee.Object(e)){if(oee.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return Lee.arrayOf(e[0])}return Lee.object(e)}return oee.Function(e)?e:Lee.value(e)}function Dee(e,t,r,n){if(oee.Function(e)){if(e(t,r))return!0;throw new Cee(n||e,t)}return Dee(jee(e),t,r)}for(var Bee in Lee.oneOf=Lee.anyOf,oee)Dee[Bee]=oee[Bee];for(Bee in Lee)Dee[Bee]=Lee[Bee];for(Bee in Pee)Dee[Bee]=Pee[Bee];Dee.compile=jee,Dee.TfTypeError=Cee,Dee.TfPropertyTypeError=Mee;var Uee=Dee;function Fee(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function zee(e,t,r){var n=new iK(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}var Vee=function(e,t){return Fee(N4.decode(e),t)},Hee=function(e,t,r){return"number"==typeof e?N4.encode(zee(e,t,r)):N4.encode(zee(e.version,e.privateKey,e.compressed))},Kee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Uee.BufferN(32),n=Uee.compile({wif:Uee.UInt8,bip32:{public:Uee.UInt32,private:Uee.UInt32}}),i={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},o=2147483648,s=Math.pow(2,31)-1;function a(e){return Uee.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function u(e){return Uee.UInt32(e)&&e<=s}class c{constructor(e,t,r,i,o=0,s=0,a=0){this.__D=e,this.__Q=t,this.chainCode=r,this.network=i,this.__DEPTH=o,this.__INDEX=s,this.__PARENT_FINGERPRINT=a,Uee(n,i),this.lowR=!1}get depth(){return this.__DEPTH}get index(){return this.__INDEX}get parentFingerprint(){return this.__PARENT_FINGERPRINT}get publicKey(){return void 0===this.__Q&&(this.__Q=ree.pointFromScalar(this.__D,!0)),this.__Q}get privateKey(){return this.__D}get identifier(){return P4.hash160(this.publicKey)}get fingerprint(){return this.identifier.slice(0,4)}get compressed(){return!0}isNeutered(){return void 0===this.__D}neutered(){return f(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}toBase58(){const e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=iK.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),N4.encode(r)}toWIF(){if(!this.privateKey)throw new TypeError("Missing private key");return Hee(this.network.wif,this.privateKey,!0)}derive(e){Uee(Uee.UInt32,e);const t=e>=o,r=iK.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);const n=P4.hmacSHA512(this.chainCode,r),i=n.slice(0,32),s=n.slice(32);if(!ree.isPrivate(i))return this.derive(e+1);let a;if(this.isNeutered()){const t=ree.pointAddScalar(this.publicKey,i,!0);if(null===t)return this.derive(e+1);a=f(t,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{const t=ree.privateAdd(this.privateKey,i);if(null==t)return this.derive(e+1);a=h(t,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return a}deriveHardened(e){return Uee(u,e),this.derive(e+o)}derivePath(e){Uee(a,e);let t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce(((e,t)=>{let r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}sign(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return ree.sign(e,this.privateKey);{let t=ree.sign(e,this.privateKey);const r=iK.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=ree.signWithEntropy(e,this.privateKey,r);return t}}verify(e,t){return ree.verify(e,this.publicKey,t)}}function l(e,t,r){return h(e,t,r)}function h(e,t,n,o,s,a){if(Uee({privateKey:r,chainCode:r},{privateKey:e,chainCode:t}),n=n||i,!ree.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new c(e,void 0,t,n,o,s,a)}function f(e,t,n,o,s,a){if(Uee({publicKey:Uee.BufferN(33),chainCode:r},{publicKey:e,chainCode:t}),n=n||i,!ree.isPoint(e))throw new TypeError("Point is not on the curve");return new c(void 0,e,t,n,o,s,a)}t.fromBase58=function(e,t){const r=N4.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||i;const n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");const o=r[4],s=r.readUInt32BE(5);if(0===o&&0!==s)throw new TypeError("Invalid parent fingerprint");const a=r.readUInt32BE(9);if(0===o&&0!==a)throw new TypeError("Invalid index");const u=r.slice(13,45);let c;if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");c=h(r.slice(46,78),u,t,o,a,s)}else c=f(r.slice(45,78),u,t,o,a,s);return c},t.fromPrivateKey=l,t.fromPublicKey=function(e,t,r){return f(e,t,r)},t.fromSeed=function(e,t){if(Uee(Uee.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||i;const r=P4.hmacSHA512(iK.from("Bitcoin seed","utf8"),e);return l(r.slice(0,32),r.slice(32),t)}}));jH(Kee),Kee.fromBase58,Kee.fromPrivateKey,Kee.fromPublicKey,Kee.fromSeed;var qee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromSeed=Kee.fromSeed,t.fromBase58=Kee.fromBase58,t.fromPublicKey=Kee.fromPublicKey,t.fromPrivateKey=Kee.fromPrivateKey}));jH(qee),qee.fromSeed,qee.fromBase58,qee.fromPublicKey,qee.fromPrivateKey;var $ee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}}));jH($ee),$ee.bitcoin,$ee.regtest,$ee.testnet;var Wee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;const n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){const t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-(4294967296*(-129&r)+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},t.encode=function(e){let t=Math.abs(e);const r=(n=t)>2147483647?5:n>8388607?4:n>32767?3:n>127?2:n>0?1:0;var n;const i=iK.allocUnsafe(r),o=e<0;for(let e=0;e<r;++e)i.writeUInt8(255&t,e),t>>=8;return 128&i[r-1]?i.writeUInt8(o?128:0,r-1):o&&(i[r-1]|=128),i}}));jH(Wee),Wee.decode,Wee.encode;var Gee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Math.pow(2,31)-1;function n(e){return Uee.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return Uee.UInt32(e)&&e<=r},t.BIP32Path=n,n.toJSON=()=>"BIP32 derivation path",t.Signer=function(e){return(Uee.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign},t.Satoshi=function(e){return Uee.UInt53(e)&&e<=21e14},t.ECPoint=Uee.quacksLike("Point"),t.Network=Uee.compile({messagePrefix:Uee.oneOf(Uee.Buffer,Uee.String),bip32:{public:Uee.UInt32,private:Uee.UInt32},pubKeyHash:Uee.UInt8,scriptHash:Uee.UInt8,wif:Uee.UInt8}),t.Buffer256bit=Uee.BufferN(32),t.Hash160bit=Uee.BufferN(20),t.Hash256bit=Uee.BufferN(32),t.Number=Uee.Number,t.Array=Uee.Array,t.Boolean=Uee.Boolean,t.String=Uee.String,t.Buffer=Uee.Buffer,t.Hex=Uee.Hex,t.maybe=Uee.maybe,t.tuple=Uee.tuple,t.UInt8=Uee.UInt8,t.UInt32=Uee.UInt32,t.Function=Uee.Function,t.BufferN=Uee.BufferN,t.Null=Uee.Null,t.oneOf=Uee.oneOf}));jH(Gee),Gee.UInt31,Gee.BIP32Path,Gee.Signer,Gee.Satoshi,Gee.ECPoint,Gee.Network,Gee.Buffer256bit,Gee.Hash160bit,Gee.Hash256bit,Gee.Number,Gee.Array,Gee.Boolean,Gee.String,Gee.Buffer,Gee.Hex,Gee.maybe,Gee.tuple,Gee.UInt8,Gee.UInt32,Gee.Function,Gee.BufferN,Gee.Null,Gee.oneOf;var Jee=r2.Buffer,Xee=function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},Yee=function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},Zee=function(e,t){var r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=Jee.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i},Qee=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=iK.alloc(1,0);function n(e){let t=0;for(;0===e[t];)++t;return t===e.length?r:128&(e=e.slice(t))[0]?iK.concat([r,e],1+e.length):e}function i(e){0===e[0]&&(e=e.slice(1));const t=iK.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}t.decode=function(e){const t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const n=Yee(e.slice(0,-1)),o=i(n.r),s=i(n.s);return{signature:iK.concat([o,s],64),hashType:t}},t.encode=function(e,t){Uee({signature:Gee.BufferN(64),hashType:Gee.UInt8},{signature:e,hashType:t});const r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);const i=iK.allocUnsafe(1);i.writeUInt8(t,0);const o=n(e.slice(0,32)),s=n(e.slice(32,64));return iK.concat([Zee(o,s),i])}}));jH(Qee),Qee.decode,Qee.encode;var ete=BH(Object.freeze({__proto__:null,OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255,default:{OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255}}));function tte(e){return e<ete.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}var rte={encodingLength:tte,encode:function(e,t,r){var n=tte(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(ete.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(ete.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(ete.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n},decode:function(e,t){var r,n,i=e.readUInt8(t);if(i<ete.OP_PUSHDATA1)r=i,n=1;else if(i===ete.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===ete.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==ete.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}},nte={};for(var ite in ete)nte[ete[ite]]=ite;var ote=nte,ste=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OPS=ete;const r=t.OPS.OP_RESERVED;function n(e){return Gee.Buffer(e)||function(e){return Gee.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function i(e){return Gee.Array(e)&&e.every(n)}function o(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?r+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function s(e){return FK(e)}function a(e){return FK(e)}function u(e){if(s(e))return e;Uee(Gee.Array,e);const t=e.reduce(((e,t)=>a(t)?1===t.length&&void 0!==o(t)?e+1:e+rte.encodingLength(t.length)+t.length:e+1),0),r=iK.allocUnsafe(t);let n=0;if(e.forEach((e=>{if(a(e)){const t=o(e);if(void 0!==t)return r.writeUInt8(t,n),void(n+=1);n+=rte.encode(r,e.length,n),e.copy(r,n),n+=e.length}else r.writeUInt8(e,n),n+=1})),n!==r.length)throw new Error("Could not decode chunks");return r}function c(e){if(r=e,Gee.Array(r))return e;var r;Uee(Gee.Buffer,e);const n=[];let i=0;for(;i<e.length;){const r=e[i];if(r>t.OPS.OP_0&&r<=t.OPS.OP_PUSHDATA4){const t=rte.decode(e,i);if(null===t)return null;if(i+=t.size,i+t.number>e.length)return null;const r=e.slice(i,i+t.number);i+=t.number;const s=o(r);void 0!==s?n.push(s):n.push(r)}else n.push(r),i+=1}return n}function l(e){const t=-129&e;return t>0&&t<4}t.isPushOnly=i,t.compile=u,t.decompile=c,t.toASM=function(e){return s(e)&&(e=c(e)),e.map((e=>{if(a(e)){const t=o(e);if(void 0===t)return e.toString("hex");e=t}return ote[e]})).join(" ")},t.fromASM=function(e){return Uee(Gee.String,e),u(e.split(" ").map((e=>void 0!==t.OPS[e]?t.OPS[e]:(Uee(Gee.Hex,e),iK.from(e,"hex")))))},t.toStack=function(e){return e=c(e),Uee(i,e),e.map((e=>a(e)?e:e===t.OPS.OP_0?iK.allocUnsafe(0):Wee.encode(e-r)))},t.isCanonicalPubKey=function(e){return ree.isPoint(e)},t.isDefinedHashType=l,t.isCanonicalScriptSignature=function(e){return!!FK(e)&&!!l(e[e.length-1])&&Xee(e.slice(0,-1))},t.number=Wee,t.signature=Qee}));jH(ste),ste.OPS,ste.isPushOnly,ste.compile,ste.decompile,ste.toASM,ste.fromASM,ste.toStack,ste.isCanonicalPubKey,ste.isDefinedHashType,ste.isCanonicalScriptSignature,ste.number,ste.signature;var ate=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){let t;return()=>(void 0!==t||(t=e()),t)}}));jH(ate),ate.prop,ate.value;var ute=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),output:Uee.maybe(Uee.Buffer),data:Uee.maybe(Uee.arrayOf(Uee.Buffer))},e);const n={name:"embed",network:e.network||$ee.bitcoin};if(ate.prop(n,"output",(()=>{if(e.data)return ste.compile([r.OP_RETURN].concat(e.data))})),ate.prop(n,"data",(()=>{if(e.output)return ste.decompile(e.output).slice(1)})),t.validate&&e.output){const t=ste.decompile(e.output);if(t[0]!==r.OP_RETURN)throw new TypeError("Output is invalid");if(!t.slice(1).every(Uee.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}}));jH(ute),ute.p2data;var cte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS,n=r.OP_RESERVED;function i(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function o(e){return ste.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===r.OP_0)}t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),m:Uee.maybe(Uee.Number),n:Uee.maybe(Uee.Number),output:Uee.maybe(Uee.Buffer),pubkeys:Uee.maybe(Uee.arrayOf(ree.isPoint)),signatures:Uee.maybe(Uee.arrayOf(o)),input:Uee.maybe(Uee.Buffer)},e);const s={network:e.network||$ee.bitcoin};let a=[],u=!1;function c(e){u||(u=!0,a=ste.decompile(e),s.m=a[0]-n,s.n=a[a.length-2]-n,s.pubkeys=a.slice(1,-2))}if(ate.prop(s,"output",(()=>{if(e.m&&s.n&&e.pubkeys)return ste.compile([].concat(n+e.m,e.pubkeys,n+s.n,r.OP_CHECKMULTISIG))})),ate.prop(s,"m",(()=>{if(s.output)return c(s.output),s.m})),ate.prop(s,"n",(()=>{if(s.pubkeys)return s.pubkeys.length})),ate.prop(s,"pubkeys",(()=>{if(e.output)return c(e.output),s.pubkeys})),ate.prop(s,"signatures",(()=>{if(e.input)return ste.decompile(e.input).slice(1)})),ate.prop(s,"input",(()=>{if(e.signatures)return ste.compile([r.OP_0].concat(e.signatures))})),ate.prop(s,"witness",(()=>{if(s.input)return[]})),ate.prop(s,"name",(()=>{if(s.m&&s.n)return`p2ms(${s.m} of ${s.n})`})),t.validate){if(e.output){if(c(e.output),!Uee.Number(a[0]))throw new TypeError("Output is invalid");if(!Uee.Number(a[a.length-2]))throw new TypeError("Output is invalid");if(a[a.length-1]!==r.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(s.m<=0||s.n>16||s.m>s.n||s.n!==a.length-3)throw new TypeError("Output is invalid");if(!s.pubkeys.every((e=>ree.isPoint(e))))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==s.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==s.n)throw new TypeError("n mismatch");if(e.pubkeys&&!i(e.pubkeys,s.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(s.n=e.pubkeys.length,s.n<s.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<s.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>s.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==r.OP_0)throw new TypeError("Input is invalid");if(0===s.signatures.length||!s.signatures.every(o))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!i(e.signatures,s.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(s,e)}}));jH(cte),cte.p2ms;var lte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),output:Uee.maybe(Uee.Buffer),pubkey:Uee.maybe(ree.isPoint),signature:Uee.maybe(ste.isCanonicalScriptSignature),input:Uee.maybe(Uee.Buffer)},e);const n=ate.value((()=>ste.decompile(e.input))),i={name:"p2pk",network:e.network||$ee.bitcoin};if(ate.prop(i,"output",(()=>{if(e.pubkey)return ste.compile([e.pubkey,r.OP_CHECKSIG])})),ate.prop(i,"pubkey",(()=>{if(e.output)return e.output.slice(1,-1)})),ate.prop(i,"signature",(()=>{if(e.input)return n()[0]})),ate.prop(i,"input",(()=>{if(e.signature)return ste.compile([e.signature])})),ate.prop(i,"witness",(()=>{if(i.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!ree.isPoint(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!ste.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}}));jH(lte),lte.p2pk;var hte=DH((function(e,t){function r(e){try{return b4("rmd160").update(e).digest()}catch(t){return b4("ripemd160").update(e).digest()}}function n(e){return b4("sha256").update(e).digest()}Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=r,t.sha1=function(e){return b4("sha1").update(e).digest()},t.sha256=n,t.hash160=function(e){return r(n(e))},t.hash256=function(e){return n(n(e))}}));jH(hte),hte.ripemd160,hte.sha1,hte.sha256,hte.hash160,hte.hash256;var fte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),address:Uee.maybe(Uee.String),hash:Uee.maybe(Uee.BufferN(20)),output:Uee.maybe(Uee.BufferN(25)),pubkey:Uee.maybe(ree.isPoint),signature:Uee.maybe(ste.isCanonicalScriptSignature),input:Uee.maybe(Uee.Buffer)},e);const n=ate.value((()=>{const t=N4.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),i=ate.value((()=>ste.decompile(e.input))),o=e.network||$ee.bitcoin,s={name:"p2pkh",network:o};if(ate.prop(s,"address",(()=>{if(!s.hash)return;const e=iK.allocUnsafe(21);return e.writeUInt8(o.pubKeyHash,0),s.hash.copy(e,1),N4.encode(e)})),ate.prop(s,"hash",(()=>e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||s.pubkey?hte.hash160(e.pubkey||s.pubkey):void 0)),ate.prop(s,"output",(()=>{if(s.hash)return ste.compile([r.OP_DUP,r.OP_HASH160,s.hash,r.OP_EQUALVERIFY,r.OP_CHECKSIG])})),ate.prop(s,"pubkey",(()=>{if(e.input)return i()[1]})),ate.prop(s,"signature",(()=>{if(e.input)return i()[0]})),ate.prop(s,"input",(()=>{if(e.pubkey&&e.signature)return ste.compile([e.signature,e.pubkey])})),ate.prop(s,"witness",(()=>{if(s.input)return[]})),t.validate){let t=iK.from([]);if(e.address){if(n().version!==o.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");t=n().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==r.OP_DUP||e.output[1]!==r.OP_HASH160||20!==e.output[2]||e.output[23]!==r.OP_EQUALVERIFY||e.output[24]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");const n=e.output.slice(3,23);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.pubkey){const r=hte.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.input){const r=i();if(2!==r.length)throw new TypeError("Input is invalid");if(!ste.isCanonicalScriptSignature(r[0]))throw new TypeError("Input has invalid signature");if(!ree.isPoint(r[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw new TypeError("Pubkey mismatch");const n=hte.hash160(r[1]);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch")}}return Object.assign(s,e)}}));jH(fte),fte.p2pkh;var dte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),address:Uee.maybe(Uee.String),hash:Uee.maybe(Uee.BufferN(20)),output:Uee.maybe(Uee.BufferN(23)),redeem:Uee.maybe({network:Uee.maybe(Uee.Object),output:Uee.maybe(Uee.Buffer),input:Uee.maybe(Uee.Buffer),witness:Uee.maybe(Uee.arrayOf(Uee.Buffer))}),input:Uee.maybe(Uee.Buffer),witness:Uee.maybe(Uee.arrayOf(Uee.Buffer))},e);let n=e.network;n||(n=e.redeem&&e.redeem.network||$ee.bitcoin);const i={network:n},o=ate.value((()=>{const t=N4.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),s=ate.value((()=>ste.decompile(e.input))),a=ate.value((()=>{const t=s();return{network:n,output:t[t.length-1],input:ste.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(ate.prop(i,"address",(()=>{if(!i.hash)return;const e=iK.allocUnsafe(21);return e.writeUInt8(i.network.scriptHash,0),i.hash.copy(e,1),N4.encode(e)})),ate.prop(i,"hash",(()=>e.output?e.output.slice(2,22):e.address?o().hash:i.redeem&&i.redeem.output?hte.hash160(i.redeem.output):void 0)),ate.prop(i,"output",(()=>{if(i.hash)return ste.compile([r.OP_HASH160,i.hash,r.OP_EQUAL])})),ate.prop(i,"redeem",(()=>{if(e.input)return a()})),ate.prop(i,"input",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return ste.compile([].concat(ste.decompile(e.redeem.input),e.redeem.output))})),ate.prop(i,"witness",(()=>i.redeem&&i.redeem.witness?i.redeem.witness:i.input?[]:void 0)),ate.prop(i,"name",(()=>{const e=["p2sh"];return void 0!==i.redeem&&e.push(i.redeem.name),e.join("-")})),t.validate){let t=iK.from([]);if(e.address){if(o().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==o().hash.length)throw new TypeError("Invalid address");t=o().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==r.OP_HASH160||20!==e.output[1]||e.output[22]!==r.OP_EQUAL)throw new TypeError("Output is invalid");const n=e.output.slice(2,22);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}const i=e=>{if(e.output){const r=ste.decompile(e.output);if(!r||r.length<1)throw new TypeError("Redeem.output too short");const n=hte.hash160(e.output);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.input){const t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw new TypeError("Empty input");if(t&&r)throw new TypeError("Input and witness provided");if(t){const t=ste.decompile(e.input);if(!ste.isPushOnly(t))throw new TypeError("Non push-only scriptSig")}}};if(e.input){const e=s();if(!e||e.length<1)throw new TypeError("Input too short");if(!FK(a().output))throw new TypeError("Input is invalid");i(a())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){const t=a();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw new TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(i,e)}}));jH(dte),dte.p2sh;for(var pte="qpzry9x8gf2tvdw0s3jn54khce6mua7l",gte={},mte=0;mte<pte.length;mte++){var yte=pte.charAt(mte);if(void 0!==gte[yte])throw new TypeError(yte+" is ambiguous");gte[yte]=mte}function vte(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function bte(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=vte(t)^n>>5}for(t=vte(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=vte(t)^31&i}return t}function wte(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)return"Data too short";var a=bte(o);if("string"==typeof a)return a;for(var u=[],c=0;c<s.length;++c){var l=s.charAt(c),h=gte[l];if(void 0===h)return"Unknown character "+l;a=vte(a)^h,c+6>=s.length||u.push(h)}return 1!==a?"Invalid checksum for "+e:{prefix:o,words:u}}function _te(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<e.length;++u)for(i=i<<t|e[u],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}var xte=function(e){var t=wte.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},Ste=function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=bte(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",o=0;o<t.length;++o){var s=t[o];if(s>>5!=0)throw new Error("Non 5-bit word");n=vte(n)^s,i+=pte.charAt(s)}for(o=0;o<6;++o)n=vte(n);for(n^=1,o=0;o<6;++o)i+=pte.charAt(n>>5*(5-o)&31);return i},Ete=function(e){var t=_te(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},kte=function(e){var t=_te(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)},Ite=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS,n=iK.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({address:Uee.maybe(Uee.String),hash:Uee.maybe(Uee.BufferN(20)),input:Uee.maybe(Uee.BufferN(0)),network:Uee.maybe(Uee.Object),output:Uee.maybe(Uee.BufferN(22)),pubkey:Uee.maybe(ree.isPoint),signature:Uee.maybe(ste.isCanonicalScriptSignature),witness:Uee.maybe(Uee.arrayOf(Uee.Buffer))},e);const i=ate.value((()=>{const t=xte(e.address),r=t.words.shift(),n=kte(t.words);return{version:r,prefix:t.prefix,data:iK.from(n)}})),o=e.network||$ee.bitcoin,s={name:"p2wpkh",network:o};if(ate.prop(s,"address",(()=>{if(!s.hash)return;const e=Ete(s.hash);return e.unshift(0),Ste(o.bech32,e)})),ate.prop(s,"hash",(()=>e.output?e.output.slice(2,22):e.address?i().data:e.pubkey||s.pubkey?hte.hash160(e.pubkey||s.pubkey):void 0)),ate.prop(s,"output",(()=>{if(s.hash)return ste.compile([r.OP_0,s.hash])})),ate.prop(s,"pubkey",(()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0)),ate.prop(s,"signature",(()=>{if(e.witness)return e.witness[0]})),ate.prop(s,"input",(()=>{if(s.witness)return n})),ate.prop(s,"witness",(()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){let t=iK.from([]);if(e.address){if(o&&o.bech32!==i().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(20!==i().data.length)throw new TypeError("Invalid address data");t=i().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==r.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){const r=hte.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");if(t=r,!ree.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!ste.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!ree.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");const r=hte.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch")}}return Object.assign(s,e)}}));jH(Ite),Ite.p2wpkh;var Ate=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS,n=iK.alloc(0);function i(e){return!(!FK(e)||65!==e.length||4!==e[0]||!ree.isPoint(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),Uee({network:Uee.maybe(Uee.Object),address:Uee.maybe(Uee.String),hash:Uee.maybe(Uee.BufferN(32)),output:Uee.maybe(Uee.BufferN(34)),redeem:Uee.maybe({input:Uee.maybe(Uee.Buffer),network:Uee.maybe(Uee.Object),output:Uee.maybe(Uee.Buffer),witness:Uee.maybe(Uee.arrayOf(Uee.Buffer))}),input:Uee.maybe(Uee.BufferN(0)),witness:Uee.maybe(Uee.arrayOf(Uee.Buffer))},e);const o=ate.value((()=>{const t=xte(e.address),r=t.words.shift(),n=kte(t.words);return{version:r,prefix:t.prefix,data:iK.from(n)}})),s=ate.value((()=>ste.decompile(e.redeem.input)));let a=e.network;a||(a=e.redeem&&e.redeem.network||$ee.bitcoin);const u={network:a};if(ate.prop(u,"address",(()=>{if(!u.hash)return;const e=Ete(u.hash);return e.unshift(0),Ste(a.bech32,e)})),ate.prop(u,"hash",(()=>e.output?e.output.slice(2):e.address?o().data:u.redeem&&u.redeem.output?hte.sha256(u.redeem.output):void 0)),ate.prop(u,"output",(()=>{if(u.hash)return ste.compile([r.OP_0,u.hash])})),ate.prop(u,"redeem",(()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:n,witness:e.witness.slice(0,-1)}})),ate.prop(u,"input",(()=>{if(u.witness)return n})),ate.prop(u,"witness",(()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){const t=ste.toStack(s());return u.redeem=Object.assign({witness:t},e.redeem),u.redeem.input=n,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),ate.prop(u,"name",(()=>{const e=["p2wsh"];return void 0!==u.redeem&&e.push(u.redeem.name),e.join("-")})),t.validate){let t=iK.from([]);if(e.address){if(o().prefix!==a.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==o().version)throw new TypeError("Invalid address version");if(32!==o().data.length)throw new TypeError("Invalid address data");t=o().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw new TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==r.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");const n=e.output.slice(2);if(t.length>0&&!t.equals(n))throw new TypeError("Hash mismatch");t=n}if(e.redeem){if(e.redeem.network&&e.redeem.network!==a)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===ste.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");const r=hte.sha256(e.redeem.output);if(t.length>0&&!t.equals(r))throw new TypeError("Hash mismatch");t=r}if(e.redeem.input&&!ste.isPushOnly(s()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every(((e,r)=>e.equals(t[r])))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&s().some(i)||e.redeem.output&&(ste.decompile(e.redeem.output)||[]).some(i))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){const t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(i)||(ste.decompile(t)||[]).some(i))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(u,e)}}));jH(Ate),Ate.p2wsh;var Tte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.embed=ute.p2data,t.p2ms=cte.p2ms,t.p2pk=lte.p2pk,t.p2pkh=fte.p2pkh,t.p2sh=dte.p2sh,t.p2wpkh=Ite.p2wpkh,t.p2wsh=Ate.p2wsh}));jH(Tte),Tte.embed,Tte.p2ms,Tte.p2pk,Tte.p2pkh,Tte.p2sh,Tte.p2wpkh,Tte.p2wsh;var Pte=DH((function(e,t){function r(e){const t=N4.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function n(e){const t=xte(e),r=kte(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:iK.from(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase58Check=r,t.fromBech32=n,t.toBase58Check=function(e,t){Uee(Gee.tuple(Gee.Hash160bit,Gee.UInt8),arguments);const r=iK.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),N4.encode(r)},t.toBech32=function(e,t,r){const n=Ete(e);return n.unshift(t),Ste(r,n)},t.fromOutputScript=function(e,t){t=t||$ee.bitcoin;try{return Tte.p2pkh({output:e,network:t}).address}catch(e){}try{return Tte.p2sh({output:e,network:t}).address}catch(e){}try{return Tte.p2wpkh({output:e,network:t}).address}catch(e){}try{return Tte.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(ste.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){let i,o;t=t||$ee.bitcoin;try{i=r(e)}catch(e){}if(i){if(i.version===t.pubKeyHash)return Tte.p2pkh({hash:i.hash}).output;if(i.version===t.scriptHash)return Tte.p2sh({hash:i.hash}).output}else{try{o=n(e)}catch(e){}if(o){if(o.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===o.version){if(20===o.data.length)return Tte.p2wpkh({hash:o.data}).output;if(32===o.data.length)return Tte.p2wsh({hash:o.data}).output}}}throw new Error(e+" has no matching Script")}}));jH(Pte),Pte.fromBase58Check,Pte.fromBech32,Pte.toBase58Check,Pte.toBech32,Pte.fromOutputScript,Pte.toOutputScript;var Ote=DH((function(e){var t=65536,r=r2.Buffer,n=LH.crypto||LH.msCrypto;n&&n.getRandomValues?e.exports=function(e,i){if(e>4294967295)throw new RangeError("requested too many random bytes");var o=r.allocUnsafe(e);if(e>0)if(e>t)for(var s=0;s<e;s+=t)n.getRandomValues(o.slice(s,s+t));else n.getRandomValues(o);return"function"==typeof i?eq((function(){i(null,o)})):o}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}})),Cte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Uee.maybe(Uee.compile({compressed:Gee.maybe(Gee.Boolean),network:Gee.maybe(Gee.Network)}));class n{constructor(e,t,r){this.__D=e,this.__Q=t,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||$ee.bitcoin,void 0!==t&&(this.__Q=ree.pointCompress(t,this.compressed))}get privateKey(){return this.__D}get publicKey(){return this.__Q||(this.__Q=ree.pointFromScalar(this.__D,this.compressed)),this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return Hee(this.network.wif,this.__D,this.compressed)}sign(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return ree.sign(e,this.__D);{let t=ree.sign(e,this.__D);const r=iK.alloc(32,0);let n=0;for(;t[0]>127;)n++,r.writeUIntLE(n,0,6),t=ree.signWithEntropy(e,this.__D,r);return t}}verify(e,t){return ree.verify(e,this.publicKey,t)}}function i(e,t){if(Uee(Gee.Buffer256bit,e),!ree.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return Uee(r,t),new n(e,void 0,t)}t.fromPrivateKey=i,t.fromPublicKey=function(e,t){return Uee(ree.isPoint,e),Uee(r,t),new n(void 0,e,t)},t.fromWIF=function(e,t){const r=Vee(e),n=r.version;if(Gee.Array(t)){if(!(t=t.filter((e=>n===e.wif)).pop()))throw new Error("Unknown network version")}else if(t=t||$ee.bitcoin,n!==t.wif)throw new Error("Invalid network version");return i(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){Uee(r,e),void 0===e&&(e={});const t=e.rng||Ote;let n;do{n=t(32),Uee(Gee.Buffer256bit,n)}while(!ree.isPrivate(n));return i(n,e)}}));jH(Cte),Cte.fromPrivateKey,Cte.fromPublicKey,Cte.fromWIF,Cte.makeRandom;var Mte=r2.Buffer;function Nte(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function Rte(e){return Nte(e),e<253?1:e<=65535?3:e<=4294967295?5:9}var Lte={encode:function e(t,r,n){if(Nte(t),r||(r=Mte.allocUnsafe(Rte(t))),!Mte.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),e.bytes=1):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),e.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),r},decode:function e(t,r){if(!Mte.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=t.readUInt8(r);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,t.readUInt16LE(r+1);if(254===n)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var i=t.readUInt32LE(r+1),o=4294967296*t.readUInt32LE(r+5)+i;return Nte(o),o},encodingLength:Rte},jte=DH((function(e,t){function r(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function n(e,t){const n=e.readUInt32LE(t);let i=e.readUInt32LE(t+4);return i*=4294967296,r(i+n,9007199254740991),i+n}function i(e,t,n){return r(t,9007199254740991),e.writeInt32LE(-1&t,n),e.writeUInt32LE(Math.floor(t/4294967296),n+4),n+8}Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt64LE=n,t.writeUInt64LE=i,t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.cloneBuffer=function(e){const t=iK.allocUnsafe(e.length);return e.copy(t),t},t.BufferWriter=class{constructor(e,t=0){this.buffer=e,this.offset=t,Uee(Gee.tuple(Gee.Buffer,Gee.UInt32),[e,t])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=i(this.buffer,e,this.offset)}writeVarInt(e){Lte.encode(e,this.buffer,this.offset),this.offset+=Lte.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach((e=>this.writeVarSlice(e)))}},t.BufferReader=class{constructor(e,t=0){this.buffer=e,this.offset=t,Uee(Gee.tuple(Gee.Buffer,Gee.UInt32),[e,t])}readUInt8(){const e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){const e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){const e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){const e=n(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){const e=Lte.decode(this.buffer,this.offset);return this.offset+=Lte.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){const e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}}));jH(jte),jte.readUInt64LE,jte.writeUInt64LE,jte.reverseBuffer,jte.cloneBuffer,jte.BufferWriter,jte.BufferReader;var Dte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=e.length;return Lte.encodingLength(t)+t}const i=iK.allocUnsafe(0),o=[],s=iK.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),a=iK.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),u=iK.from("ffffffffffffffff","hex"),c={script:i,valueBuffer:u};class l{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){const r=new jte.BufferReader(e),n=new l;n.version=r.readInt32();const i=r.readUInt8(),s=r.readUInt8();let a=!1;i===l.ADVANCED_TRANSACTION_MARKER&&s===l.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;const u=r.readVarInt();for(let e=0;e<u;++e)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:o});const c=r.readVarInt();for(let e=0;e<c;++e)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)n.ins[e].witness=r.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return n}static fromHex(e){return l.fromBuffer(iK.from(e,"hex"),!1)}static isCoinbaseHash(e){Uee(Gee.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&l.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return Uee(Gee.tuple(Gee.Hash256bit,Gee.UInt32,Gee.maybe(Gee.UInt32),Gee.maybe(Gee.Buffer)),arguments),Gee.Null(r)&&(r=l.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||i,sequence:r,witness:o})-1}addOutput(e,t){return Uee(Gee.tuple(Gee.Buffer,Gee.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some((e=>0!==e.witness.length))}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){const t=e&&this.hasWitnesses();return(t?10:8)+Lte.encodingLength(this.ins.length)+Lte.encodingLength(this.outs.length)+this.ins.reduce(((e,t)=>e+40+n(t.script)),0)+this.outs.reduce(((e,t)=>e+8+n(t.script)),0)+(t?this.ins.reduce(((e,t)=>e+function(e){const t=e.length;return Lte.encodingLength(t)+e.reduce(((e,t)=>e+n(t)),0)}(t.witness)),0):0)}clone(){const e=new l;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map((e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}))),e.outs=this.outs.map((e=>({script:e.script,value:e.value}))),e}hashForSignature(e,t,n){if(Uee(Gee.tuple(Gee.UInt32,Gee.Buffer,Gee.Number),arguments),e>=this.ins.length)return a;const o=ste.compile(ste.decompile(t).filter((e=>e!==r.OPS.OP_CODESEPARATOR))),s=this.clone();if((31&n)===l.SIGHASH_NONE)s.outs=[],s.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}));else if((31&n)===l.SIGHASH_SINGLE){if(e>=this.outs.length)return a;s.outs.length=e+1;for(let t=0;t<e;t++)s.outs[t]=c;s.ins.forEach(((t,r)=>{r!==e&&(t.sequence=0)}))}n&l.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[e]],s.ins[0].script=o):(s.ins.forEach((e=>{e.script=i})),s.ins[e].script=o);const u=iK.allocUnsafe(s.byteLength(!1)+4);return u.writeInt32LE(n,u.length-4),s.__toBuffer(u,0,!1),hte.hash256(u)}hashForWitnessV0(e,t,r,i){Uee(Gee.tuple(Gee.UInt32,Gee.Buffer,Gee.Satoshi,Gee.UInt32),arguments);let o,a=iK.from([]),u=s,c=s,h=s;if(i&l.SIGHASH_ANYONECANPAY||(a=iK.allocUnsafe(36*this.ins.length),o=new jte.BufferWriter(a,0),this.ins.forEach((e=>{o.writeSlice(e.hash),o.writeUInt32(e.index)})),c=hte.hash256(a)),i&l.SIGHASH_ANYONECANPAY||(31&i)===l.SIGHASH_SINGLE||(31&i)===l.SIGHASH_NONE||(a=iK.allocUnsafe(4*this.ins.length),o=new jte.BufferWriter(a,0),this.ins.forEach((e=>{o.writeUInt32(e.sequence)})),h=hte.hash256(a)),(31&i)!==l.SIGHASH_SINGLE&&(31&i)!==l.SIGHASH_NONE){const e=this.outs.reduce(((e,t)=>e+8+n(t.script)),0);a=iK.allocUnsafe(e),o=new jte.BufferWriter(a,0),this.outs.forEach((e=>{o.writeUInt64(e.value),o.writeVarSlice(e.script)})),u=hte.hash256(a)}else if((31&i)===l.SIGHASH_SINGLE&&e<this.outs.length){const t=this.outs[e];a=iK.allocUnsafe(8+n(t.script)),o=new jte.BufferWriter(a,0),o.writeUInt64(t.value),o.writeVarSlice(t.script),u=hte.hash256(a)}a=iK.allocUnsafe(156+n(t)),o=new jte.BufferWriter(a,0);const f=this.ins[e];return o.writeUInt32(this.version),o.writeSlice(c),o.writeSlice(h),o.writeSlice(f.hash),o.writeUInt32(f.index),o.writeVarSlice(t),o.writeUInt64(r),o.writeUInt32(f.sequence),o.writeSlice(u),o.writeUInt32(this.locktime),o.writeUInt32(i),hte.hash256(a)}getHash(e){return e&&this.isCoinbase()?iK.alloc(32,0):hte.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return jte.reverseBuffer(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){Uee(Gee.tuple(Gee.Number,Gee.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){Uee(Gee.tuple(Gee.Number,[Gee.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,r=!1){e||(e=iK.allocUnsafe(this.byteLength(r)));const n=new jte.BufferWriter(e,t||0);n.writeInt32(this.version);const i=r&&this.hasWitnesses();return i&&(n.writeUInt8(l.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(l.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach((e=>{n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)})),n.writeVarInt(this.outs.length),this.outs.forEach((e=>{void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)})),i&&this.ins.forEach((e=>{n.writeVector(e.witness)})),n.writeUInt32(this.locktime),void 0!==t?e.slice(t,n.offset):e}}l.DEFAULT_SEQUENCE=4294967295,l.SIGHASH_ALL=1,l.SIGHASH_NONE=2,l.SIGHASH_SINGLE=3,l.SIGHASH_ANYONECANPAY=128,l.ADVANCED_TRANSACTION_MARKER=0,l.ADVANCED_TRANSACTION_FLAG=1,t.Transaction=l}));jH(Dte),Dte.Transaction;var Bte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=new TypeError("Cannot compute merkle root for zero transactions"),n=new TypeError("Cannot compute witness commit for non-segwit block");class i{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");const t=new jte.BufferReader(e),r=new i;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;const n=()=>{const e=Dte.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},o=t.readVarInt();r.transactions=[];for(let e=0;e<o;++e){const e=n();r.transactions.push(e)}const s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}static fromHex(e){return i.fromBuffer(iK.from(e,"hex"))}static calculateTarget(e){const t=((4278190080&e)>>24)-3,r=8388607&e,n=iK.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}static calculateMerkleRoot(e,t){if(Uee([{getHash:Gee.Function}],e),0===e.length)throw r;if(t&&!o(e))throw n;const i=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();r>1;){for(var i=0,o=0;o<r;o+=2,++i){var s=n[o],a=o+1===r?s:n[o+1],u=iK.concat([s,a]);n[i]=t(u)}r=i}return n[0]}(e.map((e=>e.getHash(t))),hte.hash256);return t?hte.hash256(iK.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!o(this.transactions))return null;const e=this.transactions[0].outs.filter((e=>e.script.slice(0,6).equals(iK.from("6a24aa21a9ed","hex")))).map((e=>e.script.slice(6,38)));if(0===e.length)return null;const t=e[e.length-1];return t instanceof iK&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof iK&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){return(e=this.transactions)instanceof Array&&e.some((e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some((e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))));var e}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+Lte.encodingLength(this.transactions.length)+this.transactions.reduce(((e,r)=>e+r.byteLength(t)),0)}getHash(){return hte.hash256(this.toBuffer(!0))}getId(){return jte.reverseBuffer(this.getHash()).toString("hex")}getUTCDate(){const e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){const t=iK.allocUnsafe(this.byteLength(e)),r=new jte.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(Lte.encode(this.transactions.length,t,r.offset),r.offset+=Lte.encode.bytes,this.transactions.forEach((e=>{const n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}))),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){const e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){const e=jte.reverseBuffer(this.getHash()),t=i.calculateTarget(this.bits);return e.compare(t)<=0}__checkMerkleRoot(){if(!this.transactions)throw r;const e=i.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw r;if(!this.hasWitnessCommit())throw n;const e=i.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function o(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=i}));jH(Bte),Bte.Block;var Ute=DH((function(e,t){var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.GlobalTypes||(t.GlobalTypes={}))[r.UNSIGNED_TX=0]="UNSIGNED_TX",r[r.GLOBAL_XPUB=1]="GLOBAL_XPUB",t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(n=t.InputTypes||(t.InputTypes={}))[n.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",n[n.WITNESS_UTXO=1]="WITNESS_UTXO",n[n.PARTIAL_SIG=2]="PARTIAL_SIG",n[n.SIGHASH_TYPE=3]="SIGHASH_TYPE",n[n.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=6]="BIP32_DERIVATION",n[n.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",n[n.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",n[n.POR_COMMITMENT=9]="POR_COMMITMENT",t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment"],(i=t.OutputTypes||(t.OutputTypes={}))[i.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",i[i.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",i[i.BIP32_DERIVATION=2]="BIP32_DERIVATION",t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation"]}));jH(Ute),Ute.GlobalTypes,Ute.GLOBAL_TYPE_NAMES,Ute.InputTypes,Ute.INPUT_TYPE_NAMES,Ute.OutputTypes,Ute.OUTPUT_TYPE_NAMES;var Fte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");const t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(const t of(e=>[...Array(e).keys()])(e.value.length/4-1)){const n=e.value.readUInt32LE(4*t+4),i=!!(2147483648&n),o=2147483647&n;r.path+="/"+o.toString(10)+(i?"'":"")}return r},t.encode=function(e){const t=iK.from([Ute.GlobalTypes.GLOBAL_XPUB]),r=iK.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=iK.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,o),o+=4})),{key:r,value:i}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(e){const t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return FK(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&FK(r)&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)+$/)},t.canAddToArray=function(e,t,r){const n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.extendedPubkey.equals(t.extendedPubkey))).length)}}));jH(Fte),Fte.decode,Fte.encode,Fte.expected,Fte.check,Fte.canAddToArray;var zte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){return{key:iK.from([Ute.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}}));jH(zte),zte.encode;var Vte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:iK.from([Ute.InputTypes.FINAL_SCRIPTSIG]),value:e}},t.expected="Buffer",t.check=function(e){return FK(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}));jH(Vte),Vte.decode,Vte.encode,Vte.expected,Vte.check,Vte.canAdd;var Hte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:iK.from([Ute.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},t.expected="Buffer",t.check=function(e){return FK(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}));jH(Hte),Hte.decode,Hte.encode,Hte.expected,Hte.check,Hte.canAdd;var Kte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:iK.from([Ute.InputTypes.NON_WITNESS_UTXO]),value:e}},t.expected="Buffer",t.check=function(e){return FK(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}}));jH(Kte),Kte.decode,Kte.encode,Kte.expected,Kte.check,Kte.canAdd;var qte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(e){const t=iK.from([Ute.InputTypes.PARTIAL_SIG]);return{key:iK.concat([t,e.pubkey]),value:e.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(e){return FK(e.pubkey)&&FK(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!FK(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;const t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;const r=e[3+t+2];return!(r>33||r<1)&&e.length===3+t+2+r+2}(e.signature)},t.canAddToArray=function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}}));jH(qte),qte.decode,qte.encode,qte.expected,qte.check,qte.canAddToArray;var $te=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},t.encode=function(e){return{key:iK.from([Ute.InputTypes.POR_COMMITMENT]),value:iK.from(e,"utf8")}},t.expected="string",t.check=function(e){return"string"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}));jH($te),$te.decode,$te.encode,$te.expected,$te.check,$te.canAdd;var Wte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(e){const t=iK.from([Ute.InputTypes.SIGHASH_TYPE]),r=iK.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}},t.expected="number",t.check=function(e){return"number"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}));jH(Wte),Wte.decode,Wte.encode,Wte.expected,Wte.check,Wte.canAdd;var Gte=DH((function(e,t){function r(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function n(e){return r(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function e(t,i,o){if(r(t),i||(i=iK.allocUnsafe(n(t))),!FK(i))throw new TypeError("buffer must be a Buffer instance");return o||(o=0),t<253?(i.writeUInt8(t,o),Object.assign(e,{bytes:1})):t<=65535?(i.writeUInt8(253,o),i.writeUInt16LE(t,o+1),Object.assign(e,{bytes:3})):t<=4294967295?(i.writeUInt8(254,o),i.writeUInt32LE(t,o+1),Object.assign(e,{bytes:5})):(i.writeUInt8(255,o),i.writeUInt32LE(t>>>0,o+1),i.writeUInt32LE(t/4294967296|0,o+5),Object.assign(e,{bytes:9})),i},t.decode=function e(t,n){if(!FK(t))throw new TypeError("buffer must be a Buffer instance");n||(n=0);const i=t.readUInt8(n);if(i<253)return Object.assign(e,{bytes:1}),i;if(253===i)return Object.assign(e,{bytes:3}),t.readUInt16LE(n+1);if(254===i)return Object.assign(e,{bytes:5}),t.readUInt32LE(n+1);{Object.assign(e,{bytes:9});const i=t.readUInt32LE(n+1),o=4294967296*t.readUInt32LE(n+5)+i;return r(o),o}},t.encodingLength=n}));jH(Gte),Gte.encode,Gte.decode,Gte.encodingLength;var Jte=DH((function(e,t){function r(e){const t=e.key.length,r=e.value.length,n=Gte.encodingLength(t),i=Gte.encodingLength(r),o=iK.allocUnsafe(n+t+i+r);return Gte.encode(t,o,0),e.key.copy(o,n),Gte.encode(r,o,n+t),e.value.copy(o,n+t+i),o}function n(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}Object.defineProperty(t,"__esModule",{value:!0}),t.range=e=>[...Array(e).keys()],t.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.keyValsToBuffer=function(e){const t=e.map(r);return t.push(iK.from([0])),iK.concat(t)},t.keyValToBuffer=r,t.readUInt64LE=function(e,t){const r=e.readUInt32LE(t);let i=e.readUInt32LE(t+4);return i*=4294967296,n(i+r,9007199254740991),i+r},t.writeUInt64LE=function(e,t,r){return n(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}));jH(Jte),Jte.range,Jte.reverseBuffer,Jte.keyValsToBuffer,Jte.keyValToBuffer,Jte.readUInt64LE,Jte.writeUInt64LE;var Xte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==Ute.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));const t=Jte.readUInt64LE(e.value,0);let r=8;const n=Gte.decode(e.value,r);r+=Gte.encodingLength(n);const i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}},t.encode=function(e){const{script:t,value:r}=e,n=Gte.encodingLength(t.length),i=iK.allocUnsafe(8+n+t.length);return Jte.writeUInt64LE(i,r,0),Gte.encode(t.length,i,8),t.copy(i,8+n),{key:iK.from([Ute.InputTypes.WITNESS_UTXO]),value:i}},t.expected="{ script: Buffer; value: number; }",t.check=function(e){return FK(e.script)&&"number"==typeof e.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}}));jH(Xte),Xte.decode,Xte.encode,Xte.expected,Xte.check,Xte.canAdd;var Yte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+t.key.toString("hex"));if(34!==t.key.length&&66!==t.key.length||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");const r=t.key.slice(1),n={masterFingerprint:t.value.slice(0,4),pubkey:r,path:"m"};for(const e of(e=>[...Array(e).keys()])(t.value.length/4-1)){const r=t.value.readUInt32LE(4*e+4),i=!!(2147483648&r),o=2147483647&r;n.path+="/"+o.toString(10)+(i?"'":"")}return n},encode:function(t){const r=iK.from([e]),n=iK.concat([r,t.pubkey]),i=t.path.split("/"),o=iK.allocUnsafe(4*i.length);t.masterFingerprint.copy(o,0);let s=4;return i.slice(1).forEach((e=>{const t="'"===e.slice(-1);let r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),o.writeUInt32LE(r,s),s+=4})),{key:n,value:o}},check:function(e){return FK(e.pubkey)&&FK(e.masterFingerprint)&&"string"==typeof e.path&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){const n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((e=>e.pubkey.equals(t.pubkey))).length)}}}}));jH(Yte),Yte.makeConverter;var Zte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(e){return function(t){let r;if(e.includes(t.key[0])&&(r=t.key.slice(1),33!==r.length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}}));jH(Zte),Zte.makeChecker;var Qte=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:iK.from([e]),value:t}},check:function(e){return FK(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}));jH(Qte),Qte.makeConverter;var ere=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:iK.from([e]),value:t}},check:function(e){return FK(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}));jH(ere),ere.makeConverter;var tre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={unsignedTx:zte,globalXpub:Fte,checkPubkey:Zte.makeChecker([])};t.globals=r;const n={nonWitnessUtxo:Kte,partialSig:qte,sighashType:Wte,finalScriptSig:Vte,finalScriptWitness:Hte,porCommitment:$te,witnessUtxo:Xte,bip32Derivation:Yte.makeConverter(Ute.InputTypes.BIP32_DERIVATION),redeemScript:Qte.makeConverter(Ute.InputTypes.REDEEM_SCRIPT),witnessScript:ere.makeConverter(Ute.InputTypes.WITNESS_SCRIPT),checkPubkey:Zte.makeChecker([Ute.InputTypes.PARTIAL_SIG,Ute.InputTypes.BIP32_DERIVATION])};t.inputs=n;const i={bip32Derivation:Yte.makeConverter(Ute.OutputTypes.BIP32_DERIVATION),redeemScript:Qte.makeConverter(Ute.OutputTypes.REDEEM_SCRIPT),witnessScript:ere.makeConverter(Ute.OutputTypes.WITNESS_SCRIPT),checkPubkey:Zte.makeChecker([Ute.OutputTypes.BIP32_DERIVATION])};t.outputs=i}));jH(tre),tre.globals,tre.inputs,tre.outputs;var rre=DH((function(e,t){function r(e,t,r){if(!t.equals(iK.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function n(e,{globalMapKeyVals:t,inputKeyVals:n,outputKeyVals:i}){const o={unsignedTx:e};let s=0;for(const e of t)switch(e.key[0]){case Ute.GlobalTypes.UNSIGNED_TX:if(r("global",e.key,Ute.GlobalTypes.UNSIGNED_TX),s>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");s++;break;case Ute.GlobalTypes.GLOBAL_XPUB:void 0===o.globalXpub&&(o.globalXpub=[]),o.globalXpub.push(tre.globals.globalXpub.decode(e));break;default:o.unknownKeyVals||(o.unknownKeyVals=[]),o.unknownKeyVals.push(e)}const a=n.length,u=i.length,c=[],l=[];for(const e of Jte.range(a)){const t={};for(const i of n[e])switch(tre.inputs.checkPubkey(i),i.key[0]){case Ute.InputTypes.NON_WITNESS_UTXO:if(r("input",i.key,Ute.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=tre.inputs.nonWitnessUtxo.decode(i);break;case Ute.InputTypes.WITNESS_UTXO:if(r("input",i.key,Ute.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=tre.inputs.witnessUtxo.decode(i);break;case Ute.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(tre.inputs.partialSig.decode(i));break;case Ute.InputTypes.SIGHASH_TYPE:if(r("input",i.key,Ute.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=tre.inputs.sighashType.decode(i);break;case Ute.InputTypes.REDEEM_SCRIPT:if(r("input",i.key,Ute.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=tre.inputs.redeemScript.decode(i);break;case Ute.InputTypes.WITNESS_SCRIPT:if(r("input",i.key,Ute.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=tre.inputs.witnessScript.decode(i);break;case Ute.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(tre.inputs.bip32Derivation.decode(i));break;case Ute.InputTypes.FINAL_SCRIPTSIG:r("input",i.key,Ute.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=tre.inputs.finalScriptSig.decode(i);break;case Ute.InputTypes.FINAL_SCRIPTWITNESS:r("input",i.key,Ute.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=tre.inputs.finalScriptWitness.decode(i);break;case Ute.InputTypes.POR_COMMITMENT:r("input",i.key,Ute.InputTypes.POR_COMMITMENT),t.porCommitment=tre.inputs.porCommitment.decode(i);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(i)}c.push(t)}for(const e of Jte.range(u)){const t={};for(const n of i[e])switch(tre.outputs.checkPubkey(n),n.key[0]){case Ute.OutputTypes.REDEEM_SCRIPT:if(r("output",n.key,Ute.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=tre.outputs.redeemScript.decode(n);break;case Ute.OutputTypes.WITNESS_SCRIPT:if(r("output",n.key,Ute.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=tre.outputs.witnessScript.decode(n);break;case Ute.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(tre.outputs.bip32Derivation.decode(n));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(n)}l.push(t)}return{globalMap:o,inputs:c,outputs:l}}Object.defineProperty(t,"__esModule",{value:!0}),t.psbtFromBuffer=function(e,t){let r=0;function i(){const t=Gte.decode(e,r);r+=Gte.encodingLength(t);const n=e.slice(r,r+t);return r+=t,n}function o(){return{key:i(),value:i()}}function s(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");const t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){const t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){const t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");const a=[],u={};for(;!s();){const e=o(),t=e.key.toString("hex");if(u[t])throw new Error("Format Error: Keys must be unique for global keymap: key "+t);u[t]=1,a.push(e)}const c=a.filter((e=>e.key[0]===Ute.GlobalTypes.UNSIGNED_TX));if(1!==c.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");const l=t(c[0].value),{inputCount:h,outputCount:f}=l.getInputOutputCounts(),d=[],p=[];for(const e of Jte.range(h)){const t={},r=[];for(;!s();){const n=o(),i=n.key.toString("hex");if(t[i])throw new Error("Format Error: Keys must be unique for each input: input index "+e+" key "+i);t[i]=1,r.push(n)}d.push(r)}for(const e of Jte.range(f)){const t={},r=[];for(;!s();){const n=o(),i=n.key.toString("hex");if(t[i])throw new Error("Format Error: Keys must be unique for each output: output index "+e+" key "+i);t[i]=1,r.push(n)}p.push(r)}return n(l,{globalMapKeyVals:a,inputKeyVals:d,outputKeyVals:p})},t.checkKeyBuffer=r,t.psbtFromKeyVals=n}));jH(rre),rre.psbtFromBuffer,rre.checkKeyBuffer,rre.psbtFromKeyVals;var nre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.psbtToBuffer=function({globalMap:e,inputs:t,outputs:r}){const{globalKeyVals:n,inputKeyVals:o,outputKeyVals:s}=i({globalMap:e,inputs:t,outputs:r}),a=Jte.keyValsToBuffer(n),u=e=>0===e.length?[iK.from([0])]:e.map(Jte.keyValsToBuffer),c=u(o),l=u(s),h=iK.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),iK.concat([h,a].concat(c,l))};const r=(e,t)=>e.key.compare(t.key);function n(e,t){const n=new Set,i=Object.entries(e).reduce(((e,[r,i])=>{if("unknownKeyVals"===r)return e;const o=t[r];if(void 0===o)return e;const s=(Array.isArray(i)?i:[i]).map(o.encode);return s.map((e=>e.key.toString("hex"))).forEach((e=>{if(n.has(e))throw new Error("Serialize Error: Duplicate key: "+e);n.add(e)})),e.concat(s)}),[]),o=e.unknownKeyVals?e.unknownKeyVals.filter((e=>!n.has(e.key.toString("hex")))):[];return i.concat(o).sort(r)}function i({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:n(e,tre.globals),inputKeyVals:t.map((e=>n(e,tre.inputs))),outputKeyVals:r.map((e=>n(e,tre.outputs)))}}t.psbtToKeyVals=i}));jH(nre),nre.psbtToBuffer,nre.psbtToKeyVals;var ire=DH((function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(rre),r(nre)}));jH(ire);var ore=DH((function(e,t){function r(e,t,r){return n=>{if(e.has(n))return;const i=r.filter((e=>e.key.toString("hex")===n))[0];t.push(i),e.add(n)}}function n(e){return e.globalMap.unsignedTx}function i(e){const t=new Set;return e.forEach((e=>{const r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){const t=e[0],o=ire.psbtToKeyVals(t),s=e.slice(1);if(0===s.length)throw new Error("Combine: Nothing to combine");const a=n(t);if(void 0===a)throw new Error("Combine: Self missing transaction");const u=i(o.globalKeyVals),c=o.inputKeyVals.map(i),l=o.outputKeyVals.map(i);for(const e of s){const t=n(e);if(void 0===t||!t.toBuffer().equals(a.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");const s=ire.psbtToKeyVals(e);i(s.globalKeyVals).forEach(r(u,o.globalKeyVals,s.globalKeyVals)),s.inputKeyVals.map(i).forEach(((e,t)=>e.forEach(r(c[t],o.inputKeyVals[t],s.inputKeyVals[t])))),s.outputKeyVals.map(i).forEach(((e,t)=>e.forEach(r(l[t],o.outputKeyVals[t],s.outputKeyVals[t]))))}return ire.psbtFromKeyVals(a,{globalMapKeyVals:o.globalKeyVals,inputKeyVals:o.inputKeyVals,outputKeyVals:o.outputKeyVals})}}));jH(ore),ore.combine;var sre=DH((function(e,t){function r(e,t){const r=e[t];if(void 0===r)throw new Error(`No input #${t}`);return r}function n(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function i(e){return(t,r)=>{for(const i of Object.keys(t)){const o=t[i],{canAdd:s,canAddToArray:a,check:u,expected:c}=tre[e+"s"][i]||{},l=!!a;if(u)if(l){if(!Array.isArray(o)||r[i]&&!Array.isArray(r[i]))throw new Error(`Key type ${i} must be an array`);o.every(u)||n(e,i,c,o);const t=r[i]||[],s=new Set;if(!o.every((e=>a(t,e,s))))throw new Error("Can not add duplicate data to array");r[i]=t.concat(o)}else{if(u(o)||n(e,i,c,o),!s(r,o))throw new Error(`Can not add duplicate data to ${e}`);r[i]=o}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkForInput=r,t.checkForOutput=function(e,t){const r=e[t];if(void 0===r)throw new Error(`No output #${t}`);return r},t.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((t=>t.key.equals(e.key))).length)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)},t.getEnumLength=function(e){let t=0;return Object.keys(e).forEach((e=>{Number(isNaN(Number(e)))&&t++})),t},t.inputCheckUncleanFinalized=function(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){const e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw new Error(`Input #${e} has too much or too little data to clean`)},t.updateGlobal=i("global"),t.updateInput=i("input"),t.updateOutput=i("output"),t.addInputAttributes=function(e,n){const i=r(e,e.length-1);t.updateInput(n,i)},t.addOutputAttributes=function(e,n){const i=r(e,e.length-1);t.updateOutput(n,i)},t.defaultVersionSetter=function(e,t){if(!FK(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},t.defaultLocktimeSetter=function(e,t){if(!FK(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}));jH(sre),sre.checkForInput,sre.checkForOutput,sre.checkHasKey,sre.getEnumLength,sre.inputCheckUncleanFinalized,sre.updateGlobal,sre.updateInput,sre.updateOutput,sre.addInputAttributes,sre.addOutputAttributes,sre.defaultVersionSetter,sre.defaultLocktimeSetter;var are=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){const r=iK.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t){const r=iK.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t){const r=ire.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return ire.psbtToBuffer(this)}updateGlobal(e){return sre.updateGlobal(e,this.globalMap),this}updateInput(e,t){const r=sre.checkForInput(this.inputs,e);return sre.updateInput(t,r),this}updateOutput(e,t){const r=sre.checkForOutput(this.outputs,e);return sre.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return sre.checkHasKey(e,this.globalMap.unknownKeyVals,sre.getEnumLength(Ute.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){const r=sre.checkForInput(this.inputs,e);return sre.checkHasKey(t,r.unknownKeyVals,sre.getEnumLength(Ute.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){const r=sre.checkForOutput(this.outputs,e);return sre.checkHasKey(t,r.unknownKeyVals,sre.getEnumLength(Ute.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(r,e))),sre.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});const t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw new Error("unknownKeyVals must be an Array");return t.forEach((e=>this.addUnknownKeyValToInput(r,e))),sre.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){const t=sre.checkForInput(this.inputs,e);sre.inputCheckUncleanFinalized(e,t);for(const e of Object.keys(t))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(e)||delete t[e];return this}combine(...e){const t=ore.combine([this].concat(e));return Object.assign(this,t),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}}));jH(are),are.Psbt;var ure=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={network:$ee.bitcoin,maximumFeeRate:5e3};class n{constructor(e={},t=new are.Psbt(new o)){this.data=t,this.opts=Object.assign({},r,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);const n=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}static fromBase64(e,t={}){const r=iK.from(e,"base64");return this.fromBuffer(r,t)}static fromHex(e,t={}){const r=iK.from(e,"hex");return this.fromBuffer(r,t)}static fromBuffer(e,t={}){const r=are.Psbt.fromBuffer(e,i),o=new n(t,r);var s,a;return s=o.__CACHE.__TX,a=o.__CACHE,s.ins.forEach((e=>{b(a,e)})),o}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map((e=>({hash:jte.cloneBuffer(e.hash),index:e.index,sequence:e.sequence})))}get txOutputs(){return this.__CACHE.__TX.outs.map((e=>{let t;try{t=Pte.fromOutputScript(e.script,this.opts.network)}catch(e){}return{script:jte.cloneBuffer(e.script),value:e.value,address:t}}))}combine(...e){return this.data.combine(...e.map((e=>e.data))),this}clone(){const e=n.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){m(e),this.opts.maximumFeeRate=e}setVersion(e){m(e),y(this.data.inputs,"setVersion");const t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){m(e),y(this.data.inputs,"setLocktime");const t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){m(t),y(this.data.inputs,"setInputSequence");const r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach((e=>this.addInput(e))),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");y(this.data.inputs,"addInput"),e.witnessScript&&L(e.witnessScript);const t=this.__CACHE;this.data.addInput(e),b(t,t.__TX.ins[t.__TX.ins.length-1]);const r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&P(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach((e=>this.addOutput(e))),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");y(this.data.inputs,"addOutput");const{address:t}=e;if("string"==typeof t){const{network:r}=this.opts,n=Pte.toOutputScript(t,r);e=Object.assign(e,{script:n})}const r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(a))throw new Error("Not finalized");const t=this.__CACHE;if(e||function(e,t,r){const n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;const r=t.__TX.clone();return O(this.data.inputs,r,t,!0),r}getFeeRate(){return S("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return S("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return sre.checkForInput(this.data.inputs,0),B(this.data.inputs.length).forEach((e=>this.finalizeInput(e))),this}finalizeInput(e,t=E){const r=sre.checkForInput(this.data.inputs,e),{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=function(e,t,r){const n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){const o=C(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||f(i.script))&&(i.isSegwit=!0),i}(e,r,this.__CACHE);if(!n)throw new Error(`No script found for input #${e}`);!function(e){if(!e.sighashType||!e.partialSig)return;const{partialSig:t,sighashType:r}=e;t.forEach((e=>{const{hashType:t}=ste.signature.decode(e.signature);if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}(r);const{finalScriptSig:a,finalScriptWitness:u}=t(e,r,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}getInputType(e){const t=sre.checkForInput(this.data.inputs,e),r=R(M(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;const t=ste.decompile(e);if(!t)return;const r=t[t.length-1];if(!FK(r)||N(r)||(n=r,ste.isCanonicalScriptSignature(n)))return;var n;return ste.decompile(r)?r:void 0}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;const t=T(e),r=t[t.length-1];if(N(r))return;return ste.decompile(r)?r:void 0}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+D(r.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,r,n){const i=M(r,t,n),{meaningfulScript:o}=R(i,r,"input",t.redeemScript,t.witnessScript);return j(e,o)}(t,sre.checkForInput(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){const r=sre.checkForInput(this.data.inputs,e),n=g(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function(e,t,r,n){const i=n.__TX.outs[r].script,{meaningfulScript:o}=R(i,r,"output",t.redeemScript,t.witnessScript);return j(e,o)}(t,sre.checkForOutput(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){const r=sre.checkForOutput(this.data.outputs,e),n=g(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(){return sre.checkForInput(this.data.inputs,0),B(this.data.inputs.length).map((e=>this.validateSignaturesOfInput(e))).reduce(((e,t)=>!0===t&&e),!0)}validateSignaturesOfInput(e,t){const r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");const i=t?n.filter((e=>e.pubkey.equals(t))):n;if(i.length<1)throw new Error("No signatures for this pubkey");const o=[];let s,a,u;for(const t of i){const n=ste.signature.decode(t.signature),{hash:i,script:c}=u!==n.hashType?I(e,Object.assign({},r,{sighashType:n.hashType}),this.__CACHE,!0):{hash:s,script:a};u=n.hashType,s=i,a=c,v(t.pubkey,c,"verify");const l=Cte.fromPublicKey(t.pubkey);o.push(l.verify(i,n.signature))}return o.every((e=>!0===e))}signAllInputsHD(e,t=[Dte.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");const r=[];for(const n of B(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[Dte.Transaction.SIGHASH_ALL]){return new Promise(((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(new Error("Need HDSigner to sign input"));const i=[],o=[];for(const r of B(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInputHD(e,t,r=[Dte.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return A(e,this.data.inputs,t).forEach((t=>this.signInput(e,t,r))),this}signInputHDAsync(e,t,r=[Dte.Transaction.SIGHASH_ALL]){return new Promise(((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));const o=A(e,this.data.inputs,t).map((t=>this.signInputAsync(e,t,r)));return Promise.all(o).then((()=>{n()})).catch(i)}))}signAllInputs(e,t=[Dte.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");const r=[];for(const n of B(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every((e=>!1===e)))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,t=[Dte.Transaction.SIGHASH_ALL]){return new Promise(((r,n)=>{if(!e||!e.publicKey)return n(new Error("Need Signer to sign input"));const i=[],o=[];for(const[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then((()=>{i.push(!0)}),(()=>{i.push(!1)})));return Promise.all(o).then((()=>{if(i.every((e=>!1===e)))return n(new Error("No inputs were signed"));r()}))}))}signInput(e,t,r=[Dte.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=k(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:ste.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}signInputAsync(e,t,r=[Dte.Transaction.SIGHASH_ALL]){return Promise.resolve().then((()=>{if(!t||!t.publicKey)throw new Error("Need Signer to sign input");const{hash:n,sighashType:i}=k(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then((r=>{const n=[{pubkey:t.publicKey,signature:ste.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})}))}))}toBuffer(){return s(this.__CACHE),this.data.toBuffer()}toHex(){return s(this.__CACHE),this.data.toHex()}toBase64(){return s(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&L(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&P(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){return this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}t.Psbt=n;const i=e=>new o(e);class o{constructor(e=iK.from([2,0,0,0,0,0,0,0,0,0])){this.tx=Dte.Transaction.fromBuffer(e),function(e){if(!e.ins.every((e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length)))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!FK(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");const t="string"==typeof e.hash?jte.reverseBuffer(iK.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!FK(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function s(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function a(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function u(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}const c=u(Tte.p2ms),l=u(Tte.p2pk),h=u(Tte.p2pkh),f=u(Tte.p2wpkh),d=u(Tte.p2wsh),p=u(Tte.p2sh);function g(e){return t=>!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}function m(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function y(e,t){e.forEach((e=>{let r=!1,n=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;n=function(e){const t=e.finalScriptSig&&ste.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&ste.decompile(e.finalScriptWitness)||[];return t.concat(r).filter((e=>FK(e)&&ste.isCanonicalScriptSignature(e))).map((e=>({signature:e})))}(e)}else n=e.partialSig;if(n.forEach((e=>{const{hashType:n}=ste.signature.decode(e.signature),i=[];switch(n&Dte.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case Dte.Transaction.SIGHASH_ALL:break;case Dte.Transaction.SIGHASH_SINGLE:case Dte.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(t)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function v(e,t,r){if(!j(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function b(e,t){const r=jte.reverseBuffer(iK.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function w(e,t){return(r,n,i,o)=>{const s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}const _=w(Tte.p2sh,"Redeem script"),x=w(Tte.p2wsh,"Witness script");function S(e,t,r,n){if(!r.every(a))throw new Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let i,o=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),O(r,i,n,o),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function E(e,t,r,n,i,o){D(r);throw new Error(`Can not finalize input #${e}`)}function k(e,t,r,n,i){const o=sre.checkForInput(e,t),{hash:s,sighashType:a,script:u}=I(t,o,n,!1,i);return v(r,u,"sign"),{hash:s,sighashType:a}}function I(e,t,r,n,i){const o=r.__TX,s=t.sighashType||Dte.Transaction.SIGHASH_ALL;if(i&&i.indexOf(s)<0){const e=function(e){let t=e&Dte.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case Dte.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case Dte.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case Dte.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(s);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${e}`)}let a,u;if(t.nonWitnessUtxo){const n=C(r,t,e),i=o.ins[e].hash,s=n.getHash();if(!i.equals(s))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);const a=o.ins[e].index;u=n.outs[a]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");u=t.witnessUtxo}const{meaningfulScript:c,type:l}=R(u.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(l)>=0)a=o.hashForWitnessV0(e,c,u.value,s);else if(f(c)){const t=Tte.p2pkh({hash:c.slice(2)}).output;a=o.hashForWitnessV0(e,t,u.value,s)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${c.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=o.hashForSignature(e,c,s)}return{script:c,sighashType:s,hash:a}}function A(e,t,r){const n=sre.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");const i=n.bip32Derivation.map((e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0)).filter((e=>!!e));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((e=>{const t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function T(e){let t=0;function r(){const r=Gte.decode(e,t);return t+=Gte.decode.bytes,r}function n(){return function(r){return t+=r,e.slice(t-r,t)}(r())}return function(){const e=r(),t=[];for(let r=0;r<e;r++)t.push(n());return t}()}function P(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;const n=Dte.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;const i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){const e=i.__NON_WITNESS_UTXO_BUF_CACHE[o],t=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(void 0!==e)return e;{const e=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e,e}},set(e){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=e}})}function O(e,t,r,n){let i=0;e.forEach(((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=T(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){const n=C(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}}));const o=t.outs.reduce(((e,t)=>e+t.value),0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");const a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function C(e,t,r){const n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||P(e,t,r),n[r]}function M(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo)return C(r,t,e).outs[r.__TX.ins[e].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function N(e){return 33===e.length&&ste.isCanonicalPubKey(e)}function R(e,t,r,n,i){const o=p(e),s=o&&n&&d(n),a=d(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let u;return s?(u=i,_(t,e,n,r),x(t,n,i,r),L(u)):a?(u=i,x(t,e,i,r),L(u)):o?(u=n,_(t,e,n,r)):u=e,{meaningfulScript:u,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function L(e){if(f(e)||p(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function j(e,t){const r=hte.hash160(e),n=ste.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((t=>"number"!=typeof t&&(t.equals(e)||t.equals(r))))}function D(e){return f(e)?"witnesspubkeyhash":h(e)?"pubkeyhash":c(e)?"multisig":l(e)?"pubkey":"nonstandard"}function B(e){return[...Array(e).keys()]}}));jH(ure),ure.Psbt;var cre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){return e===r.OPS.OP_0||ste.isCanonicalScriptSignature(e)}function i(e,t){const i=ste.decompile(e);return!(i.length<2)&&i[0]===r.OPS.OP_0&&(t?i.slice(1).every(n):i.slice(1).every(ste.isCanonicalScriptSignature))}t.check=i,i.toJSON=()=>"multisig input"}));jH(cre),cre.check;var lre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste,n=r.OPS.OP_RESERVED;function i(e,t){const i=ste.decompile(e);if(i.length<4)return!1;if(i[i.length-1]!==r.OPS.OP_CHECKMULTISIG)return!1;if(!Gee.Number(i[0]))return!1;if(!Gee.Number(i[i.length-2]))return!1;const o=i[0]-n,s=i[i.length-2]-n;return!(o<=0)&&(!(s>16)&&(!(o>s)&&(s===i.length-3&&(!!t||i.slice(1,-2).every(ste.isCanonicalPubKey)))))}t.check=i,i.toJSON=()=>"multi-sig output"}));jH(lre),lre.check;var hre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=cre,t.output=lre}));jH(hre),hre.input,hre.output;var fre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste.OPS;function n(e){const t=ste.compile(e);return t.length>1&&t[0]===r.OP_RETURN}t.check=n,n.toJSON=()=>"null data output";const i={check:n};t.output=i}));jH(fre),fre.check,fre.output;var dre=DH((function(e,t){function r(e){const t=ste.decompile(e);return 1===t.length&&ste.isCanonicalScriptSignature(t[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"pubKey input"}));jH(dre),dre.check;var pre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=ste.decompile(e);return 2===t.length&&ste.isCanonicalPubKey(t[0])&&t[1]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=()=>"pubKey output"}));jH(pre),pre.check;var gre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=dre,t.output=pre}));jH(gre),gre.input,gre.output;var mre=DH((function(e,t){function r(e){const t=ste.decompile(e);return 2===t.length&&ste.isCanonicalScriptSignature(t[0])&&ste.isCanonicalPubKey(t[1])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"pubKeyHash input"}));jH(mre),mre.check;var yre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=ste.compile(e);return 25===t.length&&t[0]===r.OPS.OP_DUP&&t[1]===r.OPS.OP_HASH160&&20===t[2]&&t[23]===r.OPS.OP_EQUALVERIFY&&t[24]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=()=>"pubKeyHash output"}));jH(yre),yre.check;var vre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=mre,t.output=yre}));jH(vre),vre.input,vre.output;var bre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=ste.compile(e);return 22===t.length&&t[0]===r.OPS.OP_0&&20===t[1]}t.check=n,n.toJSON=()=>"Witness pubKeyHash output"}));jH(bre),bre.check;var wre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=ste.compile(e);return 34===t.length&&t[0]===r.OPS.OP_0&&32===t[1]}t.check=n,n.toJSON=()=>"Witness scriptHash output"}));jH(wre),wre.check;var _re=DH((function(e,t){function r(e,t){const r=ste.decompile(e);if(r.length<1)return!1;const n=r[r.length-1];if(!FK(n))return!1;const i=ste.decompile(ste.compile(r.slice(0,-1))),o=ste.decompile(n);return!!o&&!!ste.isPushOnly(i)&&(1===r.length?wre.check(o)||bre.check(o):!(!vre.input.check(i)||!vre.output.check(o))||!(!hre.input.check(i,t)||!hre.output.check(o))||!(!gre.input.check(i)||!gre.output.check(o)))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"scriptHash input"}));jH(_re),_re.check;var xre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste;function n(e){const t=ste.compile(e);return 23===t.length&&t[0]===r.OPS.OP_HASH160&&20===t[1]&&t[22]===r.OPS.OP_EQUAL}t.check=n,n.toJSON=()=>"scriptHash output"}));jH(xre),xre.check;var Sre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=_re,t.output=xre}));jH(Sre),Sre.input,Sre.output;var Ere=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste,n=iK.from("aa21a9ed","hex");function i(e){const t=ste.compile(e);return t.length>37&&t[0]===r.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(n)}t.check=i,i.toJSON=()=>"Witness commitment output",t.encode=function(e){Uee(Gee.Hash256bit,e);const t=iK.allocUnsafe(36);return n.copy(t,0),e.copy(t,4),ste.compile([r.OPS.OP_RETURN,t])},t.decode=function(e){return Uee(i,e),ste.decompile(e)[1].slice(4,36)}}));jH(Ere),Ere.check,Ere.encode,Ere.decode;var kre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.output=Ere}));jH(kre),kre.output;var Ire=DH((function(e,t){function r(e){const t=ste.decompile(e);return 2===t.length&&ste.isCanonicalScriptSignature(t[0])&&(r=t[1],ste.isCanonicalPubKey(r)&&33===r.length);var r}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"witnessPubKeyHash input"}));jH(Ire),Ire.check;var Are=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Ire,t.output=bre}));jH(Are),Are.input,Are.output;var Tre=DH((function(e,t){function r(e,t){if(Uee(Uee.Array,e),e.length<1)return!1;const r=e[e.length-1];if(!FK(r))return!1;const n=ste.decompile(r);if(!n||0===n.length)return!1;const i=ste.compile(e.slice(0,-1));return!(!vre.input.check(i)||!vre.output.check(n))||!(!hre.input.check(i,t)||!hre.output.check(n))||!(!gre.input.check(i)||!gre.output.check(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=()=>"witnessScriptHash input"}));jH(Tre),Tre.check;var Pre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Tre,t.output=wre}));jH(Pre),Pre.input,Pre.output;var Ore=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=r,t.output=function(e){if(Are.output.check(e))return r.P2WPKH;if(Pre.output.check(e))return r.P2WSH;if(vre.output.check(e))return r.P2PKH;if(Sre.output.check(e))return r.P2SH;const t=ste.decompile(e);if(!t)throw new TypeError("Invalid script");return hre.output.check(t)?r.P2MS:gre.output.check(t)?r.P2PK:kre.output.check(t)?r.WITNESS_COMMITMENT:fre.output.check(t)?r.NULLDATA:r.NONSTANDARD},t.input=function(e,t){const n=ste.decompile(e);if(!n)throw new TypeError("Invalid script");return vre.input.check(n)?r.P2PKH:Sre.input.check(n,t)?r.P2SH:hre.input.check(n,t)?r.P2MS:gre.input.check(n)?r.P2PK:r.NONSTANDARD},t.witness=function(e,t){const n=ste.decompile(e);if(!n)throw new TypeError("Invalid script");return Are.input.check(n)?r.P2WPKH:Pre.input.check(n,t)?r.P2WSH:r.NONSTANDARD}}));jH(Ore),Ore.types,Ore.output,Ore.input,Ore.witness;var Cre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=ste,n=Ore.types,i=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function o(e,t,r){try{Uee(e,t)}catch(e){throw new Error(r)}}class s{constructor(e=$ee.bitcoin,t=2500){this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new Dte.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}static fromTransaction(e,t){const r=new s(t);return r.setVersion(e.version),r.setLockTime(e.locktime),e.outs.forEach((e=>{r.addOutput(e.script,e.value)})),e.ins.forEach((e=>{r.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),r.__INPUTS.forEach(((t,r)=>{!function(e,t,r){if(e.redeemScriptType!==n.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;const i=e.signatures.concat();e.signatures=e.pubkeys.map((n=>{const o=Cte.fromPublicKey(n);let s;return i.some(((n,a)=>{if(!n)return!1;const u=ste.signature.decode(n),c=t.hashForSignature(r,e.redeemScript,u.hashType);return!!o.verify(c,u.signature)&&(i[a]=void 0,s=n,!0)})),s}))}(t,e,r)})),r}setLowR(e){return Uee(Uee.maybe(Uee.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}setLockTime(e){if(Uee(Gee.UInt32,e),this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>void 0!==e)))))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}setVersion(e){Uee(Gee.UInt32,e),this.__TX.version=e}addInput(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");let i;if("string"==typeof(o=e)||o instanceof String)e=jte.reverseBuffer(iK.from(e,"hex"));else if(function(e){return e instanceof Dte.Transaction}(e)){const r=e.outs[t];n=r.script,i=r.value,e=e.getHash(!1)}var o;return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}addOutput(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=Pte.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}build(){return this.__build(!1)}buildIncomplete(){return this.__build(!0)}sign(e,t,r,s,a,c){!function({input:e,ourPubKey:t,keyPair:r,signatureHash:n,hashType:i,useLowR:o}){let s=!1;for(const[a,u]of e.pubkeys.entries()){if(!t.equals(u))continue;if(e.signatures[a])throw new Error("Signature already exists");if(33!==t.length&&e.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");const c=r.sign(n,o);e.signatures[a]=ste.signature.encode(c,i),s=!0}if(!s)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,s,a,c,h,f,d,p,g){let m;if("number"==typeof a)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),m=a;else{if("object"!=typeof a)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!i.has(t.prevOutScriptType))throw new TypeError(`Unknown prevOutScriptType "${t.prevOutScriptType}"`);o(Uee.Number,t.vin,"sign must include vin parameter as Number (input index)"),o(Gee.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),o(Uee.maybe(Uee.Number),t.hashType,"sign hashType parameter must be a number");const r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2pkh: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),o(Uee.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError(`input #${t.vin} is not of type p2pk: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),o(Uee.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError(`input #${t.vin} is not of type p2wpkh: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),o(Gee.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError(`input #${t.vin} is not of type p2ms: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),o(Uee.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type p2sh-p2wpkh: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.Buffer,t.redeemScript,`${n} requires redeemScript`),o(Gee.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);o(Uee.value(void 0),t.witnessScript,`${n} requires NO witnessScript`),o(Uee.Buffer,t.redeemScript,`${n} requires redeemScript`),o(Uee.value(void 0),t.witnessValue,`${n} requires NO witnessValue`);break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);o(Uee.Buffer,t.witnessScript,`${n} requires witnessScript`),o(Uee.value(void 0),t.redeemScript,`${n} requires NO redeemScript`),o(Gee.Satoshi,t.witnessValue,`${n} requires witnessValue`);break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError(`input #${t.vin} is not of type ${n}: ${r}`);o(Uee.Buffer,t.witnessScript,`${n} requires witnessScript`),o(Uee.Buffer,t.redeemScript,`${n} requires witnessScript`),o(Gee.Satoshi,t.witnessValue,`${n} requires witnessScript`)}}(t,a),({vin:m,keyPair:c,redeemScript:h,hashType:f,witnessValue:d,witnessScript:p}=a)}if(void 0===c)throw new Error("sign requires keypair");if(c.network&&c.network!==e)throw new TypeError("Inconsistent network");if(!t[m])throw new Error("No input at index: "+m);if(r(f=f||Dte.Transaction.SIGHASH_ALL))throw new Error("Transaction needs outputs");const y=t[m];if(void 0!==y.redeemScript&&h&&!y.redeemScript.equals(h))throw new Error("Inconsistent redeemScript");const v=c.publicKey||c.getPublicKey&&c.getPublicKey();if(!l(y)){if(void 0!==d){if(void 0!==y.value&&y.value!==d)throw new Error("Input did not match witnessValue");Uee(Gee.Satoshi,d),y.value=d}if(!l(y)){const e=function(e,t,r,i){if(r&&i){const o=Tte.p2wsh({redeem:{output:i}}),s=Tte.p2wsh({output:r}),a=Tte.p2sh({redeem:{output:r}}),c=Tte.p2sh({redeem:o});if(!o.hash.equals(s.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!a.hash.equals(c.hash))throw new Error("Redeem script inconsistent with prevOutScript");const l=u(o.redeem.output,t);if(!l.pubkeys)throw new Error(l.type+" not supported as witnessScript ("+ste.toASM(i)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(l.signatures=e.signatures);const h=i;if(l.type===n.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:n.P2WSH,witnessScript:i,witnessScriptType:l.type,prevOutType:n.P2SH,prevOutScript:a.output,hasWitness:!0,signScript:h,signType:l.type,pubkeys:l.pubkeys,signatures:l.signatures,maxSignatures:l.maxSignatures}}if(r){const i=Tte.p2sh({redeem:{output:r}});if(e.prevOutScript){let t;try{t=Tte.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!i.hash.equals(t.hash))throw new Error("Redeem script inconsistent with prevOutScript")}const o=u(i.redeem.output,t);if(!o.pubkeys)throw new Error(o.type+" not supported as redeemScript ("+ste.toASM(r)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(o.signatures=e.signatures);let s=r;return o.type===n.P2WPKH&&(s=Tte.p2pkh({pubkey:o.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:o.type,prevOutType:n.P2SH,prevOutScript:i.output,hasWitness:o.type===n.P2WPKH,signScript:s,signType:o.type,pubkeys:o.pubkeys,signatures:o.signatures,maxSignatures:o.maxSignatures}}if(i){const r=Tte.p2wsh({redeem:{output:i}});if(e.prevOutScript){const t=Tte.p2wsh({output:e.prevOutScript});if(!r.hash.equals(t.hash))throw new Error("Witness script inconsistent with prevOutScript")}const o=u(r.redeem.output,t);if(!o.pubkeys)throw new Error(o.type+" not supported as witnessScript ("+ste.toASM(i)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(o.signatures=e.signatures);const s=i;if(o.type===n.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:i,witnessScriptType:o.type,prevOutType:n.P2WSH,prevOutScript:r.output,hasWitness:!0,signScript:s,signType:o.type,pubkeys:o.pubkeys,signatures:o.signatures,maxSignatures:o.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===n.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===n.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");const r=u(e.prevOutScript,t);if(!r.pubkeys)throw new Error(r.type+" not supported ("+ste.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((e=>void 0!==e))&&(r.signatures=e.signatures);let i=e.prevOutScript;return r.type===n.P2WPKH&&(i=Tte.p2pkh({pubkey:r.pubkeys[0]}).output),{prevOutType:r.type,prevOutScript:e.prevOutScript,hasWitness:r.type===n.P2WPKH,signScript:i,signType:r.type,pubkeys:r.pubkeys,signatures:r.signatures,maxSignatures:r.maxSignatures}}const o=Tte.p2pkh({pubkey:t}).output;return{prevOutType:n.P2PKH,prevOutScript:o,hasWitness:!1,signScript:o,signType:n.P2PKH,pubkeys:[t],signatures:[void 0]}}(y,v,h,p);Object.assign(y,e)}if(!l(y))throw Error(y.prevOutType+" not supported")}let b;return b=y.hasWitness?s.hashForWitnessV0(m,y.signScript,y.value,f):s.hashForSignature(m,y.signScript,f),{input:y,ourPubKey:v,keyPair:c,signatureHash:b,hashType:f,useLowR:!!g}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,s,a,c,this.__USE_LOW_R))}__addInputUnsafe(e,t,r){if(Dte.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");const n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);let i={};if(void 0!==r.script&&(i=a(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){let e;if(!i.pubkeys&&!i.signatures){const t=u(r.prevOutScript);t.pubkeys&&(i.pubkeys=t.pubkeys,i.signatures=t.signatures),e=t.type}i.prevOutScript=r.prevOutScript,i.prevOutType=e||Ore.output(r.prevOutScript)}const o=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[o]=i,this.__PREV_TX_SET[n]=!0,o}__build(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}const t=this.__TX.clone();if(this.__INPUTS.forEach(((r,i)=>{if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");const o=c(r.prevOutType,r,e);if(o)t.setInputScript(i,o.input),t.setWitness(i,o.witness);else{if(!e&&r.prevOutType===n.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}__canModifyInputs(){return this.__INPUTS.every((e=>!e.signatures||e.signatures.every((e=>!e||0!=(h(e)&Dte.Transaction.SIGHASH_ANYONECANPAY)))))}__needsOutputs(e){return e===Dte.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((e=>!!e.signatures&&e.signatures.some((e=>!!e&&!(h(e)&Dte.Transaction.SIGHASH_NONE)))))}__canModifyOutputs(){const e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((r=>void 0===r.signatures||r.signatures.every((r=>{if(!r)return!0;const n=31&h(r);return n===Dte.Transaction.SIGHASH_NONE||n===Dte.Transaction.SIGHASH_SINGLE&&e<=t}))))}__overMaximumFees(e){return(this.__INPUTS.reduce(((e,t)=>e+(t.value>>>0)),0)-this.__TX.outs.reduce(((e,t)=>e+t.value),0))/e>this.maximumFeeRate}}function a(e,t,r,i){if(0===e.length&&0===t.length)return{};if(!r){let i=Ore.input(e,!0),o=Ore.witness(t,!0);i===n.NONSTANDARD&&(i=void 0),o===n.NONSTANDARD&&(o=void 0),r=i||o}switch(r){case n.P2WPKH:{const{output:e,pubkey:r,signature:i}=Tte.p2wpkh({witness:t});return{prevOutScript:e,prevOutType:n.P2WPKH,pubkeys:[r],signatures:[i]}}case n.P2PKH:{const{output:t,pubkey:r,signature:i}=Tte.p2pkh({input:e});return{prevOutScript:t,prevOutType:n.P2PKH,pubkeys:[r],signatures:[i]}}case n.P2PK:{const{signature:t}=Tte.p2pk({input:e});return{prevOutType:n.P2PK,pubkeys:[void 0],signatures:[t]}}case n.P2MS:{const{m:t,pubkeys:r,signatures:o}=Tte.p2ms({input:e,output:i},{allowIncomplete:!0});return{prevOutType:n.P2MS,pubkeys:r,signatures:o,maxSignatures:t}}}if(r===n.P2SH){const{output:r,redeem:i}=Tte.p2sh({input:e,witness:t}),o=Ore.output(i.output),s=a(i.input,i.witness,o,i.output);return s.prevOutType?{prevOutScript:r,prevOutType:n.P2SH,redeemScript:i.output,redeemScriptType:s.prevOutType,witnessScript:s.witnessScript,witnessScriptType:s.witnessScriptType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}if(r===n.P2WSH){const{output:r,redeem:i}=Tte.p2wsh({input:e,witness:t}),o=Ore.output(i.output);let s;return s=o===n.P2WPKH?a(i.input,i.witness,o):a(ste.compile(i.witness),[],o,i.output),s.prevOutType?{prevOutScript:r,prevOutType:n.P2WSH,witnessScript:i.output,witnessScriptType:s.prevOutType,pubkeys:s.pubkeys,signatures:s.signatures}:{}}return{prevOutType:n.NONSTANDARD,prevOutScript:e}}function u(e,t){Uee(Gee.Buffer,e);const r=Ore.output(e);switch(r){case n.P2PKH:{if(!t)return{type:r};const n=Tte.p2pkh({output:e}).hash,i=hte.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case n.P2WPKH:{if(!t)return{type:r};const n=Tte.p2wpkh({output:e}).hash,i=hte.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r}}case n.P2PK:return{type:r,pubkeys:[Tte.p2pk({output:e}).pubkey],signatures:[void 0]};case n.P2MS:{const t=Tte.p2ms({output:e});return{type:r,pubkeys:t.pubkeys,signatures:t.pubkeys.map((()=>{})),maxSignatures:t.m}}}return{type:r}}function c(e,t,i){const o=t.pubkeys||[];let s=t.signatures||[];switch(e){case n.P2PKH:if(0===o.length)break;if(0===s.length)break;return Tte.p2pkh({pubkey:o[0],signature:s[0]});case n.P2WPKH:if(0===o.length)break;if(0===s.length)break;return Tte.p2wpkh({pubkey:o[0],signature:s[0]});case n.P2PK:if(0===o.length)break;if(0===s.length)break;return Tte.p2pk({signature:s[0]});case n.P2MS:{const e=t.maxSignatures;s=i?s.map((e=>e||r.OPS.OP_0)):s.filter((e=>e));const n=!i||e===s.length;return Tte.p2ms({m:e,pubkeys:o,signatures:s},{allowIncomplete:i,validate:n})}case n.P2SH:{const e=c(t.redeemScriptType,t,i);if(!e)return;return Tte.p2sh({redeem:{output:e.output||t.redeemScript,input:e.input,witness:e.witness}})}case n.P2WSH:{const e=c(t.witnessScriptType,t,i);if(!e)return;return Tte.p2wsh({redeem:{output:t.witnessScript,input:e.input,witness:e.witness}})}}}function l(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function h(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=s}));jH(Cre),Cre.TransactionBuilder;var Mre=DH((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bip32=qee,t.address=Pte,t.crypto=hte,t.ECPair=Cte,t.networks=$ee,t.payments=Tte,t.script=ste,t.Block=Bte.Block,t.Psbt=ure.Psbt;var r=ste;t.opcodes=r.OPS,t.Transaction=Dte.Transaction,t.TransactionBuilder=Cre.TransactionBuilder}));jH(Mre),Mre.bitcoin,Mre.bip32,Mre.address,Mre.crypto,Mre.ECPair,Mre.networks,Mre.payments,Mre.script,Mre.Block,Mre.Psbt,Mre.opcodes,Mre.Transaction,Mre.TransactionBuilder;const Nre=qW("Verifier");class Rre{constructor({certificateJson:e,chain:t,expires:r,id:n,issuer:i,receipt:o,revocationKey:s,transactionId:a,version:u,explorerAPIs:c}){this.chain=t,this.expires=r,this.id=n,this.issuer=i,this.receipt=o,this.revocationKey=s,this.version=u,this.transactionId=a,this.explorerAPIs=c;let l=e.document;l||(l=this._retrieveDocumentBeforeIssuance(e)),this.documentToVerify=Object.assign({},l),this._stepsStatuses=[]}verify(e=(()=>{})){return aH(this,void 0,void 0,(function*(){if(this._stepCallback=e,this.version===hH.V1_1)throw new NH("","Verification of 1.1 certificates is not supported by this component. See the python cert-verifier for legacy verification");IG.chains.isMockChain(this.chain)?yield this._verifyV2Mock():yield this._verifyMain();const t=this._stepsStatuses.find((e=>"failure"===e.status));return t?this._failed(t):this._succeed()}))}_getRevocationListUrl(e){var t;return(null===(t=this.issuer)||void 0===t?void 0:t.revocationList)?this.issuer.revocationList:e.revocationList}_doAction(e,t){return aH(this,void 0,void 0,(function*(){if(this._isFailing())return;let r;e&&(r=IG.i18n.getText("subSteps",`${e}LabelPending`),Nre(r),this._updateStatusCallback(e,r,"starting"));try{const n=yield t();return e&&(this._updateStatusCallback(e,r,"success"),this._stepsStatuses.push({step:e,label:r,status:"success"})),n}catch(t){e&&(this._updateStatusCallback(e,r,"failure",t.message),this._stepsStatuses.push({code:e,label:r,status:"failure",errorMessage:t.message}))}}))}_stepCallback(e){}_verifyMain(){return aH(this,void 0,void 0,(function*(){yield this.getTransactionId(),yield this.computeLocalHash(),yield this.fetchRemoteHash(),yield this.getIssuerProfile(),yield this.parseIssuerKeys(),yield this.compareHashes(),yield this.checkMerkleRoot(),yield this.checkReceipt(),yield this.checkRevokedStatus(),yield this.checkAuthenticity(),yield this.checkExpiresDate()}))}_verifyV2Mock(){return aH(this,void 0,void 0,(function*(){yield this.computeLocalHash(),yield this.compareHashes(),yield this.checkReceipt(),yield this.checkExpiresDate()}))}getTransactionId(){return aH(this,void 0,void 0,(function*(){yield this._doAction("getTransactionId",(()=>function(e){if("string"==typeof e&&e.length>0)return e;throw new NH("getTransactionId",AH("errors","isTransactionIdValid"))}(this.transactionId)))}))}computeLocalHash(){return aH(this,void 0,void 0,(function*(){this.localHash=yield this._doAction("computeLocalHash",(()=>aH(this,void 0,void 0,(function*(){return yield function(e,t){return aH(this,void 0,void 0,(function*(){let r=e["@context"];const n=e;!function(e){return e===lH.V1_1||e===lH.V1_2}(t)&&(r.find((e=>e===Object(e)&&"@vocab"in e))?r=null:r.push({"@vocab":"http://fallback.org/"}));const i="undefined"!=typeof window&&void 0!==window.XMLHttpRequest?X1.documentLoaders.xhr():X1.documentLoaders.node();X1.documentLoader=function(e,t){return e in SH?t(null,{contextUrl:null,document:SH[e],documentUrl:e}):i(e,t)};const o={algorithm:"URDNA2015",format:"application/nquads"};return r&&(o.expandContext=r),new Promise(((e,t)=>{X1.normalize(n,o,((r,n)=>{if(r)console.error(r),t(new NH("computeLocalHash",AH("errors","failedJsonLdNormalization")));else{const r=function(e){const t=/<http:\/\/fallback\.org\/(.*)>/.exec(e);if(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r]);return e}return null}(n);r?t(new NH("computeLocalHash",`${AH("errors","foundUnmappedFields")}: ${r.join(", ")}`)):e(Q1(function(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(n)))}}))}))}))}(this.documentToVerify,this.version)}))))}))}fetchRemoteHash(){return aH(this,void 0,void 0,(function*(){this.txData=yield this._doAction("fetchRemoteHash",(()=>aH(this,void 0,void 0,(function*(){return yield IG.verifier.lookForTx({transactionId:this.transactionId,chain:this.chain.code,explorerAPIs:this.explorerAPIs})}))))}))}getIssuerProfile(){return aH(this,void 0,void 0,(function*(){this.issuer=yield this._doAction("getIssuerProfile",(()=>aH(this,void 0,void 0,(function*(){return yield IG.verifier.getIssuerProfile(this.issuer)}))))}))}parseIssuerKeys(){return aH(this,void 0,void 0,(function*(){this.issuerPublicKeyList=yield this._doAction("parseIssuerKeys",(()=>IG.verifier.parseIssuerKeys(this.issuer)))}))}compareHashes(){return aH(this,void 0,void 0,(function*(){yield this._doAction("compareHashes",(()=>{!function(e,t){if(e!==t)throw new NH("compareHashes",AH("errors","ensureHashesEqual"))}(this.localHash,this.receipt.targetHash)}))}))}checkMerkleRoot(){return aH(this,void 0,void 0,(function*(){yield this._doAction("checkMerkleRoot",(()=>function(e,t){if(e!==t)throw new NH("checkMerkleRoot",AH("errors","ensureMerkleRootEqual"));return!0}(this.receipt.merkleRoot,this.txData.remoteHash)))}))}checkReceipt(){return aH(this,void 0,void 0,(function*(){yield this._doAction("checkReceipt",(()=>function(e){let t=e.targetHash;const r=e.merkleRoot;try{const r=e.proof||e.path;if(r)for(const e in r){const n=r[e];let i;if(void 0!==n.left)i=e2(`${n.left}${t}`),t=Q1(i);else{if(void 0===n.right)throw new NH("checkReceipt","Trigger catch error.");i=e2(`${t}${n.right}`),t=Q1(i)}}}catch(e){throw new NH("checkReceipt",AH("errors","ensureValidReceipt"))}if(t!==r)throw new NH("checkReceipt",AH("errors","invalidMerkleReceipt"))}(this.receipt)))}))}checkRevokedStatus(){var e;return aH(this,void 0,void 0,(function*(){let t,r;this.version===hH.V1_2?(r=(null===(e=this.txData)||void 0===e?void 0:e.revokedAddresses)||[],t=[IG.verifier.parseRevocationKey(this.issuer),this.revocationKey]):(r=yield this._doAction(null,(()=>aH(this,void 0,void 0,(function*(){return yield IG.verifier.getRevokedAssertions(this._getRevocationListUrl(this.issuer),this.id)})))),t=this.id),yield this._doAction("checkRevokedStatus",(()=>function(e,t){if(!e||!t)return;Array.isArray(t)||(t=[t]);const r=function(e=[],t=[]){return e.filter((e=>-1!==t.indexOf(e))).filter(((e,t,r)=>r.indexOf(e)===t))}(t=t.filter((e=>null!=e)),e.map((e=>e.id)));if(r.length>0){const t=e.findIndex((e=>e.id===r[0]));if(t>-1)throw new NH("checkRevokedStatus",IG.certificates.generateRevocationReason(e[t].revocationReason))}}(r,t)))}))}checkAuthenticity(){return aH(this,void 0,void 0,(function*(){yield this._doAction("checkAuthenticity",(()=>function(e,t,r){let n="";const i=function(e,t){let r=null;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&n.toLowerCase()===t.toLowerCase()&&(r=n);return e[r]}(e,t),o=EG(r);if(i?(i.created&&o<=i.created&&(n="invalidIssuingAddressCreationTime"),i.revoked&&o>=i.revoked&&(n="invalidIssuingAddressRevoked"),i.expires&&o>=i.expires&&(n="invalidIssuingAddressExpired")):n="invalidIssuingAddressUnknown",n)throw new NH("checkAuthenticity",AH("errors",n))}(this.issuerPublicKeyList,this.txData.issuingAddress,this.txData.time)))}))}checkExpiresDate(){return aH(this,void 0,void 0,(function*(){yield this._doAction("checkExpiresDate",(()=>function(e=null){if(!e)return;const t=EG(e);if(new Date>=t)throw new NH("checkExpiresDate",AH("errors","ensureNotExpired"))}(this.expires)))}))}_failed(e){const t=e.errorMessage;return Nre(`failure:${t}`),this._setFinalStep({status:"failure",message:t})}_isFailing(){return this._stepsStatuses.some((e=>"failure"===e.status))}_retrieveDocumentBeforeIssuance(e){const t=Object.assign({},e);return delete t.signature,t}_succeed(){const e=IG.chains.isMockChain(this.chain)?IG.i18n.getText("success","mocknet"):IG.i18n.getText("success","blockchain");return Nre(e),this._setFinalStep({status:"success",message:e})}_setFinalStep({status:e,message:t}){return{code:"final",status:e,message:t}}_updateStatusCallback(e,t,r,n=""){if(null!=e){const i={code:e,label:t,status:r};n&&(i.errorMessage=n),this._stepCallback(i)}}}class Lre{constructor(e,t={}){if(this.explorerAPIs=[],this._setOptions(t),"object"!=typeof e)try{e=JSON.parse(e)}catch(e){throw new Error(IG.i18n.getText("errors","certificateNotValid"))}this.certificateJson=FH(e)}init(){return aH(this,void 0,void 0,(function*(){yield this.parseJson(this.certificateJson)}))}parseJson(e){return aH(this,void 0,void 0,(function*(){const t=yield TG(e);if(!t.isFormatValid)throw new Error(t.error);this._setProperties(t)}))}verify(e){return aH(this,void 0,void 0,(function*(){const t=new Rre({certificateJson:this.certificateJson,chain:this.chain,expires:this.expires,id:this.id,issuer:this.issuer,receipt:this.receipt,revocationKey:this.revocationKey,transactionId:this.transactionId,version:this.version,explorerAPIs:FH(this.explorerAPIs)});return yield t.verify(e)}))}_setOptions(e){this.options=Object.assign({},EH,e),this.locale=IG.i18n.ensureIsSupported("auto"===this.options.locale?IG.i18n.detectLocale():this.options.locale),this.explorerAPIs=this.options.explorerAPIs||[],IH.locale=this.locale}_setProperties({certificateImage:e,chain:t,description:r,expires:n,id:i,isFormatValid:o,issuedOn:s,issuer:a,metadataJson:u,name:c,publicKey:l,receipt:h,recipientFullName:f,recordLink:d,revocationKey:p,sealImage:g,signature:m,signatureImage:y,subtitle:v,version:b}){this.isFormatValid=o,this.certificateImage=e,this.chain=t,this.description=r,this.expires=n,this.id=i,this.issuedOn=s,this.issuer=a,this.metadataJson=u,this.name=c,this.publicKey=l,this.receipt=h,this.recipientFullName=f,this.recordLink=d,this.revocationKey=p,this.sealImage=g,this.signature=m,this.signatureImage=y,this.subtitle=v,this.verificationSteps=IG.certificates.getVerificationMap(t),this.version=b,this._setTransactionDetails()}_setTransactionDetails(){this.transactionId=IG.certificates.getTransactionId(this.receipt),this.rawTransactionLink=IG.certificates.getTransactionLink(this.transactionId,this.chain,!0),this.transactionLink=IG.certificates.getTransactionLink(this.transactionId,this.chain)}}var jre=Object.freeze({__proto__:null,displayHtmlHasNoWidthConstraint:function(e){const t=(new DOMParser).parseFromString(e,"text/html");return t.body.childElementCount===t.body.querySelectorAll(ut.map((e=>`section[class*="${e}"]`)).join(", ")).length},download:function(e){return e+ct},initializeVerificationSteps:function(e){const t=JSON.parse(JSON.stringify(e.verificationSteps));return t.map(((e,r)=>({...e,isLast:r===t.length-1,status:Dl.DEFAULT})))},retrieve:function(e){return iH(e)||oH(e)?fetch(e+ct).then((e=>e.text())).then((e=>{try{return{certificateDefinition:JSON.parse(e)}}catch(e){return console.log(e),{certificateDefinition:null,errorMessage:"errors.invalidBlockcertsUrl"}}})).catch(sH):(console.error("Invalid url to retrieve:",e),null)},read:async function(e){if(!e)return;const t=await function(e){return new Promise((function(t,r){const n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=n.onabort=r,n.readAsText(e)}))}(e);return t},parse:async function(e,t={}){t.locale||(t.locale="auto");try{let r;return r=1===ql(e["@context"]).versionNumber?new Lre(e,t):new nH(e,t),await r.init(),{certificateDefinition:r}}catch(e){return console.error(e),{certificateDefinition:null,errorMessage:"errors.invalidBlockcerts"}}},isPathToCertificateValidURI:function(e){return iH(e)||oH(e)}});var Dre=((e={})=>{if(!window.Proxy){const t=function(){let e=null;function t(e){return!!e&&("object"==typeof e||"function"==typeof e)}const r=function(r,n){if(!t(r)||!t(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");let i=function(){};e=function(){i=function(e){throw new TypeError(`Cannot perform '${e}' on a proxy that has been revoked`)}};const o=n;n={get:null,set:null,apply:null,construct:null};for(const e in o)e in n&&(n[e]=o[e]);"function"==typeof o&&(n.apply=o.apply.bind(o));let s=this,a=!1,u=!1;"function"==typeof r?(s=function(){const e=this&&this.constructor===s,t=Array.prototype.slice.call(arguments);return i(e?"construct":"apply"),e&&n.construct?n.construct.call(this,r,t):!e&&n.apply?n.apply(r,this,t):e?(t.unshift(r),new(r.bind.apply(r,t))):r.apply(this,t)},a=!0):r instanceof Array&&(s=[],u=!0);const c=n.get?function(e){return i("get"),n.get(this,e,s)}:function(e){return i("get"),this[e]},l=n.set?function(e,t){i("set"),n.set(this,e,t,s)}:function(e,t){i("set"),this[e]=t},h=Object.getOwnPropertyNames(r),f={};h.forEach((function(e){if((a||u)&&e in s)return;const t={enumerable:!!Object.getOwnPropertyDescriptor(r,e).enumerable,get:c.bind(r,e),set:l.bind(r,e)};Object.defineProperty(s,e,t),f[e]=!0}));let d=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(r)):s.__proto__?s.__proto__=r.__proto__:d=!1,n.get||!d)for(const e in r)f[e]||Object.defineProperty(s,e,{get:c.bind(r,e)});return Object.seal(r),Object.seal(s),s};return r.revocable=function(t,n){return{proxy:new r(t,n),revoke:e}},r}();return new t(e,at)}return new Proxy(e,at)})({certificates:jre,events:Object.freeze({__proto__:null,dispatch:function(e="",t=null,r){if(!e||"string"!=typeof e)return;if(!t||"object"!=typeof t)return;const n=new CustomEvent(e,{detail:{certificateDefinition:t,...r}});window.dispatchEvent(n)}})});function Bre(e,t){return e(t={exports:{}},t.exports),t.exports}function Ure(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var Fre=/javascript\s*\:/gim;var zre={whiteList:Ure(),getDefaultWhiteList:Ure,onAttr:function(e,t,r){},onIgnoreAttr:function(e,t,r){},safeAttrValue:function(e,t){return Fre.test(t)?"":t}},Vre=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Hre=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var Kre=function(e,t){";"!==(e=Hre(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,i=0,o=0,s="";function a(){if(!n){var r=Vre(e.slice(i,o)),a=r.indexOf(":");if(-1!==a){var u=Vre(r.slice(0,a)),c=Vre(r.slice(a+1));if(u){var l=t(i,s.length,u,c,r);l&&(s+=l+"; ")}}}i=o+1}for(;o<r;o++){var u=e[o];if("/"===u&&"*"===e[o+1]){var c=e.indexOf("*/",o+2);if(-1===c)break;i=(o=c+1)+1,n=!1}else"("===u?n=!0:")"===u?n=!1:";"===u?n||a():"\n"===u&&a()}return Vre(s)};function qre(e){return null==e}function $re(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.whiteList=e.whiteList||zre.whiteList,e.onAttr=e.onAttr||zre.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||zre.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||zre.safeAttrValue,this.options=e}$re.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,i=t.onIgnoreAttr,o=t.safeAttrValue;return Kre(e,(function(e,t,s,a,u){var c=r[s],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(a):c instanceof RegExp&&(l=c.test(a)),!0!==l&&(l=!1),a=o(s,a)){var h,f={position:t,sourcePosition:e,source:u,isWhite:l};return l?qre(h=n(s,a,f))?s+":"+a:h:qre(h=i(s,a,f))?void 0:h}}))};var Wre=$re,Gre=Bre((function(e,t){for(var r in t=e.exports=function(e,t){return new Wre(t).process(e)},t.FilterCSS=Wre,zre)t[r]=zre[r];"undefined"!=typeof window&&(window.filterCSS=e.exports)}));Gre.cssfilter,Gre.FilterCSS;var Jre=function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},Xre=function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},Yre=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Zre=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},Qre=Gre.FilterCSS,ene=Gre.getDefaultWhiteList;function tne(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var rne=new Qre;function nne(e){return e.replace(ine,"&lt;").replace(one,"&gt;")}var ine=/</g,one=/>/g,sne=/"/g,ane=/&quot;/g,une=/&#([a-zA-Z0-9]*);?/gim,cne=/&colon;?/gim,lne=/&newline;?/gim,hne=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,fne=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,dne=/u\s*r\s*l\s*\(.*/gi;function pne(e){return e.replace(sne,"&quot;")}function gne(e){return e.replace(ane,'"')}function mne(e){return e.replace(une,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function yne(e){return e.replace(cne,":").replace(lne," ")}function vne(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Yre(t)}function bne(e){return e=vne(e=yne(e=mne(e=gne(e))))}function wne(e){return e=nne(e=pne(e))}var _ne=function(e,t,r,n){if(r=bne(r),"href"===t||"src"===t){if("#"===(r=Yre(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(hne.lastIndex=0,hne.test(r))return""}else if("style"===t){if(fne.lastIndex=0,fne.test(r))return"";if(dne.lastIndex=0,dne.test(r)&&(hne.lastIndex=0,hne.test(r)))return"";!1!==n&&(r=(n=n||rne).process(r))}return r=wne(r)},xne=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],i=!1;return{onIgnoreTag:function(o,s,a){if(function(t){return!!r||-1!==Jre(e,t)}(o)){if(a.isClosing){var u="[/removed]",c=a.position+u.length;return n.push([!1!==i?i:a.position,c]),i=!1,u}return i||(i=a.position),"[removed]"}return t(o,s,a)},remove:function(e){var t="",r=0;return Xre(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},Sne=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("--\x3e",n);if(-1===i)break;r=i+3}return t},Ene=function(e){var t=e.split("");return t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))})),t.join("")},kne={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},getDefaultWhiteList:tne,onTag:function(e,t,r){},onIgnoreTag:function(e,t,r){},onTagAttr:function(e,t,r){},onIgnoreTagAttr:function(e,t,r){},safeAttrValue:_ne,escapeHtml:nne,escapeQuote:pne,unescapeQuote:gne,escapeHtmlEntities:mne,escapeDangerHtml5Entities:yne,clearNonPrintableCharacter:vne,friendlyAttrValue:bne,escapeAttrValue:wne,onIgnoreTagStripAll:function(){return""},StripTagBody:xne,stripCommentTag:Sne,stripBlankChar:Ene,cssFilter:rne,getDefaultCSSWhiteList:ene};function Ine(e){var t=Zre(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=Yre(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function Ane(e){return"</"===e.slice(0,2)}var Tne=/[^a-zA-Z0-9_:\.\-]/gim;function Pne(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function One(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Cne(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var Mne=function(e,t,r){var n="",i=0,o=!1,s=!1,a=0,u=e.length,c="",l="";e:for(a=0;a<u;a++){var h=e.charAt(a);if(!1===o){if("<"===h){o=a;continue}}else if(!1===s){if("<"===h){n+=r(e.slice(i,a)),o=a,i=a;continue}if(">"===h){n+=r(e.slice(i,o)),c=Ine(l=e.slice(o,a+1)),n+=t(o,n.length,c,l,Ane(l)),i=a+1,o=!1;continue}if('"'===h||"'"===h)for(var f=1,d=e.charAt(a-f);""===d.trim()||"="===d;){if("="===d){s=h;continue e}d=e.charAt(a-++f)}}else if(h===s){s=!1;continue}}return i<e.length&&(n+=r(e.substr(i))),n},Nne=function(e,t){var r=0,n=[],i=!1,o=e.length;function s(e,r){if(!((e=(e=Yre(e)).replace(Tne,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&n.push(i)}}for(var a=0;a<o;a++){var u,c=e.charAt(a);if(!1!==i||"="!==c)if(!1===i||a!==r||'"'!==c&&"'"!==c||"="!==e.charAt(a-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(u=Pne(e,a))){s(Yre(e.slice(r,a))),i=!1,r=a+1;continue}a=u-1;continue}if(-1===(u=One(e,a-1))){s(i,Cne(Yre(e.slice(r,a)))),i=!1,r=a+1;continue}}else;else{if(-1===(u=e.indexOf(c,a+1)))break;s(i,Yre(e.slice(r+1,u))),i=!1,r=(a=u)+1}else i=e.slice(r,a),r=a+1}return r<e.length&&(!1===i?s(e.slice(r)):s(i,Cne(Yre(e.slice(r))))),Yre(n.join(" "))},Rne={parseTag:Mne,parseAttr:Nne},Lne=Gre.FilterCSS,jne=Rne.parseTag,Dne=Rne.parseAttr;function Bne(e){return null==e}function Une(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=kne.onIgnoreTagStripAll),e.whiteList=e.whiteList||kne.whiteList,e.onTag=e.onTag||kne.onTag,e.onTagAttr=e.onTagAttr||kne.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||kne.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||kne.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||kne.safeAttrValue,e.escapeHtml=e.escapeHtml||kne.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Lne(e.css))}Une.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,o=t.onTagAttr,s=t.onIgnoreTagAttr,a=t.safeAttrValue,u=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=kne.stripBlankChar(e)),t.allowCommentTag||(e=kne.stripCommentTag(e));var l=!1;if(t.stripIgnoreTagBody){l=kne.StripTagBody(t.stripIgnoreTagBody,i);i=l.onIgnoreTag}var h=jne(e,(function(e,t,l,h,f){var d,p={sourcePosition:e,position:t,isClosing:f,isWhite:r.hasOwnProperty(l)};if(!Bne(d=n(l,h,p)))return d;if(p.isWhite){if(p.isClosing)return"</"+l+">";var g=function(e){var t=Zre(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=Yre(e.slice(t+1,-1)))[e.length-1];return r&&(e=Yre(e.slice(0,-1))),{html:e,closing:r}}(h),m=r[l],y=Dne(g.html,(function(e,t){var r,n=-1!==Jre(m,e);return Bne(r=o(l,e,t,n))?n?(t=a(l,e,t,c))?e+'="'+t+'"':e:Bne(r=s(l,e,t,n))?void 0:r:r}));h="<"+l;return y&&(h+=" "+y),g.closing&&(h+=" /"),h+=">"}return Bne(d=i(l,h,p))?u(h):d}),u);return l&&(h=l.remove(h)),h};var Fne=Une,zne=Bre((function(e,t){function r(e,t){return new Fne(t).process(e)}for(var n in(t=e.exports=r).filterXSS=r,t.FilterXSS=Fne,kne)t[n]=kne[n];for(var n in Rne)t[n]=Rne[n];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}));zne.xss,zne.filterXSS,zne.FilterXSS;const Vne={...Gre.getDefaultWhiteList(),bottom:!0,left:!0,float:!0,overflow:!0,position:!0,right:!0,top:!0,transform:!0,opacity:!0,"transform-origin":!0,"flex-direction":!0,"flex-wrap":!0,"justify-content":!0,"align-items":!0,"white-space":!0,"line-height":!0,"grid-template-columns":!0,"grid-template-rows":!0,"grid-column":!0,"grid-row":!0,"grid-area":!0,"align-self":!0,"justify-self":!0,span:!0};var Hne=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Kne=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,qne=/u\s*r\s*l\s*\(.*/gi;const $ne={whiteList:function(){const e=zne.getDefaultWhiteList();return Object.keys(e).forEach((t=>{e[t].push("style"),e[t].push("class"),e[t].push("download")})),e}(),css:!1,stripIgnoreTagBody:!0,onTagAttr:function(e,t,r,n){if("style"===t)return`${t}="${Gre(r,{whiteList:Vne}).replace(/; /g,";")}"`;if("img"===e&&"src"===t&&function(e){return!!e.match(/^data:.+;base64,/)}(r)){const e=function(e){return e.split("base64,")[1]}(r);try{return atob(e),`${t}="${r}"`}catch(e){return t}}},safeAttrValue:function(e,t,r,n){if(r=zne.friendlyAttrValue(r),"href"===t||"src"===t){if("#"===(r=function(e){if(String.prototype.trim)return e.trim();return e.replace(/(^\s*)|(\s*$)/g,"")}(r)))return"#";if(!function(e){return["http://","https://","mailto:","tel:","data:","#","/"].some((t=>e.substr(0,t.length)===t))}(r))return""}else if("background"===t){if(Hne.lastIndex=0,Hne.test(r))return""}else if("style"===t){if(Kne.lastIndex=0,Kne.test(r))return"";if(qne.lastIndex=0,qne.test(r)&&(Hne.lastIndex=0,Hne.test(r)))return"";!1!==n&&(r=(n=n||zne.getDefaultCSSWhiteList()).process(r))}return r=zne.escapeAttrValue(r)}},Wne=new zne.FilterXSS($ne);function Gne(e){return Wne.process(e)}const Jne="en";var Xne={locale:Jne};const Yne={en:{errors:{errorLabel:"Error",invalidBlockcerts:"Not a valid Blockcerts credential. Please check with the issuer or recipient that has provided this credential.",invalidBlockcertsUrl:"Not a valid credential URL.",invalidFormatDragAndDrop:"Only JSON files are accepted",invalidUrl:"This does not seem to be a valid URL.",noIssuerName:"No name provided",noMetadata:"No metadata specified for this record",noShareUrl:"No URL to share!",noTransactionId:"No transaction ID"},text:{brandName:"Blockcerts",blockcertsHint:"Visit Blockcerts website",by:"by",certified:"Certified by",closeButton:"Click to close",downloadLink:"Download Record in JSON format",dragAndDropHint:"(you can also drag & drop your file).",fileUpload:"Choose JSON file",issued:"Issued on",issueDate:"Issue Date",issuerName:"Issuer",issuerPublicKey:"Issuer's public key",issuerProfileDomain:"Issuer's information",item:"Item",itemPlural:"Items",metadataButton:"View Metadata",metadataTitle:"Metadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Recipient",share:"Share on",shareButton:"Share on Social Networks",signatureSuiteType:"Digital signature type",signatureStatusSuccess:"This signature has been successfully verified",signatureStatusTestSuccess:"This signature has been successfully verified but has been issued on a test chain",signatureStatusFailure:"This signature yielded an error during verification",signed:"Signed by",substepsListClose:"Hide",substepsListHint:"Toggle open list of substeps",transactionId:"Transaction ID",urlInput:"Enter the certificate URL",urlInputPlaceholder:"Certificate URL",verificationStepProgress:"Verifying step...",verify:"Verify",verifyAgain:"Verify again",verifyOther:"Verify another record",viewRecord:"View Record"},date:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],pattern:"MM DD, YYYY"},numbers:{ordinal:["th","st","nd","rd"]}},es:{errors:{errorLabel:"Error",invalidBlockcerts:"No es una credencial vlida de Blockcerts. Verifique con el emisor o el destinatario que ha proporcionado esta credencial.",invalidBlockcertsUrl:"No es URL de certificado valido.",invalidFormatDragAndDrop:"Solo se aceptan archivos JSON",invalidUrl:"Esto no parece ser un URL vlido.",noIssuerName:"No nombre comunicado",noMetadata:"No se han especificado metadatos para este registro",noShareUrl:"No hay URL para compartir!",noTransactionId:"No ID de transaccin"},text:{brandName:"Blockcerts",blockcertsHint:"Visite el sitio web de Blockcerts",by:"por",certified:"Certificado por",closeButton:"Haz Click para cerrar",downloadLink:"Descarga el Registro en formato JSON",dragAndDropHint:"(tambin puedes arrastrar y soltar tu archivo).",fileUpload:"Escoge archivo JSON",issued:"Emitido el",issueDate:"Fecha de Emisin",issuerName:"Emisor",issuerPublicKey:"Llave publica del Emisor",issuerProfileDomain:"Informacin del Emisor",item:"Elemento",itemPlural:"Elementos",metadataButton:"Ver Metadata",metadataTitle:"Metadata",motto:"Blockcerts, El Estndar Abierto para Credenciales Blockchain",recipient:"Recipiente",share:"Comparte en",shareButton:"Comparte en Redes Sociales",signatureSuiteType:"Tipo de firma digital",signed:"Firmado Por",signatureStatusSuccess:"La verificacin de esta firma digital ha tenido xito",signatureStatusTestSuccess:"La verificacin de esta firma digital ha tenido xito pero se utiliz una cadena de test",signatureStatusFailure:"Error en la verificacin de esta firma digital",substepsListClose:"Esconde",substepsListHint:"Pasa lista abierta de sub-pasos",transactionId:"ID de Transaccin",urlInput:"Ingrese el URL del certificado",urlInputPlaceholder:"Certificado del URL",verificationStepProgress:"Paso de verificacin...",verify:"Verifica",verifyAgain:"Verifica nuevamente",verifyOther:"Verifica otro registro",viewRecord:"Ver Registro"},date:{months:["enero","feb","marzo","abr","mayo","jun","jul","agosto","set","oct","nov","dic"],pattern:"MM DD, YYYY"},numbers:{ordinal:""}},fr:{errors:{errorLabel:"Erreur",invalidBlockcerts:"Ceci n'est pas un certificat Blockcerts valide. Veuillez s'il vous plat contrler avec l'organisme metteur ou le rcipiendaire de ce certificat.",invalidBlockcertsUrl:"Ceci n'est pas une URL de certificat valide.",invalidFormatDragAndDrop:"Seul le format JSON est accept",invalidUrl:"URL invalide",noIssuerName:"Pas de nom fourni",noMetadata:"Ce certificat ne contient pas de mtadata",noShareUrl:"Pas d'URL  partager!",noTransactionId:"Pas d'identifiant de transaction"},text:{brandName:"Blockcerts",blockcertsHint:"Visiter le site de Blockcerts",by:"par",certified:"Certifi par",closeButton:"Cliquer pour fermer",downloadLink:"Tlcharger le certificat au format JSON",dragAndDropHint:"(vous pouvez aussi glisser et dposer votre fichier).",fileUpload:"Choisir un fichier JSON",issued:"mis le",issueDate:"Date d'mission",issuerName:"metteur",issuerPublicKey:"Cl publique de l'metteur",issuerProfileDomain:"Profil de l'metteur",item:"point contrl",itemPlural:"points contrls",metadataButton:"Voir les mtadata",metadataTitle:"Mtadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Titulaire",share:"Partager sur",shareButton:"Partager sur les rseaux sociaux",signatureSuiteType:"Type de signature numrique",signed:"Sign par",signatureStatusSuccess:"Cette signature a t vrifie avec succs",signatureStatusTestSuccess:"Cette signature a t vrifie avec succs mais la blockchain utilise est de test",signatureStatusFailure:"Erreur durant la vrification de cette signature",substepsListClose:"Fermer",substepsListHint:"Afficher les sous-tapes",transactionId:"Identifiant de transaction",urlInput:"Entrez l'URL du certificat",urlInputPlaceholder:"URL du certificat",verificationStepProgress:"Vrification en cours...",verify:"Vrifier",verifyAgain:"Vrifier de nouveau",verifyOther:"Vrifier un autre certificat",viewRecord:"Voir le certificat"},date:{months:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Aout","Sept","Oct","Nov","Dc"],pattern:"DD MM YYYY"},numbers:{ordinal:["me","er"]}},it:{errors:{errorLabel:"Errore",invalidBlockcerts:"Non  una definizione valida di Blockcerts.",invalidBlockcertsUrl:"Non  un URL di certificato valido.",invalidFormatDragAndDrop:"Sono accettati solo file JSON",invalidUrl:"Questo non sembra essere un URL valido.",noIssuerName:"No name provided",noMetadata:"Nessun Metadata specificato per questo record",noShareUrl:"Non c' un URL da condividere!",noTransactionId:"Nessun ID transazione"},text:{brandName:"Blockcerts",blockcertsHint:"Visita il sito Web Blockcerts",by:"da",certified:"Certificato da",closeButton:"Fai clic per chiudere",downloadLink:"Scarica il Record in formato JSON",dragAndDropHint:"(puoi anche trascinare il file).",fileUpload:"Scegli il file JSON",issued:"Rilasciato il",issueDate:"Data",issuerName:"Organizzazione Issuer",issuerPublicKey:"Chiave pubblica del Issuer",issuerProfileDomain:"Informazzione del Issuer",item:"Elemento",itemPlural:"Elementi",metadataButton:"Visualizza Metadata",metadataTitle:"Metadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Titolare",share:"Condividi",shareButton:"Condividi sui Social Network",signed:"Firmato da",signatureStatusSuccess:"This signature has been successfully verified",signatureStatusTestSuccess:"This signature has been successfully verified but has been issued on a test chain",signatureStatusFailure:"This signature yielded an error during verification",signatureSuiteType:"Digital signature type",substepsListClose:"Nascondi",substepsListHint:"Mostra gli step secondari",transactionId:"ID transazione",urlInput:"Inserisci l'URL del certificato",urlInputPlaceholder:"URL del certificato",verificationStepProgress:"Step di verifica...",verify:"Verifica",verifyAgain:"Verifica di nuovo",verifyOther:"Verifica un altro record",viewRecord:"Visualizza il Record"},date:{months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],pattern:"DD MM YYYY"},numbers:{ordinal:""}}};function Zne(){return Yne}function Qne(e,t,r,n){if(!e)return"";if(e.includes(".")){const r=e.split(".");e=r[0],t=r[1]}if(!t)return"";r&&n>1&&(t+="Plural");const i=Zne();return i[Xne.locale]?i[Xne.locale][e]?i[Xne.locale][e][t]?i[Xne.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]"}function eie(e){const t=Qne("date","pattern");"Z"===e.slice(-1)?e=e.slice(0,e.length-1):e.includes("+")&&(e=e.split("+")[0]);const r=new Date(e);let n=function(e,t){const r=Qne("date","months");return e.replace("MM",r[t])}(t,r.getMonth());return n=function(e,t){return e.replace("DD",t)}(n,r.getDate().toString(10)),n=function(e,t){return e.replace("YYYY",t)}(n,r.getFullYear().toString(10)),n}function tie(e){return e.certificateDefinition}function rie(e){const t=tie(e);return t?t.signers:[]}function nie(e){const t=tie(e);return t?t.issuedOn:""}function iie(e){return tie(e)?eie(nie(e)):""}function oie(e){const t=tie(e);return t?t.recipientFullName:""}function sie(e){const t=tie(e);return t?t.name:""}function aie(e){const t=tie(e);return t?t.issuer.name:""}function uie(e){const t=tie(e);return t?t.issuer.image:""}function cie(e){const t=tie(e);if(!t)return"";const{displayHtml:r}=t.certificateJson;if(r)return Gne(r);const n=t.display;if(n)switch(n.contentMediaType){case"text/html":return Gne(n.content);case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":return`<img src="data:${n.contentMediaType};${n.contentEncoding},${n.content}"/>`;case"application/pdf":return`<embed width="100%" height="100%" type="application/pdf" src="data:${n.contentMediaType};${n.contentEncoding},${n.content}"/>`;default:return""}return""}function lie(e){const t=tie(e);return t&&iH(t.recordLink)?t.recordLink:""}function hie(e){const t=lie(e);return t?Dre.certificates.download(t):""}function fie(e){const t=tie(e);if(t)try{return JSON.parse(t.metadataJson)}catch(e){return null}return null}function die(e){const t=rie(e);return 0===t.length?Iie(e,"transactionLink")??[]:t.map((e=>e.transactionLink))}function pie(e){const t=rie(e);return 0===t.length?Iie(e,"transactionId")??[]:t.map((e=>e.transactionId))}function gie(e){const t=rie(e);if(0===t.length){const t=Iie(e,"chain");return t?t.map((e=>e?.name)):[]}return t.map((e=>e.chain?.name))}function mie(e){return gie(e).some((e=>"Mocknet"===e||e?.includes("Testnet")))}function yie(e,t){const r=gie(e)[t];return!!r&&("Mocknet"===r||r.includes("Testnet"))}function vie(e){return e.verifiedSteps||[]}function bie(e,t){return vie(e).find((e=>e.code===t))}function wie(e){return vie(e).some((e=>e.status===Dl.FAILURE))}function _ie(e){return e.finalStep}function xie(e){return rie(e).map((e=>e.issuerPublicKey))}function Sie(e){return rie(e).map((e=>e.issuerProfileUrl))}function Eie(e){return rie(e).map((e=>e.issuerProfileDomain))}function kie(e){return rie(e).map((e=>e.signatureSuiteType))}function Iie(e,t){const r=tie(e);return r?[r[t]]:null}function Aie(e){const t=tie(e);return t?t.certificateImage:""}function Tie(e){const t=tie(e);return t?t.subtitle:""}function Pie(e){const t=tie(e);return t?t.description:""}function Oie(e){const t=tie(e);return t?t.signatureImage:""}function Cie(e){const t=tie(e);return t?t.sealImage:""}function Mie(e,t){switch(t.type){case et:return function(e,t){const{resetSteps:r}=t.payload;return{...e,verifiedSteps:r}}(e,t);case Je:return function(e,t){return{...e,...t.payload.options}}(e,t);case Xe:return function(e,t){return{...e,...t.payload,...t.payload.certificateDefinition&&{verifiedSteps:Dre.certificates.initializeVerificationSteps(t.payload.certificateDefinition)}}}(e,t);case Ye:return function(e,t){return{...e,certificateDefinition:t.payload.definition}}(e,t);case Ze:return function(e,t){return{...e,input:{...e.input,certificateUrl:t.payload.url}}}(e,t);case rt:return function(e,t){const{parentStepCode:r,status:n}=t.payload;return bie(e,r).status=n,e}(e,t);case Qe:return function(e,t){return{...e,input:{...e.input,isValid:t.payload.isValid}}}(e,t);case ot:return function(e,t){const{errorMessage:r}=t.payload;return{...e,errorMessage:r}}(e,t);case st:return function(e,t){return{...e,showVerificationModal:t.payload.showVerificationModal}}(e,t);case tt:return function(e,t){const{parentStep:r}=t.payload;return function(e,t){let r=e.subSteps.findIndex((e=>e.code===t.code));r>-1?e.subSteps[r]=t:e.suites?.length&&e.suites.forEach((e=>{r=e.subSteps.findIndex((e=>e.code===t.code)),r>-1&&(e.subSteps[r]=t)}))}(bie(e,r),t.payload),e}(e,t);case nt:return function(e,t){return{...e,verificationStatus:t.payload.status}}(e,t);case it:return function(e,t){return{...e,finalStep:t.payload.finalStep}}(e,t);default:return e}}const Nie="full",Rie="bright",Lie="dark";const jie=function(e=function(e={}){return{input:{},verifiedSteps:[],finalStep:null,verificationStatus:Dl.DEFAULT,showVerificationModal:!1,displayMode:"card",theme:Rie,...e}}()){return Ie(Mie,e,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(_e(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return n=Te.apply(void 0,o)(r.dispatch),we(we({},r),{},{dispatch:n})}}}(...[Oe]))}();function Die(e,{mapDispatchToProps:t={},mapStateToProps:r=(()=>({})),ownProps:n={}}){return class extends(ye(jie)(me)){mapDispatchToProps(){return function(e,t){if("function"==typeof e)return Ae(e,t);if("object"!=typeof e||null===e)throw new Error(_e(16));var r={};for(var n in e){var i=e[n];"function"==typeof i&&(r[n]=Ae(i,t))}return r}(t,jie.dispatch)}mapStateToProps(e){return r(jie.getState(),e)}static get properties(){return n}_render(t){const r={...this.mapDispatchToProps(),...this.mapStateToProps(t),...t};return he`${e(r)}`}_stateChanged(e){this._requestRender()}}}function Bie(e){return{type:ot,payload:{errorMessage:e}}}function Uie(e){return e.status===Dl.SUCCESS}function Fie(e){return e.status===Dl.FAILURE}function zie(e){return function(t,r){if(null==e)return;const n=bie(r(),e);let i=n.status;i===Dl.DEFAULT&&function(e){let t=!0;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).some(Uie)),t||e.subSteps.some(Uie)}(n)&&(i=Dl.STARTING),i!==Dl.DEFAULT&&function(e){let t=!0;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).every(Uie)),t&&e.subSteps.every(Uie)}(n)&&(i=Dl.SUCCESS),function(e){let t=!1;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).some(Fie)),t||e.subSteps.some(Fie)}(n)&&(i=Dl.FAILURE),t({type:rt,payload:{parentStepCode:e,status:i}})}}class Vie{constructor(){this.queue=[],this.dispatchCb=null,this.isExecuting=!1,this.intervalId=null,this.dispatchNext=this.dispatchNext.bind(this)}registerCb(e){this.dispatchCb=e}push(e){this.queue.push(e)}dispatchNext(){const e=this.queue.shift();e?this.dispatchCb(e):this.intervalId&&(this.isExecuting=!1,clearInterval(this.intervalId))}execute(){!this.isExecuting&&this.queue.length&&(this.isExecuting=!0,this.intervalId=setInterval(this.dispatchNext,200))}}const Hie=new Vie;function Kie(e){return function(t,r){const n=function(e){return function(t){e({type:tt,payload:t}),e(zie(t.parentStep))}}(t);Hie.dispatchCb||Hie.registerCb(n),Hie.push(e),Hie.execute()}}function qie(){return function(e,t){const r=tie(t());let n=[];r&&(n=Dre.certificates.initializeVerificationSteps(r)),e({type:et,payload:{resetSteps:n}})}}function $ie(e){return{type:nt,payload:{status:e}}}function Wie(e){return e.disableVerify}function Gie(e){return e.allowDownload}function Jie(e){return e.allowSocialShare}function Xie(e){return e.showMetadata}function Yie(e){return e.displayMode}function Zie(e){return e.theme}function Qie(e){return e.locale}function eoe(e){return e.explorerAPIs}function toe(e){return e.clickableUrls}function roe(e){return e.didResolverUrl}function noe(e){return"string"==typeof e&&(e={label:e}),{type:it,payload:{finalStep:e}}}function ioe(){return async function(e,t){const r=t();if(Wie(r))return void console.warn("Verification is disabled");e({type:"VERIFY_CERTIFICATE"}),e($ie(Dl.STARTING)),e(qie());const n=tie(r);if(n){Dre.events.dispatch("certificate-verify",n);const t=await n.verify((t=>{e(Kie(t))}));e(noe(t.message)),e($ie(t.status))}}}function ooe(e){return{type:st,payload:{showVerificationModal:e}}}function soe(e){return async function(t,r){const n=r(),i={locale:Qie(n),explorerAPIs:eoe(n),didResolverUrl:roe(n)},{certificateDefinition:o,errorMessage:s}=await Dre.certificates.parse(e,i);t(Bie(s)),t({type:Xe,payload:{certificateDefinition:o}}),Dre.events.dispatch("certificate-load",o),null!=o&&await t((async function(e,t){(function(e){return e.disableAutoVerify})(t())||(e({type:Ge}),e(ooe(!0))),await e(ioe())}))}}function aoe(e){return async function(t){const r=Dre.certificates.isPathToCertificateValidURI(e);var n;if(t((n=r,function(e){e({type:Qe,payload:{isValid:n}}),e(Bie(n?null:"errors.invalidUrl"))})),!r)return null;t({type:Ze,payload:{url:e}});const i=await Dre.certificates.retrieve(e);i.certificateDefinition?await t(soe(i.certificateDefinition)):t(Bie(i.errorMessage))}}const uoe=/(-\w)/g,coe=e=>e[1].toUpperCase();const loe={src:String,"disable-auto-verify":Boolean,"disable-verify":Boolean,"allow-download":Boolean,"allow-social-share":Boolean,"display-mode":String,"show-metadata":Boolean,"clickable-urls":Boolean,theme:0,locale:String,explorerAPIs:{},"did-resolver-url":String},hoe=Object.keys(loe).map((function(e){return e.replace(uoe,coe)})).reduce(((e,t)=>(e[t]=loe[t],e)),{});function foe(e){let t;const r=Object.keys(Yne).map((e=>e.toLowerCase()));if(t=r.indexOf(e.toLowerCase())>-1,!t){const n=e.substr(0,2).toLowerCase(),i=r.map((e=>e.split("-")[0])).indexOf(n);t=i>-1,t&&(e=r[i])}return t||(e=Jne),function(e){const t=e.split("-");return t.length>1?`${t[0].toLowerCase()}-${t[1].toUpperCase()}`:t[0].toLowerCase()}(e)}function doe(e){"auto"!==e&&e||(e=navigator.language||navigator.userLanguage||navigator.browserLanguage||Jne),Xne.locale=foe(e)}var poe=he`<style>.buv-c-input{font-size:15px;color:#031532;border-radius:2px 0 0 2px;padding:12px 15px;background-color:#f3f4f5;border:solid 1px rgba(3,21,50,0.13);box-sizing:border-box;width:100%}.buv-c-input.is-invalid{border:2px solid #f00}.buv-c-input::-moz-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input::-webkit-input-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input:-moz-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input:-ms-input-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;function goe(e){return void 0===e.input.isValid||e.input.isValid}const moe=Die((({onInput:e=(()=>{}),isValid:t=!0}={})=>{const r="buv-c-input "+(t?"":"is-invalid");return he`
    ${poe}
    <label 
      for='certificate-json-url'
      class='buv-u-visually-hidden'>${Qne("text.urlInput")}</label>
    <input 
      type='text'
      id='certificate-json-url'
      placeholder='${Qne("text.urlInputPlaceholder")}'
      class$='${r}'
      on-input='${t=>{e(t.target.value)}}'
    />
  `}),{mapDispatchToProps:{onInput:aoe},mapStateToProps:e=>({isValid:goe(e)})});window.customElements.define("buv-input",moe);var yoe=he`<style>.buv-c-verify-button{background-color:#2ab27b;border-radius:0 2px 2px 0;color:#fff;cursor:pointer;display:block;font-size:15px;font-weight:400;padding:12px 38px;border:1px solid #2ab27b;width:100%}.buv-c-verify-button__label{cursor:pointer}.buv-c-verify-button--hollow{background:#fff;color:#2ab27b;font-weight:100;text-transform:uppercase;padding:12px 30px;font-size:13px}.buv-c-verify-button--link{background:none;color:#031532;border:0;text-decoration:underline;padding:0;margin-top:5px;font-size:13px}.buv-c-verify-button.is-disabled{pointer-events:none}
</style>`;const voe={onClick:function(){return function(e){e({type:"START_VERFICATION_PROCESS"}),e(ooe(!0)),e(ioe())}}},boe=Die((function({isHollow:e=!1,isDisabled:t=!1,onClick:r=(()=>{}),type:n=""}={}){const i=["buv-c-verify-button",e?"buv-c-verify-button--hollow":"",t?"is-disabled":"","link"===n?"buv-c-verify-button--link":""].join(" ");return he`
    ${yoe}
    <button class$='${i}' on-click='${r}' disabled?='${t}'>
      <label class='buv-c-verify-button__label'><slot>${Qne("text.verify")}</slot></label>
    </button>
  `}),{mapDispatchToProps:voe,mapStateToProps:e=>({isDisabled:Wie(e)||!tie(e)}),ownProps:{isHollow:Boolean,type:String}});window.customElements.define("buv-verify-button",boe);var woe=he`<style>.buv-c-certificate-input{display:flex;width:100%;padding:40px 30px;background-color:rgba(255,255,255,0.1);border:1px solid rgba(0,0,0,0.1);box-sizing:border-box}@media only screen and (max-width: 600px){.buv-c-certificate-input{flex-direction:column;grid-row-gap:10px;height:162px;padding:30px;justify-content:space-between}}.buv-c-certificate-input__input{width:100%}
</style>`;const _oe=Die((({showInput:e=!0})=>e?he`
    ${woe}
    <section class="buv-c-certificate-input  buv-qa-certificate-input">
        <buv-input class="buv-c-certificate-input__input"></buv-input><buv-verify-button></buv-verify-button>     
    </section>
`:null),{mapStateToProps:e=>({showInput:!tie(e)})});window.customElements.define("buv-certificate-input",_oe);var xoe=he`<style>.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-c-download-link{text-decoration:none;color:currentColor}.buv-c-download-link--icon{background-image:url("data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20id%3D%22Capa%5f1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0A%09%20width%3D%22433.5px%22%20height%3D%22433.5px%22%20fill%3D%22%236e7e8e%22%20viewBox%3D%220%200%20433.5%20433.5%22%20style%3D%22enable-background%3Anew%200%200%20433.5%20433.5%3B%22%20xml%3Aspace%3D%22preserve%22%0A%09%3E%3Cg%3E%3Cg%20id%3D%22file-download%22%3E%3Cpath%20d%3D%22M395.25%2C153h-102V0h-153v153h-102l178.5%2C178.5L395.25%2C153z%20M38.25%2C382.5v51h357v-51H38.25z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");width:17px;height:17px;background-size:17px}.buv-c-download-link.is-disabled{pointer-events:none}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;const Soe=Die((function({downloadLink:e,display:t=""}){if(!e)return null;const r="plaintext"===t,n=Qne("text.downloadLink"),i=["buv-c-download-link","buv-o-button-link",r?"":"buv-c-download-link--icon"].join(" ");return he`
    ${xoe}
    <a class$='${i}' href='${e}' title$='${n}'>
      <span class$='${r?"buv-o-button-link__label":"buv-u-visually-hidden"}'>${n}</span>
    </a>`}),{mapStateToProps:e=>({downloadLink:hie(e)}),ownProps:{display:String}});window.customElements.define("buv-download-link",Soe);var Eoe=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-metadata-container{box-sizing:border-box;padding:47px;height:100%;width:400px;position:fixed;top:0;right:-400px;display:flex;flex-direction:column}.buv-c-metadata-container__close-button{top:52px;right:47px}.buv-c-metadata-container__title{border-bottom:solid 1px #e8e9eb;padding-bottom:38px;font-weight:300;margin:0 0 38px}.buv-c-metadata-link{padding:0}.buv-c-metadata-link--icon{background-image:url("data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0A%0A%09%20width%3D%22512px%22%20fill%3D%22%236e7e8e%22%20height%3D%22512px%22%20viewBox%3D%220%200%20512%20512%22%20enable-background%3D%22new%200%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%3E%0A%0A%3Cpath%20id%3D%22info-2-icon%22%20d%3D%22M255.998%2C90.001c91.74%2C0%2C166.002%2C74.241%2C166.002%2C165.998c0%2C91.741-74.245%2C166-166.002%2C166%0A%0A%09c-91.74%2C0-165.998-74.243-165.998-166C90%2C164.259%2C164.243%2C90.001%2C255.998%2C90.001%20M255.998%2C50.001%0A%0A%09C142.229%2C50.001%2C50%2C142.229%2C50%2C255.999c0%2C113.771%2C92.229%2C206%2C205.998%2C206c113.771%2C0%2C206.002-92.229%2C206.002-206%0A%0A%09C462%2C142.229%2C369.77%2C50.001%2C255.998%2C50.001L255.998%2C50.001z%20M285.822%2C367.567h-57.646V230.6h57.646V367.567z%20M257%2C202.268%0A%09c-17.522%2C0-31.729-14.206-31.729-31.73c0-17.522%2C14.206-31.729%2C31.729-31.729c17.524%2C0%2C31.728%2C14.206%2C31.728%2C31.729%0A%09C288.728%2C188.062%2C274.524%2C202.268%2C257%2C202.268z%22%2F%3E%3C%2Fsvg%3E");width:22px;height:22px;background-size:22px}.buv-c-metadata-list{margin:0;overflow:auto;flex:1}.buv-c-metadata-list__title{color:#999;line-height:15px}.buv-c-metadata-list__detail{margin:0 0 20px}.buv-c-metadata-list__detail-text{white-space:pre-wrap;word-wrap:break-word;font:inherit;margin:0}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}.buv-u-slide-from-right{opacity:0;-webkit-transition:right ease .5s, opacity .2s;-moz-transition:right ease .5s, opacity .2s;-ms-transition:right ease .5s, opacity .2s;-o-transition:right ease .5s, opacity .2s;transition:right ease .5s, opacity .2s}.buv-u-slide-from-right.is-active{right:0;opacity:1}
</style>`,koe=he`<style>.buv-c-close-button{display:inline-block;overflow:hidden;cursor:pointer;border:0;width:20px;height:20px;position:absolute;background-color:transparent}.buv-c-close-button::before,.buv-c-close-button::after{content:'';position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:#000}.buv-c-close-button::before{transform:rotate(45deg)}.buv-c-close-button::after{transform:rotate(-45deg)}.buv-c-close-button--big{transform:scale(3)}.buv-c-close-button--hairline::before,.buv-c-close-button--hairline::after{height:1px}.buv-c-close-button--thick::before,.buv-c-close-button--thick::after{height:4px;margin-top:-2px}.buv-c-close-button--black::before,.buv-c-close-button--black::after{height:8px;margin-top:-4px}.buv-c-close-button--heavy::before,.buv-c-close-button--heavy::after{height:12px;margin-top:-6px}.buv-c-close-button--pointy::before,.buv-c-close-button--pointy::after{width:200%;left:-50%}.buv-c-close-button--rounded::before,.buv-c-close-button--rounded::after{border-radius:5px}.buv-c-close-button--blades::before,.buv-c-close-button--blades::after{border-radius:5px 0}.buv-c-close-button--warp::before,.buv-c-close-button--warp::after{border-radius:120% 0}.buv-c-close-button--fat::before,.buv-c-close-button--fat::after{border-radius:100%}.buv-c-close-button--position{position:relative}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;const Ioe=({onClick:e=(()=>{}),className:t=""}={})=>he`
    ${koe}
    <button onclick='${e}' class$='${`buv-c-close-button  buv-c-close-button--hairline  ${t||"buv-c-close-button--position"} `}'>
      <label class='buv-u-visually-hidden'>${Qne("text.closeButton")}</label>
    </button>
  `;window.customElements.define("buv-metadata-raw",class extends me{constructor(){super(),this.isOpen=!1,this.toggleOpen=this.toggleOpen.bind(this)}static get properties(){return{isOpen:Boolean,metadataList:Object,display:String}}toggleOpen(){this.isOpen=!this.isOpen}_render({metadataList:e,display:t}){const r=["buv-o-overlay","buv-c-metadata-container","buv-u-slide-from-right",this.isOpen?"is-active":""].join(" ");let n="";if(e){const t=function(e){return e.schema.properties.certificate.properties}(e);n=e.displayOrder.map((r=>{const n=r.split(".")[1],i=function(e,t){const r=t.split(".");return function e(t,r,n){const i=n.indexOf(r)+1,o=n[i];return o?Object.prototype.hasOwnProperty.call(t[r],o)?e(t[r],o,n):void 0:t[r]}(e,r[0],r)}(e,r);return function(e,t){let{title:r,format:n,type:i}=e;Array.isArray(i)&&(i=i[0]);const o=he`<dt class='buv-c-metadata-list__title'>${r}</dt>`;let s=!1,a="",u=t;if("string"===i)switch(n){case"uri":s=!0,a=t;break;case"email":a=`mailto:${t}`;break;case"phoneNumber":a=`tel:${t}`}a&&(u=he`<a href="${a}" target="${s?"_blank":""}" >${t}</a>`);const c=he`<dd class='buv-c-metadata-list__detail'>
            <pre class='buv-c-metadata-list__detail-text'>${u}</pre></dd>`;return he`${o}${c}`}(t[n],i)}))}const i="plaintext"===t,o=Qne(e?"text.metadataButton":"errors.noMetadata"),s=["buv-c-metadata-link","buv-o-button-link",i?"":"buv-c-metadata-link--icon"].join(" ");return he`
      ${Eoe}
      <button onclick='${this.toggleOpen}' 
        class$='${s}' 
        disabled?='${!e}' 
        aria-disabled?='${!e}'
        title$=${o}>
        <label class$='${i?"buv-o-button-link__label":"buv-u-visually-hidden"}'>${o}</label>
      </button>
      <section class$='${r}'>
        <h1 class='buv-c-metadata-container__title'>${Qne("text.metadataTitle")}</h1>
        ${Ioe({onClick:this.toggleOpen,className:"buv-c-metadata-container__close-button"})}
        <dl class='buv-c-metadata-list  buv-o-text-12'>${n}</dl>
      </section>
    `}});const Aoe=Die((function(e){return he`
    <buv-metadata-raw
      metadataList='${e.metadataList}'
      display='${e.display}'
    ></buv-metadata-raw>`}),{mapStateToProps:e=>({metadataList:fie(e)}),ownProps:{display:String}});window.customElements.define("buv-metadata",Aoe);var Toe=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-social-share-link{width:17px;height:17px;background-size:17px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Capa_1' x='0px' y='0px' viewBox='0 0 473.932 473.932' style='enable-background:new 0 0 473.932 473.932;' xml:space='preserve' width='24px' height='24px'%3E%3Cg%3E%3Cg%3E%3Cpath d='M385.513,301.214c-27.438,0-51.64,13.072-67.452,33.09l-146.66-75.002 c1.92-7.161,3.3-14.56,3.3-22.347c0-8.477-1.639-16.458-3.926-24.224l146.013-74.656c15.725,20.924,40.553,34.6,68.746,34.6 c47.758,0,86.391-38.633,86.391-86.348C471.926,38.655,433.292,0,385.535,0c-47.65,0-86.326,38.655-86.326,86.326 c0,7.809,1.381,15.229,3.322,22.412L155.892,183.74c-15.833-20.039-40.079-33.154-67.56-33.154 c-47.715,0-86.326,38.676-86.326,86.369s38.612,86.348,86.326,86.348c28.236,0,53.043-13.719,68.832-34.664l145.948,74.656 c-2.287,7.744-3.947,15.79-3.947,24.289c0,47.693,38.676,86.348,86.326,86.348c47.758,0,86.391-38.655,86.391-86.348 C471.904,339.848,433.271,301.214,385.513,301.214z' fill='%236e7e8e'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A")}.buv-c-social-share-modal{position:absolute;padding:38px 34px 34px;width:120px}.buv-c-social-share-modal__close-button{top:10px;right:10px}.buv-c-social-share-modal__list{list-style-type:none;margin:0;padding:0}.buv-c-social-share-modal__list-item{margin-bottom:24px}.buv-c-social-share-modal__list-item--plaintext{margin-bottom:5px;font-size:13px}.buv-c-social-share-modal__list-item:last-child{margin-bottom:0}.buv-c-social-share-modal__link{text-decoration:none}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;window.customElements.define("buv-social-share-raw",class extends me{constructor(){super(),this.isOpen=!1,this.toggleOpen=this.toggleOpen.bind(this)}static get properties(){return{url:String,isOpen:String,onShare:Function,display:String}}toggleOpen(){this.isOpen=!this.isOpen}sharingTemplate({url:e,onShare:t,display:r}){if(!this.isOpen)return;if(!e)return;const n="plaintext"===r,i=[{name:"LinkedIn",shareUrl:`https://www.linkedin.com/shareArticle?url=${e}&mini=true`},{name:"Facebook",shareUrl:`https://www.facebook.com/sharer/sharer.php?u=${e}`},{name:"Twitter",shareUrl:`https://twitter.com/intent/tweet?url=${e}`}].map((e=>he`<li class$='buv-c-social-share-modal__list-item  ${n?"buv-c-social-share-modal__list-item--plaintext":""}'>
            <a
              href='${e.shareUrl}'
              title='Share on ${e.name}'
              class='buv-o-link  buv-c-social-share-modal__link'
              target='_blank'
              onclick='${()=>{t(e.name)}}'
            >
              <span>${Qne("text.share")} ${e.name}</span>
            </a>
          </li>`)),o=he`<ul class='buv-c-social-share-modal__list'>
        ${i}
      </ul>`;return n?o:he`<div class='buv-c-social-share-modal  buv-o-text-12  buv-o-overlay'>
      ${Ioe({onClick:this.toggleOpen,className:"buv-c-social-share-modal__close-button"})}
      ${o}
    </div>`}sharingButton({url:e,display:t}){if("plaintext"===t)return void(this.isOpen=!0);const r=!!e,n=Qne(r?"text.shareButton":"text.noShareUrl");return he`<button 
        onclick='${this.toggleOpen}'
        class='buv-c-social-share-link  buv-o-button-link'
        disabled?='${!r}'
        aria-disabled?='${!r}'
        title$='${n}'
      >
      <label class='buv-u-visually-hidden'>${n}</label>
    </button>`}_render(e){return he`
      ${Toe}
      ${this.sharingButton(e)}
      ${this.sharingTemplate(e)}
    `}});const Poe={onShare:function(e){return function(t,r){const n=tie(r());Dre.events.dispatch("certificate-share",n,{socialNetwork:e}),t({type:"SHARE_SOCIAL_NETWORK"})}}},Ooe=Die((function(e){return he`
  <buv-social-share-raw
    url='${e.url}'
    onShare='${e.onShare}'
    display='${e.display}'
  ></buv-social-share-raw>`}),{mapDispatchToProps:Poe,mapStateToProps:e=>({url:lie(e)}),ownProps:{display:String}});window.customElements.define("buv-social-share",Ooe);var Coe=he`<style>.buv-c-action-menu{display:flex;align-items:center;padding:0}.buv-c-action-menu-item{flex-basis:30px}
</style>`;const Moe=Die((({allowDownload:e,allowSocialShare:t,showMetadata:r,isVisible:n})=>(e||t||r||(n=!1),n?he`
    ${Coe}
    <menu class='buv-c-action-menu'>
      ${r?he`<menuitem class='buv-c-action-menu-item'><buv-metadata></buv-metadata></menuitem>`:""}
      ${e?he`<menuitem class='buv-c-action-menu-item'><buv-download-link></buv-download-link></menuitem>`:""}
      ${t?he`<menuitem class='buv-c-action-menu-item'><buv-social-share></buv-social-share></menuitem>`:""}
    </menu>
  `:null)),{mapStateToProps:e=>({allowDownload:Gie(e),allowSocialShare:Jie(e),showMetadata:Xie(e),isVisible:Yie(e)===Nie&&!!tie(e)})});window.customElements.define("buv-action-menu",Moe);var Noe=he`<style>.buv-c-verification-modal__process{display:flex;justify-content:space-around}.buv-c-verification-modal__separator{margin-bottom:30px;background-color:rgba(3,21,50,0.05);height:1px;border:0 none}.buv-c-verification-modal__content{max-height:100vh;padding-bottom:43px;box-sizing:border-box;overflow:auto}@media only screen and (max-width: 600px){.buv-c-verification-modal__content{max-height:calc(100vh - 120px)}}
</style>`,Roe=he`<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;let Loe=!1,joe=!1;function Doe(e){return async function(t){t({type:"UPLOAD_CERTIFICATE_DEFINITION"});const r=await Dre.certificates.read(e);t(soe(JSON.parse(r)))}}const Boe=Die((function({onChange:e=(()=>{}),hideFileUpload:t=!1}){return t?null:he`
    ${Roe}
    <label for='buv-json-file-upload' class='buv-o-link  buv-o-text-12'>
      <span class='buv-o-link__text--underline'>${Qne("text.fileUpload")}</span>
      <input
        type='file'
        accept='application/json'
        id='buv-json-file-upload'
        class='buv-u-visually-hidden'
        onchange='${t=>{e(t.target.files[0])}}'
      />
    </label>
    ${(Loe?joe:(Loe=!0,!("ontouchstart"in document.createElement("div"))&&(joe=!0,joe)))?he`<span class="buv-o-text-12  qa-drag-and-drop-hint">${Qne("text.dragAndDropHint")}</span>`:""}`}),{mapDispatchToProps:{onChange:Doe},mapStateToProps:e=>({hideFileUpload:tie(e)})});function Uoe(){return function(e){e(qie()),e((function(e){e({type:"RESET_VERIFICATION_STATUS"}),e($ie(Dl.DEFAULT)),e(noe(null))})),e({type:Ye,payload:{definition:null}})}}window.customElements.define("buv-file-upload",Boe);var Foe=he`<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-verify-other-certificate{display:block}
</style>`;const zoe=Die((function({onClick:e=(()=>{}),isVisible:t=!1}={}){return t?he`
    ${Foe}
    <a onclick='${e}' class='buv-o-text-12  buv-o-link  buv-c-verify-other-certificate  buv-qa-verify-other-certificate'>
      <span class='buv-o-link__text--underline'>${Qne("text.verifyOther")}</span>
    </a>
  `:null}),{mapDispatchToProps:{onClick:Uoe},mapStateToProps:e=>({isVisible:!!tie(e)})});window.customElements.define("buv-verify-other-certificate",zoe);var Voe=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-footer{width:100%;height:60px;background-color:rgba(0,0,0,0.1);color:#031532;fill:#111;display:flex;justify-content:space-between;align-items:center;padding:0 30px;box-sizing:border-box}.buv-c-footer a{line-height:1}.buv-c-footer--dark{color:#fff;fill:#fff}.buv-c-footer--forced{position:absolute;bottom:0;left:0;margin-top:0;justify-content:flex-end}
</style>`,Hoe=he`<style>.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}.buv-c-logo{color:currentColor;text-decoration:none}.buv-c-logo--small{width:113px;height:16px}.buv-c-logo--medium{width:66%}.buv-c-logo__motto{font-size:12px}
</style>`;const Koe=({className:e,showMotto:t=!1}={})=>he`
  ${Hoe}
  <a href='https://www.blockcerts.org' title='${Qne("text.blockcertsHint")}' class$='buv-c-logo  ${e}'>
    ${t?he`
    <svg class='buv-qa-logo--branded  buv-c-logo--medium' version="1.1" viewBox="0 0 686 163" xmlns="http://www.w3.org/2000/svg">
      <g fill="none" fill-rule="evenodd">
        <g transform="translate(-76 -70)">
          <g transform="translate(76 53)">
            <path d="m119.52 35.613h21.191c9.8308 0 16.935 1.4323 21.313 4.2969 4.3783 2.8646 6.5674 7.3893 6.5674 13.574 0 4.1667-1.0742 7.6334-3.2227 10.4-2.1484 2.7669-5.2409 4.5085-9.2773 5.2246v0.48828c5.013 0.94402 8.6995 2.8076 11.06 5.5908 2.36 2.7832 3.54 6.5511 3.54 11.304 0 6.4128-2.2379 11.434-6.7139 15.063-4.4759 3.6296-10.701 5.4443-18.677 5.4443h-25.781v-71.387zm11.67 29.492h11.23c4.8828 0 8.4473-0.7731 10.693-2.3193s3.3691-4.1748 3.3691-7.8857c0-3.3529-1.2126-5.778-3.6377-7.2754-2.4251-1.4974-6.2744-2.2461-11.548-2.2461h-10.107v19.727zm0 9.4727v22.607h12.402c4.8828 0 8.5693-0.93586 11.06-2.8076 2.4902-1.8718 3.7354-4.8258 3.7354-8.8623 0-3.711-1.2695-6.4616-3.8086-8.252-2.5391-1.7904-6.3965-2.6855-11.572-2.6855h-11.816zm51.346 32.422v-71.387h11.67v61.377h30.225v10.01h-41.895zm112.58-35.791c0 11.621-2.9052 20.654-8.7158 27.1-5.8106 6.4453-14.038 9.668-24.683 9.668-10.775 0-19.051-3.1982-24.829-9.5947-5.778-6.3965-8.667-15.487-8.667-27.271s2.9052-20.833 8.7158-27.148c5.8106-6.3151 14.103-9.4727 24.878-9.4727 10.612 0 18.815 3.2063 24.609 9.6191s8.6914 15.446 8.6914 27.1zm-54.492 0c0 8.7891 1.7741 15.454 5.3223 19.995 3.5482 4.541 8.8053 6.8115 15.771 6.8115 6.9336 0 12.166-2.2461 15.698-6.7383 3.5319-4.4922 5.2979-11.182 5.2979-20.068 0-8.7566-1.7497-15.397-5.249-19.922-3.4994-4.5248-8.7158-6.7871-15.649-6.7871-6.9987 0-12.28 2.2623-15.845 6.7871s-5.3467 11.165-5.3467 19.922zm97.195-26.611c-6.7058 0-11.979 2.3763-15.82 7.1289-3.8412 4.7526-5.7617 11.312-5.7617 19.678 0 8.7566 1.8473 15.381 5.542 19.873 3.6947 4.4922 9.0413 6.7383 16.04 6.7383 3.0274 0 5.957-0.3011 8.7891-0.90332 2.832-0.60222 5.778-1.3753 8.8379-2.3193v10.01c-5.599 2.1159-11.947 3.1738-19.043 3.1738-10.449 0-18.473-3.1657-24.072-9.4971-5.599-6.3314-8.3984-15.389-8.3984-27.173 0-7.4219 1.359-13.916 4.0771-19.482 2.7181-5.5664 6.6487-9.8307 11.792-12.793s11.182-4.4434 18.115-4.4434c7.2917 0 14.03 1.5299 20.215 4.5898l-4.1992 9.7168c-2.4089-1.1393-4.956-2.1403-7.6416-3.0029-2.6856-0.86263-5.5094-1.2939-8.4717-1.2939zm84.5 62.402h-13.525l-22.412-32.324-6.8848 5.6152v26.709h-11.67v-71.387h11.67v34.082c3.1901-3.9063 6.3639-7.666 9.5215-11.279l19.287-22.803h13.281c-12.468 14.649-21.403 25.081-26.807 31.299l27.539 40.088zm37.576-67.92c-8.9519 0-15.999 2.8646-21.143 8.5938s-7.7148 13.574-7.7148 23.535c0 10.189 2.4251 18.099 7.2754 23.73 4.8503 5.6315 11.784 8.4473 20.801 8.4473 5.9896 0 11.491-0.76497 16.504-2.2949v4.3945c-4.7201 1.6602-10.612 2.4902-17.676 2.4902-10.026 0-17.92-3.2389-23.682-9.7168-5.7617-6.4779-8.6426-15.527-8.6426-27.148 0-7.2592 1.3753-13.656 4.126-19.189 2.7507-5.5339 6.7057-9.8063 11.865-12.817s11.157-4.5166 17.993-4.5166c6.9662 0 13.2 1.3021 18.701 3.9062l-2.002 4.4922c-5.2084-2.6042-10.677-3.9062-16.406-3.9062zm67.654 67.92h-39.014v-71.387h39.014v4.5898h-34.033v27.002h32.129v4.5898h-32.129v30.615h34.033v4.5898zm18.143-31.104v31.104h-4.9805v-71.387h16.992c8.8542 0 15.397 1.6357 19.629 4.9072s6.3477 8.195 6.3477 14.771c0 4.7852-1.2614 8.8216-3.7842 12.109-2.5228 3.2878-6.3558 5.6478-11.499 7.0801l19.385 32.52h-5.957l-18.408-31.104h-17.725zm0-4.2969h13.623c6.0222 0 10.693-1.3428 14.014-4.0283s4.9805-6.6487 4.9805-11.89c0-5.4362-1.6276-9.3913-4.8828-11.865-3.2552-2.474-8.5612-3.7109-15.918-3.7109h-11.816v31.494zm70.047 35.4h-5.0293v-66.699h-23.193v-4.6875h51.416v4.6875h-23.193v66.699zm70.193-18.408c0 5.9571-2.1891 10.677-6.5674 14.16-4.3783 3.4831-10.197 5.2246-17.456 5.2246-8.724 0-15.413-0.96028-20.068-2.8809v-4.9805c5.1433 2.181 11.702 3.2715 19.678 3.2715 5.8594 0 10.506-1.3428 13.94-4.0283 3.4343-2.6856 5.1514-6.2093 5.1514-10.571 0-2.7018-0.56966-4.9398-1.709-6.7139-1.1393-1.7741-2.9948-3.3935-5.5664-4.8584-2.5716-1.4649-6.3476-3.0436-11.328-4.7363-7.2917-2.5065-12.329-5.2165-15.112-8.1299s-4.1748-6.7952-4.1748-11.646c0-5.3386 2.0914-9.6924 6.2744-13.062 4.183-3.3692 9.5621-5.0537 16.138-5.0537 6.7058 0 13.005 1.2695 18.896 3.8086l-1.8066 4.2969c-5.9245-2.474-11.589-3.7109-16.992-3.7109-5.2735 0-9.4726 1.2207-12.598 3.6621-3.125 2.4414-4.6875 5.7617-4.6875 9.9609 0 2.6367 0.48014 4.8014 1.4404 6.4941 0.96029 1.6927 2.5309 3.2145 4.7119 4.5654 2.181 1.3509 5.9245 2.9704 11.23 4.8584 5.5664 1.9206 9.7493 3.7842 12.549 5.5908 2.7995 1.8066 4.8421 3.8574 6.1279 6.1523 1.2858 2.2949 1.9287 5.07 1.9287 8.3252z" fill="#182650" fill-rule="nonzero"/>
            <rect transform="translate(33.5 82) rotate(90) translate(-33.5 -82)" x="28.5" y="48.5" width="10" height="67" rx="5" fill="#2AB27B"/>
            <rect transform="translate(82 82) rotate(90) translate(-82 -82)" x="77" y="77" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(53 102) rotate(90) translate(-53 -102)" x="48" y="97" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(82 42) rotate(90) translate(-82 -42)" x="77" y="37" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(5 42) rotate(90) translate(-5 -42)" y="37" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(44 22) rotate(90) translate(-44 -22)" x="39" y="17" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(34 62) rotate(90) translate(-34 -62)" x="29" y="57" width="10" height="10" rx="5" fill="#2AB27B"/>
            <rect transform="translate(73 22) rotate(90) translate(-73 -22)" x="68" y="8" width="10" height="28" rx="5" fill="#2AB27B"/>
            <rect transform="translate(14.5 22) rotate(90) translate(-14.5 -22)" x="9.5" y="7.5" width="10" height="29" rx="5" fill="#2AB27B"/>
            <rect transform="translate(68 62) rotate(90) translate(-68 -62)" x="63" y="43" width="10" height="38" rx="5" fill="#2AB27B"/>
            <rect transform="translate(9.5 62) rotate(90) translate(-9.5 -62)" x="4.5" y="52.5" width="10" height="19" rx="5" fill="#2AB27B"/>
            <rect transform="translate(77.5 102) rotate(90) translate(-77.5 -102)" x="72.5" y="92.5" width="10" height="19" rx="5" fill="#2AB27B"/>
            <rect transform="translate(19 102) rotate(90) translate(-19 -102)" x="14" y="83" width="10" height="38" rx="5" fill="#2AB27B"/>
            <rect transform="translate(43.5 42) rotate(90) translate(-43.5 -42)" x="38.5" y="18.5" width="10" height="47" rx="5" fill="#2AB27B"/>
            <path d="m10.013 172h-2.6147v-20.164h-7.1213v-2.3225h16.857v2.3225h-7.1213v20.164zm21.656 0v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7739 0-3.0685 0.48193-3.8837 1.4458s-1.2228 2.543-1.2228 4.7373v8.8132h-2.5532v-23.933h2.5532v7.2444c0 0.87159-0.041015 1.5945-0.12305 2.1687h0.15381c0.50244-0.81006 1.2176-1.4484 2.1456-1.9149 0.92798-0.46656 1.9867-0.69983 3.1761-0.69983 2.061 0 3.6068 0.48962 4.6373 1.4689 1.0305 0.97925 1.5458 2.5353 1.5458 4.6681v10.997h-2.5532zm14.919 0.30762c-2.4917 0-4.4579-0.75878-5.8986-2.2764-1.4407-1.5176-2.161-3.6247-2.161-6.3215 0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826s-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm39.329 3.7529c0 3.5991-0.91003 6.4292-2.7301 8.4902-1.8201 2.061-4.3502 3.0916-7.5905 3.0916-3.312 0-5.8678-1.0126-7.6674-3.0377-1.7996-2.0252-2.6993-4.8834-2.6993-8.5748 0-3.6607 0.90233-6.4984 2.707-8.5133 1.8047-2.0149 4.3681-3.0223 7.6904-3.0223 3.23 0 5.7524 1.0254 7.5674 3.0762 1.815 2.0508 2.7224 4.8808 2.7224 8.4902zm-17.919 0c0 3.0454 0.64855 5.3551 1.9457 6.9291 1.2971 1.574 3.1813 2.361 5.6525 2.361 2.4917 0 4.3733-0.78442 5.6448-2.3533 1.2715-1.5689 1.9072-3.8811 1.9072-6.9368 0-3.0249-0.63317-5.3192-1.8995-6.8829-1.2664-1.5637-3.1402-2.3456-5.6217-2.3456-2.4917 0-4.3861 0.78698-5.6832 2.361-1.2971 1.574-1.9457 3.8631-1.9457 6.8676zm30.393 11.582c-1.0972 0-2.0995-0.20251-3.007-0.60754-0.90748-0.40503-1.6688-1.028-2.2841-1.8688h-0.18457c0.12305 0.98438 0.18457 1.9175 0.18457 2.7993v6.9368h-2.5532v-24.425h2.0764l0.35376 2.3071h0.12305c0.65625-0.92286 1.4202-1.5894 2.2917-1.9995 0.87159-0.41016 1.8713-0.61523 2.9993-0.61523 2.2354 0 3.9606 0.76391 5.1757 2.2917s1.8226 3.6709 1.8226 6.4292c0 2.7686-0.61779 4.9193-1.8534 6.4523-1.2356 1.533-2.9506 2.2994-5.1449 2.2994zm-0.36914-15.304c-1.7227 0-2.9685 0.4768-3.7375 1.4304s-1.1638 2.4712-1.1843 4.5527v0.56909c0 2.3687 0.39477 4.0631 1.1843 5.0834s2.0559 1.5304 3.7991 1.5304c1.4561 0 2.5968-0.58959 3.4222-1.7688 0.82544-1.1792 1.2382-2.8044 1.2382-4.8757 0-2.1021-0.41272-3.7145-1.2382-4.8373-0.82544-1.1228-1.9867-1.6842-3.4838-1.6842zm18.949 15.304c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.779 15.027v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689 1.0254 0.97925 1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm29.054-5.9832c0 1.979-0.71777 3.5222-2.1533 4.6296-1.4356 1.1074-3.3838 1.6611-5.8447 1.6611-2.666 0-4.7168-0.3435-6.1523-1.0305v-2.5225c0.92286 0.38965 1.9277 0.69726 3.0146 0.92285 1.0869 0.22559 2.1636 0.33838 3.23 0.33838 1.7432 0 3.0557-0.33068 3.9375-0.99206 0.88184-0.66138 1.3228-1.5817 1.3228-2.7609 0-0.7793-0.15637-1.4176-0.46912-1.9149-0.31274-0.49732-0.83569-0.95617-1.5688-1.3766-0.73316-0.42041-1.8483-0.89722-3.3453-1.4304-2.0918-0.74854-3.5863-1.6355-4.4835-2.6609s-1.3458-2.3635-1.3458-4.0144c0-1.7329 0.65112-3.1121 1.9534-4.1375 1.3023-1.0254 3.0249-1.5381 5.168-1.5381 2.2354 0 4.2912 0.41015 6.1677 1.2305l-0.81518 2.2764c-1.856-0.7793-3.6606-1.1689-5.4141-1.1689-1.3843 0-2.4661 0.29736-3.2454 0.89209s-1.1689 1.4202-1.1689 2.4763c0 0.7793 0.14355 1.4176 0.43066 1.9149s0.7716 0.95361 1.4535 1.3689 1.7252 0.87414 3.13 1.3766c2.3584 0.84082 3.9811 1.7432 4.868 2.707s1.3304 2.2148 1.3304 3.7529zm9.6592 4.1836c0.45117 0 0.88696-0.033324 1.3074-0.099975s0.75366-0.13586 0.99976-0.20764v1.9534c-0.27686 0.1333-0.68445 0.24353-1.2228 0.33069-0.53833 0.087159-1.0228 0.13074-1.4535 0.13074-3.2608 0-4.8911-1.7175-4.8911-5.1526v-10.028h-2.4148v-1.2305l2.4148-1.0613 1.0767-3.5991h1.4766v3.9067h4.8911v1.9841h-4.8911v9.9207c0 1.0151 0.24096 1.7944 0.7229 2.3379s1.1433 0.81518 1.9841 0.81518zm16.042 1.7996l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613s1.9816-0.38452 2.9762-0.38452c2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072s1.3407 0.7229 2.3456 0.7229zm24.456 1.7996v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm19.272-2.261h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9196-0.75365-5.1449-2.261-1.2253-1.5073-1.838-3.6504-1.838-6.4292 0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061523-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227s1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141s-2.0636-1.5304-3.8068-1.5304c-1.4971 0-2.6429 0.5819-3.4376 1.7457s-1.192 2.807-1.192 4.9296c0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78955 1.0972 1.9482 1.6458 3.4761 1.6458zm23.302 1.8303l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm20.61-15.365c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm16.011 14.904h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9195-0.75365-5.1449-2.261s-1.838-3.6504-1.838-6.4292c0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061524-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227 0.78443-0.94849 1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141-0.79468-1.0203-2.0636-1.5304-3.8068-1.5304-1.4971 0-2.6429 0.5819-3.4376 1.7457-0.79468 1.1638-1.192 2.807-1.192 4.9296 0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78956 1.0972 1.9482 1.6458 3.4761 1.6458zm24.117 1.8303h-2.6147v-22.487h12.535v2.3225h-9.9207v8.2288h9.3208v2.3225h-9.3208v9.613zm27.809-8.4441c0 2.7481-0.69213 4.8937-2.0764 6.4369-1.3843 1.5432-3.2966 2.3148-5.7371 2.3148-1.5073 0-2.8455-0.35376-4.0144-1.0613s-2.0713-1.7226-2.707-3.0454c-0.63575-1.3228-0.95361-2.8711-0.95361-4.645 0-2.7481 0.687-4.8885 2.061-6.4215 1.374-1.533 3.2812-2.2994 5.7217-2.2994 2.3584 0 4.2323 0.78442 5.6217 2.3533 1.3894 1.5689 2.0841 3.6914 2.0841 6.3677zm-12.843 0c0 2.1533 0.43066 3.7939 1.292 4.9219 0.86133 1.1279 2.1277 1.6919 3.7991 1.6919s2.9403-0.5614 3.8068-1.6842c0.86646-1.1228 1.2997-2.766 1.2997-4.9296 0-2.1431-0.43322-3.7709-1.2997-4.8834-0.86646-1.1126-2.1456-1.6688-3.8375-1.6688-1.6714 0-2.9326 0.54858-3.7837 1.6458-0.85108 1.0972-1.2766 2.7327-1.2766 4.9065zm25.009-8.7209c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm13.735-5.3218h6.3523c2.9839 0 5.1423 0.44604 6.4753 1.3381 1.333 0.8921 1.9995 2.302 1.9995 4.2297 0 1.333-0.3717 2.4327-1.1151 3.2992s-1.8278 1.4279-3.2531 1.6842v0.15381c3.4146 0.58448 5.1218 2.3789 5.1218 5.3833 0 2.0098-0.67931 3.5786-2.038 4.7065-1.3586 1.1279-3.2582 1.6919-5.6986 1.6919h-7.8442v-22.487zm2.6147 9.6284h4.3066c1.8457 0 3.1736-0.28967 3.9836-0.86902 0.81006-0.57935 1.2151-1.556 1.2151-2.9301 0-1.2612-0.45117-2.1713-1.3535-2.7301-0.90235-0.55884-2.3379-0.83826-4.3066-0.83826h-3.8452v7.3674zm0 2.2148v8.4133h4.6912c1.815 0 3.1813-0.35119 4.099-1.0536 0.91773-0.7024 1.3766-1.8021 1.3766-3.2992 0-1.3945-0.46911-2.4199-1.4073-3.0762-0.93824-0.65625-2.3661-0.98438-4.2836-0.98438h-4.4758zm19.964 10.644h-2.5532v-23.933h2.5532v23.933zm19.964-8.4441c0 2.7481-0.69213 4.8937-2.0764 6.4369-1.3843 1.5432-3.2966 2.3148-5.7371 2.3148-1.5073 0-2.8455-0.35376-4.0144-1.0613s-2.0713-1.7226-2.707-3.0454c-0.63575-1.3228-0.95361-2.8711-0.95361-4.645 0-2.7481 0.687-4.8885 2.061-6.4215 1.374-1.533 3.2812-2.2994 5.7217-2.2994 2.3584 0 4.2323 0.78442 5.6217 2.3533 1.3894 1.5689 2.0841 3.6914 2.0841 6.3677zm-12.843 0c0 2.1533 0.43066 3.7939 1.292 4.9219 0.86133 1.1279 2.1277 1.6919 3.7991 1.6919s2.9403-0.5614 3.8068-1.6842c0.86646-1.1228 1.2997-2.766 1.2997-4.9296 0-2.1431-0.43322-3.7709-1.2997-4.8834-0.86646-1.1126-2.1456-1.6688-3.8375-1.6688-1.6714 0-2.9326 0.54858-3.7837 1.6458-0.85108 1.0972-1.2766 2.7327-1.2766 4.9065zm24.056 8.7517c-2.4404 0-4.3297-0.75109-5.6678-2.2533-1.3381-1.5022-2.0072-3.6273-2.0072-6.3754 0-2.8198 0.67931-4.9988 2.038-6.5369 1.3586-1.5381 3.2941-2.3071 5.8063-2.3071 0.81006 0 1.6201 0.087157 2.4302 0.26148 0.81006 0.17432 1.4458 0.37939 1.9072 0.61523l-0.78442 2.1687c-0.56397-0.22559-1.1792-0.41272-1.8457-0.5614-0.66651-0.14868-1.2561-0.22302-1.7688-0.22302-3.4248 0-5.1372 2.1841-5.1372 6.5522 0 2.0713 0.41784 3.6606 1.2535 4.7681 0.8357 1.1074 2.0738 1.6611 3.7145 1.6611 1.4048 0 2.8455-0.30249 4.322-0.90747v2.261c-1.1279 0.58448-2.5481 0.87671-4.2605 0.87671zm10.782-8.9363c0.44092-0.62549 1.1125-1.4458 2.0149-2.4609l5.4448-5.7678h3.03l-6.8291 7.1829 7.3059 9.6746h-3.0916l-5.9524-7.9673-1.9226 1.6611v6.3062h-2.5225v-23.933h2.5225v12.689c0 0.56397-0.041015 1.4355-0.12305 2.6147h0.12305zm20.118 8.9363c-2.4404 0-4.3297-0.75109-5.6678-2.2533-1.3381-1.5022-2.0072-3.6273-2.0072-6.3754 0-2.8198 0.67932-4.9988 2.038-6.5369 1.3586-1.5381 3.2941-2.3071 5.8063-2.3071 0.81006 0 1.6201 0.087157 2.4302 0.26148 0.81006 0.17432 1.4458 0.37939 1.9072 0.61523l-0.78442 2.1687c-0.56397-0.22559-1.1792-0.41272-1.8457-0.5614-0.66651-0.14868-1.2561-0.22302-1.7688-0.22302-3.4248 0-5.1372 2.1841-5.1372 6.5522 0 2.0713 0.41784 3.6606 1.2535 4.7681 0.8357 1.1074 2.0738 1.6611 3.7145 1.6611 1.4048 0 2.8455-0.30249 4.322-0.90747v2.261c-1.1279 0.58448-2.5481 0.87671-4.2605 0.87671zm19.795-0.30762v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7739 0-3.0685 0.48193-3.8837 1.4458-0.81519 0.96387-1.2228 2.543-1.2228 4.7373v8.8132h-2.5532v-23.933h2.5532v7.2444c0 0.87159-0.041015 1.5945-0.12305 2.1687h0.15381c0.50244-0.81006 1.2176-1.4484 2.1456-1.9149s1.9867-0.69983 3.1761-0.69983c2.061 0 3.6068 0.48962 4.6373 1.4689s1.5458 2.5353 1.5458 4.6681v10.997h-2.5532zm18.165 0l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm15.473 1.7996h-2.5532v-16.857h2.5532v16.857zm-2.7686-21.426c0-0.58448 0.14355-1.0126 0.43066-1.2843 0.28711-0.27173 0.64599-0.40759 1.0767-0.40759 0.41016 0 0.76391 0.13843 1.0613 0.41528 0.29736 0.27686 0.44604 0.70239 0.44604 1.2766s-0.14868 1.0023-0.44604 1.2843c-0.29736 0.28198-0.65112 0.42297-1.0613 0.42297-0.43067 0-0.78955-0.14099-1.0767-0.42297-0.28711-0.28198-0.43066-0.71008-0.43066-1.2843zm19.718 21.426v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7637 0-3.0557 0.4768-3.876 1.4304s-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm25.994-20.472c-2.4712 0-4.422 0.82287-5.8524 2.4686-1.4304 1.6458-2.1456 3.899-2.1456 6.7599 0 2.9429 0.68957 5.2167 2.0687 6.8214s3.3453 2.4071 5.8986 2.4071c1.5689 0 3.3581-0.28198 5.3679-0.84595v2.2917c-1.5586 0.58448-3.4812 0.87671-5.7678 0.87671-3.312 0-5.8678-1.0049-7.6674-3.0146-1.7996-2.0098-2.6993-4.8655-2.6993-8.5671 0-2.3174 0.43322-4.3476 1.2997-6.0908 0.86646-1.7432 2.1174-3.0864 3.7529-4.0298 1.6355-0.94336 3.5607-1.415 5.7755-1.415 2.3584 0 4.4194 0.43066 6.1831 1.292l-1.1074 2.2456c-1.7022-0.79981-3.4043-1.1997-5.1064-1.1997zm17.55 3.3069c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm11.659 17.473c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.718 12.766h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9196-0.75365-5.1449-2.261s-1.838-3.6504-1.838-6.4292c0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061524-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227 0.78443-0.94849 1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141-0.79468-1.0203-2.0636-1.5304-3.8068-1.5304-1.4971 0-2.6429 0.5819-3.4376 1.7457s-1.192 2.807-1.192 4.9296c0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78955 1.0972 1.9482 1.6458 3.4761 1.6458zm20.057 2.1379c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.779 15.027v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm13.243-1.7996c0.45118 0 0.88696-0.033324 1.3074-0.099975 0.42041-0.066651 0.75366-0.13586 0.99976-0.20764v1.9534c-0.27686 0.1333-0.68444 0.24353-1.2228 0.33069s-1.0228 0.13074-1.4535 0.13074c-3.2608 0-4.8911-1.7175-4.8911-5.1526v-10.028h-2.4148v-1.2305l2.4148-1.0613 1.0767-3.5991h1.4766v3.9067h4.8911v1.9841h-4.8911v9.9207c0 1.0151 0.24096 1.7944 0.7229 2.3379s1.1433 0.81518 1.9841 0.81518zm8.2288 1.7996h-2.5532v-16.857h2.5532v16.857zm-2.7686-21.426c0-0.58448 0.14355-1.0126 0.43066-1.2843 0.28711-0.27173 0.64599-0.40759 1.0767-0.40759 0.41016 0 0.76391 0.13843 1.0613 0.41528 0.29736 0.27686 0.44604 0.70239 0.44604 1.2766s-0.14868 1.0023-0.44604 1.2843c-0.29736 0.28198-0.65112 0.42297-1.0613 0.42297-0.43067 0-0.78955-0.14099-1.0767-0.42297-0.28711-0.28198-0.43066-0.71008-0.43066-1.2843zm18.549 21.426l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm15.473 1.7996h-2.5532v-23.933h2.5532v23.933zm16.288-4.5989c0 1.5689-0.58447 2.7788-1.7534 3.6299-1.169 0.85108-2.8096 1.2766-4.9219 1.2766-2.2354 0-3.9785-0.35376-5.2295-1.0613v-2.3687c0.81006 0.41016 1.6791 0.73315 2.6071 0.96899s1.8226 0.35376 2.684 0.35376c1.333 0 2.3584-0.21277 3.0762-0.6383s1.0767-1.0741 1.0767-1.9457c0-0.65625-0.28454-1.2176-0.85364-1.6842s-1.6791-1.0177-3.33-1.6534c-1.5689-0.58448-2.684-1.0946-3.3453-1.5304s-1.1536-0.93054-1.4766-1.4843c-0.323-0.55371-0.4845-1.2151-0.4845-1.9841 0-1.374 0.55883-2.4584 1.6765-3.2531 1.1177-0.79468 2.6506-1.192 4.5989-1.192 1.815 0 3.5889 0.36914 5.3218 1.1074l-0.90747 2.0764c-1.6919-0.69727-3.2248-1.0459-4.5989-1.0459-1.21 0-2.1226 0.1897-2.7378 0.56909-0.61524 0.3794-0.92285 0.90234-0.92285 1.5688 0 0.45117 0.11536 0.83569 0.34607 1.1536 0.23071 0.31787 0.60241 0.62036 1.1151 0.90747s1.4971 0.70239 2.9531 1.2458c1.9995 0.72803 3.3505 1.4612 4.0529 2.1995 0.7024 0.73828 1.0536 1.6663 1.0536 2.7839z" fill="#182650" fill-rule="nonzero"/>
          </g>
        </g>
      </g>
    </svg>
    <span class='buv-u-visually-hidden'>${Qne("text.motto")}</span>
  `:he`
    <svg class='buv-qa-logo--simple  buv-c-logo--small' viewBox="0 0 113 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs></defs>
        <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd" fill-opacity="0.37">
          <g id="blockcerts-logo" transform="translate(0.000000, -2.000000)" fill-rule="nonzero" fill="inherit">
            <path d="M19.5,5.06256945 L22.9958467,5.06256945 C24.617584,5.06256945 25.789567,5.29884552 26.5118308,5.77140473 C27.2340946,6.24396395 27.5952211,6.99038151 27.5952211,8.01067982 C27.5952211,8.69803869 27.4180141,9.26993416 27.0635947,9.72638339 C26.7091752,10.1828327 26.1990337,10.4701229 25.5331548,10.5882627 L25.5331548,10.6688121 C26.3601335,10.8245419 26.9682758,11.1319693 27.3576002,11.5911035 C27.7469246,12.0502377 27.9415838,12.6718049 27.9415838,13.4558236 C27.9415838,14.5137118 27.5724025,15.3420205 26.8340287,15.9407745 C26.0956549,16.5395285 25.0686595,16.8389011 23.7530117,16.8389011 L19.5,16.8389011 L19.5,5.06256945 Z M21.4251322,9.92775706 L23.2777698,9.92775706 C24.0832685,9.92775706 24.6712737,9.80022169 25.0418031,9.54514712 C25.4123325,9.29007254 25.5975944,8.85645225 25.5975944,8.24427327 C25.5975944,7.69116419 25.3975653,7.29110585 24.9975009,7.04408626 C24.5974366,6.79706667 23.9624447,6.67355873 23.0925061,6.67355873 L21.4251322,6.67355873 L21.4251322,9.92775706 Z M21.4251322,11.4904167 L21.4251322,15.2198568 L23.4710886,15.2198568 C24.2765872,15.2198568 24.8847296,15.0654719 25.2955339,14.7566974 C25.7063383,14.4479229 25.9117373,13.9606036 25.9117373,13.2947247 C25.9117373,12.6825457 25.7023108,12.2287882 25.2834515,11.9334387 C24.8645922,11.6380892 24.2282578,11.4904167 23.3744292,11.4904167 L21.4251322,11.4904167 Z M29.8953916,16.8389011 L29.8953916,5.06256945 L31.8205237,5.06256945 L31.8205237,15.1876371 L36.8065356,15.1876371 L36.8065356,16.8389011 L29.8953916,16.8389011 Z M48.4665536,10.9346254 C48.4665536,12.8517122 47.9872891,14.3418624 47.0287457,15.4051206 C46.0702024,16.4683789 44.7129575,17 42.9569704,17 C41.1795033,17 39.8142036,16.4724063 38.8610302,15.417203 C37.9078567,14.3619998 37.4312772,12.8624522 37.4312772,10.9185155 C37.4312772,8.97457869 37.9105417,7.48174356 38.8690851,6.43996528 C39.8276285,5.39818701 41.1956132,4.87730568 42.9730803,4.87730568 C44.7236973,4.87730568 46.0769148,5.40624187 47.0327734,6.46413012 C47.9886317,7.52201836 48.4665536,9.01216855 48.4665536,10.9346254 Z M39.4772336,10.9346254 C39.4772336,12.384523 39.7698937,13.4840121 40.3552227,14.2331259 C40.9405517,14.9822397 41.8077923,15.3567909 42.9569704,15.3567909 C44.1007786,15.3567909 44.9639915,14.9862671 45.5466357,14.2452083 C46.1292796,13.5041496 46.4205973,12.4006329 46.4205973,10.9346254 C46.4205973,9.49009776 46.1319648,8.39463599 45.5546906,7.64820724 C44.9774165,6.90177847 44.1168884,6.52856969 42.9730803,6.52856969 C41.8185322,6.52856969 40.9472642,6.90177847 40.3592502,7.64820724 C39.7712361,8.39463599 39.4772336,9.49009776 39.4772336,10.9346254 Z M55.5110875,6.54467959 C54.4048694,6.54467959 53.5349439,6.93668306 52.9012851,7.72070175 C52.267626,8.50472046 51.9508013,9.58675743 51.9508013,10.9668451 C51.9508013,12.4113727 52.2555437,13.5041496 52.8650377,14.2452083 C53.4745317,14.9862671 54.3565394,15.3567909 55.5110875,15.3567909 C56.0104969,15.3567909 56.4937888,15.3071193 56.960978,15.2077744 C57.4281673,15.1084296 57.9141441,14.9808942 58.4189233,14.8251645 L58.4189233,16.4764285 C57.4952848,16.8254779 56.4481523,17 55.2774942,17 C53.5537269,17 52.230044,16.4777762 51.3064055,15.4333129 C50.3827671,14.3888497 49.9209548,12.894672 49.9209548,10.9507353 C49.9209548,9.72637727 50.1451485,8.65508014 50.5935427,7.73681166 C51.041937,6.81854317 51.6903538,6.11508489 52.5388124,5.6264157 C53.3872709,5.13774651 54.3833893,4.89341558 55.5271976,4.89341558 C56.7300756,4.89341558 57.841647,5.14580137 58.8619454,5.65058054 L58.1692199,7.25351487 C57.7718405,7.06556518 57.3516451,6.90044043 56.9086208,6.75813566 C56.4655966,6.6158309 55.9997568,6.54467959 55.5110875,6.54467959 Z M69.4506556,16.8389011 L67.2194355,16.8389011 L63.522215,11.5065265 L62.3864676,12.4328454 L62.3864676,16.8389011 L60.4613353,16.8389011 L60.4613353,5.06256945 L62.3864676,5.06256945 L62.3864676,10.684922 C62.9127266,10.0405231 63.4362929,9.42029843 63.9571822,8.82422942 L67.1388858,5.06256945 L69.3298314,5.06256945 C67.2731248,7.47906546 65.7990842,9.20012177 64.9076657,10.2257901 L69.4506556,16.8389011 Z M75.6494201,5.63447064 C74.1726725,5.63447064 73.0100869,6.10702277 72.1616284,7.05214121 C71.3131696,7.99725964 70.8889467,9.29140808 70.8889467,10.9346254 C70.8889467,12.6154326 71.2890051,13.9203209 72.0891337,14.8493293 C72.8892625,15.7783378 74.0330533,16.242835 75.5205409,16.242835 C76.5086192,16.242835 77.4161342,16.1166421 78.2431127,15.8642525 L78.2431127,16.5891977 C77.4644642,16.8630673 76.4925103,17 75.3272222,17 C73.673265,17 72.3710617,16.4656939 71.4205732,15.3970657 C70.4700848,14.3284374 69.9948476,12.8356023 69.9948476,10.9185155 C69.9948476,9.72100746 70.2217264,8.66582002 70.6754907,7.75292154 C71.129255,6.84002305 71.781699,6.13522229 72.6328427,5.63849812 C73.4839862,5.14177394 74.4733922,4.89341558 75.6010904,4.89341558 C76.7502684,4.89341558 77.7786064,5.108212 78.6861348,5.53781129 L78.355882,6.27886635 C77.4966834,5.84926707 76.5945384,5.63447064 75.6494201,5.63447064 Z M86.8100316,16.8389011 L80.3741293,16.8389011 L80.3741293,5.06256945 L86.8100316,5.06256945 L86.8100316,5.81973441 L81.1957339,5.81973441 L81.1957339,10.2741198 L86.4958886,10.2741198 L86.4958886,11.0312847 L81.1957339,11.0312847 L81.1957339,16.0817361 L86.8100316,16.0817361 L86.8100316,16.8389011 Z M89.8029274,11.7079002 L89.8029274,16.8389011 L88.9813228,16.8389011 L88.9813228,5.06256945 L91.7844442,5.06256945 C93.2450817,5.06256945 94.3244339,5.33240746 95.0225327,5.87209156 C95.7206316,6.41177567 96.0696758,7.22397464 96.0696758,8.30871284 C96.0696758,9.09810153 95.8615917,9.76397044 95.4454173,10.3063395 C95.0292429,10.8487086 94.396936,11.2380272 93.5484774,11.4743068 L96.7462912,16.8389011 L95.7635877,16.8389011 L92.726873,11.7079002 L89.8029274,11.7079002 Z M89.8029274,10.9990649 L92.0502574,10.9990649 C93.0437059,10.9990649 93.814288,10.7775561 94.3620271,10.3345318 C94.909766,9.8915076 95.1836315,9.23772099 95.1836315,8.37315242 C95.1836315,7.4763639 94.9151361,6.82391977 94.378137,6.41580044 C93.8411379,6.00768112 92.9658423,5.80362452 91.7522245,5.80362452 L89.8029274,5.80362452 L89.8029274,10.9990649 Z M101.358231,16.8389011 L100.528572,16.8389011 L100.528572,5.8358443 L96.7024723,5.8358443 L96.7024723,5.06256945 L105.184331,5.06256945 L105.184331,5.8358443 L101.358231,5.8358443 L101.358231,16.8389011 Z M112.9377,13.8021863 C112.9377,14.7848947 112.576573,15.5635317 111.85431,16.1381207 C111.132046,16.7127098 110.172174,17 108.974666,17 C107.535509,17 106.431992,16.8415876 105.664083,16.5247582 L105.664083,15.7031536 C106.512542,16.062943 107.594579,16.242835 108.910227,16.242835 C109.876825,16.242835 110.64338,16.0213262 111.209914,15.5783019 C111.776448,15.1352777 112.059711,14.5539849 112.059711,13.8344061 C112.059711,13.3886968 111.965737,13.0195154 111.777788,12.7268509 C111.589838,12.4341864 111.283753,12.1670334 110.859524,11.9253838 C110.435294,11.6837342 109.812385,11.4232935 108.990776,11.144054 C107.787898,10.7305647 106.956904,10.2835196 106.49777,9.80290539 C106.038636,9.32229119 105.809072,8.68192935 105.809072,7.88180069 C105.809072,7.00112214 106.154089,6.28289661 106.844133,5.72710253 C107.534177,5.17130845 108.421555,4.89341558 109.506293,4.89341558 C110.612511,4.89341558 111.651589,5.10284209 112.623557,5.52170139 L112.325524,6.23053668 C111.348186,5.82241735 110.413821,5.61836075 109.522403,5.61836075 C108.652464,5.61836075 107.959746,5.8197324 107.444226,6.22248173 C106.928707,6.62523106 106.670952,7.17296194 106.670952,7.86569079 C106.670952,8.30066007 106.750158,8.65775912 106.908573,8.93699866 C107.066987,9.2162382 107.326085,9.46728151 107.685875,9.69013615 C108.045664,9.91299077 108.663204,10.1801438 109.538513,10.4916033 C110.456781,10.8084328 111.146815,11.1158602 111.608634,11.4138947 C112.070453,11.7119292 112.407415,12.0502335 112.619529,12.4288179 C112.831644,12.8074023 112.9377,13.2651872 112.9377,13.8021863 Z" id="BLOCKCERTS"></path>
            <path d="M10.9580699,13.4113689 C10.9580699,13.8630088 10.5919434,14.2291353 10.1403035,14.2291353 L0.81776652,14.2291353 C0.366126608,14.2291353 1.20000012e-07,13.8630088 1.2000001e-07,13.4113689 C1.2000001e-07,12.959729 0.366126608,12.5936025 0.81776652,12.5936025 L10.1403035,12.5936025 C10.5919434,12.5936025 10.9580699,12.959729 10.9580699,13.4113689 Z"></path>
            <path d="M14.2291354,13.411369 C14.2291354,13.8630089 13.8630089,14.2291354 13.411369,14.2291354 C12.9597291,14.2291354 12.5936026,13.8630089 12.5936026,13.411369 C12.5936026,12.9597291 12.9597291,12.5936026 13.411369,12.5936026 C13.8630089,12.5936026 14.2291354,12.9597291 14.2291354,13.411369 Z"></path>
            <path d="M9.4860908,16.6824348 C9.4860908,17.1340748 9.11996431,17.5002012 8.6683244,17.5002012 C8.21668449,17.5002012 7.850558,17.1340748 7.850558,16.6824348 C7.850558,16.2307949 8.21668449,15.8646684 8.6683244,15.8646684 C9.11996431,15.8646684 9.4860908,16.2307949 9.4860908,16.6824348 Z"></path>
            <path d="M14.2291356,6.869238 C14.2291356,7.32087791 13.8630092,7.6870044 13.4113692,7.6870044 C12.9597293,7.6870044 12.5936028,7.32087791 12.5936028,6.869238 C12.5936028,6.41759809 12.9597293,6.0514716 13.4113692,6.0514716 C13.8630092,6.0514716 14.2291356,6.41759809 14.2291356,6.869238 Z"></path>
            <path d="M1.63553264,6.8692384 C1.63553264,7.32087831 1.26940615,7.6870048 0.81776624,7.6870048 C0.366126328,7.6870048 -1.60000013e-07,7.32087831 -1.60000013e-07,6.8692384 C-1.60000013e-07,6.41759849 0.366126328,6.051472 0.81776624,6.051472 C1.26940615,6.051472 1.63553264,6.41759849 1.63553264,6.8692384 Z"></path><rect transform="translate(7.196344, 3.598172) rotate(90.000000) translate(-7.196344, -3.598172) " x="6.37857744" y="2.78040592" width="1.6355328" height="1.6355328" rx="0.8177664"></rect>
            <path d="M6.37857804,10.1403025 C6.37857804,10.5919424 6.01245155,10.9580689 5.56081164,10.9580689 C5.10917173,10.9580689 4.74304524,10.5919424 4.74304524,10.1403025 C4.74304524,9.68866261 5.10917173,9.32253612 5.56081164,9.32253612 C6.01245155,9.32253612 6.37857804,9.68866261 6.37857804,10.1403025 Z"></path>
            <path d="M14.2291348,3.5981724 C14.2291348,4.04981231 13.8630083,4.4159388 13.4113684,4.4159388 L10.4674093,4.4159388 C10.0157694,4.4159388 9.64964292,4.04981231 9.64964292,3.5981724 C9.64964292,3.14653249 10.0157694,2.780406 10.4674093,2.780406 L13.4113684,2.780406 C13.8630083,2.780406 14.2291348,3.14653249 14.2291348,3.5981724 Z"></path><rect transform="translate(2.371523, 3.598172) rotate(90.000000) translate(-2.371523, -3.598172) " x="1.55375644" y="1.226649" width="1.6355328" height="4.74304512" rx="0.8177664"></rect>
            <path d="M14.229135,10.140303 C14.229135,10.5919429 13.8630085,10.9580694 13.4113686,10.9580694 L8.83187672,10.9580694 C8.38023681,10.9580694 8.01411032,10.5919429 8.01411032,10.140303 C8.01411032,9.68866309 8.38023681,9.3225366 8.83187672,9.3225366 L13.4113686,9.3225366 C13.8630085,9.3225366 14.229135,9.68866309 14.229135,10.140303 Z"></path>
            <path d="M3.1075118,10.1403032 C3.1075118,10.5919431 2.74138531,10.9580696 2.2897454,10.9580696 L0.81776588,10.9580696 C0.366125968,10.9580696 -5.20000015e-07,10.5919431 -5.20000015e-07,10.1403032 C-5.20000015e-07,9.68866325 0.366125968,9.32253676 0.81776588,9.32253676 L2.2897454,9.32253676 C2.74138531,9.32253676 3.1075118,9.68866325 3.1075118,10.1403032 Z"></path>
            <path d="M14.2291356,16.6824352 C14.2291356,17.1340751 13.8630091,17.5002016 13.4113692,17.5002016 L11.9393897,17.5002016 C11.4877498,17.5002016 11.1216233,17.1340751 11.1216233,16.6824352 C11.1216233,16.2307953 11.4877498,15.8646688 11.9393897,15.8646688 L13.4113692,15.8646688 C13.8630091,15.8646688 14.2291356,16.2307953 14.2291356,16.6824352 Z"></path>
            <path d="M6.2150248,16.6824353 C6.2150248,17.1340752 5.84889831,17.5002017 5.3972584,17.5002017 L0.81776656,17.5002017 C0.366126648,17.5002017 1.59999985e-07,17.1340752 1.59999985e-07,16.6824353 C1.59999985e-07,16.2307954 0.366126648,15.8646689 0.81776656,15.8646689 L5.3972584,15.8646689 C5.84889831,15.8646689 6.2150248,16.2307954 6.2150248,16.6824353 Z"></path>
            <path d="M10.9580703,6.86923768 C10.9580703,7.32087759 10.5919438,7.68700408 10.1403039,7.68700408 L4.08883256,7.68700408 C3.63719265,7.68700408 3.27106616,7.32087759 3.27106616,6.86923768 C3.27106616,6.41759777 3.63719265,6.05147128 4.08883256,6.05147128 L10.1403039,6.05147128 C10.5919438,6.05147128 10.9580703,6.41759777 10.9580703,6.86923768 Z">
            </path> 
          </g>
      </g> 
    </svg>
    <span class='buv-u-visually-hidden'>${Qne("text.brandname")}</span>
  `}
  </a>`,qoe=Die((({forceInPlace:e=!1,interactive:t=!1,theme:r}={})=>{const n=["buv-c-footer",e?"buv-c-footer--forced":"",r===Lie?"buv-c-footer--dark":""].join(" ");return he`
  ${Voe}
  <footer class$='${n}'>
    ${t?he`<section>
      <buv-file-upload></buv-file-upload>
      <buv-verify-other-certificate></buv-verify-other-certificate>
    </section>`:""}
    ${Koe()}
  </footer>`}),{mapStateToProps:e=>({theme:Zie(e)}),ownProps:{forceInPlace:Boolean,interactive:Boolean}});window.customElements.define("buv-footer",qoe);var $oe=he`<style>.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-modal{position:fixed;width:100%;height:100%;background-color:rgba(3,21,50,0.7);top:0;left:0;z-index:1000}.buv-c-modal.is-hidden{display:none}.buv-c-modal__content{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);width:100vw;min-width:300px;max-width:600px;min-height:calc(600px - 50px);padding:49px 38px 98px;box-sizing:border-box}@media only screen and (max-width: 600px){.buv-c-modal__content{height:100vh;min-height:100vh;top:0;left:0;transform:none}}.buv-c-modal__close-button{top:25px;right:25px}
</style>`;window.customElements.define("buv-modal",class extends me{constructor(){super(),this.isOpen=!1,this.handleClick=this.handleClick.bind(this)}static get properties(){return{isOpen:Boolean,onClose:Function}}close(){this.isOpen=!1}handleClick(){this.close(),this._props.onClose()}_propertiesChanged(e,t,r){this._props=e,super._propertiesChanged(e,t,r)}_render(){const e=["buv-c-modal","buv-qa-modal",this.isOpen?"":"is-hidden"].join(" ");return he`
      ${$oe}
      <div class$='${e}' onclick='${this.handleClick}'>
        <div class='buv-c-modal__content  buv-o-overlay' onclick='${e=>{e.stopPropagation()}}'>
          ${Ioe({className:"buv-c-modal__close-button",onClick:this.handleClick})}
          <slot></slot>
        </div>  
      </div>
    `}});var Woe=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}
</style>`,Goe=he`<style>.buv-c-error-message{background:rgba(208,2,27,0.1);border-radius:2px;letter-spacing:.05px;padding:10px}.buv-c-error-message--solid{background:#fff;border-radius:2px 2px 0 0;margin:0}.buv-c-error-message-title{color:#d0021b;font-weight:bold;display:block;margin-bottom:5px;font-size:15px}
</style>`;function Joe(e,t=!1){if(null==e)return null;const r=["buv-c-error-message","buv-qa-error-message",t?"buv-c-error-message--solid":""].join(" ");return he`
    ${Goe}
    <p class$='${r}'>
      <span class='buv-c-error-message-title'>${Qne("errors.errorLabel")}</span>
      ${function(e){return function(e){return e.indexOf(".")>-1&&-1===e.indexOf(" ")}(e)?Qne(e):e}(e)}
    </p>`}function Xoe({label:e,code:t,status:r,errorMessage:n,isParent:i,isFirst:o,isTestChain:s}){const a=["buv-o-text-15","buv-c-verification-step","buv-c-badge",o?"is-first":"",`is-${r}`,s?"is-test":""].join(" ");let u;return u=i?he`${Woe}<dt class$='${a}'>${e}</dt>`:he`${Woe}<dd class='buv-c-verification-step  buv-c-verification-substep  buv-o-text-12'>
      ${e}
      ${Joe(n)}
    </dd>`,he`${u}`}var Yoe=he`<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==")}.buv-c-final-verification-step.is-failure::after{content:'\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}
</style>`;function Zoe(e){return e.verificationStatus}function Qoe(e,t){const r=vie(e).find((e=>"proofVerification"===e.code)).suites?.find((e=>e.proofType===t));return r.subSteps.every((e=>e.status===Dl.SUCCESS))?Dl.SUCCESS:r.subSteps.some((e=>e.status===Dl.FAILURE))?Dl.FAILURE:""}function ese(e){return e.showVerificationModal}const tse=Die((function({chain:e="",transactionLink:t="",isTestChain:r,isVisible:n=!1,finalStep:i=null,hideLink:o=!1,status:s=!1,standalone:a=!1}={}){if(!i)return;const u=[a?"buv-c-final-verification-step--standalone-wrapper":"",`is-${s}`,r?"is-test":""].join(" "),c=["buv-c-final-verification-step","buv-qa-final-verification-step",a?"buv-c-final-verification-step--standalone":"","buv-qa-verification-step",n?"is-visible":"",r?"is-test":"",`is-${s}`,s&&!a?"buv-c-badge  buv-c-badge--large":""].join(" "),l=["buv-c-verification-substep",a?"":"buv-u-excluded-from-flow","buv-u-full-width","buv-o-text-12","is-final",n?"is-visible":""].join(" "),h=i.label,f=function(e,t){return e.description?he`<p class='buv-c-verification-step__description  buv-qa-final-step-description'>${e.description.replace("${chain}",t)}</p>`:""}(i,e),d=!o&&i.linkText?he`<a class='buv-o-link' href='${t}' hidden?='${!t}'>
        <span class='buv-o-link__text--underline  buv-qa-transaction-link'>${i.linkText}</span>
      </a>`:"";return he`
    ${Yoe}
    <div class$='${u}'>
      <dt class$='${c}'>${h}</dt>
      <dd class$='${l}'>
        ${f}
        ${d}
      </dd>
      <slot></slot>
    </div>
  `}),{mapStateToProps:e=>({finalStep:_ie(e),chain:gie(e),transactionLink:die(e),isTestChain:mie(e),status:Zoe(e)}),ownProps:{isVisible:Boolean,hideLink:Boolean,standalone:Boolean}});window.customElements.define("buv-final-verification-step",tse);var rse=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-c-substeps-list__link::after{content:'';width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid #768087;display:inline-block;vertical-align:2px;margin:0 6px;-webkit-transition:-webkit-transform .3s ease-in;-o-transition:transform .3s ease-in;transition:transform .3s ease-in}.buv-c-substeps-list__link.is-open::after{transform:rotate(180deg)}.buv-c-substeps-list__list{max-height:0;overflow:scroll;-webkit-transition:max-height .3s ease-in;-o-transition:max-height .3s ease-in;transition:max-height .3s ease-in;padding-left:50px;margin-left:-50px;padding-top:5px}.buv-c-substeps-list__list.is-open{height:auto}.buv-c-substeps-list__list.is-nested{padding-left:60px}
</style>`;window.customElements.define("buv-substeps-list",class extends me{isOpen;wasForcedOpen;resetOpen;totalHeight;heightWasReset;isNested;hasNestedList;renderEvent;constructor(){super(),this.isOpen=!1,this.wasForcedOpen=!1,this.resetOpen=!1,this.toggleOpen=this.toggleOpen.bind(this),this.totalHeight=0,this.heightWasReset=!1,this.hasNestedList=!1,this.renderEvent=null}static get properties(){return{subSteps:[],suites:[],isOpen:Boolean,hasError:Boolean,isNested:Boolean}}toggleOpen(){this.wasForcedOpen&&!this.resetOpen&&(this.isOpen=!0,this.resetOpen=!0),this.isOpen=!this.isOpen}_didRender(){if(0===this.totalHeight){const e=this.shadowRoot.querySelectorAll(".buv-js-substeps-list__list")[0],t=e?Array.from(e.childNodes):[];this.totalHeight=t.reduce(((e,t)=>t.getBoundingClientRect?e+t.getBoundingClientRect().height:e),0),this.wasForcedOpen&&!this.heightWasReset&&(e.style.maxHeight=this.totalHeight+"px",this.heightWasReset=!0)}this.isNested&&!this.renderEvent&&(this.renderEvent=new CustomEvent("child-list-rendered",{detail:{childHeight:this.totalHeight},bubbles:!0,composed:!0}),this.dispatchEvent(this.renderEvent))}getRenderableSuites(e){if(!e||!e.length)return[];const t=e.filter((e=>e.subSteps.length>0)).filter((e=>e.subSteps.some((e=>e.status))));return 0===t.length?[]:(this.hasNestedList=t.length>1,this.shadowRoot.addEventListener("child-list-rendered",(e=>{this.totalHeight+=e.detail.childHeight})),t)}renderSuiteTitle(e,t){return 1===t.length?null:he`<dt class='buv-o-text-12 buv-o-text-bold'>Proof type: ${e.proofType}</dt>`}renderSuites(e,t){if(e)return e.map((r=>he`
            ${this.renderSuiteTitle(r,e)}
            <buv-substeps-list subSteps='${r.subSteps}' hasError?='${t}' isNested?='${!0}'></buv-substeps-list>`))}_render({subSteps:e=[],suites:t=[],hasError:r=!1,isNested:n=!1}={}){let i=JSON.parse(JSON.stringify(e)),o=this.getRenderableSuites(t);if(1===o.length){i=JSON.parse(JSON.stringify(i)).concat(o[0].subSteps),o=null}this.isNested=n,!this.wasForcedOpen&&r&&(this.isOpen=!0,this.wasForcedOpen=!0);const s=i.filter((e=>e.status)),a=s.length||o.length;if(0===a)return null;const u=`${a} ${Qne("text","item",!0,a)}`,c=this.isOpen?this.totalHeight:1,l=["buv-o-text-12","buv-o-link","buv-c-substeps-list__link",this.isOpen?"is-open":""].join(" "),h=["buv-c-substeps-list__list","buv-js-substeps-list__list",this.isOpen?"is-open":"",this.hasNestedList?"is-nested":""].join(" ");return he`
    ${rse}
    <a title='${Qne("text.substepsListHint")}' onclick='${this.toggleOpen}' class$='${l}'>
      <span class='buv-o-link__text--underline'>${this.isOpen?Qne("text.substepsListClose"):u}</span>
    </a>
    <div class$='${h}' style$='max-height: ${c}px'>
      ${s.map((e=>he`${Xoe(e)}`))} 
      ${this.renderSuites(o,r)}
    </div>
    `}});var nse=he`<style>.buv-c-verification-process{position:relative}.buv-c-verification-progress-bar{position:absolute;left:13px;top:0;width:14px;display:flex;flex-direction:column;height:100%}.buv-c-verification-progress-bar__tube{min-height:14px;transition:flex .4s ease-in-out, max-height .4s ease-in;background-color:#2ab27b;border-radius:7px;flex-grow:0;opacity:0}.buv-c-verification-progress-bar__tube.has-started{flex-grow:1;opacity:1}.buv-c-verification-progress-bar__tube.is-test{background-color:#d8d8d8}.buv-c-verification-progress-bar__tube.has-errored{background-color:#d0021b}.buv-c-verification-progress-bar.no-transition{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.buv-c-verification-process__step-list{padding-left:46px;margin-top:0}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;window.customElements.define("buv-verification-process-raw",class extends me{listElement;static get properties(){return{steps:[],transactionLink:String,hasError:Boolean,isTestChain:Boolean}}verificationInProgressTemplate(){return he`
        <span class='buv-u-visually-hidden'>${Qne("text.verificationStepProgress")}</span>
        <svg width='20' height='7' viewBox='0 0 120 30' xmlns='http://www.w3.org/2000/svg'><circle cx='15' cy='15' r='15'><animate attributeName='r' from='15' to='15' begin='0s' dur='0.8s' values='15;9;15' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from='1' to='1' begin='0s' dur='0.8s' values='1;.5;1' calcMode='linear' repeatCount='indefinite'/></circle><circle cx='60' cy='15' r='9' fill-opacity=''.9'><animate attributeName='r' from='9' to='9' begin='0s' dur='0.8s' values='9;15;9' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from=''.5' to='.5' begin='0s' dur='0.8s' values='.5;1;.5' calcMode='linear' repeatCount='indefinite'/></circle><circle cx='105' cy='15' r='15'><animate attributeName='r' from='15' to='15' begin='0s' dur='0.8s' values='15;9;15' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from='1' to='1' begin='0s' dur='0.8s' values='1;.5;1' calcMode='linear' repeatCount='indefinite'/></circle></svg>
    `}_didRender(){this.listElement||(this.listElement=this.shadowRoot.querySelectorAll(".buv-js-verification-process__step-list")[0])}_render({steps:e,transactionLink:t,hasError:r,isTestChain:n}){const i=e.filter((e=>e.status!==Dl.DEFAULT)).map(((e,t)=>he`
        ${Xoe({...e,isParent:!0,isFirst:0===t,isTestChain:n})}
        ${e.status===Dl.STARTING?he`${this.verificationInProgressTemplate()}`:he`<buv-substeps-list subSteps='${e.subSteps}' suites='${e.suites}' hasError?='${r}'></buv-substeps-list>`}
    `)),o=["buv-c-verification-progress-bar__tube","buv-qa-verification-progress-bar__tube",r?"has-errored":"",n?"is-test":"",i.length?"has-started":""].join(" ");let s=`${this.listElement?this.listElement.getBoundingClientRect().height:0}px`;const a=e.every((e=>e.status===Dl.SUCCESS))||e.some((e=>e.status===Dl.FAILURE));return a&&(s="100%"),he`
    ${nse}
    <section class='buv-c-verification-process'>
      <div class='buv-c-verification-progress-bar' >
        <div class$='${o}' style$='max-height: ${s}'></div>
      </div>  
      <dl class='buv-c-verification-process__step-list  buv-js-verification-process__step-list'>
        ${i}
        <buv-final-verification-step isVisible='${a&&!r}'></buv-final-verification-step>
      </dl>
    </section>
  `}});const ise=Die((function({steps:e,transactionLink:t,hasError:r,isTestChain:n}){return he`<buv-verification-process-raw
    steps='${e}'
    hasError?='${r}'
    isTestChain?='${n}'
    style='max-width: 100%;'
    ></buv-verification-process-raw>`}),{mapStateToProps:e=>({steps:JSON.parse(JSON.stringify(vie(e))),isTestChain:mie(e),hasError:wie(e)})});window.customElements.define("buv-verification-process",ise);const ose=Die((function({isOpen:e,onClose:t}){return he`
    ${Noe}
    <buv-modal isOpen?='${e}' onClose='${t}'>
      <div class='buv-c-verification-modal__content'>
        <buv-card-certificate class='buv-c-verification-modal__certificate' hideRecordLink hideVerifyButton></buv-card-certificate>
        <hr class='buv-c-verification-modal__separator'/>
        <buv-verification-process class='buv-c-verification-modal__process'></buv-verification-process>
      </div>
      <buv-footer forceInPlace></buv-footer>
    </buv-modal>
  `}),{mapDispatchToProps:{onClose:ooe.bind(null,!1)},mapStateToProps:e=>({isOpen:ese(e)})});window.customElements.define("buv-verification-modal",ose);var sse=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-drag-and-drop__droparea{z-index:100;background-color:rgba(0,0,0,0.1);display:none;position:absolute;top:0;left:0;width:100%;height:100%}.buv-c-drag-and-drop__droparea.is-active{display:block}
</style>`;window.customElements.define("buv-drag-and-drop-raw",class extends me{constructor(){super(),this.isDraggedOver=!1,this.denyDrop=!1,this.handleDragEnter=this.handleDragEnter.bind(this),this.handleDragOver=this.handleDragOver.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this),this.handleDrop=this.handleDrop.bind(this)}static get properties(){return{isDraggedOver:Boolean,denyDrop:Boolean,onDrop:Function}}handleDragEnter(){this.isDraggedOver=!0}handleDragOver(e){e.preventDefault()}handleDragLeave(){this.isDraggedOver=!1}handleDrop(e){e.preventDefault(),this.isDraggedOver=!1;const t=e.dataTransfer.files[0];this.denyDrop=!function(e){const{name:t}=e;return"json"===t.substr(t.length-4,4)}(t),this.denyDrop||this._props.onDrop(t)}_propertiesChanged(e,t,r){this._props=e,super._propertiesChanged(e,t,r)}_render(){const e=["buv-c-drag-and-drop__droparea",this.isDraggedOver?"is-active":""].join(" "),t=this.denyDrop?Qne("errors.invalidFormatDragAndDrop"):"";return he`
    ${sse}
    <div ondragenter='${this.handleDragEnter}'>
      <div class$='${e}'
        ondragover='${this.handleDragOver}'
        ondragleave='${this.handleDragLeave}'
        ondrop='${this.handleDrop}'
      ></div>
      <span>${t}</span>
      <slot></slot>
    </div>`}});const ase=Die((function(e){return he`
  <buv-drag-and-drop-raw
    onDrop='${e.onDrop}'
  >
  <slot></slot>
</buv-drag-and-drop-raw>`}),{mapDispatchToProps:{onDrop:Doe}});window.customElements.define("buv-drag-and-drop",ase);var use=he`<style>.buv-c-verifier-main{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:#031532;position:relative}.buv-c-verifier-layout{display:flex;flex-direction:column}.buv-c-verifier-body{background-color:#fff;flex-grow:1}.buv-c-verifier-body--padded{padding:20px}
</style>`,cse=he`<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-card{position:relative;display:flex;margin-bottom:20px}.buv-c-card__img-wrapper{margin-right:1.5vw;min-width:50px;width:20%}.buv-c-card__img{max-width:100%;max-height:100%}.buv-c-card__title-wrapper{display:flex;flex-direction:column;justify-content:center}.buv-c-card__title{font-size:calc(16px + 0.5vw);margin-top:0;margin-bottom:0;font-weight:400;padding-right:100px}.buv-c-card__title--no-padding{padding:0}.buv-c-card__recipient{font-weight:600;margin:6px 0 12px}.buv-c-card__record-link{position:absolute;top:0;right:0;line-height:30px}.buv-c-card__record-link::after{content:'';border:solid currentColor;border-width:0 2px 2px 0;width:5px;height:5px;transform:rotate(-45deg);font-weight:bold;display:inline-block;margin-left:5px}.buv-c-card__verify-button{float:right}@media only screen and (max-width: 600px){.buv-c-card__title{font-size:16px}.buv-c-card__recipient{margin:6px 0}.buv-c-card__img-wrapper{margin-right:18px}}
</style>`;const lse=Die((function(e){const{hasCertificateDefinition:t,recipientName:r,certificateTitle:n,issuedOn:i,issueDate:o,issuerName:s,recordLink:a,hideVerifyButton:u}=e;let{hideRecordLink:c}=e;if(!t)return null;a||c||(c=!0);const l=["buv-c-card__title",c?"buv-c-card__title--no-padding":""].join(" ");return he`
      ${cse}
      <section class='buv-c-card'>
        <div class='buv-c-card__img-wrapper'>
          ${function(e){return new Promise((t=>{const r=new Image;r.addEventListener("load",(()=>{t(he`<img src='${e.issuerLogo}' alt='${e.issuerName}' class='buv-c-card__img'/>`)})),r.addEventListener("error",(()=>{t(he`<p class='buv-o-text-15'>${e.issuerName}</p>`)})),r.src=e.issuerLogo}))}(e)}
        </div>
        <div class='buv-c-card__title-wrapper'>
          <h1 class$=${l}>${n}</h1>
          <h2 class$='${l}  buv-c-card__recipient'>${r}</h2>
          <span class='buv-o-text-12'>${Qne("text.issued")} <time datetime$='${i}'>${o}</time> ${Qne("text.by")} ${s}</span>
        </div>
      ${c?"":he`<a class='buv-o-text-12  buv-o-link  buv-c-card__record-link  qa-card-record-link' href='${a}' target='_blank'>
    <span class='buv-o-link__text--underline'>${Qne("text.viewRecord")}</span>
    </a>`}
      </section>
      ${u?"":he`<buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>
      <buv-verify-button type='link'>${Qne("text.verifyAgain")}</buv-verify-button>
    </buv-final-verification-step>`}
    `}),{mapStateToProps:e=>({hasCertificateDefinition:!!tie(e),recipientName:oie(e),certificateTitle:sie(e),issueDate:iie(e),issuedOn:nie(e),issuerName:aie(e),issuerLogo:uie(e),recordLink:lie(e)}),ownProps:{hideRecordLink:Boolean,hideVerifyButton:Boolean}});window.customElements.define("buv-card-certificate",lse);
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
const hse=e=>(e=>(e.__litDirective=!0,e))((t=>{const r=document.createElement("template");r.innerHTML=e,t.setValue(document.importNode(r.content,!0))}));var fse=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-full-certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;display:block;font-family:serif;text-align:center;color:#49555f;font-size:12px;overflow:auto;word-wrap:break-word;height:100vh;max-height:calc(100vh - 150px);line-height:initial}.buv-c-full-certificate section{max-width:100%;padding:0}.buv-c-full-certificate img{max-width:100%;height:auto;width:inherit}@media only screen and (min-width: 640px){.buv-c-full-certificate{font-size:16px}}.buv-c-full-certificate__button{margin-top:15px}.buv-c-full-certificate__details{display:flex;justify-content:space-between;margin-top:15px}.buv-c-full-certificate__details-list{min-width:calc(100% - 190px);width:calc(100% - 105px)}
</style>`,dse=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate-details{display:flex;margin:0;position:relative;padding-bottom:60px}@media only screen and (max-width: 750px){.buv-c-certificate-details{flex-direction:column;padding-bottom:0}}.buv-c-certificate-details--column{flex-direction:column;padding-bottom:0}.buv-c-certificate-details__group{box-sizing:border-box;padding-right:15px;margin-top:15px}.buv-c-certificate-details__group--row{max-width:33%;margin-top:0}@media only screen and (max-width: 750px){.buv-c-certificate-details__group--row{max-width:100%}}.buv-c-certificate-details__title{margin-bottom:5px;text-transform:uppercase;font-weight:600}.buv-c-certificate-details__value{margin:0;word-break:break-all}.buv-c-certificate-details__standalone{position:absolute;bottom:0}@media only screen and (max-width: 750px){.buv-c-certificate-details__standalone{position:initial;margin-top:15px}}.buv-c-certificate-details--inline{display:inline-block;margin:0 0 5px}
</style>`;const pse={en:function(e){const t=Qne("numbers","ordinal"),r=e%100;return t[(r-20)%10]||t[r]||t[0]},fr:function(e){const t=Qne("numbers","ordinal");return 1===e?t[e]:t[0]},es:()=>Qne("numbers","ordinal"),it:()=>Qne("numbers","ordinal"),mt:e=>Qne("numbers","ordinal")[e-1]};function gse(e){return"mt"===Xne.locale?pse[Xne.locale](e):e+pse[Xne.locale](e)}var mse=he`<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==")}.buv-c-final-verification-step.is-failure::after{content:'\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}.buv-c-suite-verification-status{margin-left:30px;font-weight:400}.buv-c-suite-verification-status.is-visible{font-size:13px}.buv-c-suite-verification-status.is-visible::after{width:20px;height:20px;left:-28px}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}
</style>`;const yse=Die((function({isTestChain:e,status:t}){const r=["buv-c-final-verification-step","buv-c-suite-verification-status","is-visible",`is-${t}`,e?"is-test":""].join(" "),n=function(e,t){let r="signatureStatusSuccess";return e&&(r="signatureStatusTestSuccess"),t===Dl.FAILURE&&(r="signatureStatusFailure"),Qne("text",r)}(e,t);return he`
      ${mse}
      <a class$='${r}' title$='${n}'>
          <span class='buv-u-visually-hidden'>${n}</span>
          <slot></slot>
      </a>
  `}),{mapStateToProps:(e,t)=>({isTestChain:yie(e,parseInt(t.index,10)),status:Qoe(e,t.suiteType)}),ownProps:{suiteType:String,index:String}});window.customElements.define("buv-suite-verification-status",yse);const vse=Die((function({recipientName:e,issuedOn:t,issueDate:r,issuerName:n,issuerProfileDomain:i=[],issuerProfileUrl:o=[],issuerPublicKey:s=[],transactionId:a=[],direction:u,hideRecipientName:c,signatureSuiteType:l=[]}){const h=[];c||h.push({title:Qne("text.recipient"),value:e}),h.push({title:Qne("text.issueDate"),value:he`<time datetime$='${t}'>${r}</time>`},{title:Qne("text.issuerName"),value:n||Qne("errors.noIssuerName")});for(let e=0;e<s.length;e++){let t="";s.length>1&&(t=`${gse(e+1)} `),l[e]&&h.push({title:`${t}${Qne("text.signatureSuiteType")}`,value:he`<buv-suite-verification-status suiteType$='${l[e]}' index$='${e}'>
            ${l[e]}
        </buv-suite-verification-status>`}),i[e]&&h.push({title:`${t}${Qne("text.issuerProfileDomain")}`,value:he`<a href$='${o[e]}' target="_blank">${i[e]}</a>`}),s[e]&&h.push({title:`${t}${Qne("text.issuerPublicKey")}`,value:s[e]}),a[e]&&h.push({title:`${t}${Qne("text.transactionId")}`,value:a[e]})}const f="column"===u,d=h.map((e=>function({title:e,value:t,isDisplayColumn:r,renderInline:n=!1}){const i=["buv-c-certificate-details__group",r?"":"buv-c-certificate-details__group--row"].join(" "),o=["buv-c-certificate-details__title",r?"":"buv-o-text-11"].join(" "),s=["buv-c-certificate-details__value",n?"buv-c-certificate-details--inline":""].join(" ");return he`<div class$='${i}'>
    <dt class$='${o}'>${e}</dt>
    <dd class$='${s}'>${t}</dd>
  </div>`}({...e,isDisplayColumn:f}))),p=["buv-c-certificate-details","buv-o-text-13",f?"buv-c-certificate-details--column":""].join(" ");return he`
    ${dse}
    <dl class$='${p}'>
        ${d}
    </dl>
  `}),{mapStateToProps:e=>({recipientName:oie(e),issueDate:iie(e),issuedOn:nie(e),issuerName:aie(e),transactionId:pie(e),issuerPublicKey:xie(e),issuerProfileDomain:Eie(e),issuerProfileUrl:Sie(e),signatureSuiteType:kie(e)}),ownProps:{direction:String,hideRecipientName:Boolean}});window.customElements.define("buv-certificate-details",vse);var bse=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-full-certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;display:block;font-family:serif;text-align:center;color:#49555f;font-size:12px;overflow:auto;word-wrap:break-word;height:100vh;max-height:calc(100vh - 150px);line-height:initial}.buv-c-full-certificate section{max-width:100%;padding:0}.buv-c-full-certificate img{max-width:100%;height:auto;width:inherit}@media only screen and (min-width: 640px){.buv-c-full-certificate{font-size:16px}}.buv-c-full-certificate__button{margin-top:15px}.buv-c-full-certificate__details{display:flex;justify-content:space-between;margin-top:15px}.buv-c-full-certificate__details-list{min-width:calc(100% - 190px);width:calc(100% - 105px)}.buv-c-full-certificate .buv-c-full-certificate-img{max-width:125px;max-height:125px}.buv-c-full-certificate__titles::before,.buv-c-full-certificate__titles::after{content:' ';display:block;background-color:#edf1f4;width:30%;text-align:center;margin:20px auto;height:2px}.buv-c-full-certificate__title{font-weight:normal;margin:0}.buv-c-full-certificate__title--name{color:#000;font-size:30px;margin-bottom:10px}.buv-c-full-certificate__title--main{font-size:21px;margin-bottom:10px}.buv-c-full-certificate__title--sub{font-size:16px;font-style:italic}.buv-c-full-certificate__description{margin:0 0 40px;line-height:1.5}.buv-c-full-certificate-signatures{list-style-type:none;display:flex;justify-content:space-around;width:100%;margin:0 0 20px;padding:0}.buv-c-full-certificate-signatures__signature{margin-right:30px;display:flex;flex-direction:column;justify-content:center}.buv-c-full-certificate-signatures__signature:last-child{margin:0}.buv-c-full-certificate-img--secondary{max-width:150px;max-height:150px}
</style>`;const wse=Die((function({hasCertificateDefinition:e,certificateImage:t,certificateTitle:r,certificateSeal:n,certificateSignatures:i,certificateSubtitle:o,certificateDescription:s,recipientName:a,issuerName:u}){if(!e)return null;const c=i.map((e=>he`
    <li class='buv-c-full-certificate-signatures__signature'>
        <img class='buv-c-full-certificate-img--secondary' src='${e.image}' alt='${Qne("text.signed")} ${e.jobTitle}'/>
        <span class='buv-o-text-12'>${e.jobTitle}</span>
    </li>
  `));return he`
    ${bse}
    <section class='buv-c-full-certificate'>
      <img class='buv-c-full-certificate-img' src='${t}' alt='${r}'/>
      <div class='buv-c-full-certificate__titles'>
        <h1 class='buv-c-full-certificate__title  buv-c-full-certificate__title--name'>${a}</h1>
        <h2 class='buv-c-full-certificate__title  buv-c-full-certificate__title--main'>${r}</h2>
        <h3 class='buv-c-full-certificate__title  buv-c-full-certificate__title--sub'>${o}</h3>
      </div>
      <p class='buv-c-full-certificate__description'>${s}</p>
      <ul class='buv-c-full-certificate-signatures'>
        ${c}
      </ul>
      <img class='buv-c-full-certificate-img--secondary' src='${n}' alt='${Qne("text.certified")} ${u}'/>
    </section>
  `}),{mapStateToProps:e=>({hasCertificateDefinition:!!tie(e),certificateImage:Aie(e),certificateTitle:sie(e),certificateSubtitle:Tie(e),certificateDescription:Pie(e),certificateSeal:Cie(e),certificateSignatures:Oie(e),recipientName:oie(e),issuerName:aie(e)})});function _se(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function xse(e,t){for(var r=e.length-1;r>=0;r--)!0===t(e[r])&&e.splice(r,1)}function Sse(e){throw new Error("Unhandled case for value: '"+e+"'")}window.customElements.define("buv-full-certificate-v1",wse);var Ese=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,r=this.getClass(),n=this.whitespaceRegex,i=r?r.split(n):[],o=e.split(n);t=o.shift();)-1===_se(i,t)&&i.push(t);return this.getAttrs().class=i.join(" "),this},e.prototype.removeClass=function(e){for(var t,r=this.getClass(),n=this.whitespaceRegex,i=r?r.split(n):[],o=e.split(n);i.length&&(t=o.shift());){var s=_se(i,t);-1!==s&&i.splice(s,1)}return this.getAttrs().class=i.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+'="'+e[r]+'"');return t.join(" ")},e}();var kse=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new Ese({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},r=this.createCssClass(e);return r&&(t.class=r),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var r=[t],n=e.getCssClassSuffixes(),i=0,o=n.length;i<o;i++)r.push(t+"-"+n[i]);return r.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var r=t.length,n=t.location;return"smart"===n?function(e,t,r){var n,i;null==r?(r="&hellip;",i=3,n=8):(i=r.length,n=r.length);var o=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},s=function(e,t){var n=t/2,i=Math.ceil(n),o=-1*Math.floor(n),s="";return o<0&&(s=e.substr(o)),e.substr(0,i)+r+s};if(e.length<=t)return e;var a=t-i,u=function(e){var t={},r=e,n=r.match(/^([a-z]+):\/\//i);return n&&(t.scheme=n[1],r=r.substr(n[0].length)),(n=r.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=n[1],r=r.substr(n[0].length)),(n=r.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=n[1],r=r.substr(n[0].length)),(n=r.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=n[1],r=r.substr(n[0].length)),(n=r.match(/^#(.*?)$/i))&&(t.fragment=n[1]),t}(e);if(u.query){var c=u.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(u.query=u.query.substr(0,c[1].length),e=o(u))}if(e.length<=t)return e;if(u.host&&(u.host=u.host.replace(/^www\./,""),e=o(u)),e.length<=t)return e;var l="";if(u.host&&(l+=u.host),l.length>=a)return u.host.length==t?(u.host.substr(0,t-i)+r).substr(0,a+n):s(l,a).substr(0,a+n);var h="";if(u.path&&(h+="/"+u.path),u.query&&(h+="?"+u.query),h){if((l+h).length>=a)return(l+h).length==t?(l+h).substr(0,t):(l+s(h,a-l.length)).substr(0,a+n);l+=h}if(u.fragment){var f="#"+u.fragment;if((l+f).length>=a)return(l+f).length==t?(l+f).substr(0,t):(l+s(f,a-l.length)).substr(0,a+n);l+=f}if(u.scheme&&u.host){var d=u.scheme+"://";if((l+d).length<a)return(d+l).substr(0,t)}if(l.length<=t)return l;var p="";return a>0&&(p=l.substr(-1*Math.floor(a/2))),(l.substr(0,Math.ceil(a/2))+r+p).substr(0,a+n)}(e,r):"middle"===n?function(e,t,r){if(e.length<=t)return e;var n,i;null==r?(r="&hellip;",n=8,i=3):(n=r.length,i=r.length);var o=t-i,s="";return o>0&&(s=e.substr(-1*Math.floor(o/2))),(e.substr(0,Math.ceil(o/2))+r+s).substr(0,o+n)}(e,r):function(e,t,r){return function(e,t,r){var n;return e.length>t&&(null==r?(r="&hellip;",n=3):n=r.length,e=e.substring(0,t-n)+r),e}(e,t,r)}(e,r)},e}(),Ise=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),Ase=function(e,t){return Ase=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Ase(e,t)};function Tse(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ase(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Pse,Ose=function(){return Ose=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ose.apply(this,arguments)},Cse=function(e){function t(t){var r=e.call(this,t)||this;return r.email="",r.email=t.email,r}return Tse(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(Ise),Mse=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="",r.hashtag="",r.serviceName=t.serviceName,r.hashtag=t.hashtag,r}return Tse(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(Ise),Nse=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.mention="",r.mention=t.mention,r.serviceName=t.serviceName,r}return Tse(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),r=this.getServiceName();return r&&t.push(r),t},t}(Ise),Rse=function(e){function t(t){var r=e.call(this,t)||this;return r.number="",r.plusSign=!1,r.number=t.number,r.plusSign=t.plusSign,r}return Tse(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(Ise),Lse=function(e){function t(t){var r=e.call(this,t)||this;return r.url="",r.urlMatchType="scheme",r.protocolUrlMatch=!1,r.protocolRelativeMatch=!1,r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.schemePrefixRegex=/^(https?:\/\/)?/i,r.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,r.protocolRelativeRegex=/^\/\//,r.protocolPrepended=!1,r.urlMatchType=t.urlMatchType,r.url=t.url,r.protocolUrlMatch=t.protocolUrlMatch,r.protocolRelativeMatch=t.protocolRelativeMatch,r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return Tse(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}},t}(Ise),jse=function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder},Dse=/[A-Za-z]/,Bse=/[\d]/,Use=/[\D]/,Fse=/\s/,zse=/['"]/,Vse=/[\x00-\x1F\x7F]/,Hse=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,Kse=Hse+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,qse=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,$se=Kse+qse,Wse=Kse+qse,Gse="(?:["+qse+"]{1,3}\\.){3}["+qse+"]{1,3}",Jse="["+Wse+"](?:["+Wse+"\\-]{0,61}["+Wse+"])?",Xse=function(e){return"(?=("+Jse+"))\\"+e},Yse=function(e){return"(?:"+Xse(e)+"(?:\\."+Xse(e+1)+"){0,126}|"+Gse+")"},Zse=new RegExp("["+Wse+"]"),Qse=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|||||||||abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|||||||||||||aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone||||||||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip||||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/,eae=new RegExp("["+Wse+"!#$%&'*+/=?^_`{|}~-]"),tae=new RegExp("^"+Qse.source+"$"),rae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=eae,t.strictTldRegex=tae,t}return Tse(t,e),t.prototype.parseMatches=function(e){for(var t=this.tagBuilder,r=this.localPartCharRegex,n=this.strictTldRegex,i=[],o=e.length,s=new nae,a={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},u=0,c=0,l=s;u<o;){var h=e.charAt(u);switch(c){case 0:f(h);break;case 1:d(e.charAt(u-1),h);break;case 2:p(h);break;case 3:g(h);break;case 4:m(h);break;case 5:y(h);break;case 6:v(h);break;case 7:b(h);break;default:Sse(c)}u++}return x(),i;function f(e){"m"===e?w(1):r.test(e)&&w()}function d(e,t){":"===e?r.test(t)?(c=2,l=new nae(Ose(Ose({},l),{hasMailtoPrefix:!0}))):_():a[e]===t||(r.test(t)?c=2:"."===t?c=3:"@"===t?c=4:_())}function p(e){"."===e?c=3:"@"===e?c=4:r.test(e)||_()}function g(e){"."===e||"@"===e?_():r.test(e)?c=2:_()}function m(e){Zse.test(e)?c=5:_()}function y(e){"."===e?c=7:"-"===e?c=6:Zse.test(e)||x()}function v(e){"-"===e||"."===e?x():Zse.test(e)?c=5:x()}function b(e){"."===e||"-"===e?x():Zse.test(e)?(c=5,l=new nae(Ose(Ose({},l),{hasDomainDot:!0}))):x()}function w(e){void 0===e&&(e=2),c=e,l=new nae({idx:u})}function _(){c=0,l=s}function x(){if(l.hasDomainDot){var r=e.slice(l.idx,u);/[-.]$/.test(r)&&(r=r.slice(0,-1));var o=l.hasMailtoPrefix?r.slice("mailto:".length):r;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return n.test(t)})(o)&&i.push(new Cse({tagBuilder:t,matchedText:r,offset:l.idx,email:o}))}_()}},t}(jse),nae=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot},iae=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),r=t&&t[0].toLowerCase();return"javascript:"!==r&&"vbscript:"!==r},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&(!this.hasFullProtocolRegex.test(t)&&!this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+Hse+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),oae=(Pse=new RegExp("[/?#](?:["+Wse+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^]*["+Wse+"\\-+&@#/%=~_()|'$*\\[\\]{}])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,Yse(2),")","|","(","(//)?",/(?:www\.)/.source,Yse(6),")","|","(","(//)?",Yse(10)+"\\.",Qse.source,"(?![-"+$se+"])",")",")","(?::[0-9]+)?","(?:"+Pse.source+")?"].join(""),"gi")),sae=new RegExp("["+Wse+"]"),aae=function(e){function t(t){var r=e.call(this,t)||this;return r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.matcherRegex=oae,r.wordCharRegExp=sae,r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return Tse(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.stripPrefix,i=this.stripTrailingSlash,o=this.decodePercentEncoding,s=this.tagBuilder,a=[],u=function(){var r=t[0],u=t[1],l=t[4],h=t[5],f=t[9],d=t.index,p=h||f,g=e.charAt(d-1);if(!iae.isValid(r,u))return"continue";if(d>0&&"@"===g)return"continue";if(d>0&&p&&c.wordCharRegExp.test(g))return"continue";if(/\?$/.test(r)&&(r=r.substr(0,r.length-1)),c.matchHasUnbalancedClosingParen(r))r=r.substr(0,r.length-1);else{var m=c.matchHasInvalidCharAfterTld(r,u);m>-1&&(r=r.substr(0,m))}var y=["http://","https://"].find((function(e){return!!u&&-1!==u.indexOf(e)}));if(y){var v=r.indexOf(y);r=r.substr(v),u=u.substr(v),d+=v}var b=u?"scheme":l?"www":"tld",w=!!u;a.push(new Lse({tagBuilder:s,matchedText:r,offset:d,urlMatchType:b,url:r,protocolUrlMatch:w,protocolRelativeMatch:!!p,stripPrefix:n,stripTrailingSlash:i,decodePercentEncoding:o}))},c=this;null!==(t=r.exec(e));)u();return a},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,r=e.charAt(e.length-1);if(")"===r)t="(";else if("]"===r)t="[";else{if("}"!==r)return!1;t="{"}for(var n=0,i=0,o=e.length-1;i<o;i++){var s=e.charAt(i);s===t?n++:s===r&&(n=Math.max(n-1,0))}return 0===n},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var r=0;t&&(r=e.indexOf(":"),e=e.slice(r));var n=new RegExp("^((.?//)?[-."+Wse+"]*[-"+Wse+"]\\.[-"+Wse+"]+)").exec(e);return null===n?-1:(r+=n[1].length,e=e.slice(n[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?r:-1)},t}(jse),uae=new RegExp("#[_"+Wse+"]{1,139}(?![_"+Wse+"])","g"),cae=new RegExp("[^"+Wse+"]"),lae=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.matcherRegex=uae,r.nonWordCharRegex=cae,r.serviceName=t.serviceName,r}return Tse(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.nonWordCharRegex,i=this.serviceName,o=this.tagBuilder,s=[];null!==(t=r.exec(e));){var a=t.index,u=e.charAt(a-1);if(0===a||n.test(u)){var c=t[0],l=t[0].slice(1);s.push(new Mse({tagBuilder:o,matchedText:c,offset:a,serviceName:i,hashtag:l}))}}return s},t}(jse),hae=new RegExp(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source+"|"+/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"g"),fae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=hae,t}return Tse(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.tagBuilder,i=[];null!==(t=r.exec(e));){var o=t[0],s=o.replace(/[^0-9,;#]/g,""),a=!(!t[1]&&!t[2]),u=0==t.index?"":e.substr(t.index-1,1),c=e.substr(t.index+o.length,1),l=!u.match(/\d/)&&!c.match(/\d/);this.testMatch(t[3])&&this.testMatch(o)&&l&&i.push(new Rse({tagBuilder:n,matchedText:o,offset:t.index,number:s,plusSign:a}))}return i},t.prototype.testMatch=function(e){return Use.test(e)},t}(jse),dae=new RegExp("@[_"+Wse+"]{1,50}(?![_"+Wse+"])","g"),pae=new RegExp("@[_."+Wse+"]{1,30}(?![_"+Wse+"])","g"),gae=new RegExp("@[-_."+Wse+"]{1,50}(?![-_"+Wse+"])","g"),mae=new RegExp("[^"+Wse+"]"),yae=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.matcherRegexes={twitter:dae,instagram:pae,soundcloud:gae},r.nonWordCharRegex=mae,r.serviceName=t.serviceName,r}return Tse(t,e),t.prototype.parseMatches=function(e){var t,r=this.serviceName,n=this.matcherRegexes[this.serviceName],i=this.nonWordCharRegex,o=this.tagBuilder,s=[];if(!n)return s;for(;null!==(t=n.exec(e));){var a=t.index,u=e.charAt(a-1);if(0===a||i.test(u)){var c=t[0].replace(/\.+$/g,""),l=c.slice(1);s.push(new Nse({tagBuilder:o,matchedText:c,offset:a,serviceName:r,mention:l}))}}return s},t}(jse);function vae(e,t){for(var r,n=t.onOpenTag,i=t.onCloseTag,o=t.onText,s=t.onComment,a=t.onDoctype,u=new bae,c=0,l=e.length,h=0,f=0,d=u;c<l;){var p=e.charAt(c);switch(h){case 0:g(p);break;case 1:m(p);break;case 2:v(p);break;case 3:y(p);break;case 4:b(p);break;case 5:w(p);break;case 6:_(p);break;case 7:x(p);break;case 8:S(p);break;case 9:E(p);break;case 10:k(p);break;case 11:I(p);break;case 12:A(p);break;case 13:T();break;case 14:P(p);break;case 15:O(p);break;case 16:C(p);break;case 17:M(p);break;case 18:N(p);break;case 19:R(p);break;case 20:L(p);break;default:Sse(h)}c++}function g(e){"<"===e&&D()}function m(e){"!"===e?h=13:"/"===e?(h=2,d=new bae(Ose(Ose({},d),{isClosing:!0}))):"<"===e?D():Dse.test(e)?(h=3,d=new bae(Ose(Ose({},d),{isOpening:!0}))):(h=0,d=u)}function y(e){Fse.test(e)?(d=new bae(Ose(Ose({},d),{name:U()})),h=4):"<"===e?D():"/"===e?(d=new bae(Ose(Ose({},d),{name:U()})),h=12):">"===e?(d=new bae(Ose(Ose({},d),{name:U()})),B()):Dse.test(e)||Bse.test(e)||":"===e||j()}function v(e){">"===e?j():Dse.test(e)?h=3:j()}function b(e){Fse.test(e)||("/"===e?h=12:">"===e?B():"<"===e?D():"="===e||zse.test(e)||Vse.test(e)?j():h=5)}function w(e){Fse.test(e)?h=6:"/"===e?h=12:"="===e?h=7:">"===e?B():"<"===e?D():zse.test(e)&&j()}function _(e){Fse.test(e)||("/"===e?h=12:"="===e?h=7:">"===e?B():"<"===e?D():zse.test(e)?j():h=5)}function x(e){Fse.test(e)||('"'===e?h=8:"'"===e?h=9:/[>=`]/.test(e)?j():"<"===e?D():h=10)}function S(e){'"'===e&&(h=11)}function E(e){"'"===e&&(h=11)}function k(e){Fse.test(e)?h=4:">"===e?B():"<"===e&&D()}function I(e){Fse.test(e)?h=4:"/"===e?h=12:">"===e?B():"<"===e?D():(h=4,c--)}function A(e){">"===e?(d=new bae(Ose(Ose({},d),{isClosing:!0})),B()):h=4}function T(t){"--"===e.substr(c,2)?(c+=2,d=new bae(Ose(Ose({},d),{type:"comment"})),h=14):"DOCTYPE"===e.substr(c,7).toUpperCase()?(c+=7,d=new bae(Ose(Ose({},d),{type:"doctype"})),h=20):j()}function P(e){"-"===e?h=15:">"===e?j():h=16}function O(e){"-"===e?h=18:">"===e?j():h=16}function C(e){"-"===e&&(h=17)}function M(e){h="-"===e?18:16}function N(e){">"===e?B():"!"===e?h=19:"-"===e||(h=16)}function R(e){"-"===e?h=17:">"===e?B():h=16}function L(e){">"===e?B():"<"===e&&D()}function j(){h=0,d=u}function D(){h=1,d=new bae({idx:c})}function B(){var t=e.slice(f,d.idx);t&&o(t,f),"comment"===d.type?s(d.idx):"doctype"===d.type?a(d.idx):(d.isOpening&&n(d.name,d.idx),d.isClosing&&i(d.name,d.idx)),j(),f=c+1}function U(){var t=d.idx+(d.isClosing?2:1);return e.slice(t,c).toLowerCase()}f<c&&(r=e.slice(f,c),o(r,f),f=c+1)}var bae=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},wae=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var r=this.mention;if(!1!==r&&"twitter"!==r&&"instagram"!==r&&"soundcloud"!==r)throw new Error("invalid `mention` cfg - see docs");var n=this.hashtag;if(!1!==n&&"twitter"!==n&&"facebook"!==n&&"instagram"!==n)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,r){return new e(r).link(t)},e.parse=function(t,r){return new e(r).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&void 0===e[r]&&(e[r]=t[r]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,r=["a","style","script"],n=0,i=[];return vae(e,{onOpenTag:function(e){r.indexOf(e)>=0&&n++},onText:function(e,r){if(0===n){var o=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var r,n=[],i=0;r=t.exec(e);)n.push(e.substring(i,r.index)),n.push(r[0]),i=r.index+r[0].length;return n.push(e.substring(i)),n}(e,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),s=r;o.forEach((function(e,r){if(r%2==0){var n=t.parseText(e,s);i.push.apply(i,n)}s+=e.length}))}},onCloseTag:function(e){r.indexOf(e)>=0&&(n=Math.max(n-1,0))},onComment:function(e){},onDoctype:function(e){}}),i=this.compactMatches(i),i=this.removeUnwantedMatches(i)},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;t++){var r=e[t],n=r.getOffset(),i=r.getMatchedText().length,o=n+i;if(t+1<e.length){if(e[t+1].getOffset()===n){var s=e[t+1].getMatchedText().length>i?t:t+1;e.splice(s,1);continue}e[t+1].getOffset()<o&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||xse(e,(function(e){return"hashtag"===e.getType()})),this.email||xse(e,(function(e){return"email"===e.getType()})),this.phone||xse(e,(function(e){return"phone"===e.getType()})),this.mention||xse(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||xse(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||xse(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||xse(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var r=this.getMatchers(),n=[],i=0,o=r.length;i<o;i++){for(var s=r[i].parseMatches(e),a=0,u=s.length;a<u;a++)s[a].setOffset(t+s[a].getOffset());n.push.apply(n,s)}return n},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),r=[],n=0,i=0,o=t.length;i<o;i++){var s=t[i];r.push(e.substring(n,s.getOffset())),r.push(this.createMatchReturnVal(s)),n=s.getOffset()+s.getMatchedText().length}return r.push(e.substring(n)),r.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof Ese?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new lae({tagBuilder:e,serviceName:this.hashtag}),new rae({tagBuilder:e}),new fae({tagBuilder:e}),new yae({tagBuilder:e,serviceName:this.mention}),new aae({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new kse({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.14.3",e.AnchorTagBuilder=kse,e.HtmlTag=Ese,e.matcher={Email:rae,Hashtag:lae,Matcher:jse,Mention:yae,Phone:fae,Url:aae},e.match={Email:Cse,Hashtag:Mse,Match:Ise,Mention:Nse,Phone:Rse,Url:Lse},e}();function _ae(e){return wae.link(e,{stripPrefix:!1,email:!1,phone:!1})}const xae=Die((function({clickableUrls:e,hasCertificateDefinition:t,displayHTML:r}){return t?he`
    ${fse}
    ${r?function(e,t){const r=["buv-c-full-certificate","qa-fullscreen-certificate"];Dre.certificates.displayHtmlHasNoWidthConstraint(e)&&r.push("buv-c-certificate--fixed-width");const n=t?_ae(e):e;return he`<section class$=${r.join(" ")}>${hse(n)}</section>`}(r,e):he`<buv-full-certificate-v1></buv-full-certificate-v1>`}
    <div class='buv-c-full-certificate__details'>
      <buv-certificate-details class='buv-c-full-certificate__details-list'></buv-certificate-details>
      <buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>
        <buv-verify-button type='link'>${Qne("text.verifyAgain")}</buv-verify-button>
      </buv-final-verification-step>
    </div>
  `:null}),{mapStateToProps:e=>({hasCertificateDefinition:!!tie(e),displayHTML:cie(e),clickableUrls:toe(e)})});window.customElements.define("buv-full-certificate",xae);var Sae=he`<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-fullscreen-certificate{z-index:200;position:fixed;top:0;left:0;background-color:#fff;width:100vw;height:100vh;overflow:auto;box-sizing:border-box}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate{padding-top:170px}}.buv-c-fullscreen-certificate-header{box-shadow:0 1px 5px rgba(0,0,0,0.15);width:100%;background-color:#fff}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate-header{position:fixed;top:0;z-index:10}}.buv-c-fullscreen-certificate-header__content{max-width:1440px;margin:0 auto;padding:20px;display:flex;align-items:center;position:relative;box-sizing:border-box}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate-header__content{flex-direction:column;justify-content:left;align-items:unset}}.buv-c-fullscreen-certificate__title{margin:0 30px 0 0}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__title{margin-bottom:10px}}.buv-c-fullscreen-certificate__close{top:27px;right:20px}.buv-c-fullscreen-certificate__content{padding:20px;display:flex;max-width:1440px;margin:20px auto 0}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__content{flex-direction:column-reverse;margin-top:0}}.buv-c-fullscreen-certificate__details{display:flex;flex-grow:1;flex-direction:column;max-width:280px;min-width:220px;margin-right:20px}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__details{max-width:100vw;margin:20px 0 0}}.buv-c-fullscreen-certificate__verification-status{margin-bottom:15px}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__verification-status{position:absolute;top:90px;width:calc(100% - 40px);margin:0}}.buv-c-fullscreen-certificate__details-item{margin-top:5px}.buv-c-fullscreen-certificate__separator{margin-top:30px;padding-top:30px;border-top:1px solid #f1f2f3}.buv-c-fullscreen-certificate__certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;font-family:serif;text-align:center;color:#49555f;font-size:12px;word-wrap:break-word;min-height:calc(100vh - 145px);box-sizing:border-box;margin:0 auto;min-width:600px;line-height:initial}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__certificate{min-width:unset;width:100%;overflow:auto}}.buv-c-fullscreen-certificate__verify-other{margin-top:20px}
</style>`;const Eae=Die((function({clickableUrls:e,hasCertificateDefinition:t,recipientName:r,displayHTML:n,onClose:i}){if(!t)return null;const o=["buv-c-fullscreen-certificate__certificate","qa-fullscreen-certificate"];return n&&Dre.certificates.displayHtmlHasNoWidthConstraint(n)&&o.push("buv-c-certificate--fixed-width"),he`
    ${Sae}
    <section class='buv-c-fullscreen-certificate'>
      <header class='buv-c-fullscreen-certificate-header'>
        <div class='buv-c-fullscreen-certificate-header__content'>
          <h1 class='buv-c-fullscreen-certificate__title'>${r}</h1>
          ${Ioe({onClick:i,className:"buv-c-fullscreen-certificate__close"})}
        </div>  
      </header>
      <section class='buv-c-fullscreen-certificate__content'>
        <div class='buv-c-fullscreen-certificate__details'>
          <buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>
            <buv-verify-button type='link'>${Qne("text.verifyAgain")}</buv-verify-button>
          </buv-final-verification-step>
          <buv-certificate-details direction='column' hideRecipientName></buv-certificate-details>
          <buv-metadata class='buv-c-fullscreen-certificate__details-item  buv-c-fullscreen-certificate__separator' display='plaintext'></buv-metadata>
          <buv-download-link class='buv-c-fullscreen-certificate__details-item' display='plaintext'></buv-download-link>
          <buv-social-share class='buv-c-fullscreen-certificate__details-item' display='plaintext'></buv-social-share>
          ${Koe({className:"buv-c-fullscreen-certificate__separator",showMotto:!0})}
          <buv-verify-other-certificate class='buv-c-fullscreen-certificate__verify-other'></buv-verify-other-certificate>
        </div>
        <div class$=${o.join(" ")}>
          ${n?function(e,t){const r=t?_ae(e):e;return he`${hse(r)}`}(n,e):he`<buv-full-certificate-v1></buv-full-certificate-v1>`}
        </div>
      </section>
    </section>
  `}),{mapDispatchToProps:{onClose:Uoe},mapStateToProps:e=>({recipientName:oie(e),hasCertificateDefinition:!!tie(e),displayHTML:cie(e),clickableUrls:toe(e)})});window.customElements.define("buv-fullscreen-certificate",Eae);class kae extends me{constructor(){super(),this.hasRenderedOnce=!1}static get properties(){return{onLoad:Function,errorMessage:String,hasCertificate:Boolean,...hoe}}_firstRendered(){this.onLoad(this._props),this.hasRenderedOnce=!0}_propertiesChanged(e,t,r){this._props=e,super._propertiesChanged(e,t,r),t.src!==r.src&&this.hasRenderedOnce&&this.onLoad({src:t.src}),t.explorerAPIs&&!r.explorerAPIs&&this.onLoad({explorerAPIs:t.explorerAPIs})}renderCertificate(e){switch(e.displayMode){case Nie:return he`<buv-full-certificate></buv-full-certificate>`;case"fullscreen":return he`<buv-fullscreen-certificate></buv-fullscreen-certificate>`;default:return he`<buv-card-certificate></buv-card-certificate>`}}_render(e){const t=e.hasCertificate?"buv-c-verifier-body  buv-c-verifier-body--padded":"";return he`
      ${use}
      <section class='buv-c-verifier-main'>
        <buv-drag-and-drop>
          <div class='buv-c-verifier-layout'>
            <section class$='${t}'>
              ${Joe(e.errorMessage,!0)}
              <buv-certificate-input></buv-certificate-input>
              <buv-action-menu></buv-action-menu>
              ${this.renderCertificate(e)}
              <buv-verification-modal></buv-verification-modal>
            </section>
            <buv-footer interactive></buv-footer>
          </div>
        </buv-drag-and-drop>
      </section>
    `}}function Iae(e){return e.errorMessage}window.customElements.define("buv-raw",kae);const Aae={onLoad:function(e={}){return function(t){const r=function(e){return Object.keys(hoe).reduce(((t,r)=>(e[r]&&(t[r]=e[r]),t)),{})}(e),{src:n,locale:i}=r;t({type:Je,payload:{options:r}}),Dre.certificates.isPathToCertificateValidURI(n)?t(aoe(n)):function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(n)&&t(soe(JSON.parse(n))),doe(i)}}},Tae=Die((function(e={}){return he`<buv-raw
          src='${e.src}'
          onLoad='${e.onLoad}'
          errorMessage='${e.errorMessage}'
          hasCertificate='${e.hasCertificate}'
          disableAutoVerify='${e["disable-auto-verify"]}'
          disableVerify='${e["disable-verify"]}'
          allowDownload='${e["allow-download"]}'
          allowSocialShare='${e["allow-social-share"]}'
          displayMode='${e["display-mode"]}'
          showMetadata='${e["show-metadata"]}'
          clickableUrls='${e["clickable-urls"]}'
          theme='${e.theme}'
          locale='${e.locale}'
          explorerAPIs='${e.explorerAPIs}'
          didResolverUrl='${e["did-resolver-url"]}'
        ></buv-raw>`}),{mapDispatchToProps:Aae,mapStateToProps:e=>({errorMessage:Iae(e),hasCertificate:!!tie(e)}),ownProps:{...kae.properties,...loe}});window.customElements.define("blockcerts-verifier",Tae)}();
