!function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,r){return d=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i},d.apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},p(e)}function v(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function y(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function m(e){var t=h();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b(this,r)}}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=w(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},x.apply(this,arguments)}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(e,t){return I(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}(e,t)||T(e,t)||O()}function S(e){return I(e)||A(e)||T(e)||O()}function E(e){return function(e){if(Array.isArray(e))return P(e)}(e)||A(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){if(Array.isArray(e))return e}function A(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}var M="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==M&&M,N="URLSearchParams"in M,R="Symbol"in M&&"iterator"in Symbol,L="FileReader"in M&&"Blob"in M&&function(){try{return new Blob,!0}catch(e){return!1}}(),j="FormData"in M,D="ArrayBuffer"in M;if(D)var B=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],U=ArrayBuffer.isView||function(e){return e&&B.indexOf(Object.prototype.toString.call(e))>-1};function F(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function z(e){return"string"!=typeof e&&(e=String(e)),e}function H(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return R&&(t[Symbol.iterator]=function(){return t}),t}function V(e){this.map={},e instanceof V?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function K(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function q(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function W(e){var t=new FileReader,r=q(t);return t.readAsArrayBuffer(e),r}function G(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function J(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:L&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:j&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:N&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():D&&L&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=G(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):D&&(ArrayBuffer.prototype.isPrototypeOf(e)||U(e))?this._bodyArrayBuffer=G(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):N&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},L&&(this.blob=function(){var e=K(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=K(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(W)}),this.text=function(){var e,t,r,n=K(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=q(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},j&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}V.prototype.append=function(e,t){e=F(e),t=z(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},V.prototype.delete=function(e){delete this.map[F(e)]},V.prototype.get=function(e){return e=F(e),this.has(e)?this.map[e]:null},V.prototype.has=function(e){return this.map.hasOwnProperty(F(e))},V.prototype.set=function(e,t){this.map[F(e)]=z(t)},V.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},V.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),H(e)},V.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),H(e)},V.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),H(e)},R&&(V.prototype[Symbol.iterator]=V.prototype.entries);var X=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(e,t){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof $){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new V(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new V(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),X.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function Z(e,t){if(!(this instanceof Z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new V(t.headers),this.url=t.url||"",this._initBody(e)}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})},J.call($.prototype),J.call(Z.prototype),Z.prototype.clone=function(){return new Z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new V(this.headers),url:this.url})},Z.error=function(){var e=new Z(null,{status:0,statusText:""});return e.type="error",e};var Q=[301,302,303,307,308];Z.redirect=function(e,t){if(-1===Q.indexOf(t))throw new RangeError("Invalid status code");return new Z(null,{status:t,headers:{location:e}})};var ee=M.DOMException;try{new ee}catch(e){(ee=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),ee.prototype.constructor=ee}function te(e,t){return new Promise((function(n,i){var a=new $(e,t);if(a.signal&&a.signal.aborted)return i(new ee("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new V,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;setTimeout((function(){n(new Z(i,r))}),0)},o.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){i(new ee("Aborted","AbortError"))}),0)},o.open(a.method,function(e){try{return""===e&&M.location.href?M.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&(L?o.responseType="blob":D&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!t||"object"!==r(t.headers)||t.headers instanceof V?a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){o.setRequestHeader(e,z(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",s)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}te.polyfill=!0,M.fetch||(M.fetch=te,M.Headers=V,M.Request=$,M.Response=Z),Uint8Array.prototype.fill||(Uint8Array.prototype.fill=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=n>>0,a=i<0?Math.max(r+i,0):Math.min(i,r),o=arguments[2],s=void 0===o?r:o>>0,u=s<0?Math.max(r+s,0):Math.min(s,r);a<u;)t[a]=e,a++;return t})
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */,window.JSCompiler_renameProperty=function(e,t){return e};
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
var re=0,ne=function(e){var t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);var r=re++;function n(n){var i=n.__mixinSet;if(i&&i[r])return n;var a=t,o=a.get(n);if(!o){o=e(n),a.set(n,o);var s=Object.create(o.__mixinSet||i||null);s[r]=!0,o.__mixinSet=s}return o}return n};
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */
var ie=0,ae=0,oe=[],se=0,ue=!1,ce=document.createTextNode("");new window.MutationObserver((function(){ue=!1;for(var e=oe.length,t=0;t<e;t++){var r=oe[t];if(r)try{r()}catch(e){setTimeout((function(){throw e}))}}oe.splice(0,e),ae+=e})).observe(ce,{characterData:!0});var le={run:function(e){return ue||(ue=!0,ce.textContent=se++),oe.push(e),ie++},cancel:function(e){var t=e-ae;if(t>=0){if(!oe[t])throw new Error("invalid async handle: "+e);oe[t]=null}}},fe=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?function(e){return ShadyDOM.patch(e)}:function(e){return e},he=le,de=ne((function(e){var t=function(e){c(n,e);var t=m(n);function n(){var e;return a(this,n),(e=t.call(this)).__dataEnabled=!1,e.__dataReady=!1,e.__dataInvalid=!1,e.__data={},e.__dataPending=null,e.__dataOld=null,e.__dataInstanceProps=null,e.__dataCounter=0,e.__serializing=!1,e._initializeProperties(),e}return s(n,[{key:"_createPropertyAccessor",value:function(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}},{key:"_addPropertyToAttributeMap",value:function(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));var t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}},{key:"_definePropertyAccessor",value:function(e,t){Object.defineProperty(this,e,{get:function(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}},{key:"ready",value:function(){this.__dataReady=!0,this._flushProperties()}},{key:"_initializeProperties",value:function(){for(var e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}},{key:"_initializeInstanceProperties",value:function(e){Object.assign(this,e)}},{key:"_setProperty",value:function(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}},{key:"_getProperty",value:function(e){return this.__data[e]}},{key:"_setPendingProperty",value:function(e,t,r){var n=this.__data[e],i=this._shouldPropertyChange(e,t,n);return i&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=n),this.__data[e]=t,this.__dataPending[e]=t),i}},{key:"_isPropertyPending",value:function(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}},{key:"_invalidateProperties",value:function(){var e=this;!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,he.run((function(){e.__dataInvalid&&(e.__dataInvalid=!1,e._flushProperties())})))}},{key:"_enableProperties",value:function(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}},{key:"_flushProperties",value:function(){this.__dataCounter++;var e=this.__data,t=this.__dataPending,r=this.__dataOld;this._shouldPropertiesChange(e,t,r)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,r)),this.__dataCounter--}},{key:"_shouldPropertiesChange",value:function(e,t,r){return Boolean(t)}},{key:"_propertiesChanged",value:function(e,t,r){}},{key:"_shouldPropertyChange",value:function(e,t,r){return r!==t&&(r==r||t==t)}},{key:"attributeChangedCallback",value:function(e,t,r,i){t!==r&&this._attributeToProperty(e,r),x(l(n.prototype),"attributeChangedCallback",this)&&x(l(n.prototype),"attributeChangedCallback",this).call(this,e,t,r,i)}},{key:"_attributeToProperty",value:function(e,t,r){if(!this.__serializing){var n=this.__dataAttributes,i=n&&n[e]||e;this[i]=this._deserializeValue(t,r||this.constructor.typeForProperty(i))}}},{key:"_propertyToAttribute",value:function(e,t,r){this.__serializing=!0,r=arguments.length<3?this[e]:r,this._valueToNodeAttribute(this,r,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}},{key:"_valueToNodeAttribute",value:function(e,t,r){var n=this._serializeValue(t);"class"!==r&&"name"!==r&&"slot"!==r||(e=fe(e)),void 0===n?e.removeAttribute(r):e.setAttribute(r,n)}},{key:"_serializeValue",value:function(e){return"boolean"===r(e)?e?"":void 0:null!=e?e.toString():void 0}},{key:"_deserializeValue",value:function(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}],[{key:"createProperties",value:function(e){var t=this.prototype;for(var r in e)r in t||t._createPropertyAccessor(r)}},{key:"attributeNameForProperty",value:function(e){return e.toLowerCase()}},{key:"typeForProperty",value:function(e){}}]),n}(e);return t}));
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */var pe=ne((function(e){function t(e){var t=Object.getPrototypeOf(e);return t.prototype instanceof n?t:null}function r(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){var t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){var r=e.properties;r&&(t=function(e){var t={};for(var r in e){var n=e[r];t[r]="function"==typeof n?{type:n}:n}return t}(r))}e.__ownProperties=t}return e.__ownProperties}var n=function(e){c(i,e);var n=m(i);function i(){return a(this,i),n.apply(this,arguments)}return s(i,[{key:"_initializeProperties",value:function(){this.constructor.finalize(),x(l(i.prototype),"_initializeProperties",this).call(this)}},{key:"connectedCallback",value:function(){x(l(i.prototype),"connectedCallback",this)&&x(l(i.prototype),"connectedCallback",this).call(this),this._enableProperties()}},{key:"disconnectedCallback",value:function(){x(l(i.prototype),"disconnectedCallback",this)&&x(l(i.prototype),"disconnectedCallback",this).call(this)}}],[{key:"observedAttributes",get:function(){var e=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;var t=this._properties;this.__observedAttributes=t?Object.keys(t).map((function(t){return e.prototype._addPropertyToAttributeMap(t)})):[]}return this.__observedAttributes}},{key:"finalize",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){var e=t(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}},{key:"_finalizeClass",value:function(){var e=r(this);e&&this.createProperties(e)}},{key:"_properties",get:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){var e=t(this);this.__properties=Object.assign({},e&&e._properties,r(this))}return this.__properties}},{key:"typeForProperty",value:function(e){var t=this._properties[e];return t&&t.type}}]),i}(de(e));return n})),ve=new Map,ye=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe;a(this,e),this.strings=t,this.values=r,this.type=n,this.partCallback=i}return s(e,[{key:"getHTML",value:function(){for(var e,t,r=this.strings.length-1,n="",i=!0,a=0;a<r;a++){var o=this.strings[a];n+=o;var s=(t=void 0,void 0,t=(e=o).lastIndexOf(">"),e.indexOf("<",t+1)>-1?e.length:t);n+=(i=s>-1?s<o.length:i)?be:ge}return n+=this.strings[r]}},{key:"getTemplateElement",value:function(){var e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}]),e}(),ge="{{lit-".concat(String(Math.random()).slice(2),"}}"),be="\x3c!--".concat(ge,"--\x3e"),me=new RegExp("".concat(ge,"|").concat(be)),we=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */var xe=s((function e(t,r,n,i,o){a(this,e),this.type=t,this.index=r,this.name=n,this.rawName=i,this.strings=o})),_e=function(e){return-1!==e.index},ke=s((function e(t,r){a(this,e),this.parts=[],this.element=r;for(var n,i,o=this.element.content,s=document.createTreeWalker(o,133,null,!1),u=-1,c=0,l=[];s.nextNode();){u++,n=i;var f=i=s.currentNode;if(1===f.nodeType){if(!f.hasAttributes())continue;for(var h=f.attributes,d=0,p=0;p<h.length;p++)h[p].value.indexOf(ge)>=0&&d++;for(;d-- >0;){var v=t.strings[c],y=we.exec(v)[1],g=h.getNamedItem(y),b=g.value.split(me);this.parts.push(new xe("attribute",u,g.name,y,b)),f.removeAttribute(g.name),c+=b.length-1}}else if(3===f.nodeType){var m=f.nodeValue;if(m.indexOf(ge)<0)continue;var w=f.parentNode,x=m.split(me),_=x.length-1;c+=_;for(var k=0;k<_;k++)w.insertBefore(""===x[k]?document.createComment(""):document.createTextNode(x[k]),f),this.parts.push(new xe("node",u++));w.insertBefore(""===x[_]?document.createComment(""):document.createTextNode(x[_]),f),l.push(f)}else if(8===f.nodeType&&f.nodeValue===ge){var S=f.parentNode,E=f.previousSibling;null===E||E!==n||E.nodeType!==Node.TEXT_NODE?S.insertBefore(document.createComment(""),f):u--,this.parts.push(new xe("node",u++)),l.push(f),null===f.nextSibling?S.insertBefore(document.createComment(""),f):u--,i=n,c++}}for(var I=0,A=l;I<A.length;I++){var T=A[I];T.parentNode.removeChild(T)}})),Se=function(e,t){return Ee(t)?(t=t(e),Ie):null===t?void 0:t},Ee=function(e){return"function"==typeof e&&!0===e.__litDirective},Ie={},Ae=function(e){return null===e||!("object"===r(e)||"function"==typeof e)},Te=function(){function e(t,r,n,i){a(this,e),this.instance=t,this.element=r,this.name=n,this.strings=i,this.size=i.length-1,this._previousValues=[]}return s(e,[{key:"_interpolate",value:function(e,t){for(var r=this.strings,n=r.length-1,i="",a=0;a<n;a++){i+=r[a];var o=Se(this,e[t+a]);if(o&&o!==Ie&&(Array.isArray(o)||"string"!=typeof o&&o[Symbol.iterator])){var s,u=C(o);try{for(u.s();!(s=u.n()).done;){i+=s.value}}catch(e){u.e(e)}finally{u.f()}}else i+=o}return i+r[n]}},{key:"_equalToPreviousValues",value:function(e,t){for(var r=t;r<t+this.size;r++)if(this._previousValues[r]!==e[r]||!Ae(e[r]))return!1;return!0}},{key:"setValue",value:function(e,t){if(!this._equalToPreviousValues(e,t)){var r,n=this.strings;2===n.length&&""===n[0]&&""===n[1]?(r=Se(this,e[t]),Array.isArray(r)&&(r=r.join(""))):r=this._interpolate(e,t),r!==Ie&&this.element.setAttribute(this.name,r),this._previousValues=e}}}]),e}(),Pe=function(){function e(t,r,n){a(this,e),this.instance=t,this.startNode=r,this.endNode=n,this._previousValue=void 0}return s(e,[{key:"setValue",value:function(e){if((e=Se(this,e))!==Ie)if(Ae(e)){if(e===this._previousValue)return;this._setText(e)}else e instanceof ye?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0!==e.then?this._setPromise(e):this._setText(e)}},{key:"_insert",value:function(e){this.endNode.parentNode.insertBefore(e,this.endNode)}},{key:"_setNode",value:function(e){this._previousValue!==e&&(this.clear(),this._insert(e),this._previousValue=e)}},{key:"_setText",value:function(e){var t=this.startNode.nextSibling;e=void 0===e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(document.createTextNode(e)),this._previousValue=e}},{key:"_setTemplateResult",value:function(e){var t,r=this.instance._getTemplate(e);this._previousValue&&this._previousValue.template===r?t=this._previousValue:(t=new Ce(r,this.instance._partCallback,this.instance._getTemplate),this._setNode(t._clone()),this._previousValue=t),t.update(e.values)}},{key:"_setIterable",value:function(t){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);var r,n=this._previousValue,i=0,a=C(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=n[i];if(void 0===s){var u=this.startNode;if(i>0)u=n[i-1].endNode=document.createTextNode(""),this._insert(u);s=new e(this.instance,u,this.endNode),n.push(s)}s.setValue(o),i++}}catch(e){a.e(e)}finally{a.f()}if(0===i)this.clear(),this._previousValue=void 0;else if(i<n.length){var c=n[i-1];n.length=i,this.clear(c.endNode.previousSibling),c.endNode=this.endNode}}},{key:"_setPromise",value:function(e){var t=this;this._previousValue=e,e.then((function(r){t._previousValue===e&&t.setValue(r)}))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;Me(this.startNode.parentNode,e.nextSibling,this.endNode)}}]),e}(),Oe=function(e,t,r){if("attribute"===t.type)return new Te(e,r,t.name,t.strings);if("node"===t.type)return new Pe(e,r,r.nextSibling);throw new Error("Unknown part type ".concat(t.type))},Ce=function(){function e(t,r,n){a(this,e),this._parts=[],this.template=t,this._partCallback=r,this._getTemplate=n}return s(e,[{key:"update",value:function(e){var t,r=0,n=C(this._parts);try{for(n.s();!(t=n.n()).done;){var i=t.value;i?void 0===i.size?(i.setValue(e[r]),r++):(i.setValue(e,r),r+=i.size):r++}}catch(e){n.e(e)}finally{n.f()}}},{key:"_clone",value:function(){var e=this.template.element.content.cloneNode(!0),t=this.template.parts;if(t.length>0)for(var r=document.createTreeWalker(e,133,null,!1),n=-1,i=0;i<t.length;i++){var a=t[i],o=_e(a);if(o)for(;n<a.index;)n++,r.nextNode();this._parts.push(o?this._partCallback(this,a,r.currentNode):void 0)}return e}}]),e}(),Me=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t;n!==r;){var i=n.nextSibling;e.removeChild(n),n=i}},Ne=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT;var Re=function(e){for(var t=1,r=document.createTreeWalker(e,Ne,null,!1);r.nextNode();)t++;return t},Le=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=t+1;r<e.length;r++){var n=e[r];if(_e(n))return r}return-1};var je=function(e,t){return"".concat(e,"--").concat(t)},De=["html","svg"];function Be(e){De.forEach((function(t){var r=ve.get(je(t,e));void 0!==r&&r.forEach((function(e){var t=e.element.content.querySelectorAll("style");!function(e,t){for(var r=e.element.content,n=e.parts,i=document.createTreeWalker(r,Ne,null,!1),a=0,o=n[0],s=-1,u=0,c=[],l=null;i.nextNode();){s++;var f=i.currentNode;for(f.previousSibling===l&&(l=null),t.has(f)&&(c.push(f),null===l&&(l=f)),null!==l&&u++;void 0!==o&&o.index===s;)o.index=null!==l?-1:o.index-u,o=n[++a]}c.forEach((function(e){return e.parentNode.removeChild(e)}))}(e,new Set(Array.from(t)))}))}))}var Ue=new Set,Fe=function(e,t,r){if(!Ue.has(r)){Ue.add(r);var n=document.createElement("template");if(Array.from(e.querySelectorAll("style")).forEach((function(e){n.content.appendChild(e)})),window.ShadyCSS.prepareTemplateStyles(n,r),Be(r),window.ShadyCSS.nativeShadow){var i=n.content.querySelector("style");null!==i&&(e.insertBefore(i,e.firstChild),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.element.content,i=e.parts;if(null!=r)for(var a=document.createTreeWalker(n,Ne,null,!1),o=Le(i),s=0,u=-1;a.nextNode();){for(u++,a.currentNode===r&&(r.parentNode.insertBefore(t,r),s=Re(t));-1!==o&&i[o].index===u;){if(s>0){for(;-1!==o;)i[o].index+=s,o=Le(i,o);return}o=Le(i,o)}}else n.appendChild(t)}(t,i.cloneNode(!0),t.element.content.firstChild))}}};function ze(e,t,n){var i=function(e){return function(t){var n=je(t.type,e),i=ve.get(n);void 0===i&&(i=new Map,ve.set(n,i));var a=i.get(t.strings);if(void 0===a){var o=t.getTemplateElement();"object"===r(window.ShadyCSS)&&window.ShadyCSS.prepareTemplateDom(o,e),a=new ke(t,o),i.set(t.strings,a)}return a}}(n),a=i(e),o=t.__templateInstance;if(void 0===o||o.template!==a||o._partCallback!==e.partCallback){o=new Ce(a,e.partCallback,i),t.__templateInstance=o;var s=o._clone();o.update(e.values);var u=t instanceof ShadowRoot?t.host:void 0;void 0!==u&&"object"===r(window.ShadyCSS)&&(Fe(s,a,n),window.ShadyCSS.styleElement(u)),Me(t,t.firstChild),t.appendChild(s)}else o.update(e.values)}var He=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new ye(e,r,"html",Ve)},Ve=function(e,t,r){if("attribute"===t.type){if("on-"===t.rawName.substr(0,3)){var n=t.rawName.slice(3);return new We(e,r,n)}var i=t.name.substr(t.name.length-1);if("$"===i){var a=t.name.slice(0,-1);return new Te(e,r,a,t.strings)}if("?"===i){var o=t.name.slice(0,-1);return new Ke(e,r,o,t.strings)}return new qe(e,r,t.rawName,t.strings)}return Oe(e,t,r)},Ke=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"setValue",value:function(e,t){var r=this.strings;if(2!==r.length||""!==r[0]||""!==r[1])throw new Error("boolean attributes can only contain a single expression");var n=Se(this,e[t]);n!==Ie&&(n?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name))}}]),r}(Te),qe=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"setValue",value:function(e,t){var r,n=this.strings;this._equalToPreviousValues(e,t)||((r=2===n.length&&""===n[0]&&""===n[1]?Se(this,e[t]):this._interpolate(e,t))!==Ie&&(this.element[this.name]=r),this._previousValues=e)}}]),r}(Te),We=function(){function e(t,r,n){a(this,e),this.instance=t,this.element=r,this.eventName=n}return s(e,[{key:"setValue",value:function(e){var t=Se(this,e);t!==this._listener&&(null==t?this.element.removeEventListener(this.eventName,this):null==this._listener&&this.element.addEventListener(this.eventName,this),this._listener=t)}},{key:"handleEvent",value:function(e){"function"==typeof this._listener?this._listener.call(this.element,e):"function"==typeof this._listener.handleEvent&&this._listener.handleEvent(e)}}]),e}(),Ge=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).__renderComplete=null,e.__resolveRenderComplete=null,e.__isInvalid=!1,e.__isChanging=!1,e}return s(r,[{key:"ready",value:function(){this._root=this._createRoot(),x(l(r.prototype),"ready",this).call(this),this._firstRendered()}},{key:"_firstRendered",value:function(){}},{key:"_createRoot",value:function(){return this.attachShadow({mode:"open"})}},{key:"_shouldPropertiesChange",value:function(e,t,r){var n=this._shouldRender(e,t,r);return!n&&this.__resolveRenderComplete&&this.__resolveRenderComplete(!1),n}},{key:"_shouldRender",value:function(e,t,r){return!0}},{key:"_propertiesChanged",value:function(e,t,n){x(l(r.prototype),"_propertiesChanged",this).call(this,e,t,n);var i=this._render(e);i&&void 0!==this._root&&this._applyRender(i,this._root),this._didRender(e,t,n),this.__resolveRenderComplete&&this.__resolveRenderComplete(!0)}},{key:"_flushProperties",value:function(){this.__isChanging=!0,this.__isInvalid=!1,x(l(r.prototype),"_flushProperties",this).call(this),this.__isChanging=!1}},{key:"_shouldPropertyChange",value:function(e,t,n){var i=x(l(r.prototype),"_shouldPropertyChange",this).call(this,e,t,n);return i&&this.__isChanging&&console.trace("Setting properties in response to other properties changing "+"considered harmful. Setting '".concat(e,"' from ")+"'".concat(this._getProperty(e),"' to '").concat(t,"'.")),i}},{key:"_render",value:function(e){throw new Error("_render() not implemented")}},{key:"_applyRender",value:function(e,t){ze(e,t,this.localName)}},{key:"_didRender",value:function(e,t,r){}},{key:"_requestRender",value:function(){this._invalidateProperties()}},{key:"_invalidateProperties",value:function(){this.__isInvalid=!0,x(l(r.prototype),"_invalidateProperties",this).call(this)}},{key:"renderComplete",get:function(){var e=this;return this.__renderComplete||(this.__renderComplete=new Promise((function(t){e.__resolveRenderComplete=function(r){e.__resolveRenderComplete=e.__renderComplete=null,t(r)}})),!this.__isInvalid&&this.__resolveRenderComplete&&Promise.resolve().then((function(){return e.__resolveRenderComplete(!1)}))),this.__renderComplete}}]),r}(pe(HTMLElement));function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ze="function"==typeof Symbol&&Symbol.observable||"@@observable",Qe=function(){return Math.random().toString(36).substring(7).split("").join(".")},et={INIT:"@@redux/INIT"+Qe(),REPLACE:"@@redux/REPLACE"+Qe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Qe()}};function tt(e){if("object"!==r(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function rt(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Ye(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Ye(1));return n(rt)(e,t)}if("function"!=typeof e)throw new Error(Ye(2));var a=e,o=t,s=[],u=s,c=!1;function l(){u===s&&(u=s.slice())}function f(){if(c)throw new Error(Ye(3));return o}function h(e){if("function"!=typeof e)throw new Error(Ye(4));if(c)throw new Error(Ye(5));var t=!0;return l(),u.push(e),function(){if(t){if(c)throw new Error(Ye(6));t=!1,l();var r=u.indexOf(e);u.splice(r,1),s=null}}}function d(e){if(!tt(e))throw new Error(Ye(7));if(void 0===e.type)throw new Error(Ye(8));if(c)throw new Error(Ye(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var t=s=u,r=0;r<t.length;r++){(0,t[r])()}return e}function p(e){if("function"!=typeof e)throw new Error(Ye(10));a=e,d({type:et.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!==r(e)||null===e)throw new Error(Ye(11));function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[Ze]=function(){return this},e}return d({type:et.INIT}),(i={dispatch:d,subscribe:h,getState:f,replaceReducer:p})[Ze]=v,i}function nt(e,t){return function(){return t(e.apply(this,arguments))}}function it(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function at(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(Ye(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return n=it.apply(void 0,a)(r.dispatch),$e($e({},r),{},{dispatch:n})}}}function ot(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var st=ot();st.withExtraArgument=ot;var ut=["N","E","A","D"];function ct(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function lt(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function ft(e,t,r){ft.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function ht(e,t){ht.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function dt(e,t){dt.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function pt(e,t,r){pt.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function vt(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function yt(e){var t=r(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function gt(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}function bt(e){var t=0,r=yt(e);if("array"===r)return e.forEach((function(e){t+=bt(e)})),t+gt("[type: array, hash: "+t+"]");if("object"===r){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i="[ type: object, key: "+n+", value hash: "+bt(e[n])+"]";t+=gt(i)}return t}return t+gt("[ type: "+r+" ; value: "+e+"]")}function mt(e,t,n,i,a,o,s,u){n=n||[],s=s||[];var c=(a=a||[]).slice(0);if(null!=o){if(i){if("function"==typeof i&&i(c,o))return;if("object"===r(i)){if(i.prefilter&&i.prefilter(c,o))return;if(i.normalize){var l=i.normalize(c,o,e,t);l&&(e=l[0],t=l[1])}}}c.push(o)}"regexp"===yt(e)&&"regexp"===yt(t)&&(e=e.toString(),t=t.toString());var f,h,d,p,v=r(e),y=r(t),g="undefined"!==v||s&&s.length>0&&s[s.length-1].lhs&&Object.getOwnPropertyDescriptor(s[s.length-1].lhs,o),b="undefined"!==y||s&&s.length>0&&s[s.length-1].rhs&&Object.getOwnPropertyDescriptor(s[s.length-1].rhs,o);if(!g&&b)n.push(new ht(c,t));else if(!b&&g)n.push(new dt(c,e));else if(yt(e)!==yt(t))n.push(new ft(c,e,t));else if("date"===yt(e)&&e-t!=0)n.push(new ft(c,e,t));else if("object"===v&&null!==e&&null!==t){for(f=s.length-1;f>-1;--f)if(s[f].lhs===e){p=!0;break}if(p)e!==t&&n.push(new ft(c,e,t));else{if(s.push({lhs:e,rhs:t}),Array.isArray(e)){for(u&&(e.sort((function(e,t){return bt(e)-bt(t)})),t.sort((function(e,t){return bt(e)-bt(t)}))),f=t.length-1,h=e.length-1;f>h;)n.push(new pt(c,f,new ht(void 0,t[f--])));for(;h>f;)n.push(new pt(c,h,new dt(void 0,e[h--])));for(;f>=0;--f)mt(e[f],t[f],n,i,c,f,s,u)}else{var m=Object.keys(e),w=Object.keys(t);for(f=0;f<m.length;++f)d=m[f],(p=w.indexOf(d))>=0?(mt(e[d],t[d],n,i,c,d,s,u),w[p]=null):mt(e[d],void 0,n,i,c,d,s,u);for(f=0;f<w.length;++f)(d=w[f])&&mt(void 0,t[d],n,i,c,d,s,u)}s.length=s.length-1}}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||n.push(new ft(c,e,t)))}function wt(e,t,r,n,i){var a=[];if(mt(e,t,a,n,null,null,null,i),r)for(var o=0;o<a.length;++o)r(a[o]);return a}function xt(e,t,r,n){var i=wt(e,t,n?function(e){e&&n.push(e)}:void 0,r);return n||(i.length?i:void 0)}function _t(e,t,r){if(r.path&&r.path.length){var n,i=e[t],a=r.path.length-1;for(n=0;n<a;n++)i=i[r.path[n]];switch(r.kind){case"A":_t(i[r.path[n]],r.index,r.item);break;case"D":delete i[r.path[n]];break;case"E":case"N":i[r.path[n]]=r.rhs}}else switch(r.kind){case"A":_t(e[t],r.index,r.item);break;case"D":e=vt(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function kt(e,t,r){if(void 0===r&&t&&~ut.indexOf(t.kind)&&(r=t),e&&r&&r.kind){for(var n=e,i=-1,a=r.path?r.path.length-1:0;++i<a;)void 0===n[r.path[i]]&&(n[r.path[i]]=void 0!==r.path[i+1]&&"number"==typeof r.path[i+1]?[]:{}),n=n[r.path[i]];switch(r.kind){case"A":r.path&&void 0===n[r.path[i]]&&(n[r.path[i]]=[]),_t(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}function St(e,t,r){if(r.path&&r.path.length){var n,i=e[t],a=r.path.length-1;for(n=0;n<a;n++)i=i[r.path[n]];switch(r.kind){case"A":St(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}else switch(r.kind){case"A":St(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=vt(e,t)}return e}ct(ft,lt),ct(ht,lt),ct(dt,lt),ct(pt,lt),Object.defineProperties(xt,{diff:{value:xt,enumerable:!0},orderIndependentDiff:{value:function(e,t,r,n){var i=wt(e,t,n?function(e){e&&n.push(e)}:void 0,r,!0);return n||(i.length?i:void 0)},enumerable:!0},observableDiff:{value:wt,enumerable:!0},orderIndependentObservableDiff:{value:function(e,t,r,n,i,a,o){return mt(e,t,r,n,i,a,o,!0)},enumerable:!0},orderIndepHash:{value:bt,enumerable:!0},applyDiff:{value:function(e,t,r){if(e&&t){wt(e,t,(function(n){r&&!r(e,t,n)||kt(e,t,n)}))}},enumerable:!0},applyChange:{value:kt,enumerable:!0},revertChange:{value:function(e,t,r){if(e&&t&&r&&r.kind){var n,i=e,a=r.path.length-1;for(n=0;n<a;n++)void 0===i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case"A":St(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}});var Et="AUTO_VERIFY",It="INITIALIZE",At="UPDATE_CERTIFICATE_DEFINITION",Tt="RESET_CERTIFICATE_DEFINITION",Pt="UPDATE_CERTIFICATE_URL",Ot="VALIDATE_URL_INPUT",Ct="CLEAR_VERIFIED_STEPS",Mt="STEP_VERIFIED",Nt="UPDATE_PARENT_STEP_STATUS",Rt="UPDATE_VERIFICATION_STATUS",Lt="UPDATE_FINAL_STEP",jt="SET_ERROR_MESSAGE",Dt="SHOW_VERIFICATION_MODAL";function Bt(){var e=null;function t(e){return!!e&&("object"===r(e)||"function"==typeof e)}var n=function(r,n){if(!t(r)||!t(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");var i=function(){};e=function(){i=function(e){throw new TypeError("Cannot perform '".concat(e,"' on a proxy that has been revoked"))}};var a=n;for(var o in n={get:null,set:null,apply:null,construct:null},a)o in n&&(n[o]=a[o]);"function"==typeof a&&(n.apply=a.apply.bind(a));var s=this,u=!1,c=!1;"function"==typeof r?(s=function(){var e=this&&this.constructor===s,t=Array.prototype.slice.call(arguments);if(i(e?"construct":"apply"),e&&n.construct)return n.construct.call(this,r,t);if(!e&&n.apply)return n.apply(r,this,t);if(e){t.unshift(r);var a=r.bind.apply(r,t);return new a}return r.apply(this,t)},u=!0):r instanceof Array&&(s=[],c=!0);var l=n.get?function(e){return i("get"),n.get(this,e,s)}:function(e){return i("get"),this[e]},f=n.set?function(e,t){i("set"),n.set(this,e,t,s)}:function(e,t){i("set"),this[e]=t},h=Object.getOwnPropertyNames(r),d={};h.forEach((function(e){if(!u&&!c||!(e in s)){var t={enumerable:!!Object.getOwnPropertyDescriptor(r,e).enumerable,get:l.bind(r,e),set:f.bind(r,e)};Object.defineProperty(s,e,t),d[e]=!0}}));var p=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(r)):s.__proto__?s.__proto__=r.__proto__:p=!1,n.get||!p)for(var v in r)d[v]||Object.defineProperty(s,v,{get:l.bind(r,v)});return Object.seal(r),Object.seal(s),s};return n.revocable=function(t,r){return{proxy:new n(t,r),revoke:e}},n}var Ut={get:function(e,t){var r=t in e?e[t]:null;return r||console.warn("the service does not exist",t),r}};const Ft=["text","image","signature","variable"];var zt="?format=json";var Ht,Vt,Kt,qt=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),o=new P(n||[]);return a._invoke=function(e,t,r){var n=h;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw a;return C()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?v:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",y={};function g(){}function b(){}function m(){}var w={};c(w,o,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(O([])));_&&_!==n&&i.call(_,o)&&(w=_);var k=m.prototype=g.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,o,s,u){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=f(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return b.prototype=m,c(k,"constructor",m),c(m,"constructor",b),b.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new E(l(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(k),c(k,u,"Generator"),c(k,o,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})),Wt=qt,Gt=["seed"],Jt=["publicKeyBase58","privateKeyBase58"],Xt=["documentLoader"],$t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Yt(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var Zt={},Qt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},er=[],tr=[],rr="undefined"!=typeof Uint8Array?Uint8Array:Array,nr=!1;function ir(){nr=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)er[t]=e[t],tr[e.charCodeAt(t)]=t;tr["-".charCodeAt(0)]=62,tr["_".charCodeAt(0)]=63}function ar(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(er[(i=n)>>18&63]+er[i>>12&63]+er[i>>6&63]+er[63&i]);return a.join("")}function or(e){var t;nr||ir();for(var r=e.length,n=r%3,i="",a=[],o=16383,s=0,u=r-n;s<u;s+=o)a.push(ar(e,s,s+o>u?u:s+o));return 1===n?(t=e[r-1],i+=er[t>>2],i+=er[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=er[t>>10],i+=er[t>>4&63],i+=er[t<<2&63],i+="="),a.push(i),a.join("")}function sr(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)}function ur(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*v}var cr={}.toString,lr=Array.isArray||function(e){return"[object Array]"==cr.call(e)};pr.TYPED_ARRAY_SUPPORT=void 0===Qt.TYPED_ARRAY_SUPPORT||Qt.TYPED_ARRAY_SUPPORT;var fr=hr();function hr(){return pr.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function dr(e,t){if(hr()<t)throw new RangeError("Invalid typed array length");return pr.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=pr.prototype:(null===e&&(e=new pr(t)),e.length=t),e}function pr(e,t,r){if(!(pr.TYPED_ARRAY_SUPPORT||this instanceof pr))return new pr(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return gr(this,e)}return vr(this,e,t,r)}function vr(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),pr.TYPED_ARRAY_SUPPORT?(e=t).__proto__=pr.prototype:e=br(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!pr.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|xr(t,r),i=(e=dr(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(wr(t)){var r=0|mr(t.length);return 0===(e=dr(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?dr(e,0):br(e,t);if("Buffer"===t.type&&lr(t.data))return br(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function yr(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function gr(e,t){if(yr(t),e=dr(e,t<0?0:0|mr(t)),!pr.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function br(e,t){var r=t.length<0?0:0|mr(t.length);e=dr(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function mr(e){if(e>=hr())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hr().toString(16)+" bytes");return 0|e}function wr(e){return!(null==e||!e._isBuffer)}function xr(e,t){if(wr(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Gr(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Jr(e).length;default:if(n)return Gr(e).length;t=(""+t).toLowerCase(),n=!0}}function _r(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return jr(this,t,r);case"utf8":case"utf-8":return Nr(this,t,r);case"ascii":return Rr(this,t,r);case"latin1":case"binary":return Lr(this,t,r);case"base64":return Mr(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dr(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function kr(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Sr(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=pr.from(t,n)),wr(t))return 0===t.length?-1:Er(e,t,r,n,i);if("number"==typeof t)return t&=255,pr.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Er(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Er(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function Ir(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function Ar(e,t,r,n){return Xr(Gr(t,e.length-r),e,r,n)}function Tr(e,t,r,n){return Xr(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Pr(e,t,r,n){return Tr(e,t,r,n)}function Or(e,t,r,n){return Xr(Jr(t),e,r,n)}function Cr(e,t,r,n){return Xr(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function Mr(e,t,r){return 0===t&&r===e.length?or(e):or(e.slice(t,r))}function Nr(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function Rr(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Lr(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function jr(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=Wr(e[a]);return i}function Dr(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function Br(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Ur(e,t,r,n,i,a){if(!wr(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Fr(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function zr(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Hr(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Vr(e,t,r,n,i){return i||Hr(e,0,r,4),ur(e,t,r,n,23,4),r+4}function Kr(e,t,r,n,i){return i||Hr(e,0,r,8),ur(e,t,r,n,52,8),r+8}pr.poolSize=8192,pr._augment=function(e){return e.__proto__=pr.prototype,e},pr.from=function(e,t,r){return vr(null,e,t,r)},pr.TYPED_ARRAY_SUPPORT&&(pr.prototype.__proto__=Uint8Array.prototype,pr.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&pr[Symbol.species]),pr.alloc=function(e,t,r){return function(e,t,r,n){return yr(t),t<=0?dr(e,t):void 0!==r?"string"==typeof n?dr(e,t).fill(r,n):dr(e,t).fill(r):dr(e,t)}(null,e,t,r)},pr.allocUnsafe=function(e){return gr(null,e)},pr.allocUnsafeSlow=function(e){return gr(null,e)},pr.isBuffer=$r,pr.compare=function(e,t){if(!wr(e)||!wr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},pr.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pr.concat=function(e,t){if(!lr(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return pr.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=pr.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!wr(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},pr.byteLength=xr,pr.prototype._isBuffer=!0,pr.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)kr(this,t,t+1);return this},pr.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)kr(this,t,t+3),kr(this,t+1,t+2);return this},pr.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)kr(this,t,t+7),kr(this,t+1,t+6),kr(this,t+2,t+5),kr(this,t+3,t+4);return this},pr.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Nr(this,0,e):_r.apply(this,arguments)},pr.prototype.equals=function(e){if(!wr(e))throw new TypeError("Argument must be a Buffer");return this===e||0===pr.compare(this,e)},pr.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},pr.prototype.compare=function(e,t,r,n,i){if(!wr(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(n,i),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){a=u[l],o=c[l];break}return a<o?-1:o<a?1:0},pr.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},pr.prototype.indexOf=function(e,t,r){return Sr(this,e,t,r,!0)},pr.prototype.lastIndexOf=function(e,t,r){return Sr(this,e,t,r,!1)},pr.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return Ir(this,e,t,r);case"utf8":case"utf-8":return Ar(this,e,t,r);case"ascii":return Tr(this,e,t,r);case"latin1":case"binary":return Pr(this,e,t,r);case"base64":return Or(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cr(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},pr.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},pr.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),pr.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=pr.prototype;else{var i=t-e;r=new pr(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},pr.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Br(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},pr.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Br(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},pr.prototype.readUInt8=function(e,t){return t||Br(e,1,this.length),this[e]},pr.prototype.readUInt16LE=function(e,t){return t||Br(e,2,this.length),this[e]|this[e+1]<<8},pr.prototype.readUInt16BE=function(e,t){return t||Br(e,2,this.length),this[e]<<8|this[e+1]},pr.prototype.readUInt32LE=function(e,t){return t||Br(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},pr.prototype.readUInt32BE=function(e,t){return t||Br(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},pr.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Br(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},pr.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Br(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},pr.prototype.readInt8=function(e,t){return t||Br(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},pr.prototype.readInt16LE=function(e,t){t||Br(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},pr.prototype.readInt16BE=function(e,t){t||Br(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},pr.prototype.readInt32LE=function(e,t){return t||Br(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},pr.prototype.readInt32BE=function(e,t){return t||Br(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},pr.prototype.readFloatLE=function(e,t){return t||Br(e,4,this.length),sr(this,e,!0,23,4)},pr.prototype.readFloatBE=function(e,t){return t||Br(e,4,this.length),sr(this,e,!1,23,4)},pr.prototype.readDoubleLE=function(e,t){return t||Br(e,8,this.length),sr(this,e,!0,52,8)},pr.prototype.readDoubleBE=function(e,t){return t||Br(e,8,this.length),sr(this,e,!1,52,8)},pr.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Ur(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},pr.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Ur(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},pr.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,1,255,0),pr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},pr.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,2,65535,0),pr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Fr(this,e,t,!0),t+2},pr.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,2,65535,0),pr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Fr(this,e,t,!1),t+2},pr.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,4,4294967295,0),pr.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):zr(this,e,t,!0),t+4},pr.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,4,4294967295,0),pr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):zr(this,e,t,!1),t+4},pr.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ur(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},pr.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ur(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},pr.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,1,127,-128),pr.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},pr.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,2,32767,-32768),pr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Fr(this,e,t,!0),t+2},pr.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,2,32767,-32768),pr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Fr(this,e,t,!1),t+2},pr.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,4,2147483647,-2147483648),pr.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):zr(this,e,t,!0),t+4},pr.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Ur(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),pr.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):zr(this,e,t,!1),t+4},pr.prototype.writeFloatLE=function(e,t,r){return Vr(this,e,t,!0,r)},pr.prototype.writeFloatBE=function(e,t,r){return Vr(this,e,t,!1,r)},pr.prototype.writeDoubleLE=function(e,t,r){return Kr(this,e,t,!0,r)},pr.prototype.writeDoubleBE=function(e,t,r){return Kr(this,e,t,!1,r)},pr.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!pr.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},pr.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!pr.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=wr(e)?e:Gr(new pr(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var qr=/[^+\/0-9A-Za-z-_]/g;function Wr(e){return e<16?"0"+e.toString(16):e.toString(16)}function Gr(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Jr(e){return function(e){var t,r,n,i,a,o;nr||ir();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new rr(3*s/4-a),n=a>0?s-4:s;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=tr[e.charCodeAt(t)]<<18|tr[e.charCodeAt(t+1)]<<12|tr[e.charCodeAt(t+2)]<<6|tr[e.charCodeAt(t+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=tr[e.charCodeAt(t)]<<2|tr[e.charCodeAt(t+1)]>>4,o[u++]=255&i):1===a&&(i=tr[e.charCodeAt(t)]<<10|tr[e.charCodeAt(t+1)]<<4|tr[e.charCodeAt(t+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(qr,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Xr(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $r(e){return null!=e&&(!!e._isBuffer||Yr(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Yr(e.slice(0,0))}(e))}function Yr(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Zr=Yt(Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:fr,Buffer:pr,SlowBuffer:function(e){return+e!=e&&(e=0),pr.alloc(+e)},isBuffer:$r})),Qr={/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */read:function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)},write:function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*v}},en={exports:{}};!function(e){!function(t){var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,o=Math.floor,s="[BigNumber Error] ",u=s+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,f=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function v(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,r,n=1,i=e.length,a=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);a+=t}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,a=t.c,o=e.s,s=t.s,u=e.e,c=t.e;if(!o||!s)return null;if(r=i&&!i[0],n=a&&!a[0],r||n)return r?n?0:-s:o;if(o!=s)return o;if(r=o<0,n=u==c,!i||!a)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=i.length)<(c=a.length)?u:c,o=0;o<s;o++)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return u==c?0:u>c^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(s+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function m(e){var t=e.c.length-1;return v(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function x(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,_,k,S,E,I,A,T,P,O,C=q.prototype={constructor:q,toString:null,valueOf:null},M=new q(1),N=20,R=4,L=-7,j=21,D=-1e7,B=1e7,U=!1,F=1,z=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function q(e,t){var r,n,a,s,c,h,d,p,v=this;if(!(v instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>B?v.c=v.e=null:e.e<D?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,c=e;c>=10;c/=10,s++);return void(s>B?v.c=v.e=null:(v.e=s,v.c=[e]))}p=String(e)}else{if(!i.test(p=String(e)))return k(v,p,h);v.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(s=p.indexOf("."))>-1&&(p=p.replace(".","")),(c=p.search(/e/i))>0?(s<0&&(s=c),s+=+p.slice(c+1),p=p.substring(0,c)):s<0&&(s=p.length)}else{if(b(t,2,V.length,"Base"),10==t&&K)return X(v=new q(e),N+v.e+1,R);if(p=String(e),h="number"==typeof e){if(0*e!=0)return k(v,p,h,t);if(v.s=1/e<0?(p=p.slice(1),-1):1,q.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else v.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=V.slice(0,t),s=c=0,d=p.length;c<d;c++)if(r.indexOf(n=p.charAt(c))<0){if("."==n){if(c>s){s=d;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,c=-1,s=0;continue}return k(v,String(e),h,t)}h=!1,(s=(p=_(p,t,10,v.s)).indexOf("."))>-1?p=p.replace(".",""):s=p.length}for(c=0;48===p.charCodeAt(c);c++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(c,++d)){if(d-=c,h&&q.DEBUG&&d>15&&(e>f||e!==o(e)))throw Error(u+v.s*e);if((s=s-c-1)>B)v.c=v.e=null;else if(s<D)v.c=[v.e=0];else{if(v.e=s,v.c=[],c=(s+1)%l,s<0&&(c+=l),c<d){for(c&&v.c.push(+p.slice(0,c)),d-=l;c<d;)v.c.push(+p.slice(c,c+=l));c=l-(p=p.slice(c)).length}else c-=d;for(;c--;p+="0");v.c.push(+p)}}else v.c=[v.e=0]}function W(e,t,r,n){var i,a,o,s,u;if(null==r?r=R:b(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)u=y(e.c),u=1==n||2==n&&(o<=L||o>=j)?w(u,o):x(u,o,"0");else if(a=(e=X(new q(e),t,r)).e,s=(u=y(e.c)).length,1==n||2==n&&(t<=a||a<=L)){for(;s<t;u+="0",s++);u=w(u,a)}else if(t-=o,u=x(u,a,"0"),a+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=a-s)>0)for(a+1==s&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function G(e,t){for(var r,n=1,i=new q(e[0]);n<e.length;n++){if(!(r=new q(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function J(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*l-1)>B?e.c=e.e=null:r<D?e.c=[e.e=0]:(e.e=r,e.c=t),e}function X(e,t,r,n){var i,s,u,f,d,p,v,y=e.c,g=h;if(y){e:{for(i=1,f=y[0];f>=10;f/=10,i++);if((s=t-i)<0)s+=l,u=t,v=(d=y[p=0])/g[i-u-1]%10|0;else if((p=a((s+1)/l))>=y.length){if(!n)break e;for(;y.length<=p;y.push(0));d=v=0,i=1,u=(s%=l)-l+1}else{for(d=f=y[p],i=1;f>=10;f/=10,i++);v=(u=(s%=l)-l+i)<0?0:d/g[i-u-1]%10|0}if(n=n||t<0||null!=y[p+1]||(u<0?d:d%g[i-u-1]),n=r<4?(v||n)&&(0==r||r==(e.s<0?3:2)):v>5||5==v&&(4==r||n||6==r&&(s>0?u>0?d/g[i-u]:0:y[p-1])%10&1||r==(e.s<0?8:7)),t<1||!y[0])return y.length=0,n?(t-=e.e+1,y[0]=g[(l-t%l)%l],e.e=-t||0):y[0]=e.e=0,e;if(0==s?(y.length=p,f=1,p--):(y.length=p+1,f=g[l-s],y[p]=u>0?o(d/g[i-u]%g[u])*f:0),n)for(;;){if(0==p){for(s=1,u=y[0];u>=10;u/=10,s++);for(u=y[0]+=f,f=1;u>=10;u/=10,f++);s!=f&&(e.e++,y[0]==c&&(y[0]=1));break}if(y[p]+=f,y[p]!=c)break;y[p--]=0,f=1}for(s=y.length;0===y[--s];y.pop());}e.e>B?e.c=e.e=null:e.e<D&&(e.c=[e.e=0])}return e}function $(e){var t,r=e.e;return null===r?e.toString():(t=y(e.c),t=r<=L||r>=j?w(t,r):x(t,r,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,n;if(null!=e){if("object"!=r(e))throw Error(s+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(n=e[t],0,p,t),N=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(n=e[t],0,8,t),R=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(b(n[0],-p,0,t),b(n[1],0,p,t),L=n[0],j=n[1]):(b(n,-p,p,t),L=-(j=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)b(n[0],-p,-1,t),b(n[1],1,p,t),D=n[0],B=n[1];else{if(b(n,-p,p,t),!n)throw Error(s+t+" cannot be zero: "+n);D=-(B=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(s+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!n,Error(s+"crypto unavailable");U=n}else U=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(n=e[t],0,9,t),F=n),e.hasOwnProperty(t="POW_PRECISION")&&(b(n=e[t],0,p,t),z=n),e.hasOwnProperty(t="FORMAT")){if("object"!=r(n=e[t]))throw Error(s+t+" not an object: "+n);H=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(s+t+" invalid: "+n);K="0123456789"==n.slice(0,10),V=n}}return{DECIMAL_PLACES:N,ROUNDING_MODE:R,EXPONENTIAL_AT:[L,j],RANGE:[D,B],CRYPTO:U,MODULO_MODE:F,POW_PRECISION:z,FORMAT:H,ALPHABET:V}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,r,n=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===a||-1===a)&&i>=-p&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=c||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(s+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return G(arguments,C.lt)},q.minimum=q.min=function(){return G(arguments,C.gt)},q.random=(S=9007199254740992,E=Math.random()*S&2097151?function(){return o(Math.random()*S)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,u,c=0,f=[],d=new q(M);if(null==e?e=N:b(e,0,p),i=a(e/l),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));c<i;)(u=131072*t[c]+(t[c+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[c]=r[0],t[c+1]=r[1]):(f.push(u%1e14),c+=2);c=i/2}else{if(!crypto.randomBytes)throw U=!1,Error(s+"crypto unavailable");for(t=crypto.randomBytes(i*=7);c<i;)(u=281474976710656*(31&t[c])+1099511627776*t[c+1]+4294967296*t[c+2]+16777216*t[c+3]+(t[c+4]<<16)+(t[c+5]<<8)+t[c+6])>=9e15?crypto.randomBytes(7).copy(t,c):(f.push(u%1e14),c+=7);c=i/7}if(!U)for(;c<i;)(u=E())<9e15&&(f[c++]=u%1e14);for(i=f[--c],e%=l,i&&e&&(u=h[l-e],f[c]=o(i/u)*u);0===f[c];f.pop(),c--);if(c<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=l);for(c=1,u=f[0];u>=10;u/=10,c++);c<l&&(n-=l-c)}return d.e=n,d.c=f,d}),q.sum=function(){for(var e=1,t=arguments,r=new q(t[0]);e<t.length;)r=r.plus(t[e++]);return r},_=function(){var e="0123456789";function t(e,t,r,n){for(var i,a,o=[0],s=0,u=e.length;s<u;){for(a=o.length;a--;o[a]*=t);for(o[0]+=n.indexOf(e.charAt(s++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(r,i,a,o,s){var u,c,l,f,h,d,p,v,g=r.indexOf("."),b=N,m=R;for(g>=0&&(f=z,z=0,r=r.replace(".",""),d=(v=new q(i)).pow(r.length-g),z=f,v.c=t(x(y(d.c),d.e,"0"),10,a,e),v.e=v.c.length),l=f=(p=t(r,i,a,s?(u=V,e):(u=e,V))).length;0==p[--f];p.pop());if(!p[0])return u.charAt(0);if(g<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=n(d,v,b,m,a)).c,h=d.r,l=d.e),g=p[c=l+b+1],f=a/2,h=h||c<0||null!=p[c+1],h=m<4?(null!=g||h)&&(0==m||m==(d.s<0?3:2)):g>f||g==f&&(4==m||h||6==m&&1&p[c-1]||m==(d.s<0?8:7)),c<1||!p[0])r=h?x(u.charAt(1),-b,u.charAt(0)):u.charAt(0);else{if(p.length=c,h)for(--a;++p[--c]>a;)p[c]=0,c||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(g=0,r="";g<=f;r+=u.charAt(p[g++]));r=x(r,l,u.charAt(0))}return r}}(),n=function(){function e(e,t,r){var n,i,a,o,s=0,u=e.length,c=t%d,l=t/d|0;for(e=e.slice();u--;)s=((i=c*(a=e[u]%d)+(n=l*a+(o=e[u]/d|0)*c)%d*d+s)/r|0)+(n/d|0)+l*o,e[u]=i%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,a,s,u){var f,h,d,p,y,g,b,m,w,x,_,k,S,E,I,A,T,P=n.s==i.s?1:-1,O=n.c,C=i.c;if(!(O&&O[0]&&C&&C[0]))return new q(n.s&&i.s&&(O?!C||O[0]!=C[0]:C)?O&&0==O[0]||!C?0*P:P/0:NaN);for(w=(m=new q(P)).c=[],P=a+(h=n.e-i.e)+1,u||(u=c,h=v(n.e/l)-v(i.e/l),P=P/l|0),d=0;C[d]==(O[d]||0);d++);if(C[d]>(O[d]||0)&&h--,P<0)w.push(1),p=!0;else{for(E=O.length,A=C.length,d=0,P+=2,(y=o(u/(C[0]+1)))>1&&(C=e(C,y,u),O=e(O,y,u),A=C.length,E=O.length),S=A,_=(x=O.slice(0,A)).length;_<A;x[_++]=0);T=C.slice(),T=[0].concat(T),I=C[0],C[1]>=u/2&&I++;do{if(y=0,(f=t(C,x,A,_))<0){if(k=x[0],A!=_&&(k=k*u+(x[1]||0)),(y=o(k/I))>1)for(y>=u&&(y=u-1),b=(g=e(C,y,u)).length,_=x.length;1==t(g,x,b,_);)y--,r(g,A<b?T:C,b,u),b=g.length,f=1;else 0==y&&(f=y=1),b=(g=C.slice()).length;if(b<_&&(g=[0].concat(g)),r(x,g,_,u),_=x.length,-1==f)for(;t(C,x,A,_)<1;)y++,r(x,A<_?T:C,_,u),_=x.length}else 0===f&&(y++,x=[0]);w[d++]=y,x[0]?x[_++]=O[S]||0:(x=[O[S]],_=1)}while((S++<E||null!=x[0])&&P--);p=null!=x[0],w[0]||w.splice(0,1)}if(u==c){for(d=1,P=w[0];P>=10;P/=10,d++);X(m,a+(m.e=d+h*l-1)+1,s,p)}else m.e=h,m.r=+p;return m}}(),I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,T=/^\.([^.]+)$/,P=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,k=function(e,t,r,n){var i,a=r?t:t.replace(O,"");if(P.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!r&&(a=a.replace(I,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,a=a.replace(A,"$1").replace(T,"0.$1")),t!=a))return new q(a,i);if(q.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},C.absoluteValue=C.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},C.comparedTo=function(e,t){return g(this,new q(e,t))},C.decimalPlaces=C.dp=function(e,t){var r,n,i,a=this;if(null!=e)return b(e,0,p),null==t?t=R:b(t,0,8),X(new q(a),e+a.e+1,t);if(!(r=a.c))return null;if(n=((i=r.length-1)-v(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(e,t){return n(this,new q(e,t),N,R)},C.dividedToIntegerBy=C.idiv=function(e,t){return n(this,new q(e,t),0,1)},C.exponentiatedBy=C.pow=function(e,t){var r,n,i,u,c,f,h,d,p=this;if((e=new q(e)).c&&!e.isInteger())throw Error(s+"Exponent not an integer: "+$(e));if(null!=t&&(t=new q(t)),c=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new q(Math.pow(+$(p),c?2-m(e):+$(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(n=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||c&&p.c[1]>=24e7:p.c[0]<8e13||c&&p.c[0]<=9999975e7)))return u=p.s<0&&m(e)?-0:0,p.e>-1&&(u=1/u),new q(f?1/u:u);z&&(u=a(z/l+2))}for(c?(r=new q(.5),f&&(e.s=1),h=m(e)):h=(i=Math.abs(+$(e)))%2,d=new q(M);;){if(h){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):n&&(d=d.mod(t))}if(i){if(0===(i=o(i/2)))break;h=i%2}else if(X(e=e.times(r),e.e+1,1),e.e>14)h=m(e);else{if(0==(i=+$(e)))break;h=i%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):n&&(p=p.mod(t))}return n?d:(f&&(d=M.div(d)),t?d.mod(t):u?X(d,z,R,void 0):d)},C.integerValue=function(e){var t=new q(this);return null==e?e=R:b(e,0,8),X(t,t.e+1,e)},C.isEqualTo=C.eq=function(e,t){return 0===g(this,new q(e,t))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(e,t){return g(this,new q(e,t))>0},C.isGreaterThanOrEqualTo=C.gte=function(e,t){return 1===(t=g(this,new q(e,t)))||0===t},C.isInteger=function(){return!!this.c&&v(this.e/l)>this.c.length-2},C.isLessThan=C.lt=function(e,t){return g(this,new q(e,t))<0},C.isLessThanOrEqualTo=C.lte=function(e,t){return-1===(t=g(this,new q(e,t)))||0===t},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(e,t){var r,n,i,a,o=this,s=o.s;if(t=(e=new q(e,t)).s,!s||!t)return new q(NaN);if(s!=t)return e.s=-t,o.plus(e);var u=o.e/l,f=e.e/l,h=o.c,d=e.c;if(!u||!f){if(!h||!d)return h?(e.s=-t,e):new q(d?o:NaN);if(!h[0]||!d[0])return d[0]?(e.s=-t,e):new q(h[0]?o:3==R?-0:0)}if(u=v(u),f=v(f),h=h.slice(),s=u-f){for((a=s<0)?(s=-s,i=h):(f=u,i=d),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(n=(a=(s=h.length)<(t=d.length))?s:t,s=t=0;t<n;t++)if(h[t]!=d[t]){a=h[t]<d[t];break}if(a&&(i=h,h=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=h.length))>0)for(;t--;h[r++]=0);for(t=c-1;n>s;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r],h[n]+=c}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--f);return h[0]?J(e,h,f):(e.s=3==R?-1:1,e.c=[e.e=0],e)},C.modulo=C.mod=function(e,t){var r,i,a=this;return e=new q(e,t),!a.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||a.c&&!a.c[0]?new q(a):(9==F?(i=e.s,e.s=1,r=n(a,e,0,3),e.s=i,r.s*=i):r=n(a,e,0,F),(e=a.minus(r.times(e))).c[0]||1!=F||(e.s=a.s),e)},C.multipliedBy=C.times=function(e,t){var r,n,i,a,o,s,u,f,h,p,y,g,b,m,w,x=this,_=x.c,k=(e=new q(e,t)).c;if(!(_&&k&&_[0]&&k[0]))return!x.s||!e.s||_&&!_[0]&&!k||k&&!k[0]&&!_?e.c=e.e=e.s=null:(e.s*=x.s,_&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=v(x.e/l)+v(e.e/l),e.s*=x.s,(u=_.length)<(p=k.length)&&(b=_,_=k,k=b,i=u,u=p,p=i),i=u+p,b=[];i--;b.push(0));for(m=c,w=d,i=p;--i>=0;){for(r=0,y=k[i]%w,g=k[i]/w|0,a=i+(o=u);a>i;)r=((f=y*(f=_[--o]%w)+(s=g*f+(h=_[o]/w|0)*y)%w*w+b[a]+r)/m|0)+(s/w|0)+g*h,b[a--]=f%m;b[a]=r}return r?++n:b.splice(0,1),J(e,b,n)},C.negated=function(){var e=new q(this);return e.s=-e.s||null,e},C.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new q(e,t)).s,!i||!t)return new q(NaN);if(i!=t)return e.s=-t,n.minus(e);var a=n.e/l,o=e.e/l,s=n.c,u=e.c;if(!a||!o){if(!s||!u)return new q(i/0);if(!s[0]||!u[0])return u[0]?e:new q(s[0]?n:0*i)}if(a=v(a),o=v(o),s=s.slice(),i=a-o){for(i>0?(o=a,r=u):(i=-i,r=s),r.reverse();i--;r.push(0));r.reverse()}for((i=s.length)-(t=u.length)<0&&(r=u,u=s,s=r,t=i),i=0;t;)i=(s[--t]=s[t]+u[t]+i)/c|0,s[t]=c===s[t]?0:s[t]%c;return i&&(s=[i].concat(s),++o),J(e,s,o)},C.precision=C.sd=function(e,t){var r,n,i,a=this;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=R:b(t,0,8),X(new q(a),e,t);if(!(r=a.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&a.e+1>n&&(n=a.e+1),n},C.shiftedBy=function(e){return b(e,-9007199254740991,f),this.times("1e"+e)},C.squareRoot=C.sqrt=function(){var e,t,r,i,a,o=this,s=o.c,u=o.s,c=o.e,l=N+4,f=new q("0.5");if(1!==u||!s||!s[0])return new q(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);if(0==(u=Math.sqrt(+$(o)))||u==1/0?(((t=y(s)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=v((c+1)/2)-(c<0||c%2),r=new q(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new q(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(a=r,r=f.times(a.plus(n(o,a,l,1))),y(a.c).slice(0,u)===(t=y(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(X(r,r.e+N+2,1),e=!r.times(r).eq(o));break}if(!i&&(X(a,a.e+N+2,0),a.times(a).eq(o))){r=a;break}l+=4,u+=4,i=1}return X(r,r.e+N+1,R,e)},C.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),W(this,e,t,1)},C.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),W(this,e,t)},C.toFormat=function(e,t,n){var i,a=this;if(null==n)null!=e&&t&&"object"==r(t)?(n=t,t=null):e&&"object"==r(e)?(n=e,e=t=null):n=H;else if("object"!=r(n))throw Error(s+"Argument not an object: "+n);if(i=a.toFixed(e,t),a.c){var o,u=i.split("."),c=+n.groupSize,l=+n.secondaryGroupSize,f=n.groupSeparator||"",h=u[0],d=u[1],p=a.s<0,v=p?h.slice(1):h,y=v.length;if(l&&(o=c,c=l,l=o,y-=o),c>0&&y>0){for(o=y%c||c,h=v.substr(0,o);o<y;o+=c)h+=f+v.substr(o,c);l>0&&(h+=f+v.slice(o)),p&&(h="-"+h)}i=d?h+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):h}return(n.prefix||"")+i+(n.suffix||"")},C.toFraction=function(e){var t,r,i,a,o,u,c,f,d,p,v,g,b=this,m=b.c;if(null!=e&&(!(c=new q(e)).isInteger()&&(c.c||1!==c.s)||c.lt(M)))throw Error(s+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+$(c));if(!m)return new q(b);for(t=new q(M),d=r=new q(M),i=f=new q(M),g=y(m),o=t.e=g.length-b.e-1,t.c[0]=h[(u=o%l)<0?l+u:u],e=!e||c.comparedTo(t)>0?o>0?t:d:c,u=B,B=1/0,c=new q(g),f.c[0]=0;p=n(c,t,0,1),1!=(a=r.plus(p.times(i))).comparedTo(e);)r=i,i=a,d=f.plus(p.times(a=d)),f=a,t=c.minus(p.times(a=t)),c=a;return a=n(e.minus(r),i,0,1),f=f.plus(a.times(d)),r=r.plus(a.times(i)),f.s=d.s=b.s,v=n(d,i,o*=2,R).minus(b).abs().comparedTo(n(f,r,o,R).minus(b).abs())<1?[d,i]:[f,r],B=u,v},C.toNumber=function(){return+$(this)},C.toPrecision=function(e,t){return null!=e&&b(e,1,p),W(this,e,t,2)},C.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=i<=L||i>=j?w(y(r.c),i):x(y(r.c),i,"0"):10===e&&K?t=x(y((r=X(new q(r),N+i+1,R)).c),r.e,"0"):(b(e,2,V.length,"Base"),t=_(x(y(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},C.valueOf=C.toJSON=function(){return $(this)},C._isBigNumber=!0,null!=t&&q.set(t),q}(),n.default=n.BigNumber=n,e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}($t)}(en);var tn={},rn={},nn=en.exports.BigNumber;rn.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},rn.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},rn.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},rn.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},rn.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},rn.SHIFT32=Math.pow(2,32),rn.SHIFT16=Math.pow(2,16),rn.MAX_SAFE_HIGH=2097151,rn.NEG_ONE=new nn(-1),rn.TEN=new nn(10),rn.TWO=new nn(2),rn.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5},function(e){var t=Zr.Buffer,r=en.exports.BigNumber,n=rn,i=n.SHIFT32,a=n.SHIFT16;function o(e){return e<16?"0"+e.toString(16):e.toString(16)}e.parseHalf=function(e){var t,r,n;return n=128&e[0]?-1:1,t=(124&e[0])>>2,r=(3&e[0])<<8|e[1],t?31===t?n*(r?NaN:1/0):n*Math.pow(2,t-25)*(1024+r):5.960464477539063e-8*n*r},e.arrayBufferToBignumber=function(e){for(var t=e.byteLength,n="",i=0;i<t;i++)n+=o(e[i]);return new r(n,16)},e.buildMap=function(e){for(var t=new Map,r=Object.keys(e),n=r.length,i=0;i<n;i++)t.set(r[i],e[r[i]]);return t},e.buildInt32=function(e,t){return e*a+t},e.buildInt64=function(t,n,a,o){var s=e.buildInt32(t,n),u=e.buildInt32(a,o);return s>2097151?new r(s).times(i).plus(u):s*i+u},e.writeHalf=function(e,r){var n=t.allocUnsafe(4);n.writeFloatBE(r,0);var i=n.readUInt32BE(0);if(0!=(8191&i))return!1;var a=i>>16&32768,o=i>>23&255,s=8388607&i;if(o>=113&&o<=142)a+=(o-112<<10)+(s>>13);else{if(!(o>=103&&o<113))return!1;if(s&(1<<126-o)-1)return!1;a+=s+8388608>>126-o}return e.writeUInt16BE(a,0),!0},e.keySorter=function(e,t){var r=e[0].byteLength,n=t[0].byteLength;return r>n?1:n>r?-1:e[0].compare(t[0])},e.isNegativeZero=function(e){return 0===e&&1/e<0},e.nextPowerOf2=function(e){var t=0;if(e&&!(e&e-1))return e;for(;0!==e;)e>>=1,t+=1;return 1<<t}}(tn);var an=rn,on=an.MT,sn=an.SIMPLE,un=an.SYMS,cn=function(){function e(t){if(a(this,e),"number"!=typeof t)throw new Error("Invalid Simple type: "+r(t));if(t<0||t>255||(0|t)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}return s(e,[{key:"toString",value:function(){return"simple("+this.value+")"}},{key:"inspect",value:function(){return"simple("+this.value+")"}},{key:"encodeCBOR",value:function(e){return e._pushInt(this.value,on.SIMPLE_FLOAT)}}],[{key:"isSimple",value:function(t){return t instanceof e}},{key:"decode",value:function(t,r){switch(null==r&&(r=!0),t){case sn.FALSE:return!1;case sn.TRUE:return!0;case sn.NULL:return r?null:un.NULL;case sn.UNDEFINED:return r?void 0:un.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return un.BREAK;default:return new e(t)}}}]),e}(),ln=cn,fn=function(){function e(t,n,i){if(a(this,e),this.tag=t,this.value=n,this.err=i,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+r(this.tag)+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}return s(e,[{key:"toString",value:function(){return"".concat(this.tag,"(").concat(JSON.stringify(this.value),")")}},{key:"encodeCBOR",value:function(e){return e._pushTag(this.tag),e.pushAny(this.value)}},{key:"convert",value:function(t){var r,n;if("function"!=typeof(n=null!=t?t[this.tag]:void 0)&&"function"!=typeof(n=e["_tag"+this.tag]))return this;try{return n.call(e,this.value)}catch(t){return r=t,this.err=r,this}}}]),e}(),hn=fn,dn=self.location?self.location.protocol+"//"+self.location.host:"",pn=self.URL,vn={URLWithLegacySupport:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;a(this,e),this.super=new pn(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}return s(e,[{key:"hash",get:function(){return this.super.hash},set:function(e){this.super.hash=e}},{key:"host",get:function(){return this.super.host},set:function(e){this.super.host=e}},{key:"hostname",get:function(){return this.super.hostname},set:function(e){this.super.hostname=e}},{key:"href",get:function(){return this.super.href},set:function(e){this.super.href=e}},{key:"origin",get:function(){return this.super.origin},set:function(e){this.super.origin=e}},{key:"password",get:function(){return this.super.password},set:function(e){this.super.password=e}},{key:"pathname",get:function(){return this.super.pathname},set:function(e){this.super.pathname=e}},{key:"port",get:function(){return this.super.port},set:function(e){this.super.port=e}},{key:"protocol",get:function(){return this.super.protocol},set:function(e){this.super.protocol=e}},{key:"search",get:function(){return this.super.search},set:function(e){this.super.search=e}},{key:"searchParams",get:function(){return this.super.searchParams},set:function(e){this.super.searchParams=e}},{key:"username",get:function(){return this.super.username},set:function(e){this.super.username=e}},{key:"createObjectURL",value:function(e){return this.super.createObjectURL(e)}},{key:"revokeObjectURL",value:function(e){this.super.revokeObjectURL(e)}},{key:"toJSON",value:function(){return this.super.toJSON()}},{key:"toString",value:function(){return this.super.toString()}},{key:"format",value:function(){return this.toString()}}]),e}(),URLSearchParams:self.URLSearchParams,defaultBase:dn,format:function(e){if("string"==typeof e)return new pn(e).toString();if(!(e instanceof pn)){var t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",a=e.host||"",o=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),u=e.hash||"",c=e.pathname||"";return"".concat(i).concat(t||r).concat(a||o+n).concat(e.path||c+s).concat(u)}}},yn=vn.URLWithLegacySupport,gn=vn.format,bn={URL:vn.URLWithLegacySupport,URLSearchParams:vn.URLSearchParams,format:vn.format,relative:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,a=r.protocol?r.protocol.replace(":",""):"http";a=(n[a]||i||a)+":";try{t=new yn(e)}catch(e){t={}}var o=Object.assign({},r,{protocol:a||t.protocol,host:r.host||t.host});return new yn(e,gn(o)).toString()},defaultBase:vn.defaultBase},mn=Zr.Buffer,wn=Qr,xn=en.exports.BigNumber,_n=tn,kn=rn,Sn=ln,En=hn,In=bn.URL,An=function(){function e(t){a(this,e),!(t=t||{}).size||t.size<65536?t.size=65536:t.size=_n.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=mn.from(this._heap),this._reset(),this._knownTags=Object.assign({0:function(e){return new Date(e)},1:function(e){return new Date(1e3*e)},2:function(e){return _n.arrayBufferToBignumber(e)},3:function(e){return kn.NEG_ONE.minus(_n.arrayBufferToBignumber(e))},4:function(e){return kn.TEN.pow(e[0]).times(e[1])},5:function(e){return kn.TWO.pow(e[0]).times(e[1])},32:function(e){return new In(e)},35:function(e){return new RegExp(e)}},t.tags),this.parser=function(e,t,r){"use asm";var n=new e.Uint8Array(r),i=t.pushInt,a=t.pushInt32,o=t.pushInt32Neg,s=t.pushInt64,u=t.pushInt64Neg,c=t.pushFloat,l=t.pushFloatSingle,f=t.pushFloatDouble,h=t.pushTrue,d=t.pushFalse,p=t.pushUndefined,v=t.pushNull,y=t.pushInfinity,g=t.pushInfinityNeg,b=t.pushNaN,m=t.pushNaNNeg,w=t.pushArrayStart,x=t.pushArrayStartFixed,_=t.pushArrayStartFixed32,k=t.pushArrayStartFixed64,S=t.pushObjectStart,E=t.pushObjectStartFixed,I=t.pushObjectStartFixed32,A=t.pushObjectStartFixed64,T=t.pushByteString,P=t.pushByteStringStart,O=t.pushUtf8String,C=t.pushUtf8StringStart,M=t.pushSimpleUnassigned,N=t.pushTagStart,R=t.pushTagStart4,L=t.pushTagStart8,j=t.pushTagUnassigned,D=t.pushBreak,B=e.Math.pow,U=0,F=0,z=0;function H(e){e=e|0;U=0;F=e;while((U|0)<(F|0)){z=$e[n[U]&255](n[U]|0)|0;if((z|0)>0){break}}return z|0}function V(e){e=e|0;if(((U|0)+(e|0)|0)<(F|0)){return 0}return 1}function K(e){e=e|0;return n[e|0]<<8|n[e+1|0]|0}function q(e){e=e|0;return n[e|0]<<24|n[e+1|0]<<16|n[e+2|0]<<8|n[e+3|0]|0}function W(e){e=e|0;i(e|0);U=U+1|0;return 0}function G(e){e=e|0;if(V(1)|0){return 1}i(n[U+1|0]|0);U=U+2|0;return 0}function J(e){e=e|0;if(V(2)|0){return 1}i(K(U+1|0)|0);U=U+3|0;return 0}function X(e){e=e|0;if(V(4)|0){return 1}a(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function $(e){e=e|0;if(V(8)|0){return 1}s(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function Y(e){e=e|0;i(-1-(e-32|0)|0);U=U+1|0;return 0}function Z(e){e=e|0;if(V(1)|0){return 1}i(-1-(n[U+1|0]|0)|0);U=U+2|0;return 0}function Q(e){e=e|0;var t=0;if(V(2)|0){return 1}t=K(U+1|0)|0;i(-1-(t|0)|0);U=U+3|0;return 0}function ee(e){e=e|0;if(V(4)|0){return 1}o(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function te(e){e=e|0;if(V(8)|0){return 1}u(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function re(e){e=e|0;var t=0;var r=0;var n=0;n=e-64|0;if(V(n|0)|0){return 1}t=U+1|0;r=(U+1|0)+(n|0)|0;T(t|0,r|0);U=r|0;return 0}function ne(e){e=e|0;var t=0;var r=0;var i=0;if(V(1)|0){return 1}i=n[U+1|0]|0;t=U+2|0;r=(U+2|0)+(i|0)|0;if(V(i+1|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function ie(e){e=e|0;var t=0;var r=0;var n=0;if(V(2)|0){return 1}n=K(U+1|0)|0;t=U+3|0;r=(U+3|0)+(n|0)|0;if(V(n+2|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function ae(e){e=e|0;var t=0;var r=0;var n=0;if(V(4)|0){return 1}n=q(U+1|0)|0;t=U+5|0;r=(U+5|0)+(n|0)|0;if(V(n+4|0)|0){return 1}T(t|0,r|0);U=r|0;return 0}function oe(e){e=e|0;return 1}function se(e){e=e|0;P();U=U+1|0;return 0}function ue(e){e=e|0;var t=0;var r=0;var n=0;n=e-96|0;if(V(n|0)|0){return 1}t=U+1|0;r=(U+1|0)+(n|0)|0;O(t|0,r|0);U=r|0;return 0}function ce(e){e=e|0;var t=0;var r=0;var i=0;if(V(1)|0){return 1}i=n[U+1|0]|0;t=U+2|0;r=(U+2|0)+(i|0)|0;if(V(i+1|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function le(e){e=e|0;var t=0;var r=0;var n=0;if(V(2)|0){return 1}n=K(U+1|0)|0;t=U+3|0;r=(U+3|0)+(n|0)|0;if(V(n+2|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function fe(e){e=e|0;var t=0;var r=0;var n=0;if(V(4)|0){return 1}n=q(U+1|0)|0;t=U+5|0;r=(U+5|0)+(n|0)|0;if(V(n+4|0)|0){return 1}O(t|0,r|0);U=r|0;return 0}function he(e){e=e|0;return 1}function de(e){e=e|0;C();U=U+1|0;return 0}function pe(e){e=e|0;x(e-128|0);U=U+1|0;return 0}function ve(e){e=e|0;if(V(1)|0){return 1}x(n[U+1|0]|0);U=U+2|0;return 0}function ye(e){e=e|0;if(V(2)|0){return 1}x(K(U+1|0)|0);U=U+3|0;return 0}function ge(e){e=e|0;if(V(4)|0){return 1}_(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function be(e){e=e|0;if(V(8)|0){return 1}k(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function me(e){e=e|0;w();U=U+1|0;return 0}function we(e){e=e|0;var t=0;t=e-160|0;if(V(t|0)|0){return 1}E(t|0);U=U+1|0;return 0}function xe(e){e=e|0;if(V(1)|0){return 1}E(n[U+1|0]|0);U=U+2|0;return 0}function _e(e){e=e|0;if(V(2)|0){return 1}E(K(U+1|0)|0);U=U+3|0;return 0}function ke(e){e=e|0;if(V(4)|0){return 1}I(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function Se(e){e=e|0;if(V(8)|0){return 1}A(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function Ee(e){e=e|0;S();U=U+1|0;return 0}function Ie(e){e=e|0;N(e-192|0|0);U=U+1|0;return 0}function Ae(e){e|0;N(e|0);U=U+1|0;return 0}function Te(e){e|0;N(e|0);U=U+1|0;return 0}function Pe(e){e|0;N(e|0);U=U+1|0;return 0}function Oe(e){e|0;N(e|0);U=U+1|0;return 0}function Ce(e){e=e|0;N(e-192|0|0);U=U+1|0;return 0}function Me(e){e|0;N(e|0);U=U+1|0;return 0}function Ne(e){e|0;N(e|0);U=U+1|0;return 0}function Re(e){e|0;N(e|0);U=U+1|0;return 0}function Le(e){e=e|0;if(V(1)|0){return 1}N(n[U+1|0]|0);U=U+2|0;return 0}function je(e){e=e|0;if(V(2)|0){return 1}N(K(U+1|0)|0);U=U+3|0;return 0}function De(e){e=e|0;if(V(4)|0){return 1}R(K(U+1|0)|0,K(U+3|0)|0);U=U+5|0;return 0}function Be(e){e=e|0;if(V(8)|0){return 1}L(K(U+1|0)|0,K(U+3|0)|0,K(U+5|0)|0,K(U+7|0)|0);U=U+9|0;return 0}function Ue(e){e=e|0;M((e|0)-224|0);U=U+1|0;return 0}function Fe(e){e=e|0;d();U=U+1|0;return 0}function ze(e){e=e|0;h();U=U+1|0;return 0}function He(e){e=e|0;v();U=U+1|0;return 0}function Ve(e){e=e|0;p();U=U+1|0;return 0}function Ke(e){e=e|0;if(V(1)|0){return 1}M(n[U+1|0]|0);U=U+2|0;return 0}function qe(e){e=e|0;var t=0;var r=0;var i=1.0;var a=0.0;var o=0.0;var s=0.0;if(V(2)|0){return 1}t=n[U+1|0]|0;r=n[U+2|0]|0;if((t|0)&0x80){i=-1.0}a=+(((t|0)&0x7C)>>2);o=+(((t|0)&0x03)<<8|r);if(+a==0.0){c(+(+i*+5.9604644775390625e-8*+o))}else if(+a==31.0){if(+i==1.0){if(+o>0.0){b()}else{y()}}else{if(+o>0.0){m()}else{g()}}}else{c(+(+i*B(+2,+(+a-25.0))*+(1024.0+o)))}U=U+3|0;return 0}function We(e){e=e|0;if(V(4)|0){return 1}l(n[U+1|0]|0,n[U+2|0]|0,n[U+3|0]|0,n[U+4|0]|0);U=U+5|0;return 0}function Ge(e){e=e|0;if(V(8)|0){return 1}f(n[U+1|0]|0,n[U+2|0]|0,n[U+3|0]|0,n[U+4|0]|0,n[U+5|0]|0,n[U+6|0]|0,n[U+7|0]|0,n[U+8|0]|0);U=U+9|0;return 0}function Je(e){e=e|0;return 1}function Xe(e){e=e|0;D();U=U+1|0;return 0}var $e=[W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,G,J,X,$,Je,Je,Je,Je,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,Z,Q,ee,te,Je,Je,Je,Je,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ne,ie,ae,oe,Je,Je,Je,se,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ce,le,fe,he,Je,Je,Je,de,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,ve,ye,ge,be,Je,Je,Je,me,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,we,xe,_e,ke,Se,Je,Je,Je,Ee,Ie,Ie,Ie,Ie,Ie,Ie,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Ce,Le,je,De,Be,Je,Je,Je,Je,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Ue,Fe,ze,He,Ve,Ke,qe,We,Ge,Je,Je,Je,Xe];return{parse:H}}($t,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}return s(e,[{key:"_depth",get:function(){return this._parents.length}},{key:"_currentParent",get:function(){return this._parents[this._depth-1]}},{key:"_ref",get:function(){return this._currentParent.ref}},{key:"_closeParent",value:function(){var e=this._parents.pop();if(e.length>0)throw new Error("Missing ".concat(e.length," elements"));switch(e.type){case kn.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case kn.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case kn.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case kn.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case kn.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case kn.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length))}this._currentParent&&this._currentParent.type===kn.PARENT.TAG&&this._dec()}},{key:"_dec",value:function(){var e=this._currentParent;e.length<0||(e.length--,0===e.length&&this._closeParent())}},{key:"_push",value:function(e,t){var r=this._currentParent;switch(r.values++,r.type){case kn.PARENT.ARRAY:case kn.PARENT.BYTE_STRING:case kn.PARENT.UTF8_STRING:r.length>-1?this._ref[this._ref.length-r.length]=e:this._ref.push(e),this._dec();break;case kn.PARENT.OBJECT:null!=r.tmpKey?(this._ref[r.tmpKey]=e,r.tmpKey=null,this._dec()):(r.tmpKey=e,"string"!=typeof r.tmpKey&&(r.type=kn.PARENT.MAP,r.ref=_n.buildMap(r.ref)));break;case kn.PARENT.MAP:null!=r.tmpKey?(this._ref.set(r.tmpKey,e),r.tmpKey=null,this._dec()):r.tmpKey=e;break;case kn.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}},{key:"_createParent",value:function(e,t,r){this._parents[this._depth]={type:t,length:r,ref:e,values:0,tmpKey:null}}},{key:"_reset",value:function(){this._res=[],this._parents=[{type:kn.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}},{key:"createTag",value:function(e,t){var r=this._knownTags[e];return r?r(t):new En(e,t)}},{key:"createMap",value:function(e,t){return e}},{key:"createObject",value:function(e,t){return e}},{key:"createArray",value:function(e,t){return e}},{key:"createByteString",value:function(e,t){return mn.concat(e)}},{key:"createByteStringFromHeap",value:function(e,t){return e===t?mn.alloc(0):mn.from(this._heap.slice(e,t))}},{key:"createInt",value:function(e){return e}},{key:"createInt32",value:function(e,t){return _n.buildInt32(e,t)}},{key:"createInt64",value:function(e,t,r,n){return _n.buildInt64(e,t,r,n)}},{key:"createFloat",value:function(e){return e}},{key:"createFloatSingle",value:function(e,t,r,n){return wn.read([e,t,r,n],0,!1,23,4)}},{key:"createFloatDouble",value:function(e,t,r,n,i,a,o,s){return wn.read([e,t,r,n,i,a,o,s],0,!1,52,8)}},{key:"createInt32Neg",value:function(e,t){return-1-_n.buildInt32(e,t)}},{key:"createInt64Neg",value:function(e,t,r,n){var i=_n.buildInt32(e,t),a=_n.buildInt32(r,n);return i>kn.MAX_SAFE_HIGH?kn.NEG_ONE.minus(new xn(i).times(kn.SHIFT32).plus(a)):-1-(i*kn.SHIFT32+a)}},{key:"createTrue",value:function(){return!0}},{key:"createFalse",value:function(){return!1}},{key:"createNull",value:function(){return null}},{key:"createUndefined",value:function(){}},{key:"createInfinity",value:function(){return 1/0}},{key:"createInfinityNeg",value:function(){return-1/0}},{key:"createNaN",value:function(){return NaN}},{key:"createNaNNeg",value:function(){return NaN}},{key:"createUtf8String",value:function(e,t){return e.join("")}},{key:"createUtf8StringFromHeap",value:function(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}},{key:"createSimpleUnassigned",value:function(e){return new Sn(e)}},{key:"pushInt",value:function(e){this._push(this.createInt(e))}},{key:"pushInt32",value:function(e,t){this._push(this.createInt32(e,t))}},{key:"pushInt64",value:function(e,t,r,n){this._push(this.createInt64(e,t,r,n))}},{key:"pushFloat",value:function(e){this._push(this.createFloat(e))}},{key:"pushFloatSingle",value:function(e,t,r,n){this._push(this.createFloatSingle(e,t,r,n))}},{key:"pushFloatDouble",value:function(e,t,r,n,i,a,o,s){this._push(this.createFloatDouble(e,t,r,n,i,a,o,s))}},{key:"pushInt32Neg",value:function(e,t){this._push(this.createInt32Neg(e,t))}},{key:"pushInt64Neg",value:function(e,t,r,n){this._push(this.createInt64Neg(e,t,r,n))}},{key:"pushTrue",value:function(){this._push(this.createTrue())}},{key:"pushFalse",value:function(){this._push(this.createFalse())}},{key:"pushNull",value:function(){this._push(this.createNull())}},{key:"pushUndefined",value:function(){this._push(this.createUndefined())}},{key:"pushInfinity",value:function(){this._push(this.createInfinity())}},{key:"pushInfinityNeg",value:function(){this._push(this.createInfinityNeg())}},{key:"pushNaN",value:function(){this._push(this.createNaN())}},{key:"pushNaNNeg",value:function(){this._push(this.createNaNNeg())}},{key:"pushArrayStart",value:function(){this._createParent([],kn.PARENT.ARRAY,-1)}},{key:"pushArrayStartFixed",value:function(e){this._createArrayStartFixed(e)}},{key:"pushArrayStartFixed32",value:function(e,t){var r=_n.buildInt32(e,t);this._createArrayStartFixed(r)}},{key:"pushArrayStartFixed64",value:function(e,t,r,n){var i=_n.buildInt64(e,t,r,n);this._createArrayStartFixed(i)}},{key:"pushObjectStart",value:function(){this._createObjectStartFixed(-1)}},{key:"pushObjectStartFixed",value:function(e){this._createObjectStartFixed(e)}},{key:"pushObjectStartFixed32",value:function(e,t){var r=_n.buildInt32(e,t);this._createObjectStartFixed(r)}},{key:"pushObjectStartFixed64",value:function(e,t,r,n){var i=_n.buildInt64(e,t,r,n);this._createObjectStartFixed(i)}},{key:"pushByteStringStart",value:function(){this._parents[this._depth]={type:kn.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}},{key:"pushByteString",value:function(e,t){this._push(this.createByteStringFromHeap(e,t))}},{key:"pushUtf8StringStart",value:function(){this._parents[this._depth]={type:kn.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}},{key:"pushUtf8String",value:function(e,t){this._push(this.createUtf8StringFromHeap(e,t))}},{key:"pushSimpleUnassigned",value:function(e){this._push(this.createSimpleUnassigned(e))}},{key:"pushTagStart",value:function(e){this._parents[this._depth]={type:kn.PARENT.TAG,length:1,ref:[e]}}},{key:"pushTagStart4",value:function(e,t){this.pushTagStart(_n.buildInt32(e,t))}},{key:"pushTagStart8",value:function(e,t,r,n){this.pushTagStart(_n.buildInt64(e,t,r,n))}},{key:"pushTagUnassigned",value:function(e){this._push(this.createTag(e))}},{key:"pushBreak",value:function(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}},{key:"_createObjectStartFixed",value:function(e){0!==e?this._createParent({},kn.PARENT.OBJECT,e):this._push(this.createObject({}))}},{key:"_createArrayStartFixed",value:function(e){0!==e?this._createParent(new Array(e),kn.PARENT.ARRAY,e):this._push(this.createArray([]))}},{key:"_decode",value:function(e){if(0===e.byteLength)throw new Error("Input too short");this._reset(),this._heap8.set(e);var t=this.parser.parse(e.byteLength);if(this._depth>1){for(;0===this._currentParent.length;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(0===this._res.length)throw new Error("No valid result")}},{key:"decodeFirst",value:function(e){return this._decode(e),this._res[0]}},{key:"decodeAll",value:function(e){return this._decode(e),this._res}}],[{key:"decode",value:function(t,r){return"string"==typeof t&&(t=mn.from(t,r||"hex")),new e({size:t.length}).decodeFirst(t)}},{key:"decodeAll",value:function(t,r){return"string"==typeof t&&(t=mn.from(t,r||"hex")),new e({size:t.length}).decodeAll(t)}}]),e}();An.decodeFirst=An.decode;var Tn=An,Pn=Zr.Buffer,On=tn,Cn=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"createTag",value:function(e,t){return"".concat(e,"(").concat(t,")")}},{key:"createInt",value:function(e){return x(l(r.prototype),"createInt",this).call(this,e).toString()}},{key:"createInt32",value:function(e,t){return x(l(r.prototype),"createInt32",this).call(this,e,t).toString()}},{key:"createInt64",value:function(e,t,n,i){return x(l(r.prototype),"createInt64",this).call(this,e,t,n,i).toString()}},{key:"createInt32Neg",value:function(e,t){return x(l(r.prototype),"createInt32Neg",this).call(this,e,t).toString()}},{key:"createInt64Neg",value:function(e,t,n,i){return x(l(r.prototype),"createInt64Neg",this).call(this,e,t,n,i).toString()}},{key:"createTrue",value:function(){return"true"}},{key:"createFalse",value:function(){return"false"}},{key:"createFloat",value:function(e){var t=x(l(r.prototype),"createFloat",this).call(this,e);return On.isNegativeZero(e)?"-0_1":"".concat(t,"_1")}},{key:"createFloatSingle",value:function(e,t,n,i){return"".concat(x(l(r.prototype),"createFloatSingle",this).call(this,e,t,n,i),"_2")}},{key:"createFloatDouble",value:function(e,t,n,i,a,o,s,u){return"".concat(x(l(r.prototype),"createFloatDouble",this).call(this,e,t,n,i,a,o,s,u),"_3")}},{key:"createByteString",value:function(e,t){var r=e.join(", ");return-1===t?"(_ ".concat(r,")"):"h'".concat(r)}},{key:"createByteStringFromHeap",value:function(e,t){return"h'".concat(Pn.from(x(l(r.prototype),"createByteStringFromHeap",this).call(this,e,t)).toString("hex"),"'")}},{key:"createInfinity",value:function(){return"Infinity_1"}},{key:"createInfinityNeg",value:function(){return"-Infinity_1"}},{key:"createNaN",value:function(){return"NaN_1"}},{key:"createNaNNeg",value:function(){return"-NaN_1"}},{key:"createNull",value:function(){return"null"}},{key:"createUndefined",value:function(){return"undefined"}},{key:"createSimpleUnassigned",value:function(e){return"simple(".concat(e,")")}},{key:"createArray",value:function(e,t){var n=x(l(r.prototype),"createArray",this).call(this,e,t);return-1===t?"[_ ".concat(n.join(", "),"]"):"[".concat(n.join(", "),"]")}},{key:"createMap",value:function(e,t){var n=x(l(r.prototype),"createMap",this).call(this,e),i=Array.from(n.keys()).reduce(Nn(n),"");return-1===t?"{_ ".concat(i,"}"):"{".concat(i,"}")}},{key:"createObject",value:function(e,t){var n=x(l(r.prototype),"createObject",this).call(this,e),i=Object.keys(n).reduce(Nn(n),"");return-1===t?"{_ ".concat(i,"}"):"{".concat(i,"}")}},{key:"createUtf8String",value:function(e,t){var r=e.join(", ");return-1===t?"(_ ".concat(r,")"):'"'.concat(r,'"')}},{key:"createUtf8StringFromHeap",value:function(e,t){return'"'.concat(Pn.from(x(l(r.prototype),"createUtf8StringFromHeap",this).call(this,e,t)).toString("utf8"),'"')}}],[{key:"diagnose",value:function(e,t){return"string"==typeof e&&(e=Pn.from(e,t||"hex")),(new r).decodeFirst(e)}}]),r}(Tn),Mn=Cn;function Nn(e){return function(t,r){return t?"".concat(t,", ").concat(r,": ").concat(e[r]):"".concat(r,": ").concat(e[r])}}var Rn=Zr.Buffer,Ln=bn.URL,jn=en.exports.BigNumber,Dn=tn,Bn=rn,Un=Bn.MT,Fn=Bn.NUMBYTES,zn=Bn.SHIFT32,Hn=Bn.SYMS,Vn=Bn.TAG,Kn=Bn.MT.SIMPLE_FLOAT<<5|Bn.NUMBYTES.TWO,qn=Bn.MT.SIMPLE_FLOAT<<5|Bn.NUMBYTES.FOUR,Wn=Bn.MT.SIMPLE_FLOAT<<5|Bn.NUMBYTES.EIGHT,Gn=Bn.MT.SIMPLE_FLOAT<<5|Bn.SIMPLE.TRUE,Jn=Bn.MT.SIMPLE_FLOAT<<5|Bn.SIMPLE.FALSE,Xn=Bn.MT.SIMPLE_FLOAT<<5|Bn.SIMPLE.UNDEFINED,$n=Bn.MT.SIMPLE_FLOAT<<5|Bn.SIMPLE.NULL,Yn=new jn("0x20000000000000"),Zn=Rn.from("f97e00","hex"),Qn=Rn.from("f9fc00","hex"),ei=Rn.from("f97c00","hex"),ti=function(){function e(t){a(this,e),t=t||{},this.streaming="function"==typeof t.stream,this.onData=t.stream,this.semanticTypes=[[Ln,this._pushUrl],[jn,this._pushBigNumber]];for(var r=t.genTypes||[],n=r.length,i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}return s(e,[{key:"addSemanticType",value:function(e,t){for(var r=this.semanticTypes.length,n=0;n<r;n++)if(this.semanticTypes[n][0]===e){var i=this.semanticTypes[n][1];return this.semanticTypes[n][1]=t,i}return this.semanticTypes.push([e,t]),null}},{key:"push",value:function(e){return!e||(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize()),!0)}},{key:"pushWrite",value:function(e,t,r){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=r,this.offset++,this.streaming&&this.onData(this.finalize()),!0}},{key:"_pushUInt8",value:function(e){return this.pushWrite(e,1,1)}},{key:"_pushUInt16BE",value:function(e){return this.pushWrite(e,2,2)}},{key:"_pushUInt32BE",value:function(e){return this.pushWrite(e,3,4)}},{key:"_pushDoubleBE",value:function(e){return this.pushWrite(e,4,8)}},{key:"_pushNaN",value:function(){return this.push(Zn)}},{key:"_pushInfinity",value:function(e){var t=e<0?Qn:ei;return this.push(t)}},{key:"_pushFloat",value:function(e){var t=Rn.allocUnsafe(2);if(Dn.writeHalf(t,e)&&Dn.parseHalf(t)===e)return this._pushUInt8(Kn)&&this.push(t);var r=Rn.allocUnsafe(4);return r.writeFloatBE(e,0),r.readFloatBE(0)===e?this._pushUInt8(qn)&&this.push(r):this._pushUInt8(Wn)&&this._pushDoubleBE(e)}},{key:"_pushInt",value:function(e,t,r){var n=t<<5;return e<24?this._pushUInt8(n|e):e<=255?this._pushUInt8(n|Fn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(n|Fn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(n|Fn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(n|Fn.EIGHT)&&this._pushUInt32BE(Math.floor(e/zn))&&this._pushUInt32BE(e%zn):t===Un.NEG_INT?this._pushFloat(r):this._pushFloat(e)}},{key:"_pushIntNum",value:function(e){return e<0?this._pushInt(-e-1,Un.NEG_INT,e):this._pushInt(e,Un.POS_INT)}},{key:"_pushNumber",value:function(e){switch(!1){case e==e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!=0:return this._pushIntNum(e);default:return this._pushFloat(e)}}},{key:"_pushString",value:function(e){var t=Rn.byteLength(e,"utf8");return this._pushInt(t,Un.UTF8_STRING)&&this.pushWrite(e,5,t)}},{key:"_pushBoolean",value:function(e){return this._pushUInt8(e?Gn:Jn)}},{key:"_pushUndefined",value:function(e){return this._pushUInt8(Xn)}},{key:"_pushArray",value:function(e,t){var r=t.length;if(!e._pushInt(r,Un.ARRAY))return!1;for(var n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}},{key:"_pushTag",value:function(e){return this._pushInt(e,Un.TAG)}},{key:"_pushDate",value:function(e,t){return e._pushTag(Vn.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}},{key:"_pushBuffer",value:function(e,t){return e._pushInt(t.length,Un.BYTE_STRING)&&e.push(t)}},{key:"_pushNoFilter",value:function(e,t){return e._pushBuffer(e,t.slice())}},{key:"_pushRegexp",value:function(e,t){return e._pushTag(Vn.REGEXP)&&e.pushAny(t.source)}},{key:"_pushSet",value:function(e,t){if(!e._pushInt(t.size,Un.ARRAY))return!1;var r,n=C(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!e.pushAny(i))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"_pushUrl",value:function(e,t){return e._pushTag(Vn.URI)&&e.pushAny(t.format())}},{key:"_pushBigint",value:function(e){var t=Vn.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=Vn.NEG_BIGINT);var r=e.toString(16);r.length%2&&(r="0"+r);var n=Rn.from(r,"hex");return this._pushTag(t)&&this._pushBuffer(this,n)}},{key:"_pushBigNumber",value:function(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(Vn.DECIMAL_FRAC)||!e._pushInt(2,Un.ARRAY))return!1;var r=t.decimalPlaces(),n=t.multipliedBy(new jn(10).pow(r));return!!e._pushIntNum(-r)&&(n.abs().isLessThan(Yn)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}},{key:"_pushMap",value:function(e,t){return!!e._pushInt(t.size,Un.MAP)&&this._pushRawMap(t.size,Array.from(t))}},{key:"_pushObject",value:function(e){if(!e)return this._pushUInt8($n);for(var t=this.semanticTypes.length,r=0;r<t;r++)if(e instanceof this.semanticTypes[r][0])return this.semanticTypes[r][1].call(e,this,e);var n=e.encodeCBOR;if("function"==typeof n)return n.call(e,this);var i=Object.keys(e),a=i.length;return!!this._pushInt(a,Un.MAP)&&this._pushRawMap(a,i.map((function(t){return[t,e[t]]})))}},{key:"_pushRawMap",value:function(t,r){r=r.map((function(t){return t[0]=e.encode(t[0]),t})).sort(Dn.keySorter);for(var n=0;n<t;n++){if(!this.push(r[n][0]))return!1;if(!this.pushAny(r[n][1]))return!1}return!0}},{key:"write",value:function(e){return this.pushAny(e)}},{key:"pushAny",value:function(e){var t=function(e){return{}.toString.call(e).slice(8,-1)}(e);switch(t){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Rn.isBuffer(e)?e:Rn.from(e));case"Null":return this._pushUInt8($n);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Hn.NULL:return this._pushObject(null);case Hn.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+r(e)+", "+(e?e.toString():""))}}},{key:"finalize",value:function(){if(0===this.offset)return null;for(var e=this.result,t=this.resultLength,r=this.resultMethod,n=this.offset,i=0,a=0;a<n;a++)i+=t[a];var o=Rn.allocUnsafe(i),s=0,u=0;for(a=0;a<n;a++){switch(u=t[a],r[a]){case 0:e[a].copy(o,s);break;case 1:o.writeUInt8(e[a],s,!0);break;case 2:o.writeUInt16BE(e[a],s,!0);break;case 3:o.writeUInt32BE(e[a],s,!0);break;case 4:o.writeDoubleBE(e[a],s,!0);break;case 5:o.write(e[a],s,u,"utf8");break;default:throw new Error("unkown method")}s+=u}var c=o;return this._reset(),c}},{key:"_reset",value:function(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}}],[{key:"encode",value:function(t){var r=new e;if(!r.pushAny(t))throw new Error("Failed to encode input");return r.finalize()}}]),e}(),ri=ti;function ni(e){if("string"==typeof e)return(new TextEncoder).encode(e);if(!(e instanceof Uint8Array))throw new TypeError('"data" be a string or Uint8Array.');return e}
/*!
   * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.
   */!function(e){e.Diagnose=Mn,e.Decoder=Tn,e.Encoder=ri,e.Simple=ln,e.Tagged=hn,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}}(Zt);var ii=function(){function e(){a(this,e),u(this,"registeredCodecs",void 0),this.registeredCodecs={}}var r,n,o;return s(e,[{key:"encode",value:(o=i(Wt.mark((function e(r){var n,a,o,s,u,c,l,f,h,d,p,v,y=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.data,a=r.urls,o=r.codecs,s=void 0===o?["mh-sha2-256","mb-base58-btc"]:o,u=r.meta,c=void 0===u?{}:u,void 0!==n||void 0!==a){e.next=3;break}throw new Error("Either `data` or `urls` must be provided.");case 3:if(void 0!==s){e.next=5;break}throw new Error("The hashlink creation `codecs` must be provided.");case 5:return void 0!==a&&(Array.isArray(a)||(a=[a]),a.forEach((function(e){if("string"!=typeof e)throw new Error('URL "'.concat(e,'" must be a string.'))})),c=t(t({},c),{},{url:a})),e.next=8,s.reduce(function(){var e=i(Wt.mark((function e(t,r){var n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=y.registeredCodecs[r])){e.next=3;break}throw new Error('Unknown cryptographic hash encoder "'.concat(r,'".'));case 3:return e.t0=n,e.next=6,t;case 6:return e.t1=e.sent,e.abrupt("return",e.t0.encode.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n);case 8:if(l=e.sent,f=new Map,c.url&&f.set(15,c.url),c["content-type"]&&f.set(14,c["content-type"]),c.experimental&&f.set(13,c.experimental),c.transform&&f.set(12,c.transform),h=new TextDecoder,d="hl:"+h.decode(l),!(f.size>0)){e.next=22;break}return p=s[s.length-1],v=new Uint8Array(Zt.encode(f)),e.t0=d,e.t1=h,e.next=19,this.registeredCodecs[p].encode(v);case 19:e.t2=e.sent,e.t3=e.t1.decode.call(e.t1,e.t2),d=e.t0+=":"+e.t3;case 22:return e.abrupt("return",d);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"decode",value:(n=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.hashlink,n=r.split(":"),i={hashName:"unknown",hashValue:null,meta:{}},!(n.length<2)){e.next=4;break}throw new Error('Hashlink "'.concat(r,'" is invalid; it must contain at least one colon.'));case 4:if(!(n.length>3)){e.next=6;break}throw new Error('Hashlink "'.concat(r,'" is invalid; it contains more than two colons.'));case 6:return a=ni(n[1]),o=this._findDecoder(a),s=o.decode(a),u=this._findDecoder(s),i.hashName=u.name,i.hashValue=u.decode(s),3===n.length&&(c=ni(n[2]),l=o.decode(c),(f=Zt.decode(l)).has(15)&&(i.meta.url=f.get(15)),f.has(14)&&(i.meta["content-type"]=f.get(14)),f.has(13)&&(i.meta.experimental=f.get(13)),f.has(12)&&(i.meta.transform=f.get(12))),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"verify",value:(r=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,n=t.hashlink,!((i=n.split(":")).length>3)){e.next=4;break}throw new Error('Hashlink "'.concat(n,'" is invalid; it contains more than two colons.'));case 4:return a=ni(i[1]),o=this._findDecoder(a),s=o.decode(a),u=this._findDecoder(s),c=[],3===i.length&&(l=ni(i[2]),f=o.decode(l),(h=Zt.decode(f)).has(12)&&c.push.apply(c,E(h.get(12)))),c.push(u.algorithm,o.algorithm),e.next=9,this.encode({data:r,codecs:c});case 9:return d=e.sent.split(":"),e.abrupt("return",i[1]===d[1]);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"use",value:function(e){this.registeredCodecs[e.algorithm]=e}},{key:"_findDecoder",value:function(e){var t=Object.values(this.registeredCodecs).find((function(t){return t.identifier.every((function(t,r){return t===e[r]}))}));if(!t)throw new Error("Could not determine decoder for: "+e);return t}}]),e}(),ai={};function oi(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";var n="",i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var u=e[i],c=0;c<s.length;++c)u+=s[c]<<8,s[c]=u%a,u=u/a|0;for(;u>0;)s.push(u%a),u=u/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=t[s[i]];if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n}(e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t)}function si(e){return(4294967296+e).toString(16).substring(1)}var ui={normalizeInput:function(e){var t;if(e instanceof Uint8Array)t=e;else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=(new TextEncoder).encode(e)}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,t,r){for(var n="\n"+e+" = ",i=0;i<t.length;i+=2){if(32===r)n+=si(t[i]).toUpperCase(),n+=" ",n+=si(t[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=si(t[i+1]).toUpperCase(),n+=si(t[i]).toUpperCase()}i%6==4?n+="\n"+new Array(e.length+4).join(" "):i<t.length-2&&(n+=" ")}console.log(n)},testSpeed:function(e,t,r){for(var n=(new Date).getTime(),i=new Uint8Array(t),a=0;a<t;a++)i[a]=a%256;var o=(new Date).getTime();console.log("Generated random input in "+(o-n)+"ms"),n=o;for(var s=0;s<r;s++){var u=e(i),c=(new Date).getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+u.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}},ci=ui;function li(e,t,r){var n=e[t]+e[r],i=e[t+1]+e[r+1];n>=4294967296&&i++,e[t]=n,e[t+1]=i}function fi(e,t,r,n){var i=e[t]+r;r<0&&(i+=4294967296);var a=e[t+1]+n;i>=4294967296&&a++,e[t]=i,e[t+1]=a}function hi(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function di(e,t,r,n,i,a){var o=gi[i],s=gi[i+1],u=gi[a],c=gi[a+1];li(yi,e,t),fi(yi,e,o,s);var l=yi[n]^yi[e],f=yi[n+1]^yi[e+1];yi[n]=f,yi[n+1]=l,li(yi,r,n),l=yi[t]^yi[r],f=yi[t+1]^yi[r+1],yi[t]=l>>>24^f<<8,yi[t+1]=f>>>24^l<<8,li(yi,e,t),fi(yi,e,u,c),l=yi[n]^yi[e],f=yi[n+1]^yi[e+1],yi[n]=l>>>16^f<<16,yi[n+1]=f>>>16^l<<16,li(yi,r,n),l=yi[t]^yi[r],f=yi[t+1]^yi[r+1],yi[t]=f>>>31^l<<1,yi[t+1]=l>>>31^f<<1}var pi=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),vi=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),yi=new Uint32Array(32),gi=new Uint32Array(32);function bi(e,t){var r=0;for(r=0;r<16;r++)yi[r]=e.h[r],yi[r+16]=pi[r];for(yi[24]=yi[24]^e.t,yi[25]=yi[25]^e.t/4294967296,t&&(yi[28]=~yi[28],yi[29]=~yi[29]),r=0;r<32;r++)gi[r]=hi(e.b,4*r);for(r=0;r<12;r++)di(0,8,16,24,vi[16*r+0],vi[16*r+1]),di(2,10,18,26,vi[16*r+2],vi[16*r+3]),di(4,12,20,28,vi[16*r+4],vi[16*r+5]),di(6,14,22,30,vi[16*r+6],vi[16*r+7]),di(0,10,20,30,vi[16*r+8],vi[16*r+9]),di(2,12,22,24,vi[16*r+10],vi[16*r+11]),di(4,14,16,26,vi[16*r+12],vi[16*r+13]),di(6,8,18,28,vi[16*r+14],vi[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^yi[r]^yi[r+16]}var mi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function wi(e,t,r,n){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&16!==r.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&16!==n.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");var i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};mi.fill(0),mi[0]=e,t&&(mi[1]=t.length),mi[2]=1,mi[3]=1,r&&mi.set(r,32),n&&mi.set(n,48);for(var a=0;a<16;a++)i.h[a]=pi[a]^hi(mi,4*a);return t&&(xi(i,t),i.c=128),i}function xi(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,bi(e,!1),e.c=0),e.b[e.c++]=t[r]}function _i(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;bi(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function ki(e,t,r,n,i){r=r||64,e=ci.normalizeInput(e),n&&(n=ci.normalizeInput(n)),i&&(i=ci.normalizeInput(i));var a=wi(r,t,n,i);return xi(a,e),_i(a)}var Si={blake2b:ki,blake2bHex:function(e,t,r,n,i){var a=ki(e,t,r,n,i);return ci.toHex(a)},blake2bInit:wi,blake2bUpdate:xi,blake2bFinal:_i},Ei=ui;function Ii(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function Ai(e,t,r,n,i,a){Ci[e]=Ci[e]+Ci[t]+i,Ci[n]=Ti(Ci[n]^Ci[e],16),Ci[r]=Ci[r]+Ci[n],Ci[t]=Ti(Ci[t]^Ci[r],12),Ci[e]=Ci[e]+Ci[t]+a,Ci[n]=Ti(Ci[n]^Ci[e],8),Ci[r]=Ci[r]+Ci[n],Ci[t]=Ti(Ci[t]^Ci[r],7)}function Ti(e,t){return e>>>t^e<<32-t}var Pi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Oi=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ci=new Uint32Array(16),Mi=new Uint32Array(16);function Ni(e,t){var r=0;for(r=0;r<8;r++)Ci[r]=e.h[r],Ci[r+8]=Pi[r];for(Ci[12]^=e.t,Ci[13]^=e.t/4294967296,t&&(Ci[14]=~Ci[14]),r=0;r<16;r++)Mi[r]=Ii(e.b,4*r);for(r=0;r<10;r++)Ai(0,4,8,12,Mi[Oi[16*r+0]],Mi[Oi[16*r+1]]),Ai(1,5,9,13,Mi[Oi[16*r+2]],Mi[Oi[16*r+3]]),Ai(2,6,10,14,Mi[Oi[16*r+4]],Mi[Oi[16*r+5]]),Ai(3,7,11,15,Mi[Oi[16*r+6]],Mi[Oi[16*r+7]]),Ai(0,5,10,15,Mi[Oi[16*r+8]],Mi[Oi[16*r+9]]),Ai(1,6,11,12,Mi[Oi[16*r+10]],Mi[Oi[16*r+11]]),Ai(2,7,8,13,Mi[Oi[16*r+12]],Mi[Oi[16*r+13]]),Ai(3,4,9,14,Mi[Oi[16*r+14]],Mi[Oi[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=Ci[r]^Ci[r+8]}function Ri(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");var n={h:new Uint32Array(Pi),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(Li(n,t),n.c=64),n}function Li(e,t){for(var r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,Ni(e,!1),e.c=0),e.b[e.c++]=t[r]}function ji(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Ni(e,!0);for(var t=new Uint8Array(e.outlen),r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function Di(e,t,r){r=r||32,e=Ei.normalizeInput(e);var n=Ri(r,t);return Li(n,e),ji(n)}var Bi,Ui,Fi={blake2s:Di,blake2sHex:function(e,t,r){var n=Di(e,t,r);return Ei.toHex(n)},blake2sInit:Ri,blake2sUpdate:Li,blake2sFinal:ji},zi={blake2b:Si.blake2b,blake2bHex:Si.blake2bHex,blake2bInit:Si.blake2bInit,blake2bUpdate:Si.blake2bUpdate,blake2bFinal:Si.blake2bFinal,blake2s:Fi.blake2s,blake2sHex:Fi.blake2sHex,blake2sInit:Fi.blake2sInit,blake2sUpdate:Fi.blake2sUpdate,blake2sFinal:Fi.blake2sFinal},Hi=self.crypto||self.msCrypto,Vi=s((function e(){a(this,e),u(this,"identifier",void 0),u(this,"algorithm",void 0),u(this,"name",void 0)})),Ki=function(e){c(n,e);var t,r=m(n);function n(){var e;return a(this,n),(e=r.call(this)).identifier=new Uint8Array([18,32]),e.algorithm="mh-sha2-256",e.name="sha2-256",e}return s(n,[{key:"encode",value:(t=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,Hi.subtle.digest({name:"SHA-256"},t);case 3:return e.t1=e.sent,r=new e.t0(e.t1),n=new Uint8Array(r.byteLength+this.identifier.byteLength),e.abrupt("return",(n.set(this.identifier,0),n.set(r,this.identifier.byteLength),n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"decode",value:function(e){return e.slice(this.identifier.length)}}]),n}(Vi),qi=function(e){c(n,e);var t,r=m(n);function n(){var e;return a(this,n),(e=r.call(this)).identifier=new Uint8Array([178,8,8]),e.algorithm="mh-blake2b-64",e.name="blake2b-64",e}return s(n,[{key:"encode",value:(t=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zi.blake2b(t,null,8),n=new Uint8Array(r.byteLength+this.identifier.byteLength),e.abrupt("return",(n.set(this.identifier,0),n.set(r,this.identifier.byteLength),n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"decode",value:function(e){return e.slice(this.identifier.length)}}]),n}(Vi),Wi=function(e){c(n,e);var t,r=m(n);function n(){var e;return a(this,n),(e=r.call(this)).identifier=new Uint8Array([122]),e.algorithm="mb-base58-btc",e.name="base58-btc",e}return s(n,[{key:"encode",value:(t=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(ni("z"+oi(t))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"decode",value:function(e){return function(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if(0===e.length)return new Uint8Array;var r=ai[t];if(!r){r=ai[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),o=[0],s=0;s<e.length;s++){var u=r[e.charCodeAt(s)];if(void 0===u)return;for(var c=u,l=0;l<o.length;++l)c+=o[l]*i,o[l]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)o.push(0);return new Uint8Array(o.reverse())}
/*!
   * Copyright (c) 2019-2020 Digital Bazaar, Inc. All rights reserved.
   */(e,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}(new TextDecoder("utf-8").decode(e.slice(1)))}}]),n}(Vi),Gi=function(){function e(){a(this,e),u(this,"hl",void 0),u(this,"hashlinkTable",{}),this.hl=new ii,this.hl.use(new Ki),this.hl.use(new qi),this.hl.use(new Wi)}var t,r,n,o;return s(e,[{key:"decode",value:(o=i(Wt.mark((function e(t,r){var n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hl.decode({hashlink:t});case 2:if((i=e.sent).meta||null!==(n=i.meta.url)&&void 0!==n&&n.length){e.next=5;break}throw new Error("unparseable document, no url provided as meta data");case 5:return this.hashlinkTable[t]=i,e.abrupt("return",(null!=r&&r(i.meta.url[0]),i));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"verifyHashlinkTable",value:(n=i(Wt.mark((function e(){var t,r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.keys(this.hashlinkTable),r=0;case 2:if(!(r<t.length)){e.next=8;break}return e.next=5,this.verify(t[r]).catch((function(e){return console.log("caught an hashlink exception",e)}));case 5:r++,e.next=2;break;case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"verify",value:(r=i(Wt.mark((function e(t){var r,n,a,o;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSourceUrlFromHashlink(t);case 2:return r=e.sent,e.next=5,fetch(r).then(function(){var e=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){n=e}));case 5:return a=new TextEncoder,e.next=8,this.hl.verify({data:a.encode(n),hashlink:t});case 8:if(o=e.sent){e.next=11;break}throw new Error("Hashlink ".concat(t," does not match data from url ").concat(r));case 11:return e.abrupt("return",(console.log("hashlink ".concat(t," bound to ").concat(r," was successfully verified")),o));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getSourceUrlFromHashlink",value:(t=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hashlinkTable[t]){e.next=4;break}e.t0=this.hashlinkTable[t],e.next=7;break;case 4:return e.next=6,this.decode(t);case 6:e.t0=e.sent;case 7:return r=e.t0,e.abrupt("return",this.getMetaUrl(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getMetaUrl",value:function(e){return e.meta.url[0]}}]),e}();function Ji(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function Xi(e){return"string"==typeof e}!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(Bi||(Bi={})),function(e){e.V1_1="1.1",e.V1_2="1.2",e.V2_0="2.0",e.V3_0_alpha="3.0-alpha",e.V3_0_beta="3.0-beta",e.V3_0="3.0"}(Ui||(Ui={}));var $i,Yi=Ui;!function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}($i||($i={}));var Zi,Qi=(u(Ht={},$i.Bitcoin,{code:$i.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}}),u(Ht,$i.Ethmain,{code:$i.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}}),u(Ht,$i.Ethropst,{code:$i.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}}),u(Ht,$i.Ethrinkeby,{code:$i.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}}),u(Ht,$i.Mocknet,{code:$i.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}}),u(Ht,$i.Regtest,{code:$i.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}}),u(Ht,$i.Testnet,{code:$i.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}),Ht);!function(e){e.mainnet="mainnet",e.testnet="testnet"}(Zi||(Zi={}));var ea={"@context":{id:"@id",type:"@type",extensions:"https://w3id.org/openbadges/extensions#",obi:"https://w3id.org/openbadges#",validation:"obi:validation",cred:"https://w3id.org/credentials#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",AlignmentObject:"schema:AlignmentObject",CryptographicKey:"sec:Key",Endorsement:"cred:Credential",Assertion:"obi:Assertion",BadgeClass:"obi:BadgeClass",Criteria:"obi:Criteria",Evidence:"obi:Evidence",Extension:"obi:Extension",FrameValidation:"obi:FrameValidation",IdentityObject:"obi:IdentityObject",Image:"obi:Image",HostedBadge:"obi:HostedBadge",hosted:"obi:HostedBadge",Issuer:"obi:Issuer",Profile:"obi:Profile",RevocationList:"obi:RevocationList",SignedBadge:"obi:SignedBadge",signed:"obi:SignedBadge",TypeValidation:"obi:TypeValidation",VerificationObject:"obi:VerificationObject",author:{"@id":"schema:author","@type":"@id"},caption:{"@id":"schema:caption"},claim:{"@id":"cred:claim","@type":"@id"},created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},endorsement:{"@id":"cred:credential","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},genre:{"@id":"schema:genre"},image:{"@id":"schema:image","@type":"@id"},name:{"@id":"schema:name"},owner:{"@id":"sec:owner","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyPem:{"@id":"sec:publicKeyPem"},related:{"@id":"dc:relation","@type":"@id"},startsWith:{"@id":"http://purl.org/dqm-vocabulary/v1/dqm#startsWith"},tags:{"@id":"schema:keywords"},targetDescription:{"@id":"schema:targetDescription"},targetFramework:{"@id":"schema:targetFramework"},targetName:{"@id":"schema:targetName"},targetUrl:{"@id":"schema:targetUrl"},telephone:{"@id":"schema:telephone"},url:{"@id":"schema:url","@type":"@id"},version:{"@id":"schema:version"},alignment:{"@id":"obi:alignment","@type":"@id"},allowedOrigins:{"@id":"obi:allowedOrigins"},audience:{"@id":"obi:audience"},badge:{"@id":"obi:badge","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},endorsementComment:{"@id":"obi:endorsementComment"},evidence:{"@id":"obi:evidence","@type":"@id"},hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},issuer:{"@id":"obi:issuer","@type":"@id"},narrative:{"@id":"obi:narrative"},recipient:{"@id":"obi:recipient","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},revocationReason:{"@id":"obi:revocationReason"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},revokedAssertions:{"@id":"obi:revoked"},salt:{"@id":"obi:salt"},targetCode:{"@id":"obi:targetCode"},uid:{"@id":"obi:uid"},validatesType:"obi:validatesType",validationFrame:"obi:validationFrame",validationSchema:"obi:validationSchema",verification:{"@id":"obi:verify","@type":"@id"},verificationProperty:{"@id":"obi:verificationProperty"},verify:"verification"}},ta={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:{"@id":"obi:verify","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0/merkleProof2017Schema.json"}]},ra={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:{"@id":"obi:verify","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.1/merkleProof2017Schema.json"}]},na={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",vc:"https://www.w3.org/2018/credentials/v1",schema:"https://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},metadata:"bc:metadata",display:{"@id":"bc:display","@context":{id:"@id",type:"@type",contentMediaType:{"@id":"bc:contentMediaType"},contentEncoding:{"@id":"bc:contentEncoding"},content:{"@id":"bc:content"}}},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"https://purl.org/dc/terms/created","@type":"xsd:dateTime"},challenge:"sec:challenge",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},publicKey:{"@id":"sec:publicKey"},url:{"@id":"schema:url"},image:{"@id":"schema:image"},criteria:{"@id":"schema:criteria"},claim:{"@id":"schema:claim"}}},ia={};ia["https://w3id.org/openbadges/v2"]=ea,ia["https://openbadgespec.org/v2/context.json"]=ea,ia["https://www.w3.org/2018/credentials/v1"]={"@context":{"@version":1.1,id:"@id",type:"@type",VerifiableCredential:{"@id":"https://www.w3.org/2018/credentials#VerifiableCredential","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",credentialSchema:{"@id":"cred:credentialSchema","@type":"@id","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",JsonSchemaValidator2018:"cred:JsonSchemaValidator2018"}},credentialStatus:{"@id":"cred:credentialStatus","@type":"@id"},credentialSubject:{"@id":"cred:credentialSubject","@type":"@id"},evidence:{"@id":"cred:evidence","@type":"@id"},expirationDate:{"@id":"cred:expirationDate","@type":"xsd:dateTime"},holder:{"@id":"cred:holder","@type":"@id"},issued:{"@id":"cred:issued","@type":"xsd:dateTime"},issuer:{"@id":"cred:issuer","@type":"@id"},issuanceDate:{"@id":"cred:issuanceDate","@type":"xsd:dateTime"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},refreshService:{"@id":"cred:refreshService","@type":"@id","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",ManualRefreshService2018:"cred:ManualRefreshService2018"}},termsOfUse:{"@id":"cred:termsOfUse","@type":"@id"},validFrom:{"@id":"cred:validFrom","@type":"xsd:dateTime"},validUntil:{"@id":"cred:validUntil","@type":"xsd:dateTime"}}},VerifiablePresentation:{"@id":"https://www.w3.org/2018/credentials#VerifiablePresentation","@context":{"@version":1.1,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",holder:{"@id":"cred:holder","@type":"@id"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},verifiableCredential:{"@id":"cred:verifiableCredential","@type":"@id","@container":"@graph"}}},EcdsaSecp256k1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256k1Signature2019","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},EcdsaSecp256r1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256r1Signature2019","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},RsaSignature2018:{"@id":"https://w3id.org/security#RsaSignature2018","@context":{"@version":1.1,challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"}}},ia["https://w3id.org/blockcerts/schema/2.0/context.json"]=ta,ia["https://www.blockcerts.org/schema/2.0/context.json"]=ta,ia["https://w3id.org/blockcerts/v2"]=ta,ia["https://w3id.org/blockcerts/schema/2.1/context.json"]=ra,ia["https://www.blockcerts.org/schema/2.1/context.json"]=ra,ia["https://w3id.org/blockcerts/v2.1"]=ra,ia["https://w3id.org/blockcerts/schema/3.0/context.json"]=na,ia["https://www.blockcerts.org/schema/3.0/context.json"]=na,ia["https://w3id.org/blockcerts/v3"]=na;var aa={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2017:"sec:MerkleProof2017",RecipientProfile:"bc:RecipientProfile",SignatureLine:"bc:SignatureLine",MerkleProofVerification2017:"bc:MerkleProofVerification2017",recipientProfile:"bc:recipientProfile",signatureLines:"bc:signatureLines",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},subtitle:"bc:subtitle",jobTitle:"schema:jobTitle",creator:{"@id":"dc:creator","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},revoked:{"@id":"sec:expiration","@type":"xsd:dateTime"},CryptographicKey:"sec:Key",signature:"sec:signature",verification:"bc:verification",publicKeys:"bc:publicKeys",ChainpointSHA256v2:"cp:ChainpointSHA256v2",BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"},"obi:validation":[{"obi:validatesType":"RecipientProfile","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/recipientSchema.json"},{"obi:validatesType":"SignatureLine","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/signatureLineSchema.json"},{"obi:validatesType":"MerkleProof2017","obi:validationSchema":"https://w3id.org/blockcerts/schema/2.0-alpha/merkleProof2017Schema.json"}]},oa={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"bc:created","@type":"xsd:dateTime"},name:{"@id":"schema:name"}}},sa={"@context":{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",cp:"https://w3id.org/chainpoint#",vc:"https://www.w3.org/2018/credentials/v1",schema:"https://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",MerkleProof2019:"sec:MerkleProof2019",BlockcertsCredential:"bc:BlockcertsCredential",introductionUrl:{"@id":"bc:introductionUrl","@type":"@id"},metadata:"bc:metadata",display:{"@id":"bc:display","@context":{id:"@id",type:"@type",contentMediaType:{"@id":"bc:contentMediaType","@type":"@id"},contentEncoding:{"@id":"bc:contentEncoding","@type":"@id"},content:{"@id":"bc:content","@type":"@id"}}},CryptographicKey:"sec:Key",domain:"sec:domain",nonce:"sec:nonce",proofValue:"sec:proofValue",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},created:{"@id":"https://purl.org/dc/terms/created","@type":"xsd:dateTime"},challenge:"sec:challenge",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},publicKey:{"@id":"sec:publicKey","@type":"@id"},url:{"@id":"schema:url","@type":"@id"},image:{"@id":"schema:image","@type":"@id"}}};ia["https://w3id.org/blockcerts/schema/2.0-alpha/context.json"]=aa,ia["https://www.blockcerts.org/schema/2.0-alpha/context.json"]=aa,ia["https://www.blockcerts.org/schema/3.0-alpha/context.json"]=oa,ia["https://w3id.org/blockcerts/schema/3.0-alpha/context.json"]=oa,ia["https://w3id.org/blockcerts/v3.0-alpha"]=oa,ia["https://www.blockcerts.org/schema/3.0-beta/context.json"]=sa,ia["https://w3id.org/blockcerts/schema/3.0-beta/context.json"]=sa,ia["https://w3id.org/blockcerts/v3.0-beta"]=sa,ia["https://w3id.org/security/suites/ed25519-2020/v1"]={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2020:{"@id":"https://w3id.org/security#Ed25519VerificationKey2020","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyMultibase:{"@id":"https://w3id.org/security#publicKeyMultibase","@type":"https://w3id.org/security#multibase"}}},Ed25519Signature2020:{"@id":"https://w3id.org/security#Ed25519Signature2020","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}};var ua={locale:"en-US"},ca=Object.freeze({__proto__:null,isMainnet:function(e){return Ji(e,"1")||Ji(e,"ecdsa-koblitz-pubkey:1")}}),la={locale:"en-US"},fa={"en-US":{steps:{formatValidationLabel:"Format validation",formatValidationLabelPending:"Validating format",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Status check",statusCheckLabelPending:"Checking record status"},subSteps:{getTransactionIdLabel:"Get transaction ID",getTransactionIdLabelPending:"Getting transaction ID",computeLocalHashLabel:"Compute local hash",computeLocalHashLabelPending:"Computing local hash",fetchRemoteHashLabel:"Fetch remote hash",fetchRemoteHashLabelPending:"Fetching remote hash",getIssuerProfileLabel:"Get issuer profile",getIssuerProfileLabelPending:"Getting issuer profile",parseIssuerKeysLabel:"Parse issuer keys",parseIssuerKeysLabelPending:"Parsing issuer keys",compareHashesLabel:"Compare hashes",compareHashesLabelPending:"Comparing hashes",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Check Merkle Root",checkMerkleRootLabelPending:"Checking Merkle Root",checkReceiptLabel:"Check Receipt",checkReceiptLabelPending:"Checking Receipt",checkAuthenticityLabel:"Check Authenticity",checkAuthenticityLabelPending:"Checking Authenticity",checkRevokedStatusLabel:"Check Revoked Status",checkRevokedStatusLabelPending:"Checking Revoked Status",checkExpiresDateLabel:"Check Expiration Date",checkExpiresDateLabelPending:"Checking Expiration Date",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Reason given:",reason:"This certificate has been revoked by the issuer."},success:{mocknet:{label:"This Mocknet credential passed all checks",description:"Mocknet credentials are used for test purposes only. They are not recorded on a blockchain, and they should not be considered verified Blockcerts."},blockchain:{label:"Verified",description:"This is a valid ${chain} certificate.",linkText:"View transaction link"},multisign:{label:"Verified",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"This is not a valid certificate",couldNotConfirmTx:"Could not confirm the transaction",ensureHashesEqual:"Computed hash does not match remote hash",ensureMerkleRootEqual:"Merkle root does not match remote hash.",ensureNotExpired:"This certificate has expired.",ensureValidReceipt:"The receipt is malformed. There was a problem navigating the merkle tree in the receipt.",failedJsonLdNormalization:"Failed JSON-LD normalization",foundUnmappedFields:"Found unmapped fields during JSON-LD normalization",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Didn't recognize chain value",getIssuerProfile:"Unable to get issuer profile",getRevokedAssertions:"Unable to get revocation assertions",getTransactionId:"Cannot verify this certificate without a transaction ID to compare against.",invalidMerkleReceipt:"Invalid Merkle Receipt. Proof hash did not match Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Cannot verify this certificate without a transaction ID to compare against.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Unable to parse JSON out of issuer identification data.",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},fr:{steps:{formatValidationLabel:"Validation du format",formatValidationLabelPending:"Validation du format",signatureVerificationLabel:"Vrification de la preuve",signatureVerificationLabelPending:"Vrification de la preuve",identityVerificationLabel:"Vrification de l'identit",identityVerificationLabelPending:"Vrification de l'identit",statusCheckLabel:"Vrification du status",statusCheckLabelPending:"Vrification du status"},subSteps:{getTransactionIdLabel:"Obtention de l'identifiant de transaction",getTransactionIdLabelPending:"Obtention de l'identifiant de transaction",computeLocalHashLabel:"Calcul du hash local",computeLocalHashLabelPending:"Calcul du hash local",fetchRemoteHashLabel:"Rcupration du hash distant",fetchRemoteHashLabelPending:"Rcupration du hash distant",getIssuerProfileLabel:"Obtention du profil de l'metteur",getIssuerProfileLabelPending:"Obtention du profil de l'metteur",parseIssuerKeysLabel:"Traitement des cls de l'metteur",parseIssuerKeysLabelPending:"Traitement des cls de l'metteur",compareHashesLabel:"Comparaison des hash",compareHashesLabelPending:"Comparaison des hashs",checkDocumentSignatureLabel:"Vrification de la signature du document",checkDocumentSignatureLabelPending:"Vrification de la signature du document",checkMerkleRootLabel:"Vrification du Merkle Root",checkMerkleRootLabelPending:"Vrification du  Merkle Root",checkReceiptLabel:"Vrification du reu",checkReceiptLabelPending:"Vrification du reu",checkAuthenticityLabel:"Vrification de l'authenticit",checkAuthenticityLabelPending:"Vrification de l'authenticit",checkRevokedStatusLabel:"Vrification du status de rvocation",checkRevokedStatusLabelPending:"Vrification du status de rvocation",checkExpiresDateLabel:"Vrification de la date d'expiration",checkExpiresDateLabelPending:"Vrification de la date d'expiration",controlVerificationMethodLabel:"Contrle de la Mthode de Vrification",controlVerificationMethodLabelPending:"Contrle de la Mthode de Vrification",retrieveVerificationMethodPublicKeyLabel:"Extraction de la cl publique depuis le document DID",retrieveVerificationMethodPublicKeyLabelPending:"Extraction de la cl publique depuis le document DID",deriveIssuingAddressFromPublicKeyLabel:"Drivation de l'adresse d'mission depuis la cl publique",deriveIssuingAddressFromPublicKeyLabelPending:"Drivation de l'adresse d'mission depuis la cl publique",compareIssuingAddressLabel:"Comparaison des adresses",compareIssuingAddressLabelPending:"Comparaison des adresses",checkImagesIntegrityLabel:"Vrification de l'Intgrit des Images",checkImagesIntegrityLabelPending:"Vrification de l'Intgrit des Images"},revocation:{preReason:"Raison :",reason:"Ce certificat a t rvoqu par l'metteur."},success:{mocknet:{label:"Cet enregistrement Mocknet a t vrifi",description:"Le mode Mocknet est utilis  des fins de tests uniquement. Ce Blockcert n'a pas t enregistr sur une blockchain, et en tant que tel ne peut pas tre considr un Blockcert valide."},blockchain:{label:"Vrifi",description:"Ceci est un certificat ${chain} valide.",linkText:"Voir la transaction"},multisign:{label:"Vrifi",description:"Toutes les signatures numriques de ce certificat ont t vrifies avec succs."}},errors:{certificateNotValid:"Certificat invalide",couldNotConfirmTx:"Impossible de confirmer la transaction",ensureHashesEqual:"Calcul du hash local diffrent du hash distant",ensureMerkleRootEqual:"Le Merkle root ne correspond pas au hash distant",ensureNotExpired:"Certificat expir",ensureValidReceipt:"Erreur d'criture du reu. Un problme est survenu lors de la navigation de l'arbre Merkle du reu.",failedJsonLdNormalization:"Erreur de normalisation JSON-LD",foundUnmappedFields:"Champs non lis dcouverts durant la normalisation JSON-LD",identityErrorBaseMessage:"Identit de l'metteur invalide",deriveIssuingAddressFromPublicKey:"Cette blockchain n'est pas supporte pour la vrification de l'identit dcentralise.",controlVerificationMethod:"Le document d'identit de l'metteur ne correspond pas  la mthode de vrification.",retrieveVerificationMethodPublicKey:"Le document d'identit de l'metteur ne fait pas mention de la mthode de vrification.",compareIssuingAddress:"La mthode de vrification n'a pas permis d'tablir l'identit de l'metteur.",invalidIssuingAddressCreationTime:"L'adresse d'mission utilise a t cre aprs la transaction d'enregistrement.",invalidIssuingAddressRevoked:"L'adresse d'mission utilise a t dcommissionne par l'metteur avant la transaction d'enregistrement.",invalidIssuingAddressExpired:"L'adresse d'mission utilise a expir avant la transaction.",invalidIssuingAddressUnknown:"L'adresse utilise pour mettre ce Blockcerts n'appartient  l'metteur dclar.",getChain:"Valeur de chaine non reconnue",getIssuerProfile:"Profil de l'metteur indisponible",getRevokedAssertions:"Impossible d'obtenir les raisons de revocation",getTransactionId:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",invalidMerkleReceipt:"Reu Merkle invalide. Hash de preuve diffrent du Merkle root",invalidMerkleVersion:"La version du Merkle utilis est incompatible avec la version Blockcerts.",isTransactionIdValid:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",issuerProfileNotSet:"l'URL de l'metteur n'est pas dfinie",issuerProfileInvalid:"le document distant ne semble pas tre un profil d'metteur valide",parseIssuerKeys:"Impossible de lire le JSON d'identification de l'metteur",checkImagesIntegrity:"La vrification des images a prouv que le contenu a t modifi aprs l'mission."}},es:{steps:{formatValidationLabel:"Validacin de formato",formatValidationLabelPending:"Validando el formato",signatureVerificationLabel:"Verificar prueba",signatureVerificationLabelPending:"Verificando prueba",identityVerificationLabel:"Verificar identitad",identityVerificationLabelPending:"Verificando identitad",statusCheckLabel:"Estado de Verificacin",statusCheckLabelPending:"Verificando Estado de Grabacin"},subSteps:{getTransactionIdLabel:"Obtener Identificacin de Transaccin",getTransactionIdLabelPending:"Obteniendo Identificacin de Transaccin",computeLocalHashLabel:"Calcular cadena binaria local",computeLocalHashLabelPending:"Calculando cadena binaria local",fetchRemoteHashLabel:"Obtener cadena binaria remota",fetchRemoteHashLabelPending:"Obeniendo cadena binaria remota",getIssuerProfileLabel:"Obtener perfil de emisor",getIssuerProfileLabelPending:"Obteniendo perfil de emisor",parseIssuerKeysLabel:"Analizar claves del emisor",parseIssuerKeysLabelPending:"Analizando claves del emisor",compareHashesLabel:"Comparar cadenas binarias",compareHashesLabelPending:"Comparando cadenas binarias",checkDocumentSignatureLabel:"Controlar firma del documento",checkDocumentSignatureLabelPending:"Controlando firma del documento",checkMerkleRootLabel:"Verificar Merkle Root",checkMerkleRootLabelPending:"Verificando Merkle Root",checkReceiptLabel:"Verificar Recibo",checkReceiptLabelPending:"Verificando Recibo",checkAuthenticityLabel:"Verificar Autenticidad",checkAuthenticityLabelPending:"Verificando Autenticidad",checkRevokedStatusLabel:"Verificar Estado de Revocacin",checkRevokedStatusLabelPending:"Verificando Estado de Revocacin",checkExpiresDateLabel:"Verificar Fechas de Expiracin",checkExpiresDateLabelPending:"Verificando Fechas de Expiracin",controlVerificationMethodLabel:"Controlar Metodo de Verificacin",controlVerificationMethodLabelPending:"Controlando Metodo de Verificacin",retrieveVerificationMethodPublicKeyLabel:"Extraer la llave pblica desde el documento DID",retrieveVerificationMethodPublicKeyLabelPending:"Extraendo la llave pblica desde el documento DID",deriveIssuingAddressFromPublicKeyLabel:"Derivar la direccin del emisor desde la llave pblica",deriveIssuingAddressFromPublicKeyLabelPending:"Derivando la direccin del emisor desde la llave pblica",compareIssuingAddressLabel:"Comparar direcciones",compareIssuingAddressLabelPending:"Comparando direcciones",checkImagesIntegrityLabel:"Comprobar Integridad de las Imagens",checkImagesIntegrityLabelPending:"Comprobando Integridad de las Imagens"},revocation:{preReason:"Razn dada:",reason:"Este certificado ha sido revocado por el emisor"},success:{mocknet:{label:"Esta credencial de Mocknet pas todas las comprobaciones",description:"Las credenciales de Mocknet se usan solo con fines de prueba. No se graban en una cadena de bloques, y no se deben considerar Blockcerts Verificados."},blockchain:{label:"Verificado",description:"Este es un certificado vlido de ${chain}.",linkText:"Ver enlace de transaccin"},multisign:{label:"Verificado",description:"Todas las firmas digitales de este certificado han verificado con xito."}},errors:{certificateNotValid:"Este no es un certificado vlido",couldNotConfirmTx:"No se ha podido confirmar la transaccin",ensureHashesEqual:"La cadena binaria calculada no corresponde con la cadena binaria remota",ensureMerkleRootEqual:"La raz Merkle no corresponde con la cadena binaria remota",ensureNotExpired:"Este certificado ha expirado",ensureValidReceipt:"El recibo est malformado. Hubo un problema navegando el rbol Merkle en el recibo",failedJsonLdNormalization:"La normalizacin del JSON-LD ha fallado",foundUnmappedFields:"Se han encontrado campos no mapeados durante la normalizacin de JSON-LD",identityErrorBaseMessage:"Identitad del emisor invlida",deriveIssuingAddressFromPublicKey:"No se puede validar la identitad decentalisada con esta cadena binaria.",controlVerificationMethod:"El documento de identitad del emisor no corresponde al metodo de verificacin.",retrieveVerificationMethodPublicKey:"El documento de identitad del emisor no hace constar al metodo de verificacin.",compareIssuingAddress:"El metodo de verificacin no corresponde a la identitad del emisor.",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Valor de cadena no reconocido",getIssuerProfile:"No se ha podido obtener el perfil del emisor",getRevokedAssertions:"No se ha podido obtener aseveraciones de revocacin",getTransactionId:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",invalidMerkleReceipt:"Recibo Merkle invlido. La cadena binaria de prueba no corresponde con la raz Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",issuerProfileNotSet:"URL del emisor no definido",issuerProfileInvalid:"el documento recogido no parece ser un perfil de emisor valido",parseIssuerKeys:"No se ha podido analizar el JSON de la informacin de identificacin del emisor",checkImagesIntegrity:"La verificacin de la integridad de los imagens prov alteracin del contenido despus de la emisin."}},mt:{steps:{formatValidationLabel:"Validazzjoni tal-format",formatValidationLabelPending:"Il-format qed jii vvalidat",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Status check",statusCheckLabelPending:"Ir-record status qed jii ekkjat"},subSteps:{getTransactionIdLabel:"Ikseb l-ID ta' tranazzjoni",getTransactionIdLabelPending:"L-ID ta' tranazzjoni qed tii mnila",computeLocalHashLabel:"Ikkalkula l-hash lokali",computeLocalHashLabelPending:"Il-hash lokali qed jii kkalkulat",fetchRemoteHashLabel:"Fittex ir-remote hash",fetchRemoteHashLabelPending:"Ir-remote hash qed jii mfittex",getIssuerProfileLabel:"Ikseb il-profil tal-emittent",getIssuerProfileLabelPending:"Il-profil tal-emittent qed jii mniel",parseIssuerKeysLabel:"Estratta -wievet tal-emittent",parseIssuerKeysLabelPending:"I-wievet tal-emittent qed jiu estratti",compareHashesLabel:"Ikkumpara l-hashes",compareHashesLabelPending:"Il-hashes qed jiu kkomparati",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Iekkja l-Merkle Root",checkMerkleRootLabelPending:"Il-Merkle Root Qed Tii ekkjata",checkReceiptLabel:"Iekkja l-Irevuta",checkReceiptLabelPending:"L-Irevuta Qed Tii ekkjata",checkAuthenticityLabel:"Iekkja l-Awtentiit",checkAuthenticityLabelPending:"L-Awtentiit Qed Tii ekkjata",checkRevokedStatusLabel:"Iekkja l-Istatus Revokat",checkRevokedStatusLabelPending:"L-Istatus Revokat Qed Jii ekkjat",checkExpiresDateLabel:"Iekkja d-Data ta' Skadenza",checkExpiresDateLabelPending:"Id-Data ta' Skadenza Qed Tii ekkjata",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Rauni mogtija:",reason:"Dan i-ertifikat ie revokat mill-emittent."},success:{mocknet:{label:"Din il-kredenzjali tal-Mocknet gaddiet il-kontrolli kollha",description:"Il-kredenzjali tal-Mocknet jintuaw biss gal skopijiet ta 'ttestjar. Dawn mhumiex irreistrati fuq blockchain, u ma gandhomx jiu kkunsidrati bala blockcerts verifikati."},blockchain:{label:"Ivverifikat",description:"Dan huwa ertifikat ${chain} huwa validu.",linkText:"Ara l-link tat-transazzjoni"},multisign:{label:"Ivverifikat",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"Dan mhux ertifikat validu",couldNotConfirmTx:"Ma setgetx tii kkonfermata t-tranazzjoni",ensureHashesEqual:"Il-hash ikkalkulat ma jikkorrispondix mar-remote hash",ensureMerkleRootEqual:"Merkle root ma taqbilx mar-remote hash",ensureNotExpired:"Dan i-ertifikat skada",ensureValidReceipt:"L-irevuta hija malformata. Kien hemm problema fin-navigazzjoni tal-merkle tree fl-irevuta",failedJsonLdNormalization:"In-normalizzazzjoni ta' JSON-LD ma rnexxietx",foundUnmappedFields:"Instabu unmapped fields matul in-normalizzazzjoni JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"L-indirizz elettroniku tal-ru speifikat inoloq wara li seet it-tranazzjoni.",invalidIssuingAddressRevoked:"L-indirizz elettroniku tal-ru speifikat ie revokat mill-emittent qabel ma seet it-tranazzjoni.",invalidIssuingAddressExpired:"L-indirizz elettroniku tal-ru speifikat skada qabel ma seet it-tranazzjoni.",invalidIssuingAddressUnknown:"L-indirizz elettroniku uat biex jinaru dawn il-Blockcerts ma jappartjenix gall-emittent mitlub.",getChain:"I-chain value ma ntgarafx",getIssuerProfile:"Mhux possibbli jinkiseb il-profil tal-emittent",getRevokedAssertions:"Mhux possibbli jinkisbu dikjarazzjonijiet revokati",getTransactionId:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",invalidMerkleReceipt:"Irevuta Merkle invalida. Il-proof hash ma kienx jaqbel mal-Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Ma jistax jii estratt JSON mid-data tal-identifikazzjoni tal-emittent",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},"it-IT":{steps:{formatValidationLabel:"Convalidare formato",formatValidationLabelPending:"Convalida formato",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"Verificare stato",statusCheckLabelPending:"Verifica stato del record"},subSteps:{getTransactionIdLabel:"Ottenere ID transazione",getTransactionIdLabelPending:"Ottieni ID transazione",computeLocalHashLabel:"Calcolare hash locale",computeLocalHashLabelPending:"Calcola hash locale",fetchRemoteHashLabel:"Recuperare hash remoto",fetchRemoteHashLabelPending:"Recupera hash remoto",getIssuerProfileLabel:"Ottenere profilo issuer",getIssuerProfileLabelPending:"Ottieni profilo issuer",parseIssuerKeysLabel:"Analizzare chiavi issuer",parseIssuerKeysLabelPending:"Analizza chiavi issuer",compareHashesLabel:"Confrontare gli hash",compareHashesLabelPending:"Confronto hash",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Controllare radice di Merkle",checkMerkleRootLabelPending:"Controllo radice di Merkle",checkReceiptLabel:"Verificare ricevuta",checkReceiptLabelPending:"Verifica ricevuta",checkAuthenticityLabel:"Verificare autenticit",checkAuthenticityLabelPending:"Verifica autenticit",checkRevokedStatusLabel:"Verificare stato revocato",checkRevokedStatusLabelPending:"Verifica stato revocato",checkExpiresDateLabel:"Verificare data di scadenza",checkExpiresDateLabelPending:"Verifica data di scadenza",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"Motivo indicato:",reason:"Questo certificato  stato revocato dall'emittente."},success:{mocknet:{label:"Questo Blockcert simulato ha superato tutti i controlli.",description:"La modalit Mocknet  utilizzata solo dagli emittenti per testare il loro flusso di lavoro localmente. Questo Blockcert non  stato registrato su una blockchain e non dovrebbe essere considerato un Blockcert verificato."},blockchain:{label:"Verificato",description:"Questo  un certificato ${chain} valido.",linkText:"Vedi la transazione"},multisign:{label:"Verificato",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"Questo non  un certificato valido",couldNotConfirmTx:"Impossibile confermare la transazione",ensureHashesEqual:"L'hash calcolato non corrisponde all'hash remoto",ensureMerkleRootEqual:"La radice di Merkle non corrisponde all'hash remoto.",ensureNotExpired:"Questo certificato  scaduto.",ensureValidReceipt:"La ricevuta  malformata. C' stato un problema nella navigazione dell'albero di Merkle nella ricevuta.",failedJsonLdNormalization:"Normalizzazione JSON-LD fallita",foundUnmappedFields:"Campi non mappati trovati durante la normalizzazione JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Il valore della catena non  stato riconosciuto",getIssuerProfile:"Impossibile ottenere il profilo dell'emittente",getRevokedAssertions:"Impossibile ottenere le asserzioni di revoca",getTransactionId:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",invalidMerkleReceipt:"Ricevuta Merkle non valida. L'hash di prova non corrisponde alla radice di Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"Impossibile analizzare JSON dai dati di identificazione dell'emittente.",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}},ja:{steps:{formatValidationLabel:"",formatValidationLabelPending:"",signatureVerificationLabel:"Proof Verification",signatureVerificationLabelPending:"Verifying Proof",identityVerificationLabel:"Identity verification",identityVerificationLabelPending:"Verifying identity",statusCheckLabel:"",statusCheckLabelPending:""},subSteps:{getTransactionIdLabel:"ID",getTransactionIdLabelPending:"ID",computeLocalHashLabel:"",computeLocalHashLabelPending:"",fetchRemoteHashLabel:"",fetchRemoteHashLabelPending:"",getIssuerProfileLabel:"",getIssuerProfileLabelPending:"",parseIssuerKeysLabel:"",parseIssuerKeysLabelPending:"",compareHashesLabel:"",compareHashesLabelPending:"",checkDocumentSignatureLabel:"Check document signature",checkDocumentSignatureLabelPending:"Checking document signature",checkMerkleRootLabel:"Merkle Root",checkMerkleRootLabelPending:"Merkle Root",checkReceiptLabel:"",checkReceiptLabelPending:"",checkAuthenticityLabel:"",checkAuthenticityLabelPending:"",checkRevokedStatusLabel:"",checkRevokedStatusLabelPending:"",checkExpiresDateLabel:"",checkExpiresDateLabelPending:"",controlVerificationMethodLabel:"Control Verification Method",controlVerificationMethodLabelPending:"Controlling Verification Method",retrieveVerificationMethodPublicKeyLabel:"Extract Public Key from DID Document",retrieveVerificationMethodPublicKeyLabelPending:"Extracting Public Key from DID Document",deriveIssuingAddressFromPublicKeyLabel:"Derive Issuing Address from Public Key",deriveIssuingAddressFromPublicKeyLabelPending:"Deriving Issuing Address from Public Key",compareIssuingAddressLabel:"Compare addresses",compareIssuingAddressLabelPending:"Comparing addresses",checkImagesIntegrityLabel:"Verify Images Integrity",checkImagesIntegrityLabelPending:"Verifying Images Integrity"},revocation:{preReason:"",reason:""},success:{mocknet:{label:"Mocknet",description:"MocknetBlockcert"},blockchain:{label:"",description:"${chain}",linkText:""},multisign:{label:"",description:"All the signatures of this certificate have successfully verified."}},errors:{certificateNotValid:"",couldNotConfirmTx:"",ensureHashesEqual:"",ensureMerkleRootEqual:"Merkle root",ensureNotExpired:"",ensureValidReceipt:"Merkle tree",failedJsonLdNormalization:"JSON-LD",foundUnmappedFields:"JSON-LD",identityErrorBaseMessage:"Issuer identity mismatch",deriveIssuingAddressFromPublicKey:"Unsupported blockchain for DID verification",controlVerificationMethod:"The identity document provided by the issuer does not match the verification method",retrieveVerificationMethodPublicKey:"The identity document provided by the issuer does not reference the verification method",compareIssuingAddress:"The provided verification method does not match the issuer identity",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"",getIssuerProfile:"",getRevokedAssertions:"assertions",getTransactionId:"ID",invalidMerkleReceipt:"MerkleMerkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"ID",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",parseIssuerKeys:"JSON",checkImagesIntegrity:"Image integrity verification proved that the content was modified after issuance."}}};function ha(e,t){return e&&t?fa[la.locale]?fa[la.locale][e]?fa[la.locale][e][t]?fa[la.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]":""}var da=Object.freeze({__proto__:null,detectLocale:function(){return navigator.language||ua.locale},ensureIsSupported:function(e){var t,r=Uf.i18n.getSupportedLanguages().map((function(e){return e.toLowerCase()}));if(!(t=r.includes(e.toLowerCase()))){var n=e.substr(0,2).toLowerCase(),i=r.map((function(e){return e.split("-")[0]})).indexOf(n);(t=i>-1)&&(e=r[i])}return t||(e=ua.locale),function(e){var t=e.split("-");return t.length>1?"".concat(t[0].toLowerCase(),"-").concat(t[1].toUpperCase()):t[0].toLowerCase()}(e)},getText:ha,getSupportedLanguages:function(){return Object.keys(fa)}});function pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ca.isMainnet(e)?Qi.bitcoin:Qi.testnet}function va(e){var t=Object.keys(Qi).map((function(e){return Qi[e]})).find((function(t){return t.signatureValue===e}));if(void 0===t)throw new Error(ha("errors","getChain"));return t}var ya,ga,ba=s((function e(t,r,n,i){a(this,e),u(this,"publicKey",void 0),u(this,"created",void 0),u(this,"revoked",void 0),u(this,"expires",void 0),this.publicKey=t,this.created=r,this.revoked=n,this.expires=i})),ma=s((function e(t,r,n){a(this,e),u(this,"image",void 0),u(this,"jobTitle",void 0),u(this,"name",void 0),this.image=t,this.jobTitle=r,this.name=n})),wa=function(e){c(r,e);var t=m(r);function r(e,n){var i;return a(this,r),u(g(i=t.call(this,n)),"stepCode",void 0),i.stepCode=e,i}return s(r)}(p(Error)),xa=fa[la.locale];function _a(){var e;return u(e={},ya.formatValidation,{code:ya.formatValidation,label:xa.steps.formatValidationLabel,labelPending:xa.steps.formatValidationLabelPending,subSteps:[]}),u(e,ya.proofVerification,{code:ya.proofVerification,label:xa.steps.signatureVerificationLabel,labelPending:xa.steps.signatureVerificationLabelPending,subSteps:[]}),u(e,ya.identityVerification,{code:ya.identityVerification,label:xa.steps.identityVerificationLabel,labelPending:xa.steps.identityVerificationLabelPending,subSteps:[]}),u(e,ya.statusCheck,{code:ya.statusCheck,label:xa.steps.statusCheckLabel,labelPending:xa.steps.statusCheckLabelPending,subSteps:[]}),e}function ka(e,t){var r=e.findIndex((function(e){return e===t}));r>-1&&e.splice(r,1)}!function(e){e.formatValidation="formatValidation",e.proofVerification="proofVerification",e.identityVerification="identityVerification",e.statusCheck="statusCheck",e.final="final"}(ya||(ya={})),function(e){e.checkImagesIntegrity="checkImagesIntegrity",e.checkRevokedStatus="checkRevokedStatus",e.checkExpiresDate="checkExpiresDate",e.controlVerificationMethod="controlVerificationMethod"}(ga||(ga={})),Object.freeze({__proto__:null,final:"final",get VerificationSteps(){return ya},get SUB_STEPS(){return ga},default:_a});var Sa=(u(Vt={},ya.formatValidation,[ga.checkImagesIntegrity]),u(Vt,ya.proofVerification,[]),u(Vt,ya.identityVerification,[ga.controlVerificationMethod]),u(Vt,ya.statusCheck,[ga.checkRevokedStatus,ga.checkExpiresDate]),Vt);function Ea(e,t){return Sa[e].filter((function(e){return t.includes(e)})).map((function(t){return Uf.verifier.convertToVerificationSubsteps(e,t)}))}function Ia(e){var r=_a();return Object.keys(r).map((function(n){return t(t({},r[n]),{},{subSteps:Ea(n,e)})}))}var Aa,Ta,Pa=Object.freeze({__proto__:null,getChain:function(e,t){var r=t||null;if(null!=r&&r.anchors){var n=r.anchors[0];if(n.chain)return va(n.chain);if("string"==typeof n)return function(e){var t={btc:{chainName:Qi.bitcoin.name},eth:{chainName:Qi.ethmain.name}},r=e.split(":"),n=r.findIndex((function(e){return Object.keys(t).includes(e)}));if(n>-1){var i=r[n],a=r[n+1],o=t[i].chainName.toLowerCase()+function(e){var t=e.substr(0,1),r=e.substr(1,e.length-1);return t.toUpperCase()+r.toLowerCase()}(a);return va(o)}return pa()}(n)}return pa(e)},generateRevocationReason:function(e){return e=(e=e.trim()).length>0?" ".concat(ha("revocation","preReason")," ").concat(e).concat("."!==e.slice(-1)?".":""):"","".concat(ha("revocation","reason")).concat(e)},getTransactionId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t=e.anchors,r=t[0];if(r.sourceId)return r.sourceId;if("string"==typeof r)return r.split(":").pop()}catch(e){throw new wa("",ha("errors","getTransactionId"))}},getTransactionLink:function(e,t){return e&&t?{rawTransactionLink:t.transactionTemplates.raw.replace("{transaction_id}",e),transactionLink:t.transactionTemplates.full.replace("{transaction_id}",e)}:null},getVerificationMap:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){var t=Object.values(ga);return e||ka(t,ga.controlVerificationMethod),t}(e);return{verificationProcess:t,verificationMap:Ia(t)}}}),Oa=Object.freeze({__proto__:null,isMockChain:function(e){if(e){var t="string"==typeof e?e:e.code;return!!Object.keys(Qi).some((function(e){return e===t}))&&!!Qi[t].test}return!1}});!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(Aa||(Aa={})),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(Ta||(Ta={}));var Ca=(u(Kt={},Ta.Bitcoin,{code:Ta.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}}),u(Kt,Ta.Ethmain,{code:Ta.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}}),u(Kt,Ta.Ethropst,{code:Ta.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}}),u(Kt,Ta.Ethrinkeby,{code:Ta.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}}),u(Kt,Ta.Mocknet,{code:Ta.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}}),u(Kt,Ta.Regtest,{code:Ta.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}}),u(Kt,Ta.Testnet,{code:Ta.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}),Kt);function Ma(e){return e!==Ca.bitcoin.code&&e!==Ca.ethmain.code}var Na=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function Ra(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Na(this,void 0,void 0,Wt.mark((function n(){var i;return Wt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((e=Array.from(e)).length<t)){n.next=2;break}throw new Error("Could not retrieve tx data");case 2:return i=e.map((function(e,t){return e.then((function(){return t})).catch((function(e){throw t}))})),n.abrupt("return",Promise.race(i).then((function(n){return e.splice(n,1)[0].then((function(e){return r.push(e)})),1===t?r:Ra(e,t-1,r)})).catch((function(n){return e.splice(n,1),Ra(e,t,r)})));case 4:case"end":return n.stop()}}),n)})))}function La(e){var t=e.explorerAPI,r=e.transactionIdPlaceholder,n=void 0===r?"{transaction_id}":r,i=e.transactionId,a=void 0===i?"":i,o=e.isTestApi,s=void 0!==o&&o,u=t.serviceURL,c="string"==typeof u?u:s?u.test:u.main;return c=function(e,t){if(!t.key)return e;if(t.key&&!t.keyPropertyName)throw new Error("No keyPropertyName defined for explorerAPI ".concat(t.serviceName));return function(e,t,r){var n=e.includes("?")?"&":"?";return"".concat(e).concat(n).concat(t,"=").concat(r)}(e,t.keyPropertyName,t.key)}(c=c.replace(n,a),t),c}function ja(){throw new Error("setTimeout has not been defined")}function Da(){throw new Error("clearTimeout has not been defined")}var Ba=ja,Ua=Da;function Fa(e){if(Ba===setTimeout)return setTimeout(e,0);if((Ba===ja||!Ba)&&setTimeout)return Ba=setTimeout,setTimeout(e,0);try{return Ba(e,0)}catch(t){try{return Ba.call(null,e,0)}catch(t){return Ba.call(this,e,0)}}}"function"==typeof Qt.setTimeout&&(Ba=setTimeout),"function"==typeof Qt.clearTimeout&&(Ua=clearTimeout);var za,Ha=[],Va=!1,Ka=-1;function qa(){Va&&za&&(Va=!1,za.length?Ha=za.concat(Ha):Ka=-1,Ha.length&&Wa())}function Wa(){if(!Va){var e=Fa(qa);Va=!0;for(var t=Ha.length;t;){for(za=Ha,Ha=[];++Ka<t;)za&&za[Ka].run();Ka=-1,t=Ha.length}za=null,Va=!1,function(e){if(Ua===clearTimeout)return clearTimeout(e);if((Ua===Da||!Ua)&&clearTimeout)return Ua=clearTimeout,clearTimeout(e);try{Ua(e)}catch(t){try{return Ua.call(null,e)}catch(t){return Ua.call(this,e)}}}(e)}}function Ga(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ha.push(new Ja(e,t)),1!==Ha.length||Va||Fa(Wa)}function Ja(e,t){this.fun=e,this.array=t}function Xa(){}Ja.prototype.run=function(){this.fun.apply(null,this.array)};var $a=Xa,Ya=Xa,Za=Xa,Qa=Xa,eo=Xa,to=Xa,ro=Xa,no=Qt.performance||{},io=no.now||no.mozNow||no.msNow||no.oNow||no.webkitNow||function(){return(new Date).getTime()},ao=new Date,oo={nextTick:Ga,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:$a,addListener:Ya,once:Za,off:Qa,removeListener:eo,removeAllListeners:to,emit:ro,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*io.call(no),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-ao)/1e3}},so=/[^\x20-\x7E]/,uo=/[\x2E\u3002\uFF0E\uFF61]/g,co={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},lo=Math.floor,fo=String.fromCharCode;/*! https://mths.be/punycode v1.4.1 by @mathias */function ho(e){throw new RangeError(co[e])}function po(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function vo(e,t,r){var n=0;for(e=r?lo(e/700):e>>1,e+=lo(e/t);e>455;n+=36)e=lo(e/35);return lo(n+36*e/(e+38))}function yo(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(uo,".")).split("."),(function(e){return so.test(e)?"xn--"+function(e){var t,r,n,i,a,o,s,u,c,l,f,h,d,p,v,y=[];for(e=function(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e),h=e.length,t=128,r=0,a=72,o=0;o<h;++o)(f=e[o])<128&&y.push(fo(f));for(n=i=y.length,i&&y.push("-");n<h;){for(s=2147483647,o=0;o<h;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>lo((2147483647-r)/(d=n+1))&&ho("overflow"),r+=(s-t)*d,t=s,o=0;o<h;++o)if((f=e[o])<t&&++r>2147483647&&ho("overflow"),f==t){for(u=r,c=36;!(u<(l=c<=a?1:c>=a+26?26:c-a));c+=36)v=u-l,p=36-l,y.push(fo(po(l+v%p,0))),u=lo(v/p);y.push(fo(po(u,0))),a=vo(r,d,n==i),r=0,++n}++r,++t}return y.join("")}(e):e})).join(".");return n+i}(e)}var go="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},bo=/%[sdj%]/g;function mo(e){if(!Lo(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(So(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(bo,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),o=n[r];r<i;o=n[++r])Mo(o)||!Uo(o)?a+=" "+o:a+=" "+So(o);return a}function wo(e,t){if(Do(Qt.process))return function(){return wo(e,t).apply(this,arguments)};if(!0===oo.noDeprecation)return e;var r=!1;return function(){if(!r){if(oo.throwDeprecation)throw new Error(t);oo.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var xo,_o={};function ko(e){return Do(xo)&&(xo=oo.env.NODE_DEBUG||""),e=e.toUpperCase(),_o[e]||(new RegExp("\\b"+e+"\\b","i").test(xo)?_o[e]=function(){var t=mo.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:_o[e]=function(){}),_o[e]}function So(e,t){var r={seen:[],stylize:Io};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Co(t)?r.showHidden=t:t&&$o(r,t),Do(r.showHidden)&&(r.showHidden=!1),Do(r.depth)&&(r.depth=2),Do(r.colors)&&(r.colors=!1),Do(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Eo),Ao(r,e,r.depth)}function Eo(e,t){var r=So.styles[t];return r?"["+So.colors[r][0]+"m"+e+"["+So.colors[r][1]+"m":e}function Io(e,t){return e}function Ao(e,t,r){if(e.customInspect&&t&&Ho(t.inspect)&&t.inspect!==So&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Lo(n)||(n=Ao(e,n,r)),n}var i=function(e,t){if(Do(t))return e.stylize("undefined","undefined");if(Lo(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return Ro(t)?e.stylize(""+t,"number"):Co(t)?e.stylize(""+t,"boolean"):Mo(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),zo(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return To(t);if(0===a.length){if(Ho(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Bo(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Fo(t))return e.stylize(Date.prototype.toString.call(t),"date");if(zo(t))return To(t)}var u,c="",l=!1,f=["{","}"];return Oo(t)&&(l=!0,f=["[","]"]),Ho(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),Bo(t)&&(c=" "+RegExp.prototype.toString.call(t)),Fo(t)&&(c=" "+Date.prototype.toUTCString.call(t)),zo(t)&&(c=" "+To(t)),0!==a.length||l&&0!=t.length?r<0?Bo(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=l?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)Yo(t,String(o))?a.push(Po(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(Po(e,t,r,n,i,!0))})),a}(e,t,r,o,a):a.map((function(n){return Po(e,t,r,o,n,l)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,f)):f[0]+c+f[1]}function To(e){return"["+Error.prototype.toString.call(e)+"]"}function Po(e,t,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),Yo(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=Mo(r)?Ao(e,u.value,null):Ao(e,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Do(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function Oo(e){return Array.isArray(e)}function Co(e){return"boolean"==typeof e}function Mo(e){return null===e}function No(e){return null==e}function Ro(e){return"number"==typeof e}function Lo(e){return"string"==typeof e}function jo(e){return"symbol"==r(e)}function Do(e){return void 0===e}function Bo(e){return Uo(e)&&"[object RegExp]"===qo(e)}function Uo(e){return"object"==r(e)&&null!==e}function Fo(e){return Uo(e)&&"[object Date]"===qo(e)}function zo(e){return Uo(e)&&("[object Error]"===qo(e)||e instanceof Error)}function Ho(e){return"function"==typeof e}function Vo(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==r(e)||void 0===e}function Ko(e){return $r(e)}function qo(e){return Object.prototype.toString.call(e)}function Wo(e){return e<10?"0"+e.toString(10):e.toString(10)}So.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},So.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Go=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Jo(){var e=new Date,t=[Wo(e.getHours()),Wo(e.getMinutes()),Wo(e.getSeconds())].join(":");return[e.getDate(),Go[e.getMonth()],t].join(" ")}function Xo(){console.log("%s - %s",Jo(),mo.apply(null,arguments))}function $o(e,t){if(!t||!Uo(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Yo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Zo={inherits:go,_extend:$o,log:Xo,isBuffer:Ko,isPrimitive:Vo,isFunction:Ho,isError:zo,isDate:Fo,isObject:Uo,isRegExp:Bo,isUndefined:Do,isSymbol:jo,isString:Lo,isNumber:Ro,isNullOrUndefined:No,isNull:Mo,isBoolean:Co,isArray:Oo,inspect:So,deprecate:wo,format:mo,debuglog:ko},Qo=Object.freeze({__proto__:null,format:mo,deprecate:wo,debuglog:ko,inspect:So,isArray:Oo,isBoolean:Co,isNull:Mo,isNullOrUndefined:No,isNumber:Ro,isString:Lo,isSymbol:jo,isUndefined:Do,isRegExp:Bo,isObject:Uo,isDate:Fo,isError:zo,isFunction:Ho,isPrimitive:Vo,isBuffer:Ko,log:Xo,inherits:go,_extend:$o,default:Zo});function es(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ts=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function rs(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function ns(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var is=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function as(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var c,l,f,h,d=e[u].replace(a,"%20"),p=d.indexOf(r);p>=0?(c=d.substr(0,p),l=d.substr(p+1)):(c=d,l=""),f=decodeURIComponent(c),h=decodeURIComponent(l),es(i,f)?ts(i[f])?i[f].push(h):i[f]=[i[f],h]:i[f]=h}return i}var os={parse:ws,resolve:Ss,resolveObject:Es,format:_s,Url:ss};function ss(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var us=/^([a-z0-9.+-]+:)/i,cs=/:[0-9]*$/,ls=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fs=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),hs=["'"].concat(fs),ds=["%","/","?",";","#"].concat(hs),ps=["/","?","#"],vs=/^[+a-z0-9A-Z_-]{0,63}$/,ys=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,gs={javascript:!0,"javascript:":!0},bs={javascript:!0,"javascript:":!0},ms={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ws(e,t,r){if(e&&Uo(e)&&e instanceof ss)return e;var n=new ss;return n.parse(e,t,r),n}function xs(e,t,n,i){if(!Lo(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var a=t.indexOf("?"),o=-1!==a&&a<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var u=t=s.join(o);if(u=u.trim(),!i&&1===t.split("#").length){var c=ls.exec(u);if(c)return e.path=u,e.href=u,e.pathname=c[1],c[2]?(e.search=c[2],e.query=n?as(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var l,f,h,d,p=us.exec(u);if(p){var v=(p=p[0]).toLowerCase();e.protocol=v,u=u.substr(p.length)}if(i||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===u.substr(0,2);!y||p&&bs[p]||(u=u.substr(2),e.slashes=!0)}if(!bs[p]&&(y||p&&!ms[p])){var g,b,m=-1;for(l=0;l<ps.length;l++)-1!==(f=u.indexOf(ps[l]))&&(-1===m||f<m)&&(m=f);for(-1!==(b=-1===m?u.lastIndexOf("@"):u.lastIndexOf("@",m))&&(g=u.slice(0,b),u=u.slice(b+1),e.auth=decodeURIComponent(g)),m=-1,l=0;l<ds.length;l++)-1!==(f=u.indexOf(ds[l]))&&(-1===m||f<m)&&(m=f);-1===m&&(m=u.length),e.host=u.slice(0,m),u=u.slice(m),Is(e),e.hostname=e.hostname||"";var w="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!w){var x=e.hostname.split(/\./);for(l=0,h=x.length;l<h;l++){var _=x[l];if(_&&!_.match(vs)){for(var k="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?k+="x":k+=_[S];if(!k.match(vs)){var I=x.slice(0,l),A=x.slice(l+1),T=_.match(ys);T&&(I.push(T[1]),A.unshift(T[2])),A.length&&(u="/"+A.join(".")+u),e.hostname=I.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),w||(e.hostname=yo(e.hostname)),d=e.port?":"+e.port:"";var P=e.hostname||"";e.host=P+d,e.href+=e.host,w&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!gs[v])for(l=0,h=hs.length;l<h;l++){var O=hs[l];if(-1!==u.indexOf(O)){var C=encodeURIComponent(O);C===O&&(C=escape(O)),u=u.split(O).join(C)}}var M=u.indexOf("#");-1!==M&&(e.hash=u.substr(M),u=u.slice(0,M));var N=u.indexOf("?");if(-1!==N?(e.search=u.substr(N),e.query=u.substr(N+1),n&&(e.query=as(e.query)),u=u.slice(0,N)):n&&(e.search="",e.query={}),u&&(e.pathname=u),ms[v]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var R=e.search||"";e.path=d+R}return e.href=ks(e),e}function _s(e){return Lo(e)&&(e=xs({},e)),ks(e)}function ks(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",a=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&Uo(e.query)&&Object.keys(e.query).length&&(s=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==r(e)?ns(is(e),(function(r){var i=encodeURIComponent(rs(r))+n;return ts(e[r])?ns(e[r],(function(e){return i+encodeURIComponent(rs(e))})).join(t):i+encodeURIComponent(rs(e[r]))})).join(t):""}(e.query));var u=e.search||s&&"?"+s||"";return n&&":"!==n.substr(-1)&&(n+=":"),e.slashes||(!n||ms[n])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),a&&"#"!==a.charAt(0)&&(a="#"+a),u&&"?"!==u.charAt(0)&&(u="?"+u),n+o+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(u=u.replace("#","%23"))+a}function Ss(e,t){return ws(e,!1,!0).resolve(t)}function Es(e,t){return e?ws(e,!1,!0).resolveObject(t):t}function Is(e){var t=e.host,r=cs.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}ss.prototype.parse=function(e,t,r){return xs(this,e,t,r)},ss.prototype.format=function(){return ks(this)},ss.prototype.resolve=function(e){return this.resolveObject(ws(e,!1,!0)).format()},ss.prototype.resolveObject=function(e){if(Lo(e)){var t=new ss;t.parse(e,!1,!0),e=t}for(var r,n=new ss,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return ms[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!ms[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var h=l[f];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||bs[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,y=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||y||n.host&&e.pathname,m=b,w=n.pathname&&n.pathname.split("/")||[],x=n.protocol&&!ms[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),b=b&&(""===r[0]||""===w[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(!No(e.search))return x&&(n.hostname=n.host=w.shift(),(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,Mo(n.pathname)&&Mo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===_||".."===_)||""===_,S=0,E=w.length;E>=0;E--)"."===(_=w[E])?w.splice(E,1):".."===_?(w.splice(E,1),S++):S&&(w.splice(E,1),S--);if(!b&&!m)for(;S--;S)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=I?"":w.length?w.shift():"",(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(b=b||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),Mo(n.pathname)&&Mo(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},ss.prototype.parseHost=function(){return Is(this)};var As,Ts,Ps=Yt(Object.freeze({__proto__:null,parse:ws,resolve:Ss,resolveObject:Es,format:_s,default:os,Url:ss})),Os=Yt(Object.freeze({__proto__:null,default:{}})),Cs=Fs(Qt.fetch)&&Fs(Qt.ReadableStream);function Ms(e){Ts||(Ts=new Qt.XMLHttpRequest).open("GET",Qt.location.host?"/":"https://example.com");try{return Ts.responseType=e,Ts.responseType===e}catch(e){return!1}}var Ns=void 0!==Qt.ArrayBuffer,Rs=Ns&&Fs(Qt.ArrayBuffer.prototype.slice),Ls=Ns&&Ms("arraybuffer"),js=!Cs&&Rs&&Ms("ms-stream"),Ds=!Cs&&Ns&&Ms("moz-chunked-arraybuffer"),Bs=Fs(Ts.overrideMimeType),Us=Fs(Qt.VBArray);function Fs(e){return"function"==typeof e}function zs(){}function Hs(){Hs.init.call(this)}function Vs(e){return void 0===e._maxListeners?Hs.defaultMaxListeners:e._maxListeners}function Ks(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Zs(e,n),a=0;a<n;++a)i[a].call(r)}function qs(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=Zs(e,i),o=0;o<i;++o)a[o].call(r,n)}function Ws(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,o=Zs(e,a),s=0;s<a;++s)o[s].call(r,n,i)}function Gs(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var o=e.length,s=Zs(e,o),u=0;u<o;++u)s[u].call(r,n,i,a)}function Js(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=Zs(e,i),o=0;o<i;++o)a[o].apply(r,n)}function Xs(e,t,r,n){var i,a,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]):(a=e._events=new zs,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=Vs(e))&&i>0&&o.length>i){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=r,++e._eventsCount;return e}function $s(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function Ys(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function Zs(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}Ts=null,zs.prototype=Object.create(null),Hs.EventEmitter=Hs,Hs.usingDomains=!1,Hs.prototype.domain=void 0,Hs.prototype._events=void 0,Hs.prototype._maxListeners=void 0,Hs.defaultMaxListeners=10,Hs.init=function(){this.domain=null,Hs.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new zs,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Hs.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Hs.prototype.getMaxListeners=function(){return Vs(this)},Hs.prototype.emit=function(e){var t,r,n,i,a,o,s,u="error"===e;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=o[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:Ks(r,l,this);break;case 2:qs(r,l,this,arguments[1]);break;case 3:Ws(r,l,this,arguments[1],arguments[2]);break;case 4:Gs(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];Js(r,l,this,i)}return!0},Hs.prototype.addListener=function(e,t){return Xs(this,e,t,!1)},Hs.prototype.on=Hs.prototype.addListener,Hs.prototype.prependListener=function(e,t){return Xs(this,e,t,!0)},Hs.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,$s(this,e,t)),this},Hs.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,$s(this,e,t)),this},Hs.prototype.removeListener=function(e,t){var r,n,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new zs:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new zs,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},Hs.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new zs,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new zs:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new zs,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Hs.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},Hs.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Ys.call(e,t)},Hs.prototype.listenerCount=Ys,Hs.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Qs=Object.freeze({__proto__:null,default:Hs,EventEmitter:Hs});function eu(){this.head=null,this.tail=null,this.length=0}eu.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},eu.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},eu.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},eu.prototype.clear=function(){this.head=this.tail=null,this.length=0},eu.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},eu.prototype.concat=function(e){if(0===this.length)return pr.alloc(0);if(1===this.length)return this.head.data;for(var t=pr.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var tu=pr.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ru(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!tu(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=iu;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=au;break;default:return void(this.write=nu)}this.charBuffer=new pr(6),this.charReceived=0,this.charLength=0}function nu(e){return e.toString(this.encoding)}function iu(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function au(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}ru.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((n=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(n=t.charCodeAt(i))>=55296&&n<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},ru.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},ru.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t};var ou=Object.freeze({__proto__:null,StringDecoder:ru});cu.ReadableState=uu;var su=ko("stream");function uu(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof ju&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new eu,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new ru(e.encoding),this.encoding=e.encoding)}function cu(e){if(!(this instanceof cu))return new cu(e);this._readableState=new uu(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),Hs.call(this)}function lu(e,t,r,n,i){var a=function(e,t){var r=null;return $r(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,hu(e)}}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&hu(e))),function(e,t){t.readingMore||(t.readingMore=!0,Ga(pu,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function fu(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function hu(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(su("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ga(du,e):du(e))}function du(e){su("emit readable"),e.emit("readable"),gu(e)}function pu(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(su("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function vu(e){su("readable nexttick read 0"),e.read(0)}function yu(e,t){t.reading||(su("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),gu(e),t.flowing&&!t.reading&&e.read(0)}function gu(e){var t=e._readableState;for(su("flow",t.flowing);t.flowing&&null!==e.read(););}function bu(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=pr.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0==(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function mu(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ga(wu,t,e))}function wu(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function xu(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function _u(){}function ku(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function Su(e,t){Object.defineProperty(this,"buffer",{get:wo((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof ju&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?Ga(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var a=Pu(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||Tu(e,r),n?Ga(Au,e,r,a,i):Au(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Mu(this)}function Eu(e){if(!(this instanceof Eu||this instanceof ju))return new Eu(e);this._writableState=new Su(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),Hs.call(this)}function Iu(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function Au(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),Cu(e,t)}function Tu(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;Iu(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new Mu(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(Iu(e,t,!1,t.objectMode?1:s.length,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function Pu(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Ou(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function Cu(e,t){var r=Pu(t);return r&&(0===t.pendingcb?(Ou(e,t),t.finished=!0,e.emit("finish")):Ou(e,t)),r}function Mu(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}go(cu,Hs),cu.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=pr.from(e,t),t=""),lu(this,r,e,t,!1)},cu.prototype.unshift=function(e){return lu(this,this._readableState,e,"",!0)},cu.prototype.isPaused=function(){return!1===this._readableState.flowing},cu.prototype.setEncoding=function(e){return this._readableState.decoder=new ru(e),this._readableState.encoding=e,this},cu.prototype.read=function(e){su("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return su("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?mu(this):hu(this),null;if(0===(e=fu(e,t))&&t.ended)return 0===t.length&&mu(this),null;var n,i=t.needReadable;return su("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&su("length less than watermark",i=!0),t.ended||t.reading?su("reading or ended",i=!1):i&&(su("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=fu(r,t))),null===(n=e>0?bu(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&mu(this)),null!==n&&this.emit("data",n),n},cu.prototype._read=function(e){this.emit("error",new Error("not implemented"))},cu.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,su("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end?c:o;function a(e){su("onunpipe"),e===r&&c()}function o(){su("onend"),e.end()}n.endEmitted?Ga(i):r.once("end",i),e.on("unpipe",a);var s=function(e){return function(){var t=e._readableState;su("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,gu(e))}}(r);e.on("drain",s);var u=!1;function c(){su("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",s),e.removeListener("error",h),e.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",c),r.removeListener("data",f),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s()}var l=!1;function f(t){su("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==xu(n.pipes,e))&&!u&&(su("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){su("onerror",t),v(),e.removeListener("error",h),0===function(e,t){return e.listeners("error").length}(e)&&e.emit("error",t)}function d(){e.removeListener("finish",p),v()}function p(){su("onfinish"),e.removeListener("close",d),v()}function v(){su("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(su("pipe resume"),r.resume()),e},cu.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=xu(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},cu.prototype.on=function(e,t){var r=Hs.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&hu(this):Ga(vu,this))}return r},cu.prototype.addListener=cu.prototype.on,cu.prototype.resume=function(){var e=this._readableState;return e.flowing||(su("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ga(yu,e,t))}(this,e)),this},cu.prototype.pause=function(){return su("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(su("pause"),this._readableState.flowing=!1,this.emit("pause")),this},cu.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(su("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){su("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){su("wrapped _read",t),r&&(r=!1,e.resume())},n},cu._fromList=bu,Eu.WritableState=Su,go(Eu,Hs),Su.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},Eu.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Eu.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),pr.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=_u),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),Ga(t,r)}(this,r):function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):pr.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),Ga(n,a),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=pr.from(t,r)),t}(t,r,n),pr.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new ku(r,n,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Iu(e,t,!1,a,r,n,i);return o}(this,n,e,t,r)),i},Eu.prototype.cork=function(){this._writableState.corked++},Eu.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||Tu(this,e))},Eu.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Eu.prototype._write=function(e,t,r){r(new Error("not implemented"))},Eu.prototype._writev=null,Eu.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,Cu(e,t),r&&(t.finished?Ga(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},go(ju,cu);for(var Nu=Object.keys(Eu.prototype),Ru=0;Ru<Nu.length;Ru++){var Lu=Nu[Ru];ju.prototype[Lu]||(ju.prototype[Lu]=Eu.prototype[Lu])}function ju(e){if(!(this instanceof ju))return new ju(e);cu.call(this,e),Eu.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Du)}function Du(){this.allowHalfOpen||this._writableState.ended||Ga(Bu,this)}function Bu(e){e.end()}function Uu(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Fu(e){if(!(this instanceof Fu))return new Fu(e);ju.call(this,e),this._transformState=new Uu(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){zu(t,e)})):zu(t)}))}function zu(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function Hu(e){if(!(this instanceof Hu))return new Hu(e);Fu.call(this,e)}function Vu(){Hs.call(this)}go(Fu,ju),Fu.prototype.push=function(e,t){return this._transformState.needTransform=!1,ju.prototype.push.call(this,e,t)},Fu.prototype._transform=function(e,t,r){throw new Error("Not implemented")},Fu.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Fu.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},go(Hu,Fu),Hu.prototype._transform=function(e,t,r){r(null,e)},go(Vu,Hs),Vu.Readable=cu,Vu.Writable=Eu,Vu.Duplex=ju,Vu.Transform=Fu,Vu.PassThrough=Hu,Vu.Stream=Vu,Vu.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===Hs.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var Ku=Object.freeze({__proto__:null,default:Vu,Readable:cu,Writable:Eu,Duplex:ju,Transform:Fu,PassThrough:Hu,Stream:Vu});function qu(e,t,r){var n,i=this;if(cu.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){Ga((function(){i.emit("close")}))})),"fetch"===r){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var a,o,s=t.headers[Symbol.iterator]();a=(o=s.next()).value,!o.done;)i.headers[a[0].toLowerCase()]=a[1],i.rawHeaders.push(a[0],a[1]);var u=t.body.getReader();(n=function(){u.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new pr(e.value)),n()))}))})()}else if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(t[2])):void 0!==i.headers[r]?i.headers[r]+=", "+t[2]:i.headers[r]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!Bs){var c=i.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase())}i._charset||(i._charset="utf-8")}}function Wu(e){var t,r=this;Eu.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new pr(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!Bs;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return Cs&&t?"fetch":Ds?"moz-chunked-arraybuffer":js?"ms-stream":Ls&&e?"arraybuffer":Us&&e?"text:vbarray":"text"}(t,n),r.on("finish",(function(){r._onFinish()}))}go(qu,cu),qu.prototype._read=function(){},qu.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(4!==t.readyState)break;try{r=new Qt.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new pr(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new pr(n.length),a=0;a<n.length;a++)i[a]=255&n.charCodeAt(a);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(4!==t.readyState||!t.response)break;r=t.response,e.push(new pr(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,3!==t.readyState||!r)break;e.push(new pr(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,3!==t.readyState)break;var o=new Qt.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new pr(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(r)}4===e._xhr.readyState&&"ms-stream"!==e._mode&&e.push(null)},go(Wu,Eu);var Gu=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];function Ju(e,t){"string"==typeof e&&(e=ws(e));var r=-1===Qt.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,a=e.port,o=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(a?":"+a:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var s=new Wu(e);return t&&s.on("response",t),s}function Xu(e,t){var r=Ju(e,t);return r.end(),r}function $u(){}Wu.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===Gu.indexOf(r)&&(this._headers[r]={name:e,value:t})},Wu.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},Wu.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},Wu.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,r=e._opts,n=e._headers;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method||(t=function(){if(void 0!==As)return As;try{new Qt.Blob([new ArrayBuffer(1)]),As=!0}catch(e){As=!1}return As}()?new Qt.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if($r(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(n["content-type"]||{}).value||""}):pr.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(n).map((function(e){return[n[e].name,n[e].value]}));Qt.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var a=e._xhr=new Qt.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(t){return void Ga((function(){e.emit("error",t)}))}"responseType"in a&&(a.responseType=e._mode.split(":")[0]),"withCredentials"in a&&(a.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach((function(e){a.setRequestHeader(n[e].name,n[e].value)})),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case 3:case 4:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(t)}catch(t){return void Ga((function(){e.emit("error",t)}))}}}},Wu.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},Wu.prototype._connect=function(){var e=this;e._destroyed||(e._response=new qu(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},Wu.prototype._write=function(e,t,r){this._body.push(e),r()},Wu.prototype.abort=Wu.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},Wu.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),Eu.prototype.end.call(this,e,t,r)},Wu.prototype.flushHeaders=function(){},Wu.prototype.setTimeout=function(){},Wu.prototype.setNoDelay=function(){},Wu.prototype.setSocketKeepAlive=function(){},$u.defaultMaxSockets=4;var Yu=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],Zu={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Qu={request:Ju,get:Xu,Agent:$u,METHODS:Yu,STATUS_CODES:Zu},ec=Yt(Object.freeze({__proto__:null,request:Ju,get:Xu,Agent:$u,METHODS:Yu,STATUS_CODES:Zu,default:Qu})),tc=Ps,rc=Os.spawn,nc=Os,ic=function(){var e,t,r=this,n=ec,i=ec,a={},o=!1,s={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u={},c={},l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],f=["TRACE","TRACK","CONNECT"],h=!1,d=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1,this.open=function(e,t,r,n,i){if(this.abort(),d=!1,!function(e){return e&&-1===f.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");a={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},v(this.OPENED)},this.setDisableHeaderCheck=function(e){o=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return o||e&&-1===l.indexOf(e.toLowerCase())}(e)){if(h)throw new Error("INVALID_STATE_ERR: send flag is true");e=c[e.toLowerCase()]||e,c[e.toLowerCase()]=e,u[e]=u[e]?u[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!d?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||d)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&c[e.toLowerCase()]?u[c[e.toLowerCase()]]:""},this.send=function(o){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(h)throw new Error("INVALID_STATE_ERR: send has already been called");var l,f=!1,p=!1,y=tc.parse(a.url);switch(y.protocol){case"https:":f=!0;case"http:":l=y.hostname;break;case"file:":p=!0;break;case void 0:case null:case"":l="localhost";break;default:throw new Error("Protocol not supported.")}if(p){if("GET"!==a.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(a.async)nc.readFile(y.pathname,"utf8",(function(e,t){e?r.handleError(e):(r.status=200,r.responseText=t,v(r.DONE))}));else try{this.responseText=nc.readFileSync(y.pathname,"utf8"),this.status=200,v(r.DONE)}catch(e){this.handleError(e)}}else{var g=y.port||(f?443:80),b=y.pathname+(y.search?y.search:"");for(var m in s)c[m.toLowerCase()]||(u[m]=s[m]);if(u.Host=l,f&&443===g||80===g||(u.Host+=":"+y.port),a.user){void 0===a.password&&(a.password="");var w=new pr(a.user+":"+a.password);u.Authorization="Basic "+w.toString("base64")}"GET"===a.method||"HEAD"===a.method?o=null:o?(u["Content-Length"]=$r(o)?o.length:pr.byteLength(o),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===a.method&&(u["Content-Length"]=0);var x={host:l,port:g,path:b,method:a.method,headers:u,agent:!1,withCredentials:r.withCredentials};if(d=!1,a.async){var _=f?i.request:n.request;h=!0,r.dispatchEvent("readystatechange");var k=function(e){r.handleError(e)};e=_(x,(function n(i){if(301!==(t=i).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),v(r.HEADERS_RECEIVED),r.status=t.statusCode,t.on("data",(function(e){e&&(r.responseText+=e),h&&v(r.LOADING)})),t.on("end",(function(){h&&(v(r.DONE),h=!1)})),t.on("error",(function(e){r.handleError(e)}));else{a.url=t.headers.location;var o=tc.parse(a.url);l=o.hostname;var s={hostname:o.hostname,port:o.port,path:o.path,method:303===t.statusCode?"GET":a.method,headers:u,withCredentials:r.withCredentials};(e=_(s,n).on("error",k)).end()}})).on("error",k),o&&e.write(o),e.end(),r.dispatchEvent("loadstart")}else{var S=".node-xmlhttprequest-content-"+oo.pid,E=".node-xmlhttprequest-sync-"+oo.pid;nc.writeFileSync(E,"","utf8");for(var I="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(f?"s":"")+".request;var options = "+JSON.stringify(x)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+S+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+E+"');});response.on('error', function(error) {fs.writeFileSync('"+S+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+E+"');});}).on('error', function(error) {fs.writeFileSync('"+S+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+E+"');});"+(o?"req.write('"+JSON.stringify(o).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=rc(oo.argv[0],["-e",I]);nc.existsSync(E););var T=JSON.parse(nc.readFileSync(S,"utf8"));A.stdin.end(),nc.unlinkSync(S),T.err?r.handleError(T.err):(t=T.data,r.status=T.data.statusCode,r.responseText=T.data.text,v(r.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,d=!0,v(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),u=s,this.status=0,this.responseText="",this.responseXML="",d=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!h||this.readyState===this.DONE||(h=!1,v(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof r["on"+e]&&r["on"+e](),e in p)for(var t=0,n=p[e].length;t<n;t++)p[e][t].call(r)};var v=function(e){e!=r.LOADING&&r.readyState===e||(r.readyState=e,(a.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState!==r.DONE||d||(r.dispatchEvent("load"),r.dispatchEvent("loadend")))}};function ac(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){var n=e.url;n||r(new Error("URL is missing")),"http://"!==n.substr(0,7)||e.forceHttp||(console.warn("Upgrading requested url ".concat(n," to https protocol.")),n=n.replace("http://","https://"));var i=new("undefined"==typeof XMLHttpRequest?ic:XMLHttpRequest);e["bearer-token"]&&i.setRequestHeader("Authorization","Bearer ".concat(e["bearer-token"])),i.onload=function(){if(i.status>=200&&i.status<300)t(i.responseText);else{console.log(i.responseText);var e="Error fetching url:".concat(n,"; status code:").concat(i.status);r(new Error(e))}},i.ontimeout=function(e){console.log("ontimeout",e)},i.onreadystatechange=function(){404===i.status&&r(new Error("Error fetching url:".concat(n,"; status code:").concat(i.status)))},i.onerror=function(){console.error("Request failed with error ".concat(i.responseText)),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}function oc(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function sc(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(oc(e,n))return e.slice(n.length)}return e}var uc=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},cc="https://api.etherscan.io/api?module=proxy",lc="https://api-ropsten.etherscan.io/api?module=proxy",fc={serviceURL:{main:"".concat(cc,"&action=eth_getTransactionByHash&txhash={transaction_id}"),test:"".concat(lc,"&action=eth_getTransactionByHash&txhash={transaction_id}")},serviceName:Aa.etherscan,parsingFunction:function(e){var t=e.jsonResponse,r=e.chain,n=e.key,i=e.keyPropertyName;return uc(this,void 0,void 0,Wt.mark((function e(){var a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={serviceURL:{main:"".concat(cc,"&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}"),test:"".concat(lc,"&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}")}},o={serviceURL:{main:"".concat(cc,"&action=eth_blockNumber"),test:"".concat(lc,"&action=eth_blockNumber")}},e.next=3,function(e,t){return uc(this,void 0,void 0,Wt.mark((function r(){var s,u,c,l;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.result.blockNumber,u=La({explorerAPI:Object.assign(Object.assign({},a),{key:n,keyPropertyName:i}),transactionId:s,isTestApi:Ma(t)}),r.prev=1,r.next=4,ac({url:u});case 4:return c=r.sent,l=JSON.parse(c).result,r.next=8,function(e,t){return uc(this,void 0,void 0,Wt.mark((function r(){var a,s,u;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=La({explorerAPI:Object.assign(Object.assign({},o),{key:n,keyPropertyName:i}),isTestApi:Ma(e)}),r.prev=1,r.next=4,ac({url:a});case 4:s=r.sent,r.next=10;break;case 7:throw r.prev=7,r.t0=r.catch(1),new Error("Unable to get remote hash");case 10:if(!((u=JSON.parse(s).result)-t<1)){r.next=13;break}throw new Error("Not enough");case 13:return r.abrupt("return",u);case 14:case"end":return r.stop()}}),r,null,[[1,7]])})))}(t,s);case 8:return r.abrupt("return",l);case 11:throw r.prev=11,r.t0=r.catch(1),new Error("Unable to get remote hash");case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))}(t,r);case 3:return s=e.sent,e.abrupt("return",function(e,t){var r=e.result,n=new Date(1e3*parseInt(t.timestamp,16)),i=r.from;return{remoteHash:sc(r.input,Ca.ethmain.prefixes),issuingAddress:i,time:n,revokedAddresses:[]}}(t,s));case 5:case"end":return e.stop()}}),e)})))},priority:-1};function hc(e){return""===e?"":function(e){var t=Date.parse(e);if(t)return new Date(t);var r=function(e){var t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));var r=e.slice(-5),n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t.getTime()}(e);return r||function(e){var t,r,n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,(t=new Date(Date.UTC.apply(Date,t))).getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}("".concat(e))}function dc(e){return new Date(1e3*e)}var pc={serviceURL:{main:"https://api.blockcypher.com/v1/eth/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/beth/test/txs/{transaction_id}?limit=500"},serviceName:Aa.blockcypher,parsingFunction:function(e){var t=e.jsonResponse;if(t.confirmations<1)throw new Error("Not enough");var r=hc(t.received),n=t.outputs,i=n[n.length-1],a=t.inputs[0].addresses[0],o=sc(i.script,Ca.ethmain.prefixes);a=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(!oc(e,n))return"".concat(n).concat(e)}return e}(a,Ca.ethmain.prefixes);var s=n.filter((function(e){return!!e.spent_by})).map((function(e){return e.addresses[0]}));return{remoteHash:o,issuingAddress:a,time:r,revokedAddresses:s}},priority:-1},vc={serviceURL:{main:"https://blockstream.info/api/tx/{transaction_id}",test:"https://blockstream.info/testnet/api/tx/{transaction_id}"},serviceName:Aa.blockstream,parsingFunction:function(e){var t=e.jsonResponse;if(!t.status.confirmed)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockstream API");var r=dc(t.status.block_time),n=t.vout,i=n[n.length-1],a=t.vin[0].prevout.scriptpubkey_address,o=sc(i.scriptpubkey,Ca.bitcoin.prefixes),s=n.filter((function(e){return!!e.scriptpubkey_address})).map((function(e){return e.scriptpubkey_address}));return{remoteHash:o,issuingAddress:a,time:r,revokedAddresses:s}},priority:-1},yc={serviceURL:{main:"https://api.blockcypher.com/v1/btc/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/btc/test3/txs/{transaction_id}?limit=500"},serviceName:Aa.blockcypher,parsingFunction:function(e){var t=e.jsonResponse;if(t.confirmations<1)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockcypher API");var r=hc(t.received),n=t.outputs,i=n[n.length-1],a=t.inputs[0].addresses[0],o=sc(i.script,Ca.bitcoin.prefixes),s=n.filter((function(e){return!!e.spent_by})).map((function(e){return e.addresses[0]}));return{remoteHash:o,issuingAddress:a,time:r,revokedAddresses:s}},priority:-1},gc=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function bc(e){var t=this;return e.map((function(e){return{getTxData:function(r,n){return gc(t,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,r){return gc(this,void 0,void 0,Wt.mark((function n(){var i,a;return Wt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=La({explorerAPI:e,transactionId:t,isTestApi:Ma(r)}),n.prev=1,n.next=4,ac({url:i});case 4:return a=n.sent,n.next=7,e.parsingFunction(Object.assign({jsonResponse:JSON.parse(a),chain:r},e));case 7:return n.abrupt("return",n.sent);case 10:throw n.prev=10,n.t0=n.catch(1),new Error("Unable to get remote hash");case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))}(e,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},priority:e.priority}}))}var mc=[yc,vc],wc=[fc,pc];function xc(e){var t=e.serviceUrl,r=e.transactionId;return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function e(){var n,i,a,o,s,u,c,l,f,h;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"eth_getTransactionByHash",jsonrpc:"2.0",id:"getbyhash",params:["0x"+r]},e.next=3,ac({url:t,body:n,method:"POST"});case 3:return i=e.sent,a=JSON.parse(i),o={method:"eth_getBlockByNumber",jsonrpc:"2.0",id:"blockbynumber",params:[a.result.blockNumber,!0]},e.next=8,ac({url:t,body:o,method:"POST"});case 8:return s=e.sent,u=JSON.parse(s),c=a.result,l=u.result,f=new Date(1e3*parseInt(l.timestamp,16)),h=c.from,e.abrupt("return",{remoteHash:sc(c.input,["0x"]),issuingAddress:h,time:f,revokedAddresses:[]});case 15:case"end":return e.stop()}}),e)})))}function _c(e){var t=e.serviceUrl,r=e.transactionId;return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function e(){var n,i,a,o,s,u,c;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"getrawtransaction",jsonrpc:"2.0",id:"rpctest",params:[r,!0]},e.next=3,ac({url:t,body:n,method:"POST"});case 3:return i=e.sent,a=JSON.parse(i).result,o=a.vout[0].scriptPubKey.addresses[0],s=sc(a.vout[1].scriptPubKey.asm,["6a20","OP_RETURN "]),u=dc(a.blocktime),c=a.vout.filter((function(e){return!!e.scriptPubKey.addresses})).map((function(e){return e.scriptPubKey.addresses})).flat(),e.abrupt("return",{issuingAddress:o,remoteHash:s,time:u,revokedAddresses:c});case 10:case"end":return e.stop()}}),e)})))}var kc=[];function Sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.map((function(e){return e.serviceName})).filter((function(e){return!!e})).filter((function(e){return!!Aa[e]}));return n.length?t.reduce((function(t,i){if(n.includes(i.serviceName)){var a=Object.assign({},i),o=e.find((function(e){return e.serviceName===i.serviceName}));if(function(e){if(e.key&&!e.keyPropertyName)throw new Error("Property keyPropertyName is not set for ".concat(e.serviceName,". Cannot pass the key property to the service."));return!0}(o)){var s=Object.assign(a,o);t.push(s);var u=e.findIndex((function(e){return e.serviceName===s.serviceName}));kc.includes(u)||kc.push(u)}}else t.push(i);return r&&function(e,t){t.forEach((function(t){return e.splice(t,1)}))}(e,kc),t}),[]):t}function Ec(e){var t=this;return e.map((function(e){return e.parsingFunction||(e.parsingFunction="btc"===e.chainType?_c:xc),e})).map((function(e){return{getTxData:function(r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(t,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.parsingFunction(Object.assign(Object.assign({},e),{transactionId:r}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},priority:e.priority}}))}function Ic(e){var t,r={bitcoin:bc(Sc(t=e,mc)),ethereum:bc(Sc(t,wc))},n=r.bitcoin,i=r.ethereum,a=function(e){return{custom:Ec(e)}}(e.filter((function(e){return"rpc"===e.apiType}))).custom;return{bitcoin:n,ethereum:i,custom:[].concat(E(a),E(bc(e.filter((function(e){return"rpc"!==e.apiType})))))}}var Ac=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function Tc(e,t){var r;switch(e){case Ca[Ta.Bitcoin].code:case Ca[Ta.Regtest].code:case Ca[Ta.Testnet].code:case Ca[Ta.Mocknet].code:return t.bitcoin;case Ca[Ta.Ethmain].code:case Ca[Ta.Ethropst].code:case Ca[Ta.Ethrinkeby].code:return t.ethereum;default:if(!(null===(r=t.custom)||void 0===r?void 0:r.length))throw new Error("Chain is not natively supported. Use custom explorers to retrieve tx data.");return t.custom}}function Pc(e){return Ac(this,void 0,void 0,Wt.mark((function t(){var r,n,i,a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ra(e,1);case 3:r=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("Transaction lookup error: ".concat(t.t0.message));case 9:if(r&&0!==r.length){t.next=11;break}throw new Error("Could not confirm transaction data.");case 11:n=r[0],i=1;case 13:if(!(i<r.length)){t.next=22;break}if(a=r[i],n.issuingAddress===a.issuingAddress){t.next=17;break}throw new Error("Issuing addresses do not match consistently");case 17:if(n.remoteHash===a.remoteHash){t.next=19;break}throw new Error("Remote hashes do not match consistently");case 19:i++,t.next=13;break;case 22:return t.abrupt("return",n);case 23:case"end":return t.stop()}}),t,null,[[0,6]])})))}function Oc(e,t,r,n){return Ac(this,void 0,void 0,Wt.mark((function i(){var a;return Wt.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a=function(e,t,r){if(1>e.length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");for(var n=[],i=e.length,a=0;a<i;a++)n.push(e[a].getTxData(t,r));return n}(e[t],r,n),i.next=4,Pc(a);case 4:case 13:return i.abrupt("return",i.sent);case 7:if(i.prev=7,i.t0=i.catch(0),!(t<e.length-1)){i.next=14;break}return t++,i.next=13,Oc(e,t,r,n);case 14:throw i.t0;case 15:case"end":return i.stop()}}),i,null,[[0,7]])})))}var Cc={value:"https://dev.uniresolver.io/1.0/identifiers",set url(e){this.value=e},get url(){return this.value}};function Mc(e){return e.startsWith("did:",0)}function Nc(e){return e.startsWith("did:key:",0)}var Rc={},Lc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
/*!
   * Copyright (c) 2019-2022 Digital Bazaar, Inc. All rights reserved.
   */function jc(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";var n="",i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var u=e[i],c=0;c<s.length;++c)u+=s[c]<<8,s[c]=u%a,u=u/a|0;for(;u>0;)s.push(u%a),u=u/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=t[s[i]];if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n}(e,Lc,t)}function Dc(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(0===e.length)return new Uint8Array;var r=Rc[t];if(!r){r=Rc[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),o=[0],s=0;s<e.length;s++){var u=r[e.charCodeAt(s)];if(void 0===u)return;for(var c=u,l=0;l<o.length;++l)c+=o[l]*i,o[l]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)o.push(0);return new Uint8Array(o.reverse())}(e,Lc)}
/*!
   * Copyright (c) 2018-2022 Digital Bazaar, Inc. All rights reserved.
   */var Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Uc=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function Fc(e){if(!(e instanceof Uint8Array||"string"==typeof e))throw new TypeError('"input" be a string or Uint8Array.');"string"==typeof e&&(e=(new TextEncoder).encode(e));for(var t,r,n,i="",a=0;a<e.byteLength;)t=e[a++],r=e[a++],n=e[a++],i+=Bc.charAt(t>>2),i+=Bc.charAt((3&t)<<4|r>>4),isNaN(r)||(i+=Bc.charAt((15&r)<<2|n>>6),isNaN(n)||(i+=Bc.charAt(63&n)));return i}var zc={},Hc=Object.freeze({__proto__:null,default:zc}),Vc=BigInt(0),Kc=BigInt(1),qc=BigInt(2),Wc=BigInt(255),Gc=Math.pow(qc,BigInt(252))+BigInt("27742317777372353535851937790883648493"),Jc={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:Math.pow(qc,Wc)-BigInt(19),l:Gc,n:Gc,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},Xc=Math.pow(qc,BigInt(256)),$c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Yc=function(){function e(t,r,n,i){a(this,e),this.x=t,this.y=r,this.z=n,this.t=i}return s(e,[{key:"equals",value:function(e){Zc(e);var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=cl(t*o),u=cl(i*n),c=cl(r*o),l=cl(a*n);return s===u&&c===l}},{key:"negate",value:function(){return new e(cl(-this.x),this.y,this.z,cl(-this.t))}},{key:"double",value:function(){var t=this.x,r=this.y,n=this.z,i=Jc.a,a=cl(Math.pow(t,qc)),o=cl(Math.pow(r,qc)),s=cl(qc*cl(Math.pow(n,qc))),u=cl(i*a),c=cl(cl(Math.pow(t+r,qc))-a-o),l=u+o,f=l-s,h=u-o,d=cl(c*f),p=cl(l*h),v=cl(c*h);return new e(d,p,cl(f*l),v)}},{key:"add",value:function(t){Zc(t);var r=this.x,n=this.y,i=this.z,a=this.t,o=t.x,s=t.y,u=t.z,c=t.t,l=cl((n-r)*(s+o)),f=cl((n+r)*(s-o)),h=cl(f-l);if(h===Vc)return this.double();var d=cl(i*qc*c),p=cl(a*qc*u),v=p+d,y=f+l,g=p-d,b=cl(v*h),m=cl(y*g),w=cl(v*g);return new e(b,m,cl(h*y),w)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"precomputeWindow",value:function(e){for(var t=1+256/e,r=[],n=this,i=n,a=0;a<t;a++){i=n,r.push(i);for(var o=1;o<Math.pow(2,e-1);o++)i=i.add(n),r.push(i);n=i.double()}return r}},{key:"wNAF",value:function(t,r){!r&&this.equals(e.BASE)&&(r=tl.BASE);var n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var i=r&&el.get(r);i||(i=this.precomputeWindow(n),r&&1!==n&&(i=e.normalizeZ(i),el.set(r,i)));for(var a=e.ZERO,o=e.ZERO,s=1+256/n,u=Math.pow(2,n-1),c=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),f=BigInt(n),h=0;h<s;h++){var d=h*u,p=Number(t&c);if(t>>=f,p>u&&(p-=l,t+=Kc),0===p){var v=i[d];h%2&&(v=v.negate()),o=o.add(v)}else{var y=i[d+Math.abs(p)-1];p<0&&(y=y.negate()),a=a.add(y)}}return e.normalizeZ([a,o])[0]}},{key:"multiply",value:function(e,t){return this.wNAF(vl(e,Jc.l),t)}},{key:"multiplyUnsafe",value:function(t){var r=vl(t,Jc.l,!1),n=e.BASE,i=e.ZERO;if(r===Vc)return i;if(this.equals(i)||r===Kc)return this;if(this.equals(n))return this.wNAF(r);for(var a=i,o=this;r>Vc;)r&Kc&&(a=a.add(o)),o=o.double(),r>>=Kc;return a}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(Jc.h).equals(e.ZERO)}},{key:"isTorsionFree",value:function(){return this.multiplyUnsafe(Jc.l).equals(e.ZERO)}},{key:"toAffine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ll(this.z),t=this.x,r=this.y,n=this.z,i=cl(t*e),a=cl(r*e);if(cl(n*e)!==Kc)throw new Error("invZ was invalid");return new tl(i,a)}},{key:"fromRistrettoBytes",value:function(){Qc()}},{key:"toRistrettoBytes",value:function(){Qc()}},{key:"fromRistrettoHash",value:function(){Qc()}}],[{key:"fromAffine",value:function(t){if(!(t instanceof tl))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(tl.ZERO)?e.ZERO:new e(t.x,t.y,Kc,cl(t.x*t.y))}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jc.P,r=new Array(e.length),n=ll(e.reduce((function(e,n,i){return n===Vc?e:(r[i]=e,cl(e*n,t))}),Kc),t);return e.reduceRight((function(e,n,i){return n===Vc?e:(r[i]=cl(e*r[i],t),cl(e*n,t))}),n),r}(e.map((function(e){return e.z})));return e.map((function(e,r){return e.toAffine(t[r])}))}},{key:"normalizeZ",value:function(e){return this.toAffineBatch(e).map(this.fromAffine)}}]),e}();function Zc(e){if(!(e instanceof Yc))throw new TypeError("ExtendedPoint expected")}function Qc(){throw new Error("Legacy method: switch to RistrettoPoint")}Yc.BASE=new Yc(Jc.Gx,Jc.Gy,Kc,cl(Jc.Gx*Jc.Gy)),Yc.ZERO=new Yc(Vc,Kc,Kc,Vc);var el=new WeakMap,tl=function(){function e(t,r){a(this,e),this.x=t,this.y=r}var t;return s(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,el.delete(this)}},{key:"toRawBytes",value:function(){var e=sl(this.y);return e[31]|=this.x&Kc?128:0,e}},{key:"toHex",value:function(){return il(this.toRawBytes())}},{key:"toX25519",value:function(){var e=this.y;return sl(cl((Kc+e)*ll(Kc-e)))}},{key:"isTorsionFree",value:function(){return Yc.fromAffine(this).isTorsionFree()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(cl(-this.x),this.y)}},{key:"add",value:function(e){return Yc.fromAffine(this).add(Yc.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Yc.fromAffine(this).multiply(e,this).toAffine()}}],[{key:"fromHex",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Jc.d,i=Jc.P,a=(t=pl(t,32)).slice();a[31]=-129&t[31];var o=ul(a);if(r&&o>=i)throw new Error("Expected 0 < hex < P");if(!r&&o>=Xc)throw new Error("Expected 0 < hex < 2**256");var s=cl(o*o),u=cl(s-Kc),c=cl(n*s+Kc),l=function(e,t){var r=cl(t*t*t),n=function(e){var t=Jc.P,r=BigInt(5),n=BigInt(10),i=BigInt(20),a=BigInt(40),o=BigInt(80),s=e*e%t*e%t,u=fl(s,qc)*s%t,c=fl(u,Kc)*e%t,l=fl(c,r)*c%t,f=fl(l,n)*l%t,h=fl(f,i)*f%t,d=fl(h,a)*h%t,p=fl(d,o)*d%t,v=fl(p,o)*d%t,y=fl(v,n)*l%t;return{pow_p_5_8:fl(y,qc)*e%t,b2:s}}(e*cl(r*r*t)).pow_p_5_8,i=cl(e*r*n),a=cl(t*i*i),o=i,s=cl(i*$c),u=a===e,c=a===cl(-e),l=a===cl(-e*$c);return u&&(i=o),(c||l)&&(i=s),(cl(i)&Kc)===Kc&&(i=cl(-i)),{isValid:u||c,value:i}}(u,c),f=l.isValid,h=l.value;if(!f)throw new Error("Point.fromHex: invalid y coordinate");var d=(h&Kc)===Kc;return 0!=(128&t[31])!==d&&(h=cl(-h)),new e(h,o)}},{key:"fromPrivateKey",value:(t=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yl(t);case 2:return e.abrupt("return",e.sent.point);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();tl.BASE=new tl(Jc.Gx,Jc.Gy),tl.ZERO=new tl(Vc,Kc);var rl=function(){function e(t,r){a(this,e),this.r=t,this.s=r,this.assertValidity()}return s(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!(e instanceof tl))throw new Error("Expected Point instance");return vl(t,Jc.l,!1),this}},{key:"toRawBytes",value:function(){var e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(sl(this.s),32),e}},{key:"toHex",value:function(){return il(this.toRawBytes())}}],[{key:"fromHex",value:function(t){var r=pl(t,64);return new e(tl.fromHex(r.slice(0,32),!1),ul(r.slice(32,64)))}}]),e}(),nl=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function il(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");for(var t="",r=0;r<e.length;r++)t+=nl[e[r]];return t}function al(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+r(e));if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++){var i=2*n,a=e.slice(i,i+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ol(e){return al(e.toString(16).padStart(64,"0"))}function sl(e){return ol(e).reverse()}function ul(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+il(Uint8Array.from(e).reverse()))}function cl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jc.P,r=e%t;return r>=Vc?r:t+r}function ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jc.P;if(e===Vc||t<=Vc)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var r=cl(e,t),n=t,i=Vc,a=Kc;r!==Vc;){var o=n%r,s=i-a*(n/r);n=r,r=o,i=a,a=s}if(n!==Kc)throw new Error("invert: does not exist");return cl(i,t)}function fl(e,t){for(var r=Jc.P,n=e;t-- >Vc;)n*=n,n%=r;return n}function hl(){return dl.apply(this,arguments)}function dl(){return dl=i(Wt.mark((function e(){var t,r=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl.sha512(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];for(var n=t.reduce((function(e,t){return e+t.length}),0),i=new Uint8Array(n),a=0,o=0;a<t.length;a++){var s=t[a];i.set(s,o),o+=s.length}return i}.apply(void 0,r));case 2:return t=e.sent,e.abrupt("return",cl(ul(t),Jc.l));case 4:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e,t){var r=e instanceof Uint8Array?Uint8Array.from(e):al(e);if("number"==typeof t&&r.length!==t)throw new Error("Expected ".concat(t," bytes"));return r}function vl(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(Vc<e)return e}else if(Vc<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function yl(e){return gl.apply(this,arguments)}function gl(){return gl=i(Wt.mark((function e(t){var r,n,i,a,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(32===(t="bigint"==typeof t||"number"==typeof t?ol(vl(t,Xc)):pl(t)).length){e.next=2;break}throw new Error("Expected 32 bytes");case 2:return e.next=4,wl.sha512(t);case 4:return r=e.sent,(i=r.slice(0,32))[0]&=248,i[31]&=127,i[31]|=64,n=i,a=r.slice(32,64),o=cl(ul(n),Jc.l),s=tl.BASE.multiply(o),u=s.toRawBytes(),e.abrupt("return",{head:n,prefix:a,scalar:o,point:s,pointBytes:u});case 8:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}tl.BASE._setWindowSize(8);var bl,ml={node:zc,web:"object"==("undefined"==typeof self?"undefined":r(self))&&"crypto"in self?self.crypto:void 0},wl={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:il,getExtendedPublicKey:yl,mod:cl,invert:ll,hashToPrivateScalar:function(e){if((e=pl(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");var t=cl(ul(e),Jc.l);if(t===Vc||t===Kc)throw new Error("Invalid private key");return t},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(ml.web)return ml.web.getRandomValues(new Uint8Array(e));if(ml.node){var t=ml.node.randomBytes;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return wl.randomBytes(32)},sha512:(bl=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ml.web){e.next=5;break}return e.next=3,ml.web.subtle.digest("SHA-512",t.buffer);case 3:return r=e.sent,e.abrupt("return",new Uint8Array(r));case 5:if(!ml.node){e.next=7;break}return e.abrupt("return",Uint8Array.from(ml.node.createHash("sha512").update(t).digest()));case 7:throw new Error("The environment doesn't have sha512 function");case 8:case"end":return e.stop()}}),e)}))),function(e){return bl.apply(this,arguments)}),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl.BASE,r=t.equals(tl.BASE)?t:new tl(t.x,t.y);return r._setWindowSize(e),r.multiply(qc),r}},xl=self.crypto;if(!xl.getRandomValues)throw new Error('Browser does not provide "crypto.getRandomValues".');var _l,kl,Sl,El={generateKeyPair:function(){return i(Wt.mark((function e(){var t,r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Uint8Array(32),xl.getRandomValues(t),e.next=4,Il(t);case 4:return r=e.sent,e.abrupt("return",(t.fill(0),r));case 6:case"end":return e.stop()}}),e)})))()},generateKeyPairFromSeed:Il,sign:(Sl=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=i(Wt.mark((function e(t,r){var n,i,a,o,s,u,c;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pl(t),e.next=3,yl(r);case 3:return n=e.sent,i=n.prefix,a=n.scalar,o=n.pointBytes,e.next=9,hl(i,t);case 9:return s=e.sent,u=tl.BASE.multiply(s),e.t0=cl,e.t1=s,e.next=15,hl(u.toRawBytes(),o,t);case 15:return e.t2=e.sent,e.t3=a,e.t4=e.t2*e.t3,e.t5=e.t1+e.t4,e.t6=Jc.l,c=(0,e.t0)(e.t5,e.t6),e.abrupt("return",new rl(u,c).toRawBytes());case 22:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(r,t.slice(0,32)));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return Sl.apply(this,arguments)}),verify:(kl=i(Wt.mark((function e(t,r,n){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=i(Wt.mark((function e(t,r,n){var i,a,o,s,u,c;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pl(r),n instanceof tl||(n=tl.fromHex(n,!1)),i=t instanceof rl?t.assertValidity():rl.fromHex(t),a=i.r,o=i.s,s=Yc.BASE.multiplyUnsafe(o),e.next=7,hl(a.toRawBytes(),n.toRawBytes(),r);case 7:return u=e.sent,c=Yc.fromAffine(n).multiplyUnsafe(u),e.abrupt("return",Yc.fromAffine(a).add(c).subtract(s).multiplyUnsafe(Jc.h).equals(Yc.ZERO));case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()(n,r,t));case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return kl.apply(this,arguments)}),sha256digest:(_l=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.abrupt("return",xl.subtle.digest("SHA-256",r));case 2:case"end":return e.stop()}}),e)}))),function(e){return _l.apply(this,arguments)})};function Il(e){return Al.apply(this,arguments)}
/*!
   * Copyright (c) 2018-2022 Digital Bazaar, Inc. All rights reserved.
   */function Al(){return Al=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yl(t);case 2:return e.abrupt("return",e.sent.pointBytes);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:return r=e.sent,n=new Uint8Array(64),e.abrupt("return",(n.set(t),n.set(r,t.length),{publicKey:r,secretKey:n}));case 5:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}var Tl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.controller,i=t.revoked;a(this,e),this.id=r,this.controller=n,this.revoked=i}var t,r,n;return s(e,[{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKey,r=void 0!==t&&t,n=e.privateKey,i=void 0!==n&&n;if(!r&&!i)throw new Error('Export requires specifying either "publicKey" or "privateKey".');var a={id:this.id,type:this.type,controller:this.controller};return this.revoked&&(a.revoked=this.revoked),a}},{key:"fingerprint",value:function(){throw new Error("Abstract method, must be implemented in subclass.")}},{key:"verifyFingerprint",value:function(){throw new Error("Abstract method, must be implemented in subclass.")}},{key:"signer",value:function(){return{sign:function(e){return i(Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw v(e),new Error("Abstract method, must be implemented in subclass.");case 2:case"end":return t.stop()}}),t)})))()}}}},{key:"verifier",value:function(){return{verify:function(e){return i(Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw v(e),new Error("Abstract method, must be implemented in subclass.");case 2:case"end":return t.stop()}}),t)})))()}}}}],[{key:"generate",value:(n=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Abstract method, must be implemented in subclass.");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"fromKeyDocument",value:(r=i(Wt.mark((function e(){var t,r,n,i,a,o,s=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.document,n=t.checkContext,i=void 0===n||n,a=t.checkRevoked,o=void 0===a||a,r){e.next=3;break}throw new TypeError('The "document" parameter is required.');case 3:if(!i){e.next=6;break}if([].concat(r["@context"]).includes(this.SUITE_CONTEXT)){e.next=6;break}throw new Error('Key document does not contain required context "'+this.SUITE_CONTEXT+'".');case 6:if(!o||!r.revoked){e.next=8;break}throw new Error('Key has been revoked since: "'.concat(r.revoked,'".'));case 8:return e.abrupt("return",this.from(r));case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"from",value:(t=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Abstract method from() must be implemented in subclass.");case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();Tl.SUITE_CONTEXT="INVALID LDKeyPair CONTEXT";
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
var Pl=new Uint8Array([237,1]),Ol=new Uint8Array([128,38]),Cl=function(e){c(f,e);var r,n,o,u,l=m(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,f),(e=l.call(this,t)).type="Ed25519VerificationKey2020";var r=t.publicKeyMultibase,n=t.privateKeyMultibase;if(!r)throw new TypeError('The "publicKeyMultibase" property is required.');if(!r||!Ml(r,Pl))throw new Error('"publicKeyMultibase" has invalid header bytes: "'.concat(r,'".'));if(n&&!Ml(n,Ol))throw new Error('"privateKeyMultibase" has invalid header bytes.');return e.publicKeyMultibase=r,e.privateKeyMultibase=n,e.controller&&!e.id&&(e.id="".concat(e.controller,"#").concat(e.fingerprint())),e}return s(f,[{key:"_publicKeyBuffer",get:function(){if(this.publicKeyMultibase)return Dc(this.publicKeyMultibase.substr(1)).slice(Pl.length)}},{key:"_privateKeyBuffer",get:function(){if(this.privateKeyMultibase)return Dc(this.privateKeyMultibase.substr(1)).slice(Ol.length)}},{key:"fingerprint",value:function(){return this.publicKeyMultibase}},{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKey,r=void 0!==t&&t,n=e.privateKey,i=void 0!==n&&n,a=e.includeContext,o=void 0!==a&&a;if(!r&&!i)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');var s={id:this.id,type:this.type};return o&&(s["@context"]=f.SUITE_CONTEXT),this.controller&&(s.controller=this.controller),r&&(s.publicKeyMultibase=this.publicKeyMultibase),i&&(s.privateKeyMultibase=this.privateKeyMultibase),this.revoked&&(s.revoked=this.revoked),s}},{key:"toJwk",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKey,r=void 0===t||t,n=e.privateKey,i=void 0!==n&&n;if(!r&&!i)throw TypeError('Either a "publicKey" or a "privateKey" is required.');var a={crv:"Ed25519",kty:"OKP"};return r&&(a.x=Fc(this._publicKeyBuffer)),i&&(a.d=Fc(this._privateKeyBuffer)),a}},{key:"jwkThumbprint",value:(u=i(Wt.mark((function e(){var t,r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t='{"crv":"Ed25519","kty":"OKP","x":"'.concat(Fc(this._publicKeyBuffer),'"}'),r=(new TextEncoder).encode(t),e.t0=Fc,e.t1=Uint8Array,e.next=5,El.sha256digest({data:r});case 5:return e.t2=e.sent,e.t3=new e.t1(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"toJsonWebKey2020",value:(o=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.controller+"#",e.next=3,this.jwkThumbprint();case 3:return e.t1=e.sent,e.t2=e.t0+e.t1,e.t3=this.controller,e.t4=this.toJwk({publicKey:!0}),e.abrupt("return",{"@context":"https://w3id.org/security/jws/v1",id:e.t2,type:"JsonWebKey2020",controller:e.t3,publicKeyJwk:e.t4});case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"verifyFingerprint",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fingerprint;if("string"!=typeof r||"z"!==r[0])return{error:new Error('"fingerprint" must be a multibase encoded string.'),valid:!1};try{if(!(e=Dc(r.substr(1))))throw new TypeError("Invalid encoding of fingerprint.")}catch(r){return{error:r,valid:!1}}var n=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(this._publicKeyBuffer,e.slice(2)),i=e[0]===Pl[0]&&e[1]===Pl[1]&&n;return i?{valid:i}:{error:new Error("The fingerprint does not match the public key."),valid:!1}}},{key:"signer",value:function(){var e=this._privateKeyBuffer;return{sign:function(t){return i(Wt.mark((function r(){var n;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.data,e){r.next=3;break}throw new Error("A private key is not available for signing.");case 3:return r.abrupt("return",El.sign(e,n));case 4:case"end":return r.stop()}}),r)})))()},id:this.id}}},{key:"verifier",value:function(){var e=this._publicKeyBuffer;return{verify:function(t){return i(Wt.mark((function r(){var n,i;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.data,i=t.signature,e){r.next=3;break}throw new Error("A public key is not available for verifying.");case 3:return r.abrupt("return",El.verify(e,n,i));case 4:case"end":return r.stop()}}),r)})))()},id:this.id}}}],[{key:"from",value:(n=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","Ed25519VerificationKey2018"===t.type?f.fromEd25519VerificationKey2018(t):"JsonWebKey2020"===t.type?f.fromJsonWebKey2020(t):new f(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"fromEd25519VerificationKey2018",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyPair,r=Nl(Pl,Dc(t.publicKeyBase58)),n=new f({id:t.id,controller:t.controller,publicKeyMultibase:r});return t.privateKeyBase58&&(n.privateKeyMultibase=Nl(Ol,Dc(t.privateKeyBase58))),n}},{key:"fromJsonWebKey2020",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.type,n=e.controller,i=e.publicKeyJwk;if("JsonWebKey2020"!==r)throw new TypeError('Invalid key type: "'.concat(r,'".'));if(!i)throw new TypeError('"publicKeyJwk" property is required.');var a=i.kty,o=i.crv;if("OKP"!==a)throw new TypeError('"kty" is required to be "OKP".');if("Ed25519"!==o)throw new TypeError('"crv" is required to be "Ed25519".');var s=i.x,u=Nl(Pl,function(e){var t=e.length,r=t%4;if(1===r)throw new Error("Illegal base64 string.");var n=0;r>0&&(t+=n=4-r);for(var i,a,o,s,u=new Uint8Array(t/4*3-n),c=0,l=0;c<t;)i=Uc[e.charCodeAt(c++)-45],a=Uc[e.charCodeAt(c++)-45],u[l++]=i<<2|a>>4,c<e.length&&(o=Uc[e.charCodeAt(c++)-45],u[l++]=(15&a)<<4|o>>2,c<e.length&&(s=Uc[e.charCodeAt(c++)-45],u[l++]=(3&o)<<6|s));return u}(s));return f.from({id:t,controller:n,publicKeyMultibase:u})}},{key:"generate",value:(r=i(Wt.mark((function e(){var r,n,i,a,o,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>0&&void 0!==u[0]?u[0]:{},n=r.seed,i=y(r,Gt),!n){e.next=7;break}return e.next=4,El.generateKeyPairFromSeed(n);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,El.generateKeyPair();case 9:e.t0=e.sent;case 10:return a=e.t0,o=Nl(Pl,a.publicKey),s=Nl(Ol,a.secretKey),e.abrupt("return",new f(t({publicKeyMultibase:o,privateKeyMultibase:s},i)));case 13:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"fromFingerprint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fingerprint;return new f({publicKeyMultibase:t})}}]),f}(Tl);function Ml(e,t){if("string"!=typeof e||"z"!==e[0])return!1;var r=Dc(e.slice(1));return t.every((function(e,t){return r[t]===e}))}function Nl(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),"z"+jc(r)}Cl.suite="Ed25519VerificationKey2020",Cl.SUITE_CONTEXT="https://w3id.org/security/suites/ed25519-2020/v1";var Rl={exports:{}},Ll={exports:{}},jl=Yt(Hc);!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var a=t(),o=t([1]),s=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,i){var a,o=0;for(a=0;a<i;a++)o|=e[t+a]^r[n+a];return(1&o-1>>>8)-1}function v(e,t,r,n){return p(e,t,r,n,16)}function y(e,t,r,n){return p(e,t,r,n,32)}function g(e,t,r,n){!function(e,t,r,n){for(var i,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,v=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=a,_=o,k=s,S=u,E=c,I=l,A=f,T=h,P=d,O=p,C=v,M=y,N=g,R=b,L=m,j=w,D=0;D<20;D+=2)x^=(i=(N^=(i=(P^=(i=(E^=(i=x+N|0)<<7|i>>>25)+x|0)<<9|i>>>23)+E|0)<<13|i>>>19)+P|0)<<18|i>>>14,I^=(i=(_^=(i=(R^=(i=(O^=(i=I+_|0)<<7|i>>>25)+I|0)<<9|i>>>23)+O|0)<<13|i>>>19)+R|0)<<18|i>>>14,C^=(i=(A^=(i=(k^=(i=(L^=(i=C+A|0)<<7|i>>>25)+C|0)<<9|i>>>23)+L|0)<<13|i>>>19)+k|0)<<18|i>>>14,j^=(i=(M^=(i=(T^=(i=(S^=(i=j+M|0)<<7|i>>>25)+j|0)<<9|i>>>23)+S|0)<<13|i>>>19)+T|0)<<18|i>>>14,x^=(i=(S^=(i=(k^=(i=(_^=(i=x+S|0)<<7|i>>>25)+x|0)<<9|i>>>23)+_|0)<<13|i>>>19)+k|0)<<18|i>>>14,I^=(i=(E^=(i=(T^=(i=(A^=(i=I+E|0)<<7|i>>>25)+I|0)<<9|i>>>23)+A|0)<<13|i>>>19)+T|0)<<18|i>>>14,C^=(i=(O^=(i=(P^=(i=(M^=(i=C+O|0)<<7|i>>>25)+C|0)<<9|i>>>23)+M|0)<<13|i>>>19)+P|0)<<18|i>>>14,j^=(i=(L^=(i=(R^=(i=(N^=(i=j+L|0)<<7|i>>>25)+j|0)<<9|i>>>23)+N|0)<<13|i>>>19)+R|0)<<18|i>>>14;x=x+a|0,_=_+o|0,k=k+s|0,S=S+u|0,E=E+c|0,I=I+l|0,A=A+f|0,T=T+h|0,P=P+d|0,O=O+p|0,C=C+v|0,M=M+y|0,N=N+g|0,R=R+b|0,L=L+m|0,j=j+w|0,e[0]=x>>>0&255,e[1]=x>>>8&255,e[2]=x>>>16&255,e[3]=x>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=k>>>0&255,e[9]=k>>>8&255,e[10]=k>>>16&255,e[11]=k>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=E>>>0&255,e[17]=E>>>8&255,e[18]=E>>>16&255,e[19]=E>>>24&255,e[20]=I>>>0&255,e[21]=I>>>8&255,e[22]=I>>>16&255,e[23]=I>>>24&255,e[24]=A>>>0&255,e[25]=A>>>8&255,e[26]=A>>>16&255,e[27]=A>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=O>>>0&255,e[37]=O>>>8&255,e[38]=O>>>16&255,e[39]=O>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=M>>>0&255,e[45]=M>>>8&255,e[46]=M>>>16&255,e[47]=M>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=R>>>0&255,e[53]=R>>>8&255,e[54]=R>>>16&255,e[55]=R>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=j>>>0&255,e[61]=j>>>8&255,e[62]=j>>>16&255,e[63]=j>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,v=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,m=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,x=0;x<20;x+=2)a^=(i=(g^=(i=(d^=(i=(c^=(i=a+g|0)<<7|i>>>25)+a|0)<<9|i>>>23)+c|0)<<13|i>>>19)+d|0)<<18|i>>>14,l^=(i=(o^=(i=(b^=(i=(p^=(i=l+o|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+b|0)<<18|i>>>14,v^=(i=(f^=(i=(s^=(i=(m^=(i=v+f|0)<<7|i>>>25)+v|0)<<9|i>>>23)+m|0)<<13|i>>>19)+s|0)<<18|i>>>14,w^=(i=(y^=(i=(h^=(i=(u^=(i=w+y|0)<<7|i>>>25)+w|0)<<9|i>>>23)+u|0)<<13|i>>>19)+h|0)<<18|i>>>14,a^=(i=(u^=(i=(s^=(i=(o^=(i=a+u|0)<<7|i>>>25)+a|0)<<9|i>>>23)+o|0)<<13|i>>>19)+s|0)<<18|i>>>14,l^=(i=(c^=(i=(h^=(i=(f^=(i=l+c|0)<<7|i>>>25)+l|0)<<9|i>>>23)+f|0)<<13|i>>>19)+h|0)<<18|i>>>14,v^=(i=(p^=(i=(d^=(i=(y^=(i=v+p|0)<<7|i>>>25)+v|0)<<9|i>>>23)+y|0)<<13|i>>>19)+d|0)<<18|i>>>14,w^=(i=(m^=(i=(b^=(i=(g^=(i=w+m|0)<<7|i>>>25)+w|0)<<9|i>>>23)+g|0)<<13|i>>>19)+b|0)<<18|i>>>14;e[0]=a>>>0&255,e[1]=a>>>8&255,e[2]=a>>>16&255,e[3]=a>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=v>>>0&255,e[9]=v>>>8&255,e[10]=v>>>16&255,e[11]=v>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=f>>>0&255,e[17]=f>>>8&255,e[18]=f>>>16&255,e[19]=f>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var m=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,i,a,o){var s,u,c=new Uint8Array(16),l=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=a[u];for(;i>=64;){for(g(l,c,o,m),u=0;u<64;u++)e[t+u]=r[n+u]^l[u];for(s=1,u=8;u<16;u++)s=s+(255&c[u])|0,c[u]=255&s,s>>>=8;i-=64,t+=64,n+=64}if(i>0)for(g(l,c,o,m),u=0;u<i;u++)e[t+u]=r[n+u]^l[u];return 0}function x(e,t,r,n,i){var a,o,s=new Uint8Array(16),u=new Uint8Array(64);for(o=0;o<16;o++)s[o]=0;for(o=0;o<8;o++)s[o]=n[o];for(;r>=64;){for(g(u,s,i,m),o=0;o<64;o++)e[t+o]=u[o];for(a=1,o=8;o<16;o++)a=a+(255&s[o])|0,s[o]=255&a,a>>>=8;r-=64,t+=64}if(r>0)for(g(u,s,i,m),o=0;o<r;o++)e[t+o]=u[o];return 0}function _(e,t,r,n,i){var a=new Uint8Array(32);b(a,n,i,m);for(var o=new Uint8Array(8),s=0;s<8;s++)o[s]=n[s+16];return x(e,t,r,o,a)}function k(e,t,r,n,i,a,o){var s=new Uint8Array(32);b(s,a,o,m);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=a[c+16];return w(e,t,r,n,i,u,s)}var S=function(e){var t,r,n,i,a,o,s,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),a=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|a<<12),this.r[5]=a>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(a>>>14|o<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|s<<5),u=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function E(e,t,r,n,i,a){var o=new S(a);return o.update(r,n,i),o.finish(e,t),0}function I(e,t,r,n,i,a){var o=new Uint8Array(16);return E(o,0,r,n,i,a),v(e,t,o,0)}function A(e,t,r,n,i){var a;if(r<32)return-1;for(k(e,0,t,0,r,n,i),E(e,16,e,32,r-32,e),a=0;a<16;a++)e[a]=0;return 0}function T(e,t,r,n,i){var a,o=new Uint8Array(32);if(r<32)return-1;if(_(o,0,32,n,i),0!==I(t,16,t,32,r-32,o))return-1;for(k(e,0,t,0,r,n,i),a=0;a<32;a++)e[a]=0;return 0}function P(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function O(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function C(e,t,r){for(var n,i=~(r-1),a=0;a<16;a++)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function M(e,r){var n,i,a,o=t(),s=t();for(n=0;n<16;n++)s[n]=r[n];for(O(s),O(s),O(s),i=0;i<2;i++){for(o[0]=s[0]-65517,n=1;n<15;n++)o[n]=s[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),a=o[15]>>16&1,o[14]&=65535,C(s,o,1-a)}for(n=0;n<16;n++)e[2*n]=255&s[n],e[2*n+1]=s[n]>>8}function N(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),y(r,0,n,0)}function R(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function j(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function B(e,t,r){var n,i,a=0,o=0,s=0,u=0,c=0,l=0,f=0,h=0,d=0,p=0,v=0,y=0,g=0,b=0,m=0,w=0,x=0,_=0,k=0,S=0,E=0,I=0,A=0,T=0,P=0,O=0,C=0,M=0,N=0,R=0,L=0,j=r[0],D=r[1],B=r[2],U=r[3],F=r[4],z=r[5],H=r[6],V=r[7],K=r[8],q=r[9],W=r[10],G=r[11],J=r[12],X=r[13],$=r[14],Y=r[15];a+=(n=t[0])*j,o+=n*D,s+=n*B,u+=n*U,c+=n*F,l+=n*z,f+=n*H,h+=n*V,d+=n*K,p+=n*q,v+=n*W,y+=n*G,g+=n*J,b+=n*X,m+=n*$,w+=n*Y,o+=(n=t[1])*j,s+=n*D,u+=n*B,c+=n*U,l+=n*F,f+=n*z,h+=n*H,d+=n*V,p+=n*K,v+=n*q,y+=n*W,g+=n*G,b+=n*J,m+=n*X,w+=n*$,x+=n*Y,s+=(n=t[2])*j,u+=n*D,c+=n*B,l+=n*U,f+=n*F,h+=n*z,d+=n*H,p+=n*V,v+=n*K,y+=n*q,g+=n*W,b+=n*G,m+=n*J,w+=n*X,x+=n*$,_+=n*Y,u+=(n=t[3])*j,c+=n*D,l+=n*B,f+=n*U,h+=n*F,d+=n*z,p+=n*H,v+=n*V,y+=n*K,g+=n*q,b+=n*W,m+=n*G,w+=n*J,x+=n*X,_+=n*$,k+=n*Y,c+=(n=t[4])*j,l+=n*D,f+=n*B,h+=n*U,d+=n*F,p+=n*z,v+=n*H,y+=n*V,g+=n*K,b+=n*q,m+=n*W,w+=n*G,x+=n*J,_+=n*X,k+=n*$,S+=n*Y,l+=(n=t[5])*j,f+=n*D,h+=n*B,d+=n*U,p+=n*F,v+=n*z,y+=n*H,g+=n*V,b+=n*K,m+=n*q,w+=n*W,x+=n*G,_+=n*J,k+=n*X,S+=n*$,E+=n*Y,f+=(n=t[6])*j,h+=n*D,d+=n*B,p+=n*U,v+=n*F,y+=n*z,g+=n*H,b+=n*V,m+=n*K,w+=n*q,x+=n*W,_+=n*G,k+=n*J,S+=n*X,E+=n*$,I+=n*Y,h+=(n=t[7])*j,d+=n*D,p+=n*B,v+=n*U,y+=n*F,g+=n*z,b+=n*H,m+=n*V,w+=n*K,x+=n*q,_+=n*W,k+=n*G,S+=n*J,E+=n*X,I+=n*$,A+=n*Y,d+=(n=t[8])*j,p+=n*D,v+=n*B,y+=n*U,g+=n*F,b+=n*z,m+=n*H,w+=n*V,x+=n*K,_+=n*q,k+=n*W,S+=n*G,E+=n*J,I+=n*X,A+=n*$,T+=n*Y,p+=(n=t[9])*j,v+=n*D,y+=n*B,g+=n*U,b+=n*F,m+=n*z,w+=n*H,x+=n*V,_+=n*K,k+=n*q,S+=n*W,E+=n*G,I+=n*J,A+=n*X,T+=n*$,P+=n*Y,v+=(n=t[10])*j,y+=n*D,g+=n*B,b+=n*U,m+=n*F,w+=n*z,x+=n*H,_+=n*V,k+=n*K,S+=n*q,E+=n*W,I+=n*G,A+=n*J,T+=n*X,P+=n*$,O+=n*Y,y+=(n=t[11])*j,g+=n*D,b+=n*B,m+=n*U,w+=n*F,x+=n*z,_+=n*H,k+=n*V,S+=n*K,E+=n*q,I+=n*W,A+=n*G,T+=n*J,P+=n*X,O+=n*$,C+=n*Y,g+=(n=t[12])*j,b+=n*D,m+=n*B,w+=n*U,x+=n*F,_+=n*z,k+=n*H,S+=n*V,E+=n*K,I+=n*q,A+=n*W,T+=n*G,P+=n*J,O+=n*X,C+=n*$,M+=n*Y,b+=(n=t[13])*j,m+=n*D,w+=n*B,x+=n*U,_+=n*F,k+=n*z,S+=n*H,E+=n*V,I+=n*K,A+=n*q,T+=n*W,P+=n*G,O+=n*J,C+=n*X,M+=n*$,N+=n*Y,m+=(n=t[14])*j,w+=n*D,x+=n*B,_+=n*U,k+=n*F,S+=n*z,E+=n*H,I+=n*V,A+=n*K,T+=n*q,P+=n*W,O+=n*G,C+=n*J,M+=n*X,N+=n*$,R+=n*Y,w+=(n=t[15])*j,o+=38*(_+=n*B),s+=38*(k+=n*U),u+=38*(S+=n*F),c+=38*(E+=n*z),l+=38*(I+=n*H),f+=38*(A+=n*V),h+=38*(T+=n*K),d+=38*(P+=n*q),p+=38*(O+=n*W),v+=38*(C+=n*G),y+=38*(M+=n*J),g+=38*(N+=n*X),b+=38*(R+=n*$),m+=38*(L+=n*Y),a=(n=(a+=38*(x+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=(a+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),a+=i-1+37*(i-1),e[0]=a,e[1]=o,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=h,e[8]=d,e[9]=p,e[10]=v,e[11]=y,e[12]=g,e[13]=b,e[14]=m,e[15]=w}function U(e,t){B(e,t,t)}function F(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)U(i,i),2!==n&&4!==n&&B(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)U(i,i),1!==n&&B(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function H(e,r,n){var i,a,o=new Uint8Array(32),u=new Float64Array(80),c=t(),l=t(),f=t(),h=t(),d=t(),p=t();for(a=0;a<31;a++)o[a]=r[a];for(o[31]=127&r[31]|64,o[0]&=248,L(u,n),a=0;a<16;a++)l[a]=u[a],h[a]=c[a]=f[a]=0;for(c[0]=h[0]=1,a=254;a>=0;--a)C(c,l,i=o[a>>>3]>>>(7&a)&1),C(f,h,i),j(d,c,f),D(c,c,f),j(f,l,h),D(l,l,h),U(h,d),U(p,c),B(c,f,c),B(f,l,d),j(d,c,f),D(c,c,f),U(l,c),D(f,h,p),B(c,f,s),j(c,c,h),B(f,f,c),B(c,h,p),B(h,l,u),U(l,d),C(c,l,i),C(f,h,i);for(a=0;a<16;a++)u[a+16]=c[a],u[a+32]=f[a],u[a+48]=l[a],u[a+64]=h[a];var v=u.subarray(32),y=u.subarray(16);return F(v,v),B(y,y,v),M(e,y),0}function V(e,t){return H(e,t,i)}function K(e,t){return r(t,32),V(e,t)}function q(e,t,r){var i=new Uint8Array(32);return H(i,r,t),b(e,n,i,m)}S.prototype.blocks=function(e,t,r){for(var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_=this.fin?0:2048,k=this.h[0],S=this.h[1],E=this.h[2],I=this.h[3],A=this.h[4],T=this.h[5],P=this.h[6],O=this.h[7],C=this.h[8],M=this.h[9],N=this.r[0],R=this.r[1],L=this.r[2],j=this.r[3],D=this.r[4],B=this.r[5],U=this.r[6],F=this.r[7],z=this.r[8],H=this.r[9];r>=16;)h=f=0,h+=(k+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*N,h+=(S+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*H),h+=(E+=8191&(i>>>10|(a=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*z),h+=(I+=8191&(a>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),f=(h+=(A+=8191&(o>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*U))>>>13,h&=8191,h+=(T+=s>>>1&8191)*(5*B),h+=(P+=8191&(s>>>14|(u=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),h+=(O+=8191&(u>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*j),h+=(C+=8191&(c>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),d=f+=(h+=(M+=l>>>5|_)*(5*R))>>>13,d+=k*R,d+=S*N,d+=E*(5*H),d+=I*(5*z),f=(d+=A*(5*F))>>>13,d&=8191,d+=T*(5*U),d+=P*(5*B),d+=O*(5*D),d+=C*(5*j),f+=(d+=M*(5*L))>>>13,d&=8191,p=f,p+=k*L,p+=S*R,p+=E*N,p+=I*(5*H),f=(p+=A*(5*z))>>>13,p&=8191,p+=T*(5*F),p+=P*(5*U),p+=O*(5*B),p+=C*(5*D),v=f+=(p+=M*(5*j))>>>13,v+=k*j,v+=S*L,v+=E*R,v+=I*N,f=(v+=A*(5*H))>>>13,v&=8191,v+=T*(5*z),v+=P*(5*F),v+=O*(5*U),v+=C*(5*B),y=f+=(v+=M*(5*D))>>>13,y+=k*D,y+=S*j,y+=E*L,y+=I*R,f=(y+=A*N)>>>13,y&=8191,y+=T*(5*H),y+=P*(5*z),y+=O*(5*F),y+=C*(5*U),g=f+=(y+=M*(5*B))>>>13,g+=k*B,g+=S*D,g+=E*j,g+=I*L,f=(g+=A*R)>>>13,g&=8191,g+=T*N,g+=P*(5*H),g+=O*(5*z),g+=C*(5*F),b=f+=(g+=M*(5*U))>>>13,b+=k*U,b+=S*B,b+=E*D,b+=I*j,f=(b+=A*L)>>>13,b&=8191,b+=T*R,b+=P*N,b+=O*(5*H),b+=C*(5*z),m=f+=(b+=M*(5*F))>>>13,m+=k*F,m+=S*U,m+=E*B,m+=I*D,f=(m+=A*j)>>>13,m&=8191,m+=T*L,m+=P*R,m+=O*N,m+=C*(5*H),w=f+=(m+=M*(5*z))>>>13,w+=k*z,w+=S*F,w+=E*U,w+=I*B,f=(w+=A*D)>>>13,w&=8191,w+=T*j,w+=P*L,w+=O*R,w+=C*N,x=f+=(w+=M*(5*H))>>>13,x+=k*H,x+=S*z,x+=E*F,x+=I*U,f=(x+=A*B)>>>13,x&=8191,x+=T*D,x+=P*j,x+=O*L,x+=C*R,k=h=8191&(f=(f=((f+=(x+=M*N)>>>13)<<2)+f|0)+(h&=8191)|0),S=d+=f>>>=13,E=p&=8191,I=v&=8191,A=y&=8191,T=g&=8191,P=b&=8191,O=m&=8191,C=w&=8191,M=x&=8191,t+=16,r-=16;this.h[0]=k,this.h[1]=S,this.h[2]=E,this.h[3]=I,this.h[4]=A,this.h[5]=T,this.h[6]=P,this.h[7]=O,this.h[8]=C,this.h[9]=M},S.prototype.finish=function(e,t){var r,n,i,a,o=new Uint16Array(10);if(this.leftover){for(a=this.leftover,this.buffer[a++]=1;a<16;a++)this.buffer[a]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,a=2;a<10;a++)this.h[a]+=r,r=this.h[a]>>>13,this.h[a]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,a=1;a<10;a++)o[a]=this.h[a]+r,r=o[a]>>>13,o[a]&=8191;for(o[9]-=8192,n=(1^r)-1,a=0;a<10;a++)o[a]&=n;for(n=~n,a=0;a<10;a++)this.h[a]=this.h[a]&n|o[a];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,a=1;a<8;a++)i=(this.h[a]+this.pad[a]|0)+(i>>>16)|0,this.h[a]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},S.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var W=A,G=T,J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function X(e,t,r,n){for(var i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O=new Int32Array(16),C=new Int32Array(16),M=e[0],N=e[1],R=e[2],L=e[3],j=e[4],D=e[5],B=e[6],U=e[7],F=t[0],z=t[1],H=t[2],V=t[3],K=t[4],q=t[5],W=t[6],G=t[7],X=0;n>=128;){for(_=0;_<16;_++)k=8*_+X,O[_]=r[k+0]<<24|r[k+1]<<16|r[k+2]<<8|r[k+3],C[_]=r[k+4]<<24|r[k+5]<<16|r[k+6]<<8|r[k+7];for(_=0;_<80;_++)if(i=M,a=N,o=R,s=L,u=j,c=D,l=B,h=F,d=z,p=H,v=V,y=K,g=q,b=W,I=65535&(E=G),A=E>>>16,T=65535&(S=U),P=S>>>16,I+=65535&(E=(K>>>14|j<<18)^(K>>>18|j<<14)^(j>>>9|K<<23)),A+=E>>>16,T+=65535&(S=(j>>>14|K<<18)^(j>>>18|K<<14)^(K>>>9|j<<23)),P+=S>>>16,I+=65535&(E=K&q^~K&W),A+=E>>>16,T+=65535&(S=j&D^~j&B),P+=S>>>16,I+=65535&(E=J[2*_+1]),A+=E>>>16,T+=65535&(S=J[2*_]),P+=S>>>16,S=O[_%16],A+=(E=C[_%16])>>>16,T+=65535&S,P+=S>>>16,T+=(A+=(I+=65535&E)>>>16)>>>16,I=65535&(E=x=65535&I|A<<16),A=E>>>16,T=65535&(S=w=65535&T|(P+=T>>>16)<<16),P=S>>>16,I+=65535&(E=(F>>>28|M<<4)^(M>>>2|F<<30)^(M>>>7|F<<25)),A+=E>>>16,T+=65535&(S=(M>>>28|F<<4)^(F>>>2|M<<30)^(F>>>7|M<<25)),P+=S>>>16,A+=(E=F&z^F&H^z&H)>>>16,T+=65535&(S=M&N^M&R^N&R),P+=S>>>16,f=65535&(T+=(A+=(I+=65535&E)>>>16)>>>16)|(P+=T>>>16)<<16,m=65535&I|A<<16,I=65535&(E=v),A=E>>>16,T=65535&(S=s),P=S>>>16,A+=(E=x)>>>16,T+=65535&(S=w),P+=S>>>16,N=i,R=a,L=o,j=s=65535&(T+=(A+=(I+=65535&E)>>>16)>>>16)|(P+=T>>>16)<<16,D=u,B=c,U=l,M=f,z=h,H=d,V=p,K=v=65535&I|A<<16,q=y,W=g,G=b,F=m,_%16==15)for(k=0;k<16;k++)S=O[k],I=65535&(E=C[k]),A=E>>>16,T=65535&S,P=S>>>16,S=O[(k+9)%16],I+=65535&(E=C[(k+9)%16]),A+=E>>>16,T+=65535&S,P+=S>>>16,w=O[(k+1)%16],I+=65535&(E=((x=C[(k+1)%16])>>>1|w<<31)^(x>>>8|w<<24)^(x>>>7|w<<25)),A+=E>>>16,T+=65535&(S=(w>>>1|x<<31)^(w>>>8|x<<24)^w>>>7),P+=S>>>16,w=O[(k+14)%16],A+=(E=((x=C[(k+14)%16])>>>19|w<<13)^(w>>>29|x<<3)^(x>>>6|w<<26))>>>16,T+=65535&(S=(w>>>19|x<<13)^(x>>>29|w<<3)^w>>>6),P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,O[k]=65535&T|P<<16,C[k]=65535&I|A<<16;I=65535&(E=F),A=E>>>16,T=65535&(S=M),P=S>>>16,S=e[0],A+=(E=t[0])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[0]=M=65535&T|P<<16,t[0]=F=65535&I|A<<16,I=65535&(E=z),A=E>>>16,T=65535&(S=N),P=S>>>16,S=e[1],A+=(E=t[1])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[1]=N=65535&T|P<<16,t[1]=z=65535&I|A<<16,I=65535&(E=H),A=E>>>16,T=65535&(S=R),P=S>>>16,S=e[2],A+=(E=t[2])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[2]=R=65535&T|P<<16,t[2]=H=65535&I|A<<16,I=65535&(E=V),A=E>>>16,T=65535&(S=L),P=S>>>16,S=e[3],A+=(E=t[3])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[3]=L=65535&T|P<<16,t[3]=V=65535&I|A<<16,I=65535&(E=K),A=E>>>16,T=65535&(S=j),P=S>>>16,S=e[4],A+=(E=t[4])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[4]=j=65535&T|P<<16,t[4]=K=65535&I|A<<16,I=65535&(E=q),A=E>>>16,T=65535&(S=D),P=S>>>16,S=e[5],A+=(E=t[5])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[5]=D=65535&T|P<<16,t[5]=q=65535&I|A<<16,I=65535&(E=W),A=E>>>16,T=65535&(S=B),P=S>>>16,S=e[6],A+=(E=t[6])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[6]=B=65535&T|P<<16,t[6]=W=65535&I|A<<16,I=65535&(E=G),A=E>>>16,T=65535&(S=U),P=S>>>16,S=e[7],A+=(E=t[7])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(A+=(I+=65535&E)>>>16)>>>16)>>>16,e[7]=U=65535&T|P<<16,t[7]=G=65535&I|A<<16,X+=128,n-=128}return n}function $(e,t,r){var n,i=new Int32Array(8),a=new Int32Array(8),o=new Uint8Array(256),s=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,X(i,a,t,r),r%=128,n=0;n<r;n++)o[n]=t[s-r+n];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,d(o,r-8,s/536870912|0,s<<3),X(i,a,o,r),n=0;n<8;n++)d(e,8*n,i[n],a[n]);return 0}function Y(e,r){var n=t(),i=t(),a=t(),o=t(),s=t(),u=t(),l=t(),f=t(),h=t();D(n,e[1],e[0]),D(h,r[1],r[0]),B(n,n,h),j(i,e[0],e[1]),j(h,r[0],r[1]),B(i,i,h),B(a,e[3],r[3]),B(a,a,c),B(o,e[2],r[2]),j(o,o,o),D(s,i,n),D(u,o,a),j(l,o,a),j(f,i,n),B(e[0],s,u),B(e[1],f,l),B(e[2],l,u),B(e[3],s,f)}function Z(e,t,r){var n;for(n=0;n<4;n++)C(e[n],t[n],r)}function Q(e,r){var n=t(),i=t(),a=t();F(a,r[2]),B(n,r[0],a),B(i,r[1],a),M(e,i),e[31]^=R(n)<<7}function ee(e,t,r){var n,i;for(P(e[0],a),P(e[1],o),P(e[2],o),P(e[3],a),i=255;i>=0;--i)Z(e,t,n=r[i/8|0]>>(7&i)&1),Y(t,e),Y(e,e),Z(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];P(n[0],l),P(n[1],f),P(n[2],o),B(n[3],l,f),ee(e,n,r)}function re(e,n,i){var a,o=new Uint8Array(64),s=[t(),t(),t(),t()];for(i||r(n,32),$(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64,te(s,o),Q(e,s),a=0;a<32;a++)n[a+32]=e[a];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)t[i]+=r-16*t[n]*ne[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ne[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ne[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ae(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function oe(e,r,n,i){var a,o,s=new Uint8Array(64),u=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),f=[t(),t(),t(),t()];$(s,i,32),s[0]&=248,s[31]&=127,s[31]|=64;var h=n+64;for(a=0;a<n;a++)e[64+a]=r[a];for(a=0;a<32;a++)e[32+a]=s[32+a];for($(c,e.subarray(32),n+32),ae(c),te(f,c),Q(e,f),a=32;a<64;a++)e[a]=i[a];for($(u,e,n+64),ae(u),a=0;a<64;a++)l[a]=0;for(a=0;a<32;a++)l[a]=c[a];for(a=0;a<32;a++)for(o=0;o<32;o++)l[a+o]+=u[a]*s[o];return ie(e.subarray(32),l),h}function se(e,r,n,i){var s,c=new Uint8Array(32),l=new Uint8Array(64),f=[t(),t(),t(),t()],d=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),s=t(),c=t(),l=t(),f=t(),d=t();return P(e[2],o),L(e[1],r),U(s,e[1]),B(c,s,u),D(s,s,e[2]),j(c,e[2],c),U(l,c),U(f,l),B(d,f,l),B(n,d,s),B(n,n,c),z(n,n),B(n,n,s),B(n,n,c),B(n,n,c),B(e[0],n,c),U(i,e[0]),B(i,i,c),N(i,s)&&B(e[0],e[0],h),U(i,e[0]),B(i,i,c),N(i,s)?-1:(R(e[0])===r[31]>>7&&D(e[0],a,e[0]),B(e[3],e[0],e[1]),0)}(d,i))return-1;for(s=0;s<n;s++)e[s]=r[s];for(s=0;s<32;s++)e[s+32]=i[s];if($(l,e,n),ae(l),ee(f,d,l),te(d,r.subarray(32)),Y(f,d),Q(c,f),n-=64,y(r,0,c,0)){for(s=0;s<n;s++)e[s]=0;return-1}for(s=0;s<n;s++)e[s]=r[s+64];return n}var ue=64,ce=32,le=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function he(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function de(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:k,crypto_stream:_,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:E,crypto_onetimeauth_verify:I,crypto_verify_16:v,crypto_verify_32:y,crypto_secretbox:A,crypto_secretbox_open:T,crypto_scalarmult:H,crypto_scalarmult_base:V,crypto_box_beforenm:q,crypto_box_afternm:W,crypto_box:function(e,t,r,n,i,a){var o=new Uint8Array(32);return q(o,i,a),W(e,t,r,n,o)},crypto_box_open:function(e,t,r,n,i,a){var o=new Uint8Array(32);return q(o,i,a),G(e,t,r,n,o)},crypto_box_keypair:K,crypto_hash:$,crypto_sign:oe,crypto_sign_keypair:re,crypto_sign_open:se,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ue,crypto_sign_PUBLICKEYBYTES:ce,crypto_sign_SECRETKEYBYTES:le,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ne,pack25519:M,unpack25519:L,M:B,A:j,S:U,Z:D,pow2523:z,add:Y,set25519:P,modL:ie,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){he(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),a=0;a<e.length;a++)n[a+32]=e[a];return A(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){he(e,t,r),fe(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),a=0;a<e.length;a++)n[a+16]=e[a];return n.length<32||0!==T(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(he(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return H(r,e,t),r},e.scalarMult.base=function(e){if(he(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return V(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var a=e.box.before(n,i);return e.secretbox(t,r,a)},e.box.before=function(e,t){he(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return q(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var a=e.box.before(n,i);return e.secretbox.open(t,r,a)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(he(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return V(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(he(e,t),t.length!==le)throw new Error("bad secret key size");var r=new Uint8Array(ue+e.length);return oe(r,e,e.length,t),r},e.sign.open=function(e,t){if(he(e,t),t.length!==ce)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=se(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),a=0;a<i.length;a++)i[a]=r[a];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(ue),a=0;a<i.length;a++)i[a]=n[a];return i},e.sign.detached.verify=function(e,t,r){if(he(e,t,r),t.length!==ue)throw new Error("bad signature size");if(r.length!==ce)throw new Error("bad public key size");var n,i=new Uint8Array(ue+e.length),a=new Uint8Array(ue+e.length);for(n=0;n<ue;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+ue]=e[n];return se(a,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(ce),t=new Uint8Array(le);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(he(e),e.length!==le)throw new Error("bad secret key size");for(var t=new Uint8Array(ce),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(he(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(ce),r=new Uint8Array(le),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=ce,e.sign.secretKeyLength=le,e.sign.seedLength=32,e.sign.signatureLength=ue,e.hash=function(e){he(e);var t=new Uint8Array(64);return $(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return he(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];de(i)})):(t=jl)&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];de(i)}))}()}(Ll.exports?Ll.exports:self.nacl=self.nacl||{});var Dl=Ll.exports;!function(e){!function(t,r){e.exports?e.exports=r(Ll.exports):t.ed2curve=r(t.nacl)}($t,(function(e){if(!e)throw new Error("tweetnacl not loaded");var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=t(),n=t([1]),i=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),a=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function o(e){var t,r;for(r=0;r<16;r++)e[r]+=65536,t=Math.floor(e[r]/65536),e[(r+1)*(r<15?1:0)]+=t-1+37*(t-1)*(15===r?1:0),e[r]-=65536*t}function s(e,t,r){for(var n,i=~(r-1),a=0;a<16;a++)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function u(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]+r[n]|0}function c(e,t,r){var n;for(n=0;n<16;n++)e[n]=t[n]-r[n]|0}function l(e,t,r){var n,i,a=new Float64Array(31);for(n=0;n<31;n++)a[n]=0;for(n=0;n<16;n++)for(i=0;i<16;i++)a[n+i]+=t[n]*r[i];for(n=0;n<15;n++)a[n]+=38*a[n+16];for(n=0;n<16;n++)e[n]=a[n];o(e),o(e)}function f(e,t){l(e,t,t)}function h(e,r){var n,i,a,u=t(),c=t();for(n=0;n<16;n++)c[n]=r[n];for(o(c),o(c),o(c),i=0;i<2;i++){for(u[0]=c[0]-65517,n=1;n<15;n++)u[n]=c[n]-65535-(u[n-1]>>16&1),u[n-1]&=65535;u[15]=c[15]-32767-(u[14]>>16&1),a=u[15]>>16&1,u[14]&=65535,s(c,u,1-a)}for(n=0;n<16;n++)e[2*n]=255&c[n],e[2*n+1]=c[n]>>8}function d(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return h(r,e),h(n,t),function(e,t,r,n){return function(e,t,r,n,i){var a,o=0;for(a=0;a<32;a++)o|=e[0+a]^r[0+a];return(1&o-1>>>8)-1}(e,0,r)}(r,0,n)}function p(e,o){var s=t(),p=t(),v=t(),y=t(),g=t(),b=t(),m=t();return function(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}(e[2],n),function(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],o),f(v,e[1]),l(y,v,i),c(v,v,e[2]),u(y,e[2],y),f(g,y),f(b,g),l(m,b,g),l(s,m,v),l(s,s,y),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)f(i,i),1!==n&&l(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(s,s),l(s,s,v),l(s,s,y),l(s,s,y),l(e[0],s,y),f(p,e[0]),l(p,p,y),d(p,v)&&l(e[0],e[0],a),f(p,e[0]),l(p,p,y),d(p,v)?-1:(function(e){var t=new Uint8Array(32);return h(t,e),1&t[0]}(e[0])===o[31]>>7&&c(e[0],r,e[0]),l(e[3],e[0],e[1]),0)}function v(e){var r=new Uint8Array(32),i=[t(),t(),t(),t()],a=t(),o=t();if(p(i,e))return null;var s=i[1];return u(a,n,s),c(o,n,s),function(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)f(i,i),2!==n&&4!==n&&l(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}(o,o),l(a,a,o),h(r,a),r}function y(t){var r,n=new Uint8Array(64),i=new Uint8Array(32);for(e.lowlevel.crypto_hash(n,t,32),n[0]&=248,n[31]&=127,n[31]|=64,r=0;r<32;r++)i[r]=n[r];for(r=0;r<64;r++)n[r]=0;return i}return{convertPublicKey:v,convertSecretKey:y,convertKeyPair:function(e){var t=v(e.publicKey);return t?{publicKey:t,secretKey:y(e.secretKey)}:null}}}))}(Rl);var Bl=Rl.exports,Ul=new Uint8Array([237,1]),Fl=new Uint8Array([128,38]),zl=new Uint8Array([236,1]),Hl=new Uint8Array([130,38]),Vl=function(e){c(f,e);var r,n,o,u,l=m(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,f),(e=l.call(this,t)).type="X25519KeyAgreementKey2020";var r=t.publicKeyMultibase,n=t.privateKeyMultibase;if(!r)throw new TypeError('The "publicKeyMultibase" property is required.');if(!r||!Kl(r,zl))throw new Error('"publicKeyMultibase" has invalid header bytes: "'.concat(r,'".'));if(n&&!Kl(n,Hl))throw new Error('"privateKeyMultibase" has invalid header bytes.');return e.publicKeyMultibase=r,e.privateKeyMultibase=n,e.controller&&!e.id&&(e.id="".concat(e.controller,"#").concat(e.fingerprint())),e}return s(f,[{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKey,r=void 0!==t&&t,n=e.privateKey,i=void 0!==n&&n,a=e.includeContext,o=void 0!==a&&a;if(!r&&!i)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');var s={id:this.id,type:this.type};return o&&(s["@context"]=f.SUITE_CONTEXT),this.controller&&(s.controller=this.controller),r&&(s.publicKeyMultibase=this.publicKeyMultibase),i&&(s.privateKeyMultibase=this.privateKeyMultibase),this.revoked&&(s.revoked=this.revoked),s}},{key:"deriveSecret",value:(u=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.publicKey,n=Wl(zl,r.publicKeyMultibase),e.abrupt("return",function(){var e=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privateKey,n=t.remotePublicKey,e.abrupt("return",Dl.scalarMult(r,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()({privateKey:Wl(Hl,this.privateKeyMultibase),remotePublicKey:n}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"fingerprint",value:function(){return this.publicKeyMultibase}},{key:"verifyFingerprint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fingerprint;if(!Kl(t,zl))throw new Error('"fingerprint" has invalid header bytes: "'.concat(t,'".'));return{valid:!0}}}],[{key:"generate",value:(o=i(Wt.mark((function e(){var r,n,a,o,s=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,i(Wt.mark((function e(){var t,r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Dl.box.keyPair(),r=t.publicKey,n=t.secretKey,e.abrupt("return",{publicKey:r,privateKey:n});case 2:case"end":return e.stop()}}),e)})))();case 3:return n=e.sent,a=n.publicKey,o=n.privateKey,e.abrupt("return",new f(t({publicKeyMultibase:ql(zl,a),privateKeyMultibase:ql(Hl,o)},r)));case 7:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"from",value:(n=i(Wt.mark((function e(){var t,r=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",t.publicKeyBase58?this.fromX25519KeyAgreementKey2019(t):new f(t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fromX25519KeyAgreementKey2019",value:(r=i(Wt.mark((function e(){var r,n,i,a,o,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>0&&void 0!==u[0]?u[0]:{},n=r.publicKeyBase58,i=r.privateKeyBase58,a=y(r,Jt),e.abrupt("return",(n&&(o=ql(zl,Dc(n))),i&&(s=ql(Hl,Dc(i))),new f(t({publicKeyMultibase:o,privateKeyMultibase:s},a))));case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"fromEd25519VerificationKey2020",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyPair;if(!t.publicKeyMultibase)throw new Error("Source public key is required to convert.");if(!t.publicKeyMultibase.startsWith("z"))throw new TypeError('Expecting "publicKeyMultibase" value to be multibase base58btc encoded (must start with "z").');var r=new f({controller:t.controller,publicKeyMultibase:f.convertFromEdPublicKey(t)});if(t.privateKeyMultibase){if(!t.privateKeyMultibase.startsWith("z"))throw new TypeError('Expecting "privateKeyMultibase" value to be multibase base58btc encoded (must start with "z").');r.privateKeyMultibase=f.convertFromEdPrivateKey(t)}return r}},{key:"convertFromEdPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKeyMultibase;if(!t)throw new Error("Source public key is required to convert.");var r=Wl(Ul,t),n=tl.fromHex(r).toX25519();if(!n)throw new Error("Error converting to X25519; Invalid Ed25519 public key.");return ql(zl,n)}},{key:"convertFromEdPrivateKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.privateKeyMultibase;if(!t)throw new Error("Source private key is required to convert.");var r=Wl(Fl,t),n=Bl.convertSecretKey(r);if(!n)throw new Error("Error converting to X25519; Invalid Ed25519 private key.");return ql(Hl,n)}},{key:"fingerprintFromPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKeyMultibase;if(!t)throw new Error("Source public key is required.");return t}},{key:"fromFingerprint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fingerprint;return new f({publicKeyMultibase:t})}}]),f}(Tl);
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
/*!
   * Copyright (c) 2021-2022 Digital Bazaar, Inc. All rights reserved.
   */function Kl(e,t){if("string"!=typeof e||"z"!==e[0])return!1;var r=Dc(e.slice(1));return t.every((function(e,t){return r[t]===e}))}function ql(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),"z"+jc(r)}function Wl(e,t){var r=Dc(t.substr(1));if(!e.every((function(e,t){return r[t]===e})))throw new Error("Multibase value does not have expected header.");return r.slice(e.length)}
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */Vl.suite="X25519KeyAgreementKey2020",Vl.SUITE_CONTEXT="https://w3id.org/security/suites/x25519-2020/v1";
/*!
   * Copyright (c) 2019-2021 Digital Bazaar, Inc. All rights reserved.
   */
var Gl="X25519KeyAgreementKey2019",Jl=new Uint8Array([237,1]),Xl=new Uint8Array([128,38]),$l=function(e){c(l,e);var r,n,o,u=m(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,l),(e=u.call(this,t)).type=Gl,e.publicKeyBase58=t.publicKeyBase58,!e.publicKeyBase58)throw TypeError('The "publicKeyBase58" property is required.');return e.privateKeyBase58=t.privateKeyBase58,e.controller&&!e.id&&(e.id="".concat(e.controller,"#").concat(e.fingerprint())),b(e)}return s(l,[{key:"export",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.publicKey,r=void 0!==t&&t,n=e.privateKey,i=void 0!==n&&n,a=e.includeContext,o=void 0!==a&&a;if(!r&&!i)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');var s={id:this.id,type:this.type};return o&&(s["@context"]=l.SUITE_CONTEXT),this.controller&&(s.controller=this.controller),r&&(s.publicKeyBase58=this.publicKeyBase58),i&&(s.privateKeyBase58=this.privateKeyBase58),this.revoked&&(s.revoked=this.revoked),s}},{key:"deriveSecret",value:(o=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.publicKey,n=Dc(r.publicKeyBase58),e.abrupt("return",function(){var e=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privateKey,n=t.remotePublicKey,e.abrupt("return",Dl.scalarMult(r,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()({privateKey:Dc(this.privateKeyBase58),remotePublicKey:n}));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"fingerprint",value:function(){var e=this.publicKeyBase58;return l.fingerprintFromPublicKey({publicKeyBase58:e})}},{key:"verifyFingerprint",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.fingerprint;if("string"!=typeof n||"z"!==n[0])return{error:new Error("`fingerprint` must be a multibase encoded string."),valid:!1};try{e=Dc(n.slice(1))}catch(n){return{error:n,valid:!1}}try{t=Dc(this.publicKeyBase58)}catch(n){return{error:n,valid:!1}}var i=236===e[0]&&1===e[1]&&t.toString()===e.slice(2).toString();return i?{valid:i}:{error:new Error("The fingerprint does not match the public key."),valid:!1}}}],[{key:"generate",value:(n=i(Wt.mark((function e(){var r,n,a,o,s=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,i(Wt.mark((function e(){var t,r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Dl.box.keyPair(),r=t.publicKey,n=t.secretKey,e.abrupt("return",{publicKey:r,privateKey:n});case 2:case"end":return e.stop()}}),e)})))();case 3:return n=e.sent,a=n.publicKey,o=n.privateKey,e.abrupt("return",new l(t({publicKeyBase58:jc(a),privateKeyBase58:jc(o)},r)));case 7:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"from",value:(r=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new l(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"fromEd25519VerificationKey2018",value:function(e){var t=e.keyPair,r=new l({controller:t.controller,publicKeyBase58:l.convertFromEdPublicKey(t)});return t.privateKeyBase58&&(r.privateKeyBase58=l.convertFromEdPrivateKey(t)),r}},{key:"fromEd25519VerificationKey2020",value:function(e){var t=e.keyPair;if(!t.publicKeyMultibase)throw new Error("Source public key is required to convert.");if(!t.publicKeyMultibase.startsWith("z"))throw new TypeError("Expecting source public Ed25519 2020 key to have base58btc encoding.");var r=jc(Yl(Jl,t.publicKeyMultibase)),n=new l({controller:t.controller,publicKeyBase58:l.convertFromEdPublicKey({publicKeyBase58:r})});if(t.privateKeyMultibase){if(!t.privateKeyMultibase.startsWith("z"))throw new TypeError("Expecting source private Ed25519 2020 key to have base58btc encoding.");var i=jc(Yl(Xl,t.privateKeyMultibase));n.privateKeyBase58=l.convertFromEdPrivateKey({privateKeyBase58:i})}return n}},{key:"fromEdKeyPair",value:function(e){var t=e.keyPair;return this.fromEd25519VerificationKey2018({keyPair:t})}},{key:"convertFromEdPublicKey",value:function(e){var t=Dc(e.publicKeyBase58),r=tl.fromHex(t).toX25519();if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 public key.");return jc(r)}},{key:"convertFromEdPrivateKey",value:function(e){var t=Dc(e.privateKeyBase58),r=Bl.convertSecretKey(t);if(!r)throw new Error("Error converting to X25519; Invalid Ed25519 private key.");return jc(r)}},{key:"fingerprintFromPublicKey",value:function(e){var t=Dc(e.publicKeyBase58),r=new Uint8Array(2+t.length);return r[0]=236,r[1]=1,r.set(t,2),"z".concat(jc(r))}},{key:"fromFingerprint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fingerprint;if(!t||"string"!=typeof t||"z"!==t[0])throw new Error("`fingerprint` must be a multibase encoded string.");var r=Dc(t.substr(1));if(236!==r[0]||1!==r[1])throw new Error("Unsupported Fingerprint Type: ".concat(t));return new l({publicKeyBase58:jc(r.slice(2))})}}]),l}(Tl);function Yl(e,t){var r=Dc(t.slice(1));if(!e.every((function(e,t){return r[t]===e})))throw new Error("Multibase value does not have expected header.");return r.slice(e.length)}
/*!
   * Copyright (c) 2021 Digital Bazaar. All rights reserved.
   */$l.suite=Gl,$l.SUITE_CONTEXT="https://w3id.org/security/suites/x25519-2019/v1";var Zl=new Set(["assertionMethod","authentication","capabilityDelegation","capabilityInvocation","keyAgreement"]);
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */function Ql(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.doc,r=e.methodId,n=e.purpose;if(!t)throw new TypeError("A DID Document is required.");if(!r&&!n)throw new TypeError("A method id or purpose is required.");if(r)return ef({doc:t,methodId:r});var i=t[n]||[],a=k(i,1),o=a[0];return o&&"string"==typeof o?ef({doc:t,methodId:o}):o}function ef(e){var t,n=e.doc,i=e.methodId;n.verificationMethod&&(t=n.verificationMethod.find((function(e){return e.id===i})));var a,o=C(Zl);try{for(o.s();!(a=o.n()).done;){var s,u=C(n[a.value]||[]);try{for(u.s();!(s=u.n()).done;){var c=s.value;if("object"==r(c)&&c.id===i){t=c;break}}}catch(e){u.e(e)}finally{u.f()}if(t)return t}}catch(e){o.e(e)}finally{o.f()}}var tf=rf;function rf(e){var t=this;if(t instanceof rf||(t=new rf),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function nf(e,t,r){var n=t===e.head?new sf(r,null,t,e):new sf(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function af(e,t){e.tail=new sf(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function of(e,t){e.head=new sf(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function sf(e,t,r,n){if(!(this instanceof sf))return new sf(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}rf.Node=sf,rf.create=rf,rf.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},rf.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},rf.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},rf.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)af(this,arguments[e]);return this.length},rf.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)of(this,arguments[e]);return this.length},rf.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},rf.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},rf.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},rf.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},rf.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},rf.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},rf.prototype.map=function(e,t){t=t||this;for(var r=new rf,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},rf.prototype.mapReverse=function(e,t){t=t||this;for(var r=new rf,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},rf.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},rf.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},rf.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},rf.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},rf.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new rf;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},rf.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new rf;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},rf.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;var i=[];for(r=0;n&&r<t;r++)i.push(n.value),n=this.removeNode(n);for(null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev),r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=nf(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return i},rf.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{require("./iterator.js")(rf)}catch(IK){}var uf=tf,cf=Symbol("max"),lf=Symbol("length"),ff=Symbol("lengthCalculator"),hf=Symbol("allowStale"),df=Symbol("maxAge"),pf=Symbol("dispose"),vf=Symbol("noDisposeOnSet"),yf=Symbol("lruList"),gf=Symbol("cache"),bf=Symbol("updateAgeOnGet"),mf=function(){return 1},wf=function(e,t,r){var n=e[gf].get(t);if(n){var i=n.value;if(xf(e,i)){if(kf(e,n),!e[hf])return}else r&&(e[bf]&&(n.value.now=Date.now()),e[yf].unshiftNode(n));return i.value}},xf=function(e,t){if(!t||!t.maxAge&&!e[df])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[df]&&r>e[df]},_f=function(e){if(e[lf]>e[cf])for(var t=e[yf].tail;e[lf]>e[cf]&&null!==t;){var r=t.prev;kf(e,t),t=r}},kf=function(e,t){if(t){var r=t.value;e[pf]&&e[pf](r.key,r.value),e[lf]-=r.length,e[gf].delete(r.key),e[yf].removeNode(t)}},Sf=s((function e(t,r,n,i,o){a(this,e),this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=o||0})),Ef=function(e,t,r,n){var i=r.value;xf(e,i)&&(kf(e,r),e[hf]||(i=void 0)),i&&t.call(n,i.value,i.key,e)},If=function(){function e(t){if(a(this,e),"number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[cf]=t.max||1/0;var r=t.length||mf;if(this[ff]="function"!=typeof r?mf:r,this[hf]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[df]=t.maxAge||0,this[pf]=t.dispose,this[vf]=t.noDisposeOnSet||!1,this[bf]=t.updateAgeOnGet||!1,this.reset()}return s(e,[{key:"max",get:function(){return this[cf]},set:function(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[cf]=e||1/0,_f(this)}},{key:"allowStale",get:function(){return this[hf]},set:function(e){this[hf]=!!e}},{key:"maxAge",get:function(){return this[df]},set:function(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[df]=e,_f(this)}},{key:"lengthCalculator",get:function(){return this[ff]},set:function(e){var t=this;"function"!=typeof e&&(e=mf),e!==this[ff]&&(this[ff]=e,this[lf]=0,this[yf].forEach((function(e){e.length=t[ff](e.value,e.key),t[lf]+=e.length}))),_f(this)}},{key:"length",get:function(){return this[lf]}},{key:"itemCount",get:function(){return this[yf].length}},{key:"rforEach",value:function(e,t){t=t||this;for(var r=this[yf].tail;null!==r;){var n=r.prev;Ef(this,e,r,t),r=n}}},{key:"forEach",value:function(e,t){t=t||this;for(var r=this[yf].head;null!==r;){var n=r.next;Ef(this,e,r,t),r=n}}},{key:"keys",value:function(){return this[yf].toArray().map((function(e){return e.key}))}},{key:"values",value:function(){return this[yf].toArray().map((function(e){return e.value}))}},{key:"reset",value:function(){var e=this;this[pf]&&this[yf]&&this[yf].length&&this[yf].forEach((function(t){return e[pf](t.key,t.value)})),this[gf]=new Map,this[yf]=new uf,this[lf]=0}},{key:"dump",value:function(){var e=this;return this[yf].map((function(t){return!xf(e,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}})).toArray().filter((function(e){return e}))}},{key:"dumpLru",value:function(){return this[yf]}},{key:"set",value:function(e,t,r){if((r=r||this[df])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,i=this[ff](t,e);if(this[gf].has(e)){if(i>this[cf])return kf(this,this[gf].get(e)),!1;var a=this[gf].get(e).value;return this[pf]&&(this[vf]||this[pf](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[lf]+=i-a.length,a.length=i,this.get(e),_f(this),!0}var o=new Sf(e,t,i,n,r);return o.length>this[cf]?(this[pf]&&this[pf](e,t),!1):(this[lf]+=o.length,this[yf].unshift(o),this[gf].set(e,this[yf].head),_f(this),!0)}},{key:"has",value:function(e){if(!this[gf].has(e))return!1;var t=this[gf].get(e).value;return!xf(this,t)}},{key:"get",value:function(e){return wf(this,e,!0)}},{key:"peek",value:function(e){return wf(this,e,!1)}},{key:"pop",value:function(){var e=this[yf].tail;return e?(kf(this,e),e.value):null}},{key:"del",value:function(e){kf(this,this[gf].get(e))}},{key:"load",value:function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{var a=i-t;a>0&&this.set(n.k,n.v,a)}}}},{key:"prune",value:function(){var e=this;this[gf].forEach((function(t,r){return wf(e,r,!1)}))}}]),e}(),Af=new Map([[Cl.suite,Cl.SUITE_CONTEXT],["Ed25519VerificationKey2018","https://w3id.org/security/suites/ed25519-2018/v1"],[Vl.suite,Vl.SUITE_CONTEXT],[$l.suite,$l.SUITE_CONTEXT]]),Tf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.verificationSuite,n=void 0===r?Cl:r;a(this,e),this.method="key",this.verificationSuite=n}var r,n,o,u,c;return s(e,[{key:"generate",value:(c=i(Wt.mark((function e(){var t,r,n,i,a,o,s=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.seed,e.next=3,this.verificationSuite.generate({seed:r});case 3:return n=e.sent,e.next=6,this._keyPairToDidDocument({keyPair:n});case 6:return i=e.sent,a=i.didDocument,o=i.keyPairs,e.abrupt("return",{didDocument:a,keyPairs:o,methodFor:function(e){var t=e.purpose,r=Ql({doc:a,purpose:t}).id;return o.get(r)}});case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"publicMethodFor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.didDocument,r=e.purpose;if(!t)throw new TypeError('The "didDocument" parameter is required.');if(!r)throw new TypeError('The "purpose" parameter is required.');var n=Ql({doc:t,purpose:r});if(!n)throw new Error('No verification method found for purpose "'.concat(r,'"'));return n}},{key:"get",value:(u=i(Wt.mark((function e(){var r,n,i,a,o,s,u,c,l,f,h,d=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>0&&void 0!==d[0]?d[0]:{},n=r.did,i=r.url,n=n||i){e.next=3;break}throw new TypeError('"did" must be a string.');case 3:return a=n.split("#"),o=k(a,2),s=o[0],u=o[1],c=s.substr("did:key:".length),l=this.verificationSuite.fromFingerprint({fingerprint:c}),e.next=11,this._keyPairToDidDocument({keyPair:l});case 11:return f=e.sent,h=f.didDocument,e.abrupt("return",u?function(e){var r,n=e.didDocument,i=e.keyIdFragment,a=n.id+"#"+i;return r=n.verificationMethod[0].id===a?n.verificationMethod[0]:n.keyAgreement[0],t({"@context":Af.get(r.type)},r)}({didDocument:h,keyIdFragment:u}):h);case 14:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"publicKeyToDidDoc",value:(o=i(Wt.mark((function e(){var t,r,n,i,a=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.publicKeyDescription,e.next=3,this._keyPairToDidDocument({keyPair:r});case 3:return n=e.sent,i=n.didDocument,e.abrupt("return",{didDocument:i});case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_keyPairToDidDocument",value:(n=i(Wt.mark((function e(){var r,n,i,a,o,s,u,c,l,f,h=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>0&&void 0!==h[0]?h[0]:{},n=r.keyPair,e.next=3,this.verificationSuite.from(t({},n));case 3:if(i=e.sent,a="did:key:".concat(i.fingerprint()),i.controller=a,o=["https://www.w3.org/ns/did/v1"],"Ed25519VerificationKey2020"!==i.type){e.next=11;break}s=Vl.fromEd25519VerificationKey2020({keyPair:i}),o.push(Cl.SUITE_CONTEXT,Vl.SUITE_CONTEXT),e.next=14;break;case 11:if("Ed25519VerificationKey2018"===i.type){e.next=13;break}throw new Error('Cannot derive key agreement key from verification key type "'+i.type+'".');case 13:s=$l.fromEd25519VerificationKey2018({keyPair:i}),o.push("https://w3id.org/security/suites/ed25519-2018/v1",$l.SUITE_CONTEXT);case 14:return i.id="".concat(a,"#").concat(i.fingerprint()),u=i.export({publicKey:!0}),c=s.export({publicKey:!0}),l={"@context":o,id:a,verificationMethod:[u],authentication:[u.id],assertionMethod:[u.id],capabilityDelegation:[u.id],capabilityInvocation:[u.id],keyAgreement:[c]},f=new Map,e.abrupt("return",(f.set(i.id,i),f.set(s.id,s),{didDocument:l,keyPairs:f}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"computeId",value:(r=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.keyPair,e.abrupt("return","did:key:".concat(r.fingerprint(),"#").concat(r.fingerprint()));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})}]),e}();function Pf(e){return Of.apply(this,arguments)}function Of(){return Of=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Tf,e.next=3,r.get({did:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}var Cf,Mf,Nf=t(t({},Object.freeze({__proto__:null,resolve:(Mf=i(Wt.mark((function e(t){var r,n,i=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:Cc.url,!Nc(t)){e.next=5;break}return e.next=4,Pf(t);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,ac({url:"".concat(r,"/").concat(t)});case 7:return n=e.sent,e.abrupt("return",JSON.parse(n).didDocument);case 9:case"end":return e.stop()}}),e)}))),function(e){return Mf.apply(this,arguments)}),resolveDidKeyDocument:Pf,getIssuerProfileUrl:function(e){var t;if(!e.service)return"";var r=null===(t=e.service.find((function(e){return"IssuerProfile"===e.type})))||void 0===t?void 0:t.serviceEndpoint;return null!=r?r:""}})),{},{didResolver:Cc});!function(e){e.DEFAULT="standby",e.FAILURE="failure",e.STARTING="starting",e.SUCCESS="success"}(Cf||(Cf={}));var Rf=s((function e(t,r){a(this,e),u(this,"code",void 0),u(this,"label",void 0),u(this,"labelPending",void 0),u(this,"parentStep",void 0),u(this,"status",void 0),this.code=r,this.label=ha("subSteps","".concat(r,"Label")),this.labelPending=ha("subSteps","".concat(r,"LabelPending")),this.parentStep=t,this.status=Cf.DEFAULT}));function Lf(e){return""===e?0:function(e){var t=Date.parse(e);if(t)return new Date(t);var r=function(e){var t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));var r=e.slice(-5),n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t}(e);return r||function(e){var t,r,n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,(t=new Date(Date.UTC.apply(Date,t))).getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}("".concat(e)).getTime()}function jf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.created?Lf(e.created):null,n=e.revoked?Lf(e.revoked):null,i=e.expires?Lf(e.expires):null,a=t;return t||(a=(e.id||e.publicKey).replace("ecdsa-koblitz-pubkey:","")),new ba(a,r,n,i)}var Df,Bf=Object.freeze({__proto__:null,convertToVerificationSubsteps:function(e,t){return new Rf(e,t)},findVerificationSubstep:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=0;n<t.length;n++){var i,a=t[n].subSteps.find((function(t){return t.code===e}));if(a&&""===r)return a;if(null!==(i=t[n].suites)&&void 0!==i&&i.length)for(var o=0;o<t[n].suites.length;o++){var s=t[n].suites[o];if(a=s.subSteps.find((function(t){return t.code===e})),a&&s.proofType===r)return a}}},getIssuerProfile:function(){var e=i(Wt.mark((function e(i){var a,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ha("errors","getIssuerProfile"),i){e.next=3;break}throw new wa("getIssuerProfile","".concat(a," - ").concat(ha("errors","issuerProfileNotSet")));case 3:if("object"==r(i)&&(i=i.id),!Mc(i)){e.next=28;break}return e.prev=4,e.next=7,Uf.did.resolve(i);case 7:if(s=e.sent,!Nc(i)){e.next=12;break}o=function(e){return{"@context":["https://w3id.org/openbadges/v2","https://w3id.org/blockcerts/3.0"],publicKey:[{created:(new Date).toISOString(),id:e.id.split(":").pop()}]}}(s),e.next=20;break;case 12:return e.next=14,Uf.did.getIssuerProfileUrl(s);case 14:if(u=e.sent,e.t0=u,!e.t0){e.next=20;break}return e.next=19,n(u);case 19:o=e.sent;case 20:return e.abrupt("return",t({didDocument:s},o));case 23:throw e.prev=23,e.t1=e.catch(4),console.error(e.t1),new wa("getIssuerProfile","".concat(a," - ").concat(e.t1));case 26:e.next=30;break;case 28:if(function(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}(i)){e.next=30;break}throw new wa("getIssuerProfile","".concat(a," - ").concat(ha("errors","issuerProfileNotSet")));case 30:return e.t2=JSON,e.next=33,ac({url:i}).catch((function(){throw new wa("getIssuerProfile",a)}));case 33:if(e.t3=e.sent,function(e){var t=["issuer","profile"],r=e.type;return!!r&&(Array.isArray(r)?r.some((function(e){return t.includes(e.toLowerCase())})):t.includes(r.toLowerCase()))}(o=e.t2.parse.call(e.t2,e.t3))||function(e){var t=e.issuer_key,r=e.revocation_key,n=e.issuerKeys,i=e.revocationKeys;return!(!t||!r)||!(!n||!i)}(o)){e.next=37;break}throw new wa("getIssuerProfile","".concat(a," - ").concat(ha("errors","issuerProfileInvalid")));case 37:return e.abrupt("return",o);case 38:case"end":return e.stop()}}),e,null,[[4,23]])})));function n(t){return e.apply(this,arguments)}return n}(),getRevokedAssertions:(Df=i(Wt.mark((function e(t,r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return i=ha("errors","getRevokedAssertions"),r&&(t=function(e,t,r){var n=e.includes("?")?"&":"?";return"".concat(e).concat(n).concat("assertionId","=").concat(r)}(t,0,encodeURIComponent(r))),e.next=6,ac({url:t}).catch((function(){throw new wa(ga.checkRevokedStatus,i)}));case 6:return a=e.sent,e.abrupt("return",null!==(n=JSON.parse(a).revokedAssertions)&&void 0!==n?n:[]);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return Df.apply(this,arguments)}),lookForTx:function(e){var t=e.transactionId,r=e.chain,n=e.explorerAPIs,i=void 0===n?[]:n;return Ac(this,void 0,void 0,Wt.mark((function e(){var n,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ic(i),a=function(e){var t=e.defaultAPIs,r=e.customAPIs,n=[t];if(null==r?void 0:r.length){var i=r[0].priority;n.splice(i,0,r)}if(1>t.concat(r).length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");return n}({defaultAPIs:Tc(r,n),customAPIs:n.custom}),e.next=3,Oc(a,0,t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))},parseIssuerKeys:function(e){try{var t={};if("@context"in e)for(var r=e.publicKey||e.publicKeys,n=0;n<r.length;n++){var i=jf(r[n]);t[i.publicKey]=i}else{var a=jf({},(e.issuerKeys||[])[0].key);t[a.publicKey]=a}return t}catch(e){throw console.error(e),new wa("parseIssuerKeys",ha("errors","parseIssuerKeys"))}},parseRevocationKey:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"revocationKeys")&&e.revocationKeys.length>0?e.revocationKeys[0].key:""}}),Uf={addresses:ca,certificates:Pa,chains:Oa,did:Nf,i18n:da,verifier:Bf};function Ff(e){return e.credentialSubject.name||""}function zf(e){"string"==typeof e&&(e=[e]);var t,r,n=(t=function(e){return e.filter(Xi)}(e),t.find((function(e){return e.toLowerCase().indexOf("blockcerts")>0}))),i=n.split("/").filter((function(e){return""!==e})),a=Object.keys(Kf),o=parseInt(a.filter((function(e){return function(e,t){return e.some((function(e){return e.includes("v".concat(t))||e.includes("".concat(t,"."))}))}(i,e.toString())}))[0],10);switch(o){case 1:r=Yi.V1_2;break;case 2:r=Yi.V2_0;break;case 3:if(n.includes("-alpha")){r=Yi.V3_0_alpha;break}if(n.includes("-beta")){r=Yi.V3_0_beta;break}r=Yi.V3_0}return{versionNumber:o,version:r}}var Hf,Vf,Kf={1:function(){throw new wa("","Verification of v1 certificates is not supported by this component. See the python cert-verifier for v1.1 verification or the npm package cert-verifier-js-v1-legacy for v1.2 (https://www.npmjs.com/package/@blockcerts/cert-verifier-js-v1-legacy)")},2:(Vf=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.expires,i=t.badge,a=i.image,o=i.name,s=i.description,u=i.subtitle,c=i.issuer,l=t.recipientProfile||t.recipient.recipientProfile,f=t.issuedOn,h=t.metadataJson,d=l.name,p=function(e){var t=[];for(var r in e){var n=e[r],i=new ma(n.image,n.jobTitle,n.name);t.push(i)}return t}(i.signatureLines),e.next=15,Uf.verifier.getIssuerProfile(c);case 15:return v=e.sent,e.abrupt("return",{certificateImage:a,description:s,expires:n,id:r,issuedOn:f,issuer:v,metadataJson:h,name:o,recipientFullName:d,recordLink:r,revocationKey:null,sealImage:v.image,signatureImage:p,subtitle:u});case 17:case"end":return e.stop()}}),e)}))),function(e){return Vf.apply(this,arguments)}),3:(Hf=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.issuer,n=t.metadataJson,i=t.metadata,a=t.issuanceDate,o=t.id,s=t.expirationDate,u=t.display,c=i||n,e.t0=u,e.t1=s,e.t2=a,e.t3=o,e.next=7,Uf.verifier.getIssuerProfile(r);case 7:return e.t4=e.sent,e.t5=c,e.t6=Ff(t),e.t7=o,e.abrupt("return",{display:e.t0,expires:e.t1,issuedOn:e.t2,id:e.t3,issuer:e.t4,metadataJson:e.t5,recipientFullName:e.t6,recordLink:e.t7});case 12:case"end":return e.stop()}}),e)}))),function(e){return Hf.apply(this,arguments)})},qf={exports:{}},Wf=6e4,Gf=36e5,Jf=24*Gf,Xf=function(e,t){t=t||{};var n=r(e);if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*Jf;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Gf;case"minutes":case"minute":case"mins":case"min":case"m":return r*Wf;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=Jf?$f(e,t,Jf,"day"):t>=Gf?$f(e,t,Gf,"hour"):t>=Wf?$f(e,t,Wf,"minute"):t>=1e3?$f(e,t,1e3,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=Jf?Math.round(e/Jf)+"d":t>=Gf?Math.round(e/Gf)+"h":t>=Wf?Math.round(e/Wf)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function $f(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==oo&&"env"in oo&&(e=oo.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=function(e){function t(e){var n,i,a,o=null;function s(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(s.enabled){var a=s,o=Number(new Date),u=o-(n||o);a.diff=u,a.prev=n,a.curr=o,n=o,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";c++;var i=t.formatters[n];if("function"==typeof i){var o=r[c];e=i.call(a,o),r.splice(c,1),c--}return e})),t.formatArgs.call(a,r),(a.log||t.log).apply(a,r)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a)},set:function(e){o=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(E(t.names.map(n)),E(t.skips.map(n).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Xf,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(qf,qf.exports);var Yf=qf.exports,Zf=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,e),this.prefix=t,this._existing=r,this.counter=n}return s(e,[{key:"clone",value:function(){var t=this.prefix,r=this._existing,n=this.counter;return new e(t,new Map(r),n)}},{key:"getId",value:function(e){var t=e&&this._existing.get(e);if(t)return t;var r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}},{key:"hasId",value:function(e){return this._existing.has(e)}},{key:"getOldIds",value:function(){return E(this._existing.keys())}}]),e}();!function(e,t){if(!e.setImmediate){var r,n,i,a,o,s=1,u={},c=!1,l=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){Ga((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},r=function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,r=function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(d,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[s]=i,r(s),s++},f.clearImmediate=h}function h(e){delete u[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?$t:self);var Qf=self.crypto||self.msCrypto,eh=function(){function e(t){if(a(this,e),!Qf||!Qf.subtle)throw new Error("crypto.subtle not found.");if("sha256"===t)this.algorithm={name:"SHA-256"};else{if("sha1"!==t)throw new Error('Unsupport algorithm "'.concat(t,'".'));this.algorithm={name:"SHA-1"}}this._content=""}var t;return s(e,[{key:"update",value:function(e){this._content+=e}},{key:"digest",value:(t=i(Wt.mark((function e(){var t,r,n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new TextEncoder).encode(this._content),e.t0=Uint8Array,e.next=4,Qf.subtle.digest(this.algorithm,t);case 4:for(e.t1=e.sent,r=new e.t0(e.t1),n="",i=0;i<r.length;++i)n+=r[i].toString(16).padStart(2,"0");return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),th=function(){function e(t){a(this,e),this.current=t.sort(),this.done=!1,this.dir=new Map;for(var r=0;r<t.length;++r)this.dir.set(t[r],!0)}return s(e,[{key:"hasNext",value:function(){return!this.done}},{key:"next",value:function(){for(var e=this.current,t=this.dir,r=e.slice(),n=null,i=0,a=e.length,o=0;o<a;++o){var s=e[o],u=t.get(s);(null===n||s>n)&&(u&&o>0&&s>e[o-1]||!u&&o<a-1&&s>e[o+1])&&(n=s,i=o)}if(null===n)this.done=!0;else{var c=t.get(n)?i-1:i+1;e[i]=e[c],e[c]=n;var l,f=C(e);try{for(f.s();!(l=f.n()).done;){var h=l.value;h>n&&t.set(h,!t.get(h))}}catch(e){f.e(e)}finally{f.f()}}return r}}]),e}(),rh="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",nh="http://www.w3.org/2001/XMLSchema#string",ih={eoln:/(?:\r\n)|(?:\n)|(?:\r)/g};ih.empty=new RegExp("^[ \\t]*$"),ih.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$');var ah=function(){function e(){a(this,e)}return s(e,null,[{key:"parse",value:function(e){var t,r=[],n={},i=0,a=C(e.split(ih.eoln));try{for(a.s();!(t=a.n()).done;){var o=t.value;if(i++,!ih.empty.test(o)){var s=o.match(ih.quad);if(null===s)throw new Error("N-Quads parse error on line "+i+".");var u={subject:null,predicate:null,object:null,graph:null};if(void 0!==s[1]?u.subject={termType:"NamedNode",value:s[1]}:u.subject={termType:"BlankNode",value:s[2]},u.predicate={termType:"NamedNode",value:s[3]},void 0!==s[4]?u.object={termType:"NamedNode",value:s[4]}:void 0!==s[5]?u.object={termType:"BlankNode",value:s[5]}:(u.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==s[7]?u.object.datatype.value=s[7]:void 0!==s[8]?(u.object.datatype.value=rh,u.object.language=s[8]):u.object.datatype.value=nh,u.object.value=ch(s[6])),void 0!==s[9]?u.graph={termType:"NamedNode",value:s[9]}:void 0!==s[10]?u.graph={termType:"BlankNode",value:s[10]}:u.graph={termType:"DefaultGraph",value:""},u.graph.value in n){var c,l=!0,f=n[u.graph.value],h=C(f);try{for(h.s();!(c=h.n()).done;){if(oh(c.value,u)){l=!1;break}}}catch(e){h.e(e)}finally{h.f()}l&&(f.push(u),r.push(u))}else n[u.graph.value]=[u],r.push(u)}}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"serialize",value:function(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));var r,n=[],i=C(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(e.serializeQuad(a))}}catch(e){i.e(e)}finally{i.f()}return n.sort().join("")}},{key:"serializeQuad",value:function(e){var t=e.subject,r=e.predicate,n=e.object,i=e.graph,a="";return"NamedNode"===t.termType?a+="<".concat(t.value,">"):a+="".concat(t.value),a+=" <".concat(r.value,"> "),"NamedNode"===n.termType?a+="<".concat(n.value,">"):"BlankNode"===n.termType?a+=n.value:(a+='"'.concat(function(e){return e.replace(sh,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(n.value),'"'),n.datatype.value===rh?n.language&&(a+="@".concat(n.language)):n.datatype.value!==nh&&(a+="^^<".concat(n.datatype.value,">"))),"NamedNode"===i.termType?a+=" <".concat(i.value,">"):"BlankNode"===i.termType&&(a+=" ".concat(i.value)),a+=" .\n"}},{key:"legacyDatasetToQuads",value:function(e){var t=[],r={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"},n=function(n){e[n].forEach((function(e){var i={};for(var a in e){var o=e[a],s={termType:r[o.type],value:o.value};"Literal"===s.termType&&(s.datatype={termType:"NamedNode"},"datatype"in o&&(s.datatype.value=o.datatype),"language"in o?("datatype"in o||(s.datatype.value=rh),s.language=o.language):"datatype"in o||(s.datatype.value=nh)),i[a]=s}i.graph="@default"===n?{termType:"DefaultGraph",value:""}:{termType:n.startsWith("_:")?"BlankNode":"NamedNode",value:n},t.push(i)}))};for(var i in e)n(i);return t}}]),e}();function oh(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&("Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value)}var sh=/["\\\n\r]/g,uh=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function ch(e){return e.replace(uh,(function(e,t,r,n){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(n)throw new Error("Unsupported U escape")}))}var lh=Zf,fh=eh,hh=th,dh=ah,ph=function(){function e(){a(this,e),this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new lh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}var r,n,o,u,c,l,f,h;return s(e,[{key:"main",value:(h=i(Wt.mark((function e(r){var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.quads=r,n=C(r);try{for(n.s();!(i=n.n()).done;)a=i.value,this._addBlankNodeQuadInfo({quad:a,component:a.subject}),this._addBlankNodeQuadInfo({quad:a,component:a.object}),this._addBlankNodeQuadInfo({quad:a,component:a.graph})}catch(e){n.e(e)}finally{n.f()}o=new Map,s=E(this.blankNodeInfo.keys()),u=0,c=C(s),e.prev=6,c.s();case 8:if((l=c.n()).done){e.next=18;break}if(f=l.value,e.t0=++u%100==0,!e.t0){e.next=14;break}return e.next=14,this._yield();case 14:return e.next=16,this._hashAndTrackBlankNode({id:f,hashToBlankNodes:o});case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(6),c.e(e.t1);case 23:return e.prev=23,c.f(),e.finish(23);case 26:h=E(o.keys()).sort(),d=[],p=C(h),e.prev=28,p.s();case 30:if((v=p.n()).done){e.next=40;break}if(y=v.value,!((g=o.get(y)).length>1)){e.next=36;break}return d.push(g),e.abrupt("continue",38);case 36:b=g[0],this.canonicalIssuer.getId(b);case 38:e.next=30;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(28),p.e(e.t2);case 45:return e.prev=45,p.f(),e.finish(45);case 48:m=0,w=d;case 49:if(!(m<w.length)){e.next=80;break}x=w[m],_=[],k=C(x),e.prev=53,k.s();case 55:if((S=k.n()).done){e.next=67;break}if(I=S.value,!this.canonicalIssuer.hasId(I)){e.next=59;break}return e.abrupt("continue",65);case 59:return(A=new lh("_:b")).getId(I),e.next=63,this.hashNDegreeQuads(I,A);case 63:T=e.sent,_.push(T);case 65:e.next=55;break;case 67:e.next=72;break;case 69:e.prev=69,e.t3=e.catch(53),k.e(e.t3);case 72:return e.prev=72,k.f(),e.finish(72);case 75:for(_.sort(vh),P=0,O=_;P<O.length;P++){M=O[P],N=M.issuer.getOldIds(),R=C(N);try{for(R.s();!(L=R.n()).done;)j=L.value,this.canonicalIssuer.getId(j)}catch(e){R.e(e)}finally{R.f()}}case 77:m++,e.next=49;break;case 80:D=[],B=C(this.quads);try{for(B.s();!(U=B.n()).done;)F=U.value,(z=t({},F)).subject=this._useCanonicalId({component:z.subject}),z.object=this._useCanonicalId({component:z.object}),z.graph=this._useCanonicalId({component:z.graph}),D.push(dh.serializeQuad(z))}catch(e){B.e(e)}finally{B.f()}return e.abrupt("return",(D.sort(),D.join("")));case 84:case"end":return e.stop()}}),e,this,[[6,20,23,26],[28,42,45,48],[53,69,72,75]])}))),function(e){return h.apply(this,arguments)})},{key:"hashFirstDegreeQuads",value:(f=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=this.blankNodeInfo.get(t),i=n.quads,a=C(i);try{for(a.s();!(o=a.n()).done;)s=o.value,(u={subject:null,predicate:s.predicate,object:null,graph:null}).subject=this.modifyFirstDegreeComponent(t,s.subject,"subject"),u.object=this.modifyFirstDegreeComponent(t,s.object,"object"),u.graph=this.modifyFirstDegreeComponent(t,s.graph,"graph"),r.push(dh.serializeQuad(u))}catch(e){a.e(e)}finally{a.f()}for(r.sort(),c=new fh(this.hashAlgorithm),l=0,f=r;l<f.length;l++)h=f[l],c.update(h);return e.next=8,c.digest();case 8:return n.hash=e.sent,e.abrupt("return",n.hash);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"hashRelatedBlankNode",value:(l=i(Wt.mark((function e(t,r,n,i){var a,o;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.canonicalIssuer.hasId(t)?this.canonicalIssuer.getId(t):n.hasId(t)?n.getId(t):this.blankNodeInfo.get(t).hash,o=new fh(this.hashAlgorithm),e.abrupt("return",(o.update(i),"g"!==i&&o.update(this.getRelatedPredicate(r)),o.update(a),o.digest()));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return l.apply(this,arguments)})},{key:"hashNDegreeQuads",value:(c=i(Wt.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new fh(this.hashAlgorithm),e.next=3,this.createHashToRelated(t,r);case 3:i=e.sent,a=E(i.keys()).sort(),o=C(a),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=69;break}u=s.value,n.update(u),c=void 0,l="",f=new hh(i.get(u)),h=0;case 14:if(!f.hasNext()){e.next=66;break}if(d=f.next(),e.t0=++h%3==0,!e.t0){e.next=20;break}return e.next=20,this._yield();case 20:p=r.clone(),v="",y=[],g=!1,b=C(d),e.prev=24,b.s();case 26:if((m=b.n()).done){e.next=33;break}if(w=m.value,this.canonicalIssuer.hasId(w)?v+=this.canonicalIssuer.getId(w):(p.hasId(w)||y.push(w),v+=p.getId(w)),!(0!==l.length&&v>l)){e.next=31;break}return g=!0,e.abrupt("break",33);case 31:e.next=26;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(24),b.e(e.t1);case 38:return e.prev=38,b.f(),e.finish(38);case 41:if(g){e.next=64;break}x=C(y),e.prev=43,x.s();case 45:if((_=x.n()).done){e.next=55;break}return k=_.value,e.next=49,this.hashNDegreeQuads(k,p);case 49:if(S=e.sent,v+=p.getId(k),v+="<".concat(S.hash,">"),p=S.issuer,!(0!==l.length&&v>l)){e.next=53;break}return g=!0,e.abrupt("break",55);case 53:e.next=45;break;case 55:e.next=60;break;case 57:e.prev=57,e.t2=e.catch(43),x.e(e.t2);case 60:return e.prev=60,x.f(),e.finish(60);case 63:g||(0===l.length||v<l)&&(l=v,c=p);case 64:e.next=14;break;case 66:n.update(l),r=c;case 67:e.next=8;break;case 69:e.next=74;break;case 71:e.prev=71,e.t3=e.catch(6),o.e(e.t3);case 74:return e.prev=74,o.f(),e.finish(74);case 77:return e.next=79,n.digest();case 79:return e.t4=e.sent,e.t5=r,e.abrupt("return",{hash:e.t4,issuer:e.t5});case 82:case"end":return e.stop()}}),e,this,[[6,71,74,77],[24,35,38,41],[43,57,60,63]])}))),function(e,t){return c.apply(this,arguments)})},{key:"modifyFirstDegreeComponent",value:function(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}},{key:"getRelatedPredicate",value:function(e){return"<".concat(e.predicate.value,">")}},{key:"createHashToRelated",value:(u=i(Wt.mark((function e(t,r){var n,i,a,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,i=this.blankNodeInfo.get(t).quads,a=0,o=C(i),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=15;break}if(u=s.value,e.t0=++a%100==0,!e.t0){e.next=11;break}return e.next=11,this._yield();case 11:return e.next=13,Promise.all([this._addRelatedBlankNodeHash({quad:u,component:u.subject,position:"s",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:u,component:u.object,position:"o",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:u,component:u.graph,position:"g",id:t,issuer:r,hashToRelated:n})]);case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),o.e(e.t1);case 20:return e.prev=20,o.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,this,[[3,17,20,23]])}))),function(e,t){return u.apply(this,arguments)})},{key:"_hashAndTrackBlankNode",value:(o=i(Wt.mark((function e(t){var r,n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.hashToBlankNodes,e.next=3,this.hashFirstDegreeQuads(r);case 3:i=e.sent,(a=n.get(i))?a.push(r):n.set(i,[r]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_addBlankNodeQuadInfo",value:function(e){var t=e.quad,r=e.component;if("BlankNode"===r.termType){var n=r.value,i=this.blankNodeInfo.get(n);i?i.quads.add(t):this.blankNodeInfo.set(n,{quads:new Set([t]),hash:null})}}},{key:"_addRelatedBlankNodeHash",value:(n=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.quad,n=t.component,i=t.position,a=t.id,o=t.issuer,s=t.hashToRelated,"BlankNode"===n.termType&&n.value!==a){e.next=3;break}return e.abrupt("return");case 3:return u=n.value,e.next=6,this.hashRelatedBlankNode(u,r,o,i);case 6:c=e.sent,(l=s.get(c))?l.push(u):s.set(c,[u]);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_useCanonicalId",value:function(e){var t=e.component;return"BlankNode"!==t.termType||t.value.startsWith(this.canonicalIssuer.prefix)?t:{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}}},{key:"_yield",value:(r=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setImmediate(e)})));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}]),e}();function vh(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}var yh=ph,gh=Zf,bh=eh,mh=th,wh=ah,xh=function(){function e(){a(this,e),this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new gh("_:c14n"),this.hashAlgorithm="sha256",this.quads=null}return s(e,[{key:"main",value:function(e){this.quads=e;var r,n=C(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;this._addBlankNodeQuadInfo({quad:i,component:i.subject}),this._addBlankNodeQuadInfo({quad:i,component:i.object}),this._addBlankNodeQuadInfo({quad:i,component:i.graph})}}catch(e){n.e(e)}finally{n.f()}var a,o=new Map,s=C(E(this.blankNodeInfo.keys()));try{for(s.s();!(a=s.n()).done;){var u=a.value;this._hashAndTrackBlankNode({id:u,hashToBlankNodes:o})}}catch(e){s.e(e)}finally{s.f()}var c,l=[],f=C(E(o.keys()).sort());try{for(f.s();!(c=f.n()).done;){var h=c.value,d=o.get(h);if(d.length>1)l.push(d);else{var p=d[0];this.canonicalIssuer.getId(p)}}}catch(e){f.e(e)}finally{f.f()}for(var v=0,y=l;v<y.length;v++){var g,b=[],m=C(y[v]);try{for(m.s();!(g=m.n()).done;){var w=g.value;if(!this.canonicalIssuer.hasId(w)){var x=new gh("_:b");x.getId(w);var _=this.hashNDegreeQuads(w,x);b.push(_)}}}catch(e){m.e(e)}finally{m.f()}b.sort(_h);for(var k=0,S=b;k<S.length;k++){var I,A=C(S[k].issuer.getOldIds());try{for(A.s();!(I=A.n()).done;){var T=I.value;this.canonicalIssuer.getId(T)}}catch(e){A.e(e)}finally{A.f()}}}var P,O=[],M=C(this.quads);try{for(M.s();!(P=M.n()).done;){var N=t({},P.value);N.subject=this._useCanonicalId({component:N.subject}),N.object=this._useCanonicalId({component:N.object}),N.graph=this._useCanonicalId({component:N.graph}),O.push(wh.serializeQuad(N))}}catch(e){M.e(e)}finally{M.f()}return O.sort(),O.join("")}},{key:"hashFirstDegreeQuads",value:function(e){var t,r=[],n=this.blankNodeInfo.get(e),i=C(n.quads);try{for(i.s();!(t=i.n()).done;){var a=t.value,o={subject:null,predicate:a.predicate,object:null,graph:null};o.subject=this.modifyFirstDegreeComponent(e,a.subject,"subject"),o.object=this.modifyFirstDegreeComponent(e,a.object,"object"),o.graph=this.modifyFirstDegreeComponent(e,a.graph,"graph"),r.push(wh.serializeQuad(o))}}catch(e){i.e(e)}finally{i.f()}r.sort();for(var s=new bh(this.hashAlgorithm),u=0,c=r;u<c.length;u++){var l=c[u];s.update(l)}return n.hash=s.digest(),n.hash}},{key:"hashRelatedBlankNode",value:function(e,t,r,n){var i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):this.blankNodeInfo.get(e).hash;var a=new bh(this.hashAlgorithm);return a.update(n),"g"!==n&&a.update(this.getRelatedPredicate(t)),a.update(i),a.digest()}},{key:"hashNDegreeQuads",value:function(e,t){var r,n=new bh(this.hashAlgorithm),i=this.createHashToRelated(e,t),a=C(E(i.keys()).sort());try{for(a.s();!(r=a.n()).done;){var o=r.value;n.update(o);for(var s=void 0,u="",c=new mh(i.get(o));c.hasNext();){var l,f=c.next(),h=t.clone(),d="",p=[],v=!1,y=C(f);try{for(y.s();!(l=y.n()).done;){var g=l.value;if(this.canonicalIssuer.hasId(g)?d+=this.canonicalIssuer.getId(g):(h.hasId(g)||p.push(g),d+=h.getId(g)),0!==u.length&&d>u){v=!0;break}}}catch(e){y.e(e)}finally{y.f()}if(!v){var b,m=C(p);try{for(m.s();!(b=m.n()).done;){var w=b.value,x=this.hashNDegreeQuads(w,h);if(d+=h.getId(w),d+="<".concat(x.hash,">"),h=x.issuer,0!==u.length&&d>u){v=!0;break}}}catch(e){m.e(e)}finally{m.f()}v||(0===u.length||d<u)&&(u=d,s=h)}}n.update(u),t=s}}catch(e){a.e(e)}finally{a.f()}return{hash:n.digest(),issuer:t}}},{key:"modifyFirstDegreeComponent",value:function(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}},{key:"getRelatedPredicate",value:function(e){return"<".concat(e.predicate.value,">")}},{key:"createHashToRelated",value:function(e,t){var r,n=new Map,i=C(this.blankNodeInfo.get(e).quads);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:e,issuer:t,hashToRelated:n})}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"_hashAndTrackBlankNode",value:function(e){var t=e.id,r=e.hashToBlankNodes,n=this.hashFirstDegreeQuads(t),i=r.get(n);i?i.push(t):r.set(n,[t])}},{key:"_addBlankNodeQuadInfo",value:function(e){var t=e.quad,r=e.component;if("BlankNode"===r.termType){var n=r.value,i=this.blankNodeInfo.get(n);i?i.quads.add(t):this.blankNodeInfo.set(n,{quads:new Set([t]),hash:null})}}},{key:"_addRelatedBlankNodeHash",value:function(e){var t=e.quad,r=e.component,n=e.position,i=e.id,a=e.issuer,o=e.hashToRelated;if("BlankNode"===r.termType&&r.value!==i){var s=r.value,u=this.hashRelatedBlankNode(s,t,a,n),c=o.get(u);c?c.push(s):o.set(u,[s])}}},{key:"_useCanonicalId",value:function(e){var t=e.component;return"BlankNode"!==t.termType||t.value.startsWith(this.canonicalIssuer.prefix)?t:{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}}}]),e}();function _h(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}var kh,Sh=xh,Eh=ph,Ih=function(e){c(n,e);var t,r=m(n);function n(){var e;return a(this,n),(e=r.call(this)).name="URGNA2012",e.hashAlgorithm="sha1",e}return s(n,[{key:"modifyFirstDegreeComponent",value:function(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}},{key:"getRelatedPredicate",value:function(e){return e.predicate.value}},{key:"createHashToRelated",value:(t=i(Wt.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,i=this.blankNodeInfo.get(t).quads,a=0,o=C(i),e.prev=3,o.s();case 5:if((s=o.n()).done){e.next=26;break}if(u=s.value,c=void 0,l=void 0,"BlankNode"!==u.subject.termType||u.subject.value===t){e.next=12;break}l=u.subject.value,c="p",e.next=15;break;case 12:if("BlankNode"===u.object.termType&&u.object.value!==t){e.next=14;break}return e.abrupt("continue",24);case 14:l=u.object.value,c="r";case 15:if(e.t0=++a%100==0,!e.t0){e.next=19;break}return e.next=19,this._yield();case 19:return e.next=21,this.hashRelatedBlankNode(l,u,r,c);case 21:f=e.sent,(h=n.get(f))?h.push(l):n.set(f,[l]);case 24:e.next=5;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(3),o.e(e.t1);case 31:return e.prev=31,o.f(),e.finish(31);case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,this,[[3,28,31,34]])}))),function(e,r){return t.apply(this,arguments)})}]),n}(yh),Ah=xh,Th=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).name="URGNA2012",e.hashAlgorithm="sha1",e}return s(r,[{key:"modifyFirstDegreeComponent",value:function(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}},{key:"getRelatedPredicate",value:function(e){return e.predicate.value}},{key:"createHashToRelated",value:function(e,t){var r,n=new Map,i=C(this.blankNodeInfo.get(e).quads);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=void 0,s=void 0;if("BlankNode"===a.subject.termType&&a.subject.value!==e)s=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;s=a.object.value,o="r"}var u=this.hashRelatedBlankNode(s,a,t,o),c=n.get(u);c?c.push(s):n.set(u,[s])}}catch(e){i.e(e)}finally{i.f()}return n}}]),r}(Sh);try{kh=require("rdf-canonize-native")}catch(IK){}var Ph={},Oh=Ph;Ph.NQuads=ah,Ph.IdentifierIssuer=Zf,Ph._rdfCanonizeNative=function(e){return e&&(kh=e),kh},Ph.canonize=function(){var e=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)||(t=Ph.NQuads.legacyDatasetToQuads(t)),!r.useNative){e.next=4;break}if(kh){e.next=3;break}throw new Error("rdf-canonize-native not available");case 3:return e.abrupt("return",new Promise((function(e,n){return kh.canonize(t,r,(function(t,r){return t?n(t):e(r)}))})));case 4:if("URDNA2015"!==r.algorithm){e.next=6;break}return e.abrupt("return",new Eh(r).main(t));case 6:if("URGNA2012"!==r.algorithm){e.next=8;break}return e.abrupt("return",new Ih(r).main(t));case 8:if("algorithm"in r){e.next=10;break}throw new Error("No RDF Dataset Canonicalization algorithm specified.");case 10:throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+r.algorithm);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ph._canonizeSync=function(e,t){if(Array.isArray(e)||(e=Ph.NQuads.legacyDatasetToQuads(e)),t.useNative){if(kh)return kh.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new Ah(t).main(e);if("URGNA2012"===t.algorithm)return new Th(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)};var Ch=Oh,Mh={},Nh=Mh;Mh.isArray=Array.isArray,Mh.isBoolean=function(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)},Mh.isDouble=function(e){return Mh.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21)},Mh.isEmptyObject=function(e){return Mh.isObject(e)&&0===Object.keys(e).length},Mh.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},Mh.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},Mh.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},Mh.isString=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},Mh.isUndefined=function(e){return void 0===e};var Rh=Nh,Lh={},jh=Lh;Lh.isSubject=function(e){return!(!Rh.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e))},Lh.isSubjectReference=function(e){return Rh.isObject(e)&&1===Object.keys(e).length&&"@id"in e},Lh.isValue=function(e){return Rh.isObject(e)&&"@value"in e},Lh.isList=function(e){return Rh.isObject(e)&&"@list"in e},Lh.isGraph=function(e){return Rh.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((function(e){return"@id"!==e&&"@index"!==e})).length},Lh.isSimpleGraph=function(e){return Lh.isGraph(e)&&!("@id"in e)},Lh.isBlankNode=function(e){return!!Rh.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))};var Dh=function(e){c(r,e);var t=m(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An unspecified JSON-LD error occurred.",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsonld.Error",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,r),(e=t.call(this,n)).name=i,e.message=n,e.details=o,e}return s(r)}(p(Error)),Bh=jh,Uh=Nh,Fh=Ch.IdentifierIssuer,zh=Dh,Hh=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,Vh=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,Kh=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,qh="application/ld+json, application/json",Wh={},Gh=Wh;function Jh(e,t){if(Uh.isArray(t))for(var r=0;r<t.length;++r)t[r]=Jh(e,t[r]);else if(Bh.isList(t))t["@list"]=Jh(e,t["@list"]);else if(Uh.isObject(t)){Bh.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=n[i];"@id"!==a&&(t[a]=Jh(e,t[a]))}}return t}Wh.IdentifierIssuer=Fh,Wh.clone=function(e){if(e&&"object"==r(e)){var t;if(Uh.isArray(e)){t=[];for(var n=0;n<e.length;++n)t[n]=Wh.clone(e[n])}else if(e instanceof Map){t=new Map;var i,a=C(e);try{for(a.s();!(i=a.n()).done;){var o=k(i.value,2),s=o[0],u=o[1];t.set(s,Wh.clone(u))}}catch(e){a.e(e)}finally{a.f()}}else if(e instanceof Set){t=new Set;var c,l=C(e);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.add(Wh.clone(f))}}catch(e){l.e(e)}finally{l.f()}}else if(Uh.isObject(e))for(var h in t={},e)t[h]=Wh.clone(e[h]);else t=e.toString();return t}return e},Wh.asArray=function(e){return Array.isArray(e)?e:[e]},Wh.buildHeaders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).some((function(e){return"accept"===e.toLowerCase()}));if(t)throw new RangeError('Accept header may not be specified; only "'+qh+'" is supported.');return Object.assign({Accept:qh},e)},Wh.parseLinkHeader=function(e){for(var t={},r=e.match(Hh),n=0;n<r.length;++n){var i=r[n].match(Vh);if(i){for(var a={target:i[1]},o=i[2];i=Kh.exec(o);)a[i[1]]=void 0===i[2]?i[3]:i[2];var s=a.rel||"";Array.isArray(t[s])?t[s].push(a):t.hasOwnProperty(s)?t[s]=[t[s],a]:t[s]=a}}return t},Wh.validateTypeValue=function(e,t){if(!(Uh.isString(e)||Uh.isArray(e)&&e.every((function(e){return Uh.isString(e)})))){if(t&&Uh.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&Wh.asArray(e["@default"]).every((function(e){return Uh.isString(e)})))return}throw new zh('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},Wh.hasProperty=function(e,t){if(e.hasOwnProperty(t)){var r=e[t];return!Uh.isArray(r)||r.length>0}return!1},Wh.hasValue=function(e,t,r){if(Wh.hasProperty(e,t)){var n=e[t],i=Bh.isList(n);if(Uh.isArray(n)||i){i&&(n=n["@list"]);for(var a=0;a<n.length;++a)if(Wh.compareValues(r,n[a]))return!0}else if(!Uh.isArray(r))return Wh.compareValues(r,n)}return!1},Wh.addValue=function(e,t,r,n){if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),"prependValue"in n||(n.prependValue=!1),n.valueIsArray)e[t]=r;else if(Uh.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),n.prependValue&&(r=r.concat(e[t]),e[t]=[]);for(var i=0;i<r.length;++i)Wh.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){var a=!n.allowDuplicate&&Wh.hasValue(e,t,r);Uh.isArray(e[t])||a&&!n.propertyIsArray||(e[t]=[e[t]]),a||(n.prependValue?e[t].unshift(r):e[t].push(r))}else e[t]=n.propertyIsArray?[r]:r},Wh.getValues=function(e,t){return[].concat(e[t]||[])},Wh.removeProperty=function(e,t){delete e[t]},Wh.removeValue=function(e,t,r,n){"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);var i=Wh.getValues(e,t).filter((function(e){return!Wh.compareValues(e,r)}));0===i.length?Wh.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},Wh.relabelBlankNodes=function(e,t){return Jh((t=t||{}).issuer||new Fh("_:b"),e)},Wh.compareValues=function(e,t){return e===t||!(!Bh.isValue(e)||!Bh.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(Uh.isObject(e)&&"@id"in e&&Uh.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]},Wh.compareShortestLeast=function(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1};var Xh="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$h="http://www.w3.org/2001/XMLSchema#",Yh={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Xh,RDF_LIST:Xh+"List",RDF_FIRST:Xh+"first",RDF_REST:Xh+"rest",RDF_NIL:Xh+"nil",RDF_TYPE:Xh+"type",RDF_PLAIN_LITERAL:Xh+"PlainLiteral",RDF_XML_LITERAL:Xh+"XMLLiteral",RDF_JSON_LITERAL:Xh+"JSON",RDF_OBJECT:Xh+"object",RDF_LANGSTRING:Xh+"langString",XSD:$h,XSD_BOOLEAN:$h+"boolean",XSD_DOUBLE:$h+"double",XSD_INTEGER:$h+"integer",XSD_STRING:$h+"string"},Zh=function(){function e(){a(this,e),this._requests={}}var t;return s(e,[{key:"wrapLoader",value:function(e){var t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}},{key:"add",value:(t=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._requests[t])){e.next=3;break}return e.abrupt("return",Promise.resolve(r));case 3:return r=this._requests[t]=this._loader(t),e.prev=4,e.next=7,r;case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,delete this._requests[t],e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[4,,8,11]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Qh=Nh,ed={},td=ed;ed.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},ed.parse=function(e,t){for(var r={},n=ed.parsers[t||"full"],i=n.regex.exec(e),a=n.keys.length;a--;)r[n.keys[a]]=void 0===i[a]?null:i[a];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=ed.removeDotSegments(r.path),r},ed.prependBase=function(e,t){if(null===e)return t;if(ed.isAbsolute(t))return t;e&&!Qh.isString(e)||(e=ed.parse(e||""));var r=ed.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{var i=e.path;((i=i.substr(0,i.lastIndexOf("/")+1)).length>0||e.authority)&&"/"!==i.substr(-1)&&(i+="/"),i+=r.path,n.path=i}n.query=r.query}""!==r.path&&(n.path=ed.removeDotSegments(n.path));var a=n.protocol;return null!==n.authority&&(a+="//"+n.authority),a+=n.path,null!==n.query&&(a+="?"+n.query),null!==r.fragment&&(a+="#"+r.fragment),""===a&&(a="./"),a},ed.removeBase=function(e,t){if(null===e)return t;e&&!Qh.isString(e)||(e=ed.parse(e||""));var r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;for(var n=ed.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),a=n.normalizedPath.split("/"),o=n.fragment||n.query?0:1;i.length>0&&a.length>o&&i[0]===a[0];)i.shift(),a.shift();var s="";if(i.length>0){i.pop();for(var u=0;u<i.length;++u)s+="../"}return s+=a.join("/"),null!==n.query&&(s+="?"+n.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s},ed.removeDotSegments=function(e){if(0===e.length)return"";for(var t=e.split("/"),r=[];t.length>0;){var n=t.shift(),i=0===t.length;"."!==n?".."!==n?r.push(n):(r.pop(),i&&r.push("")):i&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};var rd=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;ed.isAbsolute=function(e){return Qh.isString(e)&&rd.test(e)},ed.isRelative=function(e){return Qh.isString(e)};var nd=Gh.parseLinkHeader,id=Gh.buildHeaders,ad=Yh.LINK_HEADER_CONTEXT,od=Dh,sd=Zh,ud=td.prependBase,cd=/(^|(\r\n))link:/i,ld=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{headers:{}},t=e.secure,r=e.headers,n=void 0===r?{}:r,a=e.xhr;return n=id(n),(new sd).wrapLoader(function(){var e=i(Wt.mark((function e(i){var o,s,u,c,l,f,h;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===i.indexOf("http:")||0===i.indexOf("https:")){e.next=2;break}throw new od('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i});case 2:if(!t||0===i.indexOf("https")){e.next=4;break}throw new od('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:i});case 4:return e.prev=4,e.next=7,function(e,t,r){var n=new(e=e||XMLHttpRequest);return new Promise((function(e,i){for(var a in n.onload=function(){return e(n)},n.onerror=function(e){return i(e)},n.open("GET",t,!0),r)n.setRequestHeader(a,r[a]);n.send()}))}(a,i,n);case 7:o=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new od("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:e.t0});case 13:if(!(o.status>=400)){e.next=15;break}throw new od("URL could not be dereferenced: "+o.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:i,httpStatusCode:o.status});case 15:if(s={contextUrl:null,documentUrl:i,document:o.response},u=null,c=o.getResponseHeader("Content-Type"),cd.test(o.getAllResponseHeaders())&&(l=o.getResponseHeader("Link")),!l||"application/ld+json"===c){e.next=29;break}if(f=nd(l),h=f[ad],!Array.isArray(h)){e.next=22;break}throw new od("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i});case 22:if(h&&(s.contextUrl=h.target),u=f.alternate,e.t1=u&&"application/ld+json"==u.type&&!(c||"").match(/^application\/(\w*\+)?json$/),!e.t1){e.next=29;break}return e.next=28,r(ud(i,u.target));case 28:s=e.sent;case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}}),e,null,[[4,10]])})));function r(t){return e.apply(this,arguments)}return r}())},fd={},hd=fd;fd.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=ld,e.useDocumentLoader("xhr"))},fd.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})};var dd=If,pd=Nh.isArray,vd=Nh.isObject,yd=Nh.isString,gd=Gh.asArray,bd=td.prependBase,md=Dh,wd=function(){function e(t){var r=t.document;a(this,e),this.document=r,this.cache=new dd({max:10})}return s(e,[{key:"getProcessed",value:function(e){return this.cache.get(e)}},{key:"setProcessed",value:function(e,t){this.cache.set(e,t)}}]),e}();function xd(e){throw new md("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function _d(e){var t=e.context,r=e.base;if(t){var n=t["@context"];if(yd(n))t["@context"]=bd(r,n);else if(pd(n))for(var i=0;i<n.length;++i){var a=n[i];yd(a)?n[i]=bd(r,a):vd(a)&&_d({context:{"@context":a},base:r})}else if(vd(n))for(var o in n)_d({context:n[o],base:r})}}var kd=Ch.NQuads,Sd=Gh,Ed=Dh,Id=Nh.isArray,Ad=Nh.isObject,Td=Nh.isString,Pd=Nh.isUndefined,Od=td.isAbsolute,Cd=td.isRelative,Md=td.prependBase,Nd=Gh.asArray,Rd=Gh.compareShortestLeast,Ld=new Map,jd=/^@[a-zA-Z]+$/,Dd={},Bd=Dd;function Ud(e,t,r,n,i,a){if(null===t||!Td(t)||Dd.isKeyword(t))return t;if(t.match(jd))return null;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&Dd.createTermDefinition({activeCtx:e,localCtx:n,term:t,defined:i,options:a}),(r=r||{}).vocab){var o=e.mappings.get(t);if(null===o)return null;if(Ad(o)&&"@id"in o)return o["@id"]}var s=t.indexOf(":");if(s>0){var u=t.substr(0,s),c=t.substr(s+1);if("_"===u||0===c.indexOf("//"))return t;n&&n.hasOwnProperty(u)&&Dd.createTermDefinition({activeCtx:e,localCtx:n,term:u,defined:i,options:a});var l=e.mappings.get(u);if(l&&l._prefix)return l["@id"]+c;if(Od(t))return t}if(r.vocab&&"@vocab"in e)return e["@vocab"]+t;if(r.base&&"@base"in e){if(e["@base"])return Md(Md(a.base,e["@base"]),t)}else if(r.base)return Md(a.base,t);return t}function Fd(e,t){if(!e||"object"!=r(e)||!t||"object"!=r(t))return e===t;var n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!Fd(e[i],t[i]))return!1;return!0}var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s in e){var u=e[s],c=t[s];if("@container"===s&&Array.isArray(u)&&Array.isArray(c)&&(u=u.slice().sort(),c=c.slice().sort()),!Fd(u,c))return!1}return!0}Dd.process=function(){var e=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.activeCtx,n=t.localCtx,i=t.options,a=t.propagate,o=void 0===a||a,s=t.overrideProtected,u=void 0!==s&&s,c=t.cycles,l=void 0===c?new Set:c,Ad(n)&&"@context"in n&&Id(n["@context"])&&(n=n["@context"]),0!==Nd(n).length){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,i.contextResolver.resolve({activeCtx:r,context:n,documentLoader:i.documentLoader,base:i.base});case 6:f=e.sent,Ad(f[0].document)&&"boolean"==typeof f[0].document["@propagate"]&&(o=f[0].document["@propagate"]),h=r,o||h.previousContext||((h=h.clone()).previousContext=r),d=C(f),e.prev=11,d.s();case 13:if((p=d.n()).done){e.next=144;break}if(v=p.value,y=v.document,r=h,null!==y){e.next=35;break}if(u||0===Object.keys(r.protected).length){e.next=33;break}if("error"!==(g=i&&i.protectedMode||"error")){e.next=21;break}throw new Ed("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});case 21:if("warn"!==g){e.next=32;break}if(console.warn("WARNING: invalid context nullification"),!(b=v.getProcessed(r))){e.next=27;break}return h=r=b,e.abrupt("continue",142);case 27:for(m=r,h=r=Dd.getInitialContext(i).clone(),w=0,x=Object.entries(m.protected);w<x.length;w++)_=k(x[w],2),S=_[0],_[1]&&(r.mappings[S]=Sd.clone(m.mappings[S]));return r.protected=Sd.clone(m.protected),v.setProcessed(m,h),e.abrupt("continue",142);case 32:throw new Ed("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,protectedMode:g});case 33:return h=r=Dd.getInitialContext(i).clone(),e.abrupt("continue",142);case 35:if(!(E=v.getProcessed(r))){e.next=39;break}return h=r=E,e.abrupt("continue",142);case 39:if(Ad(y)&&"@context"in y&&(y=y["@context"]),Ad(y)){e.next=41;break}throw new Ed("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:y});case 41:if(h=h.clone(),I=new Map,!("@version"in y)){e.next=49;break}if(1.1===y["@version"]){e.next=46;break}throw new Ed("Unsupported JSON-LD version: "+y["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:y});case 46:if(!r.processingMode||"json-ld-1.0"!==r.processingMode){e.next=48;break}throw new Ed("@version: "+y["@version"]+" not compatible with "+r.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:y});case 48:h.processingMode="json-ld-1.1",h["@version"]=y["@version"],I.set("@version",!0);case 49:if(h.processingMode=h.processingMode||r.processingMode,!("@base"in y)){e.next=59;break}if(null!==(A=y["@base"])&&!Od(A)){e.next=55;break}e.next=58;break;case 55:if(Cd(A)){e.next=57;break}throw new Ed('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:y});case 57:A=Md(h["@base"],A);case 58:h["@base"]=A,I.set("@base",!0);case 59:if(!("@vocab"in y)){e.next=71;break}if(null!==(T=y["@vocab"])){e.next=65;break}delete h["@vocab"],e.next=70;break;case 65:if(Td(T)){e.next=67;break}throw new Ed('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:y});case 67:if(Od(T)||!Dd.processingMode(h,1)){e.next=69;break}throw new Ed('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:y});case 69:h["@vocab"]=Ud(h,T,{vocab:!0,base:!0},void 0,void 0,i);case 70:I.set("@vocab",!0);case 71:if(!("@language"in y)){e.next=81;break}if(null!==(P=y["@language"])){e.next=77;break}delete h["@language"],e.next=80;break;case 77:if(Td(P)){e.next=79;break}throw new Ed('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:y});case 79:h["@language"]=P.toLowerCase();case 80:I.set("@language",!0);case 81:if(!("@direction"in y)){e.next=93;break}if(O=y["@direction"],"json-ld-1.0"!==r.processingMode){e.next=85;break}throw new Ed("Invalid JSON-LD syntax; @direction not compatible with "+r.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:y});case 85:if(null!==O){e.next=89;break}delete h["@direction"],e.next=92;break;case 89:if("ltr"===O||"rtl"===O){e.next=91;break}throw new Ed('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:y});case 91:h["@direction"]=O;case 92:I.set("@direction",!0);case 93:if(!("@propagate"in y)){e.next=100;break}if(M=y["@propagate"],"json-ld-1.0"!==r.processingMode){e.next=97;break}throw new Ed("Invalid JSON-LD syntax; @propagate not compatible with "+r.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:y});case 97:if("boolean"==typeof M){e.next=99;break}throw new Ed("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:n});case 99:I.set("@propagate",!0);case 100:if(!("@import"in y)){e.next=122;break}if(N=y["@import"],"json-ld-1.0"!==r.processingMode){e.next=104;break}throw new Ed("Invalid JSON-LD syntax; @import not compatible with "+r.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:y});case 104:if(Td(N)){e.next=106;break}throw new Ed("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:n});case 106:return e.next=108,i.contextResolver.resolve({activeCtx:r,context:N,documentLoader:i.documentLoader,base:i.base});case 108:if(1===(R=e.sent).length){e.next=111;break}throw new Ed("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:n});case 111:if(!(L=R[0].getProcessed(r))){e.next=116;break}y=L,e.next=121;break;case 116:if(!("@import"in(j=R[0].document))){e.next=119;break}throw new Ed("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:n});case 119:for(D in j)y.hasOwnProperty(D)||(y[D]=j[D]);R[0].setProcessed(r,y);case 121:I.set("@import",!0);case 122:I.set("@protected",y["@protected"]||!1),e.t0=Wt.keys(y);case 124:if((e.t1=e.t0()).done){e.next=141;break}if(B=e.t1.value,Dd.createTermDefinition({activeCtx:h,localCtx:y,term:B,defined:I,options:i,overrideProtected:u}),!Ad(y[B])||!("@context"in y[B])){e.next=139;break}if(U=y[B]["@context"],F=!0,Td(U)&&(z=Md(i.base,U),l.has(z)?F=!1:l.add(z)),!F){e.next=139;break}return e.prev=131,e.next=134,Dd.process({activeCtx:h.clone(),localCtx:y[B]["@context"],overrideProtected:!0,options:i,cycles:l});case 134:e.next=139;break;case 136:throw e.prev=136,e.t2=e.catch(131),new Ed("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:y[B]["@context"],term:B});case 139:e.next=124;break;case 141:v.setProcessed(r,h);case 142:e.next=13;break;case 144:e.next=149;break;case 146:e.prev=146,e.t3=e.catch(11),d.e(e.t3);case 149:return e.prev=149,d.f(),e.finish(149);case 152:return e.abrupt("return",h);case 153:case"end":return e.stop()}}),e,null,[[11,146,149,152],[131,136]])})));return function(t){return e.apply(this,arguments)}}(),Dd.createTermDefinition=function(e){var t,r=e.activeCtx,n=e.localCtx,i=e.term,a=e.defined,o=e.options,s=e.overrideProtected,u=void 0!==s&&s;if(a.has(i)){if(a.get(i))return;throw new Ed("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:n,term:i})}if(a.set(i,!1),n.hasOwnProperty(i)&&(t=n[i]),"@type"===i&&Ad(t)&&"@set"===(t["@container"]||"@set")&&Dd.processingMode(r,1.1)){var c=["@container","@id","@protected"],l=Object.keys(t);if(0===l.length||l.some((function(e){return!c.includes(e)})))throw new Ed("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:i})}else{if(Dd.isKeyword(i))throw new Ed("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:n,term:i});if(i.match(jd))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:i});if(""===i)throw new Ed("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:n})}var f=r.mappings.get(i);r.mappings.has(i)&&r.mappings.delete(i);var h=!1;if((Td(t)||null===t)&&(h=!0,t={"@id":t}),!Ad(t))throw new Ed("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:n});var d={};r.mappings.set(i,d),d.reverse=!1;var p=["@container","@id","@language","@reverse","@type"];for(var v in Dd.processingMode(r,1.1)&&p.push("@context","@direction","@index","@nest","@prefix","@protected"),t)if(!p.includes(v))throw new Ed("Invalid JSON-LD syntax; a term definition must not contain "+v,"jsonld.SyntaxError",{code:"invalid term definition",context:n});var y=i.indexOf(":");if(d._termHasColon=y>0,"@reverse"in t){if("@id"in t)throw new Ed("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});if("@nest"in t)throw new Ed("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});var g=t["@reverse"];if(!Td(g))throw new Ed("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(!Dd.isKeyword(g)&&g.match(jd))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:g}),void(f?r.mappings.set(i,f):r.mappings.delete(i));var b=Ud(r,g,{vocab:!0,base:!1},n,a,o);if(!Od(b))throw new Ed("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});d["@id"]=b,d.reverse=!0}else if("@id"in t){var m=t["@id"];if(m&&!Td(m))throw new Ed("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(null===m)d["@id"]=null;else{if(!Dd.isKeyword(m)&&m.match(jd))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:m}),void(f?r.mappings.set(i,f):r.mappings.delete(i));if(m!==i){if(m=Ud(r,m,{vocab:!0,base:!1},n,a,o),!Od(m)&&!Dd.isKeyword(m))throw new Ed("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});if(i.match(/(?::[^:])|\//)&&Ud(r,i,{vocab:!0,base:!1},n,new Map(a).set(i,!0),o)!==m)throw new Ed("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n});d["@id"]=m,d._prefix=h&&!d._termHasColon&&m.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in d))if(d._termHasColon){var w=i.substr(0,y);if(n.hasOwnProperty(w)&&Dd.createTermDefinition({activeCtx:r,localCtx:n,term:w,defined:a,options:o}),r.mappings.has(w)){var x=i.substr(y+1);d["@id"]=r.mappings.get(w)["@id"]+x}else d["@id"]=i}else if("@type"===i)d["@id"]=i;else{if(!("@vocab"in r))throw new Ed("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:n,term:i});d["@id"]=r["@vocab"]+i}if((!0===t["@protected"]||!0===a.get("@protected")&&!1!==t["@protected"])&&(r.protected[i]=!0,d.protected=!0),a.set(i,!0),"@type"in t){var _=t["@type"];if(!Td(_))throw new Ed("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if("@json"===_||"@none"===_){if(Dd.processingMode(r,1))throw new Ed('Invalid JSON-LD syntax; an @context @type value must not be "'.concat(_,'" in JSON-LD 1.0 mode.'),"jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else if("@id"!==_&&"@vocab"!==_){if(_=Ud(r,_,{vocab:!0,base:!1},n,a,o),!Od(_))throw new Ed("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:n});if(0===_.indexOf("_:"))throw new Ed("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}d["@type"]=_}if("@container"in t){var k=Td(t["@container"])?[t["@container"]]:t["@container"]||[],S=["@list","@set","@index","@language"],E=!0,I=k.includes("@set");if(Dd.processingMode(r,1.1)){if(S.push("@graph","@id","@type"),k.includes("@list")){if(1!==k.length)throw new Ed("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else if(k.includes("@graph")){if(k.some((function(e){return"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e})))throw new Ed("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:n})}else E&=k.length<=(I?2:1);if(k.includes("@type")&&(d["@type"]=d["@type"]||"@id",!["@id","@vocab"].includes(d["@type"])))throw new Ed("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:n})}else E&=!Id(t["@container"]),E&=k.length<=1;if(E&=k.every((function(e){return S.includes(e)})),!(E&=!(I&&k.includes("@list"))))throw new Ed("Invalid JSON-LD syntax; @context @container value must be one of the following: "+S.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:n});if(d.reverse&&!k.every((function(e){return["@index","@set"].includes(e)})))throw new Ed("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:n});d["@container"]=k}if("@index"in t){if(!("@container"in t)||!d["@container"].includes("@index"))throw new Ed('Invalid JSON-LD syntax; @index without @index in @container: "'.concat(t["@index"],'" on term "').concat(i,'".'),"jsonld.SyntaxError",{code:"invalid term definition",context:n});if(!Td(t["@index"])||0===t["@index"].indexOf("@"))throw new Ed('Invalid JSON-LD syntax; @index must expand to an IRI: "'.concat(t["@index"],'" on term "').concat(i,'".'),"jsonld.SyntaxError",{code:"invalid term definition",context:n});d["@index"]=t["@index"]}if("@context"in t&&(d["@context"]=t["@context"]),"@language"in t&&!("@type"in t)){var A=t["@language"];if(null!==A&&!Td(A))throw new Ed("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:n});null!==A&&(A=A.toLowerCase()),d["@language"]=A}if("@prefix"in t){if(i.match(/:|\//))throw new Ed("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:n});if(Dd.isKeyword(d["@id"]))throw new Ed("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:n});if("boolean"!=typeof t["@prefix"])throw new Ed("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:n});d._prefix=!0===t["@prefix"]}if("@direction"in t){var T=t["@direction"];if(null!==T&&"ltr"!==T&&"rtl"!==T)throw new Ed('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:n});d["@direction"]=T}if("@nest"in t){var P=t["@nest"];if(!Td(P)||"@nest"!==P&&0===P.indexOf("@"))throw new Ed("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:n});d["@nest"]=P}// disallow aliasing @context and @preserve
var O=d["@id"];if("@context"===O||"@preserve"===O)throw new Ed("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:n});if(f&&f.protected&&!u&&(r.protected[i]=!0,d.protected=!0,!Fd(f,d))){var C=o&&o.protectedMode||"error";if("error"===C)throw new Ed('Invalid JSON-LD syntax; tried to redefine "'.concat(i,'" which is a protected term.'),"jsonld.SyntaxError",{code:"protected term redefinition",context:n,term:i});if("warn"===C)return void console.warn("WARNING: protected term redefinition",{term:i});throw new Ed("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:n,term:i,protectedMode:C})}},Dd.expandIri=function(e,t,r,n){return Ud(e,t,r,void 0,void 0,n)},Dd.getInitialContext=function(e){var t=JSON.stringify({processingMode:e.processingMode}),r=Ld.get(t);if(r)return r;var n={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){var e=this;if(e.inverse)return e.inverse;var t,r=e.inverse={},n=e.fastCurieMap={},o={},s=(e["@language"]||"@none").toLowerCase(),u=e["@direction"],c=e.mappings,l=C(E(c.keys()).sort(Rd));try{for(l.s();!(t=l.n()).done;){var f=t.value,h=c.get(f);if(null!==h){var d=h["@container"]||"@none";if(d=[].concat(d).sort().join(""),null!==h["@id"]){var p,v=C(Nd(h["@id"]));try{for(v.s();!(p=v.n()).done;){var y=p.value,g=r[y],b=Dd.isKeyword(y);if(g)b||h._termHasColon||o[y].push(f);else if(r[y]=g={},!b&&!h._termHasColon){o[y]=[f];var m={iri:y,terms:o[y]};y[0]in n?n[y[0]].push(m):n[y[0]]=[m]}if(g[d]||(g[d]={"@language":{},"@type":{},"@any":{}}),a(f,(g=g[d])["@any"],"@none"),h.reverse)a(f,g["@type"],"@reverse");else if("@none"===h["@type"])a(f,g["@any"],"@none"),a(f,g["@language"],"@none"),a(f,g["@type"],"@none");else if("@type"in h)a(f,g["@type"],h["@type"]);else if("@language"in h&&"@direction"in h){var w=h["@language"],x=h["@direction"];a(f,g["@language"],w&&x?"".concat(w,"_").concat(x).toLowerCase():w?w.toLowerCase():x?"_".concat(x):"@null")}else"@language"in h?a(f,g["@language"],(h["@language"]||"@null").toLowerCase()):"@direction"in h?h["@direction"]?a(f,g["@language"],"_".concat(h["@direction"])):a(f,g["@language"],"@none"):u?(a(f,g["@language"],"_".concat(u)),a(f,g["@language"],"@none"),a(f,g["@type"],"@none")):(a(f,g["@language"],s),a(f,g["@language"],"@none"),a(f,g["@type"],"@none"))}}catch(e){v.e(e)}finally{v.f()}}}}}catch(e){l.e(e)}finally{l.f()}for(var _ in n)i(n,_,1);return r},clone:function(){var e={};return e.mappings=Sd.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=Sd.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Ld.size&&Ld.clear(),Ld.set(t,n),n;function i(e,t,r){var n,a,o,s=e[t],u=e[t]={},c=C(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;(a=r>=(n=l.iri).length?"":n[r])in u?u[a].push(l):u[a]=[l]}}catch(e){c.e(e)}finally{c.f()}for(var f in u)""!==f&&i(u,f,r+1)}function a(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},Dd.getContextValue=function(e,t,r){if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){var n=e.mappings.get(t);if(Pd(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&r in e||"@direction"===r&&r in e?e[r]:"@context"!==r?null:void 0},Dd.processingMode=function(e,t){return t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode},Dd.isKeyword=function(e){if(!Td(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};var zd=Dh,Hd=Nh.isArray,Vd=Nh.isObject,Kd=Nh.isEmptyObject,qd=Nh.isString,Wd=Nh.isUndefined,Gd=jh.isList,Jd=jh.isValue,Xd=jh.isGraph,$d=jh.isSubject,Yd=Bd.expandIri,Zd=Bd.getContextValue,Qd=Bd.isKeyword,ep=Bd.process,tp=Bd.processingMode,rp=td.isAbsolute,np=Gh.addValue,ip=Gh.asArray,ap=Gh.getValues,op=Gh.validateTypeValue,sp={},up=sp,cp=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;function lp(e){return fp.apply(this,arguments)}function fp(){return fp=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$,Y,Z,Q,ee,te,re;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.activeCtx,n=t.activeProperty,i=t.expandedActiveProperty,a=t.element,o=t.expandedParent,s=t.options,u=void 0===s?{}:s,c=t.insideList,l=t.typeKey,f=t.typeScopedContext,h=t.expansionMap,d=Object.keys(a).sort(),p=[],y=a[l]&&"@json"===Yd(r,Hd(a[l])?a[l][0]:a[l],{vocab:!0},u),g=C(d),e.prev=4,g.s();case 6:if((b=g.n()).done){e.next=188;break}if(m=b.value,w=void 0,x=a[m],"@context"!==m){e.next=11;break}return e.abrupt("continue",186);case 11:if(null!==(_=Yd(r,m,{vocab:!0},u))&&(rp(_)||Qd(_))||void 0!==(_=h({unmappedProperty:m,activeCtx:r,activeProperty:n,parent:a,options:u,insideList:c,value:x,expandedParent:o}))){e.next=14;break}return e.abrupt("continue",186);case 14:if(!Qd(_)){e.next=19;break}if("@reverse"!==i){e.next=17;break}throw new zd("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:x});case 17:if(!(_ in o)||"@included"===_||"@type"===_){e.next=19;break}throw new zd("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:_});case 19:if("@id"!==_){e.next=34;break}if(qd(x)){e.next=32;break}if(u.isFrame){e.next=23;break}throw new zd('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:x});case 23:if(!Vd(x)){e.next=28;break}if(Kd(x)){e.next=26;break}throw new zd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:x});case 26:e.next=32;break;case 28:if(Hd(x)){e.next=30;break}throw new zd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:x});case 30:if(x.every((function(e){return qd(e)}))){e.next=32;break}throw new zd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:x});case 32:return np(o,"@id",ip(x).map((function(e){return qd(e)?Yd(r,e,{base:!0},u):e})),{propertyIsArray:u.isFrame}),e.abrupt("continue",186);case 34:if("@type"!==_){e.next=37;break}return Vd(x)&&(x=Object.fromEntries(Object.entries(x).map((function(e){var t=k(e,2),r=t[0],n=t[1];return[Yd(f,r,{vocab:!0}),ip(n).map((function(e){return Yd(f,e,{base:!0,vocab:!0})}))]})))),op(x,u.isFrame),np(o,"@type",ip(x).map((function(e){return qd(e)?Yd(f,e,{base:!0,vocab:!0},u):e})),{propertyIsArray:u.isFrame}),e.abrupt("continue",186);case 37:if("@included"!==_||!tp(r,1.1)){e.next=47;break}return e.t0=ip,e.next=41,sp.expand({activeCtx:r,activeProperty:n,element:x,options:u,expansionMap:h});case 41:if(e.t1=e.sent,(S=(0,e.t0)(e.t1)).every((function(e){return $d(e)}))){e.next=45;break}throw new zd("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:x});case 45:return np(o,"@included",S,{propertyIsArray:!0}),e.abrupt("continue",186);case 47:if("@graph"!==_||Vd(x)||Hd(x)){e.next=49;break}throw new zd('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:x});case 49:if("@value"!==_){e.next=52;break}return v=x,y&&tp(r,1.1)?o["@value"]=x:np(o,"@value",x,{propertyIsArray:u.isFrame}),e.abrupt("continue",186);case 52:if("@language"!==_){e.next=62;break}if(null!==x){e.next=55;break}return e.abrupt("continue",186);case 55:if(qd(x)||u.isFrame){e.next=57;break}throw new zd('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:x});case 57:x=ip(x).map((function(e){return qd(e)?e.toLowerCase():e})),E=C(x);try{for(E.s();!(I=E.n()).done;)A=I.value,qd(A)&&!A.match(cp)&&console.warn("@language must be valid BCP47: ".concat(A))}catch(e){E.e(e)}finally{E.f()}return np(o,"@language",x,{propertyIsArray:u.isFrame}),e.abrupt("continue",186);case 62:if("@direction"!==_){e.next=85;break}if(qd(x)||u.isFrame){e.next=65;break}throw new zd('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:x});case 65:x=ip(x),T=C(x),e.prev=67,T.s();case 69:if((P=T.n()).done){e.next=75;break}if(O=P.value,!qd(O)||"ltr"===O||"rtl"===O){e.next=73;break}throw new zd('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:x});case 73:e.next=69;break;case 75:e.next=80;break;case 77:e.prev=77,e.t2=e.catch(67),T.e(e.t2);case 80:return e.prev=80,T.f(),e.finish(80);case 83:return np(o,"@direction",x,{propertyIsArray:u.isFrame}),e.abrupt("continue",186);case 85:if("@index"!==_){e.next=90;break}if(qd(x)){e.next=88;break}throw new zd('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:x});case 88:return np(o,"@index",x),e.abrupt("continue",186);case 90:if("@reverse"!==_){e.next=118;break}if(Vd(x)){e.next=93;break}throw new zd('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:x});case 93:return e.next=95,sp.expand({activeCtx:r,activeProperty:"@reverse",element:x,options:u,expansionMap:h});case 95:if(!("@reverse"in(w=e.sent))){e.next=98;break}for(M in w["@reverse"])np(o,M,w["@reverse"][M],{propertyIsArray:!0});case 98:N=o["@reverse"]||null,e.t3=Wt.keys(w);case 100:if((e.t4=e.t3()).done){e.next=117;break}if("@reverse"!==(R=e.t4.value)){e.next=104;break}return e.abrupt("continue",100);case 104:null===N&&(N=o["@reverse"]={}),np(N,R,[],{propertyIsArray:!0}),L=w[R],j=0;case 107:if(!(j<L.length)){e.next=115;break}if(D=L[j],!Jd(D)&&!Gd(D)){e.next=111;break}throw new zd('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:w});case 111:np(N,R,D,{propertyIsArray:!0});case 112:++j,e.next=107;break;case 115:e.next=100;break;case 117:return e.abrupt("continue",186);case 118:if("@nest"!==_){e.next=121;break}return p.push(m),e.abrupt("continue",186);case 121:if(B=r,U=Zd(r,m,"@context"),e.t5=Wd(U),e.t5){e.next=128;break}return e.next=127,ep({activeCtx:r,localCtx:U,propagate:!0,overrideProtected:!0,options:u});case 127:B=e.sent;case 128:if(!(F=Zd(B,m,"@container")||[]).includes("@language")||!Vd(x)){e.next=133;break}w=dp(B,x,Zd(B,m,"@direction"),u),e.next=170;break;case 133:if(!F.includes("@index")||!Vd(x)){e.next=140;break}return z=F.includes("@graph"),H=Zd(B,m,"@index")||"@index",V="@index"!==H&&Yd(r,H,{vocab:!0},u),e.next=137,pp({activeCtx:B,options:u,activeProperty:m,value:x,expansionMap:h,asGraph:z,indexKey:H,propertyIndex:V});case 137:w=e.sent,e.next=170;break;case 140:if(!F.includes("@id")||!Vd(x)){e.next=147;break}return K=F.includes("@graph"),e.next=144,pp({activeCtx:B,options:u,activeProperty:m,value:x,expansionMap:h,asGraph:K,indexKey:"@id"});case 144:w=e.sent,e.next=170;break;case 147:if(!F.includes("@type")||!Vd(x)){e.next=153;break}return e.next=150,pp({activeCtx:B.revertToPreviousContext(),options:u,activeProperty:m,value:x,expansionMap:h,asGraph:!1,indexKey:"@type"});case 150:w=e.sent,e.next=170;break;case 153:if(!(q="@list"===_)&&"@set"!==_){e.next=162;break}return W=n,q&&"@graph"===i&&(W=null),e.next=159,sp.expand({activeCtx:B,activeProperty:W,element:x,options:u,insideList:q,expansionMap:h});case 159:w=e.sent,e.next=170;break;case 162:if("@json"!==Zd(r,m,"@type")){e.next=166;break}e.t6={"@type":"@json","@value":x},e.next=169;break;case 166:return e.next=168,sp.expand({activeCtx:B,activeProperty:m,element:x,options:u,insideList:!1,expansionMap:h});case 168:e.t6=e.sent;case 169:w=e.t6;case 170:if(null===w&&"@value"!==_&&void 0===(w=h({unmappedValue:x,expandedProperty:_,activeCtx:B,activeProperty:n,parent:a,options:u,insideList:c,key:m,expandedParent:o}))){e.next=186;break}if("@list"!==_&&!Gd(w)&&F.includes("@list")&&(w={"@list":ip(w)}),F.includes("@graph")&&!F.some((function(e){return"@id"===e||"@index"===e}))&&(w=ip(w).map((function(e){return{"@graph":ip(e)}}))),!B.mappings.has(m)||!B.mappings.get(m).reverse){e.next=185;break}G=o["@reverse"]=o["@reverse"]||{},w=ip(w),J=0;case 175:if(!(J<w.length)){e.next=183;break}if(X=w[J],!Jd(X)&&!Gd(X)){e.next=179;break}throw new zd('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:w});case 179:np(G,_,X,{propertyIsArray:!0});case 180:++J,e.next=175;break;case 183:e.next=186;break;case 185:np(o,_,w,{propertyIsArray:!0});case 186:e.next=6;break;case 188:e.next=193;break;case 190:e.prev=190,e.t7=e.catch(4),g.e(e.t7);case 193:return e.prev=193,g.f(),e.finish(193);case 196:if(!("@value"in o)){e.next=203;break}if("@json"!==o["@type"]||!tp(r,1.1)){e.next=201;break}e.next=203;break;case 201:if(!Vd(v)&&!Hd(v)||u.isFrame){e.next=203;break}throw new zd('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:v});case 203:$=0,Y=p;case 204:if(!($<Y.length)){e.next=229;break}Z=Y[$],Q=Hd(a[Z])?a[Z]:[a[Z]],ee=C(Q),e.prev=208,ee.s();case 210:if((te=ee.n()).done){e.next=218;break}if(re=te.value,Vd(re)&&!Object.keys(re).some((function(e){return"@value"===Yd(r,e,{vocab:!0},u)}))){e.next=214;break}throw new zd("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:re});case 214:return e.next=216,lp({activeCtx:r,activeProperty:n,expandedActiveProperty:i,element:re,expandedParent:o,options:u,insideList:c,typeScopedContext:f,typeKey:l,expansionMap:h});case 216:e.next=210;break;case 218:e.next=223;break;case 220:e.prev=220,e.t8=e.catch(208),ee.e(e.t8);case 223:return e.prev=223,ee.f(),e.finish(223);case 226:$++,e.next=204;break;case 229:case"end":return e.stop()}}),e,null,[[4,190,193,196],[67,77,80,83],[208,220,223,226]])}))),fp.apply(this,arguments)}function hp(e){var t=e.activeCtx,n=e.activeProperty,i=e.value,a=e.options;if(null==i)return null;var o=Yd(t,n,{vocab:!0},a);if("@id"===o)return Yd(t,i,{base:!0},a);if("@type"===o)return Yd(t,i,{vocab:!0,base:!0},a);var s=Zd(t,n,"@type");if(("@id"===s||"@graph"===o)&&qd(i))return{"@id":Yd(t,i,{base:!0},a)};if("@vocab"===s&&qd(i))return{"@id":Yd(t,i,{vocab:!0,base:!0},a)};if(Qd(o))return i;var u={};if(s&&!["@id","@vocab","@none"].includes(s))u["@type"]=s;else if(qd(i)){var c=Zd(t,n,"@language");null!==c&&(u["@language"]=c);var l=Zd(t,n,"@direction");null!==l&&(u["@direction"]=l)}return["boolean","number","string"].includes(r(i))||(i=i.toString()),u["@value"]=i,u}function dp(e,t,r,n){var i,a=[],o=C(Object.keys(t).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Yd(e,s,{vocab:!0},n),c=t[s];Hd(c)||(c=[c]);var l,f=C(c);try{for(f.s();!(l=f.n()).done;){var h=l.value;if(null!==h){if(!qd(h))throw new zd("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});var d={"@value":h};"@none"!==u&&(d["@language"]=s.toLowerCase()),r&&(d["@direction"]=r),a.push(d)}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){o.e(e)}finally{o.f()}return a}function pp(e){return vp.apply(this,arguments)}function vp(){return vp=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.activeCtx,n=t.options,i=t.activeProperty,a=t.value,o=t.expansionMap,s=t.asGraph,u=t.indexKey,c=t.propertyIndex,l=[],f=Object.keys(a).sort(),h="@type"===u,d=C(f),e.prev=3,d.s();case 5:if((p=d.n()).done){e.next=46;break}if(v=p.value,!h){e.next=14;break}if(y=Zd(r,v,"@context"),e.t0=Wd(y),e.t0){e.next=14;break}return e.next=13,ep({activeCtx:r,localCtx:y,propagate:!1,options:n});case 13:r=e.sent;case 14:return g=void 0,b=a[v],Hd(b)||(b=[b]),e.next=18,sp.expand({activeCtx:r,activeProperty:i,element:b,options:n,insideList:!1,insideIndex:!0,expansionMap:o});case 18:b=e.sent,g=c?"@none"===v?"@none":hp({activeCtx:r,activeProperty:u,value:v,options:n}):Yd(r,v,{vocab:!0},n),"@id"===u?v=Yd(r,v,{base:!0},n):h&&(v=g),m=C(b),e.prev=22,m.s();case 24:if((w=m.n()).done){e.next=36;break}if(x=w.value,s&&!Xd(x)&&(x={"@graph":[x]}),"@type"!==u){e.next=30;break}"@none"===g||(x["@type"]?x["@type"]=[v].concat(x["@type"]):x["@type"]=[v]),e.next=33;break;case 30:if(!Jd(x)||["@language","@type","@index"].includes(u)){e.next=32;break}throw new zd('Invalid JSON-LD syntax; Attempt to add illegal key to value object: "'.concat(u,'".'),"jsonld.SyntaxError",{code:"invalid value object",value:x});case 32:c?"@none"!==g&&np(x,c,g,{propertyIsArray:!0,prependValue:!0}):"@none"===g||u in x||(x[u]=v);case 33:l.push(x);case 34:e.next=24;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e.catch(22),m.e(e.t1);case 41:return e.prev=41,m.f(),e.finish(41);case 44:e.next=5;break;case 46:e.next=51;break;case 48:e.prev=48,e.t2=e.catch(3),d.e(e.t2);case 51:return e.prev=51,d.f(),e.finish(51);case 54:return e.abrupt("return",l);case 55:case"end":return e.stop()}}),e,null,[[3,48,51,54],[22,38,41,44]])}))),vp.apply(this,arguments)}sp.expand=function(){var e=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.activeCtx,n=t.activeProperty,i=void 0===n?null:n,a=t.element,o=t.options,s=void 0===o?{}:o,u=t.insideList,c=void 0!==u&&u,l=t.insideIndex,f=void 0!==l&&l,h=t.typeScopedContext,d=void 0===h?null:h,p=t.expansionMap,v=void 0===p?function(){}:p,null!=a){e.next=3;break}return e.abrupt("return",null);case 3:if("@default"===i&&(s=Object.assign({},s,{isFrame:!1})),Hd(a)||Vd(a)){e.next=10;break}if(c||null!==i&&"@graph"!==Yd(r,i,{vocab:!0},s)){e.next=9;break}return e.next=7,v({unmappedValue:a,activeCtx:r,activeProperty:i,options:s,insideList:c});case 7:return y=e.sent,e.abrupt("return",void 0===y?null:y);case 9:return e.abrupt("return",hp({activeCtx:r,activeProperty:i,value:a,options:s}));case 10:if(!Hd(a)){e.next=33;break}g=[],b=Zd(r,i,"@container")||[],c=c||b.includes("@list"),m=0;case 15:if(!(m<a.length)){e.next=32;break}return e.next=18,sp.expand({activeCtx:r,activeProperty:i,element:a[m],options:s,expansionMap:v,insideIndex:f,typeScopedContext:d});case 18:if(w=e.sent,c&&Hd(w)&&(w={"@list":w}),e.t0=null===w,!e.t0){e.next=26;break}return e.next=24,v({unmappedValue:a[m],activeCtx:r,activeProperty:i,parent:a,index:m,options:s,expandedParent:g,insideList:c});case 24:w=e.sent,e.t0=void 0===w;case 26:if(e.t1=e.t0,e.t1){e.next=29;break}Hd(w)?g=g.concat(w):g.push(w);case 29:++m,e.next=15;break;case 32:return e.abrupt("return",g);case 33:if(x=Yd(r,i,{vocab:!0},s),_=Zd(r,i,"@context"),d=d||(r.previousContext?r:null),k=Object.keys(a).sort(),!((S=!f)&&d&&k.length<=2)||k.includes("@context")){e.next=59;break}E=C(k),e.prev=38,E.s();case 40:if((I=E.n()).done){e.next=51;break}if(A=I.value,"@value"!==(T=Yd(d,A,{vocab:!0},s))){e.next=46;break}return S=!1,r=d,e.abrupt("break",51);case 46:if("@id"!==T||1!==k.length){e.next=49;break}return S=!1,e.abrupt("break",51);case 49:e.next=40;break;case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(38),E.e(e.t2);case 56:return e.prev=56,E.f(),e.finish(56);case 59:if(S&&(r=r.revertToPreviousContext()),e.t3=Wd(_),e.t3){e.next=65;break}return e.next=64,ep({activeCtx:r,localCtx:_,propagate:!0,overrideProtected:!0,options:s});case 64:r=e.sent;case 65:if(e.t4="@context"in a,!e.t4){e.next=70;break}return e.next=69,ep({activeCtx:r,localCtx:a["@context"],options:s});case 69:r=e.sent;case 70:d=r,P=null,O=C(k),e.prev=73,O.s();case 75:if((M=O.n()).done){e.next=103;break}if(N=M.value,"@type"!==Yd(r,N,{vocab:!0},s)){e.next=101;break}P=P||N,R=a[N],L=Array.isArray(R)?R.length>1?R.slice().sort():R:[R],j=C(L),e.prev=81,j.s();case 83:if((D=j.n()).done){e.next=93;break}if(B=D.value,U=Zd(d,B,"@context"),e.t5=Wd(U),e.t5){e.next=91;break}return e.next=90,ep({activeCtx:r,localCtx:U,options:s,propagate:!1});case 90:r=e.sent;case 91:e.next=83;break;case 93:e.next=98;break;case 95:e.prev=95,e.t6=e.catch(81),j.e(e.t6);case 98:return e.prev=98,j.f(),e.finish(98);case 101:e.next=75;break;case 103:e.next=108;break;case 105:e.prev=105,e.t7=e.catch(73),O.e(e.t7);case 108:return e.prev=108,O.f(),e.finish(108);case 111:return F={},e.next=114,lp({activeCtx:r,activeProperty:i,expandedActiveProperty:x,element:a,expandedParent:F,options:s,insideList:c,typeKey:P,typeScopedContext:d,expansionMap:v});case 114:if(k=Object.keys(F),z=k.length,!("@value"in F)){e.next=140;break}if(!("@type"in F)||!("@language"in F)&&!("@direction"in F)){e.next=119;break}throw new zd('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:F});case 119:if(H=z-1,"@type"in F&&(H-=1),"@index"in F&&(H-=1),"@language"in F&&(H-=1),"@direction"in F&&(H-=1),0===H){e.next=122;break}throw new zd('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:F});case 122:if(V=null===F["@value"]?[]:ip(F["@value"]),K=ap(F,"@type"),!tp(r,1.1)||!K.includes("@json")||1!==K.length){e.next=127;break}e.next=138;break;case 127:if(0!==V.length){e.next=134;break}return e.next=130,v({unmappedValue:F,activeCtx:r,activeProperty:i,element:a,options:s,insideList:c});case 130:q=e.sent,F=void 0!==q?q:null,e.next=138;break;case 134:if(V.every((function(e){return qd(e)||Kd(e)}))||!("@language"in F)){e.next=136;break}throw new zd("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:F});case 136:if(K.every((function(e){return rp(e)&&!(qd(e)&&0===e.indexOf("_:"))||Kd(e)}))){e.next=138;break}throw new zd('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:F});case 138:e.next=155;break;case 140:if(!("@type"in F)||Hd(F["@type"])){e.next=144;break}F["@type"]=[F["@type"]],e.next=155;break;case 144:if(!("@set"in F)&&!("@list"in F)){e.next=150;break}if(!(z>1)||2===z&&"@index"in F){e.next=147;break}throw new zd('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:F});case 147:"@set"in F&&(F=F["@set"],k=Object.keys(F),z=k.length),e.next=155;break;case 150:if(1!==z||!("@language"in F)){e.next=155;break}return e.next=153,v(F,{unmappedValue:F,activeCtx:r,activeProperty:i,element:a,options:s,insideList:c});case 153:W=e.sent,F=void 0!==W?W:null;case 155:if(!Vd(F)||s.keepFreeFloatingNodes||c||null!==i&&"@graph"!==x||!(0===z||"@value"in F||"@list"in F||1===z&&"@id"in F)){e.next=160;break}return e.next=158,v({unmappedValue:F,activeCtx:r,activeProperty:i,element:a,options:s,insideList:c});case 158:G=e.sent,F=void 0!==G?G:null;case 160:return e.abrupt("return",F);case 161:case"end":return e.stop()}}),e,null,[[38,53,56,59],[73,105,108,111],[81,95,98,101]])})));return function(t){return e.apply(this,arguments)}}();var yp=Bd.isKeyword,gp=jh,bp=Nh,mp=Gh,wp=Dh,xp={},_p=xp;xp.createMergedNodeMap=function(e,t){var r=(t=t||{}).issuer||new mp.IdentifierIssuer("_:b"),n={"@default":{}};return xp.createNodeMap(e,n,"@default",r),xp.mergeNodeMaps(n)},xp.createNodeMap=function(e,t,r,n,i,a){if(bp.isArray(e)){var o,s=C(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;xp.createNodeMap(u,t,r,n,void 0,a)}}catch(e){s.e(e)}finally{s.f()}}else if(bp.isObject(e))if(gp.isValue(e)){if("@type"in e){var c=e["@type"];0===c.indexOf("_:")&&(e["@type"]=c=n.getId(c))}a&&a.push(e)}else{if(a&&gp.isList(e)){var l=[];return xp.createNodeMap(e["@list"],t,r,n,i,l),void a.push({"@list":l})}if("@type"in e){var f,h=C(e["@type"]);try{for(h.s();!(f=h.n()).done;){var d=f.value;0===d.indexOf("_:")&&n.getId(d)}}catch(e){h.e(e)}finally{h.f()}}bp.isUndefined(i)&&(i=gp.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),a&&a.push({"@id":i});var p=t[r],v=p[i]=p[i]||{};v["@id"]=i;var y,g=C(Object.keys(e).sort());try{for(g.s();!(y=g.n()).done;){var b=y.value;if("@id"!==b)if("@reverse"!==b)if("@graph"!==b)if("@included"!==b)if("@type"!==b&&yp(b)){if("@index"===b&&b in v&&(e[b]!==v[b]||e[b]["@id"]!==v[b]["@id"]))throw new wp("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:v});v[b]=e[b]}else{var m=e[b];if(0===b.indexOf("_:")&&(b=n.getId(b)),0!==m.length){var w,x=C(m);try{for(x.s();!(w=x.n()).done;){var _=w.value;if("@type"===b&&(_=0===_.indexOf("_:")?n.getId(_):_),gp.isSubject(_)||gp.isSubjectReference(_)){if("@id"in _&&!_["@id"])continue;var k=gp.isBlankNode(_)?n.getId(_["@id"]):_["@id"];mp.addValue(v,b,{"@id":k},{propertyIsArray:!0,allowDuplicate:!1}),xp.createNodeMap(_,t,r,n,k)}else if(gp.isValue(_))mp.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1});else if(gp.isList(_)){var S=[];xp.createNodeMap(_["@list"],t,r,n,i,S),_={"@list":S},mp.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}else xp.createNodeMap(_,t,r,n,i),mp.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){x.e(e)}finally{x.f()}}else mp.addValue(v,b,[],{propertyIsArray:!0})}else xp.createNodeMap(e[b],t,r,n);else i in t||(t[i]={}),xp.createNodeMap(e[b],t,i,n);else{var E={"@id":i},I=e["@reverse"];for(var A in I){var T,P=C(I[A]);try{for(P.s();!(T=P.n()).done;){var O=T.value,M=O["@id"];gp.isBlankNode(O)&&(M=n.getId(M)),xp.createNodeMap(O,t,r,n,M),mp.addValue(p[M],A,E,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){P.e(e)}finally{P.f()}}}}}catch(e){g.e(e)}finally{g.f()}}else a&&a.push(e)},xp.mergeNodeMapGraphs=function(e){var t,r={},n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=C(Object.keys(e[a]).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e[a][s];s in r||(r[s]={"@id":s});var c,l=r[s],f=C(Object.keys(u).sort());try{for(f.s();!(c=f.n()).done;){var h=c.value;if(yp(h)&&"@type"!==h)l[h]=mp.clone(u[h]);else{var d,p=C(u[h]);try{for(p.s();!(d=p.n()).done;){var v=d.value;mp.addValue(l,h,mp.clone(v),{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return r},xp.mergeNodeMaps=function(e){var t,r=e["@default"],n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("@default"!==i){var a=e[i],o=r[i];o?"@graph"in o||(o["@graph"]=[]):r[i]=o={"@id":i,"@graph":[]};var s,u=o["@graph"],c=C(Object.keys(a).sort());try{for(c.s();!(s=c.n()).done;){var l=a[s.value];gp.isSubjectReference(l)||u.push(l)}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){n.e(e)}finally{n.f()}return r};var kp=jh.isSubjectReference,Sp=_p.createMergedNodeMap,Ep={},Ip=Ep;Ep.flatten=function(e){for(var t=Sp(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=t[n[i]];kp(a)||r.push(a)}return r};var Ap=Dh,Tp=jh,Pp=Nh,Op=Gh,Cp=Yh.RDF_LIST,Mp=Yh.RDF_FIRST,Np=Yh.RDF_REST,Rp=Yh.RDF_NIL,Lp=Yh.RDF_TYPE,jp=Yh.RDF_JSON_LITERAL,Dp=Yh.XSD_BOOLEAN,Bp=Yh.XSD_DOUBLE,Up=Yh.XSD_INTEGER,Fp=Yh.XSD_STRING,zp=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Hp={},Vp=Hp;function Kp(e,t,r){if(e.termType.endsWith("Node"))return{"@id":e.value};var n={"@value":e.value};if(e.language)n["@language"]=e.language;else{var i=e.datatype.value;if(i||(i=Fp),i===jp){i="@json";try{n["@value"]=JSON.parse(n["@value"])}catch(e){throw new Ap("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:n["@value"],cause:e})}}if(t){if(i===Dp)"true"===n["@value"]?n["@value"]=!0:"false"===n["@value"]&&(n["@value"]=!1);else if(Pp.isNumeric(n["@value"]))if(i===Up){var a=parseInt(n["@value"],10);a.toFixed(0)===n["@value"]&&(n["@value"]=a)}else i===Bp&&(n["@value"]=parseFloat(n["@value"]));[Dp,Up,Bp,Fp].includes(i)||(n["@type"]=i)}else if("i18n-datatype"===r&&i.startsWith("https://www.w3.org/ns/i18n#")){var o=k(i.split(/[#_]/),3),s=o[1],u=o[2];s.length>0&&(n["@language"]=s,s.match(zp)||console.warn("@language must be valid BCP47: ".concat(s))),n["@direction"]=u}else i!==Fp&&(n["@type"]=i)}return n}Hp.fromRDF=function(){var e=i(Wt.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$,Y,Z;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.useRdfType,i=void 0!==n&&n,a=r.useNativeTypes,o=void 0!==a&&a,s=r.rdfDirection,u=void 0===s?null:s,l={"@default":c={}},f={},h=C(t),e.prev=3,h.s();case 5:if((d=h.n()).done){e.next=19;break}if(p=d.value,(v="DefaultGraph"===p.graph.termType?"@default":p.graph.value)in l||(l[v]={}),"@default"===v||v in c||(c[v]={"@id":v}),y=l[v],g=p.subject.value,b=p.predicate.value,m=p.object,g in y||(y[g]={"@id":g}),w=y[g],(x=m.termType.endsWith("Node"))&&!(m.value in y)&&(y[m.value]={"@id":m.value}),b!==Lp||i||!x){e.next=15;break}return Op.addValue(w,"@type",m.value,{propertyIsArray:!0}),e.abrupt("continue",17);case 15:_=Kp(m,o,u),Op.addValue(w,b,_,{propertyIsArray:!0}),x&&(m.value===Rp?("usages"in(k=y[m.value])||(k.usages=[]),k.usages.push({node:w,property:b,value:_})):m.value in f?f[m.value]=!1:f[m.value]={node:w,property:b,value:_});case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),h.e(e.t0);case 24:return e.prev=24,h.f(),e.finish(24);case 27:e.t1=Wt.keys(l);case 28:if((e.t2=e.t1()).done){e.next=37;break}if(S=e.t2.value,E=l[S],Rp in E){e.next=33;break}return e.abrupt("continue",28);case 33:if((I=E[Rp]).usages){A=C(I.usages);try{for(A.s();!(T=A.n()).done;){for(P=T.value,O=P.node,M=P.property,N=P.value,R=[],L=[],j=Object.keys(O).length;M===Np&&Pp.isObject(f[O["@id"]])&&Pp.isArray(O[Mp])&&1===O[Mp].length&&Pp.isArray(O[Np])&&1===O[Np].length&&(3===j||4===j&&Pp.isArray(O["@type"])&&1===O["@type"].length&&O["@type"][0]===Cp)&&(R.push(O[Mp][0]),L.push(O["@id"]),P=f[O["@id"]],O=P.node,M=P.property,N=P.value,j=Object.keys(O).length,Tp.isBlankNode(O)););for(delete N["@id"],N["@list"]=R.reverse(),D=0,B=L;D<B.length;D++)U=B[D],delete E[U]}}catch(e){A.e(e)}finally{A.f()}delete I.usages}e.next=28;break;case 37:F=[],z=Object.keys(c).sort(),H=C(z);try{for(H.s();!(V=H.n()).done;){if(K=V.value,q=c[K],K in l){W=q["@graph"]=[],G=l[K],J=Object.keys(G).sort(),X=C(J);try{for(X.s();!($=X.n()).done;)Y=$.value,Z=G[Y],Tp.isSubjectReference(Z)||W.push(Z)}catch(e){X.e(e)}finally{X.f()}}Tp.isSubjectReference(q)||F.push(q)}}catch(e){H.e(e)}finally{H.f()}return e.abrupt("return",F);case 41:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})));return function(t,r){return e.apply(this,arguments)}}();var qp=_p.createNodeMap,Wp=Bd.isKeyword,Gp=jh,Jp=function e(t){return null===t||"object"!=r(t)||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((function(t,n,i){return t+(0===i?"":",")+e(void 0===n||"symbol"==r(n)?null:n)}),"")+"]":"{"+Object.keys(t).sort().reduce((function(n,i,a){return void 0===t[i]||"symbol"==r(t[i])?n:n+(0===n.length?"":",")+e(i)+":"+e(t[i])}),"")+"}"},Xp=Nh,$p=Gh,Yp=Yh.RDF_FIRST,Zp=Yh.RDF_REST,Qp=Yh.RDF_NIL,ev=Yh.RDF_TYPE,tv=Yh.RDF_JSON_LITERAL,rv=Yh.RDF_LANGSTRING,nv=Yh.XSD_BOOLEAN,iv=Yh.XSD_DOUBLE,av=Yh.XSD_INTEGER,ov=Yh.XSD_STRING,sv=td.isAbsolute,uv={},cv=uv;function lv(e,t,r,n,i){var a,o=C(Object.keys(t).sort());try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=t[u],l=C(Object.keys(c).sort());try{for(l.s();!(s=l.n()).done;){var f=s.value,h=c[f];if("@type"===f)f=ev;else if(Wp(f))continue;var d,p=C(h);try{for(p.s();!(d=p.n()).done;){var v=d.value,y={termType:u.startsWith("_:")?"BlankNode":"NamedNode",value:u};if(sv(u)){var g={termType:f.startsWith("_:")?"BlankNode":"NamedNode",value:f};if(sv(f)&&("BlankNode"!==g.termType||i.produceGeneralizedRdf)){var b=fv(v,n,e,r,i.rdfDirection);b&&e.push({subject:y,predicate:g,object:b,graph:r})}}}}catch(e){p.e(e)}finally{p.f()}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}}function fv(e,t,r,n,i){var a={};if(Gp.isValue(e)){a.termType="Literal",a.value=void 0,a.datatype={termType:"NamedNode"};var o=e["@value"],s=e["@type"]||null;if("@json"===s)a.value=Jp(o),a.datatype.value=tv;else if(Xp.isBoolean(o))a.value=o.toString(),a.datatype.value=s||nv;else if(Xp.isDouble(o)||s===iv)Xp.isDouble(o)||(o=parseFloat(o)),a.value=o.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),a.datatype.value=s||iv;else if(Xp.isNumber(o))a.value=o.toFixed(0),a.datatype.value=s||av;else if("i18n-datatype"===i&&"@direction"in e){var u="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+"_".concat(e["@direction"]);a.datatype.value=u,a.value=o}else"@language"in e?(a.value=o,a.datatype.value=s||rv,a.language=e["@language"]):(a.value=o,a.datatype.value=s||ov)}else if(Gp.isList(e)){var c=function(e,t,r,n,i){var a,o={termType:"NamedNode",value:Yp},s={termType:"NamedNode",value:Zp},u={termType:"NamedNode",value:Qp},c=e.pop(),l=c?{termType:"BlankNode",value:t.getId()}:u,f=l,h=C(e);try{for(h.s();!(a=h.n()).done;){var d=fv(a.value,t,r,n,i),p={termType:"BlankNode",value:t.getId()};r.push({subject:f,predicate:o,object:d,graph:n}),r.push({subject:f,predicate:s,object:p,graph:n}),f=p}}catch(e){h.e(e)}finally{h.f()}if(c){var v=fv(c,t,r,n,i);r.push({subject:f,predicate:o,object:v,graph:n}),r.push({subject:f,predicate:s,object:u,graph:n})}return l}(e["@list"],t,r,n,i);a.termType=c.termType,a.value=c.value}else{var l=Xp.isObject(e)?e["@id"]:e;a.termType=l.startsWith("_:")?"BlankNode":"NamedNode",a.value=l}return"NamedNode"!==a.termType||sv(a.value)?a:null}uv.toRDF=function(e,t){var r=new $p.IdentifierIssuer("_:b"),n={"@default":{}};qp(e,n,"@default",r);var i,a=[],o=C(Object.keys(n).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=void 0;if("@default"===s)u={termType:"DefaultGraph",value:""};else{if(!sv(s))continue;(u=s.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=s}lv(a,n[s],u,r,t)}}catch(e){o.e(e)}finally{o.f()}return a};var hv=Bd.isKeyword,dv=jh,pv=Nh,vv=Gh,yv=td,gv=Dh,bv=_p.createNodeMap,mv=_p.mergeNodeMapGraphs,wv={},xv=wv;function _v(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function kv(e,t,r){for(var n=r.length-1;n>=0;--n){var i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function Sv(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];if("embed"===r)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new gv("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function Ev(e){if(!pv.isArray(e)||1!==e.length||!pv.isObject(e[0]))throw new gv("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0]){var t,r=C(vv.asArray(e[0]["@id"]));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!pv.isObject(n)&&!yv.isAbsolute(n)||pv.isString(n)&&0===n.indexOf("_:"))throw new gv("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}catch(e){r.e(e)}finally{r.f()}}if("@type"in e[0]){var i,a=C(vv.asArray(e[0]["@type"]));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!pv.isObject(o)&&!yv.isAbsolute(o)||pv.isString(o)&&0===o.indexOf("_:"))throw new gv("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}catch(e){a.e(e)}finally{a.f()}}}function Iv(e,t,n,i){var a=!0,o=!1;for(var s in n){var u=!1,c=vv.getValues(t,s),l=0===vv.getValues(n,s).length;if("@id"===s){if(pv.isEmptyObject(n["@id"][0]||{})?u=!0:n["@id"].length>=0&&(u=n["@id"].includes(c[0])),!i.requireAll)return u}else if("@type"===s){if(a=!1,l){if(c.length>0)return!1;u=!0}else if(1===n["@type"].length&&pv.isEmptyObject(n["@type"][0]))u=c.length>0;else{var f,h=C(n["@type"]);try{var d=function(){var e=f.value;u=!(!pv.isObject(e)||!("@default"in e))||u||c.some((function(t){return t===e}))};for(h.s();!(f=h.n()).done;)d()}catch(e){h.e(e)}finally{h.f()}}if(!i.requireAll)return u}else{if(hv(s))continue;var p=function(){var t=vv.getValues(n,s)[0],r=!1;if(t&&(Ev([t]),r="@default"in t),a=!1,0===c.length&&r)return"continue";if(c.length>0&&l)return{v:!1};if(void 0===t){if(c.length>0)return{v:!1};u=!0}else if(dv.isList(t)){var o=t["@list"][0];if(dv.isList(c[0])){var f=c[0]["@list"];dv.isValue(o)?u=f.some((function(e){return Cv(o,e)})):(dv.isSubject(o)||dv.isSubjectReference(o))&&(u=f.some((function(t){return Ov(e,o,t,i)})))}}else u=dv.isValue(t)?c.some((function(e){return Cv(t,e)})):dv.isSubjectReference(t)?c.some((function(r){return Ov(e,t,r,i)})):!!pv.isObject(t)&&c.length>0}();if("continue"===p)continue;if("object"===r(p))return p.v}if(!u&&i.requireAll)return!1;o=o||u}return a||o}function Av(e,t){var r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,a=n.property,o={"@id":t};if(pv.isArray(i)){for(var s=0;s<i.length;++s)if(vv.compareValues(i[s],o)){i[s]=o;break}}else{var u=pv.isArray(i[a]);vv.removeValue(i,a,o,{propertyIsArray:u}),vv.addValue(i,a,o,{propertyIsArray:u})}!function e(t){for(var n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];a in r&&pv.isObject(r[a].parent)&&r[a].parent["@id"]===t&&(delete r[a],e(a))}}(t)}
/**
   * Removes the @preserve keywords from expanded result of framing.
   *
   * @param input the framed, framed output.
   * @param options the framing options used.
   *
   * @return the resulting output.
   */function Tv(e,t){if(pv.isArray(e))return e.map((function(e){return Tv(e,t)}));if(pv.isObject(e)){// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(dv.isValue(e))return e;if(dv.isList(e))return e["@list"]=Tv(e["@list"],t),e;if("@id"in e){var r=e["@id"];if(t.link.hasOwnProperty(r)){var n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(var i in e)"@id"===i&&t.bnodesToClear.includes(e[i])?delete e["@id"]:e[i]=Tv(e[i],t)}return e}function Pv(e,t,r){pv.isObject(e)?vv.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function Ov(e,t,r,n){if(!("@id"in r))return!1;var i=e.subjects[r["@id"]];return i&&Iv(e,i,t,n)}function Cv(e,t){var r=t["@value"],n=t["@type"],i=t["@language"],a=e["@value"]?pv.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],o=e["@type"]?pv.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],s=e["@language"]?pv.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===o.length&&0===s.length||!(!a.includes(r)&&!pv.isEmptyObject(a[0]))&&!!(!n&&0===o.length||o.includes(n)||n&&pv.isEmptyObject(o[0]))&&!!(!i&&0===s.length||s.includes(i)||i&&pv.isEmptyObject(s[0]))}wv.frameMergedOrDefault=function(e,t,r){var n={options:r,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new vv.IdentifierIssuer("_:b");bv(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=mv(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];var a=[];return wv.frame(n,Object.keys(n.subjects).sort(),t,a),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((function(e){return 1===n.bnodeMap[e].length}))),// remove @preserve from results
r.link={},Tv(a,r)},wv.frame=function(e,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ev(n),n=n[0];var o=e.options,s={embed:Sv(n,o,"embed"),explicit:Sv(n,o,"explicit"),requireAll:Sv(n,o,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});var c,l=e.link[e.graph],f=function(e,t,r,n){var i,a={},o=C(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e.graphMap[e.graph][s];Iv(e,u,r,n)&&(a[s]=u)}}catch(e){o.e(e)}finally{o.f()}return a}(e,r,n,s),h=Object.keys(f).sort(),d=C(h);try{var p=function(){var h=c.value,d=f[h];if(null===a?e.uniqueEmbeds=u({},e.graph,{}):e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===s.embed&&h in l)return Pv(i,a,l[h]),"continue";var p={"@id":h};if(0===h.indexOf("_:")&&vv.addValue(e.bnodeMap,h,p,{propertyIsArray:!0}),l[h]=p,("@first"===s.embed||"@last"===s.embed)&&e.is11)throw new gv("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(h))if(!e.embedded||"@never"!==s.embed&&!kv(d,e.graph,e.subjectStack))if(!e.embedded||"@first"!=s.embed&&"@once"!=s.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(h)){if("@last"===s.embed&&h in e.uniqueEmbeds[e.graph]&&Av(e,h),e.uniqueEmbeds[e.graph][h]={parent:i,property:a},e.subjectStack.push({subject:d,graph:e.graph}),h in e.graphMap){var v=!1,y=null;"@graph"in n?(y=n["@graph"][0],v=!("@merged"===h||"@default"===h),pv.isObject(y)||(y={})):(v="@merged"!==e.graph,y={}),v&&wv.frame(t(t({},e),{},{graph:h,embedded:!1}),Object.keys(e.graphMap[h]).sort(),[y],p,"@graph")}"@included"in n&&wv.frame(t(t({},e),{},{embedded:!1}),r,n["@included"],p,"@included");var g,b=C(Object.keys(d).sort());try{for(b.s();!(g=b.n()).done;){var m=g.value;if(hv(m)){if(p[m]=vv.clone(d[m]),"@type"===m){var w,x=C(d["@type"]);try{for(x.s();!(w=x.n()).done;){var _=w.value;0===_.indexOf("_:")&&vv.addValue(e.bnodeMap,_,p,{propertyIsArray:!0})}}catch(e){x.e(e)}finally{x.f()}}}else if(!s.explicit||m in n){var k,S=C(d[m]);try{for(S.s();!(k=S.n()).done;){var E=k.value,I=m in n?n[m]:_v(s);if(dv.isList(E)){var A=n[m]&&n[m][0]&&n[m][0]["@list"]?n[m][0]["@list"]:_v(s),T={"@list":[]};Pv(p,m,T);var P,O=C(E["@list"]);try{for(O.s();!(P=O.n()).done;){var M=P.value;dv.isSubjectReference(M)?wv.frame(t(t({},e),{},{embedded:!0}),[M["@id"]],A,T,"@list"):Pv(T,"@list",vv.clone(M))}}catch(e){O.e(e)}finally{O.f()}}else dv.isSubjectReference(E)?wv.frame(t(t({},e),{},{embedded:!0}),[E["@id"]],I,p,m):Cv(I[0],E)&&Pv(p,m,vv.clone(E))}}catch(e){S.e(e)}finally{S.f()}}}}catch(e){b.e(e)}finally{b.f()}var N,R=C(Object.keys(n).sort());try{for(R.s();!(N=R.n()).done;){var L=N.value;if("@type"===L){if(!pv.isObject(n[L][0])||!("@default"in n[L][0]))continue}else if(hv(L))continue;var j=n[L][0]||{};if(!Sv(j,o,"omitDefault")&&!(L in p)){var D="@null";"@default"in j&&(D=vv.clone(j["@default"])),pv.isArray(D)||(D=[D]),p[L]=[{"@preserve":D}]}}}catch(e){R.e(e)}finally{R.f()}var B,U=C(Object.keys(n["@reverse"]||{}).sort());try{for(U.s();!(B=U.n()).done;)for(var F=B.value,z=n["@reverse"][F],H=0,V=Object.keys(e.subjects);H<V.length;H++){var K=V[H];vv.getValues(e.subjects[K],F).some((function(e){return e["@id"]===h}))&&(p["@reverse"]=p["@reverse"]||{},vv.addValue(p["@reverse"],F,[],{propertyIsArray:!0}),wv.frame(t(t({},e),{},{embedded:!0}),[K],z,p["@reverse"][F],a))}}catch(e){U.e(e)}finally{U.f()}Pv(i,a,p),e.subjectStack.pop()}else Pv(i,a,p);else Pv(i,a,p)};for(d.s();!(c=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}},wv.cleanupNull=function(e,t){if(pv.isArray(e))return e.map((function(e){return wv.cleanupNull(e,t)})).filter((function(e){return e}));if("@null"===e)return null;if(pv.isObject(e)){if("@id"in e){var r=e["@id"];if(t.link.hasOwnProperty(r)){var n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(var i in e)e[i]=wv.cleanupNull(e[i],t)}return e};var Mv=Dh,Nv=Nh.isArray,Rv=Nh.isObject,Lv=Nh.isString,jv=Nh.isUndefined,Dv=jh.isList,Bv=jh.isValue,Uv=jh.isGraph,Fv=jh.isSimpleGraph,zv=jh.isSubjectReference,Hv=Bd.expandIri,Vv=Bd.getContextValue,Kv=Bd.isKeyword,qv=Bd.process,Wv=Bd.processingMode,Gv=td.removeBase,Jv=td.prependBase,Xv=Gh.addValue,$v=Gh.asArray,Yv=Gh.compareShortestLeast,Zv={},Qv=Zv;function ey(e,t,r){if("@nest"!==Hv(e,t,{vocab:!0},r))throw new Mv("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Zv.compact=function(){var e=i(Wt.mark((function e(t){var n,i,a,o,s,c,l,f,h,d,p,v,y;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.activeCtx,i=t.activeProperty,a=void 0===i?null:i,o=t.element,s=t.options,c=void 0===s?{}:s,l=t.compactionMap,f=void 0===l?function(){}:l,!Nv(o)){e.next=22;break}h=[],d=0;case 4:if(!(d<o.length)){e.next=20;break}return e.next=7,Zv.compact({activeCtx:n,activeProperty:a,element:o[d],options:c,compactionMap:f});case 7:if(p=e.sent,e.t0=null===p,!e.t0){e.next=14;break}return e.next=12,f({unmappedValue:o[d],activeCtx:n,activeProperty:a,parent:o,index:d,options:c});case 12:p=e.sent,e.t0=void 0===p;case 14:if(e.t1=e.t0,e.t1){e.next=17;break}h.push(p);case 17:++d,e.next=4;break;case 20:return c.compactArrays&&1===h.length&&0===(Vv(n,a,"@container")||[]).length&&(h=h[0]),e.abrupt("return",h);case 22:if(v=Vv(n,a,"@context"),e.t2=jv(v),e.t2){e.next=28;break}return e.next=27,qv({activeCtx:n,localCtx:v,propagate:!0,overrideProtected:!0,options:c});case 27:n=e.sent;case 28:if(!Rv(o)){e.next=33;break}return e.delegateYield(Wt.mark((function e(){var t,r,i,s,l,h,d,p,v,y,g,b,m,w,x,_,k,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$,Y,Z,Q,ee,te,re,ne,ie,ae,oe,se,ue,ce,le,fe,he,de,pe;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.link&&"@id"in o&&c.link.hasOwnProperty(o["@id"]))){e.next=9;break}i=c.link[o["@id"]],s=0;case 3:if(!(s<i.length)){e.next=9;break}if(i[s].expanded!==o){e.next=6;break}return e.abrupt("return",{v:i[s].compacted});case 6:++s,e.next=3;break;case 9:if(!Bv(o)&&!zv(o)){e.next=12;break}return l=Zv.compactValue({activeCtx:n,activeProperty:a,value:o,options:c}),e.abrupt("return",{v:(c.link&&zv(o)&&(c.link.hasOwnProperty(o["@id"])||(c.link[o["@id"]]=[]),c.link[o["@id"]].push({expanded:o,compacted:l})),l)});case 12:if(!Dv(o)){e.next=15;break}if(!(Vv(n,a,"@container")||[]).includes("@list")){e.next=15;break}return e.abrupt("return",{v:Zv.compact({activeCtx:n,activeProperty:a,element:o["@list"],options:c,compactionMap:f})});case 15:if(h="@reverse"===a,d={},p=n,Bv(o)||zv(o)||(n=n.revertToPreviousContext()),v=Vv(p,a,"@context"),e.t0=jv(v),e.t0){e.next=23;break}return e.next=22,qv({activeCtx:n,localCtx:v,propagate:!0,overrideProtected:!0,options:c});case 22:n=e.sent;case 23:c.link&&"@id"in o&&(c.link.hasOwnProperty(o["@id"])||(c.link[o["@id"]]=[]),c.link[o["@id"]].push({expanded:o,compacted:d})),(y=o["@type"]||[]).length>1&&(y=Array.from(y).sort()),g=n,b=C(y),e.prev=28,b.s();case 30:if((m=b.n()).done){e.next=40;break}if(w=m.value,x=Zv.compactIri({activeCtx:g,iri:w,relativeTo:{vocab:!0}}),_=Vv(p,x,"@context"),e.t1=jv(_),e.t1){e.next=38;break}return e.next=37,qv({activeCtx:n,localCtx:_,options:c,propagate:!1});case 37:n=e.sent;case 38:e.next=30;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(28),b.e(e.t2);case 45:return e.prev=45,b.f(),e.finish(45);case 48:k=Object.keys(o).sort(),E=C(k),e.prev=50,E.s();case 52:if((I=E.n()).done){e.next=186;break}if(A=I.value,T=o[A],"@id"===A){e.next=181;break}if("@type"===A){e.next=175;break}if("@reverse"===A){e.next=168;break}if("@preserve"===A){e.next=162;break}if("@index"===A){e.next=156;break}if("@graph"===A||"@list"===A||"@included"===A||!Kv(A)){e.next=65;break}P=Zv.compactIri({activeCtx:n,iri:A,relativeTo:{vocab:!0}}),Xv(d,P,T),e.next=154;break;case 65:if(Nv(T)){e.next=67;break}throw new Mv("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");case 67:0===T.length&&(O=Zv.compactIri({activeCtx:n,iri:A,value:T,relativeTo:{vocab:!0},reverse:h}),M=n.mappings.has(O)?n.mappings.get(O)["@nest"]:null,N=d,M&&(ey(n,M,c),Rv(d[M])||(d[M]={}),N=d[M]),Xv(N,O,T,{propertyIsArray:!0})),R=C(T),e.prev=69,R.s();case 71:if((L=R.n()).done){e.next=146;break}return j=L.value,D=Zv.compactIri({activeCtx:n,iri:A,value:j,relativeTo:{vocab:!0},reverse:h}),B=n.mappings.has(D)?n.mappings.get(D)["@nest"]:null,U=d,B&&(ey(n,B,c),Rv(d[B])||(d[B]={}),U=d[B]),F=Vv(n,D,"@container")||[],z=Uv(j),H=Dv(j),V=void 0,H?V=j["@list"]:z&&(V=j["@graph"]),e.next=81,Zv.compact({activeCtx:n,activeProperty:D,element:H||z?V:j,options:c,compactionMap:f});case 81:if(K=e.sent,!H){e.next=87;break}if(Nv(K)||(K=[K]),!F.includes("@list")){e.next=86;break}return Xv(U,D,K,{valueIsArray:!0,allowDuplicate:!0}),e.abrupt("continue",144);case 86:K=u({},Zv.compactIri({activeCtx:n,iri:"@list",relativeTo:{vocab:!0}}),K),"@index"in j&&(K[Zv.compactIri({activeCtx:n,iri:"@index",relativeTo:{vocab:!0}})]=j["@index"]);case 87:if(!z){e.next=91;break}F.includes("@graph")&&(F.includes("@id")||F.includes("@index")&&Fv(j))?(q=void 0,U.hasOwnProperty(D)?q=U[D]:U[D]=q={},W=(F.includes("@id")?j["@id"]:j["@index"])||Zv.compactIri({activeCtx:n,iri:"@none",relativeTo:{vocab:!0}}),Xv(q,W,K,{propertyIsArray:!c.compactArrays||F.includes("@set")})):F.includes("@graph")&&Fv(j)?(Nv(K)&&K.length>1&&(K={"@included":K}),Xv(U,D,K,{propertyIsArray:!c.compactArrays||F.includes("@set")})):(Nv(K)&&1===K.length&&c.compactArrays&&(K=K[0]),K=u({},Zv.compactIri({activeCtx:n,iri:"@graph",relativeTo:{vocab:!0}}),K),"@id"in j&&(K[Zv.compactIri({activeCtx:n,iri:"@id",relativeTo:{vocab:!0}})]=j["@id"]),"@index"in j&&(K[Zv.compactIri({activeCtx:n,iri:"@index",relativeTo:{vocab:!0}})]=j["@index"]),Xv(U,D,K,{propertyIsArray:!c.compactArrays||F.includes("@set")})),e.next=144;break;case 91:if(!(F.includes("@language")||F.includes("@index")||F.includes("@id")||F.includes("@type"))){e.next=142;break}if(G=void 0,J=void 0,U.hasOwnProperty(D)?G=U[D]:U[D]=G={},!F.includes("@language")){e.next=97;break}Bv(K)&&(K=K["@value"]),J=j["@language"],e.next=139;break;case 97:if(!F.includes("@index")){e.next=118;break}if(X=Vv(n,D,"@index")||"@index",$=Zv.compactIri({activeCtx:n,iri:X,relativeTo:{vocab:!0}}),"@index"!==X){e.next=103;break}J=j["@index"],delete K[$],e.next=116;break;case 103:if(Q=void 0,Y=$v(K[X]||[]),Z=S(Y),J=Z[0],Q=Z.slice(1),!Lv(J)){e.next=115;break}e.t3=Q.length,e.next=0===e.t3?108:1===e.t3?110:112;break;case 108:return delete K[X],e.abrupt("break",113);case 110:return K[X]=Q[0],e.abrupt("break",113);case 112:K[X]=Q;case 113:e.next=116;break;case 115:J=null;case 116:e.next=139;break;case 118:if(!F.includes("@id")){e.next=123;break}ee=Zv.compactIri({activeCtx:n,iri:"@id",relativeTo:{vocab:!0}}),J=K[ee],delete K[ee],e.next=139;break;case 123:if(!F.includes("@type")){e.next=139;break}te=Zv.compactIri({activeCtx:n,iri:"@type",relativeTo:{vocab:!0}}),re=void 0,e.t4=(t=$v(K[te]||[]),r=S(t),J=r[0],(re=r.slice(1)).length),e.next=0===e.t4?129:1===e.t4?131:133;break;case 129:return delete K[te],e.abrupt("break",134);case 131:return K[te]=re[0],e.abrupt("break",134);case 133:K[te]=re;case 134:if(e.t5=1===Object.keys(K).length&&"@id"in j,!e.t5){e.next=139;break}return e.next=138,Zv.compact({activeCtx:n,activeProperty:D,element:{"@id":j["@id"]},options:c,compactionMap:f});case 138:K=e.sent;case 139:J||(J=Zv.compactIri({activeCtx:n,iri:"@none",relativeTo:{vocab:!0}})),Xv(G,J,K,{propertyIsArray:F.includes("@set")}),e.next=144;break;case 142:ne=!c.compactArrays||F.includes("@set")||F.includes("@list")||Nv(K)&&0===K.length||"@list"===A||"@graph"===A,Xv(U,D,K,{propertyIsArray:ne});case 144:e.next=71;break;case 146:e.next=151;break;case 148:e.prev=148,e.t6=e.catch(69),R.e(e.t6);case 151:return e.prev=151,R.f(),e.finish(151);case 154:e.next=160;break;case 156:if(!(Vv(n,a,"@container")||[]).includes("@index")){e.next=158;break}return e.abrupt("continue",184);case 158:ie=Zv.compactIri({activeCtx:n,iri:A,relativeTo:{vocab:!0}}),Xv(d,ie,T);case 160:e.next=166;break;case 162:return e.next=164,Zv.compact({activeCtx:n,activeProperty:a,element:T,options:c,compactionMap:f});case 164:ae=e.sent,Nv(ae)&&0===ae.length||Xv(d,A,ae);case 166:e.next=173;break;case 168:return e.next=170,Zv.compact({activeCtx:n,activeProperty:"@reverse",element:T,options:c,compactionMap:f});case 170:for(se in oe=e.sent)n.mappings.has(se)&&n.mappings.get(se).reverse&&(ue=oe[se],ce=(Vv(n,se,"@container")||[]).includes("@set")||!c.compactArrays,Xv(d,se,ue,{propertyIsArray:ce}),delete oe[se]);Object.keys(oe).length>0&&(le=Zv.compactIri({activeCtx:n,iri:A,relativeTo:{vocab:!0}}),Xv(d,le,oe));case 173:e.next=179;break;case 175:fe=$v(T).map((function(e){return Zv.compactIri({activeCtx:p,iri:e,relativeTo:{vocab:!0}})})),1===fe.length&&(fe=fe[0]),he=Zv.compactIri({activeCtx:n,iri:"@type",relativeTo:{vocab:!0}}),de=(Vv(n,he,"@container")||[]).includes("@set")&&Wv(n,1.1)||Nv(fe)&&0===T.length,Xv(d,he,fe,{propertyIsArray:de});case 179:e.next=184;break;case 181:pe=$v(T).map((function(e){return Zv.compactIri({activeCtx:n,iri:e,relativeTo:{vocab:!1},base:c.base})})),1===pe.length&&(pe=pe[0]),d[Zv.compactIri({activeCtx:n,iri:"@id",relativeTo:{vocab:!0}})]=pe;case 184:e.next=52;break;case 186:e.next=191;break;case 188:e.prev=188,e.t7=e.catch(50),E.e(e.t7);case 191:return e.prev=191,E.f(),e.finish(191);case 194:return e.abrupt("return",{v:d});case 195:case"end":return e.stop()}}),e,null,[[28,42,45,48],[50,188,191,194],[69,148,151,154]])}))(),"t3",30);case 30:if("object"!==r(y=e.t3)){e.next=33;break}return e.abrupt("return",y.v);case 33:return e.abrupt("return",o);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zv.compactIri=function(e){var t=e.activeCtx,r=e.iri,n=e.value,i=void 0===n?null:n,a=e.relativeTo,o=void 0===a?{vocab:!1}:a,s=e.reverse,u=void 0!==s&&s,c=e.base,l=void 0===c?null:c;if(null===r)return r;t.isPropertyTermScoped&&t.previousContext&&(t=t.previousContext);var f=t.getInverse();if(Kv(r)&&r in f&&"@none"in f[r]&&"@type"in f[r]["@none"]&&"@none"in f[r]["@none"]["@type"])return f[r]["@none"]["@type"]["@none"];if(o.vocab&&r in f){var h=t["@language"]||"@none",d=[];Rv(i)&&"@index"in i&&!("@graph"in i)&&d.push("@index","@index@set"),Rv(i)&&"@preserve"in i&&(i=i["@preserve"][0]),Uv(i)?("@index"in i&&d.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i&&d.push("@graph@id","@graph@id@set"),d.push("@graph","@graph@set","@set"),"@index"in i||d.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i||d.push("@graph@id","@graph@id@set")):Rv(i)&&!Bv(i)&&d.push("@id","@id@set","@type","@set@type");var p="@language",v="@null";if(u)p="@type",v="@reverse",d.push("@set");else if(Dv(i)){"@index"in i||d.push("@list");var y=i["@list"];if(0===y.length)p="@any",v="@none";else{for(var g=0===y.length?h:null,b=null,m=0;m<y.length;++m){var w=y[m],x="@none",_="@none";if(Bv(w)?"@direction"in w?x="".concat((w["@language"]||"").toLowerCase(),"_").concat(w["@direction"]):"@language"in w?x=w["@language"].toLowerCase():"@type"in w?_=w["@type"]:x="@null":_="@id",null===g?g=x:x!==g&&Bv(w)&&(g="@none"),null===b?b=_:_!==b&&(b="@none"),"@none"===g&&"@none"===b)break}g=g||"@none","@none"!==(b=b||"@none")?(p="@type",v=b):v=g}}else{if(Bv(i))if("@language"in i&&!("@index"in i)){d.push("@language","@language@set"),v=i["@language"];var S=i["@direction"];S&&(v="".concat(v,"_").concat(S))}else"@direction"in i&&!("@index"in i)?v="_".concat(i["@direction"]):"@type"in i&&(p="@type",v=i["@type"]);else p="@type",v="@id";d.push("@set")}d.push("@none"),Rv(i)&&!("@index"in i)&&d.push("@index","@index@set"),Bv(i)&&1===Object.keys(i).length&&d.push("@language","@language@set");var E=function(e,t,r,n,i,a){null===a&&(a="@null");var o=[];if(("@id"===a||"@reverse"===a)&&Rv(r)&&"@id"in r){"@reverse"===a&&o.push("@reverse");var s=Zv.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(s)&&e.mappings.get(s)&&e.mappings.get(s)["@id"]===r["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(a);var u=o.find((function(e){return e.includes("_")}));u&&o.push(u.replace(/^[^_]+_/,"_"))}o.push("@none");var c,l=e.inverse[t],f=C(n);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(h in l){var d,p=l[h][i],v=C(o);try{for(v.s();!(d=v.n()).done;){var y=d.value;if(y in p)return p[y]}}catch(e){v.e(e)}finally{v.f()}}}}catch(e){f.e(e)}finally{f.f()}return null}(t,r,i,d,p,v);if(null!==E)return E}if(o.vocab&&"@vocab"in t){var I=t["@vocab"];if(0===r.indexOf(I)&&r!==I){var A=r.substr(I.length);if(!t.mappings.has(A))return A}}for(var T=null,P=[],O=t.fastCurieMap,M=r.length-1,N=0;N<M&&r[N]in O;++N)""in(O=O[r[N]])&&P.push(O[""][0]);for(var R=P.length-1;R>=0;--R){var L,j=P[R],D=C(j.terms);try{for(D.s();!(L=D.n()).done;){var B=L.value,U=B+":"+r.substr(j.iri.length);t.mappings.get(B)._prefix&&(!t.mappings.has(U)||null===i&&t.mappings.get(U)["@id"]===r)&&(null===T||Yv(U,T)<0)&&(T=U)}}catch(e){D.e(e)}finally{D.f()}}if(null!==T)return T;var F,z=C(t.mappings);try{for(z.s();!(F=z.n()).done;){var H=k(F.value,2),V=H[0],K=H[1];if(K&&K._prefix&&r.startsWith(V+":"))throw new Mv('Absolute IRI "'.concat(r,'" confused with prefix "').concat(V,'".'),"jsonld.SyntaxError",{code:"IRI confused with prefix",context:t})}}catch(e){z.e(e)}finally{z.f()}return o.vocab?r:"@base"in t?t["@base"]?Gv(Jv(l,t["@base"]),r):r:Gv(l,r)},Zv.compactValue=function(e){var t=e.activeCtx,r=e.activeProperty,n=e.value,i=e.options;if(Bv(n)){var a=Vv(t,r,"@type"),o=Vv(t,r,"@language"),s=Vv(t,r,"@direction"),c=Vv(t,r,"@container")||[],l="@index"in n&&!c.includes("@index");if(!l&&"@none"!==a){if(n["@type"]===a)return n["@value"];if("@language"in n&&n["@language"]===o&&"@direction"in n&&n["@direction"]===s)return n["@value"];if("@language"in n&&n["@language"]===o)return n["@value"];if("@direction"in n&&n["@direction"]===s)return n["@value"]}var f=Object.keys(n).length,h=1===f||2===f&&"@index"in n&&!l,d="@language"in t,p=Lv(n["@value"]),v=t.mappings.has(r)&&null===t.mappings.get(r)["@language"];if(h&&"@none"!==a&&(!d||!p||v))return n["@value"];var y={};return l&&(y[Zv.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?y[Zv.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}})]=Zv.compactIri({activeCtx:t,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(y[Zv.compactIri({activeCtx:t,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(y[Zv.compactIri({activeCtx:t,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),y[Zv.compactIri({activeCtx:t,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],y}var g=Hv(t,r,{vocab:!0},i),b=Vv(t,r,"@type"),m=Zv.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:"@vocab"===b},base:i.base});return"@id"===b||"@vocab"===b||"@graph"===g?m:u({},Zv.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}}),m)};
/**
   * A JavaScript implementation of the JSON-LD API.
   *
   * @author Dave Longley
   *
   * @license BSD 3-Clause License
   * Copyright (c) 2011-2019 Digital Bazaar, Inc.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * Redistributions of source code must retain the above copyright notice,
   * this list of conditions and the following disclaimer.
   *
   * Redistributions in binary form must reproduce the above copyright
   * notice, this list of conditions and the following disclaimer in the
   * documentation and/or other materials provided with the distribution.
   *
   * Neither the name of the Digital Bazaar, Inc. nor the names of its
   * contributors may be used to endorse or promote products derived from
   * this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
   * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
   * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */
var ty=Ch,ry=hd,ny=Gh,iy=function(){function e(t){var r=t.sharedCache;a(this,e),this.perOpCache=new Map,this.sharedCache=r}var t,r,n;return s(e,[{key:"resolve",value:(n=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.activeCtx,n=t.context,i=t.documentLoader,a=t.base,o=t.cycles,s=void 0===o?new Set:o,n&&vd(n)&&n["@context"]&&(n=n["@context"]),n=gd(n),u=[],c=C(n),e.prev=4,c.s();case 6:if((l=c.n()).done){e.next=26;break}if(f=l.value,!yd(f)){e.next=17;break}if(h=this._get(f),e.t0=h,e.t0){e.next=15;break}return e.next=14,this._resolveRemoteContext({activeCtx:r,url:f,documentLoader:i,base:a,cycles:s});case 14:h=e.sent;case 15:return pd(h)?u.push.apply(u,E(h)):u.push(h),e.abrupt("continue",24);case 17:if(null!==f){e.next=20;break}return u.push(new wd({document:null})),e.abrupt("continue",24);case 20:vd(f)||xd(n),d=JSON.stringify(f),(p=this._get(d))||(p=new wd({document:f}),this._cacheResolvedContext({key:d,resolved:p,tag:"static"})),u.push(p);case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),c.e(e.t1);case 31:return e.prev=31,c.f(),e.finish(31);case 34:return e.abrupt("return",u);case 35:case"end":return e.stop()}}),e,this,[[4,28,31,34]])}))),function(e){return n.apply(this,arguments)})},{key:"_get",value:function(e){var t=this.perOpCache.get(e);if(!t){var r=this.sharedCache.get(e);r&&((t=r.get("static"))&&this.perOpCache.set(e,t))}return t}},{key:"_cacheResolvedContext",value:function(e){var t=e.key,r=e.resolved,n=e.tag;if(this.perOpCache.set(t,r),void 0!==n){var i=this.sharedCache.get(t);i||(i=new Map,this.sharedCache.set(t,i)),i.set(n,r)}return r}},{key:"_resolveRemoteContext",value:(r=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.activeCtx,n=t.url,i=t.documentLoader,a=t.base,o=t.cycles,n=bd(a,n),e.next=4,this._fetchContext({activeCtx:r,url:n,documentLoader:i,cycles:o});case 4:return s=e.sent,u=s.context,c=s.remoteDoc,_d({context:u,base:a=c.documentUrl||n}),e.next=10,this.resolve({activeCtx:r,context:u,documentLoader:i,base:a,cycles:o});case 10:return l=e.sent,e.abrupt("return",(this._cacheResolvedContext({key:n,resolved:l,tag:c.tag}),l));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_fetchContext",value:(t=i(Wt.mark((function e(t){var r,n,i,a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.activeCtx,n=t.url,i=t.documentLoader,!((a=t.cycles).size>10)){e.next=3;break}throw new md("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===r.processingMode?"loading remote context failed":"context overflow",max:10});case 3:if(!a.has(n)){e.next=5;break}throw new md("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===r.processingMode?"recursive context inclusion":"context overflow",url:n});case 5:return a.add(n),e.prev=6,e.next=9,i(n);case 9:s=e.sent,o=s.document||null,yd(o)&&(o=JSON.parse(o)),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(6),new md("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:n,cause:e.t0});case 17:if(vd(o)){e.next=19;break}throw new md("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:n});case 19:return e.abrupt("return",(o="@context"in o?{"@context":o["@context"]}:{"@context":{}},s.contextUrl&&(pd(o["@context"])||(o["@context"]=[o["@context"]]),o["@context"].push(s.contextUrl)),{context:o,remoteDoc:s}));case 20:case"end":return e.stop()}}),e,null,[[6,14]])}))),function(e){return t.apply(this,arguments)})}]),e}(),ay=ny.IdentifierIssuer,oy=Dh,sy=If,uy=kd,cy=up.expand,ly=Ip.flatten,fy=Vp.fromRDF,hy=cv.toRDF,dy=xv.frameMergedOrDefault,py=xv.cleanupNull,vy=Nh.isArray,yy=Nh.isObject,gy=Nh.isString,by=jh.isSubjectReference,my=Bd.expandIri,wy=Bd.getInitialContext,xy=Bd.process,_y=Bd.processingMode,ky=Qv.compact,Sy=Qv.compactIri,Ey=_p.createNodeMap,Iy=_p.createMergedNodeMap,Ay=_p.mergeNodeMaps,Ty=function(e){var r={},n=new sy({max:100});function o(t,r){var n=r.documentLoader,i=void 0===n?e.documentLoader:n,a=y(r,Xt);return Object.assign({},{documentLoader:i},a,t)}return e.compact=function(){var t=i(Wt.mark((function t(r,i,a){var s,u,c,l,f,h,d,p,v,y,g=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.length<2)){t.next=2;break}throw new TypeError("Could not compact, too few arguments.");case 2:if(null!==i){t.next=4;break}throw new oy("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});case 4:if(null!==r){t.next=6;break}return t.abrupt("return",null);case 6:if((a=o(a,{base:gy(r)?r:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new ay("_:b"),contextResolver:new iy({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,!a.skipExpansion){t.next=12;break}t.t0=r,t.next=15;break;case 12:return t.next=14,e.expand(r,a);case 14:t.t0=t.sent;case 15:return s=t.t0,t.next=18,e.processContext(wy(a),i,a);case 18:return u=t.sent,t.next=21,ky({activeCtx:u,element:s,options:a,compactionMap:a.compactionMap});case 21:c=t.sent,a.compactArrays&&!a.graph&&vy(c)?1===c.length?c=c[0]:0===c.length&&(c={}):a.graph&&yy(c)&&(c=[c]),yy(i)&&"@context"in i&&(i=i["@context"]),i=ny.clone(i),vy(i)||(i=[i]),l=i,i=[];for(f=0;f<l.length;++f)(!yy(l[f])||Object.keys(l[f]).length>0)&&i.push(l[f]);if(h=i.length>0,1===i.length&&(i=i[0]),vy(c))d=Sy({activeCtx:u,iri:"@graph",relativeTo:{vocab:!0}}),p=c,c={},h&&(c["@context"]=i),c[d]=p;else if(yy(c)&&h)for(y in v=c,c={"@context":i},v)c[y]=v[y];return t.abrupt("return",c);case 29:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.expand=function(){var t=i(Wt.mark((function t(r,i){var a,s,u,c,l,f,h,d,p,v,y=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(y.length<1)){t.next=2;break}throw new TypeError("Could not expand, too few arguments.");case 2:if(!1===(i=o(i,{keepFreeFloatingNodes:!1,contextResolver:new iy({sharedCache:n})})).expansionMap&&(i.expansionMap=void 0),a={},s=[],"expandContext"in i&&(u=ny.clone(i.expandContext),yy(u)&&"@context"in u?a.expandContext=u:a.expandContext={"@context":u},s.push(a.expandContext)),!gy(r)){t.next=12;break}return t.next=8,e.get(r,i);case 8:l=t.sent,c=l.documentUrl,a.input=l.document,l.contextUrl&&(a.remoteContext={"@context":l.contextUrl},s.push(a.remoteContext)),t.next=13;break;case 12:a.input=ny.clone(r);case 13:"base"in i||(i.base=c||""),f=wy(i),h=0,d=s;case 16:if(!(h<d.length)){t.next=24;break}return p=d[h],t.next=20,xy({activeCtx:f,localCtx:p,options:i});case 20:f=t.sent;case 21:h++,t.next=16;break;case 24:return t.next=26,cy({activeCtx:f,element:a.input,options:i,expansionMap:i.expansionMap});case 26:return v=t.sent,t.abrupt("return",(yy(v)&&"@graph"in v&&1===Object.keys(v).length?v=v["@graph"]:null===v&&(v=[]),vy(v)||(v=[v]),v));case 28:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.flatten=function(){var t=i(Wt.mark((function t(r,i,a){var s,u,c,l=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l.length<1)){t.next=2;break}return t.abrupt("return",new TypeError("Could not flatten, too few arguments."));case 2:return i="function"==typeof i?null:i||null,a=o(a,{base:gy(r)?r:"",contextResolver:new iy({sharedCache:n})}),t.next=5,e.expand(r,a);case 5:if(s=t.sent,u=ly(s),null!==i){t.next=9;break}return t.abrupt("return",u);case 9:return a.graph=!0,a.skipExpansion=!0,t.next=12,e.compact(u,i,a);case 12:return c=t.sent,t.abrupt("return",c);case 14:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.frame=function(){var r=i(Wt.mark((function r(i,a,s){var u,c,l,f,h,d,p,v,y,g,b=arguments;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(b.length<2)){r.next=2;break}throw new TypeError("Could not frame, too few arguments.");case 2:if(s=o(s,{base:gy(i)?i:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new iy({sharedCache:n})}),!gy(a)){r.next=7;break}return r.next=5,e.get(a,s);case 5:u=r.sent,a=u.document,u.contextUrl&&((c=a["@context"])?vy(c)?c.push(u.contextUrl):c=[c,u.contextUrl]:c=u.contextUrl,a["@context"]=c);case 7:return l=a&&a["@context"]||{},r.next=10,e.processContext(wy(s),l,s);case 10:return f=r.sent,s.hasOwnProperty("omitGraph")||(s.omitGraph=_y(f,1.1)),s.hasOwnProperty("pruneBlankNodeIdentifiers")||(s.pruneBlankNodeIdentifiers=_y(f,1.1)),r.next=14,e.expand(i,s);case 14:return h=r.sent,(d=t({},s)).isFrame=!0,d.keepFreeFloatingNodes=!0,r.next=19,e.expand(a,d);case 19:return p=r.sent,v=Object.keys(a).map((function(e){return my(f,e,{vocab:!0})})),d.merged=!v.includes("@graph"),d.is11=_y(f,1.1),y=dy(h,p,d),d.graph=!s.omitGraph,d.skipExpansion=!0,d.link={},d.framing=!0,r.next=26,e.compact(y,l,d);case 26:return g=r.sent,r.abrupt("return",(d.link={},g=py(g,d)));case 28:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}(),e.link=function(){var t=i(Wt.mark((function t(r,n,i){var a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.abrupt("return",(n&&(a["@context"]=n),a["@embed"]="@link",e.frame(r,a,i)));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.normalize=e.canonize=function(){var r=i(Wt.mark((function r(i,a){var s,u,c,l=arguments;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(l.length<1)){r.next=2;break}throw new TypeError("Could not canonize, too few arguments.");case 2:if(!("inputFormat"in(a=o(a,{base:gy(i)?i:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new iy({sharedCache:n})})))){r.next=7;break}if("application/n-quads"===a.inputFormat||"application/nquads"===a.inputFormat){r.next=5;break}throw new oy("Unknown canonicalization input format.","jsonld.CanonizeError");case 5:return s=uy.parse(i),r.abrupt("return",ty.canonize(s,a));case 7:return delete(u=t({},a)).format,u.produceGeneralizedRdf=!1,r.next=11,e.toRDF(i,u);case 11:return c=r.sent,r.abrupt("return",ty.canonize(c,a));case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),e.fromRDF=function(){var e=i(Wt.mark((function e(t,n){var i,a,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.length<1)){e.next=2;break}throw new TypeError("Could not convert from RDF, too few arguments.");case 2:if(n=o(n,{format:gy(t)?"application/n-quads":void 0}),i=n.format,a=n.rdfParser,!i){e.next=10;break}if(a=a||r[i]){e.next=8;break}throw new oy("Unknown input format.","jsonld.UnknownFormat",{format:i});case 8:e.next=11;break;case 10:a=function(){return t};case 11:return e.next=13,a(t);case 13:return s=e.sent,e.abrupt("return",fy(s,n));case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.toRDF=function(){var t=i(Wt.mark((function t(r,i){var a,s,u=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u.length<1)){t.next=2;break}throw new TypeError("Could not convert to RDF, too few arguments.");case 2:if(!(i=o(i,{base:gy(r)?r:"",skipExpansion:!1,contextResolver:new iy({sharedCache:n})})).skipExpansion){t.next=6;break}t.t0=r,t.next=9;break;case 6:return t.next=8,e.expand(r,i);case 8:t.t0=t.sent;case 9:if(a=t.t0,s=hy(a,i),!i.format){t.next=15;break}if("application/n-quads"!==i.format&&"application/nquads"!==i.format){t.next=14;break}return t.abrupt("return",uy.serialize(s));case 14:throw new oy("Unknown output format.","jsonld.UnknownFormat",{format:i.format});case 15:return t.abrupt("return",s);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.createNodeMap=function(){var t=i(Wt.mark((function t(r,i){var a,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s.length<1)){t.next=2;break}throw new TypeError("Could not create node map, too few arguments.");case 2:return i=o(i,{base:gy(r)?r:"",contextResolver:new iy({sharedCache:n})}),t.next=5,e.expand(r,i);case 5:return a=t.sent,t.abrupt("return",Iy(a,i));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.merge=function(){var r=i(Wt.mark((function r(i,a,s){var u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E=arguments;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(E.length<1)){r.next=2;break}throw new TypeError("Could not merge, too few arguments.");case 2:if(vy(i)){r.next=4;break}throw new TypeError('Could not merge, "docs" must be an array.');case 4:return a="function"==typeof a?null:a||null,s=o(s,{contextResolver:new iy({sharedCache:n})}),r.next=7,Promise.all(i.map((function(r){var n=t({},s);return e.expand(r,n)})));case 7:u=r.sent,c=!0,"mergeNodes"in s&&(c=s.mergeNodes),l=s.issuer||new ay("_:b"),f={"@default":{}},h=0;case 12:if(!(h<u.length)){r.next=29;break}if(d=ny.relabelBlankNodes(u[h],{issuer:new ay("_:b"+h+"-")}),Ey(d,p=c||0===h?f:{"@default":{}},"@default",l),p===f){r.next=26;break}r.t0=Wt.keys(p);case 16:if((r.t1=r.t0()).done){r.next=26;break}if(v=r.t1.value,y=p[v],v in f){r.next=22;break}return f[v]=y,r.abrupt("continue",16);case 22:for(b in g=f[v],y)b in g||(g[b]=y[b]);r.next=16;break;case 26:++h,r.next=12;break;case 29:for(m=Ay(f),w=[],x=Object.keys(m).sort(),_=0;_<x.length;++_)k=m[x[_]],by(k)||w.push(k);if(null!==a){r.next=33;break}return r.abrupt("return",w);case 33:return s.graph=!0,s.skipExpansion=!0,r.next=36,e.compact(w,a,s);case 36:return S=r.sent,r.abrupt("return",S);case 38:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}(),Object.defineProperty(e,"documentLoader",{get:function(){return e._documentLoader},set:function(t){return e._documentLoader=t}}),e.documentLoader=function(){var e=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new oy("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.get=function(){var t=i(Wt.mark((function t(r,n){var i,a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader,t.next=3,i(r);case 3:if(a=t.sent,t.prev=4,a.document){t.next=7;break}throw new oy("No remote document found at the given URL.","jsonld.NullRemoteDocument");case 7:gy(a.document)&&(a.document=JSON.parse(a.document)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(4),new oy("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:t.t0,remoteDoc:a});case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,r){return t.apply(this,arguments)}}(),e.processContext=function(){var e=i(Wt.mark((function e(t,r,i){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(i=o(i,{base:"",contextResolver:new iy({sharedCache:n})}),null===r?wy(i):(r=ny.clone(r),yy(r)&&"@context"in r||(r={"@context":r}),xy({activeCtx:t,localCtx:r,options:i}))));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),e.getContextValue=Bd.getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new oy('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,t){r[e]=t},e.unregisterRDFParser=function(e){delete r[e]},e.registerRDFParser("application/n-quads",uy.parse),e.registerRDFParser("application/nquads",uy.parse),e.url=td,e.util=ny,Object.assign(e,ny),e.promises=e,e.RequestQueue=Zh,e.JsonLdProcessor=function(e){var t=function(){function e(){a(this,e)}return s(e,[{key:"toString",value:function(){return"[object JsonLdProcessor]"}}]),e}();return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}(e),ry.setupGlobals(e),ry.setupDocumentLoaders(e),e},Py=function e(){return Ty((function(){return e()}))};Ty(Py);var Oy=Py,Cy={exports:{}},My={exports:{}};!function(e){!function(t){var r={bytesToHex:function(e){return function(e){return e.map((function(e){return 2,(t=e.toString(16)).length>2?t:Array(2-t.length+1).join("0")+t;var t})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=r:t.convertHex=r}($t)}(My);var Ny={exports:{}};!function(e){!function(t){var r={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};r.UTF8={bytesToString:function(e){return decodeURIComponent(escape(r.bytesToString(e)))},stringToBytes:function(e){return r.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=r:t.convertString=r}($t)}(Ny),function(e){!function(t){var r={};e.exports?(r.bytesToHex=My.exports.bytesToHex,r.convertString=Ny.exports,e.exports=o):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=o);var n=[];!function(){function e(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(n[i]=t(Math.pow(r,1/3)),i++),r++}();var i=[],a=function(e,t,r){for(var a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7],d=0;d<64;d++){if(d<16)i[d]=0|t[r+d];else{var p=i[d-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=i[d-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;i[d]=v+i[d-7]+g+i[d-16]}var b=a&o^a&s^o&s,m=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),w=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+n[d]+i[d];h=f,f=l,l=c,c=u+w|0,u=s,s=o,o=a,a=w+(m+b)|0}e[0]=e[0]+a|0,e[1]=e[1]+o|0,e[2]=e[2]+s|0,e[3]=e[3]+u|0,e[4]=e[4]+c|0,e[5]=e[5]+l|0,e[6]=e[6]+f|0,e[7]=e[7]+h|0};function o(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}(e),o=8*e.length;i[o>>5]|=128<<24-o%32,i[15+(o+64>>9<<4)]=o;for(var s=0;s<i.length;s+=16)a(n,i,s);var u=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}(n);return t&&t.asBytes?u:t&&t.asString?r.convertString.bytesToString(u):r.bytesToHex(u)}o.x2=function(e,t){return o(o(e,{asBytes:!0}),t)}}($t)}(Cy);var Ry=Cy.exports;function Ly(e){e=e.trim();for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t}var jy={exports:{}};!function(e,t){var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Boolean]",s="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",f="[object Number]",h="[object Object]",d="[object Promise]",p="[object RegExp]",v="[object Set]",y="[object String]",g="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",P="[object Uint32Array]",O=/\w*$/,C=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,N={};N[a]=N["[object Array]"]=N[m]=N[w]=N[o]=N[s]=N[x]=N[_]=N[k]=N[S]=N[E]=N[l]=N[f]=N[h]=N[p]=N[v]=N[y]=N[g]=N[I]=N[A]=N[T]=N[P]=!0,N["[object Error]"]=N[u]=N[b]=!1;var R="object"==r($t)&&$t&&$t.Object===Object&&$t,L="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,j=R||L||Function("return this")(),D=t&&!t.nodeType&&t,B=D&&e&&!e.nodeType&&e,U=B&&B.exports===D;function F(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function H(e,t,r,n){var i=-1,a=e?e.length:0;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function K(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function q(e,t){return function(r){return e(t(r))}}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var G,J=Array.prototype,X=Function.prototype,$=Object.prototype,Y=j["__core-js_shared__"],Z=(G=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=X.toString,ee=$.hasOwnProperty,te=$.toString,re=RegExp("^"+Q.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=U?j.Buffer:void 0,ie=j.Symbol,ae=j.Uint8Array,oe=q(Object.getPrototypeOf,Object),se=Object.create,ue=$.propertyIsEnumerable,ce=J.splice,le=Object.getOwnPropertySymbols,fe=ne?ne.isBuffer:void 0,he=q(Object.keys,Object),de=je(j,"DataView"),pe=je(j,"Map"),ve=je(j,"Promise"),ye=je(j,"Set"),ge=je(j,"WeakMap"),be=je(Object,"create"),me=ze(de),we=ze(pe),xe=ze(ve),_e=ze(ye),ke=ze(ge),Se=ie?ie.prototype:void 0,Ee=Se?Se.valueOf:void 0;function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){this.__data__=new Ae(e)}function Oe(e,t,r){var n=e[t];ee.call(e,t)&&He(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ce(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function Me(e,t,r,n,i,d,b){var C;if(n&&(C=d?n(e,i,d,b):n(e)),void 0!==C)return C;if(!Ge(e))return e;var M=Ve(e);if(M){if(C=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,C)}else{var R=Be(e),L=R==u||R==c;if(qe(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(R==h||R==a||L&&!d){if(V(e))return d?e:{};if(C=function(e){return"function"!=typeof e.constructor||Fe(e)?{}:Ge(t=oe(e))?se(t):{};var t}(L?{}:e),!t)return function(e,t){return Re(e,De(e),t)}(e,function(e,t){return e&&Re(t,Je(t),e)}(C,e))}else{if(!N[R])return d?e:{};C=function(e,t,r,n){var i,a=e.constructor;switch(t){case m:return Ne(e);case o:case s:return new a(+e);case w:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case x:case _:case k:case S:case E:case I:case A:case T:case P:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case l:return function(e,t,r){return H(t?r(K(e),!0):K(e),F,new e.constructor)}(e,n,r);case f:case y:return new a(e);case p:return function(e){var t=new e.constructor(e.source,O.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return function(e,t,r){return H(t?r(W(e),!0):W(e),z,new e.constructor)}(e,n,r);case g:return i=e,Ee?Object(Ee.call(i)):{}}}(e,R,Me,t)}}b||(b=new Pe);var j=b.get(e);if(j)return j;if(b.set(e,C),!M)var D=r?function(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Je,De)}(e):Je(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(D||e,(function(i,a){D&&(i=e[a=i]),Oe(C,a,Me(i,t,r,n,a,e,b))})),C}function Ne(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Re(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;Oe(r,o,void 0===s?e[o]:s)}return r}function Le(e,t){var n=e.__data__;return function(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function je(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ge(e)||(t=e,Z&&Z in t))&&(We(e)||V(e)?re:C).test(ze(e));var t}(r)?r:void 0}Ie.prototype.clear=function(){this.__data__=be?be(null):{}},Ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ie.prototype.get=function(e){var t=this.__data__;if(be){var r=t[e];return r===n?void 0:r}return ee.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ee.call(t,e)},Ie.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?n:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,r=Ce(t,e);return!(r<0||(r==t.length-1?t.pop():ce.call(t,r,1),0))},Ae.prototype.get=function(e){var t=this.__data__,r=Ce(t,e);return r<0?void 0:t[r][1]},Ae.prototype.has=function(e){return Ce(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var r=this.__data__,n=Ce(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new Ie,map:new(pe||Ae),string:new Ie}},Te.prototype.delete=function(e){return Le(this,e).delete(e)},Te.prototype.get=function(e){return Le(this,e).get(e)},Te.prototype.has=function(e){return Le(this,e).has(e)},Te.prototype.set=function(e,t){return Le(this,e).set(e,t),this},Pe.prototype.clear=function(){this.__data__=new Ae},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ae){var n=r.__data__;if(!pe||n.length<199)return n.push([e,t]),this;r=this.__data__=new Te(n)}return r.set(e,t),this};var De=le?q(le,Object):function(){return[]},Be=function(e){return te.call(e)};function Ue(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$)}function ze(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function He(e,t){return e===t||e!=e&&t!=t}(de&&Be(new de(new ArrayBuffer(1)))!=w||pe&&Be(new pe)!=l||ve&&Be(ve.resolve())!=d||ye&&Be(new ye)!=v||ge&&Be(new ge)!=b)&&(Be=function(e){var t=te.call(e),r=t==h?e.constructor:void 0,n=r?ze(r):void 0;if(n)switch(n){case me:return w;case we:return l;case xe:return d;case _e:return v;case ke:return b}return t});var Ve=Array.isArray;function Ke(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!We(e)}var qe=fe||function(){return!1};function We(e){var t=Ge(e)?te.call(e):"";return t==u||t==c}function Ge(e){var t=r(e);return!!e&&("object"==t||"function"==t)}function Je(e){return Ke(e)?function(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&Ke(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==a)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=n.length,o=!!i;for(var s in e)!t&&!ee.call(e,s)||o&&("length"==s||Ue(s,i))||n.push(s);return n}(e):function(e){if(!Fe(e))return he(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Me(e,!0,!0)}}(jy,jy.exports);var Dy=jy.exports;function By(e){return Dy(e)}function Uy(e){var t=By(e);return"proof"in t?function(e){var t=By(e);if(!Array.isArray(e.proof))return delete t.proof,t;var r=e.proof.find((function(e){return"ChainedProof2021"!==e.type}));return t.proof=r,t}(t):("signature"in t&&delete t.signature,t)}function Fy(e){return zy.apply(this,arguments)}function zy(){return zy=i(Wt.mark((function e(t){var r,n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t["@context"].find((function(e){return(t=e)===Object(t)&&"@vocab"in e;var t}))||t["@context"].push({"@vocab":"http://fallback.org/"}),r=Uy(t),n={algorithm:"URDNA2015",format:"application/nquads",documentLoader:function(e){return e in ia?{contextUrl:null,document:ia[e],documentUrl:e}:Oy.documentLoader(e)}},e.prev=2,e.next=5,Oy.normalize(r,n);case 5:i=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.error(e.t0),new wa("computeLocalHash",ha("errors","failedJsonLdNormalization"));case 11:if(a=function(e){var t=e.split("\n"),r=/<http:\/\/fallback\.org\/(.*)>/,n=t.map((function(e){return r.exec(e)})).filter((function(e){return null!=e}));if(n.length>0){var i=n.map((function(e){return e[1]})).sort();return Array.from(new Set(i))}return null}(i),!a){e.next=14;break}throw new wa("computeLocalHash","".concat(ha("errors","foundUnmappedFields"),": ").concat(a.join(", ")));case 14:return e.abrupt("return",Ry(function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(i)));case 15:case"end":return e.stop()}}),e,null,[[2,8]])}))),zy.apply(this,arguments)}var Hy=Uf.i18n.getText("errors","identityErrorBaseMessage"),Vy=function(e){c(r,e);var t=m(r);function r(e){return a(this,r),t.call(this,e||"This operation is not supported for this key type")}return s(r)}(p(Error)),Ky=Vy,qy=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.call(this,"This has not been implemented yet")}return s(r)}(p(Error)),Wy=qy,Gy=function(){function e(){a(this,e),this.registry=[],this.classes={}}return s(e,[{key:"find",value:function(e){return this.registry.find(e)}},{key:"define",value:function(e,t){var r=this;e.forEach((function(e){var n=e.kty;if(!n)throw new Error("Invalid type definition");r.classes[n]||(r.classes[n]=t),r.registry.push(e)}))}},{key:"normalize",value:function(e,t,r){var n=this.classes[e],i=this.find((function(e){return e[t]===r}));if(!n||!i)throw new Error("Invalid type");return new n(i)}}]),e}(),Jy=Wy,Xy=function(){function e(t){a(this,e),this.params=t}return s(e,[{key:"fromPrivatePKCS1",value:function(e){throw new Jy}},{key:"fromPrivatePKCS8",value:function(e){throw new Jy}},{key:"fromPublicPKCS1",value:function(e){throw new Jy}},{key:"fromPublicPKCS8",value:function(e){throw new Jy}},{key:"fromPrivateBlk",value:function(e){throw new Jy}},{key:"fromPublicBlk",value:function(e){throw new Jy}},{key:"fromJwk",value:function(e){throw new Jy}},{key:"toPrivatePKCS1",value:function(e){throw new Jy}},{key:"toPrivatePKCS8",value:function(e){throw new Jy}},{key:"toPublicPKCS1",value:function(e){throw new Jy}},{key:"toPublicPKCS8",value:function(e){throw new Jy}},{key:"toPrivateBlk",value:function(e){throw new Jy}},{key:"toPublicBlk",value:function(e){throw new Jy}},{key:"toPrivateJwk",value:function(e){throw new Jy}},{key:"toPublicJwk",value:function(e){throw new Jy}}],[{key:"formatPem",value:function(e,t){return"-----BEGIN ".concat(t," KEY-----\n")+e.match(/.{1,64}/g).join("\n")+"\n-----END ".concat(t," KEY-----")}}]),e}(),$y={},Yy={exports:{}};!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==r(e)?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var i=0,a=Math.min(e.length,r),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==r(e)&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==r(e))return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,i):(this._parseBase(e,t,a),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,s=Math.min(a,a-o)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=c(e,l,e.length,t),l=0;l<o;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(o=(i=0|e.words[p])*(a=0|t.words[d])+f)/67108864|0,f=67108863&o}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}a.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<i|a)).toString(16);r=0!=(a=s>>>24-i&16777215)||o!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],d=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?v+r:l[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===t,c=new e(a),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,o=0;o<n.length;o++)a=(t=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)a=(t=(0|r.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,o=e.words,s=t.words,u=r.words,c=0,l=0|o[0],f=8191&l,h=l>>>13,d=0|o[1],p=8191&d,v=d>>>13,y=0|o[2],g=8191&y,b=y>>>13,m=0|o[3],w=8191&m,x=m>>>13,_=0|o[4],k=8191&_,S=_>>>13,E=0|o[5],I=8191&E,A=E>>>13,T=0|o[6],P=8191&T,O=T>>>13,C=0|o[7],M=8191&C,N=C>>>13,R=0|o[8],L=8191&R,j=R>>>13,D=0|o[9],B=8191&D,U=D>>>13,F=0|s[0],z=8191&F,H=F>>>13,V=0|s[1],K=8191&V,q=V>>>13,W=0|s[2],G=8191&W,J=W>>>13,X=0|s[3],$=8191&X,Y=X>>>13,Z=0|s[4],Q=8191&Z,ee=Z>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ve=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,z))|0)+((8191&(i=(i=Math.imul(f,H))+Math.imul(h,z)|0))<<13)|0;c=((a=Math.imul(h,H))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,H))+Math.imul(v,z)|0,a=Math.imul(v,H);var ge=(c+(n=n+Math.imul(f,K)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,K)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,H))+Math.imul(b,z)|0,a=Math.imul(b,H),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,q)|0;var be=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,H))+Math.imul(x,z)|0,a=Math.imul(x,H),n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(b,K)|0,a=a+Math.imul(b,q)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,G)|0,a=a+Math.imul(v,J)|0;var me=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(h,$)|0))<<13)|0;c=((a=a+Math.imul(h,Y)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,H))+Math.imul(S,z)|0,a=Math.imul(S,H),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(x,K)|0,a=a+Math.imul(x,q)|0,n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,G)|0,a=a+Math.imul(b,J)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(v,$)|0,a=a+Math.imul(v,Y)|0;var we=(c+(n=n+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,H))+Math.imul(A,z)|0,a=Math.imul(A,H),n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,q)|0)+Math.imul(S,K)|0,a=a+Math.imul(S,q)|0,n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(x,G)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(v,Q)|0,a=a+Math.imul(v,ee)|0;var xe=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,H))+Math.imul(O,z)|0,a=Math.imul(O,H),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,K)|0,a=a+Math.imul(A,q)|0,n=n+Math.imul(k,G)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(S,G)|0,a=a+Math.imul(S,J)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,Y)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(v,re)|0,a=a+Math.imul(v,ne)|0;var _e=(c+(n=n+Math.imul(f,ae)|0)|0)+((8191&(i=(i=i+Math.imul(f,oe)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,oe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(M,z),i=(i=Math.imul(M,H))+Math.imul(N,z)|0,a=Math.imul(N,H),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(A,G)|0,a=a+Math.imul(A,J)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(S,$)|0,a=a+Math.imul(S,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(x,Q)|0,a=a+Math.imul(x,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(b,re)|0,a=a+Math.imul(b,ne)|0,n=n+Math.imul(p,ae)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,oe)|0;var ke=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,H))+Math.imul(j,z)|0,a=Math.imul(j,H),n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(N,K)|0,a=a+Math.imul(N,q)|0,n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,$)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(S,Q)|0,a=a+Math.imul(S,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(x,re)|0,a=a+Math.imul(x,ne)|0,n=n+Math.imul(g,ae)|0,i=(i=i+Math.imul(g,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,a=a+Math.imul(v,ce)|0;var Se=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,z),i=(i=Math.imul(B,H))+Math.imul(U,z)|0,a=Math.imul(U,H),n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(j,K)|0,a=a+Math.imul(j,q)|0,n=n+Math.imul(M,G)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(N,G)|0,a=a+Math.imul(N,J)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(S,re)|0,a=a+Math.imul(S,ne)|0,n=n+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,oe)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(v,fe)|0,a=a+Math.imul(v,he)|0;var Ee=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ve)|0)+Math.imul(h,pe)|0))<<13)|0;c=((a=a+Math.imul(h,ve)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,K),i=(i=Math.imul(B,q))+Math.imul(U,K)|0,a=Math.imul(U,q),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(j,G)|0,a=a+Math.imul(j,J)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(N,$)|0,a=a+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,a=a+Math.imul(A,ne)|0,n=n+Math.imul(k,ae)|0,i=(i=i+Math.imul(k,oe)|0)+Math.imul(S,ae)|0,a=a+Math.imul(S,oe)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(b,fe)|0,a=a+Math.imul(b,he)|0;var Ie=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((a=a+Math.imul(v,ve)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,G),i=(i=Math.imul(B,J))+Math.imul(U,G)|0,a=Math.imul(U,J),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(N,Q)|0,a=a+Math.imul(N,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,n=n+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(S,ue)|0,a=a+Math.imul(S,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(x,fe)|0,a=a+Math.imul(x,he)|0;var Ae=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ve)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,ve)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,$),i=(i=Math.imul(B,Y))+Math.imul(U,$)|0,a=Math.imul(U,Y),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(j,Q)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(N,re)|0,a=a+Math.imul(N,ne)|0,n=n+Math.imul(P,ae)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(A,ue)|0,a=a+Math.imul(A,ce)|0,n=n+Math.imul(k,fe)|0,i=(i=i+Math.imul(k,he)|0)+Math.imul(S,fe)|0,a=a+Math.imul(S,he)|0;var Te=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ve)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,ve)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Q),i=(i=Math.imul(B,ee))+Math.imul(U,Q)|0,a=Math.imul(U,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(j,re)|0,a=a+Math.imul(j,ne)|0,n=n+Math.imul(M,ae)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(N,ae)|0,a=a+Math.imul(N,oe)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,fe)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(A,fe)|0,a=a+Math.imul(A,he)|0;var Pe=(c+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,ve)|0)+Math.imul(S,pe)|0))<<13)|0;c=((a=a+Math.imul(S,ve)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,re),i=(i=Math.imul(B,ne))+Math.imul(U,re)|0,a=Math.imul(U,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,oe)|0)+Math.imul(j,ae)|0,a=a+Math.imul(j,oe)|0,n=n+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(N,ue)|0,a=a+Math.imul(N,ce)|0,n=n+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(O,fe)|0,a=a+Math.imul(O,he)|0;var Oe=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ve)|0)+Math.imul(A,pe)|0))<<13)|0;c=((a=a+Math.imul(A,ve)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,ae),i=(i=Math.imul(B,oe))+Math.imul(U,ae)|0,a=Math.imul(U,oe),n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(j,ue)|0,a=a+Math.imul(j,ce)|0,n=n+Math.imul(M,fe)|0,i=(i=i+Math.imul(M,he)|0)+Math.imul(N,fe)|0,a=a+Math.imul(N,he)|0;var Ce=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ve)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,ve)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(U,ue)|0,a=Math.imul(U,ce),n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(j,fe)|0,a=a+Math.imul(j,he)|0;var Me=(c+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ve)|0)+Math.imul(N,pe)|0))<<13)|0;c=((a=a+Math.imul(N,ve)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(B,fe),i=(i=Math.imul(B,he))+Math.imul(U,fe)|0,a=Math.imul(U,he);var Ne=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ve)|0)+Math.imul(j,pe)|0))<<13)|0;c=((a=a+Math.imul(j,ve)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Re=(c+(n=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,ve))+Math.imul(U,pe)|0))<<13)|0;return c=((a=Math.imul(U,ve))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u[0]=ye,u[1]=ge,u[2]=be,u[3]=me,u[4]=we,u[5]=xe,u[6]=_e,u[7]=ke,u[8]=Se,u[9]=Ee,u[10]=Ie,u[11]=Ae,u[12]=Te,u[13]=Pe,u[14]=Oe,u[15]=Ce,u[16]=Me,u[17]=Ne,u[18]=Re,0!==c&&(u[19]=c,r.length++),r};function v(e,t,r){return(new y).mulp(e,t,r)}function y(e,t){this.x=e,this.y=t}Math.imul||(p=d),a.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,u=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=u;c++){var l=a-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):v(this,e,t),r},y.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},y.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},y.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<o;d++){var p=r[l+d],v=n[l+d],y=r[l+d+o],g=n[l+d+o],b=f*y-h*g;g=f*g+h*y,y=b,r[l+d]=p+y,n[l+d]=v+g,r[l+d+o]=p-y,n[l+d+o]=v-g,d!==s&&(b=u*f-c*h,h=u*h+c*f,f=b)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},y.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n(0==(-8192&a))},y.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,a,s,u,n,i),this.transform(c,a,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),v(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[r]=67108863&a}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,u=(0|this.words[t])-s<<r;this.words[t]=u|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,u=r;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-a|f>>>a,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((a-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},a.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),u=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0==(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,v=1;0==(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(u)):(r.isub(t),s.isub(i),u.isub(o))}return{a:s,b:u,gcd:r.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var f=0,h=1;0==(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new k(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(m,b),m.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,b),i(x,b),i(_,b),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new w;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new a(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=o;0!==d.cmp(s);){for(var v=d,y=0;0!==v.cmp(s);y++)v=v.redSqr();n(y<p);var g=this.pow(f,new a(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4==++s||0===n&&0===l)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}u=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new S(e)},i(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(Yy,$t);var Zy={},Qy={},eg={exports:{}};"function"==typeof Object.create?eg.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:eg.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var tg,rg=Zr,ng=rg.Buffer,ig={};for(tg in rg)rg.hasOwnProperty(tg)&&"SlowBuffer"!==tg&&"Buffer"!==tg&&(ig[tg]=rg[tg]);var ag=ig.Buffer={};for(tg in ng)ng.hasOwnProperty(tg)&&"allocUnsafe"!==tg&&"allocUnsafeSlow"!==tg&&(ag[tg]=ng[tg]);if(ig.Buffer.prototype=ng.prototype,ag.from&&ag.from!==Uint8Array.from||(ag.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+r(e));if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+r(e));return ng(e,t,n)}),ag.alloc||(ag.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+r(e));if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=ng(e);return t&&0!==t.length?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i}),!ig.kStringMaxLength)try{ig.kStringMaxLength=oo.binding("buffer").kStringMaxLength}catch(IK){}ig.constants||(ig.constants={MAX_LENGTH:ig.kMaxLength},ig.kStringMaxLength&&(ig.constants.MAX_STRING_LENGTH=ig.kStringMaxLength));var og=ig,sg={},ug=eg.exports;function cg(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function lg(e,t){this.path=e,this.rethrow(t)}sg.Reporter=cg,cg.prototype.isError=function(e){return e instanceof lg},cg.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},cg.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},cg.prototype.enterKey=function(e){return this._reporterState.path.push(e)},cg.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},cg.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},cg.prototype.path=function(){return this._reporterState.path.join("/")},cg.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},cg.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},cg.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof lg;if(t=n?e:new lg(r.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},cg.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},ug(lg,Error),lg.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,lg),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this};var fg={},hg=eg.exports,dg=sg.Reporter,pg=og.Buffer;function vg(e,t){dg.call(this,t),pg.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function yg(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return yg.isEncoderBuffer(e)||(e=new yg(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=pg.byteLength(e);else{if(!pg.isBuffer(e))return t.error("Unsupported type: "+r(e));this.value=e,this.length=e.length}}hg(vg,dg),fg.DecoderBuffer=vg,vg.isDecoderBuffer=function(e){return e instanceof vg||"object"==r(e)&&pg.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},vg.prototype.save=function(){return{offset:this.offset,reporter:dg.prototype.save.call(this)}},vg.prototype.restore=function(e){var t=new vg(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,dg.prototype.restore.call(this,e.reporter),t},vg.prototype.isEmpty=function(){return this.offset===this.length},vg.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},vg.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new vg(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},vg.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},fg.EncoderBuffer=yg,yg.isEncoderBuffer=function(e){return e instanceof yg||"object"==r(e)&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},yg.prototype.join=function(e,t){return e||(e=pg.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):pg.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e};var gg=bg;function bg(e,t){if(!e)throw new Error(t||"Assertion failed")}bg.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var mg=sg.Reporter,wg=fg.EncoderBuffer,xg=fg.DecoderBuffer,_g=gg,kg=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],Sg=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(kg);function Eg(e,t,r){var n={};this._baseState=n,n.name=r,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var Ig=Eg,Ag=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Eg.prototype.clone=function(){var e=this._baseState,t={};Ag.forEach((function(r){t[r]=e[r]}));var r=new this.constructor(t.parent);return r._baseState=t,r},Eg.prototype._wrap=function(){var e=this._baseState;Sg.forEach((function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}}),this)},Eg.prototype._init=function(e){var t=this._baseState;_g(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),_g.equal(t.children.length,1,"Root node can have only one child")},Eg.prototype._useArgs=function(e){var t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(_g(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(_g(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=r(e)||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach((function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){Eg.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),kg.forEach((function(e){Eg.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return _g(null===t.tag),t.tag=e,this._useArgs(r),this}})),Eg.prototype.use=function(e){_g(e);var t=this._baseState;return _g(null===t.use),t.use=e,this},Eg.prototype.optional=function(){return this._baseState.optional=!0,this},Eg.prototype.def=function(e){var t=this._baseState;return _g(null===t.default),t.default=e,t.optional=!0,this},Eg.prototype.explicit=function(e){var t=this._baseState;return _g(null===t.explicit&&null===t.implicit),t.explicit=e,this},Eg.prototype.implicit=function(e){var t=this._baseState;return _g(null===t.explicit&&null===t.implicit),t.implicit=e,this},Eg.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},Eg.prototype.key=function(e){var t=this._baseState;return _g(null===t.key),t.key=e,this},Eg.prototype.any=function(){return this._baseState.any=!0,this},Eg.prototype.choice=function(e){var t=this._baseState;return _g(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},Eg.prototype.contains=function(e){var t=this._baseState;return _g(null===t.use),t.contains=e,this},Eg.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var n,i=r.default,a=!0,o=null;if(null!==r.key&&(o=e.enterKey(r.key)),r.optional){var s=null;if(null!==r.explicit?s=r.explicit:null!==r.implicit?s=r.implicit:null!==r.tag&&(s=r.tag),null!==s||r.any){if(a=this._peekTag(e,s,r.any),e.isError(a))return a}else{var u=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),a=!0}catch(e){a=!1}e.restore(u)}}if(r.obj&&a&&(n=e.enterObject()),a){if(null!==r.explicit){var c=this._decodeTag(e,r.explicit);if(e.isError(c))return c;e=c}var l=e.offset;if(null===r.use&&null===r.choice){var f;r.any&&(f=e.save());var h=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(h))return h;r.any?i=e.raw(f):e=h}if(t&&t.track&&null!==r.tag&&t.track(e.path(),l,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(e,t)})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var d=new xg(i);i=this._getUse(r.contains,e._reporterState.obj)._decode(d,t)}}return r.obj&&a&&(i=e.leaveObject(n)),null===r.key||null===i&&!0!==a?null!==o&&e.exitKey(o):e.leaveKey(o,r.key,i),i},Eg.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},Eg.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),_g(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},Eg.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some((function(a){var o=e.save(),s=r.choice[a];try{var u=s._decode(e,t);if(e.isError(u))return!1;n={type:a,value:u},i=!0}catch(t){return e.restore(o),!1}return!0}),this),i?n:e.error("Choice not matched")},Eg.prototype._createEncoderBuffer=function(e){return new wg(e,this.reporter)},Eg.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);return void 0===i||this._skipDefault(i,t,r)?void 0:i}},Eg.prototype._encodeValue=function(e,t,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new mg);var a=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var o=null,s=!1;if(i.any)a=this._createEncoderBuffer(e);else if(i.choice)a=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,n)._encode(e,t),s=!0;else if(i.children)o=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var i=t.enterKey(n._baseState.key);if("object"!=r(e))return t.error("Child expected, but input is not object");var a=n._encode(e[n._baseState.key],t,e);return t.leaveKey(i),a}),this).filter((function(e){return e})),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,o=this._createEncoderBuffer(e.map((function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)}),u))}else null!==i.use?a=this._getUse(i.use,n)._encode(e,t):(o=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,l=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(c,s,l,o))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},Eg.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||_g(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},Eg.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},Eg.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},Eg.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var Tg={};!function(e){function t(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t(e.tag)}(Tg);var Pg=eg.exports,Og=og.Buffer,Cg=Ig,Mg=Tg;function Ng(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new Lg,this.tree._init(e.body)}var Rg=Ng;function Lg(e){Cg.call(this,"der",e)}function jg(e){return e<10?"0"+e:e}Ng.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},Pg(Lg,Cg),Lg.prototype._encodeComposite=function(e,t,r,n){var i=function(e,t,r,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),Mg.tagByName.hasOwnProperty(e))i=Mg.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=Mg.tagClassByName[r||"universal"]<<6)}(e,t,r,this.reporter);if(n.length<128){var a=Og.alloc(2);return a[0]=i,a[1]=n.length,this._createEncoderBuffer([a,n])}for(var o=1,s=n.length;s>=256;s>>=8)o++;var u=Og.alloc(2+o);u[0]=i,u[1]=128|o;for(var c=1+o,l=n.length;l>0;c--,l>>=8)u[c]=255&l;return this._createEncoderBuffer([u,n])},Lg.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=Og.alloc(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},Lg.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(var i=0;i<e.length;i++)e[i]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var a=0,o=0;o<e.length;o++){var s=e[o];for(a++;s>=128;s>>=7)a++}for(var u=Og.alloc(a),c=u.length-1,l=e.length-1;l>=0;l--){var f=e[l];for(u[c--]=127&f;(f>>=7)>0;)u[c--]=128|127&f}return this._createEncoderBuffer(u)},Lg.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[jg(n.getUTCFullYear()),jg(n.getUTCMonth()+1),jg(n.getUTCDate()),jg(n.getUTCHours()),jg(n.getUTCMinutes()),jg(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[jg(n.getUTCFullYear()%100),jg(n.getUTCMonth()+1),jg(n.getUTCDate()),jg(n.getUTCHours()),jg(n.getUTCMinutes()),jg(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},Lg.prototype._encodeNull=function(){return this._createEncoderBuffer("")},Lg.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!Og.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=Og.from(r)}if(Og.isBuffer(e)){var n=e.length;0===e.length&&n++;var i=Og.alloc(n);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var a=1,o=e;o>=256;o>>=8)a++;for(var s=new Array(a),u=s.length-1;u>=0;u--)s[u]=255&e,e>>=8;return 128&s[0]&&s.unshift(0),this._createEncoderBuffer(Og.from(s))},Lg.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},Lg.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},Lg.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var a=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),a.length!==i.defaultBuffer.length)return!1;for(n=0;n<a.length;n++)if(a[n]!==i.defaultBuffer[n])return!1;return!0};var Dg=eg.exports,Bg=Rg;function Ug(e){Bg.call(this,e),this.enc="pem"}Dg(Ug,Bg);var Fg=Ug;Ug.prototype.encode=function(e,t){for(var r=Bg.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"],i=0;i<r.length;i+=64)n.push(r.slice(i,i+64));return n.push("-----END "+t.label+"-----"),n.join("\n")},function(e){var t=e;t.der=Rg,t.pem=Fg}(Qy);var zg={},Hg=eg.exports,Vg=Yy.exports,Kg=fg.DecoderBuffer,qg=Ig,Wg=Tg;function Gg(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new Xg,this.tree._init(e.body)}var Jg=Gg;function Xg(e){qg.call(this,"der",e)}function $g(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=Wg.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){var a=r;for(r=0;128==(128&a);){if(a=e.readUInt8(t),e.isError(a))return a;r<<=7,r|=127&a}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:Wg.tag[r]}}function Yg(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0==(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var a=0;a<i;a++){n<<=8;var o=e.readUInt8(r);if(e.isError(o))return o;n|=o}return n}Gg.prototype.decode=function(e,t){return Kg.isDecoderBuffer(e)||(e=new Kg(e,t)),this.tree._decode(e,t)},Hg(Xg,qg),Xg.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=$g(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},Xg.prototype._decodeTag=function(e,t,r){var n=$g(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=Yg(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var a=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},Xg.prototype._skipUntilEnd=function(e,t){for(;;){var r=$g(e,t);if(e.isError(r))return r;var n=Yg(e,r.primitive,t);if(e.isError(n))return n;var i;if(i=r.primitive||null!==n?e.skip(n):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},Xg.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var a=this._peekTag(e,"end");if(e.isError(a))return a;var o=r.decode(e,"der",n);if(e.isError(o)&&a)break;i.push(o)}return i},Xg.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<n.length/2;a++)i+=String.fromCharCode(n.readUInt16BE(2*a));return i}if("numstr"===t){var o=e.raw().toString("ascii");return this._isNumstr(o)?o:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},Xg.prototype._decodeObjid=function(e,t,r){for(var n,i=[],a=0,o=0;!e.isEmpty();)a<<=7,a|=127&(o=e.readUInt8()),0==(128&o)&&(i.push(a),a=0);128&o&&i.push(a);var s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),t){var c=t[n.join(" ")];void 0===c&&(c=t[n.join(".")]),void 0!==c&&(n=c)}return n},Xg.prototype._decodeTime=function(e,t){var r,n,i,a,o,s,u=e.raw().toString();if("gentime"===t)r=0|u.slice(0,4),n=0|u.slice(4,6),i=0|u.slice(6,8),a=0|u.slice(8,10),o=0|u.slice(10,12),s=0|u.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|u.slice(0,2),n=0|u.slice(2,4),i=0|u.slice(4,6),a=0|u.slice(6,8),o=0|u.slice(8,10),s=0|u.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,i,a,o,s,0)},Xg.prototype._decodeNull=function(){return null},Xg.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},Xg.prototype._decodeInt=function(e,t){var r=e.raw(),n=new Vg(r);return t&&(n=t[n.toString(10)]||n),n},Xg.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree};var Zg=eg.exports,Qg=og.Buffer,eb=Jg;function tb(e){eb.call(this,e),this.enc="pem"}Zg(tb,eb);var rb=tb;tb.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,o=-1,s=0;s<r.length;s++){var u=r[s].match(i);if(null!==u&&u[2]===n){if(-1!==a){if("END"!==u[1])break;o=s;break}if("BEGIN"!==u[1])break;a=s}}if(-1===a||-1===o)throw new Error("PEM section not found for: "+n);var c=r.slice(a+1,o).join("");c.replace(/[^a-z0-9+/=]+/gi,"");var l=Qg.from(c,"base64");return eb.prototype.decode.call(this,l,t)},function(e){var t=e;t.der=Jg,t.pem=rb}(zg),function(e){var t=Qy,r=zg,n=eg.exports;function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(e){var t=this.name;function r(e){this._initNamed(e,t)}return n(r,e),r.prototype._initNamed=function(t,r){e.call(this,t,r)},new r(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r[e])),this.decoders[e]},i.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(t[e])),this.encoders[e]},i.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}(Zy);var nb={};!function(e){var t=nb;t.Reporter=sg.Reporter,t.DecoderBuffer=fg.DecoderBuffer,t.EncoderBuffer=fg.EncoderBuffer,t.Node=Ig}();var ib={};!function(e){var t=ib;t._reverse=function(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t},t.der=Tg}(),function(e){var t=$y;t.bignum=Yy.exports,t.define=Zy.define,t.base=nb,t.constants=ib,t.decoders=zg,t.encoders=Qy}();var ab={exports:{}},ob={},sb={};Object.defineProperty(sb,"__esModule",{value:!0}),sb.default=function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,a=t+i,o=pr.alloc(a);for(o.write(e);i--;)o.write("=",n++);return o.toString()},Object.defineProperty(ob,"__esModule",{value:!0});var ub=sb;function cb(e,t){return void 0===t&&(t="utf8"),$r(e)?fb(e.toString("base64")):fb(pr.from(e,t).toString("base64"))}function lb(e){return e=e.toString(),ub.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function fb(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var hb=cb;hb.encode=cb,hb.decode=function(e,t){return void 0===t&&(t="utf8"),pr.from(lb(e),"base64").toString(t)},hb.toBase64=lb,hb.fromBase64=fb,hb.toBuffer=function(e){return pr.from(lb(e),"base64")},ob.default=hb,function(e){e.exports=ob.default,e.exports.default=e.exports}(ab);var db=$y,pb=ab.exports,vb=function(){function e(){a(this,e)}return s(e,null,[{key:"convert",value:function(e,t,r){if(e){if(t===r)return e;var n;if("raw"===t||e instanceof pr)n=e;else if("uint8_array"===t||Array.isArray(e))n=pr.from(e);else if("hex"===t)n=pr.from(e,"hex");else if("base64"===t)n=pr.from(e,"base64");else if("base64url"===t)n=pb.toBuffer(e);else{if("bn"!==t&&"bignum"!==t)throw new Error("Invalid fromType");n=pr.from(this.pad(e.toString(16)),"hex")}if("raw"===r)return n;if("uint8_array"===r)return Array.from(n);if("hex"===r)return n.toString("hex");if("base64"===r)return n.toString("base64");if("base64url"===r)return pb.fromBase64(n.toString("base64"));if("bn"===r||"bignum"===r)return new db.bignum(n);throw new Error("Invalid toType")}}},{key:"pad",value:function(e){return e.length%2==1?"0".concat(e):e}}]),e}(),yb=$y,gb=function(){function e(){a(this,e),Object.defineProperty(this,"_registry",{value:{}})}return s(e,[{key:"registry",get:function(){return this._registry}},{key:"define",value:function(e,t){this._registry[e]=yb.define(e,t(this))}},{key:"normalize",value:function(e){return this.registry[e]}}]),e}(),bb=new gb;bb.define("Version",(function(e){return function(){this.int({0:"two-prime",1:"multi"})}})),bb.define("OtherPrimeInfos",(function(e){return function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}})),bb.define("AlgorithmIdentifier",(function(e){return function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}})),bb.define("PrivateKeyInfo",(function(e){var t=e.normalize("Version"),r=e.normalize("AlgorithmIdentifier");return function(){this.seq().obj(this.key("version").use(t),this.key("algorithm").use(r),this.key("privateKey").octstr())}})),bb.define("PublicKeyInfo",(function(e){var t=e.normalize("AlgorithmIdentifier");return function(){this.seq().obj(this.key("algorithm").use(t),this.key("publicKey").bitstr())}})),bb.define("RSAPrivateKey",(function(e){var t=e.normalize("Version"),r=e.normalize("OtherPrimeInfos");return function(){this.seq().obj(this.key("version").use(t),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(r))}})),bb.define("RSAPublicKey",(function(e){return function(){this.seq().obj(this.key("n").int(),this.key("e").int())}})),bb.define("ECPrivateKey",(function(e){return function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().choice({namedCurve:this.objid()}),this.key("publicKey").explicit(1).optional().bitstr())}}));var mb=bb,wb=vb,xb=mb,_b=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"fromPrivatePKCS1",value:function(e){var t=xb.normalize("RSAPrivateKey").decode(e,"der"),r=t.n,n=t.e,i=t.d,a=t.p,o=t.q,s=t.dp,u=t.dq,c=t.qi;return{n:wb.convert(r,"bn","raw"),e:wb.convert(n,"bn","raw"),d:wb.convert(i,"bn","raw"),p:wb.convert(a,"bn","raw"),q:wb.convert(o,"bn","raw"),dp:wb.convert(s,"bn","raw"),dq:wb.convert(u,"bn","raw"),qi:wb.convert(c,"bn","raw")}}},{key:"fromPrivatePKCS8",value:function(e){var t=xb.normalize("PrivateKeyInfo"),r=xb.normalize("RSAPrivateKey"),n=t.decode(e,"der"),i=r.decode(n.privateKey,"der"),a=i.n,o=i.e,s=i.d,u=i.p,c=i.q,l=i.dp,f=i.dq,h=i.qi;return{n:wb.convert(a,"bn","raw"),e:wb.convert(o,"bn","raw"),d:wb.convert(s,"bn","raw"),p:wb.convert(u,"bn","raw"),q:wb.convert(c,"bn","raw"),dp:wb.convert(l,"bn","raw"),dq:wb.convert(f,"bn","raw"),qi:wb.convert(h,"bn","raw")}}},{key:"fromPublicPKCS1",value:function(e){var t=xb.normalize("RSAPublicKey").decode(e,"der"),r=t.n,n=t.e;return{n:wb.convert(r,"bn","raw"),e:wb.convert(n,"bn","raw")}}},{key:"fromPublicPKCS8",value:function(e){var t=xb.normalize("PublicKeyInfo"),r=xb.normalize("RSAPublicKey"),n=t.decode(e,"der"),i=r.decode(n.publicKey.data,"der"),a=i.n,o=i.e;return{n:wb.convert(a,"bn","raw"),e:wb.convert(o,"bn","raw")}}},{key:"fromJwk",value:function(e){var t=e.n,r=e.e,n=e.d,i=e.p,a=e.q,o=e.dp,s=e.dq,u=e.qi;return e.alg,{n:wb.convert(t,"base64url","raw"),e:wb.convert(r,"base64url","raw"),d:wb.convert(n,"base64url","raw"),p:wb.convert(i,"base64url","raw"),q:wb.convert(a,"base64url","raw"),dp:wb.convert(o,"base64url","raw"),dq:wb.convert(s,"base64url","raw"),qi:wb.convert(u,"base64url","raw")}}},{key:"toPrivatePKCS1",value:function(e){var t=e.n,n=e.e,i=e.d,a=e.p,o=e.q,s=e.dp,u=e.dq,c=e.qi,l=this.params.version,f=xb.normalize("RSAPrivateKey").encode({version:l,n:wb.convert(t,"raw","bn"),e:wb.convert(n,"raw","bn"),d:wb.convert(i,"raw","bn"),p:wb.convert(a,"raw","bn"),q:wb.convert(o,"raw","bn"),dp:wb.convert(s,"raw","bn"),dq:wb.convert(u,"raw","bn"),qi:wb.convert(c,"raw","bn")},"der").toString("base64");return r.formatPem(f,"RSA PRIVATE")}},{key:"toPrivatePKCS8",value:function(e){var t=e.n,n=e.e,i=e.d,a=e.p,o=e.q,s=e.dp,u=e.dq,c=e.qi,l=this.params,f=l.oid,h=l.algParameters,d=l.version,p=xb.normalize("PrivateKeyInfo"),v=xb.normalize("RSAPrivateKey").encode({version:d,n:wb.convert(t,"raw","bn"),e:wb.convert(n,"raw","bn"),d:wb.convert(i,"raw","bn"),p:wb.convert(a,"raw","bn"),q:wb.convert(o,"raw","bn"),dp:wb.convert(s,"raw","bn"),dq:wb.convert(u,"raw","bn"),qi:wb.convert(c,"raw","bn")},"der"),y=p.encode({version:d,algorithm:{algorithm:f.split("."),parameters:pr.from(h,"hex")},privateKey:v},"der").toString("base64");return r.formatPem(y,"PRIVATE")}},{key:"toPublicPKCS1",value:function(e){var t=e.n,n=e.e,i=this.params.version,a=xb.normalize("RSAPublicKey").encode({version:i,n:wb.convert(t,"raw","bn"),e:wb.convert(n,"raw","bn")},"der").toString("base64");return r.formatPem(a,"RSA PUBLIC")}},{key:"toPublicPKCS8",value:function(e){var t=e.n,n=e.e,i=this.params,a=i.oid,o=i.algParameters,s=xb.normalize("PublicKeyInfo"),u=xb.normalize("RSAPublicKey").encode({n:wb.convert(t,"raw","bn"),e:wb.convert(n,"raw","bn")},"der"),c=s.encode({algorithm:{algorithm:a.split("."),parameters:pr.from(o,"hex")},publicKey:{unused:0,data:u}},"der").toString("base64");return r.formatPem(c,"PUBLIC")}},{key:"toPrivateJwk",value:function(e){var t=e.n,r=e.e,n=e.d,i=e.p,a=e.q,o=e.dp,s=e.dq,u=e.qi;return{kty:this.params.kty,n:wb.convert(t,"raw","base64url"),e:wb.convert(r,"raw","base64url"),d:wb.convert(n,"raw","base64url"),p:wb.convert(i,"raw","base64url"),q:wb.convert(a,"raw","base64url"),dp:wb.convert(o,"raw","base64url"),dq:wb.convert(s,"raw","base64url"),qi:wb.convert(u,"raw","base64url")}}},{key:"toPublicJwk",value:function(e){var t=e.n,r=e.e;return{kty:this.params.kty,n:wb.convert(t,"raw","base64url"),e:wb.convert(r,"raw","base64url")}}}]),r}(Xy),kb=_b,Sb={},Eb={},Ib={};!function(e){var t=Ib;function r(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),a=i>>8,o=255&i;a?r.push(a,o):r.push(o)}return r},t.zero2=r,t.toHex=n,t.encode=function(e,t){return"hex"===t?n(e):e}}(),function(e){var t=Eb,r=Yy.exports,n=gg,i=Ib;t.assert=n,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode,t.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,a=e.clone(),o=0;o<n.length;o++){var s,u=a.andln(i-1);a.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,a.isubn(s)):s=0,n[o]=s,a.iushrn(1)}return n},t.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,a=0;e.cmpn(-i)>0||t.cmpn(-a)>0;){var o,s,u=e.andln(3)+i&3,c=t.andln(3)+a&3;3===u&&(u=-1),3===c&&(c=-1),o=0==(1&u)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(o),s=0==(1&c)?0:3!=(n=t.andln(7)+a&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===o+1&&(i=1-i),2*a===s+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return r},t.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new r(e,"hex","le")}}();var Ab,Tb={exports:{}};function Pb(e){this.rand=e}if(Tb.exports=function(e){return Ab||(Ab=new Pb(null)),Ab.generate(e)},Tb.exports.Rand=Pb,Pb.prototype.generate=function(e){return this._rand(e)},Pb.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==("undefined"==typeof self?"undefined":r(self)))self.crypto&&self.crypto.getRandomValues?Pb.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Pb.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==("undefined"==typeof window?"undefined":r(window))&&(Pb.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Ob=require("crypto");if("function"!=typeof Ob.randomBytes)throw new Error("Not supported");Pb.prototype._rand=function(e){return Ob.randomBytes(e)}}catch(IK){}var Cb={},Mb=Yy.exports,Nb=Eb,Rb=Nb.getNAF,Lb=Nb.getJSF,jb=Nb.assert;function Db(e,t){this.type=e,this.p=new Mb(t.p,16),this.red=t.prime?Mb.red(t.prime):Mb.mont(this.p),this.zero=new Mb(0).toRed(this.red),this.one=new Mb(1).toRed(this.red),this.two=new Mb(2).toRed(this.red),this.n=t.n&&new Mb(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Bb=Db;function Ub(e,t){this.curve=e,this.type=t,this.precomputed=null}Db.prototype.point=function(){throw new Error("Not implemented")},Db.prototype.validate=function(){throw new Error("Not implemented")},Db.prototype._fixedNafMul=function(e,t){jb(e.precomputed);var r=e._getDoubles(),n=Rb(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var a,o,s=[];for(a=0;a<n.length;a+=r.step){o=0;for(var u=a+r.step-1;u>=a;u--)o=(o<<1)+n[u];s.push(o)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=i;f>0;f--){for(a=0;a<s.length;a++)(o=s[a])===f?l=l.mixedAdd(r.points[a]):o===-f&&(l=l.mixedAdd(r.points[a].neg()));c=c.add(l)}return c.toP()},Db.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=Rb(t,r,this._bitLength),o=this.jpoint(null,null,null),s=a.length-1;s>=0;s--){for(var u=0;s>=0&&0===a[s];s--)u++;if(s>=0&&u++,o=o.dblp(u),s<0)break;var c=a[s];jb(0!==c),o="affine"===e.type?c>0?o.mixedAdd(i[c-1>>1]):o.mixedAdd(i[-c-1>>1].neg()):c>0?o.add(i[c-1>>1]):o.add(i[-c-1>>1].neg())}return"affine"===e.type?o.toP():o},Db.prototype._wnafMulAdd=function(e,t,r,n,i){var a,o,s,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,f=0;for(a=0;a<n;a++){var h=(s=t[a])._getNAFPoints(e);u[a]=h.wnd,c[a]=h.points}for(a=n-1;a>=1;a-=2){var d=a-1,p=a;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],g=Lb(r[d],r[p]);for(f=Math.max(g[0].length,f),l[d]=new Array(f),l[p]=new Array(f),o=0;o<f;o++){var b=0|g[0][o],m=0|g[1][o];l[d][o]=y[3*(b+1)+(m+1)],l[p][o]=0,c[d]=v}}else l[d]=Rb(r[d],u[d],this._bitLength),l[p]=Rb(r[p],u[p],this._bitLength),f=Math.max(l[d].length,f),f=Math.max(l[p].length,f)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(a=f;a>=0;a--){for(var _=0;a>=0;){var k=!0;for(o=0;o<n;o++)x[o]=0|l[o][a],0!==x[o]&&(k=!1);if(!k)break;_++,a--}if(a>=0&&_++,w=w.dblp(_),a<0)break;for(o=0;o<n;o++){var S=x[o];0!==S&&(S>0?s=c[o][S-1>>1]:S<0&&(s=c[o][-S-1>>1].neg()),w="affine"===s.type?w.mixedAdd(s):w.add(s))}}for(a=0;a<n;a++)c[a]=null;return i?w:w.toP()},Db.BasePoint=Ub,Ub.prototype.eq=function(){throw new Error("Not implemented")},Ub.prototype.validate=function(){return this.curve.validate(this)},Db.prototype.decodePoint=function(e,t){e=Nb.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?jb(e[e.length-1]%2==0):7===e[0]&&jb(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Ub.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Ub.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Ub.prototype.encode=function(e,t){return Nb.encode(this._encode(t),e)},Ub.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Ub.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Ub.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)n=n.dbl();r.push(n)}return{step:e,points:r}},Ub.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Ub.prototype._getBeta=function(){return null},Ub.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Fb=Eb,zb=Yy.exports,Hb=eg.exports,Vb=Bb,Kb=Fb.assert;function qb(e){Vb.call(this,"short",e),this.a=new zb(e.a,16).toRed(this.red),this.b=new zb(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Hb(qb,Vb);var Wb=qb;function Gb(e,t,r,n){Vb.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new zb(t,16),this.y=new zb(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Jb(e,t,r,n){Vb.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new zb(0)):(this.x=new zb(t,16),this.y=new zb(r,16),this.z=new zb(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}qb.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new zb(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new zb(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],Kb(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new zb(e.a,16),b:new zb(e.b,16)}})):this._getEndoBasis(r)}}},qb.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:zb.mont(e),r=new zb(2).toRed(t).redInvm(),n=r.redNeg(),i=new zb(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},qb.prototype._getEndoBasis=function(e){for(var t,r,n,i,a,o,s,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,h=this.n.clone(),d=new zb(1),p=new zb(0),v=new zb(0),y=new zb(1),g=0;0!==f.cmpn(0);){var b=h.div(f);u=h.sub(b.mul(f)),c=v.sub(b.mul(d));var m=y.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++g)break;s=u,h=f,f=u,v=d,d=c,y=p,p=m}a=u.neg(),o=c;var w=n.sqr().add(i.sqr());return a.sqr().add(o.sqr()).cmp(w)>=0&&(a=t,o=r),n.negative&&(n=n.neg(),i=i.neg()),a.negative&&(a=a.neg(),o=o.neg()),[{a:n,b:i},{a:a,b:o}]},qb.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),s=a.mul(n.a),u=i.mul(r.b),c=a.mul(n.b);return{k1:e.sub(o).sub(s),k2:u.add(c).neg()}},qb.prototype.pointFromX=function(e,t){(e=new zb(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},qb.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},qb.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),s=e[a],u=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),n[2*a]=s,n[2*a+1]=u,i[2*a]=o.k1,i[2*a+1]=o.k2}for(var c=this._wnafMulAdd(1,n,i,2*a,r),l=0;l<2*a;l++)n[l]=null,i[l]=null;return c},Hb(Gb,Vb.BasePoint),qb.prototype.point=function(e,t,r){return new Gb(this,e,t,r)},qb.prototype.pointFromJSON=function(e,t){return Gb.fromJSON(this,e,t)},Gb.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Gb.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Gb.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var a=t[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(i))}},n},Gb.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Gb.prototype.isInfinity=function(){return this.inf},Gb.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Gb.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},Gb.prototype.getX=function(){return this.x.fromRed()},Gb.prototype.getY=function(){return this.y.fromRed()},Gb.prototype.mul=function(e){return e=new zb(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Gb.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Gb.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Gb.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Gb.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Gb.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Hb(Jb,Vb.BasePoint),qb.prototype.jpoint=function(e,t,r){return new Jb(this,e,t,r)},Jb.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Jb.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Jb.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=a.redSub(o);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),f=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(f).redISub(f),d=u.redMul(f.redISub(h)).redISub(a.redMul(l)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},Jb.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),o=r.redSub(n),s=i.redSub(a);if(0===o.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),c=u.redMul(o),l=r.redMul(u),f=s.redSqr().redIAdd(c).redISub(l).redISub(l),h=s.redMul(l.redISub(f)).redISub(i.redMul(c)),d=this.z.redMul(o);return this.curve.jpoint(f,h,d)},Jb.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,s=this.z,u=s.redSqr().redSqr(),c=o.redAdd(o);for(t=0;t<e;t++){var l=a.redSqr(),f=c.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=a.redMul(f),v=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(v),g=d.redMul(y);g=g.redIAdd(g).redISub(h);var b=c.redMul(s);t+1<e&&(u=u.redMul(h)),a=v,s=b,c=g}return this.curve.jpoint(a,c.redMul(i),s)},Jb.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Jb.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(o).redISub(o),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(o.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(l).redISub(h);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),v=p.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Jb.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(o).redISub(o);e=u;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(o.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l);var y=f.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=d.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,r)},Jb.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),a=t.redSqr(),o=r.redSqr(),s=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(o),l=s.redSqr().redISub(c.redAdd(c)),f=c.redISub(l),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(f).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},Jb.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(o).redSqr().redISub(a).redISub(s).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(s).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(o.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(s);return this.curve.jpoint(f,h,d)},Jb.prototype.mul=function(e,t){return e=new zb(e,t),this.curve._wnafMul(this,e)},Jb.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},Jb.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Jb.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Jb.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Xb=Yy.exports,$b=eg.exports,Yb=Bb,Zb=Eb;function Qb(e){Yb.call(this,"mont",e),this.a=new Xb(e.a,16).toRed(this.red),this.b=new Xb(e.b,16).toRed(this.red),this.i4=new Xb(4).toRed(this.red).redInvm(),this.two=new Xb(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}$b(Qb,Yb);var em=Qb;function tm(e,t,r){Yb.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Xb(t,16),this.z=new Xb(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Qb.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},$b(tm,Yb.BasePoint),Qb.prototype.decodePoint=function(e,t){return this.point(Zb.toArray(e,t),1)},Qb.prototype.point=function(e,t){return new tm(this,e,t)},Qb.prototype.pointFromJSON=function(e){return tm.fromJSON(this,e)},tm.prototype.precompute=function(){},tm.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},tm.fromJSON=function(e,t){return new tm(e,t[0],t[1]||e.one)},tm.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},tm.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},tm.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},tm.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},tm.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),o=i.redMul(n),s=t.z.redMul(a.redAdd(o).redSqr()),u=t.x.redMul(a.redISub(o).redSqr());return this.curve.point(s,u)},tm.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},tm.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},tm.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},tm.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},tm.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},tm.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var rm=Eb,nm=Yy.exports,im=eg.exports,am=Bb,om=rm.assert;function sm(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,am.call(this,"edwards",e),this.a=new nm(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new nm(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new nm(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),om(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}im(sm,am);var um=sm;function cm(e,t,r,n,i){am.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new nm(t,16),this.y=new nm(r,16),this.z=n?new nm(n,16):this.curve.one,this.t=i&&new nm(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}sm.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},sm.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},sm.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},sm.prototype.pointFromX=function(e,t){(e=new nm(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(i.redInvm()),o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var s=o.fromRed().isOdd();return(t&&!s||!t&&s)&&(o=o.redNeg()),this.point(e,o)},sm.prototype.pointFromY=function(e,t){(e=new nm(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(i.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},sm.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},im(cm,am.BasePoint),sm.prototype.pointFromJSON=function(e){return cm.fromJSON(this,e)},sm.prototype.point=function(e,t,r,n){return new cm(this,e,t,r,n)},cm.fromJSON=function(e,t){return new cm(e,t[0],t[1],t[2])},cm.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},cm.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},cm.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),o=a.redSub(r),s=n.redSub(t),u=i.redMul(o),c=a.redMul(s),l=i.redMul(s),f=o.redMul(a);return this.curve.point(u,c,f,l)},cm.prototype._projDbl=function(){var e,t,r,n,i,a,o=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(e=o.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),a=c.redSub(i).redISub(i),e=o.redSub(s).redISub(u).redMul(a),t=c.redMul(n.redSub(u)),r=c.redMul(a))}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),a=n.redSub(i).redSub(i),e=this.curve._mulC(o.redISub(n)).redMul(a),t=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(a);return this.curve.point(e,t,r)},cm.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},cm.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),o=i.redSub(n),s=i.redAdd(n),u=r.redAdd(t),c=a.redMul(o),l=s.redMul(u),f=a.redMul(u),h=o.redMul(s);return this.curve.point(c,l,h,f)},cm.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),a=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(a).redMul(o),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(o),f=n.redMul(u).redMul(l);return this.curve.twisted?(t=n.redMul(c).redMul(o.redSub(this.curve._mulA(a))),r=u.redMul(c)):(t=n.redMul(c).redMul(o.redSub(a)),r=this.curve._mulC(u).redMul(c)),this.curve.point(f,t,r)},cm.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},cm.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},cm.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},cm.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},cm.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},cm.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},cm.prototype.getX=function(){return this.normalize(),this.x.fromRed()},cm.prototype.getY=function(){return this.normalize(),this.y.fromRed()},cm.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},cm.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},cm.prototype.toP=cm.prototype.normalize,cm.prototype.mixedAdd=cm.prototype.add,function(e){var t=e;t.base=Bb,t.short=Wb,t.mont=em,t.edwards=um}(Cb);var lm={},fm={},hm={},dm=gg,pm=eg.exports;function vm(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function ym(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function gm(e){return 1===e.length?"0"+e:e}function bm(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}hm.inherits=pm,hm.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):vm(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},hm.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=gm(e[r].toString(16));return t},hm.htonl=ym,hm.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=ym(i)),r+=bm(i.toString(16))}return r},hm.zero2=gm,hm.zero8=bm,hm.join32=function(e,t,r,n){var i=r-t;dm(i%4==0);for(var a=new Array(i/4),o=0,s=t;o<a.length;o++,s+=4){var u;u="big"===n?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],a[o]=u>>>0}return a},hm.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var a=e[n];"big"===t?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=255&a):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=255&a)}return r},hm.rotr32=function(e,t){return e>>>t|e<<32-t},hm.rotl32=function(e,t){return e<<t|e>>>32-t},hm.sum32=function(e,t){return e+t>>>0},hm.sum32_3=function(e,t,r){return e+t+r>>>0},hm.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},hm.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},hm.sum64=function(e,t,r,n){var i=e[t],a=n+e[t+1]>>>0,o=(a<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=a},hm.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},hm.sum64_lo=function(e,t,r,n){return t+n>>>0},hm.sum64_4_hi=function(e,t,r,n,i,a,o,s){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+a>>>0)<a?1:0,e+r+i+o+(u+=(c=c+s>>>0)<s?1:0)>>>0},hm.sum64_4_lo=function(e,t,r,n,i,a,o,s){return t+n+a+s>>>0},hm.sum64_5_hi=function(e,t,r,n,i,a,o,s,u,c){var l=0,f=t;return l+=(f=f+n>>>0)<t?1:0,l+=(f=f+a>>>0)<a?1:0,l+=(f=f+s>>>0)<s?1:0,e+r+i+o+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},hm.sum64_5_lo=function(e,t,r,n,i,a,o,s,u,c){return t+n+a+s+c>>>0},hm.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},hm.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},hm.shr64_hi=function(e,t,r){return e>>>r},hm.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var mm={},wm=hm,xm=gg;function _m(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}mm.BlockHash=_m,_m.prototype.update=function(e,t){if(e=wm.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=wm.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},_m.prototype.digest=function(e){return this.update(this._pad()),xm(null===this.pending),this._digest(e)},_m.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,a=8;a<this.padLength;a++)n[i++]=0;return n};var km={},Sm={},Em=hm.rotr32;function Im(e,t,r){return e&t^~e&r}function Am(e,t,r){return e&t^e&r^t&r}function Tm(e,t,r){return e^t^r}Sm.ft_1=function(e,t,r,n){return 0===e?Im(t,r,n):1===e||3===e?Tm(t,r,n):2===e?Am(t,r,n):void 0},Sm.ch32=Im,Sm.maj32=Am,Sm.p32=Tm,Sm.s0_256=function(e){return Em(e,2)^Em(e,13)^Em(e,22)},Sm.s1_256=function(e){return Em(e,6)^Em(e,11)^Em(e,25)},Sm.g0_256=function(e){return Em(e,7)^Em(e,18)^e>>>3},Sm.g1_256=function(e){return Em(e,17)^Em(e,19)^e>>>10};var Pm=hm,Om=mm,Cm=Sm,Mm=Pm.rotl32,Nm=Pm.sum32,Rm=Pm.sum32_5,Lm=Cm.ft_1,jm=Om.BlockHash,Dm=[1518500249,1859775393,2400959708,3395469782];function Bm(){if(!(this instanceof Bm))return new Bm;jm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Pm.inherits(Bm,jm);var Um=Bm;Bm.blockSize=512,Bm.outSize=160,Bm.hmacStrength=80,Bm.padLength=64,Bm.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Mm(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),l=Rm(Mm(i,5),Lm(c,a,o,s),u,r[n],Dm[c]);u=s,s=o,o=Mm(a,30),a=i,i=l}this.h[0]=Nm(this.h[0],i),this.h[1]=Nm(this.h[1],a),this.h[2]=Nm(this.h[2],o),this.h[3]=Nm(this.h[3],s),this.h[4]=Nm(this.h[4],u)},Bm.prototype._digest=function(e){return"hex"===e?Pm.toHex32(this.h,"big"):Pm.split32(this.h,"big")};var Fm=hm,zm=mm,Hm=Sm,Vm=gg,Km=Fm.sum32,qm=Fm.sum32_4,Wm=Fm.sum32_5,Gm=Hm.ch32,Jm=Hm.maj32,Xm=Hm.s0_256,$m=Hm.s1_256,Ym=Hm.g0_256,Zm=Hm.g1_256,Qm=zm.BlockHash,ew=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function tw(){if(!(this instanceof tw))return new tw;Qm.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ew,this.W=new Array(64)}Fm.inherits(tw,Qm);var rw=tw;tw.blockSize=512,tw.outSize=256,tw.hmacStrength=192,tw.padLength=64,tw.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=qm(Zm(r[n-2]),r[n-7],Ym(r[n-15]),r[n-16]);var i=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],f=this.h[7];for(Vm(this.k.length===r.length),n=0;n<r.length;n++){var h=Wm(f,$m(u),Gm(u,c,l),this.k[n],r[n]),d=Km(Xm(i),Jm(i,a,o));f=l,l=c,c=u,u=Km(s,h),s=o,o=a,a=i,i=Km(h,d)}this.h[0]=Km(this.h[0],i),this.h[1]=Km(this.h[1],a),this.h[2]=Km(this.h[2],o),this.h[3]=Km(this.h[3],s),this.h[4]=Km(this.h[4],u),this.h[5]=Km(this.h[5],c),this.h[6]=Km(this.h[6],l),this.h[7]=Km(this.h[7],f)},tw.prototype._digest=function(e){return"hex"===e?Fm.toHex32(this.h,"big"):Fm.split32(this.h,"big")};var nw=hm,iw=rw;function aw(){if(!(this instanceof aw))return new aw;iw.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}nw.inherits(aw,iw);var ow=aw;aw.blockSize=512,aw.outSize=224,aw.hmacStrength=192,aw.padLength=64,aw.prototype._digest=function(e){return"hex"===e?nw.toHex32(this.h.slice(0,7),"big"):nw.split32(this.h.slice(0,7),"big")};var sw=hm,uw=mm,cw=gg,lw=sw.rotr64_hi,fw=sw.rotr64_lo,hw=sw.shr64_hi,dw=sw.shr64_lo,pw=sw.sum64,vw=sw.sum64_hi,yw=sw.sum64_lo,gw=sw.sum64_4_hi,bw=sw.sum64_4_lo,mw=sw.sum64_5_hi,ww=sw.sum64_5_lo,xw=uw.BlockHash,_w=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function kw(){if(!(this instanceof kw))return new kw;xw.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_w,this.W=new Array(160)}sw.inherits(kw,xw);var Sw=kw;function Ew(e,t,r,n,i){var a=e&r^~e&i;return a<0&&(a+=4294967296),a}function Iw(e,t,r,n,i,a){var o=t&n^~t&a;return o<0&&(o+=4294967296),o}function Aw(e,t,r,n,i){var a=e&r^e&i^r&i;return a<0&&(a+=4294967296),a}function Tw(e,t,r,n,i,a){var o=t&n^t&a^n&a;return o<0&&(o+=4294967296),o}function Pw(e,t){var r=lw(e,t,28)^lw(t,e,2)^lw(t,e,7);return r<0&&(r+=4294967296),r}function Ow(e,t){var r=fw(e,t,28)^fw(t,e,2)^fw(t,e,7);return r<0&&(r+=4294967296),r}function Cw(e,t){var r=lw(e,t,14)^lw(e,t,18)^lw(t,e,9);return r<0&&(r+=4294967296),r}function Mw(e,t){var r=fw(e,t,14)^fw(e,t,18)^fw(t,e,9);return r<0&&(r+=4294967296),r}function Nw(e,t){var r=lw(e,t,1)^lw(e,t,8)^hw(e,t,7);return r<0&&(r+=4294967296),r}function Rw(e,t){var r=fw(e,t,1)^fw(e,t,8)^dw(e,t,7);return r<0&&(r+=4294967296),r}function Lw(e,t){var r=lw(e,t,19)^lw(t,e,29)^hw(e,t,6);return r<0&&(r+=4294967296),r}function jw(e,t){var r=fw(e,t,19)^fw(t,e,29)^dw(e,t,6);return r<0&&(r+=4294967296),r}kw.blockSize=1024,kw.outSize=512,kw.hmacStrength=192,kw.padLength=128,kw.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=Lw(r[n-4],r[n-3]),a=jw(r[n-4],r[n-3]),o=r[n-14],s=r[n-13],u=Nw(r[n-30],r[n-29]),c=Rw(r[n-30],r[n-29]),l=r[n-32],f=r[n-31];r[n]=gw(i,a,o,s,u,c,l,f),r[n+1]=bw(i,a,o,s,u,c,l,f)}},kw.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],o=this.h[3],s=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],f=this.h[8],h=this.h[9],d=this.h[10],p=this.h[11],v=this.h[12],y=this.h[13],g=this.h[14],b=this.h[15];cw(this.k.length===r.length);for(var m=0;m<r.length;m+=2){var w=g,x=b,_=Cw(f,h),k=Mw(f,h),S=Ew(f,0,d,0,v),E=Iw(0,h,0,p,0,y),I=this.k[m],A=this.k[m+1],T=r[m],P=r[m+1],O=mw(w,x,_,k,S,E,I,A,T,P),C=ww(w,x,_,k,S,E,I,A,T,P);w=Pw(n,i),x=Ow(n,i),_=Aw(n,0,a,0,s),k=Tw(0,i,0,o,0,u);var M=vw(w,x,_,k),N=yw(w,x,_,k);g=v,b=y,v=d,y=p,d=f,p=h,f=vw(c,l,O,C),h=yw(l,l,O,C),c=s,l=u,s=a,u=o,a=n,o=i,n=vw(O,C,M,N),i=yw(O,C,M,N)}pw(this.h,0,n,i),pw(this.h,2,a,o),pw(this.h,4,s,u),pw(this.h,6,c,l),pw(this.h,8,f,h),pw(this.h,10,d,p),pw(this.h,12,v,y),pw(this.h,14,g,b)},kw.prototype._digest=function(e){return"hex"===e?sw.toHex32(this.h,"big"):sw.split32(this.h,"big")};var Dw=hm,Bw=Sw;function Uw(){if(!(this instanceof Uw))return new Uw;Bw.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Dw.inherits(Uw,Bw);var Fw=Uw;Uw.blockSize=1024,Uw.outSize=384,Uw.hmacStrength=192,Uw.padLength=128,Uw.prototype._digest=function(e){return"hex"===e?Dw.toHex32(this.h.slice(0,12),"big"):Dw.split32(this.h.slice(0,12),"big")},km.sha1=Um,km.sha224=ow,km.sha256=rw,km.sha384=Fw,km.sha512=Sw;var zw={},Hw=hm,Vw=mm,Kw=Hw.rotl32,qw=Hw.sum32,Ww=Hw.sum32_3,Gw=Hw.sum32_4,Jw=Vw.BlockHash;function Xw(){if(!(this instanceof Xw))return new Xw;Jw.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function $w(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Yw(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Zw(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Hw.inherits(Xw,Jw),zw.ripemd160=Xw,Xw.blockSize=512,Xw.outSize=160,Xw.hmacStrength=192,Xw.padLength=64,Xw.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],a=this.h[3],o=this.h[4],s=r,u=n,c=i,l=a,f=o,h=0;h<80;h++){var d=qw(Kw(Gw(r,$w(h,n,i,a),e[Qw[h]+t],Yw(h)),tx[h]),o);r=o,o=a,a=Kw(i,10),i=n,n=d,d=qw(Kw(Gw(s,$w(79-h,u,c,l),e[ex[h]+t],Zw(h)),rx[h]),f),s=f,f=l,l=Kw(c,10),c=u,u=d}d=Ww(this.h[1],i,l),this.h[1]=Ww(this.h[2],a,f),this.h[2]=Ww(this.h[3],o,s),this.h[3]=Ww(this.h[4],r,u),this.h[4]=Ww(this.h[0],n,c),this.h[0]=d},Xw.prototype._digest=function(e){return"hex"===e?Hw.toHex32(this.h,"little"):Hw.split32(this.h,"little")};var Qw=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ex=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tx=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],rx=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],nx=hm,ix=gg;function ax(e,t,r){if(!(this instanceof ax))return new ax(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(nx.toArray(t,r))}var ox=ax;ax.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),ix(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},ax.prototype.update=function(e,t){return this.inner.update(e,t),this},ax.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=fm;t.utils=hm,t.common=mm,t.sha=km,t.ripemd=zw,t.hmac=ox,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(),function(e){var t,r=lm,n=fm,i=Cb,a=Eb.assert;function o(e){"short"===e.type?this.curve=new i.short(e):"edwards"===e.type?this.curve=new i.edwards(e):this.curve=new i.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new o(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=require("./precomputed/secp256k1")}catch(e){t=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})}();var sx=fm,ux=Ib,cx=gg;function lx(e){if(!(this instanceof lx))return new lx(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=ux.toArray(e.entropy,e.entropyEnc||"hex"),r=ux.toArray(e.nonce,e.nonceEnc||"hex"),n=ux.toArray(e.pers,e.persEnc||"hex");cx(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var fx=lx;lx.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},lx.prototype._hmac=function(){return new sx.hmac(this.hash,this.K)},lx.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},lx.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=ux.toArray(e,t),r=ux.toArray(r,n),cx(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},lx.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=ux.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(r),this._reseed++,ux.encode(a,t)};var hx=Yy.exports,dx=Eb.assert;function px(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var vx=px;px.fromPublic=function(e,t,r){return t instanceof px?t:new px(e,{pub:t,pubEnc:r})},px.fromPrivate=function(e,t,r){return t instanceof px?t:new px(e,{priv:t,privEnc:r})},px.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},px.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},px.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},px.prototype._importPrivate=function(e,t){this.priv=new hx(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},px.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?dx(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||dx(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},px.prototype.derive=function(e){return e.validate()||dx(e.validate(),"public point not validated"),e.mul(this.priv).getX()},px.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},px.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},px.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var yx=Yy.exports,gx=Eb,bx=gx.assert;function mx(e,t){if(e instanceof mx)return e;this._importDER(e,t)||(bx(e.r&&e.s,"Signature without r or s"),this.r=new yx(e.r,16),this.s=new yx(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var wx=mx;function xx(){this.place=0}function _x(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,a=0,o=t.place;a<n;a++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function kx(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Sx(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}mx.prototype._importDER=function(e,t){e=gx.toArray(e,t);var r=new xx;if(48!==e[r.place++])return!1;var n=_x(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=_x(e,r);if(!1===i)return!1;var a=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var o=_x(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;var s=e.slice(r.place,o+r.place);if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new yx(a),this.s=new yx(s),this.recoveryParam=null,!0},mx.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=kx(t),r=kx(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Sx(n,t.length),(n=n.concat(t)).push(2),Sx(n,r.length);var i=n.concat(r),a=[48];return Sx(a,i.length),a=a.concat(i),gx.encode(a,e)};var Ex=Yy.exports,Ix=fx,Ax=Eb,Tx=lm,Px=Tb.exports,Ox=Ax.assert,Cx=vx,Mx=wx;function Nx(e){if(!(this instanceof Nx))return new Nx(e);"string"==typeof e&&(Ox(Object.prototype.hasOwnProperty.call(Tx,e),"Unknown curve "+e),e=Tx[e]),e instanceof Tx.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Rx=Nx;Nx.prototype.keyPair=function(e){return new Cx(this,e)},Nx.prototype.keyFromPrivate=function(e,t){return Cx.fromPrivate(this,e,t)},Nx.prototype.keyFromPublic=function(e,t){return Cx.fromPublic(this,e,t)},Nx.prototype.genKeyPair=function(e){e||(e={});for(var t=new Ix({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Px(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Ex(2));;){var i=new Ex(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Nx.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Nx.prototype.sign=function(e,t,n,i){"object"==r(n)&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new Ex(e,16));for(var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),s=e.toArray("be",a),u=new Ix({hash:this.hash,entropy:o,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new Ex(1)),l=0;;l++){var f=i.k?i.k(l):new Ex(u.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(c)>=0)){var h=this.g.mul(f);if(!h.isInfinity()){var d=h.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var v=f.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(h.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return i.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new Mx({r:p,s:v,recoveryParam:y})}}}}}},Nx.prototype.verify=function(e,t,r,n){e=this._truncateToN(new Ex(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Mx(t,"hex")).r,a=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o,s=a.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},Nx.prototype.recoverPubKey=function(e,t,r,n){Ox((3&r)===r,"The recovery param is more than two bits"),t=new Mx(t,n);var i=this.n,a=new Ex(e),o=t.r,s=t.s,u=1&r,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");o=c?this.curve.pointFromX(o.add(this.curve.n),u):this.curve.pointFromX(o,u);var l=t.r.invm(i),f=i.sub(a).mul(l).umod(i),h=s.mul(l).umod(i);return this.g.mulAdd(f,o,h)},Nx.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Mx(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(e){continue}if(a.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Lx=Eb,jx=Lx.assert,Dx=Lx.parseBytes,Bx=Lx.cachedProperty;function Ux(e,t){this.eddsa=e,this._secret=Dx(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=Dx(t.pub)}Ux.fromPublic=function(e,t){return t instanceof Ux?t:new Ux(e,{pub:t})},Ux.fromSecret=function(e,t){return t instanceof Ux?t:new Ux(e,{secret:t})},Ux.prototype.secret=function(){return this._secret},Bx(Ux,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),Bx(Ux,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),Bx(Ux,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),Bx(Ux,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),Bx(Ux,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),Bx(Ux,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Ux.prototype.sign=function(e){return jx(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},Ux.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},Ux.prototype.getSecret=function(e){return jx(this._secret,"KeyPair is public only"),Lx.encode(this.secret(),e)},Ux.prototype.getPublic=function(e){return Lx.encode(this.pubBytes(),e)};var Fx=Ux,zx=Yy.exports,Hx=Eb,Vx=Hx.assert,Kx=Hx.cachedProperty,qx=Hx.parseBytes;function Wx(e,t){this.eddsa=e,"object"!=r(t)&&(t=qx(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),Vx(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof zx&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Kx(Wx,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Kx(Wx,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Kx(Wx,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Kx(Wx,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Wx.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Wx.prototype.toHex=function(){return Hx.encode(this.toBytes(),"hex").toUpperCase()};var Gx=Wx,Jx=fm,Xx=lm,$x=Eb,Yx=$x.assert,Zx=$x.parseBytes,Qx=Fx,e_=Gx;function t_(e){if(Yx("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof t_))return new t_(e);e=Xx[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=Jx.sha512}var r_=t_;t_.prototype.sign=function(e,t){e=Zx(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),a=this.encodePoint(i),o=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),s=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:s,Rencoded:a})},t_.prototype.verify=function(e,t,r){e=Zx(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(a)},t_.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return $x.intFromLE(e.digest()).umod(this.curve.n)},t_.prototype.keyFromPublic=function(e){return Qx.fromPublic(this,e)},t_.prototype.keyFromSecret=function(e){return Qx.fromSecret(this,e)},t_.prototype.makeSignature=function(e){return e instanceof e_?e:new e_(this,e)},t_.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},t_.prototype.decodePoint=function(e){var t=(e=$x.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=$x.intFromLE(r);return this.curve.pointFromY(i,n)},t_.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},t_.prototype.decodeInt=function(e){return $x.intFromLE(e)},t_.prototype.isPoint=function(e){return e instanceof this.pointClass},function(e){var t=Sb;t.version="6.5.4",t.utils=Eb,t.rand=Tb.exports,t.curve=Cb,t.curves=lm,t.ec=Rx,t.eddsa=r_}();var n_=new Sb.ec("secp256k1"),i_=vb,a_=mb,o_=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"fromPrivatePKCS1",value:function(e){var t=a_.normalize("ECPrivateKey").decode(e,"der"),n=t.privateKey,i=t.publicKey.data,a=i_.convert(i,"raw","hex"),o=r.getPoint(a);return{d:n,x:o.x,y:o.y}}},{key:"fromPrivatePKCS8",value:function(e){var t=a_.normalize("PrivateKeyInfo"),n=a_.normalize("ECPrivateKey"),i=t.decode(e,"der"),a=n.decode(i.privateKey,"der"),o=a.privateKey,s=a.publicKey.data,u=i_.convert(s,"raw","hex"),c=r.getPoint(u);return{d:o,x:c.x,y:c.y}}},{key:"fromPublicPKCS8",value:function(e){var t=a_.normalize("PublicKeyInfo").decode(e,"der"),n=i_.convert(t.publicKey.data,"raw","hex");return r.getPoint(n)}},{key:"fromPrivateBlk",value:function(e){var t=n_.keyFromPrivate(e,"hex"),r=t.getPublic();return{d:i_.convert(t.priv,"bn","raw"),x:i_.convert(r.getX(),"bn","raw"),y:i_.convert(r.getY(),"bn","raw")}}},{key:"fromPublicBlk",value:function(e){return r.getPoint(e)}},{key:"fromJwk",value:function(e){var t=e.d,r=e.x,n=e.y;return{d:i_.convert(t,"base64url","raw"),x:i_.convert(r,"base64url","raw"),y:i_.convert(n,"base64url","raw")}}},{key:"toPrivatePKCS1",value:function(e){var t=this.params,n=t.namedCurve,i=t.keyVersion,a=e.d,o=e.x,s=e.y,u=a_.normalize("ECPrivateKey"),c=r.makePoint(o,s),l=u.encode({version:i,privateKey:a,parameters:{type:"namedCurve",value:n.split(".")},publicKey:{unused:0,data:c}},"der").toString("base64");return r.formatPem(l,"EC PRIVATE")}},{key:"toPrivatePKCS8",value:function(e){var t=this.params,n=t.oid,i=t.algParameters,a=t.keyVersion,o=t.infoVersion,s=e.d,u=e.x,c=e.y,l=a_.normalize("PrivateKeyInfo"),f=a_.normalize("ECPrivateKey"),h=r.makePoint(u,c),d=f.encode({version:a,privateKey:s,publicKey:{unused:0,data:h}},"der"),p=l.encode({version:o,algorithm:{algorithm:n.split("."),parameters:pr.from(i,"hex")},privateKey:d},"der").toString("base64");return r.formatPem(p,"PRIVATE")}},{key:"toPublicPKCS8",value:function(e){var t=this.params,n=t.oid,i=t.algParameters,a=e.x,o=e.y,s=a_.normalize("PublicKeyInfo"),u=r.makePoint(a,o),c=s.encode({algorithm:{algorithm:n.split("."),parameters:pr.from(i,"hex")},publicKey:{unused:0,data:u}},"der").toString("base64");return r.formatPem(c,"PUBLIC")}},{key:"toPrivateBlk",value:function(e){return e.d.toString("hex")}},{key:"toPublicBlk",value:function(e){return i_.convert(r.makePoint(e.x,e.y),"raw","hex")}},{key:"toPrivateJwk",value:function(e){var t=this.params,r=t.crv,n=t.kty,i=e.d,a=e.x,o=e.y;return{kty:n,crv:r,d:i_.convert(i,"raw","base64url"),x:i_.convert(a,"raw","base64url"),y:i_.convert(o,"raw","base64url")}}},{key:"toPublicJwk",value:function(e){var t=this.params,r=t.crv,n=t.kty,i=e.x,a=e.y;return{kty:n,crv:r,x:i_.convert(i,"raw","base64url"),y:i_.convert(a,"raw","base64url")}}}],[{key:"getPoint",value:function(e){var t=e.slice(2,(e.length-2)/2+2),r=e.slice((e.length-2)/2+2);return{x:i_.convert(t,"hex","raw"),y:i_.convert(r,"hex","raw")}}},{key:"makePoint",value:function(e,t){var r=pr.from("04","hex");return pr.concat([r,e,t],r.length+e.length+t.length)}}]),r}(Xy),s_=o_,u_=vb,c_=mb,l_=function(e){c(r,e);var t=m(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"fromPrivatePKCS8",value:function(e){var t=c_.normalize("PrivateKeyInfo").decode(e,"der").privateKey.slice(2);return{d:t,x:this.publicKeyFromPrivate(t)}}},{key:"fromPublicPKCS8",value:function(e){var t=c_.normalize("PublicKeyInfo").decode(e,"der");return{x:u_.convert(t.publicKey.data,"hex","raw")}}},{key:"fromJwk",value:function(e){var t=e.d,r=e.x;return{d:u_.convert(t,"base64url","raw"),x:u_.convert(r,"base64url","raw")}}},{key:"toPrivatePKCS8",value:function(e){var t=this.params,n=t.oid,i=t.infoVersion,a=e.d,o=c_.normalize("PrivateKeyInfo"),s=this.privateKeyPadding(a),u=o.encode({version:i,algorithm:{algorithm:n.split(".")},privateKey:s},"der").toString("base64");return r.formatPem(u,"PRIVATE")}},{key:"toPublicPKCS8",value:function(e){var t=this.params.oid,n=e.x,i=c_.normalize("PublicKeyInfo").encode({algorithm:{algorithm:t.split(".")},publicKey:{unused:0,data:u_.convert(n,"hex","raw")}},"der").toString("base64");return r.formatPem(i,"PUBLIC")}},{key:"toPrivateJwk",value:function(e){var t=this.params,r=t.crv,n=t.kty,i=e.d,a=e.x;return{kty:n,crv:r,d:u_.convert(i,"raw","base64url"),x:u_.convert(a,"raw","base64url")}}},{key:"toPublicJwk",value:function(e){var t=this.params,r=t.crv,n=t.kty,i=e.x;return{kty:n,crv:r,x:u_.convert(i,"raw","base64url")}}},{key:"privateKeyPadding",value:function(e){var t;if("Ed25519"!==this.params.crv)throw new Error("".concat(this.params.crv," is an invalid curve for EdDSA"));return t=pr.from("0420","hex"),pr.concat([t,e],t.length+e.length)}},{key:"publicKeyFromPrivate",value:function(e){if("Ed25519"===this.params.crv){var t=new Sb.eddsa("ed25519");return pr.from(t.keyFromSecret(e).getPublic())}throw new Error("".concat(this.params.crv," is an invalid curve for EdDSA"))}}]),r}(Xy),f_=kb,h_=s_,d_=l_,p_=new Gy;p_.define([{kty:"RSA",oid:"1.2.840.113549.1.1.1",algParameters:"0500",version:"two-prime"}],f_),p_.define([{kty:"EC",crv:"K-256",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.10",algParameters:"06052b8104000a",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-256",oid:"1.2.840.10045.2.1",namedCurve:"1.2.840.10045.3.1.7",algParameters:"06082a8648ce3d030107",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-384",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.34",algParameters:"06052b81040022",keyVersion:1,infoVersion:"two-prime"},{kty:"EC",crv:"P-521",oid:"1.2.840.10045.2.1",namedCurve:"1.3.132.0.35",algParameters:"06052b81040023",keyVersion:1,infoVersion:"two-prime"}],h_),p_.define([{kty:"OKP",crv:"Ed25519",oid:"1.3.101.112",infoVersion:"two-prime"}],d_);var v_=Ky,y_=Wy,g_=p_,b_=mb,m_=RegExp("\r?\n","g"),w_=function(){function e(t,r){if(a(this,e),!t)throw new v_("key is required");if(!r)throw new v_("options are required");var n=r.kty,i=r.format,o=r.selector,s=r.crv,u=r.oid;if(!r.kty)throw new v_("options.kty is required");if(!r.format)throw new v_("options.format is required");if(!r.selector)throw new v_("options.selector is required");if(!r.crv&&!r.oid)throw new v_("options.crv or options.oid is required");this.kty=n,this.format=i,this.selector=o,this.crv=s,this.oid=u,this.key=this.parseKey(t)}return s(e,[{key:"alg",get:function(){var e=this.kty,t=this.crv,r=this.oid;if(!this.algorithm){if(t)Object.defineProperty(this,"algorithm",{value:g_.normalize(e,"crv",t)});else{if(!r)throw new Error("Both crv and oid are undefined");Object.defineProperty(this,"algorithm",{value:g_.normalize(e,"oid",r)})}if(!this.algorithm)throw new Error("".concat(this.crv||this.oid," is not implemented yet"))}return this.algorithm}},{key:"parseKey",value:function(e){var t=this.alg,r=this.format,n=this.selector;if("pem"===r)switch(n){case"public_pkcs1":return t.fromPublicPKCS1(e);case"public_pkcs8":return t.fromPublicPKCS8(e);case"private_pkcs1":return t.fromPrivatePKCS1(e);case"private_pkcs8":return t.fromPrivatePKCS8(e);default:throw new Error("Invalid selector value")}if("jwk"===r)return t.fromJwk(e,n);if("blk"===r)switch(n){case"public":return t.fromPublicBlk(e);case"private":return t.fromPrivateBlk(e)}}},{key:"toJwk",value:function(e){var t=this.key,r=this.alg,n=this.selector;switch(e){case"public":return r.toPublicJwk(t);case"private":if(n.includes("public"))throw new v_("Cannot export a private key from a public key");return r.toPrivateJwk(t);default:throw new Error("Invalid key selector")}}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pem",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public_pkcs8",r=this.key,n=this.alg,i=this.selector;if("pem"===e)switch(t){case"public_pkcs1":return n.toPublicPKCS1(r);case"public_pkcs8":return n.toPublicPKCS8(r);case"private_pkcs1":if(i.includes("public"))throw new v_("Cannot export a private key from a public key");return n.toPrivatePKCS1(r);case"private_pkcs8":if(i.includes("public"))throw new v_("Cannot export a private key from a public key");return n.toPrivatePKCS8(r);default:throw new Error("Invalid key selector")}else if("jwk"===e)switch(t){case"public":return JSON.stringify(n.toPublicJwk(r));case"private":if(i.includes("public"))throw new v_("Cannot export a private key from a public key");return JSON.stringify(n.toPrivateJwk(r));default:throw new Error("Invalid key selector")}else if("blk"===e)switch(t){case"private":if(i.includes("public"))throw new v_("Cannot export a private key from a public key");return n.toPrivateBlk(r);case"public":return n.toPublicBlk(r);default:throw new Error("Invalid key selector")}throw new y_}}],[{key:"from",value:function(t,n){if(!t)throw new v_("key is required");if(!n)throw new v_("format is required");if("jwk"===n){var i;if("string"==typeof t)try{i=JSON.parse(t)}catch(t){throw new v_("key is not a valid JWK")}else"object"==r(t)&&(i=t);var a,o=i,s=o.kty,u=o.crv;if(!s)throw new v_("kty is required for JWK");if("EC"===s&&!u)throw new v_("crv is required for EC JWK");"RSA"===s&&(a=g_.find((function(e){return e.kty===s})).oid);var c=i.d?"private":"public";return new e(i,{kty:s,crv:u,oid:a,format:n,selector:c})}if("pem"===n){if("string"!=typeof t)throw new v_("key is not a valid PEM string");var l=t.split(m_),f=l.splice(0,1);l.splice(l.length-1,1);var h,d,p=l.join(""),v=/^-----BEGIN ((RSA|EC) )?(PUBLIC|PRIVATE) KEY-----$/.exec(f),y=v?v[2]:void 0,g=v?v[3]:void 0,b=pr.from(p,"base64");if(!g)throw new v_("key is not a valid PEM string");if(y){if("RSA"===y)g="PRIVATE"===g?"private_pkcs1":"public_pkcs1",h=g_.find((function(e){return e.kty===y})).oid;else if("EC"===y){var m;if("PRIVATE"===g)g="private_pkcs1",m=b_.normalize("".concat(y,"PrivateKey")).decode(b,"der");else if("PUBLIC"===g){g="public_pkcs1",m=b_.normalize("".concat(y,"PrivateKey")).decode(b,"der")}var w=m.parameters.value;d=g_.find((function(e){return e.namedCurve===w.join(".")})).crv}}else{var x,_=b_.normalize("PrivateKeyInfo"),k=b_.normalize("PublicKeyInfo");"PRIVATE"===g?(g="private_pkcs8",x=_.decode(b,"der")):"PUBLIC"===g&&(g="public_pkcs8",x=k.decode(b,"der"));var S=x.algorithm,E=S.algorithm,I=S.parameters;E=E.join("."),I=I?I.toString("hex"):void 0;var A=g_.find((function(e){return e.oid===E}));if(!(y=A?A.kty:void 0))throw new v_("".concat(E," is not supported"));"RSA"===y||"OKP"===y?h=E:"EC"===y&&(d=g_.find((function(e){return e.algParameters===I})).crv)}return new e(b,{kty:y,oid:h,crv:d,format:n,selector:g})}if("blk"===n)return new e(t,{kty:"EC",crv:"K-256",format:n,selector:t.length>64?"public":"private"});throw new v_("Invalid format ".concat(n))}}]),e}(),x_=w_,__={exports:{}};!function(e,t){var r=Zr,n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=a),a.prototype=Object.create(n.prototype),i(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(__,__.exports);var k_=__.exports.Buffer,S_=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=n}var o=e.length,s=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return k_.alloc(0);for(var r=0,n=0,i=0;e[r]===s;)n++,r++;for(var a=(e.length-r)*u+1>>>0,c=new Uint8Array(a);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var f=0,h=a-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=o*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,r++}for(var d=a-i;d!==a&&0===c[d];)d++;var p=k_.allocUnsafe(n+(a-d));p.fill(0,0,n);for(var v=n;d!==a;)p[v++]=c[d++];return p}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=k_.from(t)),!k_.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,a=t.length;i!==a&&0===t[i];)i++,r++;for(var u=(a-i)*c+1>>>0,l=new Uint8Array(u);i!==a;){for(var f=t[i],h=0,d=u-1;(0!==f||h<n)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,i++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var v=s.repeat(r);p<u;++p)v+=e.charAt(l[p]);return v},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}},E_=S_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),I_="Impossible case. Please create issue.",A_="The tweak was out of range or the resulted private key is invalid",T_="The tweak was out of range or equal to zero",P_="Private Key is invalid",O_="Public Key could not be parsed",C_="Public Key serialization error",M_="The sum of the public keys is not valid",N_="Signature could not be parsed",R_="The nonce generation function failed, or the private key was invalid",L_="Public key could not be recover",j_="Scalar was invalid (zero or overflow)";function D_(e,t){if(!e)throw new Error(t)}function B_(e,t,r){if(D_(t instanceof Uint8Array,"Expected ".concat(e," to be an Uint8Array")),void 0!==r)if(Array.isArray(r)){var n="Expected ".concat(e," to be an Uint8Array with length [").concat(r.join(", "),"]");D_(r.includes(t.length),n)}else{var i="Expected ".concat(e," to be an Uint8Array with length ").concat(r);D_(t.length===r,i)}}function U_(e){D_("Boolean"===z_(e),"Expected compressed to be a Boolean")}function F_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return new Uint8Array(e)},t=arguments.length>1?arguments[1]:void 0;return"function"==typeof e&&(e=e(t)),B_("output",e,t),e}function z_(e){return Object.prototype.toString.call(e).slice(8,-1)}var H_=new Sb.ec("secp256k1"),V_=H_.curve,K_=V_.n.constructor;function q_(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new K_(t);if(r.cmp(V_.p)>=0)return null;var n=(r=r.toRed(V_.red)).redSqr().redIMul(r).redIAdd(V_.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),H_.keyPair({pub:{x:r,y:n}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new K_(t),i=new K_(r);if(n.cmp(V_.p)>=0||i.cmp(V_.p)>=0)return null;if(n=n.toRed(V_.red),i=i.toRed(V_.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var a=n.redSqr().redIMul(n);return i.redSqr().redISub(a.redIAdd(V_.b)).isZero()?H_.keyPair({pub:{x:n,y:i}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function W_(e,t){for(var r=t.encode(null,33===e.length),n=0;n<e.length;++n)e[n]=r[n]}var G_={contextRandomize:function(){return 0},privateKeyVerify:function(e){var t=new K_(e);return t.cmp(V_.n)<0&&!t.isZero()?0:1},privateKeyNegate:function(e){var t=new K_(e),r=V_.n.sub(t).umod(V_.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd:function(e,t){var r=new K_(t);if(r.cmp(V_.n)>=0)return 1;if(r.iadd(new K_(e)),r.cmp(V_.n)>=0&&r.isub(V_.n),r.isZero())return 1;var n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul:function(e,t){var r=new K_(t);if(r.cmp(V_.n)>=0||r.isZero())return 1;r.imul(new K_(e)),r.cmp(V_.n)>=0&&(r=r.umod(V_.n));var n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify:function(e){return null===q_(e)?1:0},publicKeyCreate:function(e,t){var r=new K_(t);return r.cmp(V_.n)>=0||r.isZero()?1:(W_(e,H_.keyFromPrivate(t).getPublic()),0)},publicKeyConvert:function(e,t){var r=q_(t);return null===r?1:(W_(e,r.getPublic()),0)},publicKeyNegate:function(e,t){var r=q_(t);if(null===r)return 1;var n=r.getPublic();return n.y=n.y.redNeg(),W_(e,n),0},publicKeyCombine:function(e,t){for(var r=new Array(t.length),n=0;n<t.length;++n)if(r[n]=q_(t[n]),null===r[n])return 1;for(var i=r[0].getPublic(),a=1;a<r.length;++a)i=i.add(r[a].pub);return i.isInfinity()?2:(W_(e,i),0)},publicKeyTweakAdd:function(e,t,r){var n=q_(t);if(null===n)return 1;if((r=new K_(r)).cmp(V_.n)>=0)return 2;var i=n.getPublic().add(V_.g.mul(r));return i.isInfinity()?2:(W_(e,i),0)},publicKeyTweakMul:function(e,t,r){var n=q_(t);return null===n?1:(r=new K_(r)).cmp(V_.n)>=0||r.isZero()?2:(W_(e,n.getPublic().mul(r)),0)},signatureNormalize:function(e){var t=new K_(e.subarray(0,32)),r=new K_(e.subarray(32,64));return t.cmp(V_.n)>=0||r.cmp(V_.n)>=0?1:(1===r.cmp(H_.nh)&&e.set(V_.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport:function(e,t){var r=t.subarray(0,32),n=t.subarray(32,64);if(new K_(r).cmp(V_.n)>=0)return 1;if(new K_(n).cmp(V_.n)>=0)return 1;var i=e.output,a=i.subarray(4,37);a[0]=0,a.set(r,1);for(var o=33,s=0;o>1&&0===a[s]&&!(128&a[s+1]);--o,++s);if(128&(a=a.subarray(s))[0])return 1;if(o>1&&0===a[0]&&!(128&a[1]))return 1;var u=i.subarray(39,72);u[0]=0,u.set(n,1);for(var c=33,l=0;c>1&&0===u[l]&&!(128&u[l+1]);--c,++l);return 128&(u=u.subarray(l))[0]||c>1&&0===u[0]&&!(128&u[1])?1:(e.outputlen=6+o+c,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=a.length,i.set(a,4),i[4+o]=2,i[5+o]=u.length,i.set(u,6+o),0)},signatureImport:function(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;var r=t[3];if(0===r)return 1;if(5+r>=t.length)return 1;if(2!==t[4+r])return 1;var n=t[5+r];if(0===n)return 1;if(6+r+n!==t.length)return 1;if(128&t[4])return 1;if(r>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[r+6])return 1;if(n>1&&0===t[r+6]&&!(128&t[r+7]))return 1;var i=t.subarray(4,4+r);if(33===i.length&&0===i[0]&&(i=i.subarray(1)),i.length>32)return 1;var a=t.subarray(6+r);if(33===a.length&&0===a[0]&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");var o=new K_(i);o.cmp(V_.n)>=0&&(o=new K_(0));var s=new K_(t.subarray(6+r));return s.cmp(V_.n)>=0&&(s=new K_(0)),e.set(o.toArrayLike(Uint8Array,"be",32),0),e.set(s.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign:function(e,t,r,n,i){if(i){var a=i;i=function(e){var i=a(t,r,null,n,e);if(!(i instanceof Uint8Array&&32===i.length))throw new Error("This is the way");return new K_(i)}}var o,s=new K_(r);if(s.cmp(V_.n)>=0||s.isZero())return 1;try{o=H_.sign(t,r,{canonical:!0,k:i,pers:n})}catch(e){return 1}return e.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),e.recid=o.recoveryParam,0},ecdsaVerify:function(e,t,r){var n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new K_(n.r),a=new K_(n.s);if(i.cmp(V_.n)>=0||a.cmp(V_.n)>=0)return 1;if(1===a.cmp(H_.nh)||i.isZero()||a.isZero())return 3;var o=q_(r);if(null===o)return 2;var s=o.getPublic();return H_.verify(t,n,s)?0:3},ecdsaRecover:function(e,t,r,n){var i,a={r:t.slice(0,32),s:t.slice(32,64)},o=new K_(a.r),s=new K_(a.s);if(o.cmp(V_.n)>=0||s.cmp(V_.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;try{i=H_.recoverPubKey(n,a,r)}catch(e){return 2}return W_(e,i),0},ecdh:function(e,t,r,n,i,a,o){var s=q_(t);if(null===s)return 1;var u=new K_(r);if(u.cmp(V_.n)>=0||u.isZero())return 2;var c=s.getPublic().mul(u);if(void 0===i)for(var l=c.encode(null,!0),f=H_.hash().update(l).digest(),h=0;h<32;++h)e[h]=f[h];else{a||(a=new Uint8Array(32));for(var d=c.getX().toArray("be",32),p=0;p<32;++p)a[p]=d[p];o||(o=new Uint8Array(32));for(var v=c.getY().toArray("be",32),y=0;y<32;++y)o[y]=v[y];var g=i(a,o,n);if(!(g instanceof Uint8Array&&g.length===e.length))return 2;e.set(g)}return 0}},J_=function(e){return{contextRandomize:function(t){if(D_(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&B_("seed",t,32),1===e.contextRandomize(t))throw new Error("Unknow error on context randomization")},privateKeyVerify:function(t){return B_("private key",t,32),0===e.privateKeyVerify(t)},privateKeyNegate:function(t){switch(B_("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(I_)}},privateKeyTweakAdd:function(t,r){switch(B_("private key",t,32),B_("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(A_)}},privateKeyTweakMul:function(t,r){switch(B_("private key",t,32),B_("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(T_)}},publicKeyVerify:function(t){return B_("public key",t,[33,65]),0===e.publicKeyVerify(t)},publicKeyCreate:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(B_("private key",t,32),U_(r),n=F_(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(P_);case 2:throw new Error(C_)}},publicKeyConvert:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(B_("public key",t,[33,65]),U_(r),n=F_(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(O_);case 2:throw new Error(C_)}},publicKeyNegate:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(B_("public key",t,[33,65]),U_(r),n=F_(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(O_);case 2:throw new Error(I_);case 3:throw new Error(C_)}},publicKeyCombine:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;D_(Array.isArray(t),"Expected public keys to be an Array"),D_(t.length>0,"Expected public keys array will have more than zero items");var i,a=C(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;B_("public key",o,[33,65])}}catch(e){a.e(e)}finally{a.f()}switch(U_(r),n=F_(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(O_);case 2:throw new Error(M_);case 3:throw new Error(C_)}},publicKeyTweakAdd:function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;switch(B_("public key",t,[33,65]),B_("tweak",r,32),U_(n),i=F_(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(O_);case 2:throw new Error(A_)}},publicKeyTweakMul:function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;switch(B_("public key",t,[33,65]),B_("tweak",r,32),U_(n),i=F_(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(O_);case 2:throw new Error(T_)}},signatureNormalize:function(t){switch(B_("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(N_)}},signatureExport:function(t,r){B_("signature",t,64);var n={output:r=F_(r,72),outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(N_);case 2:throw new Error(I_)}},signatureImport:function(t,r){switch(B_("signature",t),r=F_(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(N_);case 2:throw new Error(I_)}},ecdsaSign:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;B_("message",t,32),B_("private key",r,32),D_("Object"===z_(n),"Expected options to be an Object"),void 0!==n.data&&B_("options.data",n.data),void 0!==n.noncefn&&D_("Function"===z_(n.noncefn),"Expected options.noncefn to be a Function");var a={signature:i=F_(i,64),recid:null};switch(e.ecdsaSign(a,t,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(R_);case 2:throw new Error(I_)}},ecdsaVerify:function(t,r,n){switch(B_("signature",t,64),B_("message",r,32),B_("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(N_);case 2:throw new Error(O_)}},ecdsaRecover:function(t,r,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4?arguments[4]:void 0;switch(B_("signature",t,64),D_("Number"===z_(r)&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),B_("message",n,32),U_(i),a=F_(a,i?33:65),e.ecdsaRecover(a,t,r,n)){case 0:return a;case 1:throw new Error(N_);case 2:throw new Error(L_);case 3:throw new Error(I_)}},ecdh:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;switch(B_("public key",t,[33,65]),B_("private key",r,32),D_("Object"===z_(n),"Expected options to be an Object"),void 0!==n.data&&B_("options.data",n.data),void 0!==n.hashfn?(D_("Function"===z_(n.hashfn),"Expected options.hashfn to be a Function"),void 0!==n.xbuf&&B_("options.xbuf",n.xbuf,32),void 0!==n.ybuf&&B_("options.ybuf",n.ybuf,32),B_("output",i)):i=F_(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(O_);case 2:throw new Error(j_)}}}}(G_),X_="undefined"==typeof Buffer?pr:Buffer,$_={},Y_={},Z_={},Q_={},ek={exports:{}},tk={},rk=Yt(Qs),nk=rk.EventEmitter;function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ak(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ok=Zr.Buffer,sk=jl.inspect,uk=sk&&sk.custom||"inspect";function ck(e,t,r){ok.prototype.copy.call(e,t,r)}var lk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return ok.alloc(0);for(var t=ok.allocUnsafe(e>>>0),r=this.head,n=0;r;)ck(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=ok.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:uk,value:function(e,t){return sk(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ik(Object(r),!0).forEach((function(t){ak(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function fk(e,t){dk(e,t),hk(e)}function hk(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function dk(e,t){e.emit("error",t)}var pk={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ga(dk,this,e)):Ga(dk,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?Ga(hk,r):(r._writableState.errorEmitted=!0,Ga(fk,r,e)):Ga(fk,r,e):t?(Ga(hk,r),t(e)):Ga(hk,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}},vk={},yk={};function gk(e,t,r){r||(r=Error);var n=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);n.prototype.name=r.name,n.prototype.code=e,yk[e]=n}function bk(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}gk("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),gk("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,a,o;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(i," ").concat(bk(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(i," ").concat(bk(t,"type"))}return o+". Received type ".concat(r(n))}),TypeError),gk("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),gk("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),gk("ERR_STREAM_PREMATURE_CLOSE","Premature close"),gk("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),gk("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),gk("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),gk("ERR_STREAM_WRITE_AFTER_END","write after end"),gk("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),gk("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),gk("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),vk.codes=yk;var mk=vk.codes.ERR_INVALID_OPT_VALUE,wk=function(e,t,r,n){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new mk(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384},xk={},_k=__.exports.Buffer,kk=_k.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Sk(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(_k.isEncoding===kk||!kk(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=Ak,this.end=Tk,t=4;break;case"utf8":this.fillLast=Ik,t=4;break;case"base64":this.text=Pk,this.end=Ok,t=3;break;default:return this.write=Ck,void(this.end=Mk)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_k.allocUnsafe(t)}function Ek(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Ik(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function Ak(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function Tk(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Pk(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Ok(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ck(e){return e.toString(this.encoding)}function Mk(e){return e&&e.length?this.write(e):""}xk.StringDecoder=Sk,Sk.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},Sk.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},Sk.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=Ek(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=Ek(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=Ek(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},Sk.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var Nk=vk.codes.ERR_STREAM_PREMATURE_CLOSE;function Rk(){}var Lk,jk=function e(t,r,n){if("function"==typeof r)return e(t,null,r);r||(r={}),n=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(n||Rk);var i=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,o=function(){t.writable||u()},s=t._writableState&&t._writableState.finished,u=function(){a=!1,s=!0,i||n.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){i=!1,c=!0,a||n.call(t)},f=function(e){n.call(t,e)},h=function(){var e;return i&&!c?(t._readableState&&t._readableState.ended||(e=new Nk),n.call(t,e)):a&&!s?(t._writableState&&t._writableState.ended||(e=new Nk),n.call(t,e)):void 0},d=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",h),t.req?d():t.on("request",d)):a&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",u),!1!==r.error&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",d),t.req&&t.req.removeListener("finish",u),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",u),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",h)}};function Dk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bk=jk,Uk=Symbol("lastResolve"),Fk=Symbol("lastReject"),zk=Symbol("error"),Hk=Symbol("ended"),Vk=Symbol("lastPromise"),Kk=Symbol("handlePromise"),qk=Symbol("stream");function Wk(e,t){return{value:e,done:t}}function Gk(e){var t=e[Uk];if(null!==t){var r=e[qk].read();null!==r&&(e[Vk]=null,e[Uk]=null,e[Fk]=null,t(Wk(r,!1)))}}function Jk(e){Ga(Gk,e)}var Xk=Object.getPrototypeOf((function(){})),$k=Object.setPrototypeOf((Lk={get stream(){return this[qk]},next:function(){var e=this,t=this[zk];if(null!==t)return Promise.reject(t);if(this[Hk])return Promise.resolve(Wk(void 0,!0));if(this[qk].destroyed)return new Promise((function(t,r){Ga((function(){e[zk]?r(e[zk]):t(Wk(void 0,!0))}))}));var r,n=this[Vk];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[Hk]?r(Wk(void 0,!0)):t[Kk](r,n)}),n)}}(n,this));else{var i=this[qk].read();if(null!==i)return Promise.resolve(Wk(i,!1));r=new Promise(this[Kk])}return this[Vk]=r,r}},Dk(Lk,Symbol.asyncIterator,(function(){return this})),Dk(Lk,"return",(function(){var e=this;return new Promise((function(t,r){e[qk].destroy(null,(function(e){e?r(e):t(Wk(void 0,!0))}))}))})),Lk),Xk),Yk=function(e){var t,r=Object.create($k,(Dk(t={},qk,{value:e,writable:!0}),Dk(t,Uk,{value:null,writable:!0}),Dk(t,Fk,{value:null,writable:!0}),Dk(t,zk,{value:null,writable:!0}),Dk(t,Hk,{value:e._readableState.endEmitted,writable:!0}),Dk(t,Kk,{value:function(e,t){var n=r[qk].read();n?(r[Vk]=null,r[Uk]=null,r[Fk]=null,e(Wk(n,!1))):(r[Uk]=e,r[Fk]=t)},writable:!0}),t));return r[Vk]=null,Bk(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[Fk];return null!==t&&(r[Vk]=null,r[Uk]=null,r[Fk]=null,t(e)),void(r[zk]=e)}var n=r[Uk];null!==n&&(r[Vk]=null,r[Uk]=null,r[Fk]=null,n(Wk(void 0,!0))),r[Hk]=!0})),e.on("readable",Jk.bind(null,r)),r},Zk=function(){throw new Error("Readable.from is not available in the browser")},Qk=tk;Qk.Readable=wS,wS.ReadableState=mS,rk.EventEmitter;var eS,tS=function(e,t){return e.listeners(t).length},rS=nk,nS=Zr.Buffer,iS=$t.Uint8Array||function(){},aS=jl;eS=aS&&aS.debuglog?aS.debuglog("stream"):function(){};var oS,sS,uS,cS=lk,lS=pk,fS=wk,hS=vk.codes,dS=hS.ERR_INVALID_ARG_TYPE,pS=hS.ERR_STREAM_PUSH_AFTER_EOF,vS=hS.ERR_METHOD_NOT_IMPLEMENTED,yS=hS.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;eg.exports(wS,rS);var gS=lS.errorOrDestroy,bS=["error","close","destroy","pause","resume"];function mS(e,t,r){e=e||{},"boolean"!=typeof r&&(r=t instanceof Qk.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=fS(this,e,"readableHighWaterMark",r),this.buffer=new cS,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(oS||(oS=xk.StringDecoder),this.decoder=new oS(e.encoding),this.encoding=e.encoding)}function wS(e){if(!(this instanceof wS))return new wS(e);var t=this instanceof Qk.Duplex;this._readableState=new mS(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),rS.call(this)}function xS(e,t,r,n,i){eS("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(eS("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?SS(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,ES(e)))}}(e,o);else if(i||(a=function(e,t){var r,n;return n=t,nS.isBuffer(n)||n instanceof iS||"string"==typeof t||void 0===t||e.objectMode||(r=new dS("chunk",["string","Buffer","Uint8Array"],t)),r}(o,t)),a)gS(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===nS.prototype||(t=function(e){return nS.from(e)}(t)),n)o.endEmitted?gS(e,new yS):_S(e,o,t,!0);else if(o.ended)gS(e,new pS);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?_S(e,o,t,!1):IS(e,o)):_S(e,o,t,!1)}else n||(o.reading=!1,IS(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function _S(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&SS(e)),IS(e,t)}function kS(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function SS(e){var t=e._readableState;eS("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(eS("emitReadable",t.flowing),t.emittedReadable=!0,Ga(ES,e))}function ES(e){var t=e._readableState;eS("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,CS(e)}function IS(e,t){t.readingMore||(t.readingMore=!0,Ga(AS,e,t))}function AS(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(eS("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function TS(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function PS(e){eS("readable nexttick read 0"),e.read(0)}function OS(e,t){eS("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),CS(e),t.flowing&&!t.reading&&e.read(0)}function CS(e){var t=e._readableState;for(eS("flow",t.flowing);t.flowing&&null!==e.read(););}function MS(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function NS(e){var t=e._readableState;eS("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,Ga(RS,t,e))}function RS(e,t){if(eS("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function LS(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Object.defineProperty(wS.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),wS.prototype.destroy=lS.destroy,wS.prototype._undestroy=lS.undestroy,wS.prototype._destroy=function(e,t){t(e)},wS.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=nS.from(e,t),t=""),r=!0),xS(this,e,t,!1,r)},wS.prototype.unshift=function(e){return xS(this,e,null,!0,!1)},wS.prototype.isPaused=function(){return!1===this._readableState.flowing},wS.prototype.setEncoding=function(e){oS||(oS=xk.StringDecoder);var t=new oS(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},wS.prototype.read=function(e){eS("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return eS("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?NS(this):SS(this),null;if(0===(e=kS(e,t))&&t.ended)return 0===t.length&&NS(this),null;var n,i=t.needReadable;return eS("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&eS("length less than watermark",i=!0),t.ended||t.reading?eS("reading or ended",i=!1):i&&(eS("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=kS(r,t))),null===(n=e>0?MS(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&NS(this)),null!==n&&this.emit("data",n),n},wS.prototype._read=function(e){gS(this,new vS("_read()"))},wS.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,eS("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end||e===oo.stdout||e===oo.stderr?h:a;function a(){eS("onend"),e.end()}n.endEmitted?Ga(i):r.once("end",i),e.on("unpipe",(function t(i,d){eS("onunpipe"),i===r&&d&&!1===d.hasUnpiped&&(d.hasUnpiped=!0,eS("cleanup"),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("drain",o),e.removeListener("error",c),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",h),r.removeListener("data",u),s=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}));var o=function(e){return function(){var t=e._readableState;eS("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&tS(e,"data")&&(t.flowing=!0,CS(e))}}(r);e.on("drain",o);var s=!1;function u(t){eS("ondata");var i=e.write(t);eS("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==LS(n.pipes,e))&&!s&&(eS("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(t){eS("onerror",t),h(),e.removeListener("error",c),0===tS(e,"error")&&gS(e,t)}function l(){e.removeListener("finish",f),h()}function f(){eS("onfinish"),e.removeListener("close",l),h()}function h(){eS("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",c),e.once("close",l),e.once("finish",f),e.emit("pipe",r),n.flowing||(eS("pipe resume"),r.resume()),e},wS.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=LS(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},wS.prototype.on=function(e,t){var r=rS.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,eS("on readable",n.length,n.reading),n.length?SS(this):n.reading||Ga(PS,this))),r},wS.prototype.addListener=wS.prototype.on,wS.prototype.removeListener=function(e,t){var r=rS.prototype.removeListener.call(this,e,t);return"readable"===e&&Ga(TS,this),r},wS.prototype.removeAllListeners=function(e){var t=rS.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||Ga(TS,this),t},wS.prototype.resume=function(){var e=this._readableState;return e.flowing||(eS("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ga(OS,e,t))}(this,e)),e.paused=!1,this},wS.prototype.pause=function(){return eS("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(eS("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},wS.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(eS("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){eS("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<bS.length;a++)e.on(bS[a],this.emit.bind(this,bS[a]));return this._read=function(t){eS("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(wS.prototype[Symbol.asyncIterator]=function(){return void 0===sS&&(sS=Yk),sS(this)}),Object.defineProperty(wS.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(wS.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(wS.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),wS._fromList=MS,Object.defineProperty(wS.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(wS.from=function(e,t){return void 0===uS&&(uS=Zk),uS(wS,e,t)});function jS(e){try{if(!$t.localStorage)return!1}catch(e){return!1}var t=$t.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var DS=tk;function BS(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}DS.Writable=iE,iE.WritableState=nE;var US,FS=function(e,t){if(jS("noDeprecation"))return e;var r=!1;return function(){if(!r){if(jS("throwDeprecation"))throw new Error(t);jS("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}},zS=nk,HS=Zr.Buffer,VS=$t.Uint8Array||function(){},KS=pk,qS=wk,WS=vk.codes,GS=WS.ERR_INVALID_ARG_TYPE,JS=WS.ERR_METHOD_NOT_IMPLEMENTED,XS=WS.ERR_MULTIPLE_CALLBACK,$S=WS.ERR_STREAM_CANNOT_PIPE,YS=WS.ERR_STREAM_DESTROYED,ZS=WS.ERR_STREAM_NULL_VALUES,QS=WS.ERR_STREAM_WRITE_AFTER_END,eE=WS.ERR_UNKNOWN_ENCODING,tE=KS.errorOrDestroy;function rE(){}function nE(e,t,r){e=e||{},"boolean"!=typeof r&&(r=t instanceof DS.Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=qS(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new XS;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(Ga(i,n),Ga(lE,e,t),e._writableState.errorEmitted=!0,tE(e,n)):(i(n),e._writableState.errorEmitted=!0,tE(e,n),lE(e,t))}(e,r,n,t,i);else{var a=uE(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||sE(e,r),n?Ga(oE,e,r,a,i):oE(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new BS(this)}function iE(e){var t=this instanceof DS.Duplex;if(!t&&!US.call(iE,this))return new iE(e);this._writableState=new nE(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),zS.call(this)}function aE(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new YS("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function oE(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),lE(e,t)}function sE(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)i[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,aE(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new BS(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback;if(aE(e,t,!1,t.objectMode?1:u.length,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function uE(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function cE(e,t){e._final((function(r){t.pendingcb--,r&&tE(e,r),t.prefinished=!0,e.emit("prefinish"),lE(e,t)}))}function lE(e,t){var r=uE(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,Ga(cE,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}eg.exports(iE,zS),nE.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(nE.prototype,"buffer",{get:FS((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(US=Function.prototype[Symbol.hasInstance],Object.defineProperty(iE,Symbol.hasInstance,{value:function(e){return!!US.call(this,e)||this===iE&&e&&e._writableState instanceof nE}})):US=function(e){return e instanceof this},iE.prototype.pipe=function(){tE(this,new $S)},iE.prototype.write=function(e,t,r){var n,i=this._writableState,a=!1,o=!i.objectMode&&(n=e,HS.isBuffer(n)||n instanceof VS);return o&&!HS.isBuffer(e)&&(e=function(e){return HS.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=rE),i.ending?function(e,t){var r=new QS;tE(e,r),Ga(t,r)}(this,r):(o||function(e,t,r,n){var i;return null===r?i=new ZS:"string"==typeof r||t.objectMode||(i=new GS("chunk",["string","Buffer"],r)),!i||(tE(e,i),Ga(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,r,n,i,a){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=HS.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else aE(e,t,!1,s,n,i,a);return u}(this,i,o,e,t,r)),a},iE.prototype.cork=function(){this._writableState.corked++},iE.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||sE(this,e))},iE.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new eE(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(iE.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(iE.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),iE.prototype._write=function(e,t,r){r(new JS("_write()"))},iE.prototype._writev=null,iE.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,lE(e,t),r&&(t.finished?Ga(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(iE.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(iE.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),iE.prototype.destroy=KS.destroy,iE.prototype._undestroy=KS.undestroy,iE.prototype._destroy=function(e,t){t(e)};var fE=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},hE=tk;hE.Duplex=yE,eg.exports(yE,hE.Readable);for(var dE=fE(hE.Writable.prototype),pE=0;pE<dE.length;pE++){var vE=dE[pE];yE.prototype[vE]||(yE.prototype[vE]=hE.Writable.prototype[vE])}function yE(e){if(!(this instanceof yE))return new yE(e);hE.Readable.call(this,e),hE.Writable.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",gE)))}function gE(){this._writableState.ended||Ga(bE,this)}function bE(e){e.end()}Object.defineProperty(yE.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(yE.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(yE.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(yE.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var mE=tk;mE.Transform=IE;var wE=vk.codes,xE=wE.ERR_METHOD_NOT_IMPLEMENTED,_E=wE.ERR_MULTIPLE_CALLBACK,kE=wE.ERR_TRANSFORM_ALREADY_TRANSFORMING,SE=wE.ERR_TRANSFORM_WITH_LENGTH_0;function EE(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new _E);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function IE(e){if(!(this instanceof IE))return new IE(e);mE.Duplex.call(this,e),this._transformState={afterTransform:EE.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",AE)}function AE(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?TE(this,null,null):this._flush((function(t,r){TE(e,t,r)}))}function TE(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new SE;if(e._transformState.transforming)throw new kE;return e.push(null)}eg.exports(IE,mE.Duplex),IE.prototype.push=function(e,t){return this._transformState.needTransform=!1,mE.Duplex.prototype.push.call(this,e,t)},IE.prototype._transform=function(e,t,r){r(new xE("_transform()"))},IE.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},IE.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},IE.prototype._destroy=function(e,t){mE.Duplex.prototype._destroy.call(this,e,(function(e){t(e)}))};var PE,OE=tk;function CE(e){if(!(this instanceof CE))return new CE(e);Transform.call(this,e)}OE.PassThrough=CE,eg.exports(CE,OE.Transform),CE.prototype._transform=function(e,t,r){r(null,e)};var ME=vk.codes,NE=ME.ERR_MISSING_ARGS,RE=ME.ERR_STREAM_DESTROYED;function LE(e){if(e)throw e}function jE(e,t,r,n){n=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(n);var i=!1;e.on("close",(function(){i=!0})),void 0===PE&&(PE=jk),PE(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var a=!1;return function(t){if(!i&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new RE("pipe"))}}function DE(e){e()}function BE(e,t){return e.pipe(t)}function UE(e){return e.length?"function"!=typeof e[e.length-1]?LE:e.pop():LE}var FE=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=UE(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new NE("streams");var a=t.map((function(e,r){var o=r<t.length-1;return jE(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(DE),o||(a.forEach(DE),i(n))}))}));return t.reduce(BE)};!function(e,t){var r=tk;(t=ek.exports=r.Readable).Stream=r.Readable,t.Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.finished=jk,t.pipeline=FE}(0,ek.exports);var zE=__.exports.Buffer,HE=ek.exports.Transform;function VE(e){HE.call(this),this._block=zE.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}(0,eg.exports)(VE,HE),VE.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},VE.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},VE.prototype.update=function(e,t){if(function(e,t){if(!zE.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");zE.isBuffer(e)||(e=zE.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var a=0,o=8*e.length;o>0;++a)this._length[a]+=o,(o=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*o);return this},VE.prototype._update=function(){throw new Error("_update is not implemented")},VE.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},VE.prototype._digest=function(){throw new Error("_digest is not implemented")};var KE=VE,qE=eg.exports,WE=KE,GE=__.exports.Buffer,JE=new Array(16);function XE(){WE.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function $E(e,t){return e<<t|e>>>32-t}function YE(e,t,r,n,i,a,o){return $E(e+(t&r|~t&n)+i+a|0,o)+t|0}function ZE(e,t,r,n,i,a,o){return $E(e+(t&n|r&~n)+i+a|0,o)+t|0}function QE(e,t,r,n,i,a,o){return $E(e+(t^r^n)+i+a|0,o)+t|0}function eI(e,t,r,n,i,a,o){return $E(e+(r^(t|~n))+i+a|0,o)+t|0}qE(XE,WE),XE.prototype._update=function(){for(var e=JE,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,a=this._d;r=YE(r,n,i,a,e[0],3614090360,7),a=YE(a,r,n,i,e[1],3905402710,12),i=YE(i,a,r,n,e[2],606105819,17),n=YE(n,i,a,r,e[3],3250441966,22),r=YE(r,n,i,a,e[4],4118548399,7),a=YE(a,r,n,i,e[5],1200080426,12),i=YE(i,a,r,n,e[6],2821735955,17),n=YE(n,i,a,r,e[7],4249261313,22),r=YE(r,n,i,a,e[8],1770035416,7),a=YE(a,r,n,i,e[9],2336552879,12),i=YE(i,a,r,n,e[10],4294925233,17),n=YE(n,i,a,r,e[11],2304563134,22),r=YE(r,n,i,a,e[12],1804603682,7),a=YE(a,r,n,i,e[13],4254626195,12),i=YE(i,a,r,n,e[14],2792965006,17),r=ZE(r,n=YE(n,i,a,r,e[15],1236535329,22),i,a,e[1],4129170786,5),a=ZE(a,r,n,i,e[6],3225465664,9),i=ZE(i,a,r,n,e[11],643717713,14),n=ZE(n,i,a,r,e[0],3921069994,20),r=ZE(r,n,i,a,e[5],3593408605,5),a=ZE(a,r,n,i,e[10],38016083,9),i=ZE(i,a,r,n,e[15],3634488961,14),n=ZE(n,i,a,r,e[4],3889429448,20),r=ZE(r,n,i,a,e[9],568446438,5),a=ZE(a,r,n,i,e[14],3275163606,9),i=ZE(i,a,r,n,e[3],4107603335,14),n=ZE(n,i,a,r,e[8],1163531501,20),r=ZE(r,n,i,a,e[13],2850285829,5),a=ZE(a,r,n,i,e[2],4243563512,9),i=ZE(i,a,r,n,e[7],1735328473,14),r=QE(r,n=ZE(n,i,a,r,e[12],2368359562,20),i,a,e[5],4294588738,4),a=QE(a,r,n,i,e[8],2272392833,11),i=QE(i,a,r,n,e[11],1839030562,16),n=QE(n,i,a,r,e[14],4259657740,23),r=QE(r,n,i,a,e[1],2763975236,4),a=QE(a,r,n,i,e[4],1272893353,11),i=QE(i,a,r,n,e[7],4139469664,16),n=QE(n,i,a,r,e[10],3200236656,23),r=QE(r,n,i,a,e[13],681279174,4),a=QE(a,r,n,i,e[0],3936430074,11),i=QE(i,a,r,n,e[3],3572445317,16),n=QE(n,i,a,r,e[6],76029189,23),r=QE(r,n,i,a,e[9],3654602809,4),a=QE(a,r,n,i,e[12],3873151461,11),i=QE(i,a,r,n,e[15],530742520,16),r=eI(r,n=QE(n,i,a,r,e[2],3299628645,23),i,a,e[0],4096336452,6),a=eI(a,r,n,i,e[7],1126891415,10),i=eI(i,a,r,n,e[14],2878612391,15),n=eI(n,i,a,r,e[5],4237533241,21),r=eI(r,n,i,a,e[12],1700485571,6),a=eI(a,r,n,i,e[3],2399980690,10),i=eI(i,a,r,n,e[10],4293915773,15),n=eI(n,i,a,r,e[1],2240044497,21),r=eI(r,n,i,a,e[8],1873313359,6),a=eI(a,r,n,i,e[15],4264355552,10),i=eI(i,a,r,n,e[6],2734768916,15),n=eI(n,i,a,r,e[13],1309151649,21),r=eI(r,n,i,a,e[4],4149444226,6),a=eI(a,r,n,i,e[11],3174756917,10),i=eI(i,a,r,n,e[2],718787259,15),n=eI(n,i,a,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+a|0},XE.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=GE.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};var tI=XE,rI=Zr.Buffer,nI=eg.exports,iI=KE,aI=new Array(16),oI=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],sI=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],uI=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],cI=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],lI=[0,1518500249,1859775393,2400959708,2840853838],fI=[1352829926,1548603684,1836072691,2053994217,0];function hI(){iI.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function dI(e,t){return e<<t|e>>>32-t}function pI(e,t,r,n,i,a,o,s){return dI(e+(t^r^n)+a+o|0,s)+i|0}function vI(e,t,r,n,i,a,o,s){return dI(e+(t&r|~t&n)+a+o|0,s)+i|0}function yI(e,t,r,n,i,a,o,s){return dI(e+((t|~r)^n)+a+o|0,s)+i|0}function gI(e,t,r,n,i,a,o,s){return dI(e+(t&n|r&~n)+a+o|0,s)+i|0}function bI(e,t,r,n,i,a,o,s){return dI(e+(t^(r|~n))+a+o|0,s)+i|0}nI(hI,iI),hI.prototype._update=function(){for(var e=aI,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,o=0|this._e,s=0|this._a,u=0|this._b,c=0|this._c,l=0|this._d,f=0|this._e,h=0;h<80;h+=1){var d,p;h<16?(d=pI(r,n,i,a,o,e[oI[h]],lI[0],uI[h]),p=bI(s,u,c,l,f,e[sI[h]],fI[0],cI[h])):h<32?(d=vI(r,n,i,a,o,e[oI[h]],lI[1],uI[h]),p=gI(s,u,c,l,f,e[sI[h]],fI[1],cI[h])):h<48?(d=yI(r,n,i,a,o,e[oI[h]],lI[2],uI[h]),p=yI(s,u,c,l,f,e[sI[h]],fI[2],cI[h])):h<64?(d=gI(r,n,i,a,o,e[oI[h]],lI[3],uI[h]),p=vI(s,u,c,l,f,e[sI[h]],fI[3],cI[h])):(d=bI(r,n,i,a,o,e[oI[h]],lI[4],uI[h]),p=pI(s,u,c,l,f,e[sI[h]],fI[4],cI[h])),r=o,o=a,a=dI(i,10),i=n,n=d,s=f,f=l,l=dI(c,10),c=u,u=p}var v=this._b+i+l|0;this._b=this._c+a+f|0,this._c=this._d+o+s|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=v},hI.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=rI.alloc?rI.alloc(20):new rI(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};var mI=hI,wI={exports:{}},xI=__.exports.Buffer;function _I(e,t){this._block=xI.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}_I.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=xI.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,a=this._len,o=0;o<i;){for(var s=a%n,u=Math.min(i-o,n-s),c=0;c<u;c++)r[s+c]=e[o+c];o+=u,(a+=u)%n==0&&this._update(r)}return this._len+=i,this},_I.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},_I.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var kI=_I,SI=eg.exports,EI=kI,II=__.exports.Buffer,AI=[1518500249,1859775393,-1894007588,-899497514],TI=new Array(80);function PI(){this.init(),this._w=TI,EI.call(this,64,56)}function OI(e){return e<<30|e>>>2}function CI(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}SI(PI,EI),PI.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},PI.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l=~~(c/20),f=0|((t=n)<<5|t>>>27)+CI(l,i,a,o)+s+r[c]+AI[l];s=o,o=a,a=OI(i),i=n,n=f}this._a=n+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},PI.prototype._hash=function(){var e=II.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var MI=PI,NI=eg.exports,RI=kI,LI=__.exports.Buffer,jI=[1518500249,1859775393,-1894007588,-899497514],DI=new Array(80);function BI(){this.init(),this._w=DI,RI.call(this,64,56)}function UI(e){return e<<5|e>>>27}function FI(e){return e<<30|e>>>2}function zI(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}NI(BI,RI),BI.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},BI.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=(t=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|t>>>31;for(var c=0;c<80;++c){var l=~~(c/20),f=UI(n)+zI(l,i,a,o)+s+r[c]+jI[l]|0;s=o,o=a,a=FI(i),i=n,n=f}this._a=n+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},BI.prototype._hash=function(){var e=LI.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var HI=BI,VI=eg.exports,KI=kI,qI=__.exports.Buffer,WI=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],GI=new Array(64);function JI(){this.init(),this._w=GI,KI.call(this,64,56)}function XI(e,t,r){return r^e&(t^r)}function $I(e,t,r){return e&t|r&(e|t)}function YI(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function ZI(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function QI(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function eA(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}VI(JI,KI),JI.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},JI.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,o=0|this._e,s=0|this._f,u=0|this._g,c=0|this._h,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<64;++l)t[l]=eA(t[l-2])+t[l-7]+QI(t[l-15])+t[l-16]|0;for(var f=0;f<64;++f){var h=c+ZI(o)+XI(o,s,u)+WI[f]+t[f]|0,d=YI(r)+$I(r,n,i)|0;c=u,u=s,s=o,o=a+h|0,a=i,i=n,n=r,r=h+d|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0,this._f=s+this._f|0,this._g=u+this._g|0,this._h=c+this._h|0},JI.prototype._hash=function(){var e=qI.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var tA=JI,rA=eg.exports,nA=tA,iA=kI,aA=__.exports.Buffer,oA=new Array(64);function sA(){this.init(),this._w=oA,iA.call(this,64,56)}rA(sA,nA),sA.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},sA.prototype._hash=function(){var e=aA.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var uA=sA,cA=eg.exports,lA=kI,fA=__.exports.Buffer,hA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],dA=new Array(160);function pA(){this.init(),this._w=dA,lA.call(this,128,112)}function vA(e,t,r){return r^e&(t^r)}function yA(e,t,r){return e&t|r&(e|t)}function gA(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function bA(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function mA(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function wA(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function xA(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function _A(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function kA(e,t){return e>>>0<t>>>0?1:0}cA(pA,lA),pA.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},pA.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,a=0|this._dh,o=0|this._eh,s=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,f=0|this._bl,h=0|this._cl,d=0|this._dl,p=0|this._el,v=0|this._fl,y=0|this._gl,g=0|this._hl,b=0;b<32;b+=2)t[b]=e.readInt32BE(4*b),t[b+1]=e.readInt32BE(4*b+4);for(;b<160;b+=2){var m=t[b-30],w=t[b-30+1],x=mA(m,w),_=wA(w,m),k=xA(m=t[b-4],w=t[b-4+1]),S=_A(w,m),E=t[b-14],I=t[b-14+1],A=t[b-32],T=t[b-32+1],P=_+I|0,O=x+E+kA(P,_)|0;O=(O=O+k+kA(P=P+S|0,S)|0)+A+kA(P=P+T|0,T)|0,t[b]=O,t[b+1]=P}for(var C=0;C<160;C+=2){O=t[C],P=t[C+1];var M=yA(r,n,i),N=yA(l,f,h),R=gA(r,l),L=gA(l,r),j=bA(o,p),D=bA(p,o),B=hA[C],U=hA[C+1],F=vA(o,s,u),z=vA(p,v,y),H=g+D|0,V=c+j+kA(H,g)|0;V=(V=(V=V+F+kA(H=H+z|0,z)|0)+B+kA(H=H+U|0,U)|0)+O+kA(H=H+P|0,P)|0;var K=L+N|0,q=R+M+kA(K,L)|0;c=u,g=y,u=s,y=v,s=o,v=p,o=a+V+kA(p=d+H|0,d)|0,a=i,d=h,i=n,h=f,n=r,f=l,r=V+q+kA(l=H+K|0,H)|0}this._al=this._al+l|0,this._bl=this._bl+f|0,this._cl=this._cl+h|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+v|0,this._gl=this._gl+y|0,this._hl=this._hl+g|0,this._ah=this._ah+r+kA(this._al,l)|0,this._bh=this._bh+n+kA(this._bl,f)|0,this._ch=this._ch+i+kA(this._cl,h)|0,this._dh=this._dh+a+kA(this._dl,d)|0,this._eh=this._eh+o+kA(this._el,p)|0,this._fh=this._fh+s+kA(this._fl,v)|0,this._gh=this._gh+u+kA(this._gl,y)|0,this._hh=this._hh+c+kA(this._hl,g)|0},pA.prototype._hash=function(){var e=fA.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var SA=pA,EA=eg.exports,IA=SA,AA=kI,TA=__.exports.Buffer,PA=new Array(160);function OA(){this.init(),this._w=PA,AA.call(this,128,112)}EA(OA,IA),OA.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},OA.prototype._hash=function(){var e=TA.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var CA=OA,MA=wI.exports=function(e){e=e.toLowerCase();var t=MA[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};MA.sha=MI,MA.sha1=HI,MA.sha224=uA,MA.sha256=tA,MA.sha384=CA,MA.sha512=SA;var NA=Yt(Ku),RA=Yt(ou),LA=__.exports.Buffer,jA=NA.Transform,DA=RA.StringDecoder;function BA(e){jA.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}(0,eg.exports)(BA,jA),BA.prototype.update=function(e,t,r){"string"==typeof e&&(e=LA.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},BA.prototype.setAutoPadding=function(){},BA.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},BA.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},BA.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},BA.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},BA.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},BA.prototype._finalOrDigest=function(e){var t=this.__final()||LA.alloc(0);return e&&(t=this._toString(t,e,!0)),t},BA.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new DA(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var UA=BA,FA=eg.exports,zA=tI,HA=mI,VA=wI.exports,KA=UA;function qA(e){KA.call(this,"digest"),this._hash=e}FA(qA,KA),qA.prototype._update=function(e){this._hash.update(e)},qA.prototype._final=function(){return this._hash.digest()};var WA=function(e){return"md5"===(e=e.toLowerCase())?new zA:"rmd160"===e||"ripemd160"===e?new HA:new qA(VA(e))},GA=eg.exports,JA=__.exports.Buffer,XA=UA,$A=JA.alloc(128);function YA(e,t){XA.call(this,"digest"),"string"==typeof t&&(t=JA.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=JA.concat([t,$A],64));for(var r=this._ipad=JA.allocUnsafe(64),n=this._opad=JA.allocUnsafe(64),i=0;i<64;i++)r[i]=54^t[i],n[i]=92^t[i];this._hash=[r]}GA(YA,XA),YA.prototype._update=function(e){this._hash.push(e)},YA.prototype._final=function(){var e=this._alg(JA.concat(this._hash));return this._alg(JA.concat([this._opad,e]))};var ZA=YA,QA=tI,eT=eg.exports,tT=ZA,rT=UA,nT=__.exports.Buffer,iT=function(e){return(new QA).update(e).digest()},aT=mI,oT=wI.exports,sT=nT.alloc(128);function uT(e,t){rT.call(this,"digest"),"string"==typeof t&&(t=nT.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new aT:oT(e)).update(t).digest():t.length<r&&(t=nT.concat([t,sT],r));for(var n=this._ipad=nT.allocUnsafe(r),i=this._opad=nT.allocUnsafe(r),a=0;a<r;a++)n[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new aT:oT(e),this._hash.update(n)}eT(uT,rT),uT.prototype._update=function(e){this._hash.update(e)},uT.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new aT:oT(this._alg)).update(this._opad).update(e).digest()};var cT=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new uT("rmd160",t):"md5"===e?new tT(iT,t):new uT(e,t)};Object.defineProperty(Q_,"__esModule",{value:!0});var lT=WA,fT=cT;Q_.hash160=function(e){var t=lT("sha256").update(e).digest();try{return lT("rmd160").update(t).digest()}catch(e){return lT("ripemd160").update(t).digest()}},Q_.hmacSHA512=function(e,t){return fT("sha512",e).update(t).digest()};var hT=E_,dT=__.exports.Buffer,pT=WA,vT=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return hT.encode(dT.concat([t,r],t.length+4))},decode:function(e){var r=t(hT.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=hT.decodeUnsafe(e);if(r)return t(r)}}}((function(e){var t=pT("sha256").update(e).digest();return pT("sha256").update(t).digest()})),yT=cT,gT=pr.alloc(1,1),bT=pr.alloc(1,0),mT=Yy.exports,wT=new Sb.ec("secp256k1"),xT=function(e,t,r,n,i){var a=pr.alloc(32,0),o=pr.alloc(32,1);a=yT("sha256",a).update(o).update(bT).update(t).update(e).update(i||"").digest(),o=yT("sha256",a).update(o).digest(),a=yT("sha256",a).update(o).update(gT).update(t).update(e).update(i||"").digest(),o=yT("sha256",a).update(o).digest();for(var s=o=yT("sha256",a).update(o).digest();!n(s)||!r(s);)a=yT("sha256",a).update(o).update(bT).digest(),o=yT("sha256",a).update(o).digest(),s=o=yT("sha256",a).update(o).digest();return s},_T=pr.alloc(32,0),kT=pr.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ST=pr.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),ET=wT.curve.n,IT=ET.shrn(1),AT=wT.curve.g;function TT(e){return $r(e)&&32===e.length}function PT(e){return!!TT(e)&&e.compare(kT)<0}function OT(e){if(!$r(e))return!1;if(e.length<33)return!1;var t=e[0],r=e.slice(1,33);if(0===r.compare(_T))return!1;if(r.compare(ST)>=0)return!1;if((2===t||3===t)&&33===e.length){try{jT(e)}catch(e){return!1}return!0}var n=e.slice(33);return 0!==n.compare(_T)&&!(n.compare(ST)>=0)&&4===t&&65===e.length}function CT(e){return 4!==e[0]}function MT(e){return!!TT(e)&&e.compare(_T)>0&&e.compare(kT)<0}function NT(e,t){return void 0===e&&void 0!==t?CT(t):void 0===e||e}function RT(e){return new mT(e)}function LT(e){return e.toArrayLike(pr,"be",32)}function jT(e){return wT.curve.decodePoint(e)}function DT(e,t){return pr.from(e._encode(t))}function BT(e,t,r){if(!TT(e))throw new TypeError("Expected Hash");if(!MT(t))throw new TypeError("Expected Private");if(void 0!==r&&!TT(r))throw new TypeError("Expected Extra Data (32 bytes)");var n,i,a=RT(t),o=RT(e);xT(e,t,(function(e){var t=RT(e),r=AT.mul(t);return!r.isInfinity()&&(0!==(n=r.x.umod(ET)).isZero()&&0!==(i=t.invm(ET).mul(o.add(a.mul(n))).umod(ET)).isZero())}),MT,r),i.cmp(IT)>0&&(i=ET.sub(i));var s=pr.allocUnsafe(64);return LT(n).copy(s,0),LT(i).copy(s,32),s}var UT={isPoint:OT,isPointCompressed:function(e){return!!OT(e)&&CT(e)},isPrivate:MT,pointAdd:function(e,t,r){if(!OT(e))throw new TypeError("Expected Point");if(!OT(t))throw new TypeError("Expected Point");var n=jT(e),i=jT(t),a=n.add(i);return a.isInfinity()?null:DT(a,NT(r,e))},pointAddScalar:function(e,t,r){if(!OT(e))throw new TypeError("Expected Point");if(!PT(t))throw new TypeError("Expected Tweak");var n=NT(r,e),i=jT(e);if(0===t.compare(_T))return DT(i,n);var a=RT(t),o=AT.mul(a),s=i.add(o);return s.isInfinity()?null:DT(s,n)},pointCompress:function(e,t){if(!OT(e))throw new TypeError("Expected Point");var r=jT(e);if(r.isInfinity())throw new TypeError("Expected Point");return DT(r,NT(t,e))},pointFromScalar:function(e,t){if(!MT(e))throw new TypeError("Expected Private");var r=RT(e),n=AT.mul(r);return n.isInfinity()?null:DT(n,NT(t))},pointMultiply:function(e,t,r){if(!OT(e))throw new TypeError("Expected Point");if(!PT(t))throw new TypeError("Expected Tweak");var n=NT(r,e),i=jT(e),a=RT(t),o=i.mul(a);return o.isInfinity()?null:DT(o,n)},privateAdd:function(e,t){if(!MT(e))throw new TypeError("Expected Private");if(!PT(t))throw new TypeError("Expected Tweak");var r=RT(e),n=RT(t),i=LT(r.add(n).umod(ET));return MT(i)?i:null},privateSub:function(e,t){if(!MT(e))throw new TypeError("Expected Private");if(!PT(t))throw new TypeError("Expected Tweak");var r=RT(e),n=RT(t),i=LT(r.sub(n).umod(ET));return MT(i)?i:null},sign:function(e,t){return BT(e,t)},signWithEntropy:function(e,t,r){return BT(e,t,r)},verify:function(e,t,r,n){if(!TT(e))throw new TypeError("Expected Hash");if(!OT(t))throw new TypeError("Expected Point");if(!function(e){var t=e.slice(0,32),r=e.slice(32,64);return $r(e)&&64===e.length&&t.compare(kT)<0&&r.compare(kT)<0}(r))throw new TypeError("Expected Signature");var i=jT(t),a=RT(r.slice(0,32)),o=RT(r.slice(32,64));if(n&&o.cmp(IT)>0)return!1;if(a.gtn(0)<=0)return!1;if(o.gtn(0)<=0)return!1;var s=RT(e),u=o.invm(ET),c=s.mul(u).umod(ET),l=a.mul(u).umod(ET),f=AT.mulAdd(c,i,l);return!f.isInfinity()&&f.x.umod(ET).eq(a)}},FT={Array:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return null!=e&&e.constructor===Array})),Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==r(e)},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var zT in FT.Null=FT.Nil,FT)FT[zT].toJSON=function(e){return e}.bind(null,zT);var HT=FT,VT=HT;function KT(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function qT(e){return VT.Nil(e)?"":KT(e.constructor)}function WT(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function GT(e){return VT.Function(e)?e.toJSON?e.toJSON():KT(e):VT.Array(e)?"Array":e&&VT.Object(e)?"Object":void 0!==e?e:""}function JT(e,t,r){var n=function(e){return VT.Function(e)?"":VT.String(e)?JSON.stringify(e):e&&VT.Object(e)?"":e}(t);return"Expected "+GT(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function XT(e,t,r){r=r||qT(t),this.message=JT(e,t,r),WT(this,XT),this.__type=e,this.__value=t,this.__valueTypeName=r}function $T(e,t,r,n,i){e?(i=i||qT(n),this.message=function(e,t,r,n,i){var a='" of type ';return"key"===t&&(a='" with key type '),JT('property "'+GT(r)+a+GT(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',WT(this,XT),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}XT.prototype=Object.create(Error.prototype),XT.prototype.constructor=XT,$T.prototype=Object.create(Error.prototype),$T.prototype.constructor=XT;var YT={TfTypeError:XT,TfPropertyTypeError:$T,tfCustomError:function(e,t){return new XT(e,{},t)},tfSubError:function(e,t,r){return e instanceof $T?(t=t+"."+e.__property,e=new $T(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof XT&&(e=new $T(e.__type,t,r,e.__value,e.__valueTypeName)),WT(e),e},tfJSON:GT,getValueTypeName:qT},ZT=HT,QT=YT;function eP(e){return $r(e)}function tP(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function rP(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw QT.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var nP=rP.bind(null,ZT.Array),iP=rP.bind(null,eP),aP=rP.bind(null,tP),oP=rP.bind(null,ZT.String),sP=Math.pow(2,53)-1,uP={ArrayN:nP,Buffer:eP,BufferN:iP,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:tP,HexN:aP,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-sP&&e<=sP&&Math.floor(e)===e},Range:function(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||ZT.Number,n.toJSON=function(){return"".concat(r.toJSON()," between [").concat(e,", ").concat(t,"]")},n},StringN:oP,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=sP&&Math.floor(e)===e}};for(var cP in uP)uP[cP].toJSON=function(e){return e}.bind(null,cP);var lP=uP,fP=HT,hP=YT.tfJSON,dP=YT.TfTypeError,pP=YT.TfPropertyTypeError,vP=YT.tfSubError,yP=YT.getValueTypeName,gP={arrayOf:function(e,t){function r(r,n){return!!fP.Array(r)&&!fP.Nil(r)&&!(void 0!==t.minLength&&r.length<t.minLength)&&!(void 0!==t.maxLength&&r.length>t.maxLength)&&(void 0===t.length||r.length===t.length)&&r.every((function(t,r){try{return mP(e,t,n)}catch(e){throw vP(e,r)}}))}return e=bP(e),t=t||{},r.toJSON=function(){var r="["+hP(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return fP.Nil(r)||t(r,n,e)}return t=bP(t),r.toJSON=function(){return"?"+hP(t)},r},map:function(e,t){function r(r,n){if(!fP.Object(r))return!1;if(fP.Nil(r))return!1;for(var i in r){try{t&&mP(t,i,n)}catch(e){throw vP(e,i,"key")}try{var a=r[i];mP(e,a,n)}catch(e){throw vP(e,i)}}return!0}return e=bP(e),t&&(t=bP(t)),r.toJSON=t?function(){return"{"+hP(t)+": "+hP(e)+"}"}:function(){return"{"+hP(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=bP(e[r]);function n(e,r){if(!fP.Object(e))return!1;if(fP.Nil(e))return!1;var n;try{for(n in t)mP(t[n],e[n],r)}catch(e){throw vP(e,n)}if(r)for(n in e)if(!t[n])throw new pP(void 0,n);return!0}return n.toJSON=function(){return hP(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(bP);function t(t,r){return e.some((function(e){try{return mP(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(hP).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(bP);function t(t,r){return e.every((function(e){try{return mP(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(hP).join(" & ")},t},quacksLike:function(e){function t(t){return e===yP(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(bP);function t(t,r){return!fP.Nil(t)&&!fP.Nil(t.length)&&(!r||t.length===e.length)&&e.every((function(e,n){try{return mP(e,t[n],r)}catch(e){throw vP(e,n)}}))}return t.toJSON=function(){return"("+e.map(hP).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function bP(e){if(fP.String(e))return"?"===e[0]?gP.maybe(e.slice(1)):fP[e]||gP.quacksLike(e);if(e&&fP.Object(e)){if(fP.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return gP.arrayOf(e[0])}return gP.object(e)}return fP.Function(e)?e:gP.value(e)}function mP(e,t,r,n){if(fP.Function(e)){if(e(t,r))return!0;throw new dP(n||e,t)}return mP(bP(e),t,r)}for(var wP in gP.oneOf=gP.anyOf,fP)mP[wP]=fP[wP];for(wP in gP)mP[wP]=gP[wP];var xP=lP;for(wP in xP)mP[wP]=xP[wP];mP.compile=bP,mP.TfTypeError=dP,mP.TfPropertyTypeError=pP;var _P=mP,kP=vT;function SP(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function EP(e,t,r){var n=new pr(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}var IP={decode:function(e,t){return SP(kP.decode(e),t)},decodeRaw:SP,encode:function(e,t,r){return"number"==typeof e?kP.encode(EP(e,t,r)):kP.encode(EP(e.version,e.privateKey,e.compressed))},encodeRaw:EP};Object.defineProperty(Z_,"__esModule",{value:!0});var AP=Q_,TP=vT,PP=UT,OP=_P,CP=IP,MP=OP.BufferN(32),NP=OP.compile({wif:OP.UInt8,bip32:{public:OP.UInt32,private:OP.UInt32}}),RP={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},LP=Math.pow(2,31)-1;function jP(e){return OP.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function DP(e){return OP.UInt32(e)&&e<=LP}var BP=function(){function e(t,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;a(this,e),this.__D=t,this.__Q=r,this.chainCode=n,this.network=i,this.__DEPTH=o,this.__INDEX=s,this.__PARENT_FINGERPRINT=u,OP(NP,i),this.lowR=!1}return s(e,[{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=PP.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return AP.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}},{key:"compressed",get:function(){return!0}},{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return zP(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=pr.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),TP.encode(r)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return CP.encode(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(e){OP(OP.UInt32,e);var t=e>=2147483648,r=pr.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);var n,i=AP.hmacSHA512(this.chainCode,r),a=i.slice(0,32),o=i.slice(32);if(!PP.isPrivate(a))return this.derive(e+1);if(this.isNeutered()){var s=PP.pointAddScalar(this.publicKey,a,!0);if(null===s)return this.derive(e+1);n=zP(s,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{var u=PP.privateAdd(this.privateKey,a);if(null==u)return this.derive(e+1);n=FP(u,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return n}},{key:"deriveHardened",value:function(e){return OP(DP,e),this.derive(e+2147483648)}},{key:"derivePath",value:function(e){OP(jP,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}},{key:"sign",value:function(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return PP.sign(e,this.privateKey);for(var r=PP.sign(e,this.privateKey),n=pr.alloc(32,0),i=0;r[0]>127;)i++,n.writeUIntLE(i,0,6),r=PP.signWithEntropy(e,this.privateKey,n);return r}},{key:"verify",value:function(e,t){return PP.verify(e,this.publicKey,t)}}]),e}();function UP(e,t,r){return FP(e,t,r)}function FP(e,t,r,n,i,a){if(OP({privateKey:MP,chainCode:MP},{privateKey:e,chainCode:t}),r=r||RP,!PP.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new BP(e,void 0,t,r,n,i,a)}function zP(e,t,r,n,i,a){if(OP({publicKey:OP.BufferN(33),chainCode:MP},{publicKey:e,chainCode:t}),r=r||RP,!PP.isPoint(e))throw new TypeError("Point is not on the curve");return new BP(void 0,e,t,r,n,i,a)}Z_.fromBase58=function(e,t){var r=TP.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||RP;var n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");var i=r[4],a=r.readUInt32BE(5);if(0===i&&0!==a)throw new TypeError("Invalid parent fingerprint");var o=r.readUInt32BE(9);if(0===i&&0!==o)throw new TypeError("Invalid index");var s,u=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");s=FP(r.slice(46,78),u,t,i,o,a)}else s=zP(r.slice(45,78),u,t,i,o,a);return s},Z_.fromPrivateKey=UP,Z_.fromPublicKey=function(e,t,r){return zP(e,t,r)},Z_.fromSeed=function(e,t){if(OP(OP.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||RP;var r=AP.hmacSHA512(pr.from("Bitcoin seed","utf8"),e);return UP(r.slice(0,32),r.slice(32),t)},Object.defineProperty(Y_,"__esModule",{value:!0});var HP=Z_;Y_.fromSeed=HP.fromSeed,Y_.fromBase58=HP.fromBase58,Y_.fromPublicKey=HP.fromPublicKey,Y_.fromPrivateKey=HP.fromPrivateKey;var VP={},KP={};Object.defineProperty(KP,"__esModule",{value:!0}),KP.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},KP.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},KP.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};var qP={},WP={},GP={},JP={};Object.defineProperty(JP,"__esModule",{value:!0}),JP.decode=function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),a=e.readUInt8(4);return 128&a?-(4294967296*(-129&a)+i):4294967296*a+i}for(var o=0,s=0;s<n;++s)o|=e[s]<<8*s;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},JP.encode=function(e){for(var t,r=Math.abs(e),n=(t=r)>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0,i=pr.allocUnsafe(n),a=e<0,o=0;o<n;++o)i.writeUInt8(255&r,o),r>>=8;return 128&i[n-1]?i.writeUInt8(a?128:0,n-1):a&&(i[n-1]|=128),i};var XP={},$P={};Object.defineProperty($P,"__esModule",{value:!0});var YP=_P,ZP=Math.pow(2,31)-1;function QP(e){return YP.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}$P.UInt31=function(e){return YP.UInt32(e)&&e<=ZP},$P.BIP32Path=QP,QP.toJSON=function(){return"BIP32 derivation path"},$P.Signer=function(e){return(YP.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign},$P.Satoshi=function(e){return YP.UInt53(e)&&e<=21e14},$P.ECPoint=YP.quacksLike("Point"),$P.Network=YP.compile({messagePrefix:YP.oneOf(YP.Buffer,YP.String),bip32:{public:YP.UInt32,private:YP.UInt32},pubKeyHash:YP.UInt8,scriptHash:YP.UInt8,wif:YP.UInt8}),$P.Buffer256bit=YP.BufferN(32),$P.Hash160bit=YP.BufferN(20),$P.Hash256bit=YP.BufferN(32),$P.Number=YP.Number,$P.Array=YP.Array,$P.Boolean=YP.Boolean,$P.String=YP.String,$P.Buffer=YP.Buffer,$P.Hex=YP.Hex,$P.maybe=YP.maybe,$P.tuple=YP.tuple,$P.UInt8=YP.UInt8,$P.UInt32=YP.UInt32,$P.Function=YP.Function,$P.BufferN=YP.BufferN,$P.Null=YP.Null,$P.oneOf=YP.oneOf;var eO=__.exports.Buffer,tO={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=eO.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}};Object.defineProperty(XP,"__esModule",{value:!0});var rO=$P,nO=tO,iO=_P,aO=pr.alloc(1,0);function oO(e){for(var t=0;0===e[t];)++t;return t===e.length?aO:128&(e=e.slice(t))[0]?pr.concat([aO,e],1+e.length):e}function sO(e){0===e[0]&&(e=e.slice(1));var t=pr.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}XP.decode=function(e){var t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);var n=nO.decode(e.slice(0,-1)),i=sO(n.r),a=sO(n.s);return{signature:pr.concat([i,a],64),hashType:t}},XP.encode=function(e,t){iO({signature:rO.BufferN(64),hashType:rO.UInt8},{signature:e,hashType:t});var r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);var n=pr.allocUnsafe(1);n.writeUInt8(t,0);var i=oO(e.slice(0,32)),a=oO(e.slice(32,64));return pr.concat([nO.encode(i,a),n])};var uO={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},cO=uO;function lO(e){return e<cO.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}var fO={encodingLength:lO,encode:function(e,t,r){var n=lO(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(cO.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(cO.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(cO.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n},decode:function(e,t){var r,n,i=e.readUInt8(t);if(i<cO.OP_PUSHDATA1)r=i,n=1;else if(i===cO.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===cO.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==cO.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}},hO=uO,dO={};for(var pO in hO)dO[hO[pO]]=pO;var vO=dO;!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=JP,r=XP,n=$P,i=tO,a=UT,o=fO,s=_P;e.OPS=uO;var u=vO,c=e.OPS.OP_RESERVED;function l(t){return n.Buffer(t)||function(t){return n.Number(t)&&(t===e.OPS.OP_0||t>=e.OPS.OP_1&&t<=e.OPS.OP_16||t===e.OPS.OP_1NEGATE)}(t)}function f(e){return n.Array(e)&&e.every(l)}function h(t){return 0===t.length?e.OPS.OP_0:1===t.length?t[0]>=1&&t[0]<=16?c+t[0]:129===t[0]?e.OPS.OP_1NEGATE:void 0:void 0}function d(e){return $r(e)}function p(e){return $r(e)}function v(e){if(d(e))return e;s(n.Array,e);var t=e.reduce((function(e,t){return p(t)?1===t.length&&void 0!==h(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1}),0),r=pr.allocUnsafe(t),i=0;if(e.forEach((function(e){if(p(e)){var t=h(e);if(void 0!==t)return r.writeUInt8(t,i),void(i+=1);i+=o.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1})),i!==r.length)throw new Error("Could not decode chunks");return r}function y(t){if(r=t,n.Array(r))return t;var r;s(n.Buffer,t);for(var i=[],a=0;a<t.length;){var u=t[a];if(u>e.OPS.OP_0&&u<=e.OPS.OP_PUSHDATA4){var c=o.decode(t,a);if(null===c)return null;if((a+=c.size)+c.number>t.length)return null;var l=t.slice(a,a+c.number);a+=c.number;var f=h(l);void 0!==f?i.push(f):i.push(l)}else i.push(u),a+=1}return i}function g(e){var t=-129&e;return t>0&&t<4}e.isPushOnly=f,e.compile=v,e.decompile=y,e.toASM=function(e){return d(e)&&(e=y(e)),e.map((function(e){if(p(e)){var t=h(e);if(void 0===t)return e.toString("hex");e=t}return u[e]})).join(" ")},e.fromASM=function(t){return s(n.String,t),v(t.split(" ").map((function(t){return void 0!==e.OPS[t]?e.OPS[t]:(s(n.Hex,t),pr.from(t,"hex"))})))},e.toStack=function(r){return r=y(r),s(f,r),r.map((function(r){return p(r)?r:r===e.OPS.OP_0?pr.allocUnsafe(0):t.encode(r-c)}))},e.isCanonicalPubKey=function(e){return a.isPoint(e)},e.isDefinedHashType=g,e.isCanonicalScriptSignature=function(e){return!!$r(e)&&!!g(e[e.length-1])&&i.check(e.slice(0,-1))},e.number=t,e.signature=r}(GP);var yO={};Object.defineProperty(yO,"__esModule",{value:!0}),yO.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=r.call(this);return this[t]=e,e},set:function(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},yO.value=function(e){var t;return function(){return void 0!==t||(t=e()),t}},Object.defineProperty(WP,"__esModule",{value:!0});var gO=KP,bO=GP,mO=yO,wO=_P,xO=bO.OPS;WP.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),wO({network:wO.maybe(wO.Object),output:wO.maybe(wO.Buffer),data:wO.maybe(wO.arrayOf(wO.Buffer))},e);var r={name:"embed",network:e.network||gO.bitcoin};if(mO.prop(r,"output",(function(){if(e.data)return bO.compile([xO.OP_RETURN].concat(e.data))})),mO.prop(r,"data",(function(){if(e.output)return bO.decompile(e.output).slice(1)})),t.validate&&e.output){var n=bO.decompile(e.output);if(n[0]!==xO.OP_RETURN)throw new TypeError("Output is invalid");if(!n.slice(1).every(wO.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)};var _O={};Object.defineProperty(_O,"__esModule",{value:!0});var kO=KP,SO=GP,EO=yO,IO=SO.OPS,AO=_P,TO=UT,PO=IO.OP_RESERVED;function OO(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}_O.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function r(e){return SO.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===IO.OP_0)}t=Object.assign({validate:!0},t||{}),AO({network:AO.maybe(AO.Object),m:AO.maybe(AO.Number),n:AO.maybe(AO.Number),output:AO.maybe(AO.Buffer),pubkeys:AO.maybe(AO.arrayOf(TO.isPoint)),signatures:AO.maybe(AO.arrayOf(r)),input:AO.maybe(AO.Buffer)},e);var n={network:e.network||kO.bitcoin},i=[],a=!1;function o(e){a||(a=!0,i=SO.decompile(e),n.m=i[0]-PO,n.n=i[i.length-2]-PO,n.pubkeys=i.slice(1,-2))}if(EO.prop(n,"output",(function(){if(e.m&&n.n&&e.pubkeys)return SO.compile([].concat(PO+e.m,e.pubkeys,PO+n.n,IO.OP_CHECKMULTISIG))})),EO.prop(n,"m",(function(){if(n.output)return o(n.output),n.m})),EO.prop(n,"n",(function(){if(n.pubkeys)return n.pubkeys.length})),EO.prop(n,"pubkeys",(function(){if(e.output)return o(e.output),n.pubkeys})),EO.prop(n,"signatures",(function(){if(e.input)return SO.decompile(e.input).slice(1)})),EO.prop(n,"input",(function(){if(e.signatures)return SO.compile([IO.OP_0].concat(e.signatures))})),EO.prop(n,"witness",(function(){if(n.input)return[]})),EO.prop(n,"name",(function(){if(n.m&&n.n)return"p2ms(".concat(n.m," of ").concat(n.n,")")})),t.validate){if(e.output){if(o(e.output),!AO.Number(i[0]))throw new TypeError("Output is invalid");if(!AO.Number(i[i.length-2]))throw new TypeError("Output is invalid");if(i[i.length-1]!==IO.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(n.m<=0||n.n>16||n.m>n.n||n.n!==i.length-3)throw new TypeError("Output is invalid");if(!n.pubkeys.every((function(e){return TO.isPoint(e)})))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==n.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==n.n)throw new TypeError("n mismatch");if(e.pubkeys&&!OO(e.pubkeys,n.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(n.n=e.pubkeys.length,n.n<n.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<n.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>n.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==IO.OP_0)throw new TypeError("Input is invalid");if(0===n.signatures.length||!n.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!OO(e.signatures,n.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(n,e)};var CO={};Object.defineProperty(CO,"__esModule",{value:!0});var MO=KP,NO=GP,RO=yO,LO=_P,jO=NO.OPS,DO=UT;CO.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),LO({network:LO.maybe(LO.Object),output:LO.maybe(LO.Buffer),pubkey:LO.maybe(DO.isPoint),signature:LO.maybe(NO.isCanonicalScriptSignature),input:LO.maybe(LO.Buffer)},e);var r=RO.value((function(){return NO.decompile(e.input)})),n={name:"p2pk",network:e.network||MO.bitcoin};if(RO.prop(n,"output",(function(){if(e.pubkey)return NO.compile([e.pubkey,jO.OP_CHECKSIG])})),RO.prop(n,"pubkey",(function(){if(e.output)return e.output.slice(1,-1)})),RO.prop(n,"signature",(function(){if(e.input)return r()[0]})),RO.prop(n,"input",(function(){if(e.signature)return NO.compile([e.signature])})),RO.prop(n,"witness",(function(){if(n.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==jO.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!DO.isPoint(n.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(n.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(n.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!NO.isCanonicalScriptSignature(n.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(n,e)};var BO={},UO={};Object.defineProperty(UO,"__esModule",{value:!0});var FO=WA;function zO(e){try{return FO("rmd160").update(e).digest()}catch(t){return FO("ripemd160").update(e).digest()}}function HO(e){return FO("sha256").update(e).digest()}UO.ripemd160=zO,UO.sha1=function(e){return FO("sha1").update(e).digest()},UO.sha256=HO,UO.hash160=function(e){return zO(HO(e))},UO.hash256=function(e){return HO(HO(e))},Object.defineProperty(BO,"__esModule",{value:!0});var VO=UO,KO=KP,qO=GP,WO=yO,GO=_P,JO=qO.OPS,XO=UT,$O=vT;BO.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),GO({network:GO.maybe(GO.Object),address:GO.maybe(GO.String),hash:GO.maybe(GO.BufferN(20)),output:GO.maybe(GO.BufferN(25)),pubkey:GO.maybe(XO.isPoint),signature:GO.maybe(qO.isCanonicalScriptSignature),input:GO.maybe(GO.Buffer)},e);var r=WO.value((function(){var t=$O.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),n=WO.value((function(){return qO.decompile(e.input)})),i=e.network||KO.bitcoin,a={name:"p2pkh",network:i};if(WO.prop(a,"address",(function(){if(a.hash){var e=pr.allocUnsafe(21);return e.writeUInt8(i.pubKeyHash,0),a.hash.copy(e,1),$O.encode(e)}})),WO.prop(a,"hash",(function(){return e.output?e.output.slice(3,23):e.address?r().hash:e.pubkey||a.pubkey?VO.hash160(e.pubkey||a.pubkey):void 0})),WO.prop(a,"output",(function(){if(a.hash)return qO.compile([JO.OP_DUP,JO.OP_HASH160,a.hash,JO.OP_EQUALVERIFY,JO.OP_CHECKSIG])})),WO.prop(a,"pubkey",(function(){if(e.input)return n()[1]})),WO.prop(a,"signature",(function(){if(e.input)return n()[0]})),WO.prop(a,"input",(function(){if(e.pubkey&&e.signature)return qO.compile([e.signature,e.pubkey])})),WO.prop(a,"witness",(function(){if(a.input)return[]})),t.validate){var o=pr.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");o=r().hash}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==JO.OP_DUP||e.output[1]!==JO.OP_HASH160||20!==e.output[2]||e.output[23]!==JO.OP_EQUALVERIFY||e.output[24]!==JO.OP_CHECKSIG)throw new TypeError("Output is invalid");var s=e.output.slice(3,23);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");o=s}if(e.pubkey){var u=VO.hash160(e.pubkey);if(o.length>0&&!o.equals(u))throw new TypeError("Hash mismatch");o=u}if(e.input){var c=n();if(2!==c.length)throw new TypeError("Input is invalid");if(!qO.isCanonicalScriptSignature(c[0]))throw new TypeError("Input has invalid signature");if(!XO.isPoint(c[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(c[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(c[1]))throw new TypeError("Pubkey mismatch");var l=VO.hash160(c[1]);if(o.length>0&&!o.equals(l))throw new TypeError("Hash mismatch")}}return Object.assign(a,e)};var YO={};Object.defineProperty(YO,"__esModule",{value:!0});var ZO=UO,QO=KP,eC=GP,tC=yO,rC=_P,nC=eC.OPS,iC=vT;YO.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),rC({network:rC.maybe(rC.Object),address:rC.maybe(rC.String),hash:rC.maybe(rC.BufferN(20)),output:rC.maybe(rC.BufferN(23)),redeem:rC.maybe({network:rC.maybe(rC.Object),output:rC.maybe(rC.Buffer),input:rC.maybe(rC.Buffer),witness:rC.maybe(rC.arrayOf(rC.Buffer))}),input:rC.maybe(rC.Buffer),witness:rC.maybe(rC.arrayOf(rC.Buffer))},e);var r=e.network;r||(r=e.redeem&&e.redeem.network||QO.bitcoin);var n={network:r},i=tC.value((function(){var t=iC.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),a=tC.value((function(){return eC.decompile(e.input)})),o=tC.value((function(){var t=a();return{network:r,output:t[t.length-1],input:eC.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(tC.prop(n,"address",(function(){if(n.hash){var e=pr.allocUnsafe(21);return e.writeUInt8(n.network.scriptHash,0),n.hash.copy(e,1),iC.encode(e)}})),tC.prop(n,"hash",(function(){return e.output?e.output.slice(2,22):e.address?i().hash:n.redeem&&n.redeem.output?ZO.hash160(n.redeem.output):void 0})),tC.prop(n,"output",(function(){if(n.hash)return eC.compile([nC.OP_HASH160,n.hash,nC.OP_EQUAL])})),tC.prop(n,"redeem",(function(){if(e.input)return o()})),tC.prop(n,"input",(function(){if(e.redeem&&e.redeem.input&&e.redeem.output)return eC.compile([].concat(eC.decompile(e.redeem.input),e.redeem.output))})),tC.prop(n,"witness",(function(){return n.redeem&&n.redeem.witness?n.redeem.witness:n.input?[]:void 0})),tC.prop(n,"name",(function(){var e=["p2sh"];return void 0!==n.redeem&&e.push(n.redeem.name),e.join("-")})),t.validate){var s=pr.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==i().hash.length)throw new TypeError("Invalid address");s=i().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==nC.OP_HASH160||20!==e.output[1]||e.output[22]!==nC.OP_EQUAL)throw new TypeError("Output is invalid");var u=e.output.slice(2,22);if(s.length>0&&!s.equals(u))throw new TypeError("Hash mismatch");s=u}var c=function(e){if(e.output){var t=eC.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");var r=ZO.hash160(e.output);if(s.length>0&&!s.equals(r))throw new TypeError("Hash mismatch");s=r}if(e.input){var n=e.input.length>0,i=e.witness&&e.witness.length>0;if(!n&&!i)throw new TypeError("Empty input");if(n&&i)throw new TypeError("Input and witness provided");if(n){var a=eC.decompile(e.input);if(!eC.isPushOnly(a))throw new TypeError("Non push-only scriptSig")}}};if(e.input){var l=a();if(!l||l.length<1)throw new TypeError("Input too short");if(!$r(o().output))throw new TypeError("Input is invalid");c(o())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){var f=o();if(e.redeem.output&&!e.redeem.output.equals(f.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(f.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)};for(var aC={},oC="qpzry9x8gf2tvdw0s3jn54khce6mua7l",sC={},uC=0;uC<oC.length;uC++){var cC=oC.charAt(uC);if(void 0!==sC[cC])throw new TypeError(cC+" is ambiguous");sC[cC]=uC}function lC(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function fC(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=lC(t)^n>>5}for(t=lC(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=lC(t)^31&i}return t}function hC(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var a=e.slice(0,i),o=e.slice(i+1);if(o.length<6)return"Data too short";var s=fC(a);if("string"==typeof s)return s;for(var u=[],c=0;c<o.length;++c){var l=o.charAt(c),f=sC[l];if(void 0===f)return"Unknown character "+l;s=lC(s)^f,c+6>=o.length||u.push(f)}return 1!==s?"Invalid checksum for "+e:{prefix:a,words:u}}function dC(e,t,r,n){for(var i=0,a=0,o=(1<<r)-1,s=[],u=0;u<e.length;++u)for(i=i<<t|e[u],a+=t;a>=r;)a-=r,s.push(i>>a&o);if(n)a>0&&s.push(i<<r-a&o);else{if(a>=t)return"Excess padding";if(i<<r-a&o)return"Non-zero padding"}return s}var pC={decodeUnsafe:function(){var e=hC.apply(null,arguments);if("object"==r(e))return e},decode:function(e){var t=hC.apply(null,arguments);if("object"==r(t))return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=fC(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",a=0;a<t.length;++a){var o=t[a];if(o>>5!=0)throw new Error("Non 5-bit word");n=lC(n)^o,i+=oC.charAt(o)}for(a=0;a<6;++a)n=lC(n);for(n^=1,a=0;a<6;++a)i+=oC.charAt(n>>5*(5-a)&31);return i},toWordsUnsafe:function(e){var t=dC(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=dC(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=dC(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=dC(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}};Object.defineProperty(aC,"__esModule",{value:!0});var vC=UO,yC=KP,gC=GP,bC=yO,mC=_P,wC=gC.OPS,xC=UT,_C=pC,kC=pr.alloc(0);aC.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),mC({address:mC.maybe(mC.String),hash:mC.maybe(mC.BufferN(20)),input:mC.maybe(mC.BufferN(0)),network:mC.maybe(mC.Object),output:mC.maybe(mC.BufferN(22)),pubkey:mC.maybe(xC.isPoint),signature:mC.maybe(gC.isCanonicalScriptSignature),witness:mC.maybe(mC.arrayOf(mC.Buffer))},e);var r=bC.value((function(){var t=_C.decode(e.address),r=t.words.shift(),n=_C.fromWords(t.words);return{version:r,prefix:t.prefix,data:pr.from(n)}})),n=e.network||yC.bitcoin,i={name:"p2wpkh",network:n};if(bC.prop(i,"address",(function(){if(i.hash){var e=_C.toWords(i.hash);return e.unshift(0),_C.encode(n.bech32,e)}})),bC.prop(i,"hash",(function(){return e.output?e.output.slice(2,22):e.address?r().data:e.pubkey||i.pubkey?vC.hash160(e.pubkey||i.pubkey):void 0})),bC.prop(i,"output",(function(){if(i.hash)return gC.compile([wC.OP_0,i.hash])})),bC.prop(i,"pubkey",(function(){return e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0})),bC.prop(i,"signature",(function(){if(e.witness)return e.witness[0]})),bC.prop(i,"input",(function(){if(i.witness)return kC})),bC.prop(i,"witness",(function(){if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){var a=pr.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(20!==r().data.length)throw new TypeError("Invalid address data");a=r().data}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==wC.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");a=e.output.slice(2)}if(e.pubkey){var o=vC.hash160(e.pubkey);if(a.length>0&&!a.equals(o))throw new TypeError("Hash mismatch");if(a=o,!xC.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!gC.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!xC.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");var s=vC.hash160(e.witness[1]);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)};var SC={};Object.defineProperty(SC,"__esModule",{value:!0});var EC=UO,IC=KP,AC=GP,TC=yO,PC=_P,OC=AC.OPS,CC=UT,MC=pC,NC=pr.alloc(0);function RC(e){return!(!$r(e)||65!==e.length||4!==e[0]||!CC.isPoint(e))}SC.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),PC({network:PC.maybe(PC.Object),address:PC.maybe(PC.String),hash:PC.maybe(PC.BufferN(32)),output:PC.maybe(PC.BufferN(34)),redeem:PC.maybe({input:PC.maybe(PC.Buffer),network:PC.maybe(PC.Object),output:PC.maybe(PC.Buffer),witness:PC.maybe(PC.arrayOf(PC.Buffer))}),input:PC.maybe(PC.BufferN(0)),witness:PC.maybe(PC.arrayOf(PC.Buffer))},e);var r=TC.value((function(){var t=MC.decode(e.address),r=t.words.shift(),n=MC.fromWords(t.words);return{version:r,prefix:t.prefix,data:pr.from(n)}})),n=TC.value((function(){return AC.decompile(e.redeem.input)})),i=e.network;i||(i=e.redeem&&e.redeem.network||IC.bitcoin);var a={network:i};if(TC.prop(a,"address",(function(){if(a.hash){var e=MC.toWords(a.hash);return e.unshift(0),MC.encode(i.bech32,e)}})),TC.prop(a,"hash",(function(){return e.output?e.output.slice(2):e.address?r().data:a.redeem&&a.redeem.output?EC.sha256(a.redeem.output):void 0})),TC.prop(a,"output",(function(){if(a.hash)return AC.compile([OC.OP_0,a.hash])})),TC.prop(a,"redeem",(function(){if(e.witness)return{output:e.witness[e.witness.length-1],input:NC,witness:e.witness.slice(0,-1)}})),TC.prop(a,"input",(function(){if(a.witness)return NC})),TC.prop(a,"witness",(function(){if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){var t=AC.toStack(n());return a.redeem=Object.assign({witness:t},e.redeem),a.redeem.input=NC,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),TC.prop(a,"name",(function(){var e=["p2wsh"];return void 0!==a.redeem&&e.push(a.redeem.name),e.join("-")})),t.validate){var o=pr.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==r().version)throw new TypeError("Invalid address version");if(32!==r().data.length)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==OC.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");var s=e.output.slice(2);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");o=s}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===AC.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");var u=EC.sha256(e.redeem.output);if(o.length>0&&!o.equals(u))throw new TypeError("Hash mismatch");o=u}if(e.redeem.input&&!AC.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(RC)||e.redeem.output&&(AC.decompile(e.redeem.output)||[]).some(RC))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){var c=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(c))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(RC)||(AC.decompile(c)||[]).some(RC))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(a,e)},Object.defineProperty(qP,"__esModule",{value:!0});var LC=WP;qP.embed=LC.p2data;var jC=_O;qP.p2ms=jC.p2ms;var DC=CO;qP.p2pk=DC.p2pk;var BC=BO;qP.p2pkh=BC.p2pkh;var UC=YO;qP.p2sh=UC.p2sh;var FC=aC;qP.p2wpkh=FC.p2wpkh;var zC=SC;qP.p2wsh=zC.p2wsh,Object.defineProperty(VP,"__esModule",{value:!0});var HC=KP,VC=qP,KC=GP,qC=$P,WC=pC,GC=vT,JC=_P;function XC(e){var t=GC.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function $C(e){var t=WC.decode(e),r=WC.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:pr.from(r)}}VP.fromBase58Check=XC,VP.fromBech32=$C,VP.toBase58Check=function(e,t){JC(qC.tuple(qC.Hash160bit,qC.UInt8),arguments);var r=pr.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),GC.encode(r)},VP.toBech32=function(e,t,r){var n=WC.toWords(e);return n.unshift(t),WC.encode(r,n)},VP.fromOutputScript=function(e,t){t=t||HC.bitcoin;try{return VC.p2pkh({output:e,network:t}).address}catch(e){}try{return VC.p2sh({output:e,network:t}).address}catch(e){}try{return VC.p2wpkh({output:e,network:t}).address}catch(e){}try{return VC.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(KC.toASM(e)+" has no matching Address")},VP.toOutputScript=function(e,t){var r,n;t=t||HC.bitcoin;try{r=XC(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return VC.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return VC.p2sh({hash:r.hash}).output}else{try{n=$C(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return VC.p2wpkh({hash:n.data}).output;if(32===n.data.length)return VC.p2wsh({hash:n.data}).output}}}throw new Error(e+" has no matching Script")};var YC={},ZC={exports:{}},QC=__.exports.Buffer,eM=$t.crypto||$t.msCrypto;eM&&eM.getRandomValues?ZC.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=QC.allocUnsafe(e);if(e>0)if(e>65536)for(var n=0;n<e;n+=65536)eM.getRandomValues(r.slice(n,n+65536));else eM.getRandomValues(r);return"function"==typeof t?Ga((function(){t(null,r)})):r}:ZC.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},Object.defineProperty(YC,"__esModule",{value:!0});var tM=KP,rM=$P,nM=UT,iM=ZC.exports,aM=_P,oM=IP,sM=aM.maybe(aM.compile({compressed:rM.maybe(rM.Boolean),network:rM.maybe(rM.Network)})),uM=function(){function e(t,r,n){a(this,e),this.__D=t,this.__Q=r,this.lowR=!1,void 0===n&&(n={}),this.compressed=void 0===n.compressed||n.compressed,this.network=n.network||tM.bitcoin,void 0!==r&&(this.__Q=nM.pointCompress(r,this.compressed))}return s(e,[{key:"privateKey",get:function(){return this.__D}},{key:"publicKey",get:function(){return this.__Q||(this.__Q=nM.pointFromScalar(this.__D,this.compressed)),this.__Q}},{key:"toWIF",value:function(){if(!this.__D)throw new Error("Missing private key");return oM.encode(this.network.wif,this.__D,this.compressed)}},{key:"sign",value:function(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return nM.sign(e,this.__D);for(var r=nM.sign(e,this.__D),n=pr.alloc(32,0),i=0;r[0]>127;)i++,n.writeUIntLE(i,0,6),r=nM.signWithEntropy(e,this.__D,n);return r}},{key:"verify",value:function(e,t){return nM.verify(e,this.publicKey,t)}}]),e}();function cM(e,t){if(aM(rM.Buffer256bit,e),!nM.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return aM(sM,t),new uM(e,void 0,t)}YC.fromPrivateKey=cM,YC.fromPublicKey=function(e,t){return aM(nM.isPoint,e),aM(sM,t),new uM(void 0,e,t)},YC.fromWIF=function(e,t){var r=oM.decode(e),n=r.version;if(rM.Array(t)){if(t=t.filter((function(e){return n===e.wif})).pop(),!t)throw new Error("Unknown network version")}else if(t=t||tM.bitcoin,n!==t.wif)throw new Error("Invalid network version");return cM(r.privateKey,{compressed:r.compressed,network:t})},YC.makeRandom=function(e){aM(sM,e),void 0===e&&(e={});var t,r=e.rng||iM;do{t=r(32),aM(rM.Buffer256bit,t)}while(!nM.isPrivate(t));return cM(t,e)};var lM={},fM={},hM=__.exports.Buffer;function dM(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function pM(e){return dM(e),e<253?1:e<=65535?3:e<=4294967295?5:9}var vM={encode:function e(t,r,n){if(dM(t),r||(r=hM.allocUnsafe(pM(t))),!hM.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),e.bytes=1):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),e.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),r},decode:function e(t,r){if(!hM.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=t.readUInt8(r);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,t.readUInt16LE(r+1);if(254===n)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var i=t.readUInt32LE(r+1),a=4294967296*t.readUInt32LE(r+5)+i;return dM(a),a},encodingLength:pM};Object.defineProperty(fM,"__esModule",{value:!0});var yM=$P,gM=_P,bM=vM;function mM(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function wM(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return mM((n*=4294967296)+r,9007199254740991),n+r}function xM(e,t,r){return mM(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}fM.readUInt64LE=wM,fM.writeUInt64LE=xM,fM.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},fM.cloneBuffer=function(e){var t=pr.allocUnsafe(e.length);return e.copy(t),t},fM.BufferWriter=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,e),this.buffer=t,this.offset=r,gM(yM.tuple(yM.Buffer,yM.UInt32),[t,r])}return s(e,[{key:"writeUInt8",value:function(e){this.offset=this.buffer.writeUInt8(e,this.offset)}},{key:"writeInt32",value:function(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}},{key:"writeUInt32",value:function(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}},{key:"writeUInt64",value:function(e){this.offset=xM(this.buffer,e,this.offset)}},{key:"writeVarInt",value:function(e){bM.encode(e,this.buffer,this.offset),this.offset+=bM.encode.bytes}},{key:"writeSlice",value:function(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}},{key:"writeVarSlice",value:function(e){this.writeVarInt(e.length),this.writeSlice(e)}},{key:"writeVector",value:function(e){var t=this;this.writeVarInt(e.length),e.forEach((function(e){return t.writeVarSlice(e)}))}}]),e}(),fM.BufferReader=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,e),this.buffer=t,this.offset=r,gM(yM.tuple(yM.Buffer,yM.UInt32),[t,r])}return s(e,[{key:"readUInt8",value:function(){var e=this.buffer.readUInt8(this.offset);return this.offset++,e}},{key:"readInt32",value:function(){var e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt32",value:function(){var e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt64",value:function(){var e=wM(this.buffer,this.offset);return this.offset+=8,e}},{key:"readVarInt",value:function(){var e=bM.decode(this.buffer,this.offset);return this.offset+=bM.decode.bytes,e}},{key:"readSlice",value:function(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");var t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readVarSlice",value:function(){return this.readSlice(this.readVarInt())}},{key:"readVector",value:function(){for(var e=this.readVarInt(),t=[],r=0;r<e;r++)t.push(this.readVarSlice());return t}}]),e}();var _M={};Object.defineProperty(_M,"__esModule",{value:!0});var kM=fM,SM=UO,EM=GP,IM=GP,AM=$P,TM=_P,PM=vM;function OM(e){var t=e.length;return PM.encodingLength(t)+t}var CM=pr.allocUnsafe(0),MM=[],NM=pr.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),RM=pr.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),LM=pr.from("ffffffffffffffff","hex"),jM={script:CM,valueBuffer:LM},DM=function(){function e(){a(this,e),this.version=1,this.locktime=0,this.ins=[],this.outs=[]}return s(e,[{key:"isCoinbase",value:function(){return 1===this.ins.length&&e.isCoinbaseHash(this.ins[0].hash)}},{key:"addInput",value:function(t,r,n,i){return TM(AM.tuple(AM.Hash256bit,AM.UInt32,AM.maybe(AM.UInt32),AM.maybe(AM.Buffer)),arguments),AM.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||CM,sequence:n,witness:MM})-1}},{key:"addOutput",value:function(e,t){return TM(AM.tuple(AM.Buffer,AM.Satoshi),arguments),this.outs.push({script:e,value:t})-1}},{key:"hasWitnesses",value:function(){return this.ins.some((function(e){return 0!==e.witness.length}))}},{key:"weight",value:function(){return 3*this.byteLength(!1)+this.byteLength(!0)}},{key:"virtualSize",value:function(){return Math.ceil(this.weight()/4)}},{key:"byteLength",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e&&this.hasWitnesses();return(t?10:8)+PM.encodingLength(this.ins.length)+PM.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+OM(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+OM(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+function(e){var t=e.length;return PM.encodingLength(t)+e.reduce((function(e,t){return e+OM(t)}),0)}(t.witness)}),0):0)}},{key:"clone",value:function(){var t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),t.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),t}},{key:"hashForSignature",value:function(t,r,n){if(TM(AM.tuple(AM.UInt32,AM.Buffer,AM.Number),arguments),t>=this.ins.length)return RM;var i=EM.compile(EM.decompile(r).filter((function(e){return e!==IM.OPS.OP_CODESEPARATOR}))),a=this.clone();if((31&n)===e.SIGHASH_NONE)a.outs=[],a.ins.forEach((function(e,r){r!==t&&(e.sequence=0)}));else if((31&n)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return RM;a.outs.length=t+1;for(var o=0;o<t;o++)a.outs[o]=jM;a.ins.forEach((function(e,r){r!==t&&(e.sequence=0)}))}n&e.SIGHASH_ANYONECANPAY?(a.ins=[a.ins[t]],a.ins[0].script=i):(a.ins.forEach((function(e){e.script=CM})),a.ins[t].script=i);var s=pr.allocUnsafe(a.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),a.__toBuffer(s,0,!1),SM.hash256(s)}},{key:"hashForWitnessV0",value:function(t,r,n,i){TM(AM.tuple(AM.UInt32,AM.Buffer,AM.Satoshi,AM.UInt32),arguments);var a,o=pr.from([]),s=NM,u=NM,c=NM;if(i&e.SIGHASH_ANYONECANPAY||(o=pr.allocUnsafe(36*this.ins.length),a=new kM.BufferWriter(o,0),this.ins.forEach((function(e){a.writeSlice(e.hash),a.writeUInt32(e.index)})),u=SM.hash256(o)),i&e.SIGHASH_ANYONECANPAY||(31&i)===e.SIGHASH_SINGLE||(31&i)===e.SIGHASH_NONE||(o=pr.allocUnsafe(4*this.ins.length),a=new kM.BufferWriter(o,0),this.ins.forEach((function(e){a.writeUInt32(e.sequence)})),c=SM.hash256(o)),(31&i)!==e.SIGHASH_SINGLE&&(31&i)!==e.SIGHASH_NONE){var l=this.outs.reduce((function(e,t){return e+8+OM(t.script)}),0);o=pr.allocUnsafe(l),a=new kM.BufferWriter(o,0),this.outs.forEach((function(e){a.writeUInt64(e.value),a.writeVarSlice(e.script)})),s=SM.hash256(o)}else if((31&i)===e.SIGHASH_SINGLE&&t<this.outs.length){var f=this.outs[t];o=pr.allocUnsafe(8+OM(f.script)),(a=new kM.BufferWriter(o,0)).writeUInt64(f.value),a.writeVarSlice(f.script),s=SM.hash256(o)}o=pr.allocUnsafe(156+OM(r)),a=new kM.BufferWriter(o,0);var h=this.ins[t];return a.writeUInt32(this.version),a.writeSlice(u),a.writeSlice(c),a.writeSlice(h.hash),a.writeUInt32(h.index),a.writeVarSlice(r),a.writeUInt64(n),a.writeUInt32(h.sequence),a.writeSlice(s),a.writeUInt32(this.locktime),a.writeUInt32(i),SM.hash256(o)}},{key:"getHash",value:function(e){return e&&this.isCoinbase()?pr.alloc(32,0):SM.hash256(this.__toBuffer(void 0,void 0,e))}},{key:"getId",value:function(){return kM.reverseBuffer(this.getHash(!1)).toString("hex")}},{key:"toBuffer",value:function(e,t){return this.__toBuffer(e,t,!0)}},{key:"toHex",value:function(){return this.toBuffer(void 0,void 0).toString("hex")}},{key:"setInputScript",value:function(e,t){TM(AM.tuple(AM.Number,AM.Buffer),arguments),this.ins[e].script=t}},{key:"setWitness",value:function(e,t){TM(AM.tuple(AM.Number,[AM.Buffer]),arguments),this.ins[e].witness=t}},{key:"__toBuffer",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=pr.allocUnsafe(this.byteLength(n)));var i=new kM.BufferWriter(t,r||0);i.writeInt32(this.version);var a=n&&this.hasWitnesses();return a&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach((function(e){i.writeSlice(e.hash),i.writeUInt32(e.index),i.writeVarSlice(e.script),i.writeUInt32(e.sequence)})),i.writeVarInt(this.outs.length),this.outs.forEach((function(e){void 0!==e.value?i.writeUInt64(e.value):i.writeSlice(e.valueBuffer),i.writeVarSlice(e.script)})),a&&this.ins.forEach((function(e){i.writeVector(e.witness)})),i.writeUInt32(this.locktime),void 0!==r?t.slice(r,i.offset):t}}],[{key:"fromBuffer",value:function(t,r){var n=new kM.BufferReader(t),i=new e;i.version=n.readInt32();var a=n.readUInt8(),o=n.readUInt8(),s=!1;a===e.ADVANCED_TRANSACTION_MARKER&&o===e.ADVANCED_TRANSACTION_FLAG?s=!0:n.offset-=2;for(var u=n.readVarInt(),c=0;c<u;++c)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:MM});for(var l=n.readVarInt(),f=0;f<l;++f)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(s){for(var h=0;h<u;++h)i.ins[h].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}},{key:"fromHex",value:function(t){return e.fromBuffer(pr.from(t,"hex"),!1)}},{key:"isCoinbaseHash",value:function(e){TM(AM.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0}}]),e}();DM.DEFAULT_SEQUENCE=4294967295,DM.SIGHASH_ALL=1,DM.SIGHASH_NONE=2,DM.SIGHASH_SINGLE=3,DM.SIGHASH_ANYONECANPAY=128,DM.ADVANCED_TRANSACTION_MARKER=0,DM.ADVANCED_TRANSACTION_FLAG=1,_M.Transaction=DM,Object.defineProperty(lM,"__esModule",{value:!0});var BM=fM,UM=UO,FM=_M,zM=$P,HM=_P,VM=vM,KM=new TypeError("Cannot compute merkle root for zero transactions"),qM=new TypeError("Cannot compute witness commit for non-segwit block"),WM=function(){function e(){a(this,e),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}return s(e,[{key:"getWitnessCommit",value:function(){if(!GM(this.transactions))return null;var e=this.transactions[0].outs.filter((function(e){return e.script.slice(0,6).equals(pr.from("6a24aa21a9ed","hex"))})).map((function(e){return e.script.slice(6,38)}));if(0===e.length)return null;var t=e[e.length-1];return t instanceof pr&&32===t.length?t:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof pr&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(e=this.transactions)instanceof Array&&e.some((function(e){return"object"==r(e)&&e.ins instanceof Array&&e.ins.some((function(e){return"object"==r(e)&&e.witness instanceof Array&&e.witness.length>0}))}));var e}},{key:"weight",value:function(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}},{key:"byteLength",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e||!this.transactions?80:80+VM.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,r){return e+r.byteLength(t)}),0)}},{key:"getHash",value:function(){return UM.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return BM.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e}},{key:"toBuffer",value:function(e){var t=pr.allocUnsafe(this.byteLength(e)),r=new BM.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(VM.encode(this.transactions.length,t,r.offset),r.offset+=VM.encode.bytes,this.transactions.forEach((function(e){var n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}))),t}},{key:"toHex",value:function(e){return this.toBuffer(e).toString("hex")}},{key:"checkTxRoots",value:function(){var e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}},{key:"checkProofOfWork",value:function(){var t=BM.reverseBuffer(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw KM;var t=e.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw KM;if(!this.hasWitnessCommit())throw qM;var t=e.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(t)}}],[{key:"fromBuffer",value:function(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=new BM.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),80===t.length)return n;var i=function(){var e=FM.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=e.byteLength(),e},a=r.readVarInt();n.transactions=[];for(var o=0;o<a;++o){var s=i();n.transactions.push(s)}var u=n.getWitnessCommit();return u&&(n.witnessCommit=u),n}},{key:"fromHex",value:function(t){return e.fromBuffer(pr.from(t,"hex"))}},{key:"calculateTarget",value:function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,n=pr.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}},{key:"calculateMerkleRoot",value:function(e,t){if(HM([{getHash:zM.Function}],e),0===e.length)throw KM;if(t&&!GM(e))throw qM;var r=e.map((function(e){return e.getHash(t)})),n=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();r>1;){for(var i=0,a=0;a<r;a+=2,++i){var o=n[a],s=a+1===r?o:n[a+1],u=pr.concat([o,s]);n[i]=t(u)}r=i}return n[0]}(r,UM.hash256);return t?UM.hash256(pr.concat([n,e[0].ins[0].witness[0]])):n}}]),e}();function GM(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}lM.Block=WM;var JM={},XM={},$M={},YM={},ZM={},QM={},eN={};!function(e){var t,r,n;Object.defineProperty(e,"__esModule",{value:!0}),(t=e.GlobalTypes||(e.GlobalTypes={}))[t.UNSIGNED_TX=0]="UNSIGNED_TX",t[t.GLOBAL_XPUB=1]="GLOBAL_XPUB",e.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(r=e.InputTypes||(e.InputTypes={}))[r.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",r[r.WITNESS_UTXO=1]="WITNESS_UTXO",r[r.PARTIAL_SIG=2]="PARTIAL_SIG",r[r.SIGHASH_TYPE=3]="SIGHASH_TYPE",r[r.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",r[r.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",r[r.BIP32_DERIVATION=6]="BIP32_DERIVATION",r[r.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",r[r.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",r[r.POR_COMMITMENT=9]="POR_COMMITMENT",r[r.TAP_KEY_SIG=19]="TAP_KEY_SIG",r[r.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",r[r.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",r[r.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",r[r.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",r[r.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",e.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],(n=e.OutputTypes||(e.OutputTypes={}))[n.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=2]="BIP32_DERIVATION",n[n.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",n[n.TAP_TREE=6]="TAP_TREE",n[n.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",e.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]}(eN);var tN={};Object.defineProperty(tN,"__esModule",{value:!0});var rN=eN;tN.decode=function(e){if(e.key[0]!==rN.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var t,r=e.key.slice(1),n={masterFingerprint:e.value.slice(0,4),extendedPubkey:r,path:"m"},i=C(function(e){return E(Array(e).keys())}(e.value.length/4-1));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=e.value.readUInt32LE(4*a+4),s=!!(2147483648&o),u=2147483647&o;n.path+="/"+u.toString(10)+(s?"'":"")}}catch(e){i.e(e)}finally{i.f()}return n},tN.encode=function(e){var t=pr.from([rN.GlobalTypes.GLOBAL_XPUB]),r=pr.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=pr.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);var a=4;return n.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,a),a+=4})),{key:r,value:i}},tN.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",tN.check=function(e){var t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return $r(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&$r(r)&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)*$/)},tN.canAddToArray=function(e,t,r){var n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.extendedPubkey.equals(t.extendedPubkey)})).length)};var nN={};Object.defineProperty(nN,"__esModule",{value:!0});var iN=eN;nN.encode=function(e){return{key:pr.from([iN.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}};var aN={};Object.defineProperty(aN,"__esModule",{value:!0});var oN=eN;aN.decode=function(e){if(e.key[0]!==oN.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},aN.encode=function(e){return{key:pr.from([oN.InputTypes.FINAL_SCRIPTSIG]),value:e}},aN.expected="Buffer",aN.check=function(e){return $r(e)},aN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig};var sN={};Object.defineProperty(sN,"__esModule",{value:!0});var uN=eN;sN.decode=function(e){if(e.key[0]!==uN.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},sN.encode=function(e){return{key:pr.from([uN.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},sN.expected="Buffer",sN.check=function(e){return $r(e)},sN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness};var cN={};Object.defineProperty(cN,"__esModule",{value:!0});var lN=eN;cN.decode=function(e){if(e.key[0]!==lN.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},cN.encode=function(e){return{key:pr.from([lN.InputTypes.NON_WITNESS_UTXO]),value:e}},cN.expected="Buffer",cN.check=function(e){return $r(e)},cN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo};var fN={};Object.defineProperty(fN,"__esModule",{value:!0});var hN=eN;fN.decode=function(e){if(e.key[0]!==hN.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},fN.encode=function(e){var t=pr.from([hN.InputTypes.PARTIAL_SIG]);return{key:pr.concat([t,e.pubkey]),value:e.signature}},fN.expected="{ pubkey: Buffer; signature: Buffer; }",fN.check=function(e){return $r(e.pubkey)&&$r(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!$r(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;var t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;var r=e[3+t+2];return!(r>33||r<1)&&e.length===3+t+2+r+2}(e.signature)},fN.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)};var dN={};Object.defineProperty(dN,"__esModule",{value:!0});var pN=eN;dN.decode=function(e){if(e.key[0]!==pN.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},dN.encode=function(e){return{key:pr.from([pN.InputTypes.POR_COMMITMENT]),value:pr.from(e,"utf8")}},dN.expected="string",dN.check=function(e){return"string"==typeof e},dN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment};var vN={};Object.defineProperty(vN,"__esModule",{value:!0});var yN=eN;vN.decode=function(e){if(e.key[0]!==yN.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},vN.encode=function(e){var t=pr.from([yN.InputTypes.SIGHASH_TYPE]),r=pr.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}},vN.expected="number",vN.check=function(e){return"number"==typeof e},vN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType};var gN={};Object.defineProperty(gN,"__esModule",{value:!0});var bN=eN;function mN(e){return $r(e)&&(64===e.length||65===e.length)}gN.decode=function(e){if(e.key[0]!==bN.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!mN(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},gN.encode=function(e){return{key:pr.from([bN.InputTypes.TAP_KEY_SIG]),value:e}},gN.expected="Buffer",gN.check=mN,gN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig};var wN={};Object.defineProperty(wN,"__esModule",{value:!0});var xN=eN;wN.decode=function(e){if(e.key[0]!==xN.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));var t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));var r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}},wN.encode=function(e){var t=pr.from([xN.InputTypes.TAP_LEAF_SCRIPT]),r=pr.from([e.leafVersion]);return{key:pr.concat([t,e.controlBlock]),value:pr.concat([e.script,r])}},wN.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",wN.check=function(e){return $r(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&$r(e.script)},wN.canAddToArray=function(e,t,r){var n=t.controlBlock.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.controlBlock.equals(t.controlBlock)})).length)};var _N={};Object.defineProperty(_N,"__esModule",{value:!0});var kN=eN;function SN(e){return $r(e)&&32===e.length}_N.decode=function(e){if(e.key[0]!==kN.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!SN(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},_N.encode=function(e){return{key:pr.from([kN.InputTypes.TAP_MERKLE_ROOT]),value:e}},_N.expected="Buffer",_N.check=SN,_N.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot};var EN={};Object.defineProperty(EN,"__esModule",{value:!0});var IN=eN;EN.decode=function(e){if(e.key[0]!==IN.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},EN.encode=function(e){var t=pr.from([IN.InputTypes.TAP_SCRIPT_SIG]);return{key:pr.concat([t,e.pubkey,e.leafHash]),value:e.signature}},EN.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",EN.check=function(e){return $r(e.pubkey)&&$r(e.leafHash)&&$r(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},EN.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash)})).length)};var AN={},TN={},PN={};function ON(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function CN(e){return ON(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(PN,"__esModule",{value:!0}),PN.encode=function e(t,r,n){if(ON(t),r||(r=pr.allocUnsafe(CN(t))),!$r(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),Object.assign(e,{bytes:1})):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),Object.assign(e,{bytes:3})):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),Object.assign(e,{bytes:5})):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),Object.assign(e,{bytes:9})),r},PN.decode=function e(t,r){if(!$r(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=t.readUInt8(r);if(n<253)return Object.assign(e,{bytes:1}),n;if(253===n)return Object.assign(e,{bytes:3}),t.readUInt16LE(r+1);if(254===n)return Object.assign(e,{bytes:5}),t.readUInt32LE(r+1);Object.assign(e,{bytes:9});var i=t.readUInt32LE(r+1),a=4294967296*t.readUInt32LE(r+5)+i;return ON(a),a},PN.encodingLength=CN,Object.defineProperty(TN,"__esModule",{value:!0});var MN=PN;function NN(e){var t=e.key.length,r=e.value.length,n=MN.encodingLength(t),i=MN.encodingLength(r),a=pr.allocUnsafe(n+t+i+r);return MN.encode(t,a,0),e.key.copy(a,n),MN.encode(r,a,n+t),e.value.copy(a,n+t+i),a}function RN(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}TN.range=function(e){return E(Array(e).keys())},TN.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},TN.keyValsToBuffer=function(e){var t=e.map(NN);return t.push(pr.from([0])),pr.concat(t)},TN.keyValToBuffer=NN,TN.readUInt64LE=function(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return RN((n*=4294967296)+r,9007199254740991),n+r},TN.writeUInt64LE=function(e,t,r){return RN(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8},Object.defineProperty(AN,"__esModule",{value:!0});var LN=eN,jN=TN,DN=PN;AN.decode=function(e){if(e.key[0]!==LN.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));var t=jN.readUInt64LE(e.value,0),r=8,n=DN.decode(e.value,r);r+=DN.encodingLength(n);var i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}},AN.encode=function(e){var t=e.script,r=e.value,n=DN.encodingLength(t.length),i=pr.allocUnsafe(8+n+t.length);return jN.writeUInt64LE(i,r,0),DN.encode(t.length,i,8),t.copy(i,8+n),{key:pr.from([LN.InputTypes.WITNESS_UTXO]),value:i}},AN.expected="{ script: Buffer; value: number; }",AN.check=function(e){return $r(e.script)&&"number"==typeof e.value},AN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo};var BN={};Object.defineProperty(BN,"__esModule",{value:!0});var UN=eN,FN=PN;BN.decode=function(e){if(e.key[0]!==UN.OutputTypes.TAP_TREE||1!==e.key.length)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));for(var t=0,r=[];t<e.value.length;){var n=e.value[t++],i=e.value[t++],a=FN.decode(e.value,t);t+=FN.encodingLength(a),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+a)}),t+=a}return{leaves:r}},BN.encode=function(e){var t,r=pr.from([UN.OutputTypes.TAP_TREE]),n=(t=[]).concat.apply(t,E(e.leaves.map((function(e){return[pr.of(e.depth,e.leafVersion),FN.encode(e.script.length),e.script]}))));return{key:r,value:pr.concat(n)}},BN.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",BN.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every((function(e){return e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&$r(e.script)}))},BN.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree};var zN={};Object.defineProperty(zN,"__esModule",{value:!0});var HN=function(e){return 33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0]};zN.makeConverter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HN;return{decode:function(r){if(r.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+r.key.toString("hex"));var n=r.key.slice(1);if(!t(n))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+r.key.toString("hex"));if(r.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var i,a={masterFingerprint:r.value.slice(0,4),pubkey:n,path:"m"},o=C(function(e){return E(Array(e).keys())}(r.value.length/4-1));try{for(o.s();!(i=o.n()).done;){var s=i.value,u=r.value.readUInt32LE(4*s+4),c=!!(2147483648&u),l=2147483647&u;a.path+="/"+l.toString(10)+(c?"'":"")}}catch(e){o.e(e)}finally{o.f()}return a},encode:function(t){var r=pr.from([e]),n=pr.concat([r,t.pubkey]),i=t.path.split("/"),a=pr.allocUnsafe(4*i.length);t.masterFingerprint.copy(a,0);var o=4;return i.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),a.writeUInt32LE(r,o),o+=4})),{key:n,value:a}},check:function(e){return $r(e.pubkey)&&$r(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}};var VN={};Object.defineProperty(VN,"__esModule",{value:!0}),VN.makeChecker=function(e){return function(t){var r;if(e.includes(t.key[0])&&(33!==(r=t.key.slice(1)).length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}};var KN={};Object.defineProperty(KN,"__esModule",{value:!0}),KN.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:pr.from([e]),value:t}},check:function(e){return $r(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}};var qN={};Object.defineProperty(qN,"__esModule",{value:!0});var WN=PN,GN=zN,JN=function(e){return 32===e.length};qN.makeConverter=function(e){var t=GN.makeConverter(e,JN);return{decode:function(e){for(var r=WN.decode(e.value),n=WN.encodingLength(r),i=t.decode({key:e.key,value:e.value.slice(n+32*r)}),a=new Array(r),o=0,s=n;o<r;o++,s+=32)a[o]=e.value.slice(s,s+32);return Object.assign({},i,{leafHashes:a})},encode:function(e){var r=t.encode(e),n=WN.encodingLength(e.leafHashes.length),i=pr.allocUnsafe(n);WN.encode(e.leafHashes.length,i);var a=pr.concat([i].concat(E(e.leafHashes),[r.value]));return Object.assign({},r,{value:a})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every((function(e){return $r(e)&&32===e.length}))&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}};var XN={};Object.defineProperty(XN,"__esModule",{value:!0}),XN.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:pr.from([e]),value:t}},check:function(e){return $r(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}};var $N={};Object.defineProperty($N,"__esModule",{value:!0}),$N.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:pr.from([e]),value:t}},check:function(e){return $r(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}},Object.defineProperty(QM,"__esModule",{value:!0});var YN=eN,ZN=aN,QN=sN,eR=cN,tR=fN,rR=dN,nR=vN,iR=gN,aR=wN,oR=_N,sR=EN,uR=AN,cR=BN,lR=zN,fR=VN,hR=KN,dR=qN,pR=XN,vR=$N,yR={unsignedTx:nN,globalXpub:tN,checkPubkey:fR.makeChecker([])};QM.globals=yR;var gR={nonWitnessUtxo:eR,partialSig:tR,sighashType:nR,finalScriptSig:ZN,finalScriptWitness:QN,porCommitment:rR,witnessUtxo:uR,bip32Derivation:lR.makeConverter(YN.InputTypes.BIP32_DERIVATION),redeemScript:hR.makeConverter(YN.InputTypes.REDEEM_SCRIPT),witnessScript:vR.makeConverter(YN.InputTypes.WITNESS_SCRIPT),checkPubkey:fR.makeChecker([YN.InputTypes.PARTIAL_SIG,YN.InputTypes.BIP32_DERIVATION]),tapKeySig:iR,tapScriptSig:sR,tapLeafScript:aR,tapBip32Derivation:dR.makeConverter(YN.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:pR.makeConverter(YN.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:oR};QM.inputs=gR;var bR={bip32Derivation:lR.makeConverter(YN.OutputTypes.BIP32_DERIVATION),redeemScript:hR.makeConverter(YN.OutputTypes.REDEEM_SCRIPT),witnessScript:vR.makeConverter(YN.OutputTypes.WITNESS_SCRIPT),checkPubkey:fR.makeChecker([YN.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:dR.makeConverter(YN.OutputTypes.TAP_BIP32_DERIVATION),tapTree:cR,tapInternalKey:pR.makeConverter(YN.OutputTypes.TAP_INTERNAL_KEY)};QM.outputs=bR,Object.defineProperty(ZM,"__esModule",{value:!0});var mR=QM,wR=TN,xR=PN,_R=eN;function kR(e,t,r){if(!t.equals(pr.from([r])))throw new Error("Format Error: Invalid ".concat(e," key: ").concat(t.toString("hex")))}function SR(e,t){var r,n=t.globalMapKeyVals,i=t.inputKeyVals,a=t.outputKeyVals,o={unsignedTx:e},s=0,u=C(n);try{for(u.s();!(r=u.n()).done;){var c=r.value;switch(c.key[0]){case _R.GlobalTypes.UNSIGNED_TX:if(kR("global",c.key,_R.GlobalTypes.UNSIGNED_TX),s>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");s++;break;case _R.GlobalTypes.GLOBAL_XPUB:void 0===o.globalXpub&&(o.globalXpub=[]),o.globalXpub.push(mR.globals.globalXpub.decode(c));break;default:o.unknownKeyVals||(o.unknownKeyVals=[]),o.unknownKeyVals.push(c)}}}catch(e){u.e(e)}finally{u.f()}var l,f=i.length,h=a.length,d=[],p=[],v=C(wR.range(f));try{for(v.s();!(l=v.n()).done;){var y,g=l.value,b={},m=C(i[g]);try{for(m.s();!(y=m.n()).done;){var w=y.value;switch(mR.inputs.checkPubkey(w),w.key[0]){case _R.InputTypes.NON_WITNESS_UTXO:if(kR("input",w.key,_R.InputTypes.NON_WITNESS_UTXO),void 0!==b.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");b.nonWitnessUtxo=mR.inputs.nonWitnessUtxo.decode(w);break;case _R.InputTypes.WITNESS_UTXO:if(kR("input",w.key,_R.InputTypes.WITNESS_UTXO),void 0!==b.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");b.witnessUtxo=mR.inputs.witnessUtxo.decode(w);break;case _R.InputTypes.PARTIAL_SIG:void 0===b.partialSig&&(b.partialSig=[]),b.partialSig.push(mR.inputs.partialSig.decode(w));break;case _R.InputTypes.SIGHASH_TYPE:if(kR("input",w.key,_R.InputTypes.SIGHASH_TYPE),void 0!==b.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");b.sighashType=mR.inputs.sighashType.decode(w);break;case _R.InputTypes.REDEEM_SCRIPT:if(kR("input",w.key,_R.InputTypes.REDEEM_SCRIPT),void 0!==b.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");b.redeemScript=mR.inputs.redeemScript.decode(w);break;case _R.InputTypes.WITNESS_SCRIPT:if(kR("input",w.key,_R.InputTypes.WITNESS_SCRIPT),void 0!==b.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");b.witnessScript=mR.inputs.witnessScript.decode(w);break;case _R.InputTypes.BIP32_DERIVATION:void 0===b.bip32Derivation&&(b.bip32Derivation=[]),b.bip32Derivation.push(mR.inputs.bip32Derivation.decode(w));break;case _R.InputTypes.FINAL_SCRIPTSIG:kR("input",w.key,_R.InputTypes.FINAL_SCRIPTSIG),b.finalScriptSig=mR.inputs.finalScriptSig.decode(w);break;case _R.InputTypes.FINAL_SCRIPTWITNESS:kR("input",w.key,_R.InputTypes.FINAL_SCRIPTWITNESS),b.finalScriptWitness=mR.inputs.finalScriptWitness.decode(w);break;case _R.InputTypes.POR_COMMITMENT:kR("input",w.key,_R.InputTypes.POR_COMMITMENT),b.porCommitment=mR.inputs.porCommitment.decode(w);break;case _R.InputTypes.TAP_KEY_SIG:kR("input",w.key,_R.InputTypes.TAP_KEY_SIG),b.tapKeySig=mR.inputs.tapKeySig.decode(w);break;case _R.InputTypes.TAP_SCRIPT_SIG:void 0===b.tapScriptSig&&(b.tapScriptSig=[]),b.tapScriptSig.push(mR.inputs.tapScriptSig.decode(w));break;case _R.InputTypes.TAP_LEAF_SCRIPT:void 0===b.tapLeafScript&&(b.tapLeafScript=[]),b.tapLeafScript.push(mR.inputs.tapLeafScript.decode(w));break;case _R.InputTypes.TAP_BIP32_DERIVATION:void 0===b.tapBip32Derivation&&(b.tapBip32Derivation=[]),b.tapBip32Derivation.push(mR.inputs.tapBip32Derivation.decode(w));break;case _R.InputTypes.TAP_INTERNAL_KEY:kR("input",w.key,_R.InputTypes.TAP_INTERNAL_KEY),b.tapInternalKey=mR.inputs.tapInternalKey.decode(w);break;case _R.InputTypes.TAP_MERKLE_ROOT:kR("input",w.key,_R.InputTypes.TAP_MERKLE_ROOT),b.tapMerkleRoot=mR.inputs.tapMerkleRoot.decode(w);break;default:b.unknownKeyVals||(b.unknownKeyVals=[]),b.unknownKeyVals.push(w)}}}catch(e){m.e(e)}finally{m.f()}d.push(b)}}catch(e){v.e(e)}finally{v.f()}var x,_=C(wR.range(h));try{for(_.s();!(x=_.n()).done;){var k,S=x.value,E={},I=C(a[S]);try{for(I.s();!(k=I.n()).done;){var A=k.value;switch(mR.outputs.checkPubkey(A),A.key[0]){case _R.OutputTypes.REDEEM_SCRIPT:if(kR("output",A.key,_R.OutputTypes.REDEEM_SCRIPT),void 0!==E.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");E.redeemScript=mR.outputs.redeemScript.decode(A);break;case _R.OutputTypes.WITNESS_SCRIPT:if(kR("output",A.key,_R.OutputTypes.WITNESS_SCRIPT),void 0!==E.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");E.witnessScript=mR.outputs.witnessScript.decode(A);break;case _R.OutputTypes.BIP32_DERIVATION:void 0===E.bip32Derivation&&(E.bip32Derivation=[]),E.bip32Derivation.push(mR.outputs.bip32Derivation.decode(A));break;case _R.OutputTypes.TAP_INTERNAL_KEY:kR("output",A.key,_R.OutputTypes.TAP_INTERNAL_KEY),E.tapInternalKey=mR.outputs.tapInternalKey.decode(A);break;case _R.OutputTypes.TAP_TREE:kR("output",A.key,_R.OutputTypes.TAP_TREE),E.tapTree=mR.outputs.tapTree.decode(A);break;case _R.OutputTypes.TAP_BIP32_DERIVATION:void 0===E.tapBip32Derivation&&(E.tapBip32Derivation=[]),E.tapBip32Derivation.push(mR.outputs.tapBip32Derivation.decode(A));break;default:E.unknownKeyVals||(E.unknownKeyVals=[]),E.unknownKeyVals.push(A)}}}catch(e){I.e(e)}finally{I.f()}p.push(E)}}catch(e){_.e(e)}finally{_.f()}return{globalMap:o,inputs:d,outputs:p}}ZM.psbtFromBuffer=function(e,t){var r=0;function n(){var t=xR.decode(e,r);r+=xR.encodingLength(t);var n=e.slice(r,r+t);return r+=t,n}function i(){return{key:n(),value:n()}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");var t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){var t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){var t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var o=[],s={};!a();){var u=i(),c=u.key.toString("hex");if(s[c])throw new Error("Format Error: Keys must be unique for global keymap: key "+c);s[c]=1,o.push(u)}var l=o.filter((function(e){return e.key[0]===_R.GlobalTypes.UNSIGNED_TX}));if(1!==l.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var f,h=t(l[0].value),d=h.getInputOutputCounts(),p=d.inputCount,v=d.outputCount,y=[],g=[],b=C(wR.range(p));try{for(b.s();!(f=b.n()).done;){for(var m=f.value,w={},x=[];!a();){var _=i(),k=_.key.toString("hex");if(w[k])throw new Error("Format Error: Keys must be unique for each input: input index "+m+" key "+k);w[k]=1,x.push(_)}y.push(x)}}catch(e){b.e(e)}finally{b.f()}var S,E=C(wR.range(v));try{for(E.s();!(S=E.n()).done;){for(var I=S.value,A={},T=[];!a();){var P=i(),O=P.key.toString("hex");if(A[O])throw new Error("Format Error: Keys must be unique for each output: output index "+I+" key "+O);A[O]=1,T.push(P)}g.push(T)}}catch(e){E.e(e)}finally{E.f()}return SR(h,{globalMapKeyVals:o,inputKeyVals:y,outputKeyVals:g})},ZM.checkKeyBuffer=kR,ZM.psbtFromKeyVals=SR;var ER={};Object.defineProperty(ER,"__esModule",{value:!0});var IR=QM,AR=TN;ER.psbtToBuffer=function(e){var t=OR({globalMap:e.globalMap,inputs:e.inputs,outputs:e.outputs}),r=t.globalKeyVals,n=t.inputKeyVals,i=t.outputKeyVals,a=AR.keyValsToBuffer(r),o=function(e){return 0===e.length?[pr.from([0])]:e.map(AR.keyValsToBuffer)},s=o(n),u=o(i),c=pr.allocUnsafe(5);return c.writeUIntBE(482972169471,0,5),pr.concat([c,a].concat(s,u))};var TR=function(e,t){return e.key.compare(t.key)};function PR(e,t){var r=new Set,n=Object.entries(e).reduce((function(e,n){var i=k(n,2),a=i[0],o=i[1];if("unknownKeyVals"===a)return e;var s=t[a];if(void 0===s)return e;var u=(Array.isArray(o)?o:[o]).map(s.encode);return u.map((function(e){return e.key.toString("hex")})).forEach((function(e){if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)})),e.concat(u)}),[]),i=e.unknownKeyVals?e.unknownKeyVals.filter((function(e){return!r.has(e.key.toString("hex"))})):[];return n.concat(i).sort(TR)}function OR(e){var t=e.globalMap,r=e.inputs,n=e.outputs;return{globalKeyVals:PR(t,IR.globals),inputKeyVals:r.map((function(e){return PR(e,IR.inputs)})),outputKeyVals:n.map((function(e){return PR(e,IR.outputs)}))}}ER.psbtToKeyVals=OR,function(e){function t(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),t(ZM),t(ER)}(YM),Object.defineProperty($M,"__esModule",{value:!0});var CR=YM;function MR(e,t,r){return function(n){if(!e.has(n)){var i=r.filter((function(e){return e.key.toString("hex")===n}))[0];t.push(i),e.add(n)}}}function NR(e){return e.globalMap.unsignedTx}function RR(e){var t=new Set;return e.forEach((function(e){var r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}$M.combine=function(e){var t=e[0],r=CR.psbtToKeyVals(t),n=e.slice(1);if(0===n.length)throw new Error("Combine: Nothing to combine");var i=NR(t);if(void 0===i)throw new Error("Combine: Self missing transaction");var a,o=RR(r.globalKeyVals),s=r.inputKeyVals.map(RR),u=r.outputKeyVals.map(RR),c=C(n);try{var l=function(){var e=a.value,t=NR(e);if(void 0===t||!t.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var n=CR.psbtToKeyVals(e);RR(n.globalKeyVals).forEach(MR(o,r.globalKeyVals,n.globalKeyVals)),n.inputKeyVals.map(RR).forEach((function(e,t){return e.forEach(MR(s[t],r.inputKeyVals[t],n.inputKeyVals[t]))})),n.outputKeyVals.map(RR).forEach((function(e,t){return e.forEach(MR(u[t],r.outputKeyVals[t],n.outputKeyVals[t]))}))};for(c.s();!(a=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}return CR.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})};var LR={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=QM;function r(e,t){var r=e[t];if(void 0===r)throw new Error("No input #".concat(t));return r}function n(e,t){var r=e[t];if(void 0===r)throw new Error("No output #".concat(t));return r}function i(e,t,r,n){throw new Error("Data for ".concat(e," key ").concat(t," is incorrect: Expected ").concat(r," and got ").concat(JSON.stringify(n)))}function a(e){return function(r,n){for(var a=function(){var a=s[o],u=r[a],c=t[e+"s"][a]||{},l=c.canAdd,f=c.canAddToArray,h=c.check,d=c.expected;if(h)if(!!f){if(!Array.isArray(u)||n[a]&&!Array.isArray(n[a]))throw new Error("Key type ".concat(a," must be an array"));u.every(h)||i(e,a,d,u);var p=n[a]||[],v=new Set;if(!u.every((function(e){return f(p,e,v)})))throw new Error("Can not add duplicate data to array");n[a]=p.concat(u)}else{if(h(u)||i(e,a,d,u),!l(n,u))throw new Error("Can not add duplicate data to ".concat(e));n[a]=u}},o=0,s=Object.keys(r);o<s.length;o++)a()}}e.checkForInput=r,e.checkForOutput=n,e.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((function(t){return t.key.equals(e.key)})).length)throw new Error("Duplicate Key: ".concat(e.key.toString("hex")))},e.getEnumLength=function(e){var t=0;return Object.keys(e).forEach((function(e){Number(isNaN(Number(e)))&&t++})),t},e.inputCheckUncleanFinalized=function(e,t){var r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){var n=!!t.redeemScript,i=!!t.witnessScript,a=!n||!!t.finalScriptSig,o=!i||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=a&&o&&s}if(!1===r)throw new Error("Input #".concat(e," has too much or too little data to clean"))},e.updateGlobal=a("global"),e.updateInput=a("input"),e.updateOutput=a("output"),e.addInputAttributes=function(t,n){var i=r(t,t.length-1);e.updateInput(n,i)},e.addOutputAttributes=function(t,r){var i=n(t,t.length-1);e.updateOutput(r,i)},e.defaultVersionSetter=function(e,t){if(!$r(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},e.defaultLocktimeSetter=function(e,t){if(!$r(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}(LR),Object.defineProperty(XM,"__esModule",{value:!0});var jR=$M,DR=YM,BR=eN,UR=LR;XM.Psbt=function(){function e(t){a(this,e),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}return s(e,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return DR.psbtToBuffer(this)}},{key:"updateGlobal",value:function(e){return UR.updateGlobal(e,this.globalMap),this}},{key:"updateInput",value:function(e,t){var r=UR.checkForInput(this.inputs,e);return UR.updateInput(t,r),this}},{key:"updateOutput",value:function(e,t){var r=UR.checkForOutput(this.outputs,e);return UR.updateOutput(t,r),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return UR.checkHasKey(e,this.globalMap.unknownKeyVals,UR.getEnumLength(BR.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){var r=UR.checkForInput(this.inputs,e);return UR.checkHasKey(t,r.unknownKeyVals,UR.getEnumLength(BR.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){var r=UR.checkForOutput(this.outputs,e);return UR.checkHasKey(t,r.unknownKeyVals,UR.getEnumLength(BR.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addInput",value:function(e){var t=this;this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),UR.addInputAttributes(this.inputs,e),this}},{key:"addOutput",value:function(e){var t=this;this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),UR.addOutputAttributes(this.outputs,e),this}},{key:"clearFinalizedInput",value:function(e){var t=UR.checkForInput(this.inputs,e);UR.inputCheckUncleanFinalized(e,t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete t[i]}return this}},{key:"combine",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=jR.combine([this].concat(t));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(e,t){var r=pr.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e,t){var r=pr.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(e,t){var r=DR.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),e}(),Object.defineProperty(JM,"__esModule",{value:!0});var FR=XM,zR=PN,HR=LR,VR=VP,KR=fM,qR=UO,WR=YC,GR=qP,JR=GP,XR=_M,$R={network:KP.bitcoin,maximumFeeRate:5e3},YR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FR.Psbt(new QR);a(this,e),this.data=r,this.opts=Object.assign({},$R,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);var n=function(e,t,r,n){return Object.defineProperty(e,t,{enumerable:r,writable:n})};n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}return s(e,[{key:"inputCount",get:function(){return this.data.inputs.length}},{key:"version",get:function(){return this.__CACHE.__TX.version},set:function(e){this.setVersion(e)}},{key:"locktime",get:function(){return this.__CACHE.__TX.locktime},set:function(e){this.setLocktime(e)}},{key:"txInputs",get:function(){return this.__CACHE.__TX.ins.map((function(e){return{hash:KR.cloneBuffer(e.hash),index:e.index,sequence:e.sequence}}))}},{key:"txOutputs",get:function(){var e=this;return this.__CACHE.__TX.outs.map((function(t){var r;try{r=VR.fromOutputScript(t.script,e.opts.network)}catch(t){}return{script:KR.cloneBuffer(t.script),value:t.value,address:r}}))}},{key:"combine",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.data).combine.apply(e,E(r.map((function(e){return e.data})))),this}},{key:"clone",value:function(){var t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}},{key:"setMaximumFeeRate",value:function(e){fL(e),this.opts.maximumFeeRate=e}},{key:"setVersion",value:function(e){fL(e),hL(this.data.inputs,"setVersion");var t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(e){fL(e),hL(this.data.inputs,"setLocktime");var t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(e,t){fL(t),hL(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(e){var t=this;return e.forEach((function(e){return t.addInput(e)})),this}},{key:"addInput",value:function(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");hL(this.data.inputs,"addInput"),e.witnessScript&&OL(e.witnessScript);var t=this.__CACHE;this.data.addInput(e),pL(t,t.__TX.ins[t.__TX.ins.length-1]);var r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&SL(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(e){var t=this;return e.forEach((function(e){return t.addOutput(e)})),this}},{key:"addOutput",value:function(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");hL(this.data.inputs,"addOutput");var t=e,r=t.address;if("string"==typeof r){var n=this.opts.network,i=VR.toOutputScript(r,n);e=Object.assign(e,{script:i})}var a=this.__CACHE;return this.data.addOutput(e),a.__FEE=void 0,a.__FEE_RATE=void 0,a.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(e){if(!this.data.inputs.every(rL))throw new Error("Not finalized");var t=this.__CACHE;if(e||function(e,t,r){var n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),a=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((a/1e8).toFixed(8)," in fees, which is ").concat(n," satoshi per byte for a transaction with a VSize of ").concat(i," bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction."))}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;var r=t.__TX.clone();return EL(this.data.inputs,r,t,!0),r}},{key:"getFeeRate",value:function(){return bL("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return bL("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var e=this;return HR.checkForInput(this.data.inputs,0),NL(this.data.inputs.length).forEach((function(t){return e.finalizeInput(t)})),this}},{key:"finalizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mL,r=HR.checkForInput(this.data.inputs,e),n=function(e,t,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){var a=IL(r,t,e),o=n.ins[e].index;i.script=a.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||sL(i.script))&&(i.isSegwit=!0),i}(e,r,this.__CACHE),i=n.script,a=n.isP2SH,o=n.isP2WSH,s=n.isSegwit;if(!i)throw new Error("No script found for input #".concat(e));!function(e){if(e.sighashType&&e.partialSig){var t=e.partialSig,r=e.sighashType;t.forEach((function(e){var t=JR.signature.decode(e.signature).hashType;if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}}(r);var u=t(e,r,i,s,a,o),c=u.finalScriptSig,l=u.finalScriptWitness;if(c&&this.data.updateInput(e,{finalScriptSig:c}),l&&this.data.updateInput(e,{finalScriptWitness:l}),!c&&!l)throw new Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}},{key:"getInputType",value:function(e){var t=HR.checkForInput(this.data.inputs,e),r=PL(AL(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(e){var t=JR.decompile(e);if(t){var r,n=t[t.length-1];if($r(n)&&!TL(n)&&(r=n,!JR.isCanonicalScriptSignature(r)))if(JR.decompile(n))return n}}}(t.finalScriptSig),t.witnessScript||function(e){if(e){var t=kL(e),r=t[t.length-1];if(!TL(r)&&JR.decompile(r))return r}}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+ML(r.meaningfulScript)}},{key:"inputHasPubkey",value:function(e,t){return function(e,t,r,n){return CL(e,PL(AL(r,t,n),r,"input",t.redeemScript,t.witnessScript).meaningfulScript)}(t,HR.checkForInput(this.data.inputs,e),e,this.__CACHE)}},{key:"inputHasHDKey",value:function(e,t){var r=HR.checkForInput(this.data.inputs,e),n=lL(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"outputHasPubkey",value:function(e,t){return function(e,t,r,n){return CL(e,PL(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript).meaningfulScript)}(t,HR.checkForOutput(this.data.outputs,e),e,this.__CACHE)}},{key:"outputHasHDKey",value:function(e,t){var r=HR.checkForOutput(this.data.outputs,e),n=lL(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"validateSignaturesOfAllInputs",value:function(){var e=this;return HR.checkForInput(this.data.inputs,0),NL(this.data.inputs.length).map((function(t){return e.validateSignaturesOfInput(t)})).reduce((function(e,t){return!0===t&&e}),!0)}},{key:"validateSignaturesOfInput",value:function(e,t){var r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var i=t?n.filter((function(e){return e.pubkey.equals(t)})):n;if(i.length<1)throw new Error("No signatures for this pubkey");var a,o,s,u,c=[],l=C(i);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=JR.signature.decode(f.signature),d=s!==h.hashType?xL(e,Object.assign({},r,{sighashType:h.hashType}),this.__CACHE,!0):{hash:a,script:o},p=d.hash,v=d.script;s=h.hashType,a=p,o=v,dL(f.pubkey,v,"verify");var y=WR.fromPublicKey(f.pubkey);c.push(y.verify(p,h.signature))}}catch(e){l.e(e)}finally{l.f()}return c.every((function(e){return!0===e}))}},{key:"signAllInputsHD",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[XR.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var r,n=[],i=C(NL(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var a=r.value;try{this.signInputHD(a,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[XR.Transaction.SIGHASH_ALL];return new Promise((function(n,i){if(!e||!e.publicKey||!e.fingerprint)return i(new Error("Need HDSigner to sign input"));var a,o=[],s=[],u=C(NL(t.data.inputs.length));try{for(u.s();!(a=u.n()).done;){var c=a.value;s.push(t.signInputHDAsync(c,e,r).then((function(){o.push(!0)}),(function(){o.push(!1)})))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(s).then((function(){if(o.every((function(e){return!1===e})))return i(new Error("No inputs were signed"));n()}))}))}},{key:"signInputHD",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[XR.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return _L(e,this.data.inputs,t).forEach((function(t){return r.signInput(e,t,n)})),this}},{key:"signInputHDAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[XR.Transaction.SIGHASH_ALL];return new Promise((function(i,a){if(!t||!t.publicKey||!t.fingerprint)return a(new Error("Need HDSigner to sign input"));var o=_L(e,r.data.inputs,t).map((function(t){return r.signInputAsync(e,t,n)}));return Promise.all(o).then((function(){i()})).catch(a)}))}},{key:"signAllInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[XR.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var r,n=[],i=C(NL(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var a=r.value;try{this.signInput(a,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[XR.Transaction.SIGHASH_ALL];return new Promise((function(n,i){if(!e||!e.publicKey)return i(new Error("Need Signer to sign input"));var a,o=[],s=[],u=C(t.data.inputs.entries());try{for(u.s();!(a=u.n()).done;){var c=k(a.value,1)[0];s.push(t.signInputAsync(c,e,r).then((function(){o.push(!0)}),(function(){o.push(!1)})))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(s).then((function(){if(o.every((function(e){return!1===e})))return i(new Error("No inputs were signed"));n()}))}))}},{key:"signInput",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[XR.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var n=wL(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=n.hash,a=n.sighashType,o=[{pubkey:t.publicKey,signature:JR.signature.encode(t.sign(i),a)}];return this.data.updateInput(e,{partialSig:o}),this}},{key:"signInputAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[XR.Transaction.SIGHASH_ALL];return Promise.resolve().then((function(){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var i=wL(r.data.inputs,e,t.publicKey,r.__CACHE,n),a=i.hash,o=i.sighashType;return Promise.resolve(t.sign(a)).then((function(n){var i=[{pubkey:t.publicKey,signature:JR.signature.encode(n,o)}];r.data.updateInput(e,{partialSig:i})}))}))}},{key:"toBuffer",value:function(){return eL(this.__CACHE),this.data.toBuffer()}},{key:"toHex",value:function(){return eL(this.__CACHE),this.data.toHex()}},{key:"toBase64",value:function(){return eL(this.__CACHE),this.data.toBase64()}},{key:"updateGlobal",value:function(e){return this.data.updateGlobal(e),this}},{key:"updateInput",value:function(e,t){return t.witnessScript&&OL(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&SL(this.__CACHE,this.data.inputs[e],e),this}},{key:"updateOutput",value:function(e,t){return this.data.updateOutput(e,t),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return this.data.addUnknownKeyValToGlobal(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){return this.data.addUnknownKeyValToInput(e,t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}},{key:"clearFinalizedInput",value:function(e){return this.data.clearFinalizedInput(e),this}}],[{key:"fromBase64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pr.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=pr.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=FR.Psbt.fromBuffer(t,ZR),i=new e(r,n);return function(e,t){e.ins.forEach((function(e){pL(t,e)}))}(i.__CACHE.__TX,i.__CACHE),i}}]),e}();JM.Psbt=YR;var ZR=function(e){return new QR(e)},QR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr.from([2,0,0,0,0,0,0,0,0,0]);a(this,e),this.tx=XR.Transaction.fromBuffer(t),function(e){if(!e.ins.every((function(e){return e.script&&0===e.script.length&&e.witness&&0===e.witness.length})))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}return s(e,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(e){if(void 0===e.hash||void 0===e.index||!$r(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");var t="string"==typeof e.hash?KR.reverseBuffer(pr.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}},{key:"addOutput",value:function(e){if(void 0===e.script||void 0===e.value||!$r(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),e}();function eL(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function tL(e,t,r){if(!t)return!1;var n;if(n=r?r.map((function(e){var r=WR.fromPublicKey(e,{compressed:!0}).publicKey;return t.find((function(e){return e.pubkey.equals(r)}))})).filter((function(e){return!!e})):t,n.length>e)throw new Error("Too many signatures");return n.length===e}function rL(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function nL(e){return function(t){try{return e({output:t}),!0}catch(e){return!1}}}var iL=nL(GR.p2ms),aL=nL(GR.p2pk),oL=nL(GR.p2pkh),sL=nL(GR.p2wpkh),uL=nL(GR.p2wsh),cL=nL(GR.p2sh);function lL(e){return function(t){return!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}}function fL(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function hL(e,t){e.forEach((function(e){var r=!1,n=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;n=function(e){var t=e.finalScriptSig&&JR.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&JR.decompile(e.finalScriptWitness)||[];return t.concat(r).filter((function(e){return $r(e)&&JR.isCanonicalScriptSignature(e)})).map((function(e){return{signature:e}}))}(e)}else n=e.partialSig;if(n.forEach((function(e){var n=JR.signature.decode(e.signature).hashType,i=[];switch(n&XR.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case XR.Transaction.SIGHASH_ALL:break;case XR.Transaction.SIGHASH_SINGLE:case XR.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(t)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function dL(e,t,r){if(!CL(e,t))throw new Error("Can not ".concat(r," for this input with the key ").concat(e.toString("hex")))}function pL(e,t){var r=KR.reverseBuffer(pr.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function vL(e,t){return function(r,n,i,a){var o=e({redeem:{output:i}}).output;if(!n.equals(o))throw new Error("".concat(t," for ").concat(a," #").concat(r," doesn't match the scriptPubKey in the prevout"))}}var yL=vL(GR.p2sh,"Redeem script"),gL=vL(GR.p2wsh,"Witness script");function bL(e,t,r,n){if(!r.every(rL))throw new Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;var i,a=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,a=!1):i=n.__TX.clone(),EL(r,i,n,a),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function mL(e,t,r,n,i,a){var o=ML(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return tL(1,e.partialSig);case"multisig":var n=GR.p2ms({output:t});return tL(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,r,o))throw new Error("Can not finalize input #".concat(e));return function(e,t,r,n,i,a){var o,s,u=function(e,t,r){var n;switch(t){case"multisig":var i=function(e,t){return GR.p2ms({output:e}).pubkeys.map((function(e){return(t.filter((function(t){return t.pubkey.equals(e)}))[0]||{}).signature})).filter((function(e){return!!e}))}(e,r);n=GR.p2ms({output:e,signatures:i});break;case"pubkey":n=GR.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=GR.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=GR.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=a?GR.p2wsh({redeem:u}):null,l=i?GR.p2sh({redeem:c||u}):null;return n?(s=function(e){var t,r=pr.allocUnsafe(0);function n(e){var t=r.length,n=zR.encodingLength(e);r=pr.concat([r,pr.allocUnsafe(n)]),zR.encode(e,r,t)}function i(e){n(e.length),function(e){r=pr.concat([r,pr.from(e)])}(e)}return n((t=e).length),t.forEach(i),r}(c?c.witness:u.witness),l&&(o=l.input)):o=l?l.input:u.input,{finalScriptSig:o,finalScriptWitness:s}}(r,o,t.partialSig,n,i,a)}function wL(e,t,r,n,i){var a=xL(t,HR.checkForInput(e,t),n,!1,i),o=a.hash,s=a.sighashType;return dL(r,a.script,"sign"),{hash:o,sighashType:s}}function xL(e,t,r,n,i){var a,o,s=r.__TX,u=t.sighashType||XR.Transaction.SIGHASH_ALL;if(i&&i.indexOf(u)<0){var c=function(e){var t=e&XR.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case XR.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case XR.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case XR.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(u);throw new Error("Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ".concat(c))}if(t.nonWitnessUtxo){var l=IL(r,t,e),f=s.ins[e].hash,h=l.getHash();if(!f.equals(h))throw new Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));var d=s.ins[e].index;o=l.outs[d]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");o=t.witnessUtxo}var p=PL(o.script,e,"input",t.redeemScript,t.witnessScript),v=p.meaningfulScript,y=p.type;if(["p2sh-p2wsh","p2wsh"].indexOf(y)>=0)a=s.hashForWitnessV0(e,v,o.value,u);else if(sL(v)){var g=GR.p2pkh({hash:v.slice(2)}).output;a=s.hashForWitnessV0(e,g,o.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Input #".concat(e," has witnessUtxo but non-segwit script: ").concat(v.toString("hex")));n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=s.hashForSignature(e,v,u)}return{script:v,sighashType:u,hash:a}}function _L(e,t,r){var n=HR.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map((function(e){return e.masterFingerprint.equals(r.fingerprint)?e:void 0})).filter((function(e){return!!e}));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");var a=i.map((function(e){var t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}));return a}function kL(e){var t=0;function r(){var r=zR.decode(e,t);return t+=zR.decode.bytes,r}function n(){return function(r){return t+=r,e.slice(t-r,t)}(r())}return function(){for(var e=r(),t=[],i=0;i<e;i++)t.push(n());return t}()}function SL(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;var n=XR.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=e,a=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get:function(){var e=i.__NON_WITNESS_UTXO_BUF_CACHE[a],t=i.__NON_WITNESS_UTXO_TX_CACHE[a];if(void 0!==e)return e;var r=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[a]=r,r},set:function(e){i.__NON_WITNESS_UTXO_BUF_CACHE[a]=e}})}function EL(e,t,r,n){var i=0;e.forEach((function(e,a){if(n&&e.finalScriptSig&&(t.ins[a].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[a].witness=kL(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){var o=IL(r,e,a),s=t.ins[a].index,u=o.outs[s];i+=u.value}}));var a=t.outs.reduce((function(e,t){return e+t.value}),0),o=i-a;if(o<0)throw new Error("Outputs are spending more than Inputs");var s=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/s)}function IL(e,t,r){var n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||SL(e,t,r),n[r]}function AL(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo)return IL(r,t,e).outs[r.__TX.ins[e].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function TL(e){return 33===e.length&&JR.isCanonicalPubKey(e)}function PL(e,t,r,n,i){var a,o=cL(e),s=o&&n&&uL(n),u=uL(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((u||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return s?(a=i,yL(t,e,n,r),gL(t,n,i,r),OL(a)):u?(a=i,gL(t,e,i,r),OL(a)):o?(a=n,yL(t,e,n,r)):a=e,{meaningfulScript:a,type:s?"p2sh-p2wsh":o?"p2sh":u?"p2wsh":"raw"}}function OL(e){if(sL(e)||cL(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function CL(e,t){var r=qR.hash160(e),n=JR.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((function(t){return"number"!=typeof t&&(t.equals(e)||t.equals(r))}))}function ML(e){return sL(e)?"witnesspubkeyhash":oL(e)?"pubkeyhash":iL(e)?"multisig":aL(e)?"pubkey":"nonstandard"}function NL(e){return E(Array(e).keys())}var RL={},LL={},jL={},DL={};Object.defineProperty(DL,"__esModule",{value:!0});var BL=GP,UL=GP;function FL(e){return e===UL.OPS.OP_0||BL.isCanonicalScriptSignature(e)}function zL(e,t){var r=BL.decompile(e);return!(r.length<2)&&r[0]===UL.OPS.OP_0&&(t?r.slice(1).every(FL):r.slice(1).every(BL.isCanonicalScriptSignature))}DL.check=zL,zL.toJSON=function(){return"multisig input"};var HL={};Object.defineProperty(HL,"__esModule",{value:!0});var VL=GP,KL=GP,qL=$P,WL=KL.OPS.OP_RESERVED;function GL(e,t){var r=VL.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==KL.OPS.OP_CHECKMULTISIG)return!1;if(!qL.Number(r[0]))return!1;if(!qL.Number(r[r.length-2]))return!1;var n=r[0]-WL,i=r[r.length-2]-WL;return!(n<=0)&&(!(i>16)&&(!(n>i)&&(i===r.length-3&&(!!t||r.slice(1,-2).every(VL.isCanonicalPubKey)))))}HL.check=GL,GL.toJSON=function(){return"multi-sig output"},Object.defineProperty(jL,"__esModule",{value:!0});var JL=DL;jL.input=JL;var XL=HL;jL.output=XL;var $L={};Object.defineProperty($L,"__esModule",{value:!0});var YL=GP,ZL=YL.OPS;function QL(e){var t=YL.compile(e);return t.length>1&&t[0]===ZL.OP_RETURN}$L.check=QL,QL.toJSON=function(){return"null data output"};var ej={check:QL};$L.output=ej;var tj={},rj={};Object.defineProperty(rj,"__esModule",{value:!0});var nj=GP;function ij(e){var t=nj.decompile(e);return 1===t.length&&nj.isCanonicalScriptSignature(t[0])}rj.check=ij,ij.toJSON=function(){return"pubKey input"};var aj={};Object.defineProperty(aj,"__esModule",{value:!0});var oj=GP,sj=GP;function uj(e){var t=oj.decompile(e);return 2===t.length&&oj.isCanonicalPubKey(t[0])&&t[1]===sj.OPS.OP_CHECKSIG}aj.check=uj,uj.toJSON=function(){return"pubKey output"},Object.defineProperty(tj,"__esModule",{value:!0});var cj=rj;tj.input=cj;var lj=aj;tj.output=lj;var fj={},hj={};Object.defineProperty(hj,"__esModule",{value:!0});var dj=GP;function pj(e){var t=dj.decompile(e);return 2===t.length&&dj.isCanonicalScriptSignature(t[0])&&dj.isCanonicalPubKey(t[1])}hj.check=pj,pj.toJSON=function(){return"pubKeyHash input"};var vj={};Object.defineProperty(vj,"__esModule",{value:!0});var yj=GP,gj=GP;function bj(e){var t=yj.compile(e);return 25===t.length&&t[0]===gj.OPS.OP_DUP&&t[1]===gj.OPS.OP_HASH160&&20===t[2]&&t[23]===gj.OPS.OP_EQUALVERIFY&&t[24]===gj.OPS.OP_CHECKSIG}vj.check=bj,bj.toJSON=function(){return"pubKeyHash output"},Object.defineProperty(fj,"__esModule",{value:!0});var mj=hj;fj.input=mj;var wj=vj;fj.output=wj;var xj={},_j={},kj={};Object.defineProperty(kj,"__esModule",{value:!0});var Sj=GP,Ej=GP;function Ij(e){var t=Sj.compile(e);return 22===t.length&&t[0]===Ej.OPS.OP_0&&20===t[1]}kj.check=Ij,Ij.toJSON=function(){return"Witness pubKeyHash output"};var Aj={};Object.defineProperty(Aj,"__esModule",{value:!0});var Tj=GP,Pj=GP;function Oj(e){var t=Tj.compile(e);return 34===t.length&&t[0]===Pj.OPS.OP_0&&32===t[1]}Aj.check=Oj,Oj.toJSON=function(){return"Witness scriptHash output"},Object.defineProperty(_j,"__esModule",{value:!0});var Cj=GP,Mj=jL,Nj=tj,Rj=fj,Lj=kj,jj=Aj;function Dj(e,t){var r=Cj.decompile(e);if(r.length<1)return!1;var n=r[r.length-1];if(!$r(n))return!1;var i=Cj.decompile(Cj.compile(r.slice(0,-1))),a=Cj.decompile(n);return!!a&&!!Cj.isPushOnly(i)&&(1===r.length?jj.check(a)||Lj.check(a):!(!Rj.input.check(i)||!Rj.output.check(a))||!(!Mj.input.check(i,t)||!Mj.output.check(a))||!(!Nj.input.check(i)||!Nj.output.check(a)))}_j.check=Dj,Dj.toJSON=function(){return"scriptHash input"};var Bj={};Object.defineProperty(Bj,"__esModule",{value:!0});var Uj=GP,Fj=GP;function zj(e){var t=Uj.compile(e);return 23===t.length&&t[0]===Fj.OPS.OP_HASH160&&20===t[1]&&t[22]===Fj.OPS.OP_EQUAL}Bj.check=zj,zj.toJSON=function(){return"scriptHash output"},Object.defineProperty(xj,"__esModule",{value:!0});var Hj=_j;xj.input=Hj;var Vj=Bj;xj.output=Vj;var Kj={},qj={};Object.defineProperty(qj,"__esModule",{value:!0});var Wj=GP,Gj=GP,Jj=$P,Xj=_P,$j=pr.from("aa21a9ed","hex");function Yj(e){var t=Wj.compile(e);return t.length>37&&t[0]===Gj.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals($j)}qj.check=Yj,Yj.toJSON=function(){return"Witness commitment output"},qj.encode=function(e){Xj(Jj.Hash256bit,e);var t=pr.allocUnsafe(36);return $j.copy(t,0),e.copy(t,4),Wj.compile([Gj.OPS.OP_RETURN,t])},qj.decode=function(e){return Xj(Yj,e),Wj.decompile(e)[1].slice(4,36)},Object.defineProperty(Kj,"__esModule",{value:!0});var Zj=qj;Kj.output=Zj;var Qj={},eD={};Object.defineProperty(eD,"__esModule",{value:!0});var tD=GP;function rD(e){var t=tD.decompile(e);return 2===t.length&&tD.isCanonicalScriptSignature(t[0])&&function(e){return tD.isCanonicalPubKey(e)&&33===e.length}(t[1])}eD.check=rD,rD.toJSON=function(){return"witnessPubKeyHash input"},Object.defineProperty(Qj,"__esModule",{value:!0});var nD=eD;Qj.input=nD;var iD=kj;Qj.output=iD;var aD={},oD={};Object.defineProperty(oD,"__esModule",{value:!0});var sD=GP,uD=_P,cD=jL,lD=tj,fD=fj;function hD(e,t){if(uD(uD.Array,e),e.length<1)return!1;var r=e[e.length-1];if(!$r(r))return!1;var n=sD.decompile(r);if(!n||0===n.length)return!1;var i=sD.compile(e.slice(0,-1));return!(!fD.input.check(i)||!fD.output.check(n))||!(!cD.input.check(i,t)||!cD.output.check(n))||!(!lD.input.check(i)||!lD.output.check(n))}oD.check=hD,hD.toJSON=function(){return"witnessScriptHash input"},Object.defineProperty(aD,"__esModule",{value:!0});var dD=oD;aD.input=dD;var pD=Aj;aD.output=pD,Object.defineProperty(LL,"__esModule",{value:!0});var vD=GP,yD=jL,gD=$L,bD=tj,mD=fj,wD=xj,xD=Kj,_D=Qj,kD=aD,SD={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};LL.types=SD,LL.output=function(e){if(_D.output.check(e))return SD.P2WPKH;if(kD.output.check(e))return SD.P2WSH;if(mD.output.check(e))return SD.P2PKH;if(wD.output.check(e))return SD.P2SH;var t=vD.decompile(e);if(!t)throw new TypeError("Invalid script");return yD.output.check(t)?SD.P2MS:bD.output.check(t)?SD.P2PK:xD.output.check(t)?SD.WITNESS_COMMITMENT:gD.output.check(t)?SD.NULLDATA:SD.NONSTANDARD},LL.input=function(e,t){var r=vD.decompile(e);if(!r)throw new TypeError("Invalid script");return mD.input.check(r)?SD.P2PKH:wD.input.check(r,t)?SD.P2SH:yD.input.check(r,t)?SD.P2MS:bD.input.check(r)?SD.P2PK:SD.NONSTANDARD},LL.witness=function(e,t){var r=vD.decompile(e);if(!r)throw new TypeError("Invalid script");return _D.input.check(r)?SD.P2WPKH:kD.input.check(r,t)?SD.P2WSH:SD.NONSTANDARD},Object.defineProperty(RL,"__esModule",{value:!0});var ED=VP,ID=fM,AD=LL,TD=UO,PD=YC,OD=KP,CD=qP,MD=GP,ND=GP,RD=_M,LD=$P,jD=_P,DD=AD.types,BD=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function UD(e,t,r){try{jD(e,t)}catch(e){throw new Error(r)}}var FD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OD.bitcoin,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;a(this,e),this.network=t,this.maximumFeeRate=r,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new RD.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}return s(e,[{key:"setLowR",value:function(e){return jD(jD.maybe(jD.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}},{key:"setLockTime",value:function(e){if(jD(LD.UInt32,e),this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return void 0!==e}))})))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}},{key:"setVersion",value:function(e){jD(LD.UInt32,e),this.__TX.version=e}},{key:"addInput",value:function(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var i,a;if("string"==typeof(a=e)||a instanceof String)e=ID.reverseBuffer(pr.from(e,"hex"));else if(function(e){return e instanceof RD.Transaction}(e)){var o=e.outs[t];n=o.script,i=o.value,e=e.getHash(!1)}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}},{key:"addOutput",value:function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=ED.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(e,t,n,i,a,o){!function(e){var t,r=e.input,n=e.ourPubKey,i=e.keyPair,a=e.signatureHash,o=e.hashType,s=e.useLowR,u=!1,c=C(r.pubkeys.entries());try{for(c.s();!(t=c.n()).done;){var l=k(t.value,2),f=l[0],h=l[1];if(n.equals(h)){if(r.signatures[f])throw new Error("Signature already exists");if(33!==n.length&&r.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var d=i.sign(a,s);r.signatures[f]=MD.signature.encode(d,o),u=!0}}}catch(e){c.e(e)}finally{c.f()}if(!u)throw new Error("Key pair cannot sign for this input")}(function(e,t,n,i,a,o,s,u,c,l,f){var h;if("number"==typeof a)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),h=a;else{var d;if("object"!=r(a))throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!BD.has(t.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(t.prevOutScriptType,'"'));UD(jD.Number,t.vin,"sign must include vin parameter as Number (input index)"),UD(LD.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),UD(jD.maybe(jD.Number),t.hashType,"sign hashType parameter must be a number");var r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pkh: ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),UD(jD.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pk: ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),UD(jD.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2wpkh: ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),UD(LD.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2ms: ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),UD(jD.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2sh-p2wpkh: ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),UD(LD.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));UD(jD.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),UD(jD.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),UD(jD.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));UD(jD.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),UD(jD.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),UD(LD.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));UD(jD.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),UD(jD.Buffer,t.redeemScript,"".concat(n," requires witnessScript")),UD(LD.Satoshi,t.witnessValue,"".concat(n," requires witnessScript"))}}(t,a),h=(d=a).vin,o=d.keyPair,s=d.redeemScript,u=d.hashType,c=d.witnessValue,l=d.witnessScript}if(void 0===o)throw new Error("sign requires keypair");if(o.network&&o.network!==e)throw new TypeError("Inconsistent network");if(!t[h])throw new Error("No input at index: "+h);if(n(u=u||RD.Transaction.SIGHASH_ALL))throw new Error("Transaction needs outputs");var p=t[h];if(void 0!==p.redeemScript&&s&&!p.redeemScript.equals(s))throw new Error("Inconsistent redeemScript");var v=o.publicKey||o.getPublicKey&&o.getPublicKey();if(!KD(p)){if(void 0!==c){if(void 0!==p.value&&p.value!==c)throw new Error("Input did not match witnessValue");jD(LD.Satoshi,c),p.value=c}if(!KD(p)){var y=function(e,t,r,n){if(r&&n){var i=CD.p2wsh({redeem:{output:n}}),a=CD.p2wsh({output:r}),o=CD.p2sh({redeem:{output:r}}),s=CD.p2sh({redeem:i});if(!i.hash.equals(a.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(s.hash))throw new Error("Redeem script inconsistent with prevOutScript");var u=HD(i.redeem.output,t);if(!u.pubkeys)throw new Error(u.type+" not supported as witnessScript ("+MD.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(u.signatures=e.signatures);var c=n;if(u.type===DD.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:DD.P2WSH,witnessScript:n,witnessScriptType:u.type,prevOutType:DD.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:c,signType:u.type,pubkeys:u.pubkeys,signatures:u.signatures,maxSignatures:u.maxSignatures}}if(r){var l=CD.p2sh({redeem:{output:r}});if(e.prevOutScript){var f;try{f=CD.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!l.hash.equals(f.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var h=HD(l.redeem.output,t);if(!h.pubkeys)throw new Error(h.type+" not supported as redeemScript ("+MD.toASM(r)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(h.signatures=e.signatures);var d=r;return h.type===DD.P2WPKH&&(d=CD.p2pkh({pubkey:h.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:h.type,prevOutType:DD.P2SH,prevOutScript:l.output,hasWitness:h.type===DD.P2WPKH,signScript:d,signType:h.type,pubkeys:h.pubkeys,signatures:h.signatures,maxSignatures:h.maxSignatures}}if(n){var p=CD.p2wsh({redeem:{output:n}});if(e.prevOutScript){var v=CD.p2wsh({output:e.prevOutScript});if(!p.hash.equals(v.hash))throw new Error("Witness script inconsistent with prevOutScript")}var y=HD(p.redeem.output,t);if(!y.pubkeys)throw new Error(y.type+" not supported as witnessScript ("+MD.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(y.signatures=e.signatures);var g=n;if(y.type===DD.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:y.type,prevOutType:DD.P2WSH,prevOutScript:p.output,hasWitness:!0,signScript:g,signType:y.type,pubkeys:y.pubkeys,signatures:y.signatures,maxSignatures:y.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===DD.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===DD.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");var b=HD(e.prevOutScript,t);if(!b.pubkeys)throw new Error(b.type+" not supported ("+MD.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(b.signatures=e.signatures);var m=e.prevOutScript;return b.type===DD.P2WPKH&&(m=CD.p2pkh({pubkey:b.pubkeys[0]}).output),{prevOutType:b.type,prevOutScript:e.prevOutScript,hasWitness:b.type===DD.P2WPKH,signScript:m,signType:b.type,pubkeys:b.pubkeys,signatures:b.signatures,maxSignatures:b.maxSignatures}}var w=CD.p2pkh({pubkey:t}).output;return{prevOutType:DD.P2PKH,prevOutScript:w,hasWitness:!1,signScript:w,signType:DD.P2PKH,pubkeys:[t],signatures:[void 0]}}(p,v,s,l);Object.assign(p,y)}if(!KD(p))throw Error(p.prevOutType+" not supported")}return{input:p,ourPubKey:v,keyPair:o,signatureHash:p.hasWitness?i.hashForWitnessV0(h,p.signScript,p.value,u):i.hashForSignature(h,p.signScript,u),hashType:u,useLowR:!!f}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,n,i,a,o,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(e,t,r){if(RD.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=zD(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var a;if(!i.pubkeys&&!i.signatures){var o=HD(r.prevOutScript);o.pubkeys&&(i.pubkeys=o.pubkeys,i.signatures=o.signatures),a=o.type}i.prevOutScript=r.prevOutScript,i.prevOutType=a||AD.output(r.prevOutScript)}var s=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[s]=i,this.__PREV_TX_SET[n]=!0,s}},{key:"__build",value:function(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var t=this.__TX.clone();if(this.__INPUTS.forEach((function(r,n){if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");var i=VD(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===DD.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every((function(e){return!e.signatures||e.signatures.every((function(e){return!e||0!=(qD(e)&RD.Transaction.SIGHASH_ANYONECANPAY)}))}))}},{key:"__needsOutputs",value:function(e){return e===RD.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return!!e&&!(qD(e)&RD.Transaction.SIGHASH_NONE)}))}))}},{key:"__canModifyOutputs",value:function(){var e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&qD(r);return n===RD.Transaction.SIGHASH_NONE||n===RD.Transaction.SIGHASH_SINGLE&&e<=t}))}))}},{key:"__overMaximumFees",value:function(e){var t=this.__INPUTS.reduce((function(e,t){return e+(t.value>>>0)}),0),r=this.__TX.outs.reduce((function(e,t){return e+t.value}),0);return(t-r)/e>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(t,r){var n=new e(r);return n.setVersion(t.version),n.setLockTime(t.locktime),t.outs.forEach((function(e){n.addOutput(e.script,e.value)})),t.ins.forEach((function(e){n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),n.__INPUTS.forEach((function(e,r){!function(e,t,r){if(e.redeemScriptType===DD.P2MS&&e.redeemScript&&e.pubkeys.length!==e.signatures.length){var n=e.signatures.concat();e.signatures=e.pubkeys.map((function(i){var a,o=PD.fromPublicKey(i);return n.some((function(i,s){if(!i)return!1;var u=MD.signature.decode(i),c=t.hashForSignature(r,e.redeemScript,u.hashType);return!!o.verify(c,u.signature)&&(n[s]=void 0,a=i,!0)})),a}))}}(e,t,r)})),n}}]),e}();function zD(e,t,r,n){if(0===e.length&&0===t.length)return{};if(!r){var i=AD.input(e,!0),a=AD.witness(t,!0);i===DD.NONSTANDARD&&(i=void 0),a===DD.NONSTANDARD&&(a=void 0),r=i||a}switch(r){case DD.P2WPKH:var o=CD.p2wpkh({witness:t}),s=o.output,u=o.pubkey,c=o.signature;return{prevOutScript:s,prevOutType:DD.P2WPKH,pubkeys:[u],signatures:[c]};case DD.P2PKH:var l=CD.p2pkh({input:e}),f=l.output,h=l.pubkey,d=l.signature;return{prevOutScript:f,prevOutType:DD.P2PKH,pubkeys:[h],signatures:[d]};case DD.P2PK:var p=CD.p2pk({input:e}).signature;return{prevOutType:DD.P2PK,pubkeys:[void 0],signatures:[p]};case DD.P2MS:var v=CD.p2ms({input:e,output:n},{allowIncomplete:!0}),y=v.m,g=v.pubkeys,b=v.signatures;return{prevOutType:DD.P2MS,pubkeys:g,signatures:b,maxSignatures:y}}if(r===DD.P2SH){var m=CD.p2sh({input:e,witness:t}),w=m.output,x=m.redeem,_=AD.output(x.output),k=zD(x.input,x.witness,_,x.output);return k.prevOutType?{prevOutScript:w,prevOutType:DD.P2SH,redeemScript:x.output,redeemScriptType:k.prevOutType,witnessScript:k.witnessScript,witnessScriptType:k.witnessScriptType,pubkeys:k.pubkeys,signatures:k.signatures}:{}}if(r===DD.P2WSH){var S,E=CD.p2wsh({input:e,witness:t}),I=E.output,A=E.redeem,T=AD.output(A.output);return(S=T===DD.P2WPKH?zD(A.input,A.witness,T):zD(MD.compile(A.witness),[],T,A.output)).prevOutType?{prevOutScript:I,prevOutType:DD.P2WSH,witnessScript:A.output,witnessScriptType:S.prevOutType,pubkeys:S.pubkeys,signatures:S.signatures}:{}}return{prevOutType:DD.NONSTANDARD,prevOutScript:e}}function HD(e,t){jD(LD.Buffer,e);var r=AD.output(e);switch(r){case DD.P2PKH:if(!t)return{type:r};var n=CD.p2pkh({output:e}).hash,i=TD.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case DD.P2WPKH:if(!t)return{type:r};var a=CD.p2wpkh({output:e}).hash,o=TD.hash160(t);return a.equals(o)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case DD.P2PK:return{type:r,pubkeys:[CD.p2pk({output:e}).pubkey],signatures:[void 0]};case DD.P2MS:var s=CD.p2ms({output:e});return{type:r,pubkeys:s.pubkeys,signatures:s.pubkeys.map((function(){})),maxSignatures:s.m}}return{type:r}}function VD(e,t,r){var n=t.pubkeys||[],i=t.signatures||[];switch(e){case DD.P2PKH:if(0===n.length)break;if(0===i.length)break;return CD.p2pkh({pubkey:n[0],signature:i[0]});case DD.P2WPKH:if(0===n.length)break;if(0===i.length)break;return CD.p2wpkh({pubkey:n[0],signature:i[0]});case DD.P2PK:if(0===n.length)break;if(0===i.length)break;return CD.p2pk({signature:i[0]});case DD.P2MS:var a=t.maxSignatures;i=r?i.map((function(e){return e||ND.OPS.OP_0})):i.filter((function(e){return e}));var o=!r||a===i.length;return CD.p2ms({m:a,pubkeys:n,signatures:i},{allowIncomplete:r,validate:o});case DD.P2SH:var s=VD(t.redeemScriptType,t,r);if(!s)return;return CD.p2sh({redeem:{output:s.output||t.redeemScript,input:s.input,witness:s.witness}});case DD.P2WSH:var u=VD(t.witnessScriptType,t,r);if(!u)return;return CD.p2wsh({redeem:{output:t.witnessScript,input:u.input,witness:u.witness}})}}function KD(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function qD(e){return e.readUInt8(e.length-1)}RL.TransactionBuilder=FD,Object.defineProperty($_,"__esModule",{value:!0});var WD=Y_;$_.bip32=WD;var GD=VP;$_.address=GD;var JD=UO;$_.crypto=JD;var XD=YC;$_.ECPair=XD;var $D=KP,YD=$_.networks=$D,ZD=qP,QD=$_.payments=ZD,eB=GP;$_.script=eB;var tB=lM;$_.Block=tB.Block;var rB=JM;$_.Psbt=rB.Psbt;var nB=GP;$_.opcodes=nB.OPS;var iB=_M;$_.Transaction=iB.Transaction;var aB=RL;$_.TransactionBuilder=aB.TransactionBuilder;var oB={exports:{}};function sB(e,r){var n=function(e){for(var r=function(e){var r=x_.from(t(t({},e),{},{crv:"K-256"}),"jwk").toString("blk","public"),n=J_.publicKeyConvert(X_.from(r,"hex"),!0);return X_.from(n).toString("hex")}(e),n=X_.from(r,"hex"),i=32-n.length;i>0;)n=X_.concat([X_.from("00","hex"),n]),i--;return n}(e.publicKeyJwk),i="";switch(r.code){case $i.Bitcoin:case $i.Mocknet:case $i.Testnet:i=function(e,t){return QD.p2pkh({pubkey:e,network:YD[t.code]}).address}(n,r);break;case $i.Ethmain:case $i.Ethropst:case $i.Ethrinkeby:i=function(e,t){var r=e.toString("hex"),n=new Sb.ec("secp256k1").keyFromPublic(r,"hex").getPublic().encode("hex").slice(2);return"0x".concat(oB.exports.keccak256(Buffer.from(n,"hex")).slice(24).toString())}(n);break;default:throw new wa("deriveIssuingAddressFromPublicKey","".concat(Hy," - ").concat(Uf.i18n.getText("errors","deriveIssuingAddressFromPublicKey")))}return i}function uB(e,t){if(e!==t)throw new wa("compareHashes",ha("errors","ensureHashesEqual"));return!0}function cB(e,t){if(e!==t)throw new wa("checkMerkleRoot",ha("errors","ensureMerkleRootEqual"));return!0}function lB(e,t,r){var n="",i=function(e,t){var r=null;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&n.toLowerCase()===t.toLowerCase()&&(r=n);return e[r]}(e,t),a=Lf(r);if(i?(i.created&&a<=i.created&&(n="invalidIssuingAddressCreationTime"),i.revoked&&a>=i.revoked&&(n="invalidIssuingAddressRevoked"),i.expires&&a>=i.expires&&(n="invalidIssuingAddressExpired")):n="invalidIssuingAddressUnknown",n)throw new wa("checkAuthenticity",ha("errors",n))}function fB(e){var t=e.targetHash,r=e.merkleRoot;try{var n=e.proof||e.path;if(n)for(var i in n){var a=n[i],o=void 0;if(void 0!==a.left)o=Ly("".concat(a.left).concat(t)),t=Ry(o);else{if(void 0===a.right)throw new wa("checkReceipt","Trigger catch error.");o=Ly("".concat(t).concat(a.right)),t=Ry(o)}}}catch(e){throw new wa("checkReceipt",ha("errors","ensureValidReceipt"))}if(t!==r)throw new wa("checkReceipt",ha("errors","invalidMerkleReceipt"))}function hB(e){if("string"==typeof e&&e.length>0)return e;throw new wa("getTransactionId",ha("errors","isTransactionIdValid"))}!function(e){!function(){var t="input is invalid type",n="object"==("undefined"==typeof window?"undefined":r(window)),i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var a=!n&&"object"==("undefined"==typeof self?"undefined":r(self));!i.JS_SHA3_NO_NODE_JS&&"object"==r(oo)&&oo.versions&&oo.versions.node?i=$t:a&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&e.exports,s=!i.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),c=[4,1024,262144,67108864],l=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],d=[128,256],p=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};!i.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==r(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var y=function(e,t,r){return function(n){return new C(e,t,e).update(n)[r]()}},g=function(e,t,r){return function(n,i){return new C(e,t,i).update(n)[r]()}},b=function(e,t,r){return function(t,n,i,a){return k["cshake"+e].update(t,n,i,a)[r]()}},m=function(e,t,r){return function(t,n,i,a){return k["kmac"+e].update(t,n,i,a)[r]()}},w=function(e,t,r,n){for(var i=0;i<p.length;++i){var a=p[i];e[a]=t(r,n,a)}return e},x=function(e,t){var r=y(e,t,"hex");return r.create=function(){return new C(e,t,e)},r.update=function(e){return r.create().update(e)},w(r,y,e,t)},_=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:x},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:x},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var r=g(e,t,"hex");return r.create=function(r){return new C(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},w(r,g,e,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(e,t){var r=v[e],n=b(e,0,"hex");return n.create=function(n,i,a){return i||a?new C(e,t,n).bytepad([i,a],r):k["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},w(n,b,e,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(e,t){var r=v[e],n=m(e,0,"hex");return n.create=function(n,i,a){return new M(e,t,i).bytepad(["KMAC",a],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},w(n,m,e,t)}}],k={},S=[],E=0;E<_.length;++E)for(var I=_[E],A=I.bits,T=0;T<A.length;++T){var P=I.name+"_"+A[T];if(S.push(P),k[P]=I.createMethod(A[T],I.padding),"sha3"!==I.name){var O=I.name+A[T];S.push(O),k[O]=k[P]}}function C(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function M(e,t,r){C.call(this,e,t,r)}C.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var n,i=r(e);if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);n=!0}for(var a,o,u=this.blocks,c=this.byteCount,f=e.length,h=this.blockCount,d=0,p=this.s;d<f;){if(this.reset)for(this.reset=!1,u[0]=this.block,a=1;a<h+1;++a)u[a]=0;if(n)for(a=this.start;d<f&&a<c;++d)u[a>>2]|=e[d]<<l[3&a++];else for(a=this.start;d<f&&a<c;++d)(o=e.charCodeAt(d))<128?u[a>>2]|=o<<l[3&a++]:o<2048?(u[a>>2]|=(192|o>>6)<<l[3&a++],u[a>>2]|=(128|63&o)<<l[3&a++]):o<55296||o>=57344?(u[a>>2]|=(224|o>>12)<<l[3&a++],u[a>>2]|=(128|o>>6&63)<<l[3&a++],u[a>>2]|=(128|63&o)<<l[3&a++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),u[a>>2]|=(240|o>>18)<<l[3&a++],u[a>>2]|=(128|o>>12&63)<<l[3&a++],u[a>>2]|=(128|o>>6&63)<<l[3&a++],u[a>>2]|=(128|63&o)<<l[3&a++]);if(this.lastByteIndex=a,a>=c){for(this.start=a-c,this.block=u[h],a=0;a<h;++a)p[a]^=u[a];N(p),this.reset=!0}else this.start=a}return this},C.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},C.prototype.encodeString=function(e){var n,i=r(e);if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);n=!0}var a=0,o=e.length;if(n)a=o;else for(var u=0;u<e.length;++u){var c=e.charCodeAt(u);c<128?a+=1:c<2048?a+=2:c<55296||c>=57344?a+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++u)),a+=4)}return a+=this.encode(8*a),this.update(e),a},C.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,a=[];return a.length=i,this.update(a),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];N(n)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,a=0,o=0,s="";o<n;){for(a=0;a<t&&o<n;++a,++o)e=r[a],s+=u[e>>4&15]+u[15&e]+u[e>>12&15]+u[e>>8&15]+u[e>>20&15]+u[e>>16&15]+u[e>>28&15]+u[e>>24&15];o%t==0&&(N(r),a=0)}return i&&(e=r[a],s+=u[e>>4&15]+u[15&e],i>1&&(s+=u[e>>12&15]+u[e>>8&15]),i>2&&(s+=u[e>>20&15]+u[e>>16&15])),s},C.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,a=0,o=0,s=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(e);o<n;){for(a=0;a<t&&o<n;++a,++o)u[o]=r[a];o%t==0&&N(r)}return i&&(u[a]=r[a],e=e.slice(0,s)),e},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,a=this.extraBytes,o=0,s=0,u=[];s<i;){for(o=0;o<r&&s<i;++o,++s)e=s<<2,t=n[o],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;s%r==0&&N(n)}return a&&(e=s<<2,t=n[o],u[e]=255&t,a>1&&(u[e+1]=t>>8&255),a>2&&(u[e+2]=t>>16&255)),u},M.prototype=new C,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var N=function(e){var t,r,n,i,a,o,s,u,c,l,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O,C,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$,Y,Z,Q,ee,te,re,ne,ie,ae,oe,se,ue,ce,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],a=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(d=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|s>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(s<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(u<<1|c>>>31),r=a^(c<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(l<<1|h>>>31),r=s^(h<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(d<<1|p>>>31),r=c^(p<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|a>>>31),r=h^(a<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,v=e[0],y=e[1],G=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,se=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,V=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,L=e[2]<<1|e[3]>>>31,j=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,X=e[22]<<10|e[23]>>>22,$=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,M=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,D=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,m=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,R=e[44]<<29|e[45]>>>3,E=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,U=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,x=e[36]<<21|e[37]>>>11,_=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,q=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,A=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,ae=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,k=e[48]<<14|e[49]>>>18,S=e[49]<<14|e[48]>>>18,e[0]=v^~g&m,e[1]=y^~b&w,e[10]=E^~A&P,e[11]=I^~T&O,e[20]=L^~D&U,e[21]=j^~B&F,e[30]=q^~G&X,e[31]=W^~J&$,e[40]=te^~ne&ae,e[41]=re^~ie&oe,e[2]=g^~m&x,e[3]=b^~w&_,e[12]=A^~P&C,e[13]=T^~O&M,e[22]=D^~U&z,e[23]=B^~F&H,e[32]=G^~X&Y,e[33]=J^~$&Z,e[42]=ne^~ae&se,e[43]=ie^~oe&ue,e[4]=m^~x&k,e[5]=w^~_&S,e[14]=P^~C&N,e[15]=O^~M&R,e[24]=U^~z&V,e[25]=F^~H&K,e[34]=X^~Y&Q,e[35]=$^~Z&ee,e[44]=ae^~se&ce,e[45]=oe^~ue&le,e[6]=x^~k&v,e[7]=_^~S&y,e[16]=C^~N&E,e[17]=M^~R&I,e[26]=z^~V&L,e[27]=H^~K&j,e[36]=Y^~Q&q,e[37]=Z^~ee&W,e[46]=se^~ce&te,e[47]=ue^~le&re,e[8]=k^~v&g,e[9]=S^~y&b,e[18]=N^~E&A,e[19]=R^~I&T,e[28]=V^~L&D,e[29]=K^~j&B,e[38]=Q^~q&G,e[39]=ee^~W&J,e[48]=ce^~te&ne,e[49]=le^~re&ie,e[0]^=f[n],e[1]^=f[n+1]};if(o)e.exports=k;else for(E=0;E<S.length;++E)i[S[E]]=k[S[E]]}()}(oB);var dB={};!function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function a(e){var n="[A-Za-z]",i="[0-9]",a=t(i,"[A-Fa-f]"),o=r(r("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+r("%[89A-Fa-f]"+a+"%"+a+a)+"|"+r("%"+a+a)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",l=t(n,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(n+t(n,i,"[\\+\\-\\.]")+"*"),r(r(o+"|"+t(l,s,"[\\:]"))+"*");var f=r(r("25[0-5]")+"|"+r("2[0-4]"+i)+"|"+r("1"+i+i)+"|"+r("0?[1-9]"+i)+"|0?0?"+i),h=r(f+"\\."+f+"\\."+f+"\\."+f),d=r(a+"{1,4}"),p=r(r(d+"\\:"+d)+"|"+h),v=r(r(d+"\\:")+"{6}"+p),y=r("\\:\\:"+r(d+"\\:")+"{5}"+p),g=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+p),b=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+p),m=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+p),w=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),x=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),_=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),k=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=r([v,y,g,b,m,w,x,_,k].join("|")),E=r(r(l+"|"+o)+"+");r("[vV]"+a+"+\\."+t(l,s,"[\\:]")+"+"),r(r(o+"|"+t(l,s))+"*");var I=r(o+"|"+t(l,s,"[\\:\\@]"));return r(r(o+"|"+t(l,s,"[\\@]"))+"+"),r(r(I+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",n,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,s),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,u),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+a+"{2})")+"("+E+")")+"?\\]?$")}}var o=a(!1),s=a(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=36,f=/^xn--/,h=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,y=String.fromCharCode;function g(e){throw new RangeError(p[e])}function b(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(d,".")).split("."),t).join(".")}function m(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),r--)}else t.push(i)}return t}var w=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:l},x=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var n=0;for(e=r?v(e/700):e>>1,e+=v(e/t);e>455;n+=l)e=v(e/35);return v(n+36*e/(e+38))},k=function(e){var t=[],r=e.length,n=0,i=128,a=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var s=0;s<o;++s)e.charCodeAt(s)>=128&&g("not-basic"),t.push(e.charCodeAt(s));for(var u=o>0?o+1:0;u<r;){for(var f=n,h=1,d=l;;d+=l){u>=r&&g("invalid-input");var p=w(e.charCodeAt(u++));(p>=l||p>v((c-n)/h))&&g("overflow"),n+=p*h;var y=d<=a?1:d>=a+26?26:d-a;if(p<y)break;var b=l-y;h>v(c/b)&&g("overflow"),h*=b}var m=t.length+1;a=_(n-f,m,0==f),v(n/m)>c-i&&g("overflow"),i+=v(n/m),n%=m,t.splice(n++,0,i)}return String.fromCodePoint.apply(String,t)},S=function(e){var t=[],r=(e=m(e)).length,n=128,i=0,a=72,o=!0,s=!1,u=void 0;try{for(var f,h=e[Symbol.iterator]();!(o=(f=h.next()).done);o=!0){var d=f.value;d<128&&t.push(y(d))}}catch(e){s=!0,u=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}var p=t.length,b=p;for(p&&t.push("-");b<r;){var w=c,k=!0,S=!1,E=void 0;try{for(var I,A=e[Symbol.iterator]();!(k=(I=A.next()).done);k=!0){var T=I.value;T>=n&&T<w&&(w=T)}}catch(e){S=!0,E=e}finally{try{!k&&A.return&&A.return()}finally{if(S)throw E}}var P=b+1;w-n>v((c-i)/P)&&g("overflow"),i+=(w-n)*P,n=w;var O=!0,C=!1,M=void 0;try{for(var N,R=e[Symbol.iterator]();!(O=(N=R.next()).done);O=!0){var L=N.value;if(L<n&&++i>c&&g("overflow"),L==n){for(var j=i,D=l;;D+=l){var B=D<=a?1:D>=a+26?26:D-a;if(j<B)break;var U=j-B,F=l-B;t.push(y(x(B+U%F,0))),j=v(U/F)}t.push(y(x(j,0))),a=_(i,P,b==p),i=0,++b}}}catch(e){C=!0,M=e}finally{try{!O&&R.return&&R.return()}finally{if(C)throw M}}++i,++n}return t.join("")},E=function(e){return b(e,(function(e){return h.test(e)?"xn--"+S(e):e}))},I=function(e){return b(e,(function(e){return f.test(e)?k(e.slice(4).toLowerCase()):e}))},A={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var a=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&a)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var o=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,i)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function M(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(C).join("."):e}function N(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],a=n[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),s=u(o,2),c=s[0],l=s[1],f=l?l.split(":").map(C):[],h=c.split(":").map(C),d=t.IPV4ADDRESS.test(h[h.length-1]),p=d?7:8,v=h.length-p,y=Array(p),g=0;g<p;++g)y[g]=f[g]||h[v+g]||"";d&&(y[p-1]=M(y[p-1],t));var b=y.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],m=void 0;if(b&&b.length>1){var w=y.slice(0,b.index),x=y.slice(b.index+b.length);m=w.join(":")+"::"+x.join(":")}else m=y.join(":");return a&&(m+="%"+a),m}return e}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,L=void 0==="".match(/(){0}/)[1];function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(R);if(i){L?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=N(M(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var a=A[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||a&&a.unicodeSupport)O(r,n);else{if(r.host&&(t.domainHost||a&&a.domainHost))try{r.host=E(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,o)}a&&a.parse&&a.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function D(e,t){var r=!1!==t.iri?s:o,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(N(M(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var B=/^\.\.?\//,U=/^\/\.(\/|$)/,F=/^\/\.\.(\/|$)/,z=/^\/?(?:.|\n)*?(?=\/|$)/;function H(e){for(var t=[];e.length;)if(e.match(B))e=e.replace(B,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(F))e=e.replace(F,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(z);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:o,n=[],i=A[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?I(e.host):E(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=D(e,t);if(void 0!==a&&("suffix"!==t.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=H(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function K(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=j(V(e,r),r),t=j(V(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=H(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=H(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=H(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=H(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function q(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:o.PCT_ENCODED,P)}var W={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize};function J(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var X={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=J(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(J(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=u(r,2),i=n[0],a=n[1];e.path=i&&"/"!==i?i:void 0,e.query=a,e.resourceName=void 0}return e.fragment=void 0,e}},$={scheme:"wss",domainHost:X.domainHost,parse:X.parse,serialize:X.serialize},Y={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",ee=r(r("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+r("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+r("%"+Q+Q)),te=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),re=new RegExp(Z,"g"),ne=new RegExp(ee,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',te),"g"),ae=new RegExp(t("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ae;function se(e){var t=P(e);return t.match(re)?t:e}var ue={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,a={},o=r.query.split("&"),s=0,u=o.length;s<u;++s){var c=o[s].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),f=0,h=l.length;f<h;++f)n.push(l[f]);break;case"subject":r.subject=q(c[1],t);break;case"body":r.body=q(c[1],t);break;default:i=!0,a[q(c[0],t)]=q(c[1],t)}}i&&(r.headers=a)}r.query=void 0;for(var d=0,p=n.length;d<p;++d){var v=n[d].split("@");if(v[0]=q(v[0]),t.unicodeSupport)v[1]=q(v[1],t).toLowerCase();else try{v[1]=E(q(v[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[d]=v.join("@")}return r},serialize:function(e,t){var r=e,n=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var a=0,o=n.length;a<o;++a){var s=String(n[a]),u=s.lastIndexOf("@"),c=s.slice(0,u).replace(ne,se).replace(ne,i).replace(ie,T),l=s.slice(u+1);try{l=t.iri?I(l):E(q(l,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}n[a]=c+"@"+l}r.path=n.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var h=[];for(var d in f)f[d]!==Y[d]&&h.push(d.replace(ne,se).replace(ne,i).replace(ae,T)+"="+f[d].replace(ne,se).replace(ne,i).replace(oe,T));return h.length&&(r.query=h.join("&")),r}},ce=/^([^\:]+)\:(.*)/,le={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ce),n=e;if(r){var i=t.scheme||n.scheme||"urn",a=r[1].toLowerCase(),o=r[2],s=i+":"+(t.nid||a),u=A[s];n.nid=a,n.nss=o,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),a=A[i];a&&(e=a.serialize(e,t));var o=e,s=e.nss;return o.path=(n||t.nid)+":"+s,o}},fe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(fe)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};A[W.scheme]=W,A[G.scheme]=G,A[X.scheme]=X,A[$.scheme]=$,A[ue.scheme]=ue,A[le.scheme]=le,A[he.scheme]=he,e.SCHEMES=A,e.pctEncChar=T,e.pctDecChars=P,e.parse=j,e.removeDotSegments=H,e.serialize=V,e.resolveComponents=K,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return V(K(j(e,n),j(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=V(j(e,t),t):"object"===n(e)&&(e=j(V(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=V(j(e,r),r):"object"===n(e)&&(e=V(e,r)),"string"==typeof t?t=V(j(t,r),r):"object"===n(t)&&(t=V(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:o.ESCAPE,T)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(dB);var pB=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==r(t)&&"object"==r(n)){if(t.constructor!==n.constructor)return!1;var i,a,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(a=i;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=i;0!=a--;){var s=o[a];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n},vB={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:yB,checkDataTypes:function(e,t,r){if(1===e.length)return yB(e[0],t,r,!0);var n="",i=bB(e);for(var a in i.array&&i.object&&(n=i.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)n+=(n?" && ":"")+yB(a,t,r,!0);return n},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(gB[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(gB[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:bB,getProperty:xB,escapeQuotes:_B,equal:pB,ucs2length:function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:kB,getPathExpr:function(e,t,r,n){return IB(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return IB(e,kB(r?"/"+AB(t):xB(t)))},getData:function(e,t,r){var n,i,a,o;if(""===e)return"rootData";if("/"==e[0]){if(!SB.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,a="rootData"}else{if(!(o=e.match(EB)))throw new Error("Invalid JSON-pointer: "+e);if(n=+o[1],"#"==(i=o[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(a="data"+(t-n||""),!i)return a}for(var s=a,u=i.split("/"),c=0;c<u.length;c++){var l=u[c];l&&(s+=" && "+(a+=xB(TB(l))))}return s},unescapeFragment:function(e){return TB(decodeURIComponent(e))},unescapeJsonPointer:TB,escapeFragment:function(e){return encodeURIComponent(AB(e))},escapeJsonPointer:AB};function yB(e,t,r,n){var i=n?" !== ":" === ",a=n?" || ":" && ",o=n?"!":"",s=n?"":"!";switch(e){case"null":return t+i+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+a+"typeof "+t+i+'"object"'+a+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+a+s+"("+t+" % 1)"+a+t+i+t+(r?a+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(r?a+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var gB=bB(["string","number","integer","boolean","null"]);function bB(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var mB=/^[a-z$_][a-z$_0-9]*$/i,wB=/'|\\/g;function xB(e){return"number"==typeof e?"["+e+"]":mB.test(e)?"."+e:"['"+_B(e)+"']"}function _B(e){return e.replace(wB,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function kB(e){return"'"+_B(e)+"'"}var SB=/^\/(?:[^~]|~0|~1)*$/,EB=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function IB(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function AB(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function TB(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var PB=vB,OB=function(e){PB.copy(e,this)},CB={exports:{}},MB=CB.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),NB(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function NB(e,t,n,i,a,o,s,u,c,l){if(i&&"object"==r(i)&&!Array.isArray(i)){for(var f in t(i,a,o,s,u,c,l),i){var h=i[f];if(Array.isArray(h)){if(f in MB.arrayKeywords)for(var d=0;d<h.length;d++)NB(e,t,n,h[d],a+"/"+f+"/"+d,o,a,f,i,d)}else if(f in MB.propsKeywords){if(h&&"object"==r(h))for(var p in h)NB(e,t,n,h[p],a+"/"+f+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),o,a,f,i,p)}else(f in MB.keywords||e.allKeys&&!(f in MB.skipKeywords))&&NB(e,t,n,h,a+"/"+f,o,a,f,i)}n(i,a,o,s,u,c,l)}}MB.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},MB.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},MB.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},MB.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var RB=dB,LB=pB,jB=vB,DB=OB,BB=CB.exports,UB=FB;function FB(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return FB.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof DB)return WB(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,a,o,s=zB.call(this,t,r);return s&&(i=s.schema,t=s.root,o=s.baseId),i instanceof DB?a=i.validate||e.call(this,i.schema,t,void 0,o):void 0!==i&&(a=WB(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,o)),a}function zB(e,t){var r=RB.parse(t),n=$B(r),i=XB(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==i){var a=ZB(n),o=this._refs[a];if("string"==typeof o)return HB.call(this,e,o,r);if(o instanceof DB)o.validate||this._compile(o),e=o;else{if(!((o=this._schemas[a])instanceof DB))return;if(o.validate||this._compile(o),a==ZB(t))return{schema:o,root:e,baseId:i};e=o}if(!e.schema)return;i=XB(this._getId(e.schema))}return KB.call(this,r,i,e.schema,e)}function HB(e,t,r){var n=zB.call(this,e,t);if(n){var i=n.schema,a=n.baseId;e=n.root;var o=this._getId(i);return o&&(a=QB(a,o)),KB.call(this,r,a,i,e)}}FB.normalizeId=ZB,FB.fullPath=XB,FB.url=QB,FB.ids=function(e){var t=ZB(this._getId(e)),r={"":t},n={"":XB(t,!1)},i={},a=this;return BB(e,{allKeys:!0},(function(e,t,o,s,u,c,l){if(""!==t){var f=a._getId(e),h=r[s],d=n[s]+"/"+u;if(void 0!==l&&(d+="/"+("number"==typeof l?l:jB.escapeFragment(l))),"string"==typeof f){f=h=ZB(h?RB.resolve(h,f):f);var p=a._refs[f];if("string"==typeof p&&(p=a._refs[p]),p&&p.schema){if(!LB(e,p.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=ZB(d))if("#"==f[0]){if(i[f]&&!LB(e,i[f]))throw new Error('id "'+f+'" resolves to more than one schema');i[f]=e}else a._refs[f]=d}r[t]=h,n[t]=d}})),i},FB.inlineRef=WB,FB.schema=zB;var VB=jB.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function KB(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),a=1;a<i.length;a++){var o=i[a];if(o){if(void 0===(r=r[o=jB.unescapeFragment(o)]))break;var s;if(!VB[o]&&((s=this._getId(r))&&(t=QB(t,s)),r.$ref)){var u=QB(t,r.$ref),c=zB.call(this,n,u);c&&(r=c.schema,n=c.root,t=c.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var qB=jB.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function WB(e,t){return!1!==t&&(void 0===t||!0===t?GB(e):t?JB(e)<=t:void 0)}function GB(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==r(t=e[n])&&!GB(t))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==r(t=e[i])&&!GB(t))return!1}return!0}function JB(e){var t,n=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==r(t=e[i])&&(n+=JB(t)),n==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(qB[a])n++;else if("object"==r(t=e[a])&&(n+=JB(t)+1),n==1/0)return 1/0}return n}function XB(e,t){return!1!==t&&(e=ZB(e)),$B(RB.parse(e))}function $B(e){return RB.serialize(e).split("#")[0]+"#"}var YB=/#\/?$/;function ZB(e){return e?e.replace(YB,""):""}function QB(e,t){return t=ZB(t),RB.resolve(e,t)}var eU=UB,tU={Validation:nU((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:nU(rU)};function rU(e,t,r){this.message=r||rU.message(e,t),this.missingRef=eU.url(e,t),this.missingSchema=eU.normalizeId(eU.fullPath(this.missingRef))}function nU(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}rU.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var iU=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&function(e){return function(t){return function(r,n){var i={key:r,value:t[r]},a={key:n,value:t[n]};return e(i,a)}}}(t.cmp),a=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=r(t))return JSON.stringify(t);var o,s;if(Array.isArray(t)){for(s="[",o=0;o<t.length;o++)o&&(s+=","),s+=e(t[o])||"null";return s+"]"}if(null===t)return"null";if(-1!==a.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=a.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(s="",o=0;o<c.length;o++){var l=c[o],f=e(t[l]);f&&(s&&(s+=","),s+=JSON.stringify(l)+":"+f)}return a.splice(u,1),"{"+s+"}"}}(e)},aU=function(e,t,r){var n="",i=!0===e.schema.$async,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var u="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(u);e.logger.warn(u)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!a&&!e.schema.$ref){t="false schema";var c=e.level,l=e.dataLevel,f=e.schema[t],h=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,v="data"+(l||""),y="valid"+c;if(!1===e.schema){e.isTop?p=!0:n+=" var "+y+" = false; ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";var g=n;n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=i?" return data; ":" validate.errors = null; return true; ":n+=" var "+y+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var b=e.isTop;if(c=e.level=0,l=e.dataLevel=0,v="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var m="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(m);e.logger.warn(m)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(c=e.level,v="data"+((l=e.dataLevel)||""),o&&(e.baseId=e.resolve.url(e.baseId,o)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}y="valid"+c,p=!e.opts.allErrors;var w="",x="",_=e.schema.type,k=Array.isArray(_);if(_&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==_.indexOf("null")&&(_=_.concat("null")):"null"!=_&&(_=[_,"null"],k=!0)),k&&1==_.length&&(_=_[0],k=!1),e.schema.$ref&&a){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),_){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,_);var E=e.RULES.types[_];if(S||k||!0===E||E&&!Y(E)){h=e.schemaPath+".type",d=e.errSchemaPath+"/type",h=e.schemaPath+".type",d=e.errSchemaPath+"/type";var I=k?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[I](_,v,e.opts.strictNumbers,!0)+") { ",S){var A="dataType"+c,T="coerced"+c;n+=" var "+A+" = typeof "+v+"; var "+T+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+A+" == 'object' && Array.isArray("+v+") && "+v+".length == 1) { "+v+" = "+v+"[0]; "+A+" = typeof "+v+"; if ("+e.util.checkDataType(e.schema.type,v,e.opts.strictNumbers)+") "+T+" = "+v+"; } "),n+=" if ("+T+" !== undefined) ; ";var P=S;if(P)for(var O,C=-1,M=P.length-1;C<M;)"string"==(O=P[C+=1])?n+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+T+" = '' + "+v+"; else if ("+v+" === null) "+T+" = ''; ":"number"==O||"integer"==O?(n+=" else if ("+A+" == 'boolean' || "+v+" === null || ("+A+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==O&&(n+=" && !("+v+" % 1)"),n+=")) "+T+" = +"+v+"; "):"boolean"==O?n+=" else if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+T+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+T+" = true; ":"null"==O?n+=" else if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+v+" == null) "+T+" = ["+v+"]; ");n+=" else {   ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+_.join(","):""+_,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+_.join(","):""+_,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+T+" !== undefined) {  ";var N=l?"data"+(l-1||""):"parentData";n+=" "+v+" = "+T+"; ",l||(n+="if ("+N+" !== undefined)"),n+=" "+N+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+T+"; } "}else(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+_.join(","):""+_,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+_.join(","):""+_,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(e.schema.$ref&&!a)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(n+=" } if (errors === ",n+=b?"0":"errs_"+c,n+=") { ",x+="}");else{var R=e.RULES;if(R)for(var L=-1,j=R.length-1;L<j;)if(Y(E=R[L+=1])){if(E.type&&(n+=" if ("+e.util.checkDataType(E.type,v,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==E.type&&e.schema.properties){f=e.schema.properties;var D=Object.keys(f);if(D)for(var B,U=-1,F=D.length-1;U<F;)if(void 0!==(V=f[B=D[U+=1]]).default){var z=v+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){if(m="default is ignored for: "+z,"log"!==e.opts.strictDefaults)throw new Error(m);e.logger.warn(m)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(V.default)+" ":n+=" "+JSON.stringify(V.default)+" ",n+="; "}}else if("array"==E.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){C=-1;for(var V,K=H.length-1;C<K;)if(void 0!==(V=H[C+=1]).default)if(z=v+"["+C+"]",e.compositeRule){if(e.opts.strictDefaults){if(m="default is ignored for: "+z,"log"!==e.opts.strictDefaults)throw new Error(m);e.logger.warn(m)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(V.default)+" ":n+=" "+JSON.stringify(V.default)+" ",n+="; "}}var q,W=E.rules;if(W)for(var G,J=-1,X=W.length-1;J<X;)if(Z(G=W[J+=1])){var $=G.code(e,G.keyword,E.type);$&&(n+=" "+$+" ",p&&(w+="}"))}if(p&&(n+=" "+w+" ",w=""),E.type&&(n+=" } ",_&&_===E.type&&!S))n+=" else { ",h=e.schemaPath+".type",d=e.errSchemaPath+"/type",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+_.join(","):""+_,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+_.join(","):""+_,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),!e.compositeRule&&p?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ";p&&(n+=" if (errors === ",n+=b?"0":"errs_"+c,n+=") { ",x+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(Z(t[r]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return p&&(n+=" "+x+" "),b?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+y+" = errors === errs_"+c+";",n},oU=UB,sU=vB,uU=tU,cU=iU,lU=aU,fU=sU.ucs2length,hU=pB,dU=uU.Validation;function pU(e,t,r){var n=yU.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function vU(e,t,r){var n=yU.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function yU(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function gU(e,t){return"var pattern"+e+" = new RegExp("+sU.toQuotedString(t[e])+");"}function bU(e){return"var default"+e+" = defaults["+e+"];"}function mU(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function wU(e){return"var customRule"+e+" = customRules["+e+"];"}function xU(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}var _U={exports:{}},kU=_U.exports=function(){this._cache={}};kU.prototype.put=function(e,t){this._cache[e]=t},kU.prototype.get=function(e){return this._cache[e]},kU.prototype.del=function(e){delete this._cache[e]},kU.prototype.clear=function(){this._cache={}};var SU=vB,EU=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,IU=[0,31,28,31,30,31,30,31,31,30,31,30,31],AU=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,TU=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,PU=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,OU=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,CU=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,MU=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,NU=/^(?:\/(?:[^~/]|~0|~1)*)*$/,RU=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,LU=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,jU=DU;function DU(e){return e="full"==e?"full":"fast",SU.copy(DU[e])}function BU(e){var t=e.match(EU);if(!t)return!1;var r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:IU[n])}function UU(e,t){var r=e.match(AU);if(!r)return!1;var n=r[1],i=r[2],a=r[3],o=r[5];return(n<=23&&i<=59&&a<=59||23==n&&59==i&&60==a)&&(!t||o)}DU.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":OU,url:CU,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:TU,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:VU,uuid:MU,"json-pointer":NU,"json-pointer-uri-fragment":RU,"relative-json-pointer":LU},DU.full={date:BU,time:UU,"date-time":function(e){var t=e.split(FU);return 2==t.length&&BU(t[0])&&UU(t[1],!0)},uri:function(e){return zU.test(e)&&PU.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":OU,url:CU,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:TU,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:VU,uuid:MU,"json-pointer":NU,"json-pointer-uri-fragment":RU,"relative-json-pointer":LU};var FU=/t|\s/i,zU=/\/|:/,HU=/[^\\]\\Z/;function VU(e){if(HU.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var KU=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[p],y=e.opts.$data&&v&&v.$data,g=d?"<":">",b=d?">":"<",m=void 0;if(!h&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!y&&void 0!==v&&"number"!=typeof v&&"boolean"!=typeof v)throw new Error(p+" must be number or boolean");if(y){var w,x=e.util.getData(v.$data,o,e.dataPathArr),_="exclusive"+a,k="exclType"+a,S="exclIsNumber"+a,E="' + "+(A="op"+a)+" + '";i+=" var schemaExcl"+a+" = "+x+"; ",i+=" var "+_+"; var "+k+" = typeof "+(x="schemaExcl"+a)+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ",m=p,(w=w||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(m||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var I=i;i=w.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+k+" == 'number' ? ( ("+_+" = "+n+" === undefined || "+x+" "+g+"= "+n+") ? "+f+" "+b+"= "+x+" : "+f+" "+b+" "+n+" ) : ( ("+_+" = "+x+" === true) ? "+f+" "+b+"= "+n+" : "+f+" "+b+" "+n+" ) || "+f+" !== "+f+") { var op"+a+" = "+_+" ? '"+g+"' : '"+g+"='; ",void 0===s&&(m=p,c=e.errSchemaPath+"/"+p,n=x,h=y)}else if(E=g,(S="number"==typeof v)&&h){var A="'"+E+"'";i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+v+" "+g+"= "+n+" ? "+f+" "+b+"= "+v+" : "+f+" "+b+" "+n+" ) || "+f+" !== "+f+") { "}else S&&void 0===s?(_=!0,m=p,c=e.errSchemaPath+"/"+p,n=v,b+="="):(S&&(n=Math[d?"min":"max"](v,s)),v===(!S||n)?(_=!0,m=p,c=e.errSchemaPath+"/"+p,b+="="):(_=!1,E+="=")),A="'"+E+"'",i+=" if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+f+" "+b+" "+n+" || "+f+" !== "+f+") { ";return m=m||t,(w=w||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(m||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+A+", limit: "+n+", exclusive: "+_+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+E+" ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",I=i,i=w.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i},qU=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+f+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},WU=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");var d="maxLength"==t?">":"<";i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?i+=" "+f+".length ":i+=" ucs2length("+f+") ",i+=" "+d+" "+n+") { ";var p=t,v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var y=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},GU=function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" Object.keys("+f+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=h?"' + "+n+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},JU={$ref:function(e,t,r){var n,i,a=" ",o=e.level,s=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(s||""),h="valid"+o;if("#"==u||"#/"==u)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){e.logger.error(p),(b=b||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(a+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";var v=a;a=b.pop(),!e.compositeRule&&l?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,p);e.logger.warn(p),l&&(a+=" if (true) { ")}}else if(d.inline){var y=e.util.copy(e);y.level++;var g="valid"+y.level;y.schema=d.schema,y.schemaPath="",y.errSchemaPath=u,a+=" "+e.validate(y).replace(/validate\.schema/g,d.code)+" ",l&&(a+=" if ("+g+") { ")}else n=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var b;(b=b||[]).push(a),a="",e.opts.passContext?a+=" "+i+".call(this, ":a+=" "+i+"( ",a+=" "+f+", (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var m=a+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(a=b.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(a+=" var "+h+"; "),a+=" try { await "+m+"; ",l&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(a+=" "+h+" = false; "),a+=" } ",l&&(a+=" if ("+h+") { ")}else a+=" if (!"+m+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(a+=" else { ")}return a},allOf:function(e,t,n){var i=" ",a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var f="valid"+c.level,h=c.baseId,d=!0,p=a;if(p)for(var v,y=-1,g=p.length-1;y<g;)v=p[y+=1],(e.opts.strictKeywords?"object"==r(v)&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(d=!1,c.schema=v,c.schemaPath=o+"["+y+"]",c.errSchemaPath=s+"/"+y,i+="  "+e.validate(c)+" ",c.baseId=h,u&&(i+=" if ("+f+") { ",l+="}"));return u&&(i+=d?" if (true) { ":" "+l.slice(0,-1)+" "),i},anyOf:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=e.util.copy(e),v="";p.level++;var y="valid"+p.level,g=s.every((function(t){return e.opts.strictKeywords?"object"==r(t)&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}));if(g){var b=p.baseId;i+=" var "+d+" = errors; var "+h+" = false;  ";var m=e.compositeRule;e.compositeRule=p.compositeRule=!0;var w=s;if(w)for(var x,_=-1,k=w.length-1;_<k;)x=w[_+=1],p.schema=x,p.schemaPath=u+"["+_+"]",p.errSchemaPath=c+"/"+_,i+="  "+e.validate(p)+" ",p.baseId=b,i+=" "+h+" = "+h+" || "+y+"; if (!"+h+") { ",v+="}";e.compositeRule=p.compositeRule=m,i+=" "+v+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else l&&(i+=" if (true) { ");return i},$comment:function(e,t,r){var n=" ",i=e.schema[t],a=e.errSchemaPath+"/"+t;e.opts.allErrors;var o=e.util.toQuotedString(i);return!0===e.opts.$comment?n+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+o+", "+e.util.toQuotedString(a)+", validate.root.schema);"),n},const:function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; "),h||(n+=" var schema"+i+" = validate.schema"+s+";"),n+="var "+f+" = equal("+l+", schema"+i+"); if (!"+f+") {   ";var d=d||[];d.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n},contains:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=e.util.copy(e);p.level++;var v="valid"+p.level,y="i"+a,g=p.dataLevel=e.dataLevel+1,b="data"+g,m=e.baseId,w=e.opts.strictKeywords?"object"==r(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(i+="var "+d+" = errors;var "+h+";",w){var x=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=u,p.errSchemaPath=c,i+=" var "+v+" = false; for (var "+y+" = 0; "+y+" < "+f+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var _=f+"["+y+"]";p.dataPathArr[g]=y;var k=e.validate(p);p.baseId=m,e.util.varOccurences(k,b)<2?i+=" "+e.util.varReplace(k,b,_)+" ":i+=" var "+b+" = "+_+"; "+k+" ",i+=" if ("+v+") break; }  ",e.compositeRule=p.compositeRule=x,i+="  if (!"+v+") {"}else i+=" if ("+f+".length == 0) {";var S=S||[];S.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var E=i;return i=S.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",w&&(i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},dependencies:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,y={},g={},b=e.opts.ownProperties;for(_ in s)if("__proto__"!=_){var m=s[_],w=Array.isArray(m)?g:y;w[_]=m}i+="var "+h+" = errors;";var x=e.errorPath;for(var _ in i+="var missing"+a+";",g)if((w=g[_]).length){if(i+=" if ( "+f+e.util.getProperty(_)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(_)+"') "),l){i+=" && ( ";var k=w;if(k)for(var S=-1,E=k.length-1;S<E;)C=k[S+=1],S&&(i+=" || "),i+=" ( ( "+(L=f+(R=e.util.getProperty(C)))+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(C)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:R)+") ) ";i+=")) {  ";var I="missing"+a,A="' + "+I+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,I,!0):x+" + "+I);var T=T||[];T.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+A+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(1==w.length?w[0]:w.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==w.length?i+="property "+e.util.escapeQuotes(w[0]):i+="properties "+e.util.escapeQuotes(w.join(", ")),i+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var P=i;i=T.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var O=w;if(O)for(var C,M=-1,N=O.length-1;M<N;){C=O[M+=1];var R=e.util.getProperty(C),L=(A=e.util.escapeQuotes(C),f+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,C,e.opts.jsonPointers)),i+=" if ( "+L+" === undefined ",b&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(C)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+A+"', depsCount: "+w.length+", deps: '"+e.util.escapeQuotes(1==w.length?w[0]:w.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==w.length?i+="property "+e.util.escapeQuotes(w[0]):i+="properties "+e.util.escapeQuotes(w.join(", ")),i+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",l&&(p+="}",i+=" else { ")}e.errorPath=x;var j=d.baseId;for(var _ in y)m=y[_],(e.opts.strictKeywords?"object"==r(m)&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all))&&(i+=" "+v+" = true; if ( "+f+e.util.getProperty(_)+" !== undefined ",b&&(i+=" && Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(_)+"') "),i+=") { ",d.schema=m,d.schemaPath=u+e.util.getProperty(_),d.errSchemaPath=c+"/"+e.util.escapeFragment(_),i+="  "+e.validate(d)+" ",d.baseId=j,i+=" }  ",l&&(i+=" if ("+v+") { ",p+="}"));return l&&(i+="   "+p+" if ("+h+" == errors) {"),i},enum:function(e,t,r){var n=" ",i=e.level,a=e.dataLevel,o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),f="valid"+i,h=e.opts.$data&&o&&o.$data;h&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,a,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;h||(n+=" var "+p+" = validate.schema"+s+";"),n+="var "+f+";",h&&(n+=" if (schema"+i+" === undefined) "+f+" = true; else if (!Array.isArray(schema"+i+")) "+f+" = false; else {"),n+=f+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+l+", "+p+"["+d+"])) { "+f+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+f+") {   ";var v=v||[];v.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var y=n;return n=v.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n},format:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||"");if(!1===e.opts.format)return l&&(i+=" if (true) { "),i;var h,d=e.opts.$data&&s&&s.$data;d?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",h="schema"+a):h=s;var p=e.opts.unknownFormats,v=Array.isArray(p);if(d)i+=" var "+(y="format"+a)+" = formats["+h+"]; var "+(g="isObject"+a)+" = typeof "+y+" == 'object' && !("+y+" instanceof RegExp) && "+y+".validate; var "+(b="formatType"+a)+" = "+g+" && "+y+".type || 'string'; if ("+g+") { ",e.async&&(i+=" var async"+a+" = "+y+".async; "),i+=" "+y+" = "+y+".validate; } if (  ",d&&(i+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),i+=" (","ignore"!=p&&(i+=" ("+h+" && !"+y+" ",v&&(i+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),i+=") || "),i+=" ("+y+" && "+b+" == '"+n+"' && !(typeof "+y+" == 'function' ? ",e.async?i+=" (async"+a+" ? await "+y+"("+f+") : "+y+"("+f+")) ":i+=" "+y+"("+f+") ",i+=" : "+y+".test("+f+"))))) {";else{var y;if(!(y=e.formats[s])){if("ignore"==p)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(i+=" if (true) { "),i;if(v&&p.indexOf(s)>=0)return l&&(i+=" if (true) { "),i;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,b=(g="object"==r(y)&&!(y instanceof RegExp)&&y.validate)&&y.type||"string";if(g){var m=!0===y.async;y=y.validate}if(b!=n)return l&&(i+=" if (true) { "),i;if(m){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(w="formats"+e.util.getProperty(s)+".validate")+"("+f+"))) { "}else{i+=" if (! ";var w="formats"+e.util.getProperty(s);g&&(w+=".validate"),i+="function"==typeof y?" "+w+"("+f+") ":" "+w+".test("+f+") ",i+=") { "}}var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",i+=d?""+h:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=d?"' + "+h+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var _=i;return i=x.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i},if:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=e.util.copy(e);p.level++;var v="valid"+p.level,y=e.schema.then,g=e.schema.else,b=void 0!==y&&(e.opts.strictKeywords?"object"==r(y)&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all)),m=void 0!==g&&(e.opts.strictKeywords?"object"==r(g)&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),w=p.baseId;if(b||m){var x;p.createErrors=!1,p.schema=s,p.schemaPath=u,p.errSchemaPath=c,i+=" var "+d+" = errors; var "+h+" = true;  ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0,i+="  "+e.validate(p)+" ",p.baseId=w,p.createErrors=!0,i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=_,b?(i+=" if ("+v+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(p)+" ",p.baseId=w,i+=" "+h+" = "+v+"; ",b&&m?i+=" var "+(x="ifClause"+a)+" = 'then'; ":x="'then'",i+=" } ",m&&(i+=" else { ")):i+=" if (!"+v+") { ",m&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(p)+" ",p.baseId=w,i+=" "+h+" = "+v+"; ",b&&m?i+=" var "+(x="ifClause"+a)+" = 'else'; ":x="'else'",i+=" } "),i+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+x+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+x+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i},items:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=e.util.copy(e),v="";p.level++;var y="valid"+p.level,g="i"+a,b=p.dataLevel=e.dataLevel+1,m="data"+b,w=e.baseId;if(i+="var "+d+" = errors;var "+h+";",Array.isArray(s)){var x=e.schema.additionalItems;if(!1===x){i+=" "+h+" = "+f+".length <= "+s.length+"; ";var _=c;c=e.errSchemaPath+"/additionalItems",i+="  if (!"+h+") {   ";var k=k||[];k.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var S=i;i=k.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=_,l&&(v+="}",i+=" else { ")}var E=s;if(E)for(var I,A=-1,T=E.length-1;A<T;)if(I=E[A+=1],e.opts.strictKeywords?"object"==r(I)&&Object.keys(I).length>0||!1===I:e.util.schemaHasRules(I,e.RULES.all)){i+=" "+y+" = true; if ("+f+".length > "+A+") { ";var P=f+"["+A+"]";p.schema=I,p.schemaPath=u+"["+A+"]",p.errSchemaPath=c+"/"+A,p.errorPath=e.util.getPathExpr(e.errorPath,A,e.opts.jsonPointers,!0),p.dataPathArr[b]=A;var O=e.validate(p);p.baseId=w,e.util.varOccurences(O,m)<2?i+=" "+e.util.varReplace(O,m,P)+" ":i+=" var "+m+" = "+P+"; "+O+" ",i+=" }  ",l&&(i+=" if ("+y+") { ",v+="}")}"object"==r(x)&&(e.opts.strictKeywords?"object"==r(x)&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all))&&(p.schema=x,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+y+" = true; if ("+f+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+f+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),P=f+"["+g+"]",p.dataPathArr[b]=g,O=e.validate(p),p.baseId=w,e.util.varOccurences(O,m)<2?i+=" "+e.util.varReplace(O,m,P)+" ":i+=" var "+m+" = "+P+"; "+O+" ",l&&(i+=" if (!"+y+") break; "),i+=" } }  ",l&&(i+=" if ("+y+") { ",v+="}"))}else(e.opts.strictKeywords?"object"==r(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all))&&(p.schema=s,p.schemaPath=u,p.errSchemaPath=c,i+="  for (var "+g+" = 0; "+g+" < "+f+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),P=f+"["+g+"]",p.dataPathArr[b]=g,O=e.validate(p),p.baseId=w,e.util.varOccurences(O,m)<2?i+=" "+e.util.varReplace(O,m,P)+" ":i+=" var "+m+" = "+P+"; "+O+" ",l&&(i+=" if (!"+y+") break; "),i+=" }");return l&&(i+=" "+v+" if ("+d+" == errors) {"),i},maximum:KU,minimum:KU,maxItems:qU,minItems:qU,maxLength:WU,minLength:WU,maxProperties:GU,minProperties:GU,multipleOf:function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;if(h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,!h&&"number"!=typeof s)throw new Error(t+" must be number");i+="var division"+a+";if (",h&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+a+" = "+f+" / "+n+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+a+" !== parseInt(division"+a+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=h?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},not:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(e.opts.strictKeywords?"object"==r(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=u,d.errSchemaPath=c,i+=" var "+h+" = errors;  ";var v,y=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(v=d.opts.allErrors,d.opts.allErrors=!1),i+=" "+e.validate(d)+" ",d.createErrors=!0,v&&(d.opts.allErrors=v),e.compositeRule=d.compositeRule=y,i+=" if ("+p+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var b=i;i=g.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(i+=" if (false) { ");return i},oneOf:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=e.util.copy(e),v="";p.level++;var y="valid"+p.level,g=p.baseId,b="prevValid"+a,m="passingSchemas"+a;i+="var "+d+" = errors , "+b+" = false , "+h+" = false , "+m+" = null; ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0;var x=s;if(x)for(var _,k=-1,S=x.length-1;k<S;)_=x[k+=1],(e.opts.strictKeywords?"object"==r(_)&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))?(p.schema=_,p.schemaPath=u+"["+k+"]",p.errSchemaPath=c+"/"+k,i+="  "+e.validate(p)+" ",p.baseId=g):i+=" var "+y+" = true; ",k&&(i+=" if ("+y+" && "+b+") { "+h+" = false; "+m+" = ["+m+", "+k+"]; } else { ",v+="}"),i+=" if ("+y+") { "+h+" = "+b+" = true; "+m+" = "+k+"; }";return e.compositeRule=p.compositeRule=w,i+=v+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+m+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},pattern:function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h=e.opts.$data&&s&&s.$data;h?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,i+="if ( ",h&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),i+=" !"+(h?"(new RegExp("+n+"))":e.usePattern(s))+".test("+f+") ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=h?""+n:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=h?"' + "+n+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=h?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i},properties:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,y="key"+a,g="idx"+a,b=d.dataLevel=e.dataLevel+1,m="data"+b,w="dataProperties"+a,x=Object.keys(s||{}).filter(R),_=e.schema.patternProperties||{},k=Object.keys(_).filter(R),S=e.schema.additionalProperties,E=x.length||k.length,I=!1===S,A="object"==r(S)&&Object.keys(S).length,T=e.opts.removeAdditional,P=I||A||T,O=e.opts.ownProperties,C=e.baseId,M=e.schema.required;if(M&&(!e.opts.$data||!M.$data)&&M.length<e.opts.loopRequired)var N=e.util.toHash(M);function R(e){return"__proto__"!==e}if(i+="var "+h+" = errors;var "+v+" = true;",O&&(i+=" var "+w+" = undefined;"),P){if(i+=O?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+g+"=0; "+g+"<"+w+".length; "+g+"++) { var "+y+" = "+w+"["+g+"]; ":" for (var "+y+" in "+f+") { ",E){if(i+=" var isAdditional"+a+" = !(false ",x.length)if(x.length>8)i+=" || validate.schema"+u+".hasOwnProperty("+y+") ";else{var L=x;if(L)for(var j=-1,D=L.length-1;j<D;)$=L[j+=1],i+=" || "+y+" == "+e.util.toQuotedString($)+" "}if(k.length){var B=k;if(B)for(var U=-1,F=B.length-1;U<F;)oe=B[U+=1],i+=" || "+e.usePattern(oe)+".test("+y+") "}i+=" ); if (isAdditional"+a+") { "}if("all"==T)i+=" delete "+f+"["+y+"]; ";else{var z=e.errorPath,H="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),I)if(T)i+=" delete "+f+"["+y+"]; ";else{i+=" "+v+" = false; ";var V=c;c=e.errSchemaPath+"/additionalProperties",(ne=ne||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var K=i;i=ne.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+K+"]); ":i+=" validate.errors = ["+K+"]; return false; ":i+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,l&&(i+=" break; ")}else if(A)if("failing"==T){i+=" var "+h+" = errors;  ";var q=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var W=f+"["+y+"]";d.dataPathArr[b]=y;var G=e.validate(d);d.baseId=C,e.util.varOccurences(G,m)<2?i+=" "+e.util.varReplace(G,m,W)+" ":i+=" var "+m+" = "+W+"; "+G+" ",i+=" if (!"+v+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+f+"["+y+"]; }  ",e.compositeRule=d.compositeRule=q}else d.schema=S,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers),W=f+"["+y+"]",d.dataPathArr[b]=y,G=e.validate(d),d.baseId=C,e.util.varOccurences(G,m)<2?i+=" "+e.util.varReplace(G,m,W)+" ":i+=" var "+m+" = "+W+"; "+G+" ",l&&(i+=" if (!"+v+") break; ");e.errorPath=z}E&&(i+=" } "),i+=" }  ",l&&(i+=" if ("+v+") { ",p+="}")}var J=e.opts.useDefaults&&!e.compositeRule;if(x.length){var X=x;if(X)for(var $,Y=-1,Z=X.length-1;Y<Z;){var Q=s[$=X[Y+=1]];if(e.opts.strictKeywords?"object"==r(Q)&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){var ee=e.util.getProperty($),te=(W=f+ee,J&&void 0!==Q.default);if(d.schema=Q,d.schemaPath=u+ee,d.errSchemaPath=c+"/"+e.util.escapeFragment($),d.errorPath=e.util.getPath(e.errorPath,$,e.opts.jsonPointers),d.dataPathArr[b]=e.util.toQuotedString($),G=e.validate(d),d.baseId=C,e.util.varOccurences(G,m)<2){G=e.util.varReplace(G,m,W);var re=W}else re=m,i+=" var "+m+" = "+W+"; ";if(te)i+=" "+G+" ";else{if(N&&N[$]){i+=" if ( "+re+" === undefined ",O&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes($)+"') "),i+=") { "+v+" = false; ",z=e.errorPath,V=c;var ne,ie=e.util.escapeQuotes($);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(z,$,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(ne=ne||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",K=i,i=ne.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+K+"]); ":i+=" validate.errors = ["+K+"]; return false; ":i+=" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=V,e.errorPath=z,i+=" } else { "}else l?(i+=" if ( "+re+" === undefined ",O&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes($)+"') "),i+=") { "+v+" = true; } else { "):(i+=" if ("+re+" !== undefined ",O&&(i+=" &&   Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes($)+"') "),i+=" ) { ");i+=" "+G+" } "}}l&&(i+=" if ("+v+") { ",p+="}")}}if(k.length){var ae=k;if(ae)for(var oe,se=-1,ue=ae.length-1;se<ue;)Q=_[oe=ae[se+=1]],(e.opts.strictKeywords?"object"==r(Q)&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all))&&(d.schema=Q,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),i+=O?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+g+"=0; "+g+"<"+w+".length; "+g+"++) { var "+y+" = "+w+"["+g+"]; ":" for (var "+y+" in "+f+") { ",i+=" if ("+e.usePattern(oe)+".test("+y+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers),W=f+"["+y+"]",d.dataPathArr[b]=y,G=e.validate(d),d.baseId=C,e.util.varOccurences(G,m)<2?i+=" "+e.util.varReplace(G,m,W)+" ":i+=" var "+m+" = "+W+"; "+G+" ",l&&(i+=" if (!"+v+") break; "),i+=" } ",l&&(i+=" else "+v+" = true; "),i+=" }  ",l&&(i+=" if ("+v+") { ",p+="}"))}return l&&(i+=" "+p+" if ("+h+" == errors) {"),i},propertyNames:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(i+="var "+h+" = errors;",e.opts.strictKeywords?"object"==r(s)&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=u,d.errSchemaPath=c;var v="key"+a,y="idx"+a,g="i"+a,b="' + "+v+" + '",m="data"+(d.dataLevel=e.dataLevel+1),w="dataProperties"+a,x=e.opts.ownProperties,_=e.baseId;x&&(i+=" var "+w+" = undefined; "),i+=x?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+y+"=0; "+y+"<"+w+".length; "+y+"++) { var "+v+" = "+w+"["+y+"]; ":" for (var "+v+" in "+f+") { ",i+=" var startErrs"+a+" = errors; ";var k=v,S=e.compositeRule;e.compositeRule=d.compositeRule=!0;var E=e.validate(d);d.baseId=_,e.util.varOccurences(E,m)<2?i+=" "+e.util.varReplace(E,m,k)+" ":i+=" var "+m+" = "+k+"; "+E+" ",e.compositeRule=d.compositeRule=S,i+=" if (!"+p+") { for (var "+g+"=startErrs"+a+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+v+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+b+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+b+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),l&&(i+=" break; "),i+=" } }"}return l&&(i+="  if ("+h+" == errors) {"),i},required:function(e,t,n){var i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d=e.opts.$data&&s&&s.$data;d&&(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ");var p="schema"+a;if(!d)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var v=[],y=s;if(y)for(var g,b=-1,m=y.length-1;b<m;){g=y[b+=1];var w=e.schema.properties[g];w&&(e.opts.strictKeywords?"object"==r(w)&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))||(v[v.length]=g)}}else v=s;if(d||v.length){var x=e.errorPath,_=d||v.length>=e.opts.loopRequired,k=e.opts.ownProperties;if(l)if(i+=" var missing"+a+"; ",_){d||(i+=" var "+p+" = validate.schema"+u+"; ");var S="' + "+(O="schema"+a+"["+(T="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,O,e.opts.jsonPointers)),i+=" var "+h+" = true; ",d&&(i+=" if (schema"+a+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+a+")) "+h+" = false; else {"),i+=" for (var "+T+" = 0; "+T+" < "+p+".length; "+T+"++) { "+h+" = "+f+"["+p+"["+T+"]] !== undefined ",k&&(i+=" &&   Object.prototype.hasOwnProperty.call("+f+", "+p+"["+T+"]) "),i+="; if (!"+h+") break; } ",d&&(i+="  }  "),i+="  if (!"+h+") {   ",(I=I||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+S+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var E=i;i=I.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var I,A=v;if(A)for(var T=-1,P=A.length-1;T<P;)M=A[T+=1],T&&(i+=" || "),i+=" ( ( "+(j=f+(L=e.util.getProperty(M)))+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(M)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:L)+") ) ";i+=") {  ",S="' + "+(O="missing"+a)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(x,O,!0):x+" + "+O),(I=I||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+S+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",E=i,i=I.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(_){var O;d||(i+=" var "+p+" = validate.schema"+u+"; "),S="' + "+(O="schema"+a+"["+(T="i"+a)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(x,O,e.opts.jsonPointers)),d&&(i+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+S+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),i+=" for (var "+T+" = 0; "+T+" < "+p+".length; "+T+"++) { if ("+f+"["+p+"["+T+"]] === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", "+p+"["+T+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+S+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(i+="  }  ")}else{var C=v;if(C)for(var M,N=-1,R=C.length-1;N<R;){M=C[N+=1];var L=e.util.getProperty(M),j=(S=e.util.escapeQuotes(M),f+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(x,M,e.opts.jsonPointers)),i+=" if ( "+j+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(M)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+S+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=x}else l&&(i+=" if (true) {");return i},uniqueItems:function(e,t,r){var n,i=" ",a=e.level,o=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(o||""),h="valid"+a,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+a+" = "+e.util.getData(s.$data,o,e.dataPathArr)+"; ",n="schema"+a):n=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+f+".length , "+h+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,v=Array.isArray(p);if(!p||"object"==p||"array"==p||v&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var y="checkDataType"+(v?"s":"");i+=" if ("+e.util[y](p,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",d&&(i+="  }  "),i+=" if (!"+h+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),i+=" } "):i+=" {} ";var b=i;i=g.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i},validate:aU},XU=JU,$U=vB.toHash,YU=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],ZU=tU.MissingRef,QU={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},eF=QU,tF={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:eF.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:eF.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},rF=/^[a-z_$][a-z0-9_$-]*$/i,nF=function(e,t,r){var n,i,a=" ",o=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(s||""),d="valid"+o,p="errs__"+o,v=e.opts.$data&&u&&u.$data;v?(a+=" var schema"+o+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",i="schema"+o):i=u;var y,g,b,m,w,x=this,_="definition"+o,k=x.definition,S="";if(v&&k.$data){w="keywordValidate"+o;var E=k.validateSchema;a+=" var "+_+" = RULES.custom['"+t+"'].definition; var "+w+" = "+_+".validate;"}else{if(!(m=e.useCustomRule(x,u,e.schema,e)))return;i="validate.schema"+c,w=m.code,y=k.compile,g=k.inline,b=k.macro}var I=w+".errors",A="i"+o,T="ruleErr"+o,P=k.async;if(P&&!e.async)throw new Error("async keyword in sync schema");if(g||b||(a+=I+" = null;"),a+="var "+p+" = errors;var "+d+";",v&&k.$data&&(S+="}",a+=" if ("+i+" === undefined) { "+d+" = true; } else { ",E&&(S+="}",a+=" "+d+" = "+_+".validateSchema("+i+"); if ("+d+") { ")),g)k.statements?a+=" "+m.validate+" ":a+=" "+d+" = "+m.validate+"; ";else if(b){var O=e.util.copy(e);S="",O.level++;var C="valid"+O.level;O.schema=m.validate,O.schemaPath="";var M=e.compositeRule;e.compositeRule=O.compositeRule=!0;var N=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=M,a+=" "+N}else{(D=D||[]).push(a),a="",a+="  "+w+".call( ",e.opts.passContext?a+="this":a+="self",y||!1===k.schema?a+=" , "+h+" ":a+=" , "+i+" , "+h+" , validate.schema"+e.schemaPath+" ",a+=" , (dataPath || '')",'""'!=e.errorPath&&(a+=" + "+e.errorPath);var R=s?"data"+(s-1||""):"parentData",L=s?e.dataPathArr[s]:"parentDataProperty",j=a+=" , "+R+" , "+L+" , rootData )  ";a=D.pop(),!1===k.errors?(a+=" "+d+" = ",P&&(a+="await "),a+=j+"; "):a+=P?" var "+(I="customErrors"+o)+" = null; try { "+d+" = await "+j+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+I+" = e.errors; else throw e; } ":" "+I+" = null; "+d+" = "+j+"; "}if(k.modifying&&(a+=" if ("+R+") "+h+" = "+R+"["+L+"];"),a+=""+S,k.valid)f&&(a+=" if (true) { ");else{var D;a+=" if ( ",void 0===k.valid?(a+=" !",a+=b?""+C:""+d):a+=" "+!k.valid+" ",a+=") { ",n=x.keyword,(D=D||[]).push(a),a="",(D=D||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+x.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+x.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ";var B=a;a=D.pop(),!e.compositeRule&&f?e.async?a+=" throw new ValidationError(["+B+"]); ":a+=" validate.errors = ["+B+"]; return false; ":a+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var U=a;a=D.pop(),g?k.errors?"full"!=k.errors&&(a+="  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+T+".schema = "+i+"; "+T+".data = "+h+"; "),a+=" } "):!1===k.errors?a+=" "+U+" ":(a+=" if ("+p+" == errors) { "+U+" } else {  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(a+=" "+T+".schema = "+i+"; "+T+".data = "+h+"; "),a+=" } } "):b?(a+="   var err =   ",!1!==e.createErrors?(a+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+x.keyword+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should pass \""+x.keyword+"\" keyword validation' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?a+=" throw new ValidationError(vErrors); ":a+=" validate.errors = vErrors; return false; ")):!1===k.errors?a+=" "+U+" ":(a+=" if (Array.isArray("+I+")) { if (vErrors === null) vErrors = "+I+"; else vErrors = vErrors.concat("+I+"); errors = vErrors.length;  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+T+" = vErrors["+A+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(a+=" "+T+".schema = "+i+"; "+T+".data = "+h+"; "),a+=" } } else { "+U+" } "),a+=" } ",f&&(a+=" else { ")}return a},iF=tF,aF={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!rF.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var n=t.type;if(Array.isArray(n))for(var i=0;i<n.length;i++)o(e,n[i],t);else o(e,n,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function o(e,t,n){for(var i,a=0;a<r.length;a++){var o=r[a];if(o.type==t){i=o;break}}i||(i={type:t,rules:[]},r.push(i));var s={keyword:e,definition:n,custom:!0,code:nF,implements:n.implements};i.rules.push(s),r.custom[e]=s}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(iF,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}},oF={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},sF=function e(t,n,i,a){var o=this,s=this._opts,u=[void 0],c={},l=[],f={},h=[],d={},p=[];n=n||{schema:t,refVal:u,refs:c};var v=pU.call(this,t,n,a),y=this._compilations[v.index];if(v.compiling)return y.callValidate=function e(){var t=y.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var g=this._formats,b=this.RULES;try{var m=x(t,n,i,a);y.validate=m;var w=y.callValidate;return w&&(w.schema=m.schema,w.errors=null,w.refs=m.refs,w.refVal=m.refVal,w.root=m.root,w.$async=m.$async,s.sourceCode&&(w.source=m.source)),m}finally{vU.call(this,t,n,a)}function x(t,r,i,a){var f=!r||r&&r.schema==t;if(r.schema!=n.schema)return e.call(o,t,r,i,a);var d,v=!0===t.$async,y=lU({isTop:!0,schema:t,isRoot:f,baseId:a,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:uU.MissingRef,RULES:b,validate:lU,util:sU,resolve:oU,resolveRef:_,usePattern:E,useDefault:I,useCustomRule:A,opts:s,formats:g,logger:o.logger,self:o});y=xU(u,mU)+xU(l,gU)+xU(h,bU)+xU(p,wU)+y,s.processCode&&(y=s.processCode(y,t));try{d=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",y)(o,b,g,n,u,h,p,hU,fU,dU),u[0]=d}catch(e){throw o.logger.error("Error compiling schema, function code:",y),e}return d.schema=t,d.errors=null,d.refs=c,d.refVal=u,d.root=f?d:r,v&&(d.$async=!0),!0===s.sourceCode&&(d.source={code:y,patterns:l,defaults:h}),d}function _(t,r,a){r=oU.url(t,r);var l,f,h=c[r];if(void 0!==h)return S(l=u[h],f="refVal["+h+"]");if(!a&&n.refs){var d=n.refs[r];if(void 0!==d)return S(l=n.refVal[d],f=k(r,l))}f=k(r);var p=oU.call(o,x,n,r);if(void 0===p){var v=i&&i[r];v&&(p=oU.inlineRef(v,s.inlineRefs)?v:e.call(o,v,n,i,t))}if(void 0!==p)return function(e,t){var r=c[e];u[r]=t}(r,p),S(p,f);!function(e){delete c[e]}(r)}function k(e,t){var r=u.length;return u[r]=t,c[e]=r,"refVal"+r}function S(e,t){return"object"==r(e)||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function E(e){var t=f[e];return void 0===t&&(t=f[e]=l.length,l[t]=e),"pattern"+t}function I(e){switch(r(e)){case"boolean":case"number":return""+e;case"string":return sU.toQuotedString(e);case"object":if(null===e)return"null";var t=cU(e),n=d[t];return void 0===n&&(n=d[t]=h.length,h[n]=e),"default"+n}}function A(e,t,r,n){if(!1!==o._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var a=e.definition.validateSchema;if(a&&!a(t)){var u="keyword schema is invalid: "+o.errorsText(a.errors);if("log"!=o._opts.validateSchema)throw new Error(u);o.logger.error(u)}}var c,l=e.definition.compile,f=e.definition.inline,h=e.definition.macro;if(l)c=l.call(o,t,r,n);else if(h)c=h.call(o,t,r,n),!1!==s.validateSchema&&o.validateSchema(c,!0);else if(f)c=f.call(o,n,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=p.length;return p[d]=c,{code:"customRule"+d,validate:c}}},uF=UB,cF=_U.exports,lF=OB,fF=iU,hF=jU,dF=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var n,i=t[r].split("/"),a=e;for(n=1;n<i.length;n++)a=a[i[n]];for(n=0;n<YU.length;n++){var o=YU[n],s=a[o];s&&(a[o]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},pF=vB,vF=xF;xF.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i},xF.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},xF.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return AF(this,t=uF.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,n,!0),this},xF.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},xF.prototype.validateSchema=function(e,t){var n=e.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==r(t)?e._getId(t)||t:e.getSchema(bF)?bF:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(n,e);if(!i&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return i},xF.prototype.getSchema=function(e){var t=_F(this,e);switch(r(t)){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=uF.schema.call(e,{schema:{}},t);if(r){var n=r.schema,i=r.root,a=r.baseId,o=sF.call(e,n,i,void 0,a);return e._fragments[t]=new lF({ref:t,fragment:!0,schema:n,root:i,baseId:a,validate:o}),o}}(this,e)}},xF.prototype.removeSchema=function(e){if(e instanceof RegExp)return kF(this,this._schemas,e),kF(this,this._refs,e),this;switch(r(e)){case"undefined":return kF(this,this._schemas),kF(this,this._refs),this._cache.clear(),this;case"string":var t=_F(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,i=n?n(e):e;this._cache.del(i);var a=this._getId(e);a&&(a=uF.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},xF.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},xF.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",a=0;a<e.length;a++){var o=e[a];o&&(i+=n+o.dataPath+" "+o.message+r)}return i.slice(0,-r.length)},xF.prototype._addSchema=function(e,t,n,i){if("object"!=r(e)&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var a=this._opts.serialize,o=a?a(e):e,s=this._cache.get(o);if(s)return s;i=i||!1!==this._opts.addUsedSchema;var u=uF.normalizeId(this._getId(e));u&&i&&AF(this,u);var c,l=!1!==this._opts.validateSchema&&!t;l&&!(c=u&&u==uF.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=uF.ids.call(this,e),h=new lF({id:u,schema:e,localRefs:f,cacheKey:o,meta:n});return"#"!=u[0]&&i&&(this._refs[u]=h),this._cache.put(o,h),l&&c&&this.validateSchema(e,!0),h},xF.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,n;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{n=sF.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},xF.prototype.compileAsync=function e(t,r,n){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(n=r,r=void 0);var a=o(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||s(e)}));return n&&a.then((function(e){n(null,e)}),n),a;function o(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}function s(e){try{return i._compile(e)}catch(t){if(t instanceof ZU)return function(t){var n=t.missingSchema;if(c(n))throw new Error("Schema "+n+" is loaded but "+t.missingRef+" cannot be resolved");var a=i._loadingSchemas[n];return a||(a=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(u,u),a.then((function(e){if(!c(n))return o(e).then((function(){c(n)||i.addSchema(e,n,void 0,r)}))})).then((function(){return s(e)}));function u(){delete i._loadingSchemas[n]}function c(e){return i._refs[e]||i._schemas[e]}}(t);throw t}}};var yF=aF;xF.prototype.addKeyword=yF.add,xF.prototype.getKeyword=yF.get,xF.prototype.removeKeyword=yF.remove,xF.prototype.validateKeyword=yF.validate;var gF=tU;xF.ValidationError=gF.Validation,xF.MissingRefError=gF.MissingRef,xF.$dataMetaSchema=dF;var bF="http://json-schema.org/draft-07/schema",mF=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],wF=["/properties"];function xF(e){if(!(this instanceof xF))return new xF(e);e=this._opts=pF.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:TF,warn:TF,error:TF};else{if(void 0===t&&(t=console),!("object"==r(t)&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=hF(e.format),this._cache=e.cache||new cF,this._loadingSchemas={},this._compilations=[],this.RULES=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=$U(t),e.types=$U(["number","integer","string","array","object","boolean","null"]),e.forEach((function(n){n.rules=n.rules.map((function(n){var i;if("object"==r(n)){var a=Object.keys(n)[0];i=n[a],n=a,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(n),e.all[n]={keyword:n,code:XU[n],implements:i}})),e.all.$comment={keyword:"$comment",code:XU.$comment},n.type&&(e.types[n.type]=n)})),e.keywords=$U(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}(),this._getId=function(e){switch(e.schemaId){case"auto":return IF;case"id":return SF;default:return EF}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=fF),this._metaOpts=function(e){for(var t=pF.copy(e._opts),r=0;r<mF.length;r++)delete t[mF[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=oF,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=QU;e._opts.$data&&(r=dF(r,wF)),e.addMetaSchema(r,bF,!0),e._refs["http://json-schema.org/schema"]=bF}}(this),"object"==r(e.meta)&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function _F(e,t){return t=uF.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function kF(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function SF(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function EF(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function IF(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function AF(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function TF(){}var PF={type:"object",required:["merkleRoot","targetHash","anchors"],properties:{merkleRoot:{type:"string",minLength:64,maxLength:64},targetHash:{type:"string",minLength:64,maxLength:64},anchors:{type:"array",minLength:1,items:{type:"string"}}}},OF={validate:(new vF).compile(PF)},CF={root:{merkleRoot:0,targetHash:1,anchors:2,path:3},path:{left:0,right:1},chain:{btc:{id:0,networks:{mainnet:1,testnet:3}},eth:{id:1,networks:{mainnet:1,ropsten:3,rinkeby:4}},mtc:{id:2,networks:{mainnet:137,mumbai:80001}}}},MF={},NF=Yt(Qo),RF={},LF={};!function(e){var t=en.exports.BigNumber;e.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},e.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},e.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},e.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},e.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},e.SHIFT32=4294967296,e.BI={MINUS_ONE:-1,MAXINT32:4294967295,MAXINT64:"0xffffffffffffffff",SHIFT32:e.SHIFT32};var r=new t(-1);e.BN={MINUS_ONE:r,NEG_MAX:r.minus(new t(Number.MAX_SAFE_INTEGER.toString(16),16)),MAXINT:new t("0x20000000000000"),MAXINT32:new t(4294967295),MAXINT64:new t("0xffffffffffffffff"),SHIFT32:new t(e.SHIFT32)}}(LF),function(e){var t=NF,r=en.exports.BigNumber,n=LF.NUMBYTES,i=LF.SHIFT32;e.hasBigInt="function"==typeof BigInt;var a="function"==typeof TextDecoder?TextDecoder:t.TextDecoder;if(a){var o=new a("utf8",{fatal:!0,ignoreBOM:!0});e.utf8=function(e){return o.decode(e)},e.utf8.checksUTF8=!0}else e.utf8=function(e){return e.toString("utf8")},e.utf8.checksUTF8=!1;e.parseCBORint=function(e,t){switch(e){case n.ONE:return t.readUInt8(0);case n.TWO:return t.readUInt16BE(0);case n.FOUR:return t.readUInt32BE(0);case n.EIGHT:var a=t.readUInt32BE(0),o=t.readUInt32BE(4);return a>2097151?new r(a).times(i).plus(o):a*i+o;default:throw new Error("Invalid additional info for int: "+e)}},e.writeHalf=function(e,t){var r=pr.allocUnsafe(4);r.writeFloatBE(t,0);var n=r.readUInt32BE(0);if(0!=(8191&n))return!1;var i=n>>16&32768,a=n>>23&255,o=8388607&n;if(a>=113&&a<=142)i+=(a-112<<10)+(o>>13);else{if(!(a>=103&&a<113))return!1;if(o&(1<<126-a)-1)return!1;i+=o+8388608>>126-a}return e.writeUInt16BE(i),!0},e.parseHalf=function(e){var t=128&e[0]?-1:1,r=(124&e[0])>>2,n=(3&e[0])<<8|e[1];return r?31===r?t*(n?NaN:1/0):t*Math.pow(2,r-25)*(1024+n):5.960464477539063e-8*t*n},e.parseCBORfloat=function(t){switch(t.length){case 2:return e.parseHalf(t);case 4:return t.readFloatBE(0);case 8:return t.readDoubleBE(0);default:throw new Error("Invalid float size: "+t.length)}},e.hex=function(e){return pr.from(e.replace(/^0x/,""),"hex")},e.bin=function(e){for(var t=0,r=(e=e.replace(/\s/g,"")).length%8||8,n=[];r<=e.length;)n.push(parseInt(e.slice(t,r),2)),t=r,r+=8;return pr.from(n)},e.extend=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length<=1?0:arguments.length-1,r=0;r<t;r++){var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];for(var i in n){var a=n[i];e[i]=a}}return e},e.arrayEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every((function(e,r){return e===t[r]}))},e.bufferEqual=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(!$r(e)||!$r(t)||e.length!==t.length)return!1;var r,n,i=e.length,a=!0;for(r=n=0;n<i;r=++n){var o=e[r];a=a&&t[r]===o}return!!a},e.bufferToBignumber=function(e){return new r(e.toString("hex"),16)},e.toBigInt=function(t){return e.hasBigInt?BigInt(t):Number(t)},e.bigIntize=function(t){var r={};for(var n in t)r[n]=e.toBigInt(t[n]);return r},e.bufferToBigInt=function(t){return e.toBigInt("0x"+t.toString("hex"))},e.guessEncoding=function(e){if("string"==typeof e)return"hex";if(!$r(e))throw new Error("Unknown input type")}}(RF);var jF=LF.MT,DF=LF.SIMPLE,BF=LF.SYMS,UF=function(e){function t(e){if(a(this,t),"number"!=typeof e)throw new Error("Invalid Simple type: "+r(e));if(e<0||e>255||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}return s(t,[{key:"toString",value:function(){return"simple("+this.value+")"}},{key:e,value:function(e,t){return"simple("+this.value+")"}},{key:"inspect",value:function(e,t){return"simple("+this.value+")"}},{key:"encodeCBOR",value:function(e){return e._pushInt(this.value,jF.SIMPLE_FLOAT)}}],[{key:"isSimple",value:function(e){return e instanceof t}},{key:"decode",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case DF.FALSE:return!1;case DF.TRUE:return!0;case DF.NULL:return r?null:BF.NULL;case DF.UNDEFINED:return r?void 0:BF.UNDEFINED;case-1:if(!r||!n)throw new Error("Invalid BREAK");return BF.BREAK;default:return new t(e)}}}]),t}(NF.inspect.custom),FF=UF,zF=NF,HF=function(e,t){c(i,e);var n=m(i);function i(e,t,o){var s,u,c;switch(a(this,i),null==o&&(o={}),r(e)){case"object":$r(e)?(u=e,null!=t&&"object"==r(t)&&(o=t)):o=e;break;case"string":u=e,null!=t&&"object"==r(t)?o=t:c=t}null==o&&(o={}),null==u&&(u=o.input),null==c&&(c=o.inputEncoding),delete o.input,delete o.inputEncoding;var l=null==o.watchPipe||o.watchPipe;delete o.watchPipe;var f=!!o.readError;return delete o.readError,(s=n.call(this,o)).readError=f,l&&s.on("pipe",(function(e){var t=e._readableState.objectMode;if(s.length>0&&t!==s._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");return s._readableState.objectMode=t,s._writableState.objectMode=t})),null!=u&&s.end(u,c),s}return s(i,[{key:"_transform",value:function(e,t,r){this._readableState.objectMode||$r(e)||(e=pr.from(e,t)),this.push(e),r()}},{key:"_bufArray",value:function(){var e=this._readableState.buffer;if(!Array.isArray(e)){var t=e.head;for(e=[];null!=t;)e.push(t.data),t=t.next}return e}},{key:"read",value:function(e){var t=x(l(i.prototype),"read",this).call(this,e);if(null!=t){if(this.emit("read",t),this.readError&&t.length<e)throw new Error("Read ".concat(t.length,", wanted ").concat(e))}else if(this.readError)throw new Error("No data available, wanted ".concat(e));return t}},{key:"promise",value:function(e){var t=this,r=!1;return new Promise((function(n,i){t.on("finish",(function(){var i=t.read();null==e||r||(r=!0,e(null,i)),n(i)})),t.on("error",(function(t){null==e||r||(r=!0,e(t)),i(t)}))}))}},{key:"compare",value:function(e){if(!(e instanceof i))throw new TypeError("Arguments must be NoFilters");if(this===e)return 0;var t=this.slice(),r=e.slice();if($r(t)&&$r(r))return t.compare(r);throw new Error("Cannot compare streams in object mode")}},{key:"equals",value:function(e){return 0===this.compare(e)}},{key:"slice",value:function(e,t){if(this._readableState.objectMode)return this._bufArray().slice(e,t);var r=this._bufArray();switch(r.length){case 0:return pr.alloc(0);case 1:return r[0].slice(e,t);default:return pr.concat(r).slice(e,t)}}},{key:"get",value:function(e){return this.slice()[e]}},{key:"toJSON",value:function(){var e=this.slice();return $r(e)?e.toJSON():e}},{key:"toString",value:function(e,t,r){var n=this.slice(t,r);return $r(n)?e&&"utf8"!==e||!zF.TextDecoder?n.toString(e,t,r):new zF.TextDecoder("utf8",{fatal:!0,ignoreBOM:!0}).decode(n):JSON.stringify(n)}},{key:"inspect",value:function(e,t){return this[zF.inspect.custom](e,t)}},{key:t,value:function(e,t){var r=this._bufArray().map((function(e){return $r(e)?(null!=t?t.stylize:void 0)?t.stylize(e.toString("hex"),"string"):e.toString("hex"):zF.inspect(e,t)})).join(", ");return"".concat(this.constructor.name," [").concat(r,"]")}},{key:"length",get:function(){return this._readableState.length}},{key:"writeBigInt",value:function(e){var t=e.toString(16);if(e<0){var r=BigInt(Math.floor(t.length/2));t=(e=(BigInt(1)<<r*BigInt(8))+e).toString(16)}return t.length%2&&(t="0"+t),this.push(pr.from(t,"hex"))}},{key:"readUBigInt",value:function(e){var t=this.read(e);return $r(t)?BigInt("0x"+t.toString("hex")):null}},{key:"readBigInt",value:function(e){var t=this.read(e);if(!$r(t))return null;var r=BigInt("0x"+t.toString("hex"));return 128&t[0]&&(r-=BigInt(1)<<BigInt(t.length)*BigInt(8)),r}}],[{key:"isNoFilter",value:function(e){return e instanceof this}},{key:"compare",value:function(e,t){if(!(e instanceof this))throw new TypeError("Arguments must be NoFilters");return e===t?0:e.compare(t)}},{key:"concat",value:function(e,t){var r;if(!Array.isArray(e))throw new TypeError("list argument must be an Array of NoFilters");if(0===e.length||0===t)return pr.alloc(0);null==t&&(t=e.reduce((function(e,t){if(!(t instanceof i))throw new TypeError("list argument must be an Array of NoFilters");return e+t.length}),0));var n=!0,a=!0,o=e.map((function(e){if(!(e instanceof i))throw new TypeError("list argument must be an Array of NoFilters");var t=e.slice();return $r(t)?a=!1:n=!1,t}));if(n)return pr.concat(o,t);if(a)return(r=[]).concat.apply(r,E(o)).slice(0,t);throw new Error("Concatenating mixed object and byte streams not supported")}}]),i}(NA.Transform,zF.inspect.custom);function VF(e,t){return function(r){var n=this.read(t);return $r(n)?n[e].call(n,0,!0):null}}function KF(e,t){return function(r){var n=pr.alloc(t);return n[e].call(n,r,0,!0),this.push(n)}}Object.assign(HF.prototype,{writeUInt8:KF("writeUInt8",1),writeUInt16LE:KF("writeUInt16LE",2),writeUInt16BE:KF("writeUInt16BE",2),writeUInt32LE:KF("writeUInt32LE",4),writeUInt32BE:KF("writeUInt32BE",4),writeInt8:KF("writeInt8",1),writeInt16LE:KF("writeInt16LE",2),writeInt16BE:KF("writeInt16BE",2),writeInt32LE:KF("writeInt32LE",4),writeInt32BE:KF("writeInt32BE",4),writeFloatLE:KF("writeFloatLE",4),writeFloatBE:KF("writeFloatBE",4),writeDoubleLE:KF("writeDoubleLE",8),writeDoubleBE:KF("writeDoubleBE",8),readUInt8:VF("readUInt8",1),readUInt16LE:VF("readUInt16LE",2),readUInt16BE:VF("readUInt16BE",2),readUInt32LE:VF("readUInt32LE",4),readUInt32BE:VF("readUInt32BE",4),readInt8:VF("readInt8",1),readInt16LE:VF("readInt16LE",2),readInt16BE:VF("readInt16BE",2),readInt32LE:VF("readInt32LE",4),readInt32BE:VF("readInt32BE",4),readFloatLE:VF("readFloatLE",4),readFloatBE:VF("readFloatBE",4),readDoubleLE:VF("readDoubleLE",8),readDoubleBE:VF("readDoubleBE",8)});var qF=HF,WF=qF,GF=function(e){c(r,e);var t=m(r);function r(e){var n;return a(this,r),(n=t.call(this,e))._writableState.objectMode=!1,n._readableState.objectMode=!0,n.bs=new WF,n.__restart(),n}return s(r,[{key:"_transform",value:function(e,t,r){for(this.bs.write(e);this.bs.length>=this.__needed;){var n=void 0,i=null===this.__needed?void 0:this.bs.read(this.__needed);try{n=this.__parser.next(i)}catch(e){return r(e)}this.__needed&&(this.__fresh=!1),n.done?(this.push(n.value),this.__restart()):this.__needed=n.value||0}return r()}},{key:"_parse",value:Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Must be implemented in subclass");case 1:case"end":return e.stop()}}),e)}))},{key:"__restart",value:function(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}},{key:"_flush",value:function(e){e(this.__fresh?null:new Error("unexpected end of input"))}}]),r}(NA.Transform),JF=en.exports.BigNumber,XF=RF,$F=Ps,YF=new JF(-1),ZF=new JF(2),QF=function(){function e(t,n,i){if(a(this,e),this.tag=t,this.value=n,this.err=i,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+r(this.tag)+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}return s(e,[{key:"toString",value:function(){return"".concat(this.tag,"(").concat(JSON.stringify(this.value),")")}},{key:"encodeCBOR",value:function(e){return e._pushTag(this.tag),e.pushAny(this.value)}},{key:"convert",value:function(t){var r=null!=t?t[this.tag]:void 0;if("function"!=typeof r&&"function"!=typeof(r=e["_tag_"+this.tag]))return this;try{return r.call(e,this.value)}catch(t){return this.err=t,this}}}],[{key:"_tag_0",value:function(e){return new Date(e)}},{key:"_tag_1",value:function(e){return new Date(1e3*e)}},{key:"_tag_2",value:function(e){return XF.bufferToBignumber(e)}},{key:"_tag_3",value:function(e){return YF.minus(XF.bufferToBignumber(e))}},{key:"_tag_4",value:function(e){return JF(e[1]).shiftedBy(e[0])}},{key:"_tag_5",value:function(e){return ZF.pow(e[0]).times(e[1])}},{key:"_tag_32",value:function(e){return $F.parse(e)}},{key:"_tag_35",value:function(e){return new RegExp(e)}}]),e}(),ez=QF,tz=NA,rz=GF,nz=ez,iz=FF,az=RF,oz=en.exports.BigNumber,sz=qF,uz=LF,cz=uz.MT,lz=uz.NUMBYTES,fz=uz.SYMS,hz=az.bigIntize(uz.BI),dz=uz.BN,pz=Symbol("count"),vz=Symbol("major type"),yz=Symbol("error"),gz=Symbol("not found");function bz(e,t,r){var n=[];return n[pz]=r,n[fz.PARENT]=e,n[vz]=t,n}function mz(e,t){var r=new sz;return r[pz]=-1,r[fz.PARENT]=e,r[vz]=t,r}function wz(e){return az.bufferToBigInt(e)}function xz(e){return hz.MINUS_ONE-az.bufferToBigInt(e)}var _z=function(e){c(n,e);var t=m(n);function n(e){var r;a(this,n);var i=(e=e||{}).tags;delete e.tags;var o=null!=e.max_depth?e.max_depth:-1;delete e.max_depth;var s=!!az.hasBigInt&&!!e.bigint;return delete e.bigint,(r=t.call(this,e)).running=!0,r.max_depth=o,r.tags=i,s&&(null==r.tags&&(r.tags={}),null==r.tags[2]&&(r.tags[2]=wz),null==r.tags[3]&&(r.tags[3]=xz)),r}return s(n,[{key:"close",value:function(){this.running=!1,this.__fresh=!0}},{key:"_parse",value:Wt.mark((function e(){var t,r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=0,n=null;case 1:if(!(this.max_depth>=0&&r>this.max_depth)){e.next=3;break}throw new Error("Maximum depth "+this.max_depth+" exceeded");case 3:return e.next=5,1;case 5:if(i=e.sent[0],this.running){e.next=8;break}throw new Error("Unexpected data: 0x"+i.toString(16));case 8:a=i>>5,o=31&i,s=null!=t?t[vz]:void 0,u=null!=t?t.length:void 0,e.t0=o,e.next=e.t0===lz.ONE?12:e.t0===lz.TWO||e.t0===lz.FOUR||e.t0===lz.EIGHT?17:28===e.t0||29===e.t0||30===e.t0?24:e.t0===lz.INDEFINITE?25:31;break;case 12:return this.emit("more-bytes",a,1,s,u),e.next=15,1;case 15:return n=e.sent[0],e.abrupt("break",32);case 17:return c=1<<o-24,this.emit("more-bytes",a,c,s,u),e.next=21,c;case 21:return l=e.sent,n=a===cz.SIMPLE_FLOAT?l:az.parseCBORint(o,l),e.abrupt("break",32);case 24:throw this.running=!1,new Error("Additional info not implemented: "+o);case 25:e.t1=a,e.next=e.t1===cz.POS_INT||e.t1===cz.NEG_INT||e.t1===cz.TAG?28:29;break;case 28:throw new Error("Invalid indefinite encoding for MT ".concat(a));case 29:return n=-1,e.abrupt("break",32);case 31:n=o;case 32:e.t2=a,e.next=e.t2===cz.POS_INT?35:e.t2===cz.NEG_INT?36:e.t2===cz.BYTE_STRING||e.t2===cz.UTF8_STRING?38:e.t2===cz.ARRAY||e.t2===cz.MAP?51:e.t2===cz.TAG?61:e.t2===cz.SIMPLE_FLOAT?63:71;break;case 35:return e.abrupt("break",71);case 36:return n=n===Number.MAX_SAFE_INTEGER?dz.NEG_MAX:n instanceof oz?dz.MINUS_ONE.minus(n):-1-n,e.abrupt("break",71);case 38:e.t3=n,e.next=0===e.t3?41:-1===e.t3?43:45;break;case 41:return this.emit("start-string",a,n,s,u),n=a===cz.BYTE_STRING?pr.allocUnsafe(0):"",e.abrupt("break",50);case 43:return this.emit("start",a,fz.STREAM,s,u),t=mz(t,a),r++,e.abrupt("continue",124);case 45:return this.emit("start-string",a,n,s,u),e.next=48,n;case 48:n=e.sent,a===cz.UTF8_STRING&&(n=az.utf8(n));case 50:return e.abrupt("break",71);case 51:e.t4=n,e.next=0===e.t4?54:-1===e.t4?56:58;break;case 54:return n=a===cz.MAP?{}:[],e.abrupt("break",60);case 56:return this.emit("start",a,fz.STREAM,s,u),t=bz(t,a,-1),r++,e.abrupt("continue",124);case 58:return this.emit("start",a,n,s,u),t=bz(t,a,n*(a-3)),r++,e.abrupt("continue",124);case 60:return e.abrupt("break",71);case 61:return this.emit("start",a,n,s,u),(t=bz(t,a,1)).push(n),r++,e.abrupt("continue",124);case 63:if("number"!=typeof n){e.next=70;break}if(!(o===lz.ONE&&n<32)){e.next=66;break}throw new Error("Invalid two-byte encoding of simple value ".concat(n));case 66:f=null!=t,n=iz.decode(n,f,f&&t[pz]<0),e.next=71;break;case 70:n=az.parseCBORfloat(n);case 71:this.emit("value",n,s,u,o),h=!1;case 73:if(null==t){e.next=122;break}e.t5=!1,e.next=e.t5===(n!==fz.BREAK)?77:e.t5===!Array.isArray(t)?79:e.t5===!(t instanceof sz)?81:85;break;case 77:return t[pz]=1,e.abrupt("break",85);case 79:return t.push(n),e.abrupt("break",85);case 81:if(null==(d=t[vz])||d===a){e.next=84;break}throw this.running=!1,new Error("Invalid major type in indefinite encoding");case 84:t.write(n);case 85:if(0==--t[pz]){e.next=88;break}return h=!0,e.abrupt("break",122);case 88:if(--r,delete t[pz],!Array.isArray(t)){e.next=110;break}e.t6=t[vz],e.next=e.t6===cz.ARRAY?92:e.t6===cz.MAP?94:e.t6===cz.TAG?107:108;break;case 92:return n=t,e.abrupt("break",108);case 94:if(p=!0,t.length%2==0){e.next=97;break}throw new Error("Invalid map length: "+t.length);case 97:v=0,y=t.length;case 98:if(!(v<y)){e.next=105;break}if("string"==typeof t[v]){e.next=102;break}return p=!1,e.abrupt("break",105);case 102:v+=2,e.next=98;break;case 105:if(p)for(n={},g=0,b=t.length;g<b;g+=2)n[t[g]]=t[g+1];else for(n=new Map,m=0,w=t.length;m<w;m+=2)n.set(t[m],t[m+1]);return e.abrupt("break",108);case 107:n=new nz(t[0],t[1]).convert(this.tags);case 108:e.next=117;break;case 110:if(!(t instanceof sz)){e.next=117;break}e.t7=t[vz],e.next=e.t7===cz.BYTE_STRING?114:e.t7===cz.UTF8_STRING?116:117;break;case 114:return n=t.slice(),e.abrupt("break",117);case 116:n=t.toString("utf-8");case 117:this.emit("stop",t[vz]),x=t,t=t[fz.PARENT],delete x[fz.PARENT],delete x[vz];case 120:e.next=73;break;case 122:if(h){e.next=124;break}return e.abrupt("return",n);case 124:e.next=1;break;case 126:case"end":return e.stop()}}),e,this)}))}],[{key:"nullcheck",value:function(e){switch(e){case fz.NULL:return null;case fz.UNDEFINED:return;case gz:throw new Error("Value not found");default:return e}}},{key:"decodeFirstSync",value:function(e,t){var i,a={};switch(r(t=t||{encoding:"hex"})){case"string":i=t;break;case"object":i=(a=az.extend({},t)).encoding,delete a.encoding}for(var o=new n(a),s=e instanceof tz.Readable?e:new sz(e,null!=i?i:az.guessEncoding(e)),u=o._parse(),c=u.next();!c.done;){var l=s.read(c.value);if(null==l||l.length!==c.value)throw new Error("Insufficient data");c=u.next(l)}var f=n.nullcheck(c.value);if(s.length>0){var h=s.read(1);s.unshift(h);var d=new Error("Unexpected data: 0x"+h[0].toString(16));throw d.value=f,d}return f}},{key:"decodeAllSync",value:function(e,t){var i,a={};switch(r(t=t||{encoding:"hex"})){case"string":i=t;break;case"object":i=(a=az.extend({},t)).encoding,delete a.encoding}for(var o=new n(a),s=e instanceof tz.Readable?e:new sz(e,null!=i?i:az.guessEncoding(e)),u=[];s.length>0;){for(var c=o._parse(),l=c.next();!l.done;){var f=s.read(l.value);if(null==f||f.length!==l.value)throw new Error("Insufficient data");l=c.next(f)}u.push(n.nullcheck(l.value))}return u}},{key:"decodeFirst",value:function(e,t,i){var a={},o=!1,s="hex";switch(r(t)){case"function":i=t,s=az.guessEncoding(e);break;case"string":s=t;break;case"object":s=null!=(a=az.extend({},t)).encoding?a.encoding:az.guessEncoding(e),delete a.encoding,o=null!=a.required&&a.required,delete a.required}var u=new n(a),c=gz,l=new Promise((function(e,t){u.on("data",(function(e){c=n.nullcheck(e),u.close()})),u.once("error",(function(e){return c!==gz&&(e.value=c),c=yz,u.close(),t(e)})),u.once("end",(function(){switch(c){case gz:return o?t(new Error("No CBOR found")):e(c);case yz:return;default:return e(c)}}))}));return"function"==typeof i&&l.then((function(e){return i(null,e)}),i),u.end(e,s),l}},{key:"decodeAll",value:function(e,t,i){var a={},o="hex";switch(r(t)){case"function":i=t,o=az.guessEncoding(e);break;case"string":o=t;break;case"object":o=null!=(a=az.extend({},t)).encoding?a.encoding:az.guessEncoding(e),delete a.encoding}var s=new n(a),u=[];s.on("data",(function(e){return u.push(n.nullcheck(e))}));var c=new Promise((function(e,t){s.on("error",t),s.on("end",(function(){return e(u)}))}));return"function"==typeof i&&c.then((function(e){return i(null,e)}),i),s.end(e,o),c}}]),n}(rz);_z.NOT_FOUND=gz;var kz=_z,Sz=NA,Ez=NF,Iz=kz,Az=LF,Tz=en.exports.BigNumber,Pz=qF,Oz=Az.MT,Cz=Az.NUMBYTES,Mz=Az.SYMS;function Nz(e){return e>1?"s":""}var Rz=function(e){c(n,e);var t=m(n);function n(e){var r;a(this,n);var i=Object.assign({depth:1,max_depth:10,no_summary:!1},e,{readableObjectMode:!1,writableObjectMode:!1}),o=i.max_depth;delete i.max_depth;var s=i.depth;return delete i.depth,(r=t.call(this,i)).depth=s,r.max_depth=o,r.all=new Pz,i.tags={24:r._tag_24.bind(g(r))},r.parser=new Iz(i),r.parser.on("value",r._on_value.bind(g(r))),r.parser.on("start",r._on_start.bind(g(r))),r.parser.on("start-string",r._on_start_string.bind(g(r))),r.parser.on("stop",r._on_stop.bind(g(r))),r.parser.on("more-bytes",r._on_more.bind(g(r))),r.parser.on("error",r._on_error.bind(g(r))),i.no_summary||r.parser.on("data",r._on_data.bind(g(r))),r.parser.bs.on("read",r._on_read.bind(g(r))),r}return s(n,[{key:"_tag_24",value:function(e){var t=this,r=new n({depth:this.depth+1,no_summary:!0});r.on("data",(function(e){return t.push(e)})),r.on("error",(function(e){return t.emit("error",e)})),r.end(e)}},{key:"_transform",value:function(e,t,r){this.parser.write(e,t,r)}},{key:"_flush",value:function(e){return this.parser._flush(e)}},{key:"_on_error",value:function(e){this.push("ERROR: "),this.push(e.toString()),this.push("\n")}},{key:"_on_read",value:function(e){this.all.write(e);var t=e.toString("hex");this.push(new Array(this.depth+1).join("  ")),this.push(t);var r=2*(this.max_depth-this.depth);return(r-=t.length)<1&&(r=1),this.push(new Array(r+1).join(" ")),this.push("-- ")}},{key:"_on_more",value:function(e,t,r,n){this.depth++;var i="";switch(e){case Oz.POS_INT:i="Positive number,";break;case Oz.NEG_INT:i="Negative number,";break;case Oz.ARRAY:i="Array, length";break;case Oz.MAP:i="Map, count";break;case Oz.BYTE_STRING:i="Bytes, length";break;case Oz.UTF8_STRING:i="String, length";break;case Oz.SIMPLE_FLOAT:i=1===t?"Simple value,":"Float,"}return this.push(i+" next "+t+" byte"+Nz(t)+"\n")}},{key:"_on_start_string",value:function(e,t,r,n){this.depth++;var i="";switch(e){case Oz.BYTE_STRING:i="Bytes, length: "+t;break;case Oz.UTF8_STRING:i="String, length: "+t.toString()}return this.push(i+"\n")}},{key:"_on_start",value:function(e,t,r,n){if(this.depth++,t!==Mz.BREAK)switch(r){case Oz.ARRAY:this.push("[".concat(n,"], "));break;case Oz.MAP:n%2?this.push("{Val:".concat(Math.floor(n/2),"}, ")):this.push("{Key:".concat(Math.floor(n/2),"}, "))}switch(e){case Oz.TAG:this.push("Tag #".concat(t)),24==t&&this.push(" Encoded CBOR data item");break;case Oz.ARRAY:t===Mz.STREAM?this.push("Array (streaming)"):this.push("Array, ".concat(t," item").concat(Nz(t)));break;case Oz.MAP:t===Mz.STREAM?this.push("Map (streaming)"):this.push("Map, ".concat(t," pair").concat(Nz(t)));break;case Oz.BYTE_STRING:this.push("Bytes (streaming)");break;case Oz.UTF8_STRING:this.push("String (streaming)")}return this.push("\n")}},{key:"_on_stop",value:function(e){return this.depth--}},{key:"_on_value",value:function(e,t,r,n){if(e!==Mz.BREAK)switch(t){case Oz.ARRAY:this.push("[".concat(r,"], "));break;case Oz.MAP:r%2?this.push("{Val:".concat(Math.floor(r/2),"}, ")):this.push("{Key:".concat(Math.floor(r/2),"}, "))}switch(e===Mz.BREAK?this.push("BREAK\n"):e===Mz.NULL?this.push("null\n"):e===Mz.UNDEFINED?this.push("undefined\n"):"string"==typeof e?(this.depth--,e.length>0&&(this.push(JSON.stringify(e)),this.push("\n"))):$r(e)?(this.depth--,e.length>0&&(this.push(e.toString("hex")),this.push("\n"))):e instanceof Tz?(this.push(e.toString()),this.push("\n")):(this.push(Ez.inspect(e)),this.push("\n")),n){case Cz.ONE:case Cz.TWO:case Cz.FOUR:case Cz.EIGHT:this.depth--}}},{key:"_on_data",value:function(){return this.push("0x"),this.push(this.all.read().toString("hex")),this.push("\n")}}],[{key:"comment",value:function(e,t,i){if(null==e)throw new Error("input required");var a="string"==typeof e?"hex":void 0,o=10;switch(r(t)){case"function":i=t;break;case"string":a=t;break;case"number":o=t;break;case"object":var s=t.encoding,u=t.max_depth;a=null!=s?s:a,o=null!=u?u:o;break;case"undefined":break;default:throw new Error("Unknown option type")}var c=new Pz,l=new n({max_depth:o}),f=null;return"function"==typeof i?(l.on("end",(function(){i(null,c.toString("utf8"))})),l.on("error",i)):f=new Promise((function(e,t){return l.on("end",(function(){e(c.toString("utf8"))})),l.on("error",t)})),l.pipe(c),l.end(e,a),f}}]),n}(Sz.Transform),Lz=Rz,jz=NA,Dz=NF,Bz=kz,Uz=RF,Fz=LF,zz=en.exports.BigNumber,Hz=qF,Vz=Fz.MT,Kz=Fz.SYMS,qz=function(e){c(n,e);var t=m(n);function n(e){var r;a(this,n);var i=Object.assign({separator:"\n",stream_errors:!1},e,{readableObjectMode:!1,writableObjectMode:!1}),o=i.separator;delete i.separator;var s=i.stream_errors;return delete i.stream_errors,(r=t.call(this,i)).float_bytes=-1,r.separator=o,r.stream_errors=s,r.parser=new Bz(i),r.parser.on("more-bytes",r._on_more.bind(g(r))),r.parser.on("value",r._on_value.bind(g(r))),r.parser.on("start",r._on_start.bind(g(r))),r.parser.on("stop",r._on_stop.bind(g(r))),r.parser.on("data",r._on_data.bind(g(r))),r.parser.on("error",r._on_error.bind(g(r))),r}return s(n,[{key:"_transform",value:function(e,t,r){return this.parser.write(e,t,r)}},{key:"_flush",value:function(e){var t=this;return this.parser._flush((function(r){return t.stream_errors?(r&&t._on_error(r),e()):e(r)}))}},{key:"_on_error",value:function(e){return this.stream_errors?this.push(e.toString()):this.emit("error",e)}},{key:"_on_more",value:function(e,t,r,n){if(e===Vz.SIMPLE_FLOAT)return this.float_bytes={2:1,4:2,8:3}[t]}},{key:"_fore",value:function(e,t){switch(e){case Vz.BYTE_STRING:case Vz.UTF8_STRING:case Vz.ARRAY:if(t>0)return this.push(", ");break;case Vz.MAP:if(t>0)return t%2?this.push(": "):this.push(", ")}}},{key:"_on_value",value:function(e,t,r){var n=this;if(e!==Kz.BREAK)return this._fore(t,r),this.push(function(){switch(!1){case e!==Kz.NULL:return"null";case e!==Kz.UNDEFINED:return"undefined";case"string"!=typeof e:return JSON.stringify(e);case!(n.float_bytes>0):var t=n.float_bytes;return n.float_bytes=-1,Dz.inspect(e)+"_"+t;case!$r(e):return"h'"+e.toString("hex")+"'";case!(e instanceof zz):return e.toString();default:return Dz.inspect(e)}}())}},{key:"_on_start",value:function(e,t,r,n){switch(this._fore(r,n),e){case Vz.TAG:this.push("".concat(t,"("));break;case Vz.ARRAY:this.push("[");break;case Vz.MAP:this.push("{");break;case Vz.BYTE_STRING:case Vz.UTF8_STRING:this.push("(")}if(t===Kz.STREAM)return this.push("_ ")}},{key:"_on_stop",value:function(e){switch(e){case Vz.TAG:return this.push(")");case Vz.ARRAY:return this.push("]");case Vz.MAP:return this.push("}");case Vz.BYTE_STRING:case Vz.UTF8_STRING:return this.push(")")}}},{key:"_on_data",value:function(){return this.push(this.separator)}}],[{key:"diagnose",value:function(e,t,i){if(null==e)throw new Error("input required");var a={},o="hex";switch(r(t)){case"function":i=t,o=Uz.guessEncoding(e);break;case"object":o=null!=(a=Uz.extend({},t)).encoding?a.encoding:Uz.guessEncoding(e),delete a.encoding;break;default:o=null!=t?t:"hex"}var s=new Hz,u=new n(a),c=null;return"function"==typeof i?(u.on("end",(function(){return i(null,s.toString("utf8"))})),u.on("error",i)):c=new Promise((function(e,t){return u.on("end",(function(){return e(s.toString("utf8"))})),u.on("error",t)})),u.pipe(s),u.end(e,o),c}}]),n}(jz.Transform),Wz=qz,Gz=NA,Jz=Ps;en.exports.BigNumber;var Xz=qF,$z=RF,Yz=LF,Zz=Yz.MT,Qz=Yz.NUMBYTES,eH=Yz.SHIFT32,tH=Yz.SYMS,rH=Yz.TAG,nH=Yz.MT.SIMPLE_FLOAT<<5|Yz.NUMBYTES.TWO,iH=Yz.MT.SIMPLE_FLOAT<<5|Yz.NUMBYTES.FOUR,aH=Yz.MT.SIMPLE_FLOAT<<5|Yz.NUMBYTES.EIGHT,oH=Yz.MT.SIMPLE_FLOAT<<5|Yz.SIMPLE.TRUE,sH=Yz.MT.SIMPLE_FLOAT<<5|Yz.SIMPLE.FALSE,uH=Yz.MT.SIMPLE_FLOAT<<5|Yz.SIMPLE.UNDEFINED,cH=Yz.MT.SIMPLE_FLOAT<<5|Yz.SIMPLE.NULL,lH=pr.from([255]),fH=$z.bigIntize(Yz.BI),hH=Yz.BN,dH=pr.from("f97e00","hex"),pH=pr.from("f9fc00","hex"),vH=pr.from("f97c00","hex"),yH=pr.from("f98000","hex"),gH=Symbol("CBOR_LOOP_DETECT"),bH=function(e){c(n,e);var t=m(n);function n(e){var i;a(this,n);var o=Object.assign({},e,{readableObjectMode:!1,writableObjectMode:!0});(i=t.call(this,o)).canonical=o.canonical,i.encodeUndefined=o.encodeUndefined,i.disallowUndefinedKeys=!!o.disallowUndefinedKeys,i.dateType=null!=o.dateType?o.dateType.toLowerCase():"number",i.collapseBigIntegers=!!o.collapseBigIntegers,"symbol"==r(o.detectLoops)?i.detectLoops=o.detectLoops:i.detectLoops=o.detectLoops?Symbol("CBOR_DETECT"):null,i.semanticTypes={Array:i._pushArray,Date:i._pushDate,Buffer:i._pushBuffer,Map:i._pushMap,NoFilter:i._pushNoFilter,RegExp:i._pushRegexp,Set:i._pushSet,BigNumber:i._pushBigNumber,ArrayBuffer:i._pushUint8Array,Uint8ClampedArray:i._pushUint8Array,Uint8Array:i._pushUint8Array,Uint16Array:i._pushArray,Uint32Array:i._pushArray,Int8Array:i._pushArray,Int16Array:i._pushArray,Int32Array:i._pushArray,Float32Array:i._pushFloat32Array,Float64Array:i._pushFloat64Array},Jz.Url&&i.addSemanticType("Url",i._pushUrl),Jz.URL&&i.addSemanticType("URL",i._pushURL);for(var s=o.genTypes||[],u=0,c=s.length;u<c;u+=2)i.addSemanticType(s[u],s[u+1]);return i}return s(n,[{key:"_transform",value:function(e,t,r){return r(!1===this.pushAny(e)?new Error("Push Error"):void 0)}},{key:"_flush",value:function(e){return e()}},{key:"addSemanticType",value:function(e,t){if("function"!=typeof t)throw new TypeError("fun must be of type function");var r="string"==typeof e?e:e.name,n=this.semanticTypes[r];return this.semanticTypes[r]=t,n}},{key:"_pushUInt8",value:function(e){var t=pr.allocUnsafe(1);return t.writeUInt8(e,0),this.push(t)}},{key:"_pushUInt16BE",value:function(e){var t=pr.allocUnsafe(2);return t.writeUInt16BE(e,0),this.push(t)}},{key:"_pushUInt32BE",value:function(e){var t=pr.allocUnsafe(4);return t.writeUInt32BE(e,0),this.push(t)}},{key:"_pushFloatBE",value:function(e){var t=pr.allocUnsafe(4);return t.writeFloatBE(e,0),this.push(t)}},{key:"_pushDoubleBE",value:function(e){var t=pr.allocUnsafe(8);return t.writeDoubleBE(e,0),this.push(t)}},{key:"_pushNaN",value:function(){return this.push(dH)}},{key:"_pushInfinity",value:function(e){var t=e<0?pH:vH;return this.push(t)}},{key:"_pushFloat",value:function(e){if(this.canonical){var t=pr.allocUnsafe(2);if($z.writeHalf(t,e))return this._pushUInt8(nH)&&this.push(t)}return Math.fround(e)===e?this._pushUInt8(iH)&&this._pushFloatBE(e):this._pushUInt8(aH)&&this._pushDoubleBE(e)}},{key:"_pushInt",value:function(e,t,r){var n=t<<5;switch(!1){case!(e<24):return this._pushUInt8(n|e);case!(e<=255):return this._pushUInt8(n|Qz.ONE)&&this._pushUInt8(e);case!(e<=65535):return this._pushUInt8(n|Qz.TWO)&&this._pushUInt16BE(e);case!(e<=4294967295):return this._pushUInt8(n|Qz.FOUR)&&this._pushUInt32BE(e);case!(e<=Number.MAX_SAFE_INTEGER):return this._pushUInt8(n|Qz.EIGHT)&&this._pushUInt32BE(Math.floor(e/eH))&&this._pushUInt32BE(e%eH);default:return t===Zz.NEG_INT?this._pushFloat(r):this._pushFloat(e)}}},{key:"_pushIntNum",value:function(e){return Object.is(e,-0)?this.push(yH):e<0?this._pushInt(-e-1,Zz.NEG_INT,e):this._pushInt(e,Zz.POS_INT)}},{key:"_pushNumber",value:function(e){switch(!1){case!isNaN(e):return this._pushNaN();case isFinite(e):return this._pushInfinity(e);case Math.round(e)!==e:return this._pushIntNum(e);default:return this._pushFloat(e)}}},{key:"_pushString",value:function(e){var t=pr.byteLength(e,"utf8");return this._pushInt(t,Zz.UTF8_STRING)&&this.push(e,"utf8")}},{key:"_pushBoolean",value:function(e){return this._pushUInt8(e?oH:sH)}},{key:"_pushUndefined",value:function(e){switch(r(this.encodeUndefined)){case"undefined":return this._pushUInt8(uH);case"function":return this.pushAny(this.encodeUndefined.call(this,e));case"object":if($r(this.encodeUndefined))return this.push(this.encodeUndefined)}return this.pushAny(this.encodeUndefined)}},{key:"_pushNull",value:function(e){return this._pushUInt8(cH)}},{key:"_pushArray",value:function(e,t,r){r=Object.assign({indefinite:!1},r);var n=t.length;if(r.indefinite){if(!e._pushUInt8(Zz.ARRAY<<5|Qz.INDEFINITE))return!1}else if(!e._pushInt(n,Zz.ARRAY))return!1;for(var i=0;i<n;i++)if(!e.pushAny(t[i]))return!1;return!(r.indefinite&&!e.push(lH))}},{key:"_pushTag",value:function(e){return this._pushInt(e,Zz.TAG)}},{key:"_pushDate",value:function(e,t){switch(e.dateType){case"string":return e._pushTag(rH.DATE_STRING)&&e._pushString(t.toISOString());case"int":case"integer":return e._pushTag(rH.DATE_EPOCH)&&e._pushIntNum(Math.round(t/1e3));case"float":return e._pushTag(rH.DATE_EPOCH)&&e._pushFloat(t/1e3);default:return e._pushTag(rH.DATE_EPOCH)&&e.pushAny(t/1e3)}}},{key:"_pushBuffer",value:function(e,t){return e._pushInt(t.length,Zz.BYTE_STRING)&&e.push(t)}},{key:"_pushNoFilter",value:function(e,t){return e._pushBuffer(e,t.slice())}},{key:"_pushRegexp",value:function(e,t){return e._pushTag(rH.REGEXP)&&e.pushAny(t.source)}},{key:"_pushSet",value:function(e,t){if(!e._pushInt(t.size,Zz.ARRAY))return!1;var r,n=C(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!e.pushAny(i))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"_pushUrl",value:function(e,t){return e._pushTag(rH.URI)&&e.pushAny(t.format())}},{key:"_pushURL",value:function(e,t){return e._pushTag(rH.URI)&&e.pushAny(t.toString())}},{key:"_pushBigint",value:function(e){var t=Zz.POS_INT,r=rH.POS_BIGINT;if(e.isNegative()&&(e=e.negated().minus(1),t=Zz.NEG_INT,r=rH.NEG_BIGINT),this.collapseBigIntegers&&e.lte(hH.MAXINT64))return e.lte(hH.MAXINT32)?this._pushInt(e.toNumber(),t):this._pushUInt8(t<<5|Qz.EIGHT)&&this._pushUInt32BE(e.dividedToIntegerBy(hH.SHIFT32).toNumber())&&this._pushUInt32BE(e.mod(hH.SHIFT32).toNumber());var n=e.toString(16);n.length%2&&(n="0"+n);var i=pr.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}},{key:"_pushJSBigint",value:function(e){var t=Zz.POS_INT,r=rH.POS_BIGINT;if(e<0&&(e=-e+fH.MINUS_ONE,t=Zz.NEG_INT,r=rH.NEG_BIGINT),this.collapseBigIntegers&&e<=fH.MAXINT64)return e<=4294967295?this._pushInt(Number(e),t):this._pushUInt8(t<<5|Qz.EIGHT)&&this._pushUInt32BE(Number(e/fH.SHIFT32))&&this._pushUInt32BE(Number(e%fH.SHIFT32));var n=e.toString(16);n.length%2&&(n="0"+n);var i=pr.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}},{key:"_pushBigNumber",value:function(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!e._pushTag(rH.DECIMAL_FRAC)||!e._pushInt(2,Zz.ARRAY))return!1;var r=t.decimalPlaces(),n=t.shiftedBy(r);return!!e._pushIntNum(-r)&&(n.abs().isLessThan(hH.MAXINT)?e._pushIntNum(n.toNumber()):e._pushBigint(n))}},{key:"_pushMap",value:function(e,t,r){if((r=Object.assign({indefinite:!1},r)).indefinite){if(!e._pushUInt8(Zz.MAP<<5|Qz.INDEFINITE))return!1}else if(!e._pushInt(t.size,Zz.MAP))return!1;if(e.canonical){var i=E(t.entries()),a=new n(this),o=new Xz({highWaterMark:this.readableHighWaterMark});a.pipe(o),i.sort((function(e,t){var r=k(e,1)[0],n=k(t,1)[0];a.pushAny(r);var i=o.read();a.pushAny(n);var s=o.read();return i.compare(s)}));var s,u=C(i);try{for(u.s();!(s=u.n()).done;){var c=k(s.value,2),l=c[0],f=c[1];if(e.disallowUndefinedKeys&&void 0===l)throw new Error("Invalid Map key: undefined");if(!e.pushAny(l)||!e.pushAny(f))return!1}}catch(e){u.e(e)}finally{u.f()}}else{var h,d=C(t);try{for(d.s();!(h=d.n()).done;){var p=k(h.value,2),v=p[0],y=p[1];if(e.disallowUndefinedKeys&&void 0===v)throw new Error("Invalid Map key: undefined");if(!e.pushAny(v)||!e.pushAny(y))return!1}}catch(e){d.e(e)}finally{d.f()}}return!(r.indefinite&&!e.push(lH))}},{key:"_pushUint8Array",value:function(e,t){return e._pushBuffer(e,pr.from(t))}},{key:"_pushFloat32Array",value:function(e,t){var r=t.length;if(!e._pushInt(r,Zz.ARRAY))return!1;for(var n=0;n<r;n++)if(!e._pushUInt8(iH)||!e._pushFloatBE(t[n]))return!1;return!0}},{key:"_pushFloat64Array",value:function(e,t){var r=t.length;if(!e._pushInt(r,Zz.ARRAY))return!1;for(var n=0;n<r;n++)if(!e._pushUInt8(aH)||!e._pushDoubleBE(t[n]))return!1;return!0}},{key:"removeLoopDetectors",value:function(e){return!!this.detectLoops&&n.removeLoopDetectors(e,this.detectLoops)}},{key:"_pushObject",value:function(e,t){if(!e)return this._pushNull(e);if(!(t=Object.assign({indefinite:!1,skipTypes:!1},t)).indefinite&&this.detectLoops){if(e[gH]===this.detectLoops)throw new Error("Loop detected while CBOR encoding");e[gH]=this.detectLoops}if(!t.skipTypes){var r=e.encodeCBOR;if("function"==typeof r)return r.call(e,this);var i=this.semanticTypes[e.constructor.name];if(i)return i.call(e,this,e)}var a,o=Object.keys(e).filter((function(t){return"function"!=typeof e[t]})),s={};if(this.canonical&&o.sort((function(e,t){var r=s[e]||(s[e]=n.encode(e)),i=s[t]||(s[t]=n.encode(t));return r.compare(i)})),t.indefinite){if(!this._pushUInt8(Zz.MAP<<5|Qz.INDEFINITE))return!1}else if(!this._pushInt(o.length,Zz.MAP))return!1;for(var u=0,c=o.length;u<c;u++){var l=o[u];if(this.canonical&&(a=s[l])){if(!this.push(a))return!1}else if(!this._pushString(l))return!1;if(!this.pushAny(e[l]))return!1}return!(t.indefinite&&!this.push(lH))}},{key:"pushAny",value:function(e){switch(r(e)){case"number":return this._pushNumber(e);case"bigint":return this._pushJSBigint(e);case"string":return this._pushString(e);case"boolean":return this._pushBoolean(e);case"undefined":return this._pushUndefined(e);case"object":return this._pushObject(e);case"symbol":switch(e){case tH.NULL:return this._pushNull(null);case tH.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+r(e)+", "+(e.toString?e.toString():""))}}},{key:"_pushAny",value:function(e){return this.pushAny(e)}},{key:"_encodeAll",value:function(e){var t=new Xz({highWaterMark:this.readableHighWaterMark});this.pipe(t);var r,n=C(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.pushAny(i)}}catch(e){n.e(e)}finally{n.f()}return this.end(),t.read()}}],[{key:"removeLoopDetectors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"!=r(e)||!e)return!1;var n=e[gH];if(!n)return!1;if(null==t)t=n;else if(t!==n)return!1;if(delete e[gH],Array.isArray(e)){var i,a=C(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.removeLoopDetectors(o,t)}}catch(e){a.e(e)}finally{a.f()}}else for(var s in e)this.removeLoopDetectors(e[s],t);return!0}},{key:"encodeIndefinite",value:function(e,t,n){if(null==t){if(null==this)throw new Error("No object to encode");t=this}n=Object.assign({chunkSize:4096},n);var i=!0,a=r(t);if("string"===a){i=i&&e._pushUInt8(Zz.UTF8_STRING<<5|Qz.INDEFINITE);for(var o=0;o<t.length;){var s=o+n.chunkSize;i=i&&e._pushString(t.slice(o,s)),o=s}i=i&&e.push(lH)}else if($r(t)){i=i&&e._pushUInt8(Zz.BYTE_STRING<<5|Qz.INDEFINITE);for(var u=0;u<t.length;){var c=u+n.chunkSize;i=i&&e._pushBuffer(e,t.slice(u,c)),u=c}i=i&&e.push(lH)}else if(Array.isArray(t))i=i&&e._pushArray(e,t,{indefinite:!0});else if(t instanceof Map)i=i&&e._pushMap(e,t,{indefinite:!0});else{if("object"!==a)throw new Error("Invalid indefinite encoding");i=i&&e._pushObject(t,{indefinite:!0,skipTypes:!0})}return i}},{key:"encode",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(new n)._encodeAll(t)}},{key:"encodeCanonical",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new n({canonical:!0})._encodeAll(t)}},{key:"encodeOne",value:function(e,t){return new n(t)._encodeAll([e])}},{key:"encodeAsync",value:function(e,t){return new Promise((function(r,i){var a=[],o=new n(t);o.on("data",(function(e){return a.push(e)})),o.on("error",i),o.on("finish",(function(){return r(pr.concat(a))})),o.pushAny(e),o.end()}))}}]),n}(Gz.Transform),mH=bH,wH=mH,xH=kz,_H=LF.MT,kH=function(e,t){c(n,e);var r=m(n);function n(e){return a(this,n),r.call(this,e)}return s(n,[{key:"get",value:function(e){return x(l(n.prototype),"get",this).call(this,n._encode(e))}},{key:"set",value:function(e,t){return x(l(n.prototype),"set",this).call(this,n._encode(e),t)}},{key:"delete",value:function(e){return x(l(n.prototype),"delete",this).call(this,n._encode(e))}},{key:"has",value:function(e){return x(l(n.prototype),"has",this).call(this,n._encode(e))}},{key:"keys",value:Wt.mark((function e(){var t,r,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C(x(l(n.prototype),"keys",this).call(this)),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return i=r.value,e.next=7,n._decode(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"entries",value:Wt.mark((function e(){var t,r,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C(x(l(n.prototype),"entries",this).call(this)),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return i=r.value,e.next=7,[n._decode(i[0]),i[1]];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:t,value:function(){return this.entries()}},{key:"forEach",value:function(e,t){if("function"!=typeof e)throw new TypeError("Must be function");var r,i=C(x(l(n.prototype),"entries",this).call(this));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.call(this,a[1],n._decode(a[0]),this)}}catch(e){i.e(e)}finally{i.f()}}},{key:"encodeCBOR",value:function(e){if(!e._pushInt(this.size,_H.MAP))return!1;if(e.canonical){var t=Array.from(x(l(n.prototype),"entries",this).call(this)).map((function(e){return[pr.from(e[0],"base64"),e[1]]}));t.sort((function(e,t){return e[0].compare(t[0])}));var r,i=C(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!e.push(a[0])||!e.pushAny(a[1]))return!1}}catch(e){i.e(e)}finally{i.f()}}else{var o,s=C(x(l(n.prototype),"entries",this).call(this));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!e.push(pr.from(u[0],"base64"))||!e.pushAny(u[1]))return!1}}catch(e){s.e(e)}finally{s.f()}}return!0}}],[{key:"_encode",value:function(e){return wH.encodeCanonical(e).toString("base64")}},{key:"_decode",value:function(e){return xH.decodeFirstSync(e,"base64")}}]),n}(p(Map),Symbol.iterator),SH=kH;!function(e){e.BigNumber=en.exports.BigNumber,e.Commented=Lz,e.Diagnose=Wz,e.Decoder=kz,e.Encoder=mH,e.Simple=FF,e.Tagged=ez,e.Map=SH,e.comment=e.Commented.comment,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.decodeAllSync=e.Decoder.decodeAllSync,e.decodeFirstSync=e.Decoder.decodeFirstSync,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.encodeCanonical=e.Encoder.encodeCanonical,e.encodeOne=e.Encoder.encodeOne,e.encodeAsync=e.Encoder.encodeAsync,e.decode=e.Decoder.decodeFirstSync,e.leveldb={decode:e.Decoder.decodeAllSync,encode:e.Encoder.encode,buffer:!0,name:"cbor"},e.hasBigInt=RF.hasBigInt}(MF);var EH={exports:{}},IH=function(){function e(t,r,n,i){a(this,e),this.name=t,this.code=r,this.alphabet=i,n&&i&&(this.engine=n(i))}return s(e,[{key:"encode",value:function(e){return this.engine.encode(e)}},{key:"decode",value:function(e){return this.engine.decode(e)}},{key:"isImplemented",value:function(){return this.engine}}]),e}(),AH=Zr.Buffer;var TH=Zr.Buffer,PH=IH,OH=function(e){return{encode:function(t){return function(e,t){var r=e.byteLength,n=new Uint8Array(e),i=t.indexOf("=")===t.length-1;i&&(t=t.substring(0,t.length-1));for(var a=0,o=0,s="",u=0;u<r;u++)for(o=o<<8|n[u],a+=8;a>=5;)s+=t[o>>>a-5&31],a-=5;if(a>0&&(s+=t[o<<5-a&31]),i)for(;s.length%8!=0;)s+="=";return s}("string"==typeof t?Uint8Array.from(t):t,e)},decode:function(t){var r,n=C(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(e.indexOf(i)<0)throw new Error("invalid base32 character")}}catch(e){n.e(e)}finally{n.f()}return function(e,t){for(var r=(e=e.replace(new RegExp("=","g"),"")).length,n=0,i=0,a=0,o=new Uint8Array(5*r/8|0),s=0;s<r;s++)i=i<<5|t.indexOf(e[s]),(n+=5)>=8&&(o[a++]=i>>>n-8&255,n-=8);return o.buffer}(t,e)}}},CH=function(e){var t=e.indexOf("=")>-1,r=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode:function(e){var n="";n="string"==typeof e?TH.from(e).toString("base64"):e.toString("base64"),r&&(n=n.replace(/\+/g,"-").replace(/\//g,"_"));var i=n.indexOf("=");return i>0&&!t&&(n=n.substring(0,i)),n},decode:function(t){var r,n=C(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(e.indexOf(i)<0)throw new Error("invalid base64 character")}}catch(e){n.e(e)}finally{n.f()}return TH.from(t,"base64")}}},MH=[["base1","1","","1"],["base2","0",S_,"01"],["base8","7",S_,"01234567"],["base10","9",S_,"0123456789"],["base16","f",function(e){return{encode:function(e){return"string"==typeof e?AH.from(e).toString("hex"):e.toString("hex")},decode:function(t){var r,n=C(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(e.indexOf(i)<0)throw new Error("invalid base16 character")}}catch(e){n.e(e)}finally{n.f()}return AH.from(t,"hex")}}},"0123456789abcdef"],["base32","b",OH,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",OH,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",OH,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",OH,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",OH,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",S_,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",S_,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",CH,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",CH,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",CH,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",CH,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],NH=MH.reduce((function(e,t){return e[t[0]]=new PH(t[0],t[1],t[2],t[3]),e}),{}),RH=MH.reduce((function(e,t){return e[t[1]]=NH[t[0]],e}),{}),LH={names:NH,codes:RH};!function(e,t){var r=Zr.Buffer,n=LH;(t=e.exports=a).encode=function(e,t){var n=o(e);return a(n.name,r.from(n.encode(t)))},t.decode=function(e){r.isBuffer(e)&&(e=e.toString());var t=e.substring(0,1);"string"==typeof(e=e.substring(1,e.length))&&(e=r.from(e));var n=o(t);return r.from(n.decode(e.toString()))},t.isEncoded=function(e){if(r.isBuffer(e)&&(e=e.toString()),"[object String]"!==Object.prototype.toString.call(e))return!1;var t=e.substring(0,1);try{return o(t).name}catch(e){return!1}},t.names=Object.freeze(Object.keys(n.names)),t.codes=Object.freeze(Object.keys(n.codes));var i=new Error("Unsupported encoding");function a(e,t){if(!t)throw new Error("requires an encoded buffer");var n=o(e),i=r.from(n.code);return function(e,t){o(e).decode(t.toString())}(n.name,t),r.concat([i,t])}function o(e){var t;if(n.names[e])t=n.names[e];else{if(!n.codes[e])throw i;t=n.codes[e]}if(!t.isImplemented())throw new Error("Base "+e+" is not implemented yet");return t}}(EH,EH.exports);var jH={exports:{}};
/**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */!function(e,t){(function(){var n,i="Expected a function",a="__lodash_hash_undefined__",o="__lodash_placeholder__",s=32,u=128,c=1/0,l=9007199254740991,f=NaN,h=4294967295,d=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",256]],p="[object Arguments]",v="[object Array]",y="[object Boolean]",g="[object Date]",b="[object Error]",m="[object Function]",w="[object GeneratorFunction]",x="[object Map]",_="[object Number]",k="[object Object]",S="[object Promise]",E="[object RegExp]",I="[object Set]",A="[object String]",T="[object Symbol]",P="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",M="[object Float32Array]",N="[object Float64Array]",R="[object Int8Array]",L="[object Int16Array]",j="[object Int32Array]",D="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",F="[object Uint32Array]",z=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,W=RegExp(K.source),G=RegExp(q.source),J=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),re=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,me=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Se="["+ke+"]",Ee="["+we+"]",Ie="\\d+",Ae="["+xe+"]",Te="[^\\ud800-\\udfff"+ke+Ie+"\\u2700-\\u27bf"+xe+_e+"]",Pe="\\ud83c[\\udffb-\\udfff]",Oe="[^\\ud800-\\udfff]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="["+_e+"]",Re="(?:"+Ae+"|"+Te+")",Le="(?:"+Ne+"|"+Te+")",je="(?:['](?:d|ll|m|re|s|t|ve))?",De="(?:['](?:D|LL|M|RE|S|T|VE))?",Be="(?:"+Ee+"|"+Pe+")?",Ue="[\\ufe0e\\ufe0f]?",Fe=Ue+Be+"(?:\\u200d(?:"+[Oe,Ce,Me].join("|")+")"+Ue+Be+")*",ze="(?:"+["[\\u2700-\\u27bf]",Ce,Me].join("|")+")"+Fe,He="(?:"+[Oe+Ee+"?",Ee,Ce,Me,"[\\ud800-\\udfff]"].join("|")+")",Ve=RegExp("[']","g"),Ke=RegExp(Ee,"g"),qe=RegExp(Pe+"(?="+Pe+")|"+He+Fe,"g"),We=RegExp([Ne+"?"+Ae+"+"+je+"(?="+[Se,Ne,"$"].join("|")+")",Le+"+"+De+"(?="+[Se,Ne+Re,"$"].join("|")+")",Ne+"?"+Re+"+"+je,Ne+"+"+De,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,ze].join("|"),"g"),Ge=RegExp("[\\u200d\\ud800-\\udfff"+we+"\\ufe0e\\ufe0f]"),Je=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$e=-1,Ye={};Ye[M]=Ye[N]=Ye[R]=Ye[L]=Ye[j]=Ye[D]=Ye[B]=Ye[U]=Ye[F]=!0,Ye[p]=Ye[v]=Ye[O]=Ye[y]=Ye[C]=Ye[g]=Ye[b]=Ye[m]=Ye[x]=Ye[_]=Ye[k]=Ye[E]=Ye[I]=Ye[A]=Ye[P]=!1;var Ze={};Ze[p]=Ze[v]=Ze[O]=Ze[C]=Ze[y]=Ze[g]=Ze[M]=Ze[N]=Ze[R]=Ze[L]=Ze[j]=Ze[x]=Ze[_]=Ze[k]=Ze[E]=Ze[I]=Ze[A]=Ze[T]=Ze[D]=Ze[B]=Ze[U]=Ze[F]=!0,Ze[b]=Ze[m]=Ze[P]=!1;var Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},et=parseFloat,tt=parseInt,rt="object"==r($t)&&$t&&$t.Object===Object&&$t,nt="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,it=rt||nt||Function("return this")(),at=t&&!t.nodeType&&t,ot=at&&e&&!e.nodeType&&e,st=ot&&ot.exports===at,ut=st&&rt.process,ct=function(){try{return ot&&ot.require&&ot.require("util").types||ut&&ut.binding&&ut.binding("util")}catch(e){}}(),lt=ct&&ct.isArrayBuffer,ft=ct&&ct.isDate,ht=ct&&ct.isMap,dt=ct&&ct.isRegExp,pt=ct&&ct.isSet,vt=ct&&ct.isTypedArray;function yt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function gt(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function mt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function xt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function _t(e,t){return!(null==e||!e.length)&&Mt(e,t,0)>-1}function kt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function St(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Et(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function It(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function At(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Pt=jt("length");function Ot(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Ct(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Mt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ct(e,Rt,r)}function Nt(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function Rt(e){return e!=e}function Lt(e,t){var r=null==e?0:e.length;return r?Ut(e,t)/r:f}function jt(e){return function(t){return null==t?n:t[e]}}function Dt(e){return function(t){return null==e?n:e[t]}}function Bt(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}function Ut(e,t){for(var r,i=-1,a=e.length;++i<a;){var o=t(e[i]);o!==n&&(r=r===n?o:r+o)}return r}function Ft(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function zt(e){return e?e.slice(0,ar(e)+1).replace(re,""):e}function Ht(e){return function(t){return e(t)}}function Vt(e,t){return St(t,(function(t){return e[t]}))}function Kt(e,t){return e.has(t)}function qt(e,t){for(var r=-1,n=e.length;++r<n&&Mt(t,e[r],0)>-1;);return r}function Wt(e,t){for(var r=e.length;r--&&Mt(t,e[r],0)>-1;);return r}function Gt(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var Jt=Dt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Xt=Dt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Yt(e){return"\\"+Qe[e]}function Zt(e){return Ge.test(e)}function Qt(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function er(e,t){return function(r){return e(t(r))}}function tr(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var s=e[r];s!==t&&s!==o||(e[r]=o,a[i++]=r)}return a}function rr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function nr(e){return Zt(e)?function(e){for(var t=qe.lastIndex=0;qe.test(e);)++t;return t}(e):Pt(e)}function ir(e){return Zt(e)?function(e){return e.match(qe)||[]}(e):function(e){return e.split("")}(e)}function ar(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var or=Dt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sr=function e(t){var ne,we=(t=null==t?it:sr.defaults(it.Object(),t,sr.pick(it,Xe))).Array,xe=t.Date,_e=t.Error,ke=t.Function,Se=t.Math,Ee=t.Object,Ie=t.RegExp,Ae=t.String,Te=t.TypeError,Pe=we.prototype,Oe=ke.prototype,Ce=Ee.prototype,Me=t["__core-js_shared__"],Ne=Oe.toString,Re=Ce.hasOwnProperty,Le=0,je=(ne=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"",De=Ce.toString,Be=Ne.call(Ee),Ue=it._,Fe=Ie("^"+Ne.call(Re).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=st?t.Buffer:n,He=t.Symbol,qe=t.Uint8Array,Ge=ze?ze.allocUnsafe:n,Qe=er(Ee.getPrototypeOf,Ee),rt=Ee.create,nt=Ce.propertyIsEnumerable,at=Pe.splice,ot=He?He.isConcatSpreadable:n,ut=He?He.iterator:n,ct=He?He.toStringTag:n,Pt=function(){try{var e=ca(Ee,"defineProperty");return e({},"",{}),e}catch(e){}}(),Dt=t.clearTimeout!==it.clearTimeout&&t.clearTimeout,$t=xe&&xe.now!==it.Date.now&&xe.now,ur=t.setTimeout!==it.setTimeout&&t.setTimeout,cr=Se.ceil,lr=Se.floor,fr=Ee.getOwnPropertySymbols,hr=ze?ze.isBuffer:n,dr=t.isFinite,pr=Pe.join,vr=er(Ee.keys,Ee),yr=Se.max,gr=Se.min,br=xe.now,mr=t.parseInt,wr=Se.random,xr=Pe.reverse,_r=ca(t,"DataView"),kr=ca(t,"Map"),Sr=ca(t,"Promise"),Er=ca(t,"Set"),Ir=ca(t,"WeakMap"),Ar=ca(Ee,"create"),Tr=Ir&&new Ir,Pr={},Or=ja(_r),Cr=ja(kr),Mr=ja(Sr),Nr=ja(Er),Rr=ja(Ir),Lr=He?He.prototype:n,jr=Lr?Lr.valueOf:n,Dr=Lr?Lr.toString:n;function Br(e){if(es(e)&&!Vo(e)&&!(e instanceof Hr)){if(e instanceof zr)return e;if(Re.call(e,"__wrapped__"))return Da(e)}return new zr(e)}var Ur=function(){function e(){}return function(t){if(!Qo(t))return{};if(rt)return rt(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Fr(){}function zr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qr;++t<r;)this.add(e[t])}function Gr(e){var t=this.__data__=new Kr(e);this.size=t.size}function Jr(e,t){var r=Vo(e),n=!r&&Ho(e),i=!r&&!n&&Go(e),a=!r&&!n&&!i&&us(e),o=r||n||i||a,s=o?Ft(e.length,Ae):[],u=s.length;for(var c in e)!t&&!Re.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,u))||s.push(c);return s}function Xr(e){var t=e.length;return t?e[Wn(0,t-1)]:n}function $r(e,t){return Na(Ai(e),on(t,0,e.length))}function Yr(e){return Na(Ai(e))}function Zr(e,t,r){(r!==n&&!Uo(e[t],r)||r===n&&!(t in e))&&nn(e,t,r)}function Qr(e,t,r){var i=e[t];Re.call(e,t)&&Uo(i,r)&&(r!==n||t in e)||nn(e,t,r)}function en(e,t){for(var r=e.length;r--;)if(Uo(e[r][0],t))return r;return-1}function tn(e,t,r,n){return fn(e,(function(e,i,a){t(n,e,r(e),a)})),n}function rn(e,t){return e&&Ti(t,Os(t),e)}function nn(e,t,r){"__proto__"==t&&Pt?Pt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function an(e,t){for(var r=-1,i=t.length,a=we(i),o=null==e;++r<i;)a[r]=o?n:Es(e,t[r]);return a}function on(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function sn(e,t,r,i,a,o){var s,u=1&t,c=2&t,l=4&t;if(r&&(s=a?r(e,i,a,o):r(e)),s!==n)return s;if(!Qo(e))return e;var f=Vo(e);if(f){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Re.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Ai(e,s)}else{var h=ha(e),d=h==m||h==w;if(Go(e))return xi(e,u);if(h==k||h==p||d&&!a){if(s=c||d?{}:pa(e),!u)return c?function(e,t){return Ti(e,fa(e),t)}(e,function(e,t){return e&&Ti(t,Cs(t),e)}(s,e)):function(e,t){return Ti(e,la(e),t)}(e,rn(s,e))}else{if(!Ze[h])return a?e:{};s=function(e,t,r){var n,i=e.constructor;switch(t){case O:return _i(e);case y:case g:return new i(+e);case C:return function(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case M:case N:case R:case L:case j:case D:case B:case U:case F:return ki(e,r);case x:case I:return new i;case _:case A:return new i(e);case E:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case T:return n=e,jr?Ee(jr.call(n)):{}}}(e,h,u)}}o||(o=new Gr);var v=o.get(e);if(v)return v;o.set(e,s),as(e)?e.forEach((function(n){s.add(sn(n,t,r,n,e,o))})):ts(e)&&e.forEach((function(n,i){s.set(i,sn(n,t,r,i,e,o))}));var b=f?n:(l?c?ra:ta:c?Cs:Os)(e);return bt(b||e,(function(n,i){b&&(n=e[i=n]),Qr(s,i,sn(n,t,r,i,e,o))})),s}function un(e,t,r){var i=r.length;if(null==e)return!i;for(e=Ee(e);i--;){var a=r[i],o=t[a],s=e[a];if(s===n&&!(a in e)||!o(s))return!1}return!0}function cn(e,t,r){if("function"!=typeof e)throw new Te(i);return Pa((function(){e.apply(n,r)}),t)}function ln(e,t,r,n){var i=-1,a=_t,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=St(t,Ht(r))),n?(a=kt,o=!1):t.length>=200&&(a=Kt,o=!1,t=new Wr(t));e:for(;++i<s;){var l=e[i],f=null==r?l:r(l);if(l=n||0!==l?l:0,o&&f==f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else a(t,f,n)||u.push(l)}return u}Br.templateSettings={escape:J,evaluate:X,interpolate:$,variable:"",imports:{_:Br}},Br.prototype=Fr.prototype,Br.prototype.constructor=Br,zr.prototype=Ur(Fr.prototype),zr.prototype.constructor=zr,Hr.prototype=Ur(Fr.prototype),Hr.prototype.constructor=Hr,Vr.prototype.clear=function(){this.__data__=Ar?Ar(null):{},this.size=0},Vr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vr.prototype.get=function(e){var t=this.__data__;if(Ar){var r=t[e];return r===a?n:r}return Re.call(t,e)?t[e]:n},Vr.prototype.has=function(e){var t=this.__data__;return Ar?t[e]!==n:Re.call(t,e)},Vr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ar&&t===n?a:t,this},Kr.prototype.clear=function(){this.__data__=[],this.size=0},Kr.prototype.delete=function(e){var t=this.__data__,r=en(t,e);return!(r<0||(r==t.length-1?t.pop():at.call(t,r,1),--this.size,0))},Kr.prototype.get=function(e){var t=this.__data__,r=en(t,e);return r<0?n:t[r][1]},Kr.prototype.has=function(e){return en(this.__data__,e)>-1},Kr.prototype.set=function(e,t){var r=this.__data__,n=en(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new Vr,map:new(kr||Kr),string:new Vr}},qr.prototype.delete=function(e){var t=sa(this,e).delete(e);return this.size-=t?1:0,t},qr.prototype.get=function(e){return sa(this,e).get(e)},qr.prototype.has=function(e){return sa(this,e).has(e)},qr.prototype.set=function(e,t){var r=sa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Wr.prototype.add=Wr.prototype.push=function(e){return this.__data__.set(e,a),this},Wr.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.clear=function(){this.__data__=new Kr,this.size=0},Gr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Gr.prototype.get=function(e){return this.__data__.get(e)},Gr.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Kr){var n=r.__data__;if(!kr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(e,t),this.size=r.size,this};var fn=Ci(mn),hn=Ci(wn,!0);function dn(e,t){var r=!0;return fn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function pn(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(u===n?s==s&&!ss(s):r(s,u)))var u=s,c=o}return c}function vn(e,t){var r=[];return fn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function yn(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=va),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?yn(s,t-1,r,n,i):Et(i,s):n||(i[i.length]=s)}return i}var gn=Mi(),bn=Mi(!0);function mn(e,t){return e&&gn(e,t,Os)}function wn(e,t){return e&&bn(e,t,Os)}function xn(e,t){return xt(t,(function(t){return $o(e[t])}))}function _n(e,t){for(var r=0,i=(t=gi(t,e)).length;null!=e&&r<i;)e=e[La(t[r++])];return r&&r==i?e:n}function kn(e,t,r){var n=t(e);return Vo(e)?n:Et(n,r(e))}function Sn(e){return null==e?e===n?"[object Undefined]":"[object Null]":ct&&ct in Ee(e)?function(e){var t=Re.call(e,ct),r=e[ct];try{e[ct]=n;var i=!0}catch(e){}var a=De.call(e);return i&&(t?e[ct]=r:delete e[ct]),a}(e):function(e){return De.call(e)}(e)}function En(e,t){return e>t}function In(e,t){return null!=e&&Re.call(e,t)}function An(e,t){return null!=e&&t in Ee(e)}function Tn(e,t,r){for(var i=r?kt:_t,a=e[0].length,o=e.length,s=o,u=we(o),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=St(f,Ht(t))),c=gr(f.length,c),u[s]=!r&&(t||a>=120&&f.length>=120)?new Wr(s&&f):n}f=e[0];var h=-1,d=u[0];e:for(;++h<a&&l.length<c;){var p=f[h],v=t?t(p):p;if(p=r||0!==p?p:0,!(d?Kt(d,v):i(l,v,r))){for(s=o;--s;){var y=u[s];if(!(y?Kt(y,v):i(e[s],v,r)))continue e}d&&d.push(v),l.push(p)}}return l}function Pn(e,t,r){var i=null==(e=Ea(e,t=gi(t,e)))?e:e[La(Ja(t))];return null==i?n:yt(i,e,r)}function On(e){return es(e)&&Sn(e)==p}function Cn(e,t,r,i,a){return e===t||(null==e||null==t||!es(e)&&!es(t)?e!=e&&t!=t:function(e,t,r,i,a,o){var s=Vo(e),u=Vo(t),c=s?v:ha(e),l=u?v:ha(t),f=(c=c==p?k:c)==k,h=(l=l==p?k:l)==k,d=c==l;if(d&&Go(e)){if(!Go(t))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Gr),s||us(e)?Qi(e,t,r,i,a,o):function(e,t,r,n,i,a,o){switch(r){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!a(new qe(e),new qe(t)));case y:case g:case _:return Uo(+e,+t);case b:return e.name==t.name&&e.message==t.message;case E:case A:return e==t+"";case x:var s=Qt;case I:var u=1&n;if(s||(s=rr),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var l=Qi(s(e),s(t),n,i,a,o);return o.delete(e),l;case T:if(jr)return jr.call(e)==jr.call(t)}return!1}(e,t,c,r,i,a,o);if(!(1&r)){var m=f&&Re.call(e,"__wrapped__"),w=h&&Re.call(t,"__wrapped__");if(m||w){var S=m?e.value():e,P=w?t.value():t;return o||(o=new Gr),a(S,P,r,i,o)}}return!!d&&(o||(o=new Gr),function(e,t,r,i,a,o){var s=1&r,u=ta(e),c=u.length;if(c!=ta(t).length&&!s)return!1;for(var l=c;l--;){var f=u[l];if(!(s?f in t:Re.call(t,f)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var v=s;++l<c;){var y=e[f=u[l]],g=t[f];if(i)var b=s?i(g,y,f,t,e,o):i(y,g,f,e,t,o);if(!(b===n?y===g||a(y,g,r,i,o):b)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var m=e.constructor,w=t.constructor;m==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,i,a,o))}(e,t,r,i,Cn,a))}function Mn(e,t,r,i){var a=r.length,o=a,s=!i;if(null==e)return!o;for(e=Ee(e);a--;){var u=r[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=r[a])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===n&&!(c in e))return!1}else{var h=new Gr;if(i)var d=i(l,f,c,e,t,h);if(!(d===n?Cn(f,l,3,i,h):d))return!1}}return!0}function Nn(e){return!(!Qo(e)||(t=e,je&&je in t))&&($o(e)?Fe:pe).test(ja(e));var t}function Rn(e){return"function"==typeof e?e:null==e?ru:"object"==r(e)?Vo(e)?Un(e[0],e[1]):Bn(e):fu(e)}function Ln(e){if(!xa(e))return vr(e);var t=[];for(var r in Ee(e))Re.call(e,r)&&"constructor"!=r&&t.push(r);return t}function jn(e,t){return e<t}function Dn(e,t){var r=-1,n=qo(e)?we(e.length):[];return fn(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}function Bn(e){var t=ua(e);return 1==t.length&&t[0][2]?ka(t[0][0],t[0][1]):function(r){return r===e||Mn(r,e,t)}}function Un(e,t){return ba(e)&&_a(t)?ka(La(e),t):function(r){var i=Es(r,e);return i===n&&i===t?Is(r,e):Cn(t,i,3)}}function Fn(e,t,r,i,a){e!==t&&gn(t,(function(o,s){if(a||(a=new Gr),Qo(o))!function(e,t,r,i,a,o,s){var u=Aa(e,r),c=Aa(t,r),l=s.get(c);if(l)Zr(e,r,l);else{var f=o?o(u,c,r+"",e,t,s):n,h=f===n;if(h){var d=Vo(c),p=!d&&Go(c),v=!d&&!p&&us(c);f=c,d||p||v?Vo(u)?f=u:Wo(u)?f=Ai(u):p?(h=!1,f=xi(c,!0)):v?(h=!1,f=ki(c,!0)):f=[]:ns(c)||Ho(c)?(f=u,Ho(u)?f=ys(u):Qo(u)&&!$o(u)||(f=pa(c))):h=!1}h&&(s.set(c,f),a(f,c,i,o,s),s.delete(c)),Zr(e,r,f)}}(e,t,s,r,Fn,i,a);else{var u=i?i(Aa(e,s),o,s+"",e,t,a):n;u===n&&(u=o),Zr(e,s,u)}}),Cs)}function zn(e,t){var r=e.length;if(r)return ya(t+=t<0?r:0,r)?e[t]:n}function Hn(e,t,r){t=t.length?St(t,(function(e){return Vo(e)?function(t){return _n(t,1===e.length?e[0]:e)}:e})):[ru];var n=-1;t=St(t,Ht(oa()));var i=Dn(e,(function(e,r,i){var a=St(t,(function(t){return t(e)}));return{criteria:a,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var u=Si(i[n],a[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Vn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=_n(e,o);r(s,o)&&Yn(a,gi(o,e),s)}return a}function Kn(e,t,r,n){var i=n?Nt:Mt,a=-1,o=t.length,s=e;for(e===t&&(t=Ai(t)),r&&(s=St(e,Ht(r)));++a<o;)for(var u=0,c=t[a],l=r?r(c):c;(u=i(s,l,u,n))>-1;)s!==e&&at.call(s,u,1),at.call(e,u,1);return e}function qn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;ya(i)?at.call(e,i,1):ci(e,i)}}return e}function Wn(e,t){return e+lr(wr()*(t-e+1))}function Gn(e,t){var r="";if(!e||t<1||t>l)return r;do{t%2&&(r+=e),(t=lr(t/2))&&(e+=e)}while(t);return r}function Jn(e,t){return Oa(Sa(e,t,ru),e+"")}function Xn(e){return Xr(Us(e))}function $n(e,t){var r=Us(e);return Na(r,on(t,0,r.length))}function Yn(e,t,r,i){if(!Qo(e))return e;for(var a=-1,o=(t=gi(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=La(t[a]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var f=u[c];(l=i?i(f,c,u):n)===n&&(l=Qo(f)?f:ya(t[a+1])?[]:{})}Qr(u,c,l),u=u[c]}return e}var Zn=Tr?function(e,t){return Tr.set(e,t),e}:ru,Qn=Pt?function(e,t){return Pt(e,"toString",{configurable:!0,enumerable:!1,value:Qs(t),writable:!0})}:ru;function ei(e){return Na(Us(e))}function ti(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=we(i);++n<i;)a[n]=e[n+t];return a}function ri(e,t){var r;return fn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ni(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!ss(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return ii(e,t,ru,r)}function ii(e,t,r,i){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=r(t))!=t,u=null===t,c=ss(t),l=t===n;a<o;){var f=lr((a+o)/2),h=r(e[f]),d=h!==n,p=null===h,v=h==h,y=ss(h);if(s)var g=i||v;else g=l?v&&(i||d):u?v&&d&&(i||!p):c?v&&d&&!p&&(i||!y):!p&&!y&&(i?h<=t:h<t);g?a=f+1:o=f}return gr(o,4294967294)}function ai(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!Uo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function oi(e){return"number"==typeof e?e:ss(e)?f:+e}function si(e){if("string"==typeof e)return e;if(Vo(e))return St(e,si)+"";if(ss(e))return Dr?Dr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,r){var n=-1,i=_t,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=kt;else if(a>=200){var c=t?null:Gi(e);if(c)return rr(c);o=!1,i=Kt,u=new Wr}else u=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,o&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s}function ci(e,t){return null==(e=Ea(e,t=gi(t,e)))||delete e[La(Ja(t))]}function li(e,t,r,n){return Yn(e,t,r(_n(e,t)),n)}function fi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?ti(e,n?0:a,n?a+1:i):ti(e,n?a+1:0,n?i:a)}function hi(e,t){var r=e;return r instanceof Hr&&(r=r.value()),It(t,(function(e,t){return t.func.apply(t.thisArg,Et([e],t.args))}),r)}function di(e,t,r){var n=e.length;if(n<2)return n?ui(e[0]):[];for(var i=-1,a=we(n);++i<n;)for(var o=e[i],s=-1;++s<n;)s!=i&&(a[i]=ln(a[i]||o,e[s],t,r));return ui(yn(a,1),t,r)}function pi(e,t,r){for(var i=-1,a=e.length,o=t.length,s={};++i<a;){var u=i<o?t[i]:n;r(s,e[i],u)}return s}function vi(e){return Wo(e)?e:[]}function yi(e){return"function"==typeof e?e:ru}function gi(e,t){return Vo(e)?e:ba(e,t)?[e]:Ra(gs(e))}var bi=Jn;function mi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ti(e,t,r)}var wi=Dt||function(e){return it.clearTimeout(e)};function xi(e,t){if(t)return e.slice();var r=e.length,n=Ge?Ge(r):new e.constructor(r);return e.copy(n),n}function _i(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function ki(e,t){var r=t?_i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var r=e!==n,i=null===e,a=e==e,o=ss(e),s=t!==n,u=null===t,c=t==t,l=ss(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||i&&s&&c||!r&&c||!a)return 1;if(!i&&!o&&!l&&e<t||l&&r&&a&&!i&&!o||u&&r&&a||!s&&a||!c)return-1}return 0}function Ei(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,c=yr(a-o,0),l=we(u+c),f=!n;++s<u;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function Ii(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,c=t.length,l=yr(a-s,0),f=we(l+c),h=!n;++i<l;)f[i]=e[i];for(var d=i;++u<c;)f[d+u]=t[u];for(;++o<s;)(h||i<a)&&(f[d+r[o]]=e[i++]);return f}function Ai(e,t){var r=-1,n=e.length;for(t||(t=we(n));++r<n;)t[r]=e[r];return t}function Ti(e,t,r,i){var a=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=i?i(r[u],e[u],u,r,e):n;c===n&&(c=e[u]),a?nn(r,u,c):Qr(r,u,c)}return r}function Pi(e,t){return function(r,n){var i=Vo(r)?gt:tn,a=t?t():{};return i(r,e,oa(n,2),a)}}function Oi(e){return Jn((function(t,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;for(o=e.length>3&&"function"==typeof o?(a--,o):n,s&&ga(r[0],r[1],s)&&(o=a<3?n:o,a=1),t=Ee(t);++i<a;){var u=r[i];u&&e(t,u,i,o)}return t}))}function Ci(e,t){return function(r,n){if(null==r)return r;if(!qo(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Ee(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function Mi(e){return function(t,r,n){for(var i=-1,a=Ee(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}function Ni(e){return function(t){var r=Zt(t=gs(t))?ir(t):n,i=r?r[0]:t.charAt(0),a=r?mi(r,1).join(""):t.slice(1);return i[e]()+a}}function Ri(e){return function(t){return It($s(Hs(t).replace(Ve,"")),e,"")}}function Li(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),n=e.apply(r,t);return Qo(n)?n:r}}function ji(e){return function(t,r,i){var a=Ee(t);if(!qo(t)){var o=oa(r,3);t=Os(t),r=function(e){return o(a[e],e,a)}}var s=e(t,r,i);return s>-1?a[o?t[s]:s]:n}}function Di(e){return ea((function(t){var r=t.length,a=r,o=zr.prototype.thru;for(e&&t.reverse();a--;){var s=t[a];if("function"!=typeof s)throw new Te(i);if(o&&!u&&"wrapper"==ia(s))var u=new zr([],!0)}for(a=u?a:r;++a<r;){var c=ia(s=t[a]),l="wrapper"==c?na(s):n;u=l&&ma(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[ia(l[0])].apply(u,l[3]):1==s.length&&ma(s)?u[c]():u.thru(s)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&Vo(n))return u.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}}))}function Bi(e,t,r,i,a,o,s,c,l,f){var h=t&u,d=1&t,p=2&t,v=24&t,y=512&t,g=p?n:Li(e);return function n(){for(var u=arguments.length,b=we(u),m=u;m--;)b[m]=arguments[m];if(v)var w=aa(n),x=Gt(b,w);if(i&&(b=Ei(b,i,a,v)),o&&(b=Ii(b,o,s,v)),u-=x,v&&u<f){var _=tr(b,w);return qi(e,t,Bi,n.placeholder,r,b,_,c,l,f-u)}var k=d?r:this,S=p?k[e]:e;return u=b.length,c?b=Ia(b,c):y&&u>1&&b.reverse(),h&&l<u&&(b.length=l),this&&this!==it&&this instanceof n&&(S=g||Li(S)),S.apply(k,b)}}function Ui(e,t){return function(r,n){return function(e,t,r,n){return mn(e,(function(e,i,a){t(n,r(e),i,a)})),n}(r,e,t(n),{})}}function Fi(e,t){return function(r,i){var a;if(r===n&&i===n)return t;if(r!==n&&(a=r),i!==n){if(a===n)return i;"string"==typeof r||"string"==typeof i?(r=si(r),i=si(i)):(r=oi(r),i=oi(i)),a=e(r,i)}return a}}function zi(e){return ea((function(t){return t=St(t,Ht(oa())),Jn((function(r){var n=this;return e(t,(function(e){return yt(e,n,r)}))}))}))}function Hi(e,t){var r=(t=t===n?" ":si(t)).length;if(r<2)return r?Gn(t,e):t;var i=Gn(t,cr(e/nr(t)));return Zt(t)?mi(ir(i),0,e).join(""):i.slice(0,e)}function Vi(e){return function(t,r,i){return i&&"number"!=typeof i&&ga(t,r,i)&&(r=i=n),t=hs(t),r===n?(r=t,t=0):r=hs(r),function(e,t,r,n){for(var i=-1,a=yr(cr((t-e)/(r||1)),0),o=we(a);a--;)o[n?a:++i]=e,e+=r;return o}(t,r,i=i===n?t<r?1:-1:hs(i),e)}}function Ki(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=vs(t),r=vs(r)),e(t,r)}}function qi(e,t,r,i,a,o,u,c,l,f){var h=8&t;t|=h?s:64,4&(t&=~(h?64:s))||(t&=-4);var d=[e,t,a,h?o:n,h?u:n,h?n:o,h?n:u,c,l,f],p=r.apply(n,d);return ma(e)&&Ta(p,d),p.placeholder=i,Ca(p,e,t)}function Wi(e){var t=Se[e];return function(e,r){if(e=vs(e),(r=null==r?0:gr(ds(r),292))&&dr(e)){var n=(gs(e)+"e").split("e");return+((n=(gs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Gi=Er&&1/rr(new Er([,-0]))[1]==c?function(e){return new Er(e)}:su;function Ji(e){return function(t){var r=ha(t);return r==x?Qt(t):r==I?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return St(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,a,c,l,f,h){var d=2&t;if(!d&&"function"!=typeof e)throw new Te(i);var p=a?a.length:0;if(p||(t&=-97,a=c=n),f=f===n?f:yr(ds(f),0),h=h===n?h:ds(h),p-=c?c.length:0,64&t){var v=a,y=c;a=c=n}var g=d?n:na(e),b=[e,t,r,a,c,v,y,l,f,h];if(g&&function(e,t){var r=e[1],n=t[1],i=r|n,a=i<131,s=n==u&&8==r||n==u&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!a&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ei(l,c,t[4]):c,e[4]=l?tr(e[3],o):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Ii(l,c,t[6]):c,e[6]=l?tr(e[5],o):t[6]),(c=t[7])&&(e[7]=c),n&u&&(e[8]=null==e[8]?t[8]:gr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,g),e=b[0],t=b[1],r=b[2],a=b[3],c=b[4],!(h=b[9]=b[9]===n?d?0:e.length:yr(b[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,r){var i=Li(e);return function a(){for(var o=arguments.length,s=we(o),u=o,c=aa(a);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:tr(s,c);return(o-=l.length)<r?qi(e,t,Bi,a.placeholder,n,s,l,n,n,r-o):yt(this&&this!==it&&this instanceof a?i:e,this,s)}}(e,t,h):t!=s&&33!=t||c.length?Bi.apply(n,b):function(e,t,r,n){var i=1&t,a=Li(e);return function t(){for(var o=-1,s=arguments.length,u=-1,c=n.length,l=we(c+s),f=this&&this!==it&&this instanceof t?a:e;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++o];return yt(f,i?r:this,l)}}(e,t,r,a);else var m=function(e,t,r){var n=1&t,i=Li(e);return function t(){return(this&&this!==it&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return Ca((g?Zn:Ta)(m,b),e,t)}function $i(e,t,r,i){return e===n||Uo(e,Ce[r])&&!Re.call(i,r)?t:e}function Yi(e,t,r,i,a,o){return Qo(e)&&Qo(t)&&(o.set(t,e),Fn(e,t,n,Yi,o),o.delete(t)),e}function Zi(e){return ns(e)?n:e}function Qi(e,t,r,i,a,o){var s=1&r,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),f=o.get(t);if(l&&f)return l==t&&f==e;var h=-1,d=!0,p=2&r?new Wr:n;for(o.set(e,t),o.set(t,e);++h<u;){var v=e[h],y=t[h];if(i)var g=s?i(y,v,h,t,e,o):i(v,y,h,e,t,o);if(g!==n){if(g)continue;d=!1;break}if(p){if(!Tt(t,(function(e,t){if(!Kt(p,t)&&(v===e||a(v,e,r,i,o)))return p.push(t)}))){d=!1;break}}else if(v!==y&&!a(v,y,r,i,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ea(e){return Oa(Sa(e,n,Va),e+"")}function ta(e){return kn(e,Os,la)}function ra(e){return kn(e,Cs,fa)}var na=Tr?function(e){return Tr.get(e)}:su;function ia(e){for(var t=e.name+"",r=Pr[t],n=Re.call(Pr,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function aa(e){return(Re.call(Br,"placeholder")?Br:e).placeholder}function oa(){var e=Br.iteratee||nu;return e=e===nu?Rn:e,arguments.length?e(arguments[0],arguments[1]):e}function sa(e,t){var n=e.__data__;return function(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ua(e){for(var t=Os(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_a(i)]}return t}function ca(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Nn(r)?r:n}var la=fr?function(e){return null==e?[]:(e=Ee(e),xt(fr(e),(function(t){return nt.call(e,t)})))}:pu,fa=fr?function(e){for(var t=[];e;)Et(t,la(e)),e=Qe(e);return t}:pu,ha=Sn;function da(e,t,r){for(var n=-1,i=(t=gi(t,e)).length,a=!1;++n<i;){var o=La(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Zo(i)&&ya(o,i)&&(Vo(e)||Ho(e))}function pa(e){return"function"!=typeof e.constructor||xa(e)?{}:Ur(Qe(e))}function va(e){return Vo(e)||Ho(e)||!!(ot&&e&&e[ot])}function ya(e,t){var n=r(e);return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function ga(e,t,n){if(!Qo(n))return!1;var i=r(t);return!!("number"==i?qo(n)&&ya(t,n.length):"string"==i&&t in n)&&Uo(n[t],e)}function ba(e,t){if(Vo(e))return!1;var n=r(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ss(e))||Z.test(e)||!Y.test(e)||null!=t&&e in Ee(t)}function ma(e){var t=ia(e),r=Br[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var n=na(r);return!!n&&e===n[0]}(_r&&ha(new _r(new ArrayBuffer(1)))!=C||kr&&ha(new kr)!=x||Sr&&ha(Sr.resolve())!=S||Er&&ha(new Er)!=I||Ir&&ha(new Ir)!=P)&&(ha=function(e){var t=Sn(e),r=t==k?e.constructor:n,i=r?ja(r):"";if(i)switch(i){case Or:return C;case Cr:return x;case Mr:return S;case Nr:return I;case Rr:return P}return t});var wa=Me?$o:vu;function xa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ce)}function _a(e){return e==e&&!Qo(e)}function ka(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Ee(r))}}function Sa(e,t,r){return t=yr(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=yr(n.length-t,0),o=we(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=we(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),yt(e,this,s)}}function Ea(e,t){return t.length<2?e:_n(e,ti(t,0,-1))}function Ia(e,t){for(var r=e.length,i=gr(t.length,r),a=Ai(e);i--;){var o=t[i];e[i]=ya(o,r)?a[o]:n}return e}function Aa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ta=Ma(Zn),Pa=ur||function(e,t){return it.setTimeout(e,t)},Oa=Ma(Qn);function Ca(e,t,r){var n=t+"";return Oa(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return bt(d,(function(r){var n="_."+r[0];t&r[1]&&!_t(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(oe):[]}(n),r)))}function Ma(e){var t=0,r=0;return function(){var i=br(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Na(e,t){var r=-1,i=e.length,a=i-1;for(t=t===n?i:t;++r<t;){var o=Wn(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}var Ra=function(e){var t=No((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,(function(e,r,n,i){t.push(n?i.replace(ce,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}();function La(e){if("string"==typeof e||ss(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ja(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Da(e){if(e instanceof Hr)return e.clone();var t=new zr(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ba=Jn((function(e,t){return Wo(e)?ln(e,yn(t,1,Wo,!0)):[]})),Ua=Jn((function(e,t){var r=Ja(t);return Wo(r)&&(r=n),Wo(e)?ln(e,yn(t,1,Wo,!0),oa(r,2)):[]})),Fa=Jn((function(e,t){var r=Ja(t);return Wo(r)&&(r=n),Wo(e)?ln(e,yn(t,1,Wo,!0),n,r):[]}));function za(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ds(r);return i<0&&(i=yr(n+i,0)),Ct(e,oa(t,3),i)}function Ha(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var a=i-1;return r!==n&&(a=ds(r),a=r<0?yr(i+a,0):gr(a,i-1)),Ct(e,oa(t,3),a,!0)}function Va(e){return null!=e&&e.length?yn(e,1):[]}function Ka(e){return e&&e.length?e[0]:n}var qa=Jn((function(e){var t=St(e,vi);return t.length&&t[0]===e[0]?Tn(t):[]})),Wa=Jn((function(e){var t=Ja(e),r=St(e,vi);return t===Ja(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Tn(r,oa(t,2)):[]})),Ga=Jn((function(e){var t=Ja(e),r=St(e,vi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Tn(r,n,t):[]}));function Ja(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Xa=Jn($a);function $a(e,t){return e&&e.length&&t&&t.length?Kn(e,t):e}var Ya=ea((function(e,t){var r=null==e?0:e.length,n=an(e,t);return qn(e,St(t,(function(e){return ya(e,r)?+e:e})).sort(Si)),n}));function Za(e){return null==e?e:xr.call(e)}var Qa=Jn((function(e){return ui(yn(e,1,Wo,!0))})),eo=Jn((function(e){var t=Ja(e);return Wo(t)&&(t=n),ui(yn(e,1,Wo,!0),oa(t,2))})),to=Jn((function(e){var t=Ja(e);return t="function"==typeof t?t:n,ui(yn(e,1,Wo,!0),n,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=xt(e,(function(e){if(Wo(e))return t=yr(e.length,t),!0})),Ft(t,(function(t){return St(e,jt(t))}))}function no(e,t){if(!e||!e.length)return[];var r=ro(e);return null==t?r:St(r,(function(e){return yt(t,n,e)}))}var io=Jn((function(e,t){return Wo(e)?ln(e,t):[]})),ao=Jn((function(e){return di(xt(e,Wo))})),oo=Jn((function(e){var t=Ja(e);return Wo(t)&&(t=n),di(xt(e,Wo),oa(t,2))})),so=Jn((function(e){var t=Ja(e);return t="function"==typeof t?t:n,di(xt(e,Wo),n,t)})),uo=Jn(ro),co=Jn((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,no(e,r)}));function lo(e){var t=Br(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var ho=ea((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,a=function(t){return an(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Hr&&ya(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:n}),new zr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(a)})),po=Pi((function(e,t,r){Re.call(e,r)?++e[r]:nn(e,r,1)})),vo=ji(za),yo=ji(Ha);function go(e,t){return(Vo(e)?bt:fn)(e,oa(t,3))}function bo(e,t){return(Vo(e)?mt:hn)(e,oa(t,3))}var mo=Pi((function(e,t,r){Re.call(e,r)?e[r].push(t):nn(e,r,[t])})),wo=Jn((function(e,t,r){var n=-1,i="function"==typeof t,a=qo(e)?we(e.length):[];return fn(e,(function(e){a[++n]=i?yt(t,e,r):Pn(e,t,r)})),a})),xo=Pi((function(e,t,r){nn(e,r,t)}));function _o(e,t){return(Vo(e)?St:Dn)(e,oa(t,3))}var ko=Pi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),So=Jn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ga(e,t[0],t[1])?t=[]:r>2&&ga(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,yn(t,1),[])})),Eo=$t||function(){return it.Date.now()};function Io(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Xi(e,u,n,n,n,n,t)}function Ao(e,t){var r;if("function"!=typeof t)throw new Te(i);return e=ds(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var To=Jn((function(e,t,r){var n=1;if(r.length){var i=tr(r,aa(To));n|=s}return Xi(e,n,t,r,i)})),Po=Jn((function(e,t,r){var n=3;if(r.length){var i=tr(r,aa(Po));n|=s}return Xi(t,n,e,r,i)}));function Oo(e,t,r){var a,o,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Te(i);function v(t){var r=a,i=o;return a=o=n,f=t,u=e.apply(i,r)}function y(e){return f=e,c=Pa(b,t),h?v(e):u}function g(e){var r=e-l;return l===n||r>=t||r<0||d&&e-f>=s}function b(){var e=Eo();if(g(e))return m(e);c=Pa(b,function(e){var r=t-(e-l);return d?gr(r,s-(e-f)):r}(e))}function m(e){return c=n,p&&a?v(e):(a=o=n,u)}function w(){var e=Eo(),r=g(e);if(a=arguments,o=this,l=e,r){if(c===n)return y(l);if(d)return wi(c),c=Pa(b,t),v(l)}return c===n&&(c=Pa(b,t)),u}return t=vs(t)||0,Qo(r)&&(h=!!r.leading,s=(d="maxWait"in r)?yr(vs(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p),w.cancel=function(){c!==n&&wi(c),f=0,a=l=o=c=n},w.flush=function(){return c===n?u:m(Eo())},w}var Co=Jn((function(e,t){return cn(e,1,t)})),Mo=Jn((function(e,t,r){return cn(e,vs(t)||0,r)}));function No(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Te(i);var r=function r(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(No.Cache||qr),r}function Ro(e){if("function"!=typeof e)throw new Te(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}No.Cache=qr;var Lo=bi((function(e,t){var r=(t=1==t.length&&Vo(t[0])?St(t[0],Ht(oa())):St(yn(t,1),Ht(oa()))).length;return Jn((function(n){for(var i=-1,a=gr(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return yt(e,this,n)}))})),jo=Jn((function(e,t){var r=tr(t,aa(jo));return Xi(e,s,n,t,r)})),Do=Jn((function(e,t){var r=tr(t,aa(Do));return Xi(e,64,n,t,r)})),Bo=ea((function(e,t){return Xi(e,256,n,n,n,t)}));function Uo(e,t){return e===t||e!=e&&t!=t}var Fo=Ki(En),zo=Ki((function(e,t){return e>=t})),Ho=On(function(){return arguments}())?On:function(e){return es(e)&&Re.call(e,"callee")&&!nt.call(e,"callee")},Vo=we.isArray,Ko=lt?Ht(lt):function(e){return es(e)&&Sn(e)==O};function qo(e){return null!=e&&Zo(e.length)&&!$o(e)}function Wo(e){return es(e)&&qo(e)}var Go=hr||vu,Jo=ft?Ht(ft):function(e){return es(e)&&Sn(e)==g};function Xo(e){if(!es(e))return!1;var t=Sn(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ns(e)}function $o(e){if(!Qo(e))return!1;var t=Sn(e);return t==m||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Yo(e){return"number"==typeof e&&e==ds(e)}function Zo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function Qo(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}function es(e){return null!=e&&"object"==r(e)}var ts=ht?Ht(ht):function(e){return es(e)&&ha(e)==x};function rs(e){return"number"==typeof e||es(e)&&Sn(e)==_}function ns(e){if(!es(e)||Sn(e)!=k)return!1;var t=Qe(e);if(null===t)return!0;var r=Re.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ne.call(r)==Be}var is=dt?Ht(dt):function(e){return es(e)&&Sn(e)==E},as=pt?Ht(pt):function(e){return es(e)&&ha(e)==I};function os(e){return"string"==typeof e||!Vo(e)&&es(e)&&Sn(e)==A}function ss(e){return"symbol"==r(e)||es(e)&&Sn(e)==T}var us=vt?Ht(vt):function(e){return es(e)&&Zo(e.length)&&!!Ye[Sn(e)]},cs=Ki(jn),ls=Ki((function(e,t){return e<=t}));function fs(e){if(!e)return[];if(qo(e))return os(e)?ir(e):Ai(e);if(ut&&e[ut])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[ut]());var t=ha(e);return(t==x?Qt:t==I?rr:Us)(e)}function hs(e){return e?(e=vs(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ds(e){var t=hs(e),r=t%1;return t==t?r?t-r:t:0}function ps(e){return e?on(ds(e),0,h):0}function vs(e){if("number"==typeof e)return e;if(ss(e))return f;if(Qo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zt(e);var r=de.test(e);return r||ve.test(e)?tt(e.slice(2),r?2:8):he.test(e)?f:+e}function ys(e){return Ti(e,Cs(e))}function gs(e){return null==e?"":si(e)}var bs=Oi((function(e,t){if(xa(t)||qo(t))Ti(t,Os(t),e);else for(var r in t)Re.call(t,r)&&Qr(e,r,t[r])})),ms=Oi((function(e,t){Ti(t,Cs(t),e)})),ws=Oi((function(e,t,r,n){Ti(t,Cs(t),e,n)})),xs=Oi((function(e,t,r,n){Ti(t,Os(t),e,n)})),_s=ea(an),ks=Jn((function(e,t){e=Ee(e);var r=-1,i=t.length,a=i>2?t[2]:n;for(a&&ga(t[0],t[1],a)&&(i=1);++r<i;)for(var o=t[r],s=Cs(o),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===n||Uo(f,Ce[l])&&!Re.call(e,l))&&(e[l]=o[l])}return e})),Ss=Jn((function(e){return e.push(n,Yi),yt(Ns,n,e)}));function Es(e,t,r){var i=null==e?n:_n(e,t);return i===n?r:i}function Is(e,t){return null!=e&&da(e,t,An)}var As=Ui((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),e[t]=r}),Qs(ru)),Ts=Ui((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=De.call(t)),Re.call(e,t)?e[t].push(r):e[t]=[r]}),oa),Ps=Jn(Pn);function Os(e){return qo(e)?Jr(e):Ln(e)}function Cs(e){return qo(e)?Jr(e,!0):function(e){if(!Qo(e))return function(e){var t=[];if(null!=e)for(var r in Ee(e))t.push(r);return t}(e);var t=xa(e),r=[];for(var n in e)("constructor"!=n||!t&&Re.call(e,n))&&r.push(n);return r}(e)}var Ms=Oi((function(e,t,r){Fn(e,t,r)})),Ns=Oi((function(e,t,r,n){Fn(e,t,r,n)})),Rs=ea((function(e,t){var r={};if(null==e)return r;var n=!1;t=St(t,(function(t){return t=gi(t,e),n||(n=t.length>1),t})),Ti(e,ra(e),r),n&&(r=sn(r,7,Zi));for(var i=t.length;i--;)ci(r,t[i]);return r})),Ls=ea((function(e,t){return null==e?{}:function(e,t){return Vn(e,t,(function(t,r){return Is(e,r)}))}(e,t)}));function js(e,t){if(null==e)return{};var r=St(ra(e),(function(e){return[e]}));return t=oa(t),Vn(e,r,(function(e,r){return t(e,r[0])}))}var Ds=Ji(Os),Bs=Ji(Cs);function Us(e){return null==e?[]:Vt(e,Os(e))}var Fs=Ri((function(e,t,r){return t=t.toLowerCase(),e+(r?zs(t):t)}));function zs(e){return Xs(gs(e).toLowerCase())}function Hs(e){return(e=gs(e))&&e.replace(ge,Jt).replace(Ke,"")}var Vs=Ri((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Ks=Ri((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),qs=Ni("toLowerCase"),Ws=Ri((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Gs=Ri((function(e,t,r){return e+(r?" ":"")+Xs(t)})),Js=Ri((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Xs=Ni("toUpperCase");function $s(e,t,r){return e=gs(e),(t=r?n:t)===n?function(e){return Je.test(e)}(e)?function(e){return e.match(We)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Ys=Jn((function(e,t){try{return yt(e,n,t)}catch(e){return Xo(e)?e:new _e(e)}})),Zs=ea((function(e,t){return bt(t,(function(t){t=La(t),nn(e,t,To(e[t],e))})),e}));function Qs(e){return function(){return e}}var eu=Di(),tu=Di(!0);function ru(e){return e}function nu(e){return Rn("function"==typeof e?e:sn(e,1))}var iu=Jn((function(e,t){return function(r){return Pn(r,e,t)}})),au=Jn((function(e,t){return function(r){return Pn(e,r,t)}}));function ou(e,t,r){var n=Os(t),i=xn(t,n);null!=r||Qo(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=xn(t,Os(t)));var a=!(Qo(r)&&"chain"in r&&!r.chain),o=$o(e);return bt(i,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__),i=r.__actions__=Ai(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Et([this.value()],arguments))})})),e}function su(){}var uu=zi(St),cu=zi(wt),lu=zi(Tt);function fu(e){return ba(e)?jt(La(e)):function(e){return function(t){return _n(t,e)}}(e)}var hu=Vi(),du=Vi(!0);function pu(){return[]}function vu(){return!1}var yu,gu=Fi((function(e,t){return e+t}),0),bu=Wi("ceil"),mu=Fi((function(e,t){return e/t}),1),wu=Wi("floor"),xu=Fi((function(e,t){return e*t}),1),_u=Wi("round"),ku=Fi((function(e,t){return e-t}),0);return Br.after=function(e,t){if("function"!=typeof t)throw new Te(i);return e=ds(e),function(){if(--e<1)return t.apply(this,arguments)}},Br.ary=Io,Br.assign=bs,Br.assignIn=ms,Br.assignInWith=ws,Br.assignWith=xs,Br.at=_s,Br.before=Ao,Br.bind=To,Br.bindAll=Zs,Br.bindKey=Po,Br.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vo(e)?e:[e]},Br.chain=lo,Br.chunk=function(e,t,r){t=(r?ga(e,t,r):t===n)?1:yr(ds(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=we(cr(i/t));a<i;)s[o++]=ti(e,a,a+=t);return s},Br.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i},Br.concat=function(){var e=arguments.length;if(!e)return[];for(var t=we(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Et(Vo(r)?Ai(r):[r],yn(t,1))},Br.cond=function(e){var t=null==e?0:e.length,r=oa();return e=t?St(e,(function(e){if("function"!=typeof e[1])throw new Te(i);return[r(e[0]),e[1]]})):[],Jn((function(r){for(var n=-1;++n<t;){var i=e[n];if(yt(i[0],this,r))return yt(i[1],this,r)}}))},Br.conforms=function(e){return function(e){var t=Os(e);return function(r){return un(r,e,t)}}(sn(e,1))},Br.constant=Qs,Br.countBy=po,Br.create=function(e,t){var r=Ur(e);return null==t?r:rn(r,t)},Br.curry=function e(t,r,i){var a=Xi(t,8,n,n,n,n,n,r=i?n:r);return a.placeholder=e.placeholder,a},Br.curryRight=function e(t,r,i){var a=Xi(t,16,n,n,n,n,n,r=i?n:r);return a.placeholder=e.placeholder,a},Br.debounce=Oo,Br.defaults=ks,Br.defaultsDeep=Ss,Br.defer=Co,Br.delay=Mo,Br.difference=Ba,Br.differenceBy=Ua,Br.differenceWith=Fa,Br.drop=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=r||t===n?1:ds(t))<0?0:t,i):[]},Br.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,0,(t=i-(t=r||t===n?1:ds(t)))<0?0:t):[]},Br.dropRightWhile=function(e,t){return e&&e.length?fi(e,oa(t,3),!0,!0):[]},Br.dropWhile=function(e,t){return e&&e.length?fi(e,oa(t,3),!0):[]},Br.fill=function(e,t,r,i){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&ga(e,t,r)&&(r=0,i=a),function(e,t,r,i){var a=e.length;for((r=ds(r))<0&&(r=-r>a?0:a+r),(i=i===n||i>a?a:ds(i))<0&&(i+=a),i=r>i?0:ps(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},Br.filter=function(e,t){return(Vo(e)?xt:vn)(e,oa(t,3))},Br.flatMap=function(e,t){return yn(_o(e,t),1)},Br.flatMapDeep=function(e,t){return yn(_o(e,t),c)},Br.flatMapDepth=function(e,t,r){return r=r===n?1:ds(r),yn(_o(e,t),r)},Br.flatten=Va,Br.flattenDeep=function(e){return null!=e&&e.length?yn(e,c):[]},Br.flattenDepth=function(e,t){return null!=e&&e.length?yn(e,t=t===n?1:ds(t)):[]},Br.flip=function(e){return Xi(e,512)},Br.flow=eu,Br.flowRight=tu,Br.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Br.functions=function(e){return null==e?[]:xn(e,Os(e))},Br.functionsIn=function(e){return null==e?[]:xn(e,Cs(e))},Br.groupBy=mo,Br.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},Br.intersection=qa,Br.intersectionBy=Wa,Br.intersectionWith=Ga,Br.invert=As,Br.invertBy=Ts,Br.invokeMap=wo,Br.iteratee=nu,Br.keyBy=xo,Br.keys=Os,Br.keysIn=Cs,Br.map=_o,Br.mapKeys=function(e,t){var r={};return t=oa(t,3),mn(e,(function(e,n,i){nn(r,t(e,n,i),e)})),r},Br.mapValues=function(e,t){var r={};return t=oa(t,3),mn(e,(function(e,n,i){nn(r,n,t(e,n,i))})),r},Br.matches=function(e){return Bn(sn(e,1))},Br.matchesProperty=function(e,t){return Un(e,sn(t,1))},Br.memoize=No,Br.merge=Ms,Br.mergeWith=Ns,Br.method=iu,Br.methodOf=au,Br.mixin=ou,Br.negate=Ro,Br.nthArg=function(e){return e=ds(e),Jn((function(t){return zn(t,e)}))},Br.omit=Rs,Br.omitBy=function(e,t){return js(e,Ro(oa(t)))},Br.once=function(e){return Ao(2,e)},Br.orderBy=function(e,t,r,i){return null==e?[]:(Vo(t)||(t=null==t?[]:[t]),Vo(r=i?n:r)||(r=null==r?[]:[r]),Hn(e,t,r))},Br.over=uu,Br.overArgs=Lo,Br.overEvery=cu,Br.overSome=lu,Br.partial=jo,Br.partialRight=Do,Br.partition=ko,Br.pick=Ls,Br.pickBy=js,Br.property=fu,Br.propertyOf=function(e){return function(t){return null==e?n:_n(e,t)}},Br.pull=Xa,Br.pullAll=$a,Br.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Kn(e,t,oa(r,2)):e},Br.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Kn(e,t,n,r):e},Br.pullAt=Ya,Br.range=hu,Br.rangeRight=du,Br.rearg=Bo,Br.reject=function(e,t){return(Vo(e)?xt:vn)(e,Ro(oa(t,3)))},Br.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=oa(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return qn(e,i),r},Br.rest=function(e,t){if("function"!=typeof e)throw new Te(i);return Jn(e,t=t===n?t:ds(t))},Br.reverse=Za,Br.sampleSize=function(e,t,r){return t=(r?ga(e,t,r):t===n)?1:ds(t),(Vo(e)?$r:$n)(e,t)},Br.set=function(e,t,r){return null==e?e:Yn(e,t,r)},Br.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Yn(e,t,r,i)},Br.shuffle=function(e){return(Vo(e)?Yr:ei)(e)},Br.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ga(e,t,r)?(t=0,r=i):(t=null==t?0:ds(t),r=r===n?i:ds(r)),ti(e,t,r)):[]},Br.sortBy=So,Br.sortedUniq=function(e){return e&&e.length?ai(e):[]},Br.sortedUniqBy=function(e,t){return e&&e.length?ai(e,oa(t,2)):[]},Br.split=function(e,t,r){return r&&"number"!=typeof r&&ga(e,t,r)&&(t=r=n),(r=r===n?h:r>>>0)?(e=gs(e))&&("string"==typeof t||null!=t&&!is(t))&&!(t=si(t))&&Zt(e)?mi(ir(e),0,r):e.split(t,r):[]},Br.spread=function(e,t){if("function"!=typeof e)throw new Te(i);return t=null==t?0:yr(ds(t),0),Jn((function(r){var n=r[t],i=mi(r,0,t);return n&&Et(i,n),yt(e,this,i)}))},Br.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Br.take=function(e,t,r){return e&&e.length?ti(e,0,(t=r||t===n?1:ds(t))<0?0:t):[]},Br.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=i-(t=r||t===n?1:ds(t)))<0?0:t,i):[]},Br.takeRightWhile=function(e,t){return e&&e.length?fi(e,oa(t,3),!1,!0):[]},Br.takeWhile=function(e,t){return e&&e.length?fi(e,oa(t,3)):[]},Br.tap=function(e,t){return t(e),e},Br.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new Te(i);return Qo(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Oo(e,t,{leading:n,maxWait:t,trailing:a})},Br.thru=fo,Br.toArray=fs,Br.toPairs=Ds,Br.toPairsIn=Bs,Br.toPath=function(e){return Vo(e)?St(e,La):ss(e)?[e]:Ai(Ra(gs(e)))},Br.toPlainObject=ys,Br.transform=function(e,t,r){var n=Vo(e),i=n||Go(e)||us(e);if(t=oa(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:Qo(e)&&$o(a)?Ur(Qe(e)):{}}return(i?bt:mn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Br.unary=function(e){return Io(e,1)},Br.union=Qa,Br.unionBy=eo,Br.unionWith=to,Br.uniq=function(e){return e&&e.length?ui(e):[]},Br.uniqBy=function(e,t){return e&&e.length?ui(e,oa(t,2)):[]},Br.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?ui(e,n,t):[]},Br.unset=function(e,t){return null==e||ci(e,t)},Br.unzip=ro,Br.unzipWith=no,Br.update=function(e,t,r){return null==e?e:li(e,t,yi(r))},Br.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:li(e,t,yi(r),i)},Br.values=Us,Br.valuesIn=function(e){return null==e?[]:Vt(e,Cs(e))},Br.without=io,Br.words=$s,Br.wrap=function(e,t){return jo(yi(t),e)},Br.xor=ao,Br.xorBy=oo,Br.xorWith=so,Br.zip=uo,Br.zipObject=function(e,t){return pi(e||[],t||[],Qr)},Br.zipObjectDeep=function(e,t){return pi(e||[],t||[],Yn)},Br.zipWith=co,Br.entries=Ds,Br.entriesIn=Bs,Br.extend=ms,Br.extendWith=ws,ou(Br,Br),Br.add=gu,Br.attempt=Ys,Br.camelCase=Fs,Br.capitalize=zs,Br.ceil=bu,Br.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=vs(r))==r?r:0),t!==n&&(t=(t=vs(t))==t?t:0),on(vs(e),t,r)},Br.clone=function(e){return sn(e,4)},Br.cloneDeep=function(e){return sn(e,5)},Br.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:n)},Br.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:n)},Br.conformsTo=function(e,t){return null==t||un(e,t,Os(t))},Br.deburr=Hs,Br.defaultTo=function(e,t){return null==e||e!=e?t:e},Br.divide=mu,Br.endsWith=function(e,t,r){e=gs(e),t=si(t);var i=e.length,a=r=r===n?i:on(ds(r),0,i);return(r-=t.length)>=0&&e.slice(r,a)==t},Br.eq=Uo,Br.escape=function(e){return(e=gs(e))&&G.test(e)?e.replace(q,Xt):e},Br.escapeRegExp=function(e){return(e=gs(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Br.every=function(e,t,r){var i=Vo(e)?wt:dn;return r&&ga(e,t,r)&&(t=n),i(e,oa(t,3))},Br.find=vo,Br.findIndex=za,Br.findKey=function(e,t){return Ot(e,oa(t,3),mn)},Br.findLast=yo,Br.findLastIndex=Ha,Br.findLastKey=function(e,t){return Ot(e,oa(t,3),wn)},Br.floor=wu,Br.forEach=go,Br.forEachRight=bo,Br.forIn=function(e,t){return null==e?e:gn(e,oa(t,3),Cs)},Br.forInRight=function(e,t){return null==e?e:bn(e,oa(t,3),Cs)},Br.forOwn=function(e,t){return e&&mn(e,oa(t,3))},Br.forOwnRight=function(e,t){return e&&wn(e,oa(t,3))},Br.get=Es,Br.gt=Fo,Br.gte=zo,Br.has=function(e,t){return null!=e&&da(e,t,In)},Br.hasIn=Is,Br.head=Ka,Br.identity=ru,Br.includes=function(e,t,r,n){e=qo(e)?e:Us(e),r=r&&!n?ds(r):0;var i=e.length;return r<0&&(r=yr(i+r,0)),os(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Mt(e,t,r)>-1},Br.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ds(r);return i<0&&(i=yr(n+i,0)),Mt(e,t,i)},Br.inRange=function(e,t,r){return t=hs(t),r===n?(r=t,t=0):r=hs(r),function(e,t,r){return e>=gr(t,r)&&e<yr(t,r)}(e=vs(e),t,r)},Br.invoke=Ps,Br.isArguments=Ho,Br.isArray=Vo,Br.isArrayBuffer=Ko,Br.isArrayLike=qo,Br.isArrayLikeObject=Wo,Br.isBoolean=function(e){return!0===e||!1===e||es(e)&&Sn(e)==y},Br.isBuffer=Go,Br.isDate=Jo,Br.isElement=function(e){return es(e)&&1===e.nodeType&&!ns(e)},Br.isEmpty=function(e){if(null==e)return!0;if(qo(e)&&(Vo(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||us(e)||Ho(e)))return!e.length;var t=ha(e);if(t==x||t==I)return!e.size;if(xa(e))return!Ln(e).length;for(var r in e)if(Re.call(e,r))return!1;return!0},Br.isEqual=function(e,t){return Cn(e,t)},Br.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Cn(e,t,n,r):!!i},Br.isError=Xo,Br.isFinite=function(e){return"number"==typeof e&&dr(e)},Br.isFunction=$o,Br.isInteger=Yo,Br.isLength=Zo,Br.isMap=ts,Br.isMatch=function(e,t){return e===t||Mn(e,t,ua(t))},Br.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Mn(e,t,ua(t),r)},Br.isNaN=function(e){return rs(e)&&e!=+e},Br.isNative=function(e){if(wa(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nn(e)},Br.isNil=function(e){return null==e},Br.isNull=function(e){return null===e},Br.isNumber=rs,Br.isObject=Qo,Br.isObjectLike=es,Br.isPlainObject=ns,Br.isRegExp=is,Br.isSafeInteger=function(e){return Yo(e)&&e>=-9007199254740991&&e<=l},Br.isSet=as,Br.isString=os,Br.isSymbol=ss,Br.isTypedArray=us,Br.isUndefined=function(e){return e===n},Br.isWeakMap=function(e){return es(e)&&ha(e)==P},Br.isWeakSet=function(e){return es(e)&&"[object WeakSet]"==Sn(e)},Br.join=function(e,t){return null==e?"":pr.call(e,t)},Br.kebabCase=Vs,Br.last=Ja,Br.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var a=i;return r!==n&&(a=(a=ds(r))<0?yr(i+a,0):gr(a,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,a):Ct(e,Rt,a,!0)},Br.lowerCase=Ks,Br.lowerFirst=qs,Br.lt=cs,Br.lte=ls,Br.max=function(e){return e&&e.length?pn(e,ru,En):n},Br.maxBy=function(e,t){return e&&e.length?pn(e,oa(t,2),En):n},Br.mean=function(e){return Lt(e,ru)},Br.meanBy=function(e,t){return Lt(e,oa(t,2))},Br.min=function(e){return e&&e.length?pn(e,ru,jn):n},Br.minBy=function(e,t){return e&&e.length?pn(e,oa(t,2),jn):n},Br.stubArray=pu,Br.stubFalse=vu,Br.stubObject=function(){return{}},Br.stubString=function(){return""},Br.stubTrue=function(){return!0},Br.multiply=xu,Br.nth=function(e,t){return e&&e.length?zn(e,ds(t)):n},Br.noConflict=function(){return it._===this&&(it._=Ue),this},Br.noop=su,Br.now=Eo,Br.pad=function(e,t,r){e=gs(e);var n=(t=ds(t))?nr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Hi(lr(i),r)+e+Hi(cr(i),r)},Br.padEnd=function(e,t,r){e=gs(e);var n=(t=ds(t))?nr(e):0;return t&&n<t?e+Hi(t-n,r):e},Br.padStart=function(e,t,r){e=gs(e);var n=(t=ds(t))?nr(e):0;return t&&n<t?Hi(t-n,r)+e:e},Br.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),mr(gs(e).replace(re,""),t||0)},Br.random=function(e,t,r){if(r&&"boolean"!=typeof r&&ga(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=hs(e),t===n?(t=e,e=0):t=hs(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var a=wr();return gr(e+a*(t-e+et("1e-"+((a+"").length-1))),t)}return Wn(e,t)},Br.reduce=function(e,t,r){var n=Vo(e)?It:Bt,i=arguments.length<3;return n(e,oa(t,4),r,i,fn)},Br.reduceRight=function(e,t,r){var n=Vo(e)?At:Bt,i=arguments.length<3;return n(e,oa(t,4),r,i,hn)},Br.repeat=function(e,t,r){return t=(r?ga(e,t,r):t===n)?1:ds(t),Gn(gs(e),t)},Br.replace=function(){var e=arguments,t=gs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Br.result=function(e,t,r){var i=-1,a=(t=gi(t,e)).length;for(a||(a=1,e=n);++i<a;){var o=null==e?n:e[La(t[i])];o===n&&(i=a,o=r),e=$o(o)?o.call(e):o}return e},Br.round=_u,Br.runInContext=e,Br.sample=function(e){return(Vo(e)?Xr:Xn)(e)},Br.size=function(e){if(null==e)return 0;if(qo(e))return os(e)?nr(e):e.length;var t=ha(e);return t==x||t==I?e.size:Ln(e).length},Br.snakeCase=Ws,Br.some=function(e,t,r){var i=Vo(e)?Tt:ri;return r&&ga(e,t,r)&&(t=n),i(e,oa(t,3))},Br.sortedIndex=function(e,t){return ni(e,t)},Br.sortedIndexBy=function(e,t,r){return ii(e,t,oa(r,2))},Br.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ni(e,t);if(n<r&&Uo(e[n],t))return n}return-1},Br.sortedLastIndex=function(e,t){return ni(e,t,!0)},Br.sortedLastIndexBy=function(e,t,r){return ii(e,t,oa(r,2),!0)},Br.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ni(e,t,!0)-1;if(Uo(e[r],t))return r}return-1},Br.startCase=Gs,Br.startsWith=function(e,t,r){return e=gs(e),r=null==r?0:on(ds(r),0,e.length),t=si(t),e.slice(r,r+t.length)==t},Br.subtract=ku,Br.sum=function(e){return e&&e.length?Ut(e,ru):0},Br.sumBy=function(e,t){return e&&e.length?Ut(e,oa(t,2)):0},Br.template=function(e,t,r){var i=Br.templateSettings;r&&ga(e,t,r)&&(t=n),e=gs(e),t=ws({},t,i,$i);var a,o,s=ws({},t.imports,i.imports,$i),u=Os(s),c=Vt(s,u),l=0,f=t.interpolate||be,h="__p += '",d=Ie((t.escape||be).source+"|"+f.source+"|"+(f===$?le:be).source+"|"+(t.evaluate||be).source+"|$","g"),p="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$e+"]")+"\n";e.replace(d,(function(t,r,n,i,s,u){return n||(n=i),h+=e.slice(l,u).replace(me,Yt),r&&(a=!0,h+="' +\n__e("+r+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var v=Re.call(t,"variable")&&t.variable;if(v){if(ue.test(v))throw new _e("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(z,""):h).replace(H,"$1").replace(V,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Ys((function(){return ke(u,p+"return "+h).apply(n,c)}));if(y.source=h,Xo(y))throw y;return y},Br.times=function(e,t){if((e=ds(e))<1||e>l)return[];var r=h,n=gr(e,h);t=oa(t),e-=h;for(var i=Ft(n,t);++r<e;)t(r);return i},Br.toFinite=hs,Br.toInteger=ds,Br.toLength=ps,Br.toLower=function(e){return gs(e).toLowerCase()},Br.toNumber=vs,Br.toSafeInteger=function(e){return e?on(ds(e),-9007199254740991,l):0===e?e:0},Br.toString=gs,Br.toUpper=function(e){return gs(e).toUpperCase()},Br.trim=function(e,t,r){if((e=gs(e))&&(r||t===n))return zt(e);if(!e||!(t=si(t)))return e;var i=ir(e),a=ir(t);return mi(i,qt(i,a),Wt(i,a)+1).join("")},Br.trimEnd=function(e,t,r){if((e=gs(e))&&(r||t===n))return e.slice(0,ar(e)+1);if(!e||!(t=si(t)))return e;var i=ir(e);return mi(i,0,Wt(i,ir(t))+1).join("")},Br.trimStart=function(e,t,r){if((e=gs(e))&&(r||t===n))return e.replace(re,"");if(!e||!(t=si(t)))return e;var i=ir(e);return mi(i,qt(i,ir(t))).join("")},Br.truncate=function(e,t){var r=30,i="...";if(Qo(t)){var a="separator"in t?t.separator:a;r="length"in t?ds(t.length):r,i="omission"in t?si(t.omission):i}var o=(e=gs(e)).length;if(Zt(e)){var s=ir(e);o=s.length}if(r>=o)return e;var u=r-nr(i);if(u<1)return i;var c=s?mi(s,0,u).join(""):e.slice(0,u);if(a===n)return c+i;if(s&&(u+=c.length-u),is(a)){if(e.slice(u).search(a)){var l,f=c;for(a.global||(a=Ie(a.source,gs(fe.exec(a))+"g")),a.lastIndex=0;l=a.exec(f);)var h=l.index;c=c.slice(0,h===n?u:h)}}else if(e.indexOf(si(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+i},Br.unescape=function(e){return(e=gs(e))&&W.test(e)?e.replace(K,or):e},Br.uniqueId=function(e){var t=++Le;return gs(e)+t},Br.upperCase=Js,Br.upperFirst=Xs,Br.each=go,Br.eachRight=bo,Br.first=Ka,ou(Br,(yu={},mn(Br,(function(e,t){Re.call(Br.prototype,t)||(yu[t]=e)})),yu),{chain:!1}),Br.VERSION="4.17.21",bt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Br[e].placeholder=Br})),bt(["drop","take"],(function(e,t){Hr.prototype[e]=function(r){r=r===n?1:yr(ds(r),0);var i=this.__filtered__&&!t?new Hr(this):this.clone();return i.__filtered__?i.__takeCount__=gr(r,i.__takeCount__):i.__views__.push({size:gr(r,h),type:e+(i.__dir__<0?"Right":"")}),i},Hr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),bt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:oa(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),bt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),bt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(ru)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Jn((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return Pn(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter(Ro(oa(e)))},Hr.prototype.slice=function(e,t){e=ds(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Hr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=ds(t))<0?r.dropRight(-t):r.take(t-e)),r)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(h)},mn(Hr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=Br[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);a&&(Br.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Hr,c=s[0],l=u||Vo(t),f=function(e){var t=a.apply(Br,Et([e],s));return i&&h?t[0]:t};l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&l){t=v?t:new Hr(this);var y=e.apply(t,s);return y.__actions__.push({func:fo,args:[f],thisArg:n}),new zr(y,h)}return p&&v?e.apply(this,s):(y=this.thru(f),p?i?y.value()[0]:y.value():y)})})),bt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Br.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Vo(i)?i:[],e)}return this[r]((function(r){return t.apply(Vo(r)?r:[],e)}))}})),mn(Hr.prototype,(function(e,t){var r=Br[t];if(r){var n=r.name+"";Re.call(Pr,n)||(Pr[n]=[]),Pr[n].push({name:t,func:r})}})),Pr[Bi(n,2).name]=[{name:"wrapper",func:n}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Vo(e),n=t<0,i=r?e.length:0,a=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=gr(t,e+o);break;case"takeRight":e=yr(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=n?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=gr(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return hi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,y=e[c+=t];++v<f;){var g=l[v],b=g.iteratee,m=g.type,w=b(y);if(2==m)y=w;else if(!w){if(1==m)continue e;break e}}p[h++]=y}return p},Br.prototype.at=ho,Br.prototype.chain=function(){return lo(this)},Br.prototype.commit=function(){return new zr(this.value(),this.__chain__)},Br.prototype.next=function(){this.__values__===n&&(this.__values__=fs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Br.prototype.plant=function(e){for(var t,r=this;r instanceof Fr;){var i=Da(r);i.__index__=0,i.__values__=n,t?a.__wrapped__=i:t=i;var a=i;r=r.__wrapped__}return a.__wrapped__=e,t},Br.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hr){var t=e;return this.__actions__.length&&(t=new Hr(this)),(t=t.reverse()).__actions__.push({func:fo,args:[Za],thisArg:n}),new zr(t,this.__chain__)}return this.thru(Za)},Br.prototype.toJSON=Br.prototype.valueOf=Br.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Br.prototype.first=Br.prototype.head,ut&&(Br.prototype[ut]=function(){return this}),Br}();ot?((ot.exports=sr)._=sr,at._=sr):it._=sr}).call($t)}(jH,jH.exports);var DH,BH,UH=OF.validate,FH=CF,zH=MF,HH=EH.exports,VH=jH.exports,KH=function(){function e(t){if(a(this,e),!UH(t))throw new Error("JSON is invalid. Cannot construct Encoder.");this.json=t}return s(e,[{key:"constructRootMap",value:function(){var e=this;return Object.keys(this.json).map((function(t){var r=e.json[t];return"string"==typeof r&&(r=zH.encode(pr.from(r,"hex"))),r instanceof Array&&("anchors"===t&&(r=e.constructAnchorsMap(r)),"path"===t&&(r=e.constructPathMap(r))),[FH.root[t],r]}))}},{key:"constructAnchorsMap",value:function(e){return e.map((function(e){var t=e.split(":");return t.shift(),t.map((function(e,r){return 0===r?[r,FH.chain[e].id]:1===r?[r,FH.chain[t[r-1]].networks[e]]:[r,zH.encode(pr.from(e,"hex"))]}))}))}},{key:"constructPathMap",value:function(e){return VH.flatten(e.map((function(e){return Object.keys(e).map((function(t){return[FH.path[t],zH.encode(pr.from(e[t],"hex"))]}))})))}},{key:"encode",value:function(){var e=this.constructRootMap(),t=zH.encode(e);return HH.encode("base58btc",t)}}]),e}(),qH=CF,WH=MF,GH=EH.exports,JH=jH.exports,XH=function(){function e(t){if(a(this,e),!GH.isEncoded(t))throw new Error("Base58 string is invalid. Cannot construct Decoder.");this.base58=t}return s(e,[{key:"constructRootJSON",value:function(e){var t=this,r=JH.invert(qH.root);return e.reduce((function(e,n){var i=r[n[0]],a=n[1];return a instanceof Array&&("anchors"===i&&(a=t.constructAnchorsJSON(a)),"path"===i&&(a=t.constructPathJSON(a))),a instanceof pr&&(a=WH.decode(a).toString("hex")),e[i]=a,e}),{})}},{key:"constructAnchorsJSON",value:function(e){var t=JH.invertBy(qH.chain,(function(e){return e.id}));return e.map((function(e){return e.reduce((function(e,r){if(0===r[0])return"".concat(e,":").concat(t[r[1]]);if(1===r[0]){var n=e.split(":").pop();return"".concat(e,":").concat(JH.invert(qH.chain[n].networks)[r[1]])}return"".concat(e,":").concat(WH.decode(r[1]).toString("hex"))}),"blink")}))}},{key:"constructPathJSON",value:function(e){var t=JH.invert(qH.path);return e.map((function(e){return u({},t[e[0]],WH.decode(e[1]).toString("hex"))}))}},{key:"decode",value:function(){var e=GH.decode(this.base58),t=WH.decode(e);return this.constructRootJSON(t)}}]),e}(),$H={Encoder:KH,Decoder:XH,Keymap:CF},YH=s((function e(t){a(this,e)}));function ZH(e){return Array.isArray(e)?e.find((function(e){return"ChainedProof2021"!==e.type})).verificationMethod:e.verificationMethod}!function(e){e.getTransactionId="getTransactionId",e.computeLocalHash="computeLocalHash",e.fetchRemoteHash="fetchRemoteHash",e.parseIssuerKeys="parseIssuerKeys",e.compareHashes="compareHashes",e.checkImagesIntegrity="checkImagesIntegrity",e.checkMerkleRoot="checkMerkleRoot",e.checkReceipt="checkReceipt",e.retrieveVerificationMethodPublicKey="retrieveVerificationMethodPublicKey",e.deriveIssuingAddressFromPublicKey="deriveIssuingAddressFromPublicKey",e.compareIssuingAddress="compareIssuingAddress",e.checkAuthenticity="checkAuthenticity"}(DH||(DH={}));var QH=function(e){c(E,e);var t,r,n,o,l,f,h,d,p,v,y,b,w,x,_,k,S=m(E);function E(e){var t,r;return a(this,E),u(g(t=S.call(this,e)),"proofVerificationProcess",[DH.getTransactionId,DH.computeLocalHash,DH.fetchRemoteHash,DH.compareHashes,DH.checkMerkleRoot,DH.checkReceipt,DH.parseIssuerKeys,DH.checkAuthenticity]),u(g(t),"identityVerificationProcess",[DH.retrieveVerificationMethodPublicKey,DH.deriveIssuingAddressFromPublicKey,DH.compareIssuingAddress]),u(g(t),"transactionId",void 0),u(g(t),"localHash",void 0),u(g(t),"documentToVerify",void 0),u(g(t),"txData",void 0),u(g(t),"chain",void 0),u(g(t),"explorerAPIs",void 0),u(g(t),"receipt",void 0),u(g(t),"issuerPublicKeyList",void 0),u(g(t),"issuer",void 0),u(g(t),"verificationMethodPublicKey",void 0),u(g(t),"derivedIssuingAddress",void 0),u(g(t),"hasDid",void 0),u(g(t),"proof",void 0),u(g(t),"type","MerkleProof2019"),t._doAction=e.actionMethod,t.documentToVerify=e.document,t.explorerAPIs=e.explorerAPIs,t.proof=e.proof,t.issuer=e.issuer,t.validateProofType(),t.receipt=(r=t.proof,new $H.Decoder(r.proofValue).decode()),t.chain=Uf.certificates.getChain("",t.receipt),t.transactionId=Uf.certificates.getTransactionId(t.receipt),t.setHasDid(),t}return s(E,[{key:"verifyProof",value:(k=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setIssuerFromProofVerificationMethod();case 2:return e.next=4,this.verifyProcess(this.proofVerificationProcess);case 4:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"verifyIdentity",value:(_=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hasDid,!e.t0){e.next=4;break}return e.next=4,this.verifyProcess(this.identityVerificationProcess);case 4:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"getProofVerificationSteps",value:function(e){return this.proofVerificationProcess.map((function(t){return Uf.verifier.convertToVerificationSubsteps(e,t)}))}},{key:"getIdentityVerificationSteps",value:function(e){return this.hasDid?this.identityVerificationProcess.map((function(t){return Uf.verifier.convertToVerificationSubsteps(e,t)})):[]}},{key:"getIssuerPublicKey",value:function(){return this.txData?this.txData.issuingAddress:(console.error("Trying to access issuing address when txData not available yet. Did you run the `verify` method yet?"),"")}},{key:"getIssuerName",value:function(){return this.issuer.name}},{key:"getIssuerProfileDomain",value:function(){var e;return null===(e=new URL(this.getIssuerProfileUrl()))||void 0===e?void 0:e.hostname}},{key:"getIssuerProfileUrl",value:function(){return this.issuer.id}},{key:"getSigningDate",value:function(){return this.proof.created}},{key:"getChain",value:function(){return this.chain}},{key:"getReceipt",value:function(){return this.receipt}},{key:"getTransactionIdString",value:function(){return Uf.certificates.getTransactionId(this.getReceipt())}},{key:"getTransactionLink",value:function(){return Uf.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).transactionLink}},{key:"getRawTransactionLink",value:function(){return Uf.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).rawTransactionLink}},{key:"isProofChain",value:function(){return"ChainedProof2021"===this.proof.type}},{key:"setIssuerFromProofVerificationMethod",value:(x=i(Wt.mark((function e(){var t;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isProofChain()){e.next=5;break}return t=this.proof.verificationMethod.split("#")[0],e.next=4,Uf.verifier.getIssuerProfile(t);case 4:this.issuer=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"setHasDid",value:function(){if(this.isProofChain()){var e=this.proof.verificationMethod.split("#")[0];this.hasDid=Mc(e)}else this.hasDid=!!this.issuer.didDocument}},{key:"validateProofType",value:function(){var e=this.isProofChain()?this.proof.chainedProofType:this.proof.type;if(e!==this.type)throw new Error("Incompatible proof type passed. Expected: ".concat(this.type,", Got: ").concat(e))}},{key:"verifyProcess",value:(w=i(Wt.mark((function e(t){var r,n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=C(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=11;break}if(this[i=n.value]){e.next=7;break}return e.abrupt("return",void console.error("verification logic for",i,"not implemented"));case 7:return e.next=9,this[i]();case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))),function(e){return w.apply(this,arguments)})},{key:"_doAction",value:(b=i(Wt.mark((function e(t,r,n){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("doAction method needs to be overwritten by injecting from CVJS");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return b.apply(this,arguments)})},{key:"getTransactionId",value:(y=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.getTransactionId,(function(){return hB(t.transactionId)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"computeLocalHash",value:(v=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.computeLocalHash,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fy(t.documentToVerify);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.type);case 2:this.localHash=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"fetchRemoteHash",value:(p=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.fetchRemoteHash,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uf.verifier.lookForTx({transactionId:t.transactionId,chain:t.chain.code,explorerAPIs:t.explorerAPIs});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.type);case 2:this.txData=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"compareHashes",value:(d=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.compareHashes,(function(){return uB(t.localHash,t.receipt.targetHash)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"checkMerkleRoot",value:(h=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.checkMerkleRoot,(function(){return cB(t.receipt.merkleRoot,t.txData.remoteHash)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"checkReceipt",value:(f=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.checkReceipt,(function(){return fB(t.receipt)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"parseIssuerKeys",value:(l=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.parseIssuerKeys,(function(){return Uf.verifier.parseIssuerKeys(t.issuer)}),this.type);case 2:this.issuerPublicKeyList=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"checkAuthenticity",value:(o=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.checkAuthenticity,(function(){return lB(t.issuerPublicKeyList,t.txData.issuingAddress,t.txData.time)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"retrieveVerificationMethodPublicKey",value:(n=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.retrieveVerificationMethodPublicKey,(function(){return function(e,t){var r=t.split("#")[1],n=e.verificationMethod.filter((function(e){return e.id==="#".concat(r)}))[0];if(!n)throw new wa("retrieveVerificationMethodPublicKey","".concat(Hy," - ").concat(Uf.i18n.getText("errors","retrieveVerificationMethodPublicKey")));return n}(t.issuer.didDocument,ZH(t.proof))}),this.type);case 2:this.verificationMethodPublicKey=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deriveIssuingAddressFromPublicKey",value:(r=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.deriveIssuingAddressFromPublicKey,(function(){return sB(t.verificationMethodPublicKey,t.chain)}),this.type);case 2:this.derivedIssuingAddress=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"compareIssuingAddress",value:(t=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(DH.compareIssuingAddress,(function(){return function(e,t){if(e!==t)throw new wa("compareIssuingAddress","".concat(Hy," - ").concat(Uf.i18n.getText("errors","compareIssuingAddress")))}(t.txData.issuingAddress,t.derivedIssuingAddress)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),E}(YH);!function(e){e.getTransactionId="getTransactionId",e.computeLocalHash="computeLocalHash",e.fetchRemoteHash="fetchRemoteHash",e.parseIssuerKeys="parseIssuerKeys",e.compareHashes="compareHashes",e.checkMerkleRoot="checkMerkleRoot",e.checkReceipt="checkReceipt",e.checkAuthenticity="checkAuthenticity"}(BH||(BH={}));var eV=function(e){c(w,e);var t,r,n,o,l,f,h,d,p,v,y,b=m(w);function w(e){var t;return a(this,w),u(g(t=b.call(this,e)),"verificationProcess",[BH.getTransactionId,BH.computeLocalHash,BH.fetchRemoteHash,BH.compareHashes,BH.checkMerkleRoot,BH.checkReceipt,BH.parseIssuerKeys,BH.checkAuthenticity]),u(g(t),"transactionId",void 0),u(g(t),"localHash",void 0),u(g(t),"documentToVerify",void 0),u(g(t),"txData",void 0),u(g(t),"chain",void 0),u(g(t),"explorerAPIs",void 0),u(g(t),"receipt",void 0),u(g(t),"issuerPublicKeyList",void 0),u(g(t),"issuer",void 0),u(g(t),"proof",void 0),u(g(t),"type","MerkleProof2017"),e.actionMethod&&(t._doAction=e.actionMethod),t.documentToVerify=e.document,t.explorerAPIs=e.explorerAPIs,t.issuer=e.issuer,t.proof=e.proof,t.validateProofType(),t.receipt=t.documentToVerify.signature,t.chain=Uf.certificates.getChain("",t.receipt),t.transactionId=Uf.certificates.getTransactionId(t.receipt),t.adaptVerificationProcessToChain(),t}return s(w,[{key:"verifyProof",value:(y=i(Wt.mark((function e(){var t,r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C(this.verificationProcess),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=11;break}if(this[n=r.value]){e.next=7;break}return e.abrupt("return",void console.error("verification logic for",n,"not implemented"));case 7:return e.next=9,this[n]();case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))),function(){return y.apply(this,arguments)})},{key:"verifyIdentity",value:(v=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)})},{key:"getProofVerificationSteps",value:function(e){return this.verificationProcess.map((function(t){return Uf.verifier.convertToVerificationSubsteps(e,t)}))}},{key:"getIdentityVerificationSteps",value:function(){return[]}},{key:"getIssuerPublicKey",value:function(){return Uf.chains.isMockChain(this.chain)?"This mock chain does not support issuing addresses":this.txData?this.txData.issuingAddress:void console.error("Trying to access issuing address when txData not available yet. Did you run the `verify` method yet?")}},{key:"getIssuerName",value:function(){return this.issuer.name}},{key:"getIssuerProfileDomain",value:function(){var e;return null===(e=new URL(this.getIssuerProfileUrl()))||void 0===e?void 0:e.hostname}},{key:"getIssuerProfileUrl",value:function(){return this.issuer.id}},{key:"getSigningDate",value:function(){return this.documentToVerify.issuedOn}},{key:"getChain",value:function(){return this.chain}},{key:"getReceipt",value:function(){return this.receipt}},{key:"getTransactionIdString",value:function(){return Uf.certificates.getTransactionId(this.getReceipt())}},{key:"getTransactionLink",value:function(){return Uf.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).transactionLink}},{key:"getRawTransactionLink",value:function(){return Uf.certificates.getTransactionLink(this.getTransactionIdString(),this.getChain()).rawTransactionLink}},{key:"validateProofType",value:function(){if(this.proof.type[0]!==this.type)throw new Error("Incompatible proof type passed. Expected: ".concat(this.type,", Got: ").concat(this.proof.type[0]))}},{key:"adaptVerificationProcessToChain",value:function(){Uf.chains.isMockChain(this.chain)&&(ka(this.verificationProcess,BH.getTransactionId),ka(this.verificationProcess,BH.fetchRemoteHash),ka(this.verificationProcess,BH.parseIssuerKeys),ka(this.verificationProcess,BH.checkMerkleRoot),ka(this.verificationProcess,BH.checkAuthenticity))}},{key:"_doAction",value:(p=i(Wt.mark((function e(t,r,n){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("doAction method needs to be overwritten by injecting from CVJS");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"getTransactionId",value:(d=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.getTransactionId,(function(){return hB(t.transactionId)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"computeLocalHash",value:(h=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.computeLocalHash,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fy(t.documentToVerify);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.type);case 2:this.localHash=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"fetchRemoteHash",value:(f=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.fetchRemoteHash,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uf.verifier.lookForTx({transactionId:t.transactionId,chain:t.chain.code,explorerAPIs:t.explorerAPIs});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.type);case 2:this.txData=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"compareHashes",value:(l=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.compareHashes,(function(){return uB(t.localHash,t.receipt.targetHash)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"checkMerkleRoot",value:(o=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.checkMerkleRoot,(function(){return cB(t.receipt.merkleRoot,t.txData.remoteHash)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"checkReceipt",value:(n=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.checkReceipt,(function(){return fB(t.receipt)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"parseIssuerKeys",value:(r=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.parseIssuerKeys,(function(){return Uf.verifier.parseIssuerKeys(t.issuer)}),this.type);case 2:this.issuerPublicKeyList=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"checkAuthenticity",value:(t=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(BH.checkAuthenticity,(function(){return lB(t.issuerPublicKeyList,t.txData.issuingAddress,t.txData.time)}),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),w}(YH),tV=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,r){var n=t.contexts=new Map,i=t.constants=r(1);n.set(i.SECURITY_CONTEXT_V1_URL,r(2)),n.set(i.SECURITY_CONTEXT_V2_URL,r(3))},function(e,t,r){t.SECURITY_CONTEXT_V1_URL="https://w3id.org/security/v1",t.SECURITY_CONTEXT_V2_URL="https://w3id.org/security/v2"},function(e,t){e.exports={"@context":{id:"@id",type:"@type",dc:"http://purl.org/dc/terms/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",EcdsaKoblitzSignature2016:"sec:EcdsaKoblitzSignature2016",Ed25519Signature2018:"sec:Ed25519Signature2018",EncryptedMessage:"sec:EncryptedMessage",GraphSignature2012:"sec:GraphSignature2012",LinkedDataSignature2015:"sec:LinkedDataSignature2015",LinkedDataSignature2016:"sec:LinkedDataSignature2016",CryptographicKey:"sec:Key",authenticationTag:"sec:authenticationTag",canonicalizationAlgorithm:"sec:canonicalizationAlgorithm",cipherAlgorithm:"sec:cipherAlgorithm",cipherData:"sec:cipherData",cipherKey:"sec:cipherKey",created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},digestAlgorithm:"sec:digestAlgorithm",digestValue:"sec:digestValue",domain:"sec:domain",encryptionKey:"sec:encryptionKey",expiration:{"@id":"sec:expiration","@type":"xsd:dateTime"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},initializationVector:"sec:initializationVector",iterationCount:"sec:iterationCount",nonce:"sec:nonce",normalizationAlgorithm:"sec:normalizationAlgorithm",owner:{"@id":"sec:owner","@type":"@id"},password:"sec:password",privateKey:{"@id":"sec:privateKey","@type":"@id"},privateKeyPem:"sec:privateKeyPem",publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyBase58:"sec:publicKeyBase58",publicKeyPem:"sec:publicKeyPem",publicKeyWif:"sec:publicKeyWif",publicKeyService:{"@id":"sec:publicKeyService","@type":"@id"},revoked:{"@id":"sec:revoked","@type":"xsd:dateTime"},salt:"sec:salt",signature:"sec:signature",signatureAlgorithm:"sec:signingAlgorithm",signatureValue:"sec:signatureValue"}}},function(e,t){e.exports={"@context":[{"@version":1.1},"https://w3id.org/security/v1",{AesKeyWrappingKey2019:"sec:AesKeyWrappingKey2019",DeleteKeyOperation:"sec:DeleteKeyOperation",DeriveSecretOperation:"sec:DeriveSecretOperation",EcdsaSecp256k1Signature2019:"sec:EcdsaSecp256k1Signature2019",EcdsaSecp256r1Signature2019:"sec:EcdsaSecp256r1Signature2019",EcdsaSecp256k1VerificationKey2019:"sec:EcdsaSecp256k1VerificationKey2019",EcdsaSecp256r1VerificationKey2019:"sec:EcdsaSecp256r1VerificationKey2019",Ed25519Signature2018:"sec:Ed25519Signature2018",Ed25519VerificationKey2018:"sec:Ed25519VerificationKey2018",EquihashProof2018:"sec:EquihashProof2018",ExportKeyOperation:"sec:ExportKeyOperation",GenerateKeyOperation:"sec:GenerateKeyOperation",KmsOperation:"sec:KmsOperation",RevokeKeyOperation:"sec:RevokeKeyOperation",RsaSignature2018:"sec:RsaSignature2018",RsaVerificationKey2018:"sec:RsaVerificationKey2018",Sha256HmacKey2019:"sec:Sha256HmacKey2019",SignOperation:"sec:SignOperation",UnwrapKeyOperation:"sec:UnwrapKeyOperation",VerifyOperation:"sec:VerifyOperation",WrapKeyOperation:"sec:WrapKeyOperation",X25519KeyAgreementKey2019:"sec:X25519KeyAgreementKey2019",allowedAction:"sec:allowedAction",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},capability:{"@id":"sec:capability","@type":"@id"},capabilityAction:"sec:capabilityAction",capabilityChain:{"@id":"sec:capabilityChain","@type":"@id","@container":"@list"},capabilityDelegation:{"@id":"sec:capabilityDelegationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"sec:capabilityInvocationMethod","@type":"@id","@container":"@set"},caveat:{"@id":"sec:caveat","@type":"@id","@container":"@set"},challenge:"sec:challenge",ciphertext:"sec:ciphertext",controller:{"@id":"sec:controller","@type":"@id"},delegator:{"@id":"sec:delegator","@type":"@id"},equihashParameterK:{"@id":"sec:equihashParameterK","@type":"xsd:integer"},equihashParameterN:{"@id":"sec:equihashParameterN","@type":"xsd:integer"},invocationTarget:{"@id":"sec:invocationTarget","@type":"@id"},invoker:{"@id":"sec:invoker","@type":"@id"},jws:"sec:jws",keyAgreement:{"@id":"sec:keyAgreementMethod","@type":"@id","@container":"@set"},kmsModule:{"@id":"sec:kmsModule"},parentCapability:{"@id":"sec:parentCapability","@type":"@id"},plaintext:"sec:plaintext",proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},proofValue:"sec:proofValue",referenceId:"sec:referenceId",unwrappedKey:"sec:unwrappedKey",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},verifyData:"sec:verifyData",wrappedKey:"sec:wrappedKey"}]}}]))}(t={exports:{}},t.exports),t.exports}(),rV=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(tV),nV=tV.contexts,iV=tV.constants,aV=Yt(Object.freeze({__proto__:null,default:rV,constants:iV,contexts:nV})),oV=aV.constants,sV={SECURITY_CONTEXT_URL:oV.SECURITY_CONTEXT_V2_URL,SECURITY_CONTEXT_V1_URL:oV.SECURITY_CONTEXT_V1_URL,SECURITY_CONTEXT_V2_URL:oV.SECURITY_CONTEXT_V2_URL,SECURITY_PROOF_URL:"https://w3id.org/security#proof",SECURITY_SIGNATURE_URL:"https://w3id.org/security#signature"},uV=sV,cV=aV.contexts,lV=new Map([[uV.SECURITY_CONTEXT_V1_URL,cV.get(uV.SECURITY_CONTEXT_V1_URL)],[uV.SECURITY_CONTEXT_V2_URL,cV.get(uV.SECURITY_CONTEXT_V2_URL)]]),fV={},hV=fV;fV.extendContextLoader=function(e){return function(){var t=i(Wt.mark((function t(r){var n;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=lV.get(r),t.abrupt("return",void 0!==n?{contextUrl:null,documentUrl:r,document:n,tag:"static"}:e(r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fV.strictDocumentLoader=fV.extendContextLoader((function(e){throw new Error("".concat(e," not found."))}));Error;var dV=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],pV=Symbol(".toJSON called"),vV=function e(t){var n=t.from,i=t.seen,a=t.to_,o=t.forceEnumerable,s=t.maxDepth,u=t.depth,c=a||(Array.isArray(n)?[]:{});if(i.push(n),u>=s)return c;if("function"==typeof n.toJSON&&!0!==n[pV])return function(e){e[pV]=!0;var t=e.toJSON();return delete e[pV],t}(n);for(var l=0,f=Object.entries(n);l<f.length;l++){var h=k(f[l],2),d=h[0],p=h[1];$r(p)?c[d]="[object Buffer]":"function"!=typeof p&&(p&&"object"==r(p)?i.includes(n[d])?c[d]="[Circular]":(u++,c[d]=e({from:n[d],seen:i.slice(),forceEnumerable:o,maxDepth:s,depth:u})):c[d]=p)}var v,y=C(dV);try{for(y.s();!(v=y.n()).done;){var g=v.value,b=g.property,m=g.enumerable;"string"==typeof n[b]&&Object.defineProperty(c,b,{value:n[b],enumerable:!!o||m,configurable:!0,writable:!0})}}catch(e){y.e(e)}finally{y.f()}return c},yV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDepth,i=void 0===n?Number.POSITIVE_INFINITY:n;return"object"==r(e)&&null!==e?vV({from:e,seen:[],forceEnumerable:!0,maxDepth:i,depth:0}):"function"==typeof e?"[Function: ".concat(e.name||"anonymous","]"):e},gV=sV,bV=Oy,mV=hV.extendContextLoader,wV=hV.strictDocumentLoader,xV=yV,_V=function(e){if(e.unmappedProperty)throw new Error('The property "'+e.unmappedProperty+'" in the input was not defined in the context.')};function kV(e){Object.defineProperty(e,"toJSON",{value:function(){return xV(this)},configurable:!0,writable:!0})}
/*!
   * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.
   */var SV=function(e){c(r,e);var t=m(r);function r(e){var n;return a(this,r),(n=t.call(this,"Verification error(s).")).name="VerificationError",n.errors=[].concat(e),n}return s(r)}(p(Error)),EV=SV,IV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type;if(a(this,e),"string"!=typeof r)throw new TypeError('A LinkedDataProof must have a "type".');this.type=r}var t,r,n;return s(e,[{key:"createProof",value:(n=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw v(t),new Error('"createProof" must be implemented in a derived class.');case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"verifyProof",value:(r=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw v(t),new Error('"verifyProof" must be implemented in a derived class.');case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"matchProof",value:(t=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.proof,e.abrupt("return",r.type===this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),AV={},TV=AV;AV.w3cDate=function(e){null==e?e=new Date:"number"!=typeof e&&"string"!=typeof e||(e=new Date(e));var t=e.toISOString();return t.substr(0,t.length-5)+"Z"},AV.concat=function(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r};var PV=self&&(self.crypto||self.msCrypto),OV=function(e){return i(Wt.mark((function t(){var r,n;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.string,n=(new TextEncoder).encode(r),t.t0=Uint8Array,t.next=5,PV.subtle.digest("SHA-256",n);case 5:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 7:case"end":return t.stop()}}),t)})))()},CV=sV,MV=Oy,NV=TV,RV=OV,LV=IV,jV={},DV=jV;jV.suites={LinkedDataProof:IV,LinkedDataSignature:function(e){c(g,e);var n,o,u,l,f,h,d,p,v,y=m(g);function g(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,n=t.proof,i=t.LDKeyClass,o=t.date,s=t.key,u=t.signer,c=t.verifier,l=t.useNativeCanonize,f=t.contextUrl;a(this,g),(e=y.call(this,{type:r})).LDKeyClass=i,e.contextUrl=f,e.proof=n;var h=function(e){var t=e.key,r=e.signer,n=e.verifier,i={};if(t){if(i.key=t,i.verificationMethod=t.id,"function"==typeof t.signer&&(i.signer=t.signer()),"function"==typeof t.verifier&&(i.verifier=t.verifier()),!i.signer&&!i.verifier)throw new TypeError('The "key" parameter must contain a "signer" or "verifier" method.')}else i.verificationMethod=r&&r.id||n&&n.id,i.signer=r,i.verifier=n;if(i.signer&&"function"!=typeof i.signer.sign)throw new TypeError("A signer API has not been specified.");if(i.verifier&&"function"!=typeof i.verifier.verify)throw new TypeError("A verifier API has not been specified.");return i}({key:s,signer:u,verifier:c});if(e.verificationMethod=h.verificationMethod,e.key=h.key,e.signer=h.signer,e.verifier=h.verifier,o&&(e.date=new Date(o),isNaN(e.date)))throw TypeError('"date" "'.concat(o,'" is not a valid date.'));return e.useNativeCanonize=l,e._hashCache=null,e}return s(g,[{key:"createProof",value:(v=i(Wt.mark((function e(r){var n,i,a,o,s,u,c;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.document,i=r.purpose,a=r.documentLoader,o=r.expansionMap,(s=this.proof?t({},this.proof):{}).type=this.type,u=this.date,void 0===s.created&&void 0===u&&(u=new Date),u&&"string"!=typeof u&&(u=NV.w3cDate(u)),u&&(s.created=u),s.verificationMethod=this.verificationMethod,e.next=9,this.updateProof({document:n,proof:s,purpose:i,documentLoader:a,expansionMap:o});case 9:return s=e.sent,e.next=12,i.update(s,{document:n,suite:this,documentLoader:a,expansionMap:o});case 12:return s=e.sent,e.next=15,this.createVerifyData({document:n,proof:s,documentLoader:a,expansionMap:o});case 15:return c=e.sent,e.next=18,this.sign({verifyData:c,document:n,proof:s,documentLoader:a,expansionMap:o});case 18:return s=e.sent,e.abrupt("return",s);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"updateProof",value:(p=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.proof,e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"verifyProof",value:(d=i(Wt.mark((function e(t){var r,n,i,a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.proof,n=t.document,i=t.documentLoader,a=t.expansionMap,e.prev=1,e.next=4,this.createVerifyData({document:n,proof:r,documentLoader:i,expansionMap:a});case 4:return o=e.sent,e.next=7,this.getVerificationMethod({proof:r,document:n,documentLoader:i,expansionMap:a});case 7:return s=e.sent,e.next=10,this.verifySignature({verifyData:o,verificationMethod:s,document:n,proof:r,documentLoader:i,expansionMap:a});case 10:if(e.sent){e.next=12;break}throw new Error("Invalid signature.");case 12:return e.abrupt("return",{verified:!0,verificationMethod:s});case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",{verified:!1,error:e.t0});case 18:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(e){return d.apply(this,arguments)})},{key:"canonize",value:(h=i(Wt.mark((function e(t,r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.documentLoader,i=r.expansionMap,a=r.skipExpansion,e.abrupt("return",MV.canonize(t,{algorithm:"URDNA2015",format:"application/n-quads",documentLoader:n,expansionMap:i,skipExpansion:a,useNative:this.useNativeCanonize}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"canonizeProof",value:(f=i(Wt.mark((function e(r,n){var i,a,o;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.document,a=n.documentLoader,o=n.expansionMap,e.abrupt("return",(delete(r=t({"@context":i["@context"]||CV.SECURITY_CONTEXT_URL},r)).jws,delete r.signatureValue,delete r.proofValue,this.canonize(r,{documentLoader:a,expansionMap:o,skipExpansion:!1})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"createVerifyData",value:(l=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.document,n=t.proof,i=t.documentLoader,a=t.expansionMap,(s=this._hashCache)&&s.document===r?o=s.hash:this._hashCache={document:r,hash:o=this.canonize(r,{documentLoader:i,expansionMap:a}).then((function(e){return RV({string:e})}))},e.next=5,Promise.all([this.canonizeProof(n,{document:r,documentLoader:i,expansionMap:a}).then((function(e){return RV({string:e})})),o]);case 5:return u=e.sent,c=k(u,2),l=c[0],f=c[1],e.abrupt("return",NV.concat(l,f));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getVerificationMethod",value:(u=i(Wt.mark((function e(t){var n,i,a,o;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.proof,i=t.documentLoader,"object"==r(a=n.verificationMethod)&&(a=a.id),a){e.next=4;break}throw new Error('No "verificationMethod" found in proof.');case 4:return e.next=6,MV.frame(a,{"@context":CV.SECURITY_CONTEXT_URL,"@embed":"@always",id:a},{documentLoader:i,compactToRelative:!1});case 6:if(o=e.sent){e.next=9;break}throw new Error("Verification method ".concat(a," not found."));case 9:if(void 0===o.revoked){e.next=11;break}throw new Error("The verification method has been revoked.");case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"sign",value:(o=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Must be implemented by a derived class.");case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"verifySignature",value:(n=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Must be implemented by a derived class.");case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"ensureSuiteContext",value:function(e){var t=e.document,r=e.addSuiteContext,n=this.contextUrl;if(!function(e){var t=e.contextUrl,r=e.document["@context"];return r===t||Array.isArray(r)&&r.includes(t)}({document:t,contextUrl:n})){if(!r)throw new TypeError("The document to be signed must contain this suite's @context, \"".concat(n,'".'));var i=t["@context"]||[];t["@context"]=Array.isArray(i)?[].concat(E(i),[n]):[i,n]}}}]),g}(LV)};
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */
var BV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.term,n=t.date,i=t.maxTimestampDelta,o=void 0===i?1/0:i;if(a(this,e),void 0===r)throw new Error('"term" is required.');if(void 0!==o&&"number"!=typeof o)throw new TypeError('"maxTimestampDelta" must be a number.');if(this.term=r,void 0!==n&&(this.date=new Date(n),isNaN(this.date)))throw TypeError('"date" "'.concat(n,'" is not a valid date.'));this.maxTimestampDelta=o}var t,r,n;return s(e,[{key:"validate",value:(n=i(Wt.mark((function e(t,r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(r),e.prev=1,this.maxTimestampDelta===1/0){e.next=6;break}if(n=(this.date||new Date).getTime(),i=1e3*this.maxTimestampDelta,(a=new Date(t.created).getTime())>=n-i&&a<=n+i){e.next=6;break}throw new Error("The proof's created timestamp is out of range.");case 6:return e.abrupt("return",{valid:!0});case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{valid:!1,error:e.t0});case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t){return n.apply(this,arguments)})},{key:"update",value:(r=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(r),e.abrupt("return",(t.proofPurpose=this.term,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"match",value:(t=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(r),e.abrupt("return",t.proofPurpose===this.term);case 2:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),UV=sV,FV=Oy,zV=["assertionMethod","authentication","capabilityInvocation","capabilityDelegation","keyAgreement","verificationMethod"],HV=function(e){c(o,e);var t,n=m(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.term,s=t.controller,u=t.date,c=t.maxTimestampDelta,l=void 0===c?1/0:c;if(a(this,o),e=n.call(this,{term:i,date:u,maxTimestampDelta:l}),void 0!==s){if("object"!=r(s))throw new TypeError('"controller" must be an object.');e.controller=s}return e._termDefinedByDIDContext=zV.includes(i),b(e)}return s(o,[{key:"validate",value:(t=i(Wt.mark((function e(t,n){var i,a,s,c,f,h,d,p,v,y,g,b;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.verificationMethod,a=n.documentLoader,s=n.expansionMap,e.prev=1,e.next=4,x(l(o.prototype),"validate",this).call(this,t,{verificationMethod:i,documentLoader:a,expansionMap:s});case 4:if((c=e.sent).valid){e.next=7;break}throw c.error;case 7:if(f=i.id,h=this.term,d=this._termDefinedByDIDContext,!this.controller){e.next=12;break}c.controller=this.controller,e.next=31;break;case 12:if(!(p=i.controller)){e.next=21;break}if("object"!=r(p)){e.next=18;break}v=p.id,e.next=21;break;case 18:if("string"==typeof p){e.next=20;break}throw new TypeError('"controller" must be a string representing a URL.');case 20:v=p;case 21:return e.next=23,a(v);case 23:if(y=e.sent,g=y.document,e.t0=!(d&&"https://www.w3.org/ns/did/v1"===g["@context"]||Array.isArray(g["@context"])&&"https://www.w3.org/ns/did/v1"===g["@context"][0]),!e.t0){e.next=30;break}return e.next=29,FV.frame(g,u({"@context":UV.SECURITY_CONTEXT_URL,id:v},h,{"@embed":"@never",id:f}),{documentLoader:a,compactToRelative:!1});case 29:g=e.sent;case 30:c.controller=g;case 31:if(b=FV.getValues(c.controller,h),c.valid=b.some((function(e){return e===f||"object"==r(e)&&e.id===f})),c.valid){e.next=34;break}throw new Error('Verification method "'.concat(i.id,'" not authorized by controller for proof purpose "').concat(this.term,'".'));case 34:return e.abrupt("return",c);case 37:return e.prev=37,e.t1=e.catch(1),e.abrupt("return",{valid:!1,error:e.t1});case 40:case"end":return e.stop()}}),e,this,[[1,37]])}))),function(e,r){return t.apply(this,arguments)})}]),o}(BV),VV=HV,KV=HV,qV={},WV=qV;
/*!
   * Copyright (c) 2018 Digital Bazaar, Inc. All rights reserved.
   */qV.purposes={AssertionProofPurpose:function(e){c(r,e);var t=m(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.term,i=void 0===n?"assertionMethod":n,o=e.controller,s=e.date,u=e.maxTimestampDelta,c=void 0===u?1/0:u;return a(this,r),t.call(this,{term:i,controller:o,date:s,maxTimestampDelta:c})}return s(r)}(VV),AuthenticationProofPurpose:function(e){c(o,e);var t,r,n=m(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.term,i=void 0===r?"authentication":r,s=t.controller,u=t.challenge,c=t.date,l=t.domain,f=t.maxTimestampDelta,h=void 0===f?1/0:f;if(a(this,o),e=n.call(this,{term:i,controller:s,date:c,maxTimestampDelta:h}),"string"!=typeof u)throw new TypeError('"challenge" must be a string.');if(void 0!==l&&"string"!=typeof l)throw new TypeError('"domain" must be a string.');return e.challenge=u,e.domain=l,b(e)}return s(o,[{key:"validate",value:(r=i(Wt.mark((function e(t,r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.verificationMethod,i=r.documentLoader,a=r.expansionMap,e.prev=1,t.challenge===this.challenge){e.next=4;break}throw new Error('The challenge is not as expected; challenge="'.concat(t.challenge,'", expected="').concat(this.challenge,'"'));case 4:if(void 0===this.domain||t.domain===this.domain){e.next=6;break}throw new Error('The domain is not as expected; domain="'.concat(t.domain,'", expected="').concat(this.domain,'"'));case 6:return e.abrupt("return",x(l(o.prototype),"validate",this).call(this,t,{verificationMethod:n,documentLoader:i,expansionMap:a}));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{valid:!1,error:e.t0});case 12:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e,t){return r.apply(this,arguments)})},{key:"update",value:(t=i(Wt.mark((function e(t,r){var n,i,a,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.document,i=r.suite,a=r.documentLoader,s=r.expansionMap,e.next=3,x(l(o.prototype),"update",this).call(this,t,{document:n,suite:i,documentLoader:a,expansionMap:s});case 3:return(t=e.sent).challenge=this.challenge,void 0!==this.domain&&(t.domain=this.domain),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),o}(KV),ControllerProofPurpose:HV,ProofPurpose:BV};
/*!
   * Copyright (c) 2010-2018 Digital Bazaar, Inc. All rights reserved.
   */
var GV={},JV=GV,XV=sV;Object.assign(GV,XV);var $V=function(){function e(){a(this,e)}var r,n;return s(e,[{key:"add",value:(n=i(Wt.mark((function e(r){var n,i,a,o,s,u,c,l=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{},i=n.suite,a=n.purpose,o=n.documentLoader,s=n.expansionMap,i){e.next=3;break}throw new TypeError('"options.suite" is required.');case 3:if(a){e.next=5;break}throw new TypeError('"options.purpose" is required.');case 5:return o=o?mV(o):wV,void 0===s?s=_V:!1===s&&(s=void 0),delete(u=t({},r)).proof,e.next=10,i.createProof({document:u,purpose:a,documentLoader:o,expansionMap:s});case 10:return c=e.sent,e.abrupt("return",(bV.addValue(r,"proof",c),r));case 12:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"verify",value:(r=i(Wt.mark((function e(r){var n,a,o,s,u,c,l,f,h,d,p,v,y,g,b=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:{},a=n.suite,o=n.purpose,s=n.documentLoader,u=n.expansionMap,a){e.next=3;break}throw new TypeError('"options.suite" is required.');case 3:if(o){e.next=5;break}throw new TypeError('"options.purpose" is required.');case 5:if(0!==(c=Array.isArray(a)?a:[a]).length){e.next=8;break}throw new TypeError("At least one suite is required.");case 8:return s=s?mV(s):wV,void 0===u?u=_V:!1===u&&(u=void 0),e.prev=9,r=t({},r),e.next=13,function(){var e=i(Wt.mark((function e(r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.document,i=bV.getValues(n,"proof"),delete n.proof,0!==i.length){e.next=3;break}throw new Error("No matching proofs found in the given document.");case 3:return a=n["@context"]||gV.SECURITY_CONTEXT_URL,e.abrupt("return",(i=i.map((function(e){return t({"@context":a},e)})),{proofSet:i,document:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()({document:r,documentLoader:s,expansionMap:u});case 13:return l=e.sent,f=l.proofSet,h=l.document,r=h,e.next=19,function(){var e=i(Wt.mark((function e(t){var r,n,a,o,s,u,c,l,f,h,d;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.document,n=t.suites,a=t.proofSet,o=t.purpose,s=t.documentLoader,u=t.expansionMap,c=Array.isArray(o)?o:[o],l=new Map,f=new Map,h=new Map,e.next=4,Promise.all(c.map((function(e){return(t=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.purposeToProofs,n=t.proofToSuite,i=t.purpose,a=t.proofSet,o=t.suites,s=t.suiteMatchQueue,u=t.document,c=t.documentLoader,l=t.expansionMap,f=C(a),e.prev=2,f.s();case 4:if((h=f.n()).done){e.next=38;break}return d=h.value,e.next=8,i.match(d,{document:u,documentLoader:c,expansionMap:l});case 8:if(e.sent){e.next=10;break}return e.abrupt("continue",36);case 10:p=!1,v=C(o),e.prev=12,v.s();case 14:if((y=v.n()).done){e.next=27;break}return g=y.value,(b=s.get(g))||s.set(g,b=new Map),(m=b.get(d))||(m=g.matchProof({proof:d,document:u,documentLoader:c,expansionMap:l}),b.set(d,m)),e.next=22,m;case 22:if(!e.sent){e.next=25;break}return p=!0,n.set(d,g),e.abrupt("break",27);case 25:e.next=14;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(12),v.e(e.t0);case 32:return e.prev=32,v.f(),e.finish(32);case 35:p&&((w=r.get(i))?w.push(d):r.set(i,[d]));case 36:e.next=4;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(2),f.e(e.t1);case 43:return e.prev=43,f.f(),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[2,40,43,46],[12,29,32,35]])}))),function(e){return t.apply(this,arguments)})({purposeToProofs:l,proofToSuite:f,purpose:e,proofSet:a,suites:n,suiteMatchQueue:h,document:r,documentLoader:s,expansionMap:u});var t})));case 4:if(!(l.size<c.length)){e.next=6;break}return e.abrupt("return",[]);case 6:return d=new Map,e.next=9,Promise.all(E(f.entries()).map(function(){var e=i(Wt.mark((function e(t){var n,a,o,c,l,f,h,p,v,y;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k(t,2),a=n[0],o=n[1],e.prev=1,f={validate:function(){var e=i(Wt.mark((function e(t,r){var n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.verificationMethod,e.abrupt("return",(l=n,{valid:!0}));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},e.next=5,o.verifyProof({proof:a,document:r,purpose:f,documentLoader:s,expansionMap:u});case 5:h=e.sent,p=h.verified,v=h.verificationMethod,y=h.error,l||(l=v),c={proof:a,verified:p,verificationMethod:l,error:y},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),c={proof:a,verified:!1,error:e.t0};case 15:c.error&&kV(c.error),d.set(a,c);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()));case 9:return e.next=11,Promise.all(E(l.entries()).map(function(){var e=i(Wt.mark((function e(t){var n,i,a,o,c,l,h,p,v,y;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=k(t,2),i=n[0],a=n[1],o=C(a),e.prev=2,o.s();case 4:if((c=o.n()).done){e.next=23;break}if(l=c.value,(h=d.get(l)).verified){e.next=9;break}return e.abrupt("continue",21);case 9:return p=h.verificationMethod,v=f.get(l),y=void 0,e.prev=11,e.next=14,i.validate(l,{document:r,suite:v,verificationMethod:p,documentLoader:s,expansionMap:u});case 14:y=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),y={valid:!1,error:e.t0};case 20:h.purposeResult?Array.isArray(h.purposeResult)?h.purposeResult.push(y):h.purposeResult=[h.purposeResult,y]:h.purposeResult=y,y.valid||(kV(y.error),h.error||(h.verified=!1,h.error=y.error));case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),o.e(e.t1);case 28:return e.prev=28,o.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,25,28,31],[11,17]])})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",E(d.values()));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()({document:r,suites:c,proofSet:f,purpose:o,documentLoader:s,expansionMap:u});case 19:if(0!==(d=e.sent).length){e.next=23;break}throw(p=new Error("Did not verify any proofs; insufficient proofs matched the acceptable suite(s) and required purpose(s).")).name="NotFoundError",p;case 23:if(v=d.some((function(e){return e.verified})),v){e.next=27;break}return g=(y=[]).concat.apply(y,E(d.filter((function(e){return e.error})).map((function(e){return e.error})))),a={verified:v,results:d},e.abrupt("return",(g.length>0&&(a.error=g),a));case 27:return e.abrupt("return",{verified:v,results:d});case 30:return e.prev=30,e.t0=e.catch(9),e.abrupt("return",(kV(e.t0),{verified:!1,error:e.t0}));case 33:case"end":return e.stop()}}),e,null,[[9,30]])}))),function(e){return r.apply(this,arguments)})}]),e}(),YV=EV;GV.sign=function(){var e=i(Wt.mark((function e(t){var n,i,a,o,s,u,c,l,f,h=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},i=n.suite,a=n.purpose,o=n.documentLoader,s=n.expansionMap,u=n.addSuiteContext,c=void 0===u||u,"object"==r(t)){e.next=3;break}throw new TypeError('The "document" parameter must be an object.');case 3:return i.ensureSuiteContext({document:t,addSuiteContext:c}),e.prev=4,e.next=7,(new $V).add(t,{suite:i,purpose:a,documentLoader:o,expansionMap:s});case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),o||"jsonld.InvalidUrl"!==e.t0.name){e.next=15;break}throw l=e.t0.details.url,(f=new Error('A URL "'.concat(l,'" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "sign".'))).cause=e.t0,f;case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),GV.verify=function(){var e=i(Wt.mark((function e(t){var n,i,a,o,s,u,c,l,f,h=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},i=n.suite,a=n.purpose,o=n.documentLoader,s=n.expansionMap,"object"==r(t)){e.next=3;break}throw new TypeError('The "document" parameter must be an object.');case 3:return e.next=5,(new $V).verify(t,{suite:i,purpose:a,documentLoader:o,expansionMap:s});case 5:return u=e.sent,(c=u.error)&&(o||"jsonld.InvalidUrl"!==c.name?u.error=new YV(c):(l=c.details.url,f=new Error('A URL "'.concat(l,'" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "verify".')),u.error=new YV(f))),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GV.suites=DV.suites,GV.purposes=WV.purposes,Object.assign(GV,hV);var ZV=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2020:{"@id":"https://w3id.org/security#Ed25519VerificationKey2020","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyMultibase:{"@id":"https://w3id.org/security#publicKeyMultibase","@type":"https://w3id.org/security#multibase"}}},Ed25519Signature2020:{"@id":"https://w3id.org/security#Ed25519Signature2020","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={CONTEXT_FILENAME:"ed25519-signature-2020-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2020/v1",CBORLD_CODEC_VALUE:20}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
var n=r(0),i=r(1),a=r(3).documentLoader,o=i.CONTEXT_URL,s=i.CBORLD_CODEC_VALUE,u=new Map;u.set(i.CONTEXT_URL,n);var c=new Map;c.set(o,s),e.exports={constants:i,contexts:u,appContextMap:c,documentLoader:a,CONTEXT_URL:o,CONTEXT:n}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
var n=r(1).CONTEXT_URL,i=r(0);e.exports={documentLoader:function(e){if(e!==n)throw new Error('Loading document "'.concat(e,'" is not allowed.'));return{contextUrl:null,document:i,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),QV=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(ZV);ZV.contexts,ZV.constants,ZV.CONTEXT,ZV.CONTEXT_URL,ZV.appContextMap,ZV.documentLoader;var eK=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2018:{"@id":"https://w3id.org/security#Ed25519VerificationKey2018","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyBase58:{"@id":"https://w3id.org/security#publicKeyBase58"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},jws:{"@id":"https://w3id.org/security#jws"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
e.exports={CONTEXT_FILENAME:"ed25519-signature-2018-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2018/v1",CBORLD_CODEC_VALUE:19}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
var n=r(0),i=r(1),a=r(3).documentLoader,o=i.CONTEXT_URL,s=i.CBORLD_CODEC_VALUE,u=new Map;u.set(o,n);var c=new Map;c.set(o,s),e.exports={constants:i,contexts:u,appContextMap:c,documentLoader:a,CONTEXT_URL:o,CONTEXT:n}},function(e,t,r){
/*!
   * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.
   */
var n=r(1).CONTEXT_URL,i=r(0);e.exports={documentLoader:function(e){if(e!==n)throw new Error('Loading document "'.concat(e,'" is not allowed.'));return{contextUrl:null,document:i,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),tK=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(eK);eK.contexts,eK.constants,eK.CONTEXT,eK.CONTEXT_URL,eK.appContextMap,eK.documentLoader;
/*!
   * Copyright (c) 2020-2021 Digital Bazaar, Inc. All rights reserved.
   */
var rK=JV.suites.LinkedDataSignature,nK=QV.constants.CONTEXT_URL,iK=tK.constants.CONTEXT_URL,aK=function(e){c(d,e);var t,n,o,u,f,h=m(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.key,n=t.signer,i=t.verifier,o=t.proof,s=t.date,u=t.useNativeCanonize;return a(this,d),(e=h.call(this,{type:"Ed25519Signature2020",LDKeyClass:Cl,contextUrl:nK,key:r,signer:n,verifier:i,proof:o,date:s,useNativeCanonize:u})).requiredKeyType="Ed25519VerificationKey2020",e}return s(d,[{key:"sign",value:(f=i(Wt.mark((function e(t){var r,n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.verifyData,n=t.proof,this.signer&&"function"==typeof this.signer.sign){e.next=3;break}throw new Error("A signer API has not been specified.");case 3:return e.next=5,this.signer.sign({data:r});case 5:return i=e.sent,e.abrupt("return",(n.proofValue="z"+jc(i),n));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"verifySignature",value:(u=i(Wt.mark((function e(t){var r,n,i,a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.verifyData,n=t.verificationMethod,i=t.proof,(a=i.proofValue)&&"string"==typeof a){e.next=4;break}throw new TypeError('The proof does not include a valid "proofValue" property.');case 4:if("z"===a[0]){e.next=6;break}throw new Error("Only base58btc multibase encoding is supported.");case 6:if(o=Dc(a.substr(1)),s=this.verifier){e.next=12;break}return e.next=11,this.LDKeyClass.from(n);case 11:s=e.sent.verifier();case 12:return e.abrupt("return",s.verify({data:r,signature:o}));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"assertVerificationMethod",value:(o=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Ed25519VerificationKey2020"!==(r=t.verificationMethod).type){e.next=5;break}n=nK,e.next=8;break;case 5:if("Ed25519VerificationKey2018"===r.type){e.next=7;break}throw new Error('Unsupported key type "'.concat(r.type,'".'));case 7:n=iK;case 8:if(oK({document:r,contextUrl:n})){e.next=10;break}throw new TypeError('The verification method (key) must contain "'.concat(n,'" context.'));case 10:if(void 0===r.revoked){e.next=12;break}throw new Error("The verification method has been revoked.");case 12:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"getVerificationMethod",value:(n=i(Wt.mark((function e(t){var n,i,a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.proof,i=t.documentLoader,!this.key){e.next=3;break}return e.abrupt("return",this.key.export({publicKey:!0}));case 3:if("object"==r(a=n.verificationMethod)&&(a=a.id),a){e.next=6;break}throw new Error('No "verificationMethod" found in proof.');case 6:return e.next=8,i(a);case 8:return o=e.sent,s=o.document,a="string"==typeof s?JSON.parse(s):s,e.next=13,this.assertVerificationMethod({verificationMethod:a});case 13:if(e.t0="Ed25519VerificationKey2018"===a.type,!e.t0){e.next=18;break}return e.next=17,Cl.fromEd25519VerificationKey2018({keyPair:a});case 17:a=e.sent.export({publicKey:!0,includeContext:!0});case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"matchProof",value:(t=i(Wt.mark((function e(t){var n,i,a,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.proof,i=t.document,a=t.purpose,o=t.documentLoader,s=t.expansionMap,oK({document:i,contextUrl:nK})){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,x(l(d.prototype),"matchProof",this).call(this,{proof:n,document:i,purpose:a,documentLoader:o,expansionMap:s});case 5:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:if(this.key){e.next=9;break}return e.abrupt("return",!0);case 9:return u=n.verificationMethod,e.abrupt("return","object"==r(u)?u.id===this.key.id:u===this.key.id);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),d}(rK);function oK(e){var t=e.document,r=e.contextUrl,n=t["@context"];return n===r||Array.isArray(n)&&n.includes(r)}aK.CONTEXT_URL=nK,aK.CONTEXT=QV.contexts.get(nK);var sK,uK=JV.purposes.AssertionProofPurpose;!function(e){e.retrieveVerificationMethodPublicKey="retrieveVerificationMethodPublicKey",e.checkDocumentSignature="checkDocumentSignature"}(sK||(sK={}));var cK=function(e){c(d,e);var r,n,o,l,f,h=m(d);function d(e){var t;return a(this,d),u(g(t=h.call(this,e)),"verificationProcess",[sK.retrieveVerificationMethodPublicKey,sK.checkDocumentSignature]),u(g(t),"documentToVerify",void 0),u(g(t),"issuer",void 0),u(g(t),"proof",void 0),u(g(t),"type","Ed25519Signature2020"),u(g(t),"verificationKey",void 0),e.actionMethod&&(t._doAction=e.actionMethod),t.documentToVerify=e.document,t.issuer=e.issuer,t.proof=e.proof,t.validateProofType(),t}return s(d,[{key:"verifyProof",value:(f=i(Wt.mark((function e(){var t,r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C(this.verificationProcess),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=11;break}if(this[n=r.value]){e.next=7;break}return e.abrupt("return",void console.error("verification logic for",n,"not implemented"));case 7:return e.next=9,this[n]();case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))),function(){return f.apply(this,arguments)})},{key:"verifyIdentity",value:(l=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"getProofVerificationSteps",value:function(e){return this.verificationProcess.map((function(t){return Uf.verifier.convertToVerificationSubsteps(e,t)}))}},{key:"getIdentityVerificationSteps",value:function(){return[]}},{key:"getIssuerPublicKey",value:function(){var e=this.proof.verificationMethod;return this.issuer.didDocument.verificationMethod.find((function(t){return t.id===e})).publicKeyMultibase}},{key:"getIssuerName",value:function(){var e;return null!==(e=this.issuer.name)&&void 0!==e?e:""}},{key:"getIssuerProfileDomain",value:function(){try{var e;return null!==(e=new URL(this.getIssuerProfileUrl()).hostname)&&void 0!==e?e:""}catch(e){return""}}},{key:"getIssuerProfileUrl",value:function(){var e;return null!==(e=this.issuer.id)&&void 0!==e?e:""}},{key:"getSigningDate",value:function(){return this.proof.created}},{key:"_doAction",value:(o=i(Wt.mark((function e(t,r,n){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("doAction method needs to be overwritten by injecting from CVJS");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"validateProofType",value:function(){var e=this.isProofChain()?this.proof.chainedProofType:this.proof.type;if(e!==this.type)throw new Error("Incompatible proof type passed. Expected: ".concat(this.type,", Got: ").concat(e))}},{key:"isProofChain",value:function(){return"ChainedProof2021"===this.proof.type}},{key:"generateDocumentLoader",value:function(){return ia[this.documentToVerify.issuer]=this.issuer.didDocument,function(e){return e in ia?{contextUrl:null,document:ia[e],documentUrl:e}:Oy.documentLoader(e)}}},{key:"retrieveInitialDocument",value:function(){var e=this,t=By(this.documentToVerify);if(Array.isArray(t.proof)){var r=t.proof.find((function(t){return t.type===e.type}));delete t.proof,t.proof=r}return t}},{key:"retrieveVerificationMethodPublicKey",value:(n=i(Wt.mark((function e(){var r=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(sK.retrieveVerificationMethodPublicKey,i(Wt.mark((function e(){var n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.issuer.didDocument.verificationMethod.find((function(e){return e.id===r.proof.verificationMethod}))){e.next=3;break}throw new wa(sK.retrieveVerificationMethodPublicKey,"The verification method of the document does not match the provided issuer.");case 3:return e.next=5,Cl.from(t({},n));case 5:if(i=e.sent){e.next=8;break}throw new wa(sK.retrieveVerificationMethodPublicKey,"Could not derive the verification key");case 8:if(!i.revoked){e.next=10;break}throw new wa(sK.retrieveVerificationMethodPublicKey,"The verification key has been revoked");case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)}))),this.type);case 2:this.verificationKey=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkDocumentSignature",value:(r=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(sK.checkDocumentSignature,i(Wt.mark((function e(){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new aK({key:t.verificationKey})).date=new Date(Date.now()).toISOString(),e.next=4,JV.verify(t.retrieveInitialDocument(),{suite:r,purpose:new uK,documentLoader:t.generateDocumentLoader()});case 4:if((n=e.sent).verified){e.next=7;break}throw console.error(JSON.stringify(n,null,2)),new wa(sK.checkDocumentSignature,"The document's ".concat(t.type," signature could not be confirmed"));case 7:console.log("Credential Ed25519 signature successfully verified");case 8:case"end":return e.stop()}}),e)}))),this.type);case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),d}(YH),lK=Yf("Verifier"),fK=function(){function e(t){var r=t.certificateJson,n=t.expires,i=t.hashlinkVerifier,o=t.id,s=t.issuer,c=t.revocationKey,l=t.explorerAPIs;a(this,e),u(this,"expires",void 0),u(this,"id",void 0),u(this,"issuer",void 0),u(this,"revocationKey",void 0),u(this,"documentToVerify",void 0),u(this,"explorerAPIs",void 0),u(this,"txData",void 0),u(this,"_stepsStatuses",[]),u(this,"hashlinkVerifier",void 0),u(this,"verificationSteps",void 0),u(this,"supportedVerificationSuites",void 0),u(this,"proofVerifiers",[]),u(this,"verificationProcess",void 0),u(this,"proofMap",void 0),this.expires=n,this.id=o,this.issuer=s,this.hashlinkVerifier=i,this.revocationKey=c,this.explorerAPIs=l,this.documentToVerify=Object.assign({},r),this.instantiateProofVerifiers(),this.prepareVerificationProcess()}var t,r,n,o,c,l;return s(e,[{key:"getVerificationSteps",value:function(){return this.verificationSteps}},{key:"getSignersData",value:function(){return this.proofVerifiers.map((function(e){var t,r,n,i;return{signingDate:e.getSigningDate(),signatureSuiteType:e.type,issuerPublicKey:e.getIssuerPublicKey(),issuerName:e.getIssuerName(),issuerProfileDomain:e.getIssuerProfileDomain(),issuerProfileUrl:e.getIssuerProfileUrl(),chain:null===(t=e.getChain)||void 0===t?void 0:t.call(e),transactionId:null===(r=e.getTransactionIdString)||void 0===r?void 0:r.call(e),transactionLink:null===(n=e.getTransactionLink)||void 0===n?void 0:n.call(e),rawTransactionLink:null===(i=e.getRawTransactionLink)||void 0===i?void 0:i.call(e)}}))}},{key:"verify",value:(l=i(Wt.mark((function e(){var t,r,n,i,a,o,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.length>0&&void 0!==u[0]?u[0]:function(){},this._stepCallback=t,this._stepsStatuses=[],r=0;case 3:if(!(r<this.proofVerifiers.length)){e.next=9;break}return e.next=6,this.proofVerifiers[r].verifyProof();case 6:r++,e.next=3;break;case 9:n=C(this.verificationProcess),e.prev=10,n.s();case 12:if((i=n.n()).done){e.next=20;break}if(this[a=i.value]){e.next=16;break}return e.abrupt("return",void console.error("verification logic for",a,"not implemented"));case 16:return e.next=18,this[a]();case 18:e.next=12;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),n.e(e.t0);case 25:return e.prev=25,n.f(),e.finish(25);case 28:o=0;case 29:if(!(o<this.proofVerifiers.length)){e.next=35;break}return e.next=32,this.proofVerifiers[o].verifyIdentity();case 32:o++,e.next=29;break;case 35:return s=this._stepsStatuses.find((function(e){return e.status===Cf.FAILURE})),e.abrupt("return",s?this._failed(s):this._succeed());case 37:case"end":return e.stop()}}),e,this,[[10,22,25,28]])}))),function(){return l.apply(this,arguments)})},{key:"getRevocationListUrl",value:function(){return this.issuer.revocationList}},{key:"getProofTypes",value:function(){var e=[];return this.proofMap.forEach((function(t){var r=t.type;"ChainedProof2021"===r&&(r=t.chainedProofType),Array.isArray(r)&&(r=r[0]),e.push(r)})),e}},{key:"getProofMap",value:function(e){var t=new Map;return"proof"in e?Array.isArray(e.proof)?e.proof.forEach((function(e,r){return t.set(r,e)})):t.set(0,e.proof):"signature"in e&&t.set(0,e.signature),t}},{key:"instantiateProofVerifiers",value:function(){var e=this;this.supportedVerificationSuites={MerkleProof2017:eV,MerkleProof2019:QH,Ed25519Signature2020:cK},this.proofMap=this.getProofMap(this.documentToVerify);var t=this.getProofTypes(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return!e.includes(t)}))}(Object.keys(this.supportedVerificationSuites),t);if(r.length)throw new Error("No support for proof verification of type: ".concat(r.join(", ")));this.proofMap.forEach((function(r,n){e.proofVerifiers.push(new e.supportedVerificationSuites[t[n]]({actionMethod:e._doAction.bind(e),document:e.documentToVerify,proof:r,explorerAPIs:e.explorerAPIs,issuer:e.issuer}))}))}},{key:"prepareVerificationProcess",value:function(){var e=Uf.certificates.getVerificationMap(!!this.issuer.didDocument);this.verificationSteps=e.verificationMap,this.verificationProcess=e.verificationProcess,this.registerSignatureVerificationSteps(),this.registerIdentityVerificationSteps(),this.verificationSteps=this.verificationSteps.filter((function(e){var t,r;return(null===(t=e.subSteps)||void 0===t?void 0:t.length)>0||(null===(r=e.suites)||void 0===r?void 0:r.some((function(e){return e.subSteps.length>0})))}))}},{key:"registerSignatureVerificationSteps",value:function(){var e=ya.proofVerification;this.verificationSteps.find((function(t){return t.code===e})).suites=this.getSuiteSubsteps(e)}},{key:"getSuiteSubsteps",value:function(e){var t,r=(u(t={},ya.proofVerification,"getProofVerificationSteps"),u(t,ya.identityVerification,"getIdentityVerificationSteps"),t);return this.proofVerifiers.map((function(t){return{proofType:t.type,subSteps:t[r[e]](e)}}))}},{key:"registerIdentityVerificationSteps",value:function(){var e=ya.identityVerification;this.verificationSteps.find((function(t){return t.code===e})).suites=this.getSuiteSubsteps(e)}},{key:"_doAction",value:(c=i(Wt.mark((function e(t,r,n){var i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isFailing()){e.next=2;break}return e.abrupt("return");case 2:return t&&(i=Uf.i18n.getText("subSteps","".concat(t,"LabelPending")),lK(i),this._updateStatusCallback(t,Cf.STARTING,n)),e.prev=3,e.next=6,r();case 6:return a=e.sent,e.abrupt("return",(t&&(this._updateStatusCallback(t,Cf.SUCCESS,n),this._stepsStatuses.push({code:t,status:Cf.SUCCESS})),a));case 10:e.prev=10,e.t0=e.catch(3),t&&(this._updateStatusCallback(t,Cf.FAILURE,n,e.t0.message),this._stepsStatuses.push({code:t,message:e.t0.message,status:Cf.FAILURE}));case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e,t,r){return c.apply(this,arguments)})},{key:"_stepCallback",value:function(e){}},{key:"checkImagesIntegrity",value:(o=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(ga.checkImagesIntegrity,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.hashlinkVerifier.verifyHashlinkTable().catch((function(e){throw console.error("hashlink verification error",e),new wa(ga.checkImagesIntegrity,ha("errors","checkImagesIntegrity"))}));case 2:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"checkRevokedStatus",value:(n=i(Wt.mark((function e(){var t,r,n=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getRevocationListUrl()){e.next=6;break}return console.warn("No revocation list url was set on the issuer."),e.next=5,this._doAction(ga.checkRevokedStatus,(function(){return!0}));case 5:return e.abrupt("return",void e.sent);case 6:return e.next=8,this._doAction(null,i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uf.verifier.getRevokedAssertions(t,n.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 8:return r=e.sent,e.next=11,this._doAction(ga.checkRevokedStatus,(function(){return function(e,t){if(e&&t){Array.isArray(t)||(t=[t]),t=t.filter((function(e){return null!=e}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return t.includes(e)})).filter((function(e,t,r){return r.indexOf(e)===t}))}(t,e.map((function(e){return e.id})));if(r.length>0){var n=e.findIndex((function(e){return e.id===r[0]}));if(n>-1)throw new wa(ga.checkRevokedStatus,Uf.certificates.generateRevocationReason(e[n].revocationReason))}}}(r,n.id)}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkExpiresDate",value:(r=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(ga.checkExpiresDate,(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=Lf(e);if((new Date).getTime()>=t)throw new wa(ga.checkExpiresDate,ha("errors","ensureNotExpired"))}}(t.expires)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"controlVerificationMethod",value:(t=i(Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction(ga.controlVerificationMethod,(function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=function(e){return e.id}(e);if(r!==t.split("#")[0])throw new wa(ga.controlVerificationMethod,"".concat(Hy," - ").concat(Uf.i18n.getText("errors","controlVerificationMethod")))}(t.issuer.didDocument,ZH(t.documentToVerify.proof))}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"findStepFromVerificationProcess",value:function(e,t){return Uf.verifier.findVerificationSubstep(e,this.verificationSteps,t)}},{key:"_failed",value:function(e){var t=e.message;return lK("failure:".concat(t)),this._setFinalStep({status:Cf.FAILURE,message:t})}},{key:"_isFailing",value:function(){return this._stepsStatuses.some((function(e){return e.status===Cf.FAILURE}))}},{key:"_succeed",value:function(){var e;return 1===this.proofVerifiers.length&&(e=Uf.chains.isMockChain(this.proofVerifiers[0].getChain())?Uf.i18n.getText("success","mocknet"):Uf.i18n.getText("success","blockchain"),lK(e)),this.proofVerifiers.length>1&&(e=Uf.i18n.getText("success","multisign")),this._setFinalStep({status:Cf.SUCCESS,message:e})}},{key:"_setFinalStep",value:function(e){var t=e.status,r=e.message;return{code:ya.final,status:t,message:r}}},{key:"_updateStatusCallback",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(null!=e){var i=this.findStepFromVerificationProcess(e,r),a={code:e,status:t,parentStep:i.parentStep,label:i.labelPending};n&&(a.errorMessage=n),this._stepCallback(a)}}}]),e}();function hK(e,t){return dK.apply(this,arguments)}function dK(){return dK=i(Wt.mark((function e(t,r){var n,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=E(t.matchAll(/hl:{1}[a-zA-Z0-9]+:{1}[a-zA-Z0-9]+/gm)).map((function(e){return e[0]})).filter((function(e){return!!e}))).length){e.next=6;break}return e.next=4,function(){var e=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.decode(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent.reduce((function(e,t){return e.push(t.meta.url[0]),e}),[]));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(n,r);case 4:a=e.sent,t=function(e,t,r){return t.forEach((function(t,n){e=e.replace(r[n],t)})),e}(t,a,n);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),dK.apply(this,arguments)}var pK=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,e),u(this,"certificateImage",void 0),u(this,"certificateJson",void 0),u(this,"description",void 0),u(this,"display",void 0),u(this,"expires",void 0),u(this,"explorerAPIs",[]),u(this,"id",void 0),u(this,"isFormatValid",void 0),u(this,"issuedOn",void 0),u(this,"issuer",void 0),u(this,"locale",void 0),u(this,"metadataJson",void 0),u(this,"name",void 0),u(this,"options",void 0),u(this,"recipientFullName",void 0),u(this,"recordLink",void 0),u(this,"revocationKey",void 0),u(this,"sealImage",void 0),u(this,"signature",void 0),u(this,"signatureImage",void 0),u(this,"signers",[]),u(this,"subtitle",void 0),u(this,"hashlinkVerifier",void 0),u(this,"verificationSteps",void 0),u(this,"verifier",void 0),this._setOptions(n),"object"!=r(t))try{t=JSON.parse(t)}catch(t){throw new Error(Uf.i18n.getText("errors","certificateNotValid"))}this.certificateJson=By(t),this.hashlinkVerifier=new Gi}var t,n,o,c,l;return s(e,[{key:"init",value:(l=i(Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parseJson(this.certificateJson);case 2:this.verifier=new fK({certificateJson:this.certificateJson,expires:this.expires,id:this.id,issuer:this.issuer,hashlinkVerifier:this.hashlinkVerifier,revocationKey:this.revocationKey,explorerAPIs:By(this.explorerAPIs)}),this.verificationSteps=this.verifier.getVerificationSteps();case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"verify",value:(c=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.verifier.verify(t);case 2:return r=e.sent,e.abrupt("return",(this.setSigners(),r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"parseJson",value:(o=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=zf(t["@context"]),e.next=4,Kf[r.versionNumber](t);case 4:return n=e.sent,e.abrupt("return",(n.isFormatValid=!0,n));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{isFormatValid:!1,error:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()(t);case 2:if((r=e.sent).isFormatValid){e.next=5;break}throw new Error(r.error);case 5:return e.next=7,this._setProperties(r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setSigners",value:function(){this.signers=this.verifier.getSignersData()}},{key:"_setOptions",value:function(e){this.options=Object.assign({},ua,e),this.locale=Uf.i18n.ensureIsSupported("auto"===this.options.locale?Uf.i18n.detectLocale():this.options.locale),this.explorerAPIs=this.options.explorerAPIs||[],e.didResolverUrl&&(Uf.did.didResolver.url=e.didResolverUrl),la.locale=this.locale}},{key:"_setProperties",value:(n=i(Wt.mark((function e(t){var r,n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.certificateImage,n=t.description,i=t.display,a=t.expires,o=t.id,s=t.isFormatValid,u=t.issuedOn,c=t.issuer,l=t.metadataJson,f=t.name,h=t.recipientFullName,d=t.recordLink,p=t.revocationKey,v=t.sealImage,y=t.signature,g=t.signatureImage,b=t.subtitle,this.isFormatValid=s,this.certificateImage=r,this.description=n,this.expires=a,this.id=o,this.issuedOn=u,this.issuer=c,this.metadataJson=l,this.name=f,this.recipientFullName=h,this.recordLink=d,this.revocationKey=p,this.sealImage=v,this.signature=y,this.signatureImage=g,this.subtitle=b,e.next=19,this.parseHashlinksInDisplay(i);case 19:this.display=e.sent;case 20:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseHashlinksInDisplay",value:(t=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=By(t))){e.next=8;break}if(e.t0="text/html"!==r.contentMediaType,e.t0){e.next=7;break}return e.next=6,hK(r.content,this.hashlinkVerifier);case 6:r.content=e.sent;case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function vK(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}function yK(e){return/^(\.\/|\.\.\/|[A-Z]:\/\/|\/)[^ "]+$/.test(e)}function gK(){return{certificateDefinition:null,errorMessage:"errors.invalidBlockcertsUrl"}}function bK(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=n.onabort=r,n.readAsText(e)}))}function mK(){return(mK=i(Wt.mark((function e(t){var r;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bK(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wK,xK,_K,kK,SK,EK=["documentLoader"];
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function IK(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))}function AK(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(kK||(kK={})),function(e){e.V1_1="1.1",e.V1_2="1.2"}(SK||(SK={}));var TK=SK,PK={formatValidation:{label:"Format validation",labelPending:"Validating format",subSteps:[]},hashComparison:{label:"Hash comparison",labelPending:"Comparing hash",subSteps:[]},statusCheck:{label:"Status check",labelPending:"Checking record status",subSteps:[]}};Object.freeze({__proto__:null,final:"final",formatValidation:"formatValidation",hashComparison:"hashComparison",statusCheck:"statusCheck",language:PK});var OK={"en-US":{steps:{formatValidationLabel:"Format validation",formatValidationLabelPending:"Validating format",hashComparisonLabel:"Hash comparison",hashComparisonLabelPending:"Comparing hash",statusCheckLabel:"Status check",statusCheckLabelPending:"Checking record status"},subSteps:{getTransactionIdLabel:"Get transaction ID",getTransactionIdLabelPending:"Getting transaction ID",computeLocalHashLabel:"Compute local hash",computeLocalHashLabelPending:"Computing local hash",fetchRemoteHashLabel:"Fetch remote hash",fetchRemoteHashLabelPending:"Fetching remote hash",getIssuerProfileLabel:"Get issuer profile",getIssuerProfileLabelPending:"Getting issuer profile",parseIssuerKeysLabel:"Parse issuer keys",parseIssuerKeysLabelPending:"Parsing issuer keys",compareHashesLabel:"Compare hashes",compareHashesLabelPending:"Comparing hashes",checkMerkleRootLabel:"Check Merkle Root",checkMerkleRootLabelPending:"Checking Merkle Root",checkReceiptLabel:"Check Receipt",checkReceiptLabelPending:"Checking Receipt",checkIssuerSignatureLabel:"Check Issuer Signature",checkIssuerSignatureLabelPending:"Checking Issuer Signature",checkAuthenticityLabel:"Check Authenticity",checkAuthenticityLabelPending:"Checking Authenticity",checkRevokedStatusLabel:"Check Revoked Status",checkRevokedStatusLabelPending:"Checking Revoked Status",checkExpiresDateLabel:"Check Expiration Date",checkExpiresDateLabelPending:"Checking Expiration Date"},revocation:{preReason:"Reason given:",reason:"This certificate has been revoked by the issuer."},success:{mocknet:{label:"This Mocknet credential passed all checks",description:"Mocknet credentials are used for test purposes only. They are not recorded on a blockchain, and they should not be considered verified Blockcerts."},blockchain:{label:"Verified",description:"This is a valid ${chain} certificate.",linkText:"View transaction link"}},errors:{certificateNotValid:"This is not a valid certificate",checkEtherScanConfirmations:"Number of transaction confirmations were less than the minimum required, according to EtherScan API",couldNotConfirmTx:"Could not confirm the transaction",ensureHashesEqual:"Computed hash does not match remote hash",ensureIssuerSignature:"Issuer key does not match derived address.",ensureMerkleRootEqual:"Merkle root does not match remote hash.",ensureNotExpired:"This certificate has expired.",ensureValidReceipt:"The receipt is malformed. There was a problem navigating the merkle tree in the receipt.",failedJsonLdNormalization:"Failed JSON-LD normalization",foundUnmappedFields:"Found unmapped fields during JSON-LD normalization",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Didn't recognize chain value",getIssuerProfile:"Unable to get issuer profile",getRevokedAssertions:"Unable to get revocation assertions",getTransactionId:"Cannot verify this certificate without a transaction ID to compare against.",invalidMerkleReceipt:"Invalid Merkle Receipt. Proof hash did not match Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Cannot verify this certificate without a transaction ID to compare against.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"Could not confirm the transaction. No blockchain apis returned a response. This could be because of rate limiting.",lookForTxDifferentAddresses:"Issuing addresses returned by the blockchain APIs were different",lookForTxDifferentRemoteHashes:"Remote hashes returned by the blockchain APIs were different",lookForTxInvalidAppConfig:"Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value",lookForTxInvalidChain:"Invalid chain; does not map to known BlockchainExplorers.",parseBlockCypherResponse:"Number of transaction confirmations were less than the minimum required, according to Blockcypher API",parseBlockstreamResponse:"Number of transaction confirmations were less than the minimum required, according to Blockstream API",parseIssuerKeys:"Unable to parse JSON out of issuer identification data.",unableToGetRemoteHash:"Unable to get remote hash"}},fr:{steps:{formatValidationLabel:"Validation du format",formatValidationLabelPending:"Validation du format",hashComparisonLabel:"Comparaison du hash",hashComparisonLabelPending:"Comparaison du hash",statusCheckLabel:"Vrification du status",statusCheckLabelPending:"Vrification du status"},subSteps:{getTransactionIdLabel:"Obtention de l'identifiant de transaction",getTransactionIdLabelPending:"Obtention de l'identifiant de transaction",computeLocalHashLabel:"Calcul du hash local",computeLocalHashLabelPending:"Calcul du hash local",fetchRemoteHashLabel:"Rcupration du hash distant",fetchRemoteHashLabelPending:"Rcupration du hash distant",getIssuerProfileLabel:"Obtention du profil de l'metteur",getIssuerProfileLabelPending:"Obtention du profil de l'metteur",parseIssuerKeysLabel:"Traitement des cls de l'metteur",parseIssuerKeysLabelPending:"Traitement des cls de l'metteur",compareHashesLabel:"Comparaison des hash",compareHashesLabelPending:"Comparaison des hashs",checkMerkleRootLabel:"Vrification du Merkle Root",checkMerkleRootLabelPending:"Vrification du  Merkle Root",checkReceiptLabel:"Vrification du reu",checkReceiptLabelPending:"Vrification du reu",checkIssuerSignatureLabel:"Vrification de la signature de l'metteur",checkIssuerSignatureLabelPending:"Vrification de la signature de l'metteur",checkAuthenticityLabel:"Vrification de l'authenticit",checkAuthenticityLabelPending:"Vrification de l'authenticit",checkRevokedStatusLabel:"Vrification du status de rvocation",checkRevokedStatusLabelPending:"Vrification du status de rvocation",checkExpiresDateLabel:"Vrification de la date d'expiration",checkExpiresDateLabelPending:"Vrification de la date d'expiration"},revocation:{preReason:"Raison :",reason:"Ce certificat a t rvoqu par l'metteur."},success:{mocknet:{label:"Cet enregistrement Mocknet a t vrifi",description:"Le mode Mocknet est utilis  des fins de tests uniquement. Ce Blockcert n'a pas t enregistr sur une blockchain, et en tant que tel ne peut pas tre considr un Blockcert valide."},blockchain:{label:"Vrifi",description:"Ceci est un certificat ${chain} valide.",linkText:"Voir la transaction"}},errors:{certificateNotValid:"Certificat invalide",checkEtherScanConfirmations:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API EtherScan",couldNotConfirmTx:"Impossible de confirmer la transaction",ensureHashesEqual:"Calcul du hash local diffrent du hash distant",ensureIssuerSignature:"La cl de l'metteur ne correspond pas  l'adresse drive",ensureMerkleRootEqual:"Le Merkle root ne correspond pas au hash distant",ensureNotExpired:"Certificat expir",ensureValidReceipt:"Erreur d'criture du reu. Un problme est survenu lors de la navigation de l'arbre Merkle du reu.",failedJsonLdNormalization:"Erreur de normalisation JSON-LD",foundUnmappedFields:"Champs non lis dcouverts durant la normalisation JSON-LD",invalidIssuingAddressCreationTime:"L'adresse d'mission utilise a t cre aprs la transaction d'enregistrement.",invalidIssuingAddressRevoked:"L'adresse d'mission utilise a t dcommissionne par l'metteur avant la transaction d'enregistrement.",invalidIssuingAddressExpired:"L'adresse d'mission utilise a expir avant la transaction.",invalidIssuingAddressUnknown:"L'adresse utilise pour mettre ce Blockcerts n'appartient  l'metteur dclar.",getChain:"Valeur de chaine non reconnue",getIssuerProfile:"Profil de l'metteur indisponible",getRevokedAssertions:"Impossible d'obtenir les raisons de revocation",getTransactionId:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",invalidMerkleReceipt:"Reu Merkle invalide. Hash de preuve diffrent du Merkle root",invalidMerkleVersion:"La version du Merkle utilis est incompatible avec la version Blockcerts.",isTransactionIdValid:"Impossible de vrifier ce certificat sans un identifiant de transaction valide",issuerProfileNotSet:"l'URL de l'metteur n'est pas dfinie",issuerProfileInvalid:"le document distant ne semble pas tre un profil d'metteur valide",lookForTxCouldNotConfirm:"Impossible de confirmer la transaction. Aucune API blockchain n'a rpondu. Potentiellement d  une limite de dbit rseau.",lookForTxDifferentAddresses:"Les adresses d'mission reues de l'API blockchain ne concordent pas",lookForTxDifferentRemoteHashes:"Les hashs distants reus de l'API blockchain ne concordent pas",lookForTxInvalidAppConfig:"Configuration de l'application invalide : vrifiez la valeur de configuration de CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Chaine invalide : non lie  un BlockchainExplorers connu",parseBlockCypherResponse:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API Blockcypher",parseBlockstreamResponse:"Le nombre de confirmations de transaction n'atteint pas le minimum requis, d'aprs l'API Blockstream",parseIssuerKeys:"Impossible de lire le JSON d'identification de l'metteur",unableToGetRemoteHash:"Impossible d'obtenir le hash distant"}},es:{steps:{formatValidationLabel:"Validacin de formato",formatValidationLabelPending:"Validando el formato",hashComparisonLabel:"Comparacin de cadena binaria",hashComparisonLabelPending:"Comparando cadena binaria",statusCheckLabel:"Estado de Verificacin",statusCheckLabelPending:"Verificando Estado de Grabacin"},subSteps:{getTransactionIdLabel:"Obtener Identificacin de Transaccin",getTransactionIdLabelPending:"Obteniendo Identificacin de Transaccin",computeLocalHashLabel:"Calcular cadena binaria local",computeLocalHashLabelPending:"Calculando cadena binaria local",fetchRemoteHashLabel:"Obtener cadena binaria remota",fetchRemoteHashLabelPending:"Obeniendo cadena binaria remota",getIssuerProfileLabel:"Obtener perfil de emisor",getIssuerProfileLabelPending:"Obteniendo perfil de emisor",parseIssuerKeysLabel:"Analizar claves del emisor",parseIssuerKeysLabelPending:"Analizando claves del emisor",compareHashesLabel:"Comparar cadenas binarias",compareHashesLabelPending:"Comparando cadenas binarias",checkMerkleRootLabel:"Verificar Merkle Root",checkMerkleRootLabelPending:"Verificando Merkle Root",checkReceiptLabel:"Verificar Recibo",checkReceiptLabelPending:"Verificando Recibo",checkIssuerSignatureLabel:"Verificar Firma del Emisor",checkIssuerSignatureLabelPending:"Verificando Firma del Emisor",checkAuthenticityLabel:"Verificar Autenticidad",checkAuthenticityLabelPending:"Verificando Autenticidad",checkRevokedStatusLabel:"Verificar Estado de Revocacin",checkRevokedStatusLabelPending:"Verificando Estado de Revocacin",checkExpiresDateLabel:"Verificar Fechas de Expiracin",checkExpiresDateLabelPending:"Verificando Fechas de Expiracin"},revocation:{preReason:"Razn dada:",reason:"Este certificado ha sido revocado por el emisor"},success:{mocknet:{label:"Esta credencial de Mocknet pas todas las comprobaciones",description:"Las credenciales de Mocknet se usan solo con fines de prueba. No se graban en una cadena de bloques, y no se deben considerar Blockcerts Verificados."},blockchain:{label:"Verificado",description:"Este es un certificado vlido de ${chain}.",linkText:"Ver enlace de transaccin"}},errors:{certificateNotValid:"Este no es un certificado vlido",checkEtherScanConfirmations:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API EtherScan",couldNotConfirmTx:"No se ha podido confirmar la transaccin",ensureHashesEqual:"La cadena binaria calculada no corresponde con la cadena binaria remota",ensureIssuerSignature:"La llave del emisor no corresponde con la direccin obtenida",ensureMerkleRootEqual:"La raz Merkle no corresponde con la cadena binaria remota",ensureNotExpired:"Este certificado ha expirado",ensureValidReceipt:"El recibo est malformado. Hubo un problema navegando el rbol Merkle en el recibo",failedJsonLdNormalization:"La normalizacin del JSON-LD ha fallado",foundUnmappedFields:"Se han encontrado campos no mapeados durante la normalizacin de JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Valor de cadena no reconocido",getIssuerProfile:"No se ha podido obtener el perfil del emisor",getRevokedAssertions:"No se ha podido obtener aseveraciones de revocacin",getTransactionId:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",invalidMerkleReceipt:"Recibo Merkle invlido. La cadena binaria de prueba no corresponde con la raz Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"No se puede verificar este certificado sin una identificacin de transaccin que sirva como comparacin",issuerProfileNotSet:"URL del emisor no definido",issuerProfileInvalid:"el documento recogido no parece ser un perfil de emisor valido",lookForTxCouldNotConfirm:"No se ha podido confirmar la transaccin. Ninguna del las APIs de blockchain gener una respuesta. Esto puede ser causado por limitaciones de tasa.",lookForTxDifferentAddresses:"Las direcciones emisoras generadas por las APIs del blockchain son distintas",lookForTxDifferentRemoteHashes:"Las cadenas binarias remotas generadas por las APIs del blockchain son distintas",lookForTxInvalidAppConfig:"Configuracin de aplicacin invlida; cheque el valor de configuracin CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Cadena invlida; no corresponde a BlockchainExplorers reconocidos",parseBlockCypherResponse:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API Blockcypher",parseBlockstreamResponse:"El nmero de transacciones confirmadas son menores que el mnimo requerido, de acuerdo al API Blockstream",parseIssuerKeys:"No se ha podido analizar el JSON de la informacin de identificacin del emisor",unableToGetRemoteHash:"No se ha podido obtener la cadena binaria remota"}},mt:{steps:{formatValidationLabel:"Validazzjoni tal-format",formatValidationLabelPending:"Il-format qed jii vvalidat",hashComparisonLabel:"Paragun tal-Hash",hashComparisonLabelPending:"Il-hash qed jii pparagunat",statusCheckLabel:"Status check",statusCheckLabelPending:"Ir-record status qed jii ekkjat"},subSteps:{getTransactionIdLabel:"Ikseb l-ID ta' tranazzjoni",getTransactionIdLabelPending:"L-ID ta' tranazzjoni qed tii mnila",computeLocalHashLabel:"Ikkalkula l-hash lokali",computeLocalHashLabelPending:"Il-hash lokali qed jii kkalkulat",fetchRemoteHashLabel:"Fittex ir-remote hash",fetchRemoteHashLabelPending:"Ir-remote hash qed jii mfittex",getIssuerProfileLabel:"Ikseb il-profil tal-emittent",getIssuerProfileLabelPending:"Il-profil tal-emittent qed jii mniel",parseIssuerKeysLabel:"Estratta -wievet tal-emittent",parseIssuerKeysLabelPending:"I-wievet tal-emittent qed jiu estratti",compareHashesLabel:"Ikkumpara l-hashes",compareHashesLabelPending:"Il-hashes qed jiu kkomparati",checkMerkleRootLabel:"Iekkja l-Merkle Root",checkMerkleRootLabelPending:"Il-Merkle Root Qed Tii ekkjata",checkReceiptLabel:"Iekkja l-Irevuta",checkReceiptLabelPending:"L-Irevuta Qed Tii ekkjata",checkIssuerSignatureLabel:"Iekkja l-Firma tal-Emittent",checkIssuerSignatureLabelPending:"Il-Firma tal-Emittent Qed Tii ekkjata",checkAuthenticityLabel:"Iekkja l-Awtentiit",checkAuthenticityLabelPending:"L-Awtentiit Qed Tii ekkjata",checkRevokedStatusLabel:"Iekkja l-Istatus Revokat",checkRevokedStatusLabelPending:"L-Istatus Revokat Qed Jii ekkjat",checkExpiresDateLabel:"Iekkja d-Data ta' Skadenza",checkExpiresDateLabelPending:"Id-Data ta' Skadenza Qed Tii ekkjata"},revocation:{preReason:"Rauni mogtija:",reason:"Dan i-ertifikat ie revokat mill-emittent."},success:{mocknet:{label:"Din il-kredenzjali tal-Mocknet gaddiet il-kontrolli kollha",description:"Il-kredenzjali tal-Mocknet jintuaw biss gal skopijiet ta 'ttestjar. Dawn mhumiex irreistrati fuq blockchain, u ma gandhomx jiu kkunsidrati bala blockcerts verifikati."},blockchain:{label:"Ivverifikat",description:"Dan huwa ertifikat ${chain} huwa validu.",linkText:"Ara l-link tat-transazzjoni"}},errors:{certificateNotValid:"Dan mhux ertifikat validu",checkEtherScanConfirmations:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont EtherScan API",couldNotConfirmTx:"Ma setgetx tii kkonfermata t-tranazzjoni",ensureHashesEqual:"Il-hash ikkalkulat ma jikkorrispondix mar-remote hash",ensureIssuerSignature:"I-avetta tal-emittent ma taqbilx mal-indirizz derivat",ensureMerkleRootEqual:"Merkle root ma taqbilx mar-remote hash",ensureNotExpired:"Dan i-ertifikat skada",ensureValidReceipt:"L-irevuta hija malformata. Kien hemm problema fin-navigazzjoni tal-merkle tree fl-irevuta",failedJsonLdNormalization:"In-normalizzazzjoni ta' JSON-LD ma rnexxietx",foundUnmappedFields:"Instabu unmapped fields matul in-normalizzazzjoni JSON-LD",invalidIssuingAddressCreationTime:"L-indirizz elettroniku tal-ru speifikat inoloq wara li seet it-tranazzjoni.",invalidIssuingAddressRevoked:"L-indirizz elettroniku tal-ru speifikat ie revokat mill-emittent qabel ma seet it-tranazzjoni.",invalidIssuingAddressExpired:"L-indirizz elettroniku tal-ru speifikat skada qabel ma seet it-tranazzjoni.",invalidIssuingAddressUnknown:"L-indirizz elettroniku uat biex jinaru dawn il-Blockcerts ma jappartjenix gall-emittent mitlub.",getChain:"I-chain value ma ntgarafx",getIssuerProfile:"Mhux possibbli jinkiseb il-profil tal-emittent",getRevokedAssertions:"Mhux possibbli jinkisbu dikjarazzjonijiet revokati",getTransactionId:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",invalidMerkleReceipt:"Irevuta Merkle invalida. Il-proof hash ma kienx jaqbel mal-Merkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Dan i-ertifikat ma jistax jii vverifikat mingajr ID ta' tranazzjoni mqabbla miegu",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"It-tranazzjoni ma setgetx tii kkonferma. L-ebda blockchain apis ma rritorna rispons. Dan jista' jkun minabba limitazzjoni tar-rata",lookForTxDifferentAddresses:"L-indirizzi tal-ru mibguta lura mill-blockchain APIs kienu differenti",lookForTxDifferentRemoteHashes:"Ir-remote hashes mibguta lura mill-blockchain APIs kienu differenti",lookForTxInvalidAppConfig:"Konfigurazzjoni tal-applikazzjoni invalida; Iekkja l-valur konfigurattiv f' CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Chain invalidu; BlockchainExplorers mhux qed isib chain magrufa",parseBlockCypherResponse:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont Blockcypher API",parseBlockstreamResponse:"In-numru ta' konfermi tat-tranazzjonijiet kienu inqas mill-minimu metie, skont Blockstream API",parseIssuerKeys:"Ma jistax jii estratt JSON mid-data tal-identifikazzjoni tal-emittent",unableToGetRemoteHash:"Mhux possibbli jinkiseb ir-remote hash"}},"it-IT":{steps:{formatValidationLabel:"Convalidare formato",formatValidationLabelPending:"Convalida formato",hashComparisonLabel:"Confrontare hash",hashComparisonLabelPending:"Confronta hash",statusCheckLabel:"Verificare stato",statusCheckLabelPending:"Verifica stato del record"},subSteps:{getTransactionIdLabel:"Ottenere ID transazione",getTransactionIdLabelPending:"Ottieni ID transazione",computeLocalHashLabel:"Calcolare hash locale",computeLocalHashLabelPending:"Calcola hash locale",fetchRemoteHashLabel:"Recuperare hash remoto",fetchRemoteHashLabelPending:"Recupera hash remoto",getIssuerProfileLabel:"Ottenere profilo issuer",getIssuerProfileLabelPending:"Ottieni profilo issuer",parseIssuerKeysLabel:"Analizzare chiavi issuer",parseIssuerKeysLabelPending:"Analizza chiavi issuer",compareHashesLabel:"Confrontare gli hash",compareHashesLabelPending:"Confronto hash",checkMerkleRootLabel:"Controllare radice di Merkle",checkMerkleRootLabelPending:"Controllo radice di Merkle",checkReceiptLabel:"Verificare ricevuta",checkReceiptLabelPending:"Verifica ricevuta",checkIssuerSignatureLabel:"Verificare firma Issuer",checkIssuerSignatureLabelPending:"Verifica firma Issuer",checkAuthenticityLabel:"Verificare autenticit",checkAuthenticityLabelPending:"Verifica autenticit",checkRevokedStatusLabel:"Verificare stato revocato",checkRevokedStatusLabelPending:"Verifica stato revocato",checkExpiresDateLabel:"Verificare data di scadenza",checkExpiresDateLabelPending:"Verifica data di scadenza"},revocation:{preReason:"Motivo indicato:",reason:"Questo certificato  stato revocato dall'emittente."},success:{mocknet:{label:"Questo Blockcert simulato ha superato tutti i controlli.",description:"La modalit Mocknet  utilizzata solo dagli emittenti per testare il loro flusso di lavoro localmente. Questo Blockcert non  stato registrato su una blockchain e non dovrebbe essere considerato un Blockcert verificato."},blockchain:{label:"Verificato",description:"Questo  un certificato ${chain} valido.",linkText:"Vedi la transazione"}},errors:{certificateNotValid:"Questo non  un certificato valido",checkEtherScanConfirmations:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API EtherScan",couldNotConfirmTx:"Impossibile confermare la transazione",ensureHashesEqual:"L'hash calcolato non corrisponde all'hash remoto",ensureIssuerSignature:"La chiave dell'issuer non corrisponde all'indirizzo derivato.",ensureMerkleRootEqual:"La radice di Merkle non corrisponde all'hash remoto.",ensureNotExpired:"Questo certificato  scaduto.",ensureValidReceipt:"La ricevuta  malformata. C' stato un problema nella navigazione dell'albero di Merkle nella ricevuta.",failedJsonLdNormalization:"Normalizzazione JSON-LD fallita",foundUnmappedFields:"Campi non mappati trovati durante la normalizzazione JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"Il valore della catena non  stato riconosciuto",getIssuerProfile:"Impossibile ottenere il profilo dell'emittente",getRevokedAssertions:"Impossibile ottenere le asserzioni di revoca",getTransactionId:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",invalidMerkleReceipt:"Ricevuta Merkle non valida. L'hash di prova non corrisponde alla radice di Merkle",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"Impossibile verificare questo certificato senza un ID transazione da confrontare.",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"Impossibile confermare la transazione. Nessuna API blockchain ha risposto. Potrebbe essere a causa della limitazione della velocit.",lookForTxDifferentAddresses:"Gli indirizzi di emissione restituiti dalle API blockchain erano diversi",lookForTxDifferentRemoteHashes:"Gli hash remoti restituiti dalle API blockchain erano diversi",lookForTxInvalidAppConfig:"Configurazione dell'applicazione non valida, verificare il valore di configurazione di CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"Catena non valida; non mappa BlockchainExplorers noti.",parseBlockCypherResponse:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API Blockcypher",parseBlockstreamResponse:"Il numero di conferme delle transazioni era inferiore al minimo richiesto, secondo l'API Blockstream",parseIssuerKeys:"Impossibile analizzare JSON dai dati di identificazione dell'emittente.",unableToGetRemoteHash:"Impossibile ottenere l'hash remoto"}},ja:{steps:{formatValidationLabel:"",formatValidationLabelPending:"",hashComparisonLabel:"",hashComparisonLabelPending:"",statusCheckLabel:"",statusCheckLabelPending:""},subSteps:{getTransactionIdLabel:"ID",getTransactionIdLabelPending:"ID",computeLocalHashLabel:"",computeLocalHashLabelPending:"",fetchRemoteHashLabel:"",fetchRemoteHashLabelPending:"",getIssuerProfileLabel:"",getIssuerProfileLabelPending:"",parseIssuerKeysLabel:"",parseIssuerKeysLabelPending:"",compareHashesLabel:"",compareHashesLabelPending:"",checkMerkleRootLabel:"Merkle Root",checkMerkleRootLabelPending:"Merkle Root",checkReceiptLabel:"",checkReceiptLabelPending:"",checkIssuerSignatureLabel:"",checkIssuerSignatureLabelPending:"",checkAuthenticityLabel:"",checkAuthenticityLabelPending:"",checkRevokedStatusLabel:"",checkRevokedStatusLabelPending:"",checkExpiresDateLabel:"",checkExpiresDateLabelPending:""},revocation:{preReason:"",reason:""},success:{mocknet:{label:"Mocknet",description:"MocknetBlockcert"},blockchain:{label:"",description:"${chain}",linkText:""}},errors:{certificateNotValid:"",checkEtherScanConfirmations:"EtherScan API",couldNotConfirmTx:"",ensureHashesEqual:"",ensureIssuerSignature:"",ensureMerkleRootEqual:"Merkle root",ensureNotExpired:"",ensureValidReceipt:"Merkle tree",failedJsonLdNormalization:"JSON-LD",foundUnmappedFields:"JSON-LD",invalidIssuingAddressCreationTime:"The specified issuing address was created after the transaction occurred.",invalidIssuingAddressRevoked:"The specified issuing address was revoked by the issuer before the transaction occurred.",invalidIssuingAddressExpired:"The specified issuing address expired before the transaction occurred.",invalidIssuingAddressUnknown:"The address used to issue this Blockcerts does not belong to the claimed issuer.",getChain:"",getIssuerProfile:"",getRevokedAssertions:"assertions",getTransactionId:"ID",invalidMerkleReceipt:"MerkleMerkle root",invalidMerkleVersion:"Merkle version used for signature is incompatible with Blockcerts version.",isTransactionIdValid:"ID",issuerProfileNotSet:"no issuer address given",issuerProfileInvalid:"retrieved file does not seem to be a valid profile",lookForTxCouldNotConfirm:"API ",lookForTxDifferentAddresses:"API",lookForTxDifferentRemoteHashes:"API",lookForTxInvalidAppConfig:"CONFIG.MinimumBlockchainExplorers",lookForTxInvalidChain:"BlockchainExplorers",parseBlockCypherResponse:"Blockcypher API",parseBlockstreamResponse:"Blockstream API",parseIssuerKeys:"JSON",unableToGetRemoteHash:""}}};function CK(e,t){return OK["en-US"].subSteps["".concat(e).concat(t)]}var MK,NK={formatValidation:["getTransactionId","computeLocalHash","fetchRemoteHash","getIssuerProfile","parseIssuerKeys"],hashComparison:["compareHashes","checkMerkleRoot","checkReceipt"],statusCheck:["checkIssuerSignature","checkAuthenticity","checkRevokedStatus","checkExpiresDate"]},RK=Object.keys(NK).reduce((function(e,t){return Object.assign(e,NK[r=t].reduce((function(e,t){return e[t]={code:t,label:CK(t,"Label"),labelPending:CK(t,"LabelPending"),parentStep:r},e}),{}));var r}),{});Object.freeze({__proto__:null,getTransactionId:"getTransactionId",computeLocalHash:"computeLocalHash",fetchRemoteHash:"fetchRemoteHash",getIssuerProfile:"getIssuerProfile",parseIssuerKeys:"parseIssuerKeys",compareHashes:"compareHashes",checkMerkleRoot:"checkMerkleRoot",checkReceipt:"checkReceipt",checkIssuerSignature:"checkIssuerSignature",checkAuthenticity:"checkAuthenticity",checkRevokedStatus:"checkRevokedStatus",checkExpiresDate:"checkExpiresDate",language:RK}),Object.freeze({__proto__:null,FAILURE:"failure",STARTING:"starting",SUCCESS:"success"}),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(MK||(MK={}));var LK=(u(wK={},MK.Bitcoin,{code:MK.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}}),u(wK,MK.Ethmain,{code:MK.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}}),u(wK,MK.Ethropst,{code:MK.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}}),u(wK,MK.Ethrinkeby,{code:MK.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}}),u(wK,MK.Mocknet,{code:MK.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}}),u(wK,MK.Regtest,{code:MK.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}}),u(wK,MK.Testnet,{code:MK.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}),wK),jK="mainnet",DK="testnet",BK={"@context":[{id:"@id",type:"@type",bc:"https://w3id.org/blockcerts#",obi:"https://w3id.org/openbadges#",cp:"https://w3id.org/chainpoint#",extensions:"https://w3id.org/openbadges/extensions#",validation:"obi:validation",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",sec:"https://w3id.org/security#",Assertion:"bc:Assertion",Certificate:"bc:Certificate",Issuer:"bc:Issuer",BlockchainCertificate:"bc:BlockchainCertificate",CertificateDocument:"bc:CertificateDocument",issuer:{"@id":"bc:issuer","@type":"@id"},blockchaincertificate:{"@id":"bc:blockchaincertificate","@type":"@id"},certificate:{"@id":"bc:certificate","@type":"@id"},document:{"@id":"bc:document","@type":"@id"},assertion:{"@id":"bc:assertion","@type":"@id"},verify:{"@id":"bc:verify","@type":"@id"},recipient:{"@id":"bc:recipient","@type":"@id"},receipt:{"@id":"bc:receipt","@type":"@id"},publicKey:{"@id":"bc:publicKey"},revocationKey:{"@id":"bc:revocationKey"},"image:signature":{"@id":"bc:image:signature"},signature:{"@id":"bc:signature"},familyName:{"@id":"schema:familyName"},givenName:{"@id":"schema:givenName"},jobTitle:{"@id":"schema:jobTitle"},signer:{"@id":"bc:signer","@type":"@id"},"attribute-signed":{"@id":"bc:attribute-signed"},"ECDSA(secp256k1)":"bc:SignedBadge",subtitle:{"@id":"bc:subtitle"},email:"schema:email",hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},image:{"@id":"schema:image","@type":"@id"},salt:{"@id":"obi:salt"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},evidence:{"@id":"obi:evidence","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},tags:{"@id":"schema:keywords"},alignment:{"@id":"obi:alignment","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},name:{"@id":"schema:name"},description:{"@id":"schema:description"},url:{"@id":"schema:url","@type":"@id"},uid:{"@id":"obi:uid"},TypeValidation:"obi:TypeValidation",FrameValidation:"obi:FrameValidation",validatesType:"obi:validatesType",validationSchema:"obi:validationSchema",validationFrame:"obi:validationFrame",ChainpointSHA224v2:"cp:ChainpointSHA224v2",ChainpointSHA256v2:"cp:ChainpointSHA256v2",ChainpointSHA384v2:"cp:ChainpointSHA384v2",ChainpointSHA512v2:"cp:ChainpointSHA512v2","ChainpointSHA3-224v2":"cp:ChainpointSHA3-224v2","ChainpointSHA3-256v2":"cp:ChainpointSHA3-256v2","ChainpointSHA3-384v2":"cp:ChainpointSHA3-384v2","ChainpointSHA3-512v2":"cp:ChainpointSHA3-512v2",BTCOpReturn:"cp:BTCOpReturn",targetHash:"cp:targetHash",merkleRoot:"cp:merkleRoot",proof:"cp:proof",anchors:"cp:anchors",sourceId:"cp:sourceId",right:"cp:right",left:"cp:left"}],validation:[{type:"TypeValidation",validatesType:"Assertion",validationSchema:"https://w3id.org/blockcerts/schema/1.2/assertion-1.2.json"},{type:"TypeValidation",validatesType:"Certificate",validationSchema:"https://w3id.org/blockcerts/schema/1.2/certificate-1.2.json"},{type:"TypeValidation",validatesType:"Issuer",validationSchema:"https://w3id.org/blockcerts/schema/1.2/issuer-1.2.json"},{type:"TypeValidation",validatesType:"CertificateDocument",validationSchema:"https://w3id.org/blockcerts/schema/1.2/certificate-document-1.2.json"},{type:"TypeValidation",validatesType:"BlockchainCertificate",validationSchema:"https://w3id.org/blockcerts/schema/1.2/blockchain-certificate-1.2.json"},{type:"TypeValidation",validatesType:"BlockchainReceipt",validationSchema:"https://w3id.org/blockcerts/schema/1.2/blockchain-receipt-1.2.json"}]},UK={"@context":{id:"@id",type:"@type",extensions:"https://w3id.org/openbadges/extensions#",obi:"https://w3id.org/openbadges#",validation:"obi:validation",cred:"https://w3id.org/credentials#",dc:"http://purl.org/dc/terms/",schema:"http://schema.org/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",AlignmentObject:"schema:AlignmentObject",CryptographicKey:"sec:Key",Endorsement:"cred:Credential",Assertion:"obi:Assertion",BadgeClass:"obi:BadgeClass",Criteria:"obi:Criteria",Evidence:"obi:Evidence",Extension:"obi:Extension",FrameValidation:"obi:FrameValidation",IdentityObject:"obi:IdentityObject",Image:"obi:Image",HostedBadge:"obi:HostedBadge",hosted:"obi:HostedBadge",Issuer:"obi:Issuer",Profile:"obi:Profile",RevocationList:"obi:RevocationList",SignedBadge:"obi:SignedBadge",signed:"obi:SignedBadge",TypeValidation:"obi:TypeValidation",VerificationObject:"obi:VerificationObject",author:{"@id":"schema:author","@type":"@id"},caption:{"@id":"schema:caption"},claim:{"@id":"cred:claim","@type":"@id"},created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},description:{"@id":"schema:description"},email:{"@id":"schema:email"},endorsement:{"@id":"cred:credential","@type":"@id"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},genre:{"@id":"schema:genre"},image:{"@id":"schema:image","@type":"@id"},name:{"@id":"schema:name"},owner:{"@id":"sec:owner","@type":"@id"},publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyPem:{"@id":"sec:publicKeyPem"},related:{"@id":"dc:relation","@type":"@id"},startsWith:{"@id":"http://purl.org/dqm-vocabulary/v1/dqm#startsWith"},tags:{"@id":"schema:keywords"},targetDescription:{"@id":"schema:targetDescription"},targetFramework:{"@id":"schema:targetFramework"},targetName:{"@id":"schema:targetName"},targetUrl:{"@id":"schema:targetUrl"},telephone:{"@id":"schema:telephone"},url:{"@id":"schema:url","@type":"@id"},version:{"@id":"schema:version"},alignment:{"@id":"obi:alignment","@type":"@id"},allowedOrigins:{"@id":"obi:allowedOrigins"},audience:{"@id":"obi:audience"},badge:{"@id":"obi:badge","@type":"@id"},criteria:{"@id":"obi:criteria","@type":"@id"},endorsementComment:{"@id":"obi:endorsementComment"},evidence:{"@id":"obi:evidence","@type":"@id"},hashed:{"@id":"obi:hashed","@type":"xsd:boolean"},identity:{"@id":"obi:identityHash"},issuedOn:{"@id":"obi:issueDate","@type":"xsd:dateTime"},issuer:{"@id":"obi:issuer","@type":"@id"},narrative:{"@id":"obi:narrative"},recipient:{"@id":"obi:recipient","@type":"@id"},revocationList:{"@id":"obi:revocationList","@type":"@id"},revocationReason:{"@id":"obi:revocationReason"},revoked:{"@id":"obi:revoked","@type":"xsd:boolean"},revokedAssertions:{"@id":"obi:revoked"},salt:{"@id":"obi:salt"},targetCode:{"@id":"obi:targetCode"},uid:{"@id":"obi:uid"},validatesType:"obi:validatesType",validationFrame:"obi:validationFrame",validationSchema:"obi:validationSchema",verification:{"@id":"obi:verify","@type":"@id"},verificationProperty:{"@id":"obi:verificationProperty"},verify:"verification"}},FK={};FK["https://w3id.org/blockcerts/v1"]=BK,FK["https://w3id.org/openbadges/v2"]=UK,FK["https://openbadgespec.org/v2/context.json"]=UK;var zK={locale:"en-US"},HK=Object.freeze({__proto__:null,isMainnet:function(e){return AK(e,"1")||AK(e,"ecdsa-koblitz-pubkey:1")}}),VK={locale:"en-US"};function KK(e,t){return e&&t?OK[VK.locale]?OK[VK.locale][e]?OK[VK.locale][e][t]?OK[VK.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]":""}var qK=Object.freeze({__proto__:null,detectLocale:function(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||zK.locale},ensureIsSupported:function(e){var t,r=WX.i18n.getSupportedLanguages().map((function(e){return e.toLowerCase()}));if(!(t=r.indexOf(e.toLowerCase())>-1)){var n=e.substr(0,2).toLowerCase(),i=r.map((function(e){return e.split("-")[0]})).indexOf(n);(t=i>-1)&&(e=r[i])}return t||(e=zK.locale),function(e){var t=e.split("-");return t.length>1?"".concat(t[0].toLowerCase(),"-").concat(t[1].toUpperCase()):t[0].toLowerCase()}(e)},getText:KK,getSupportedLanguages:function(){return Object.keys(OK)}});function WK(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return HK.isMainnet(e)?LK.bitcoin:LK.testnet}function GK(e){var t=Object.keys(LK).map((function(e){return LK[e]})).find((function(t){return t.signatureValue===e}));if(void 0===t)throw new Error(KK("errors","getChain"));return t}var JK=s((function e(t,r,n,i){a(this,e),this.publicKey=t,this.created=r,this.revoked=n,this.expires=i})),XK=s((function e(t,r,n){a(this,e),this.image=t,this.jobTitle=r,this.name=n})),$K=function(e){c(r,e);var t=m(r);function r(e,n){var i;return a(this,r),(i=t.call(this,n)).stepCode=e,i}return s(r)}(p(Error)),YK=Object.freeze({__proto__:null,isMockChain:function(e){if(e){var t="string"==typeof e?e:e.code;return!!Object.keys(LK).some((function(e){return e===t}))&&!!LK[t].test}return!1}}),ZK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function QK(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eq(e,t){return e(t={exports:{}},t.exports),t.exports}function tq(e){return e&&e.default||e}var rq=eq((function(e,t){var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Boolean]",s="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",f="[object Number]",h="[object Object]",d="[object Promise]",p="[object RegExp]",v="[object Set]",y="[object String]",g="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",T="[object Uint16Array]",P="[object Uint32Array]",O=/\w*$/,C=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,N={};N[a]=N["[object Array]"]=N[m]=N[w]=N[o]=N[s]=N[x]=N[_]=N[k]=N[S]=N[E]=N[l]=N[f]=N[h]=N[p]=N[v]=N[y]=N[g]=N[I]=N[A]=N[T]=N[P]=!0,N["[object Error]"]=N[u]=N[b]=!1;var R="object"==r(ZK)&&ZK&&ZK.Object===Object&&ZK,L="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,j=R||L||Function("return this")(),D=t&&!t.nodeType&&t,B=D&&e&&!e.nodeType&&e,U=B&&B.exports===D;function F(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function H(e,t,r,n){var i=-1,a=e?e.length:0;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function K(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function q(e,t){return function(r){return e(t(r))}}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var G,J=Array.prototype,X=Function.prototype,$=Object.prototype,Y=j["__core-js_shared__"],Z=(G=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=X.toString,ee=$.hasOwnProperty,te=$.toString,re=RegExp("^"+Q.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=U?j.Buffer:void 0,ie=j.Symbol,ae=j.Uint8Array,oe=q(Object.getPrototypeOf,Object),se=Object.create,ue=$.propertyIsEnumerable,ce=J.splice,le=Object.getOwnPropertySymbols,fe=ne?ne.isBuffer:void 0,he=q(Object.keys,Object),de=je(j,"DataView"),pe=je(j,"Map"),ve=je(j,"Promise"),ye=je(j,"Set"),ge=je(j,"WeakMap"),be=je(Object,"create"),me=ze(de),we=ze(pe),xe=ze(ve),_e=ze(ye),ke=ze(ge),Se=ie?ie.prototype:void 0,Ee=Se?Se.valueOf:void 0;function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){this.__data__=new Ae(e)}function Oe(e,t,r){var n=e[t];ee.call(e,t)&&He(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ce(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function Me(e,t,r,n,i,d,b){var C;if(n&&(C=d?n(e,i,d,b):n(e)),void 0!==C)return C;if(!Ge(e))return e;var M=Ve(e);if(M){if(C=function(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!t)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,C)}else{var R=Be(e),L=R==u||R==c;if(qe(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(R==h||R==a||L&&!d){if(V(e))return d?e:{};if(C=function(e){return"function"!=typeof e.constructor||Fe(e)?{}:Ge(t=oe(e))?se(t):{};var t}(L?{}:e),!t)return function(e,t){return Re(e,De(e),t)}(e,function(e,t){return e&&Re(t,Je(t),e)}(C,e))}else{if(!N[R])return d?e:{};C=function(e,t,r,n){var i,a=e.constructor;switch(t){case m:return Ne(e);case o:case s:return new a(+e);case w:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case x:case _:case k:case S:case E:case I:case A:case T:case P:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case l:return function(e,t,r){return H(t?r(K(e),!0):K(e),F,new e.constructor)}(e,n,r);case f:case y:return new a(e);case p:return function(e){var t=new e.constructor(e.source,O.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return function(e,t,r){return H(t?r(W(e),!0):W(e),z,new e.constructor)}(e,n,r);case g:return i=e,Ee?Object(Ee.call(i)):{}}}(e,R,Me,t)}}b||(b=new Pe);var j=b.get(e);if(j)return j;if(b.set(e,C),!M)var D=r?function(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Je,De)}(e):Je(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r););}(D||e,(function(i,a){D&&(i=e[a=i]),Oe(C,a,Me(i,t,r,n,a,e,b))})),C}function Ne(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Re(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;Oe(r,o,void 0===s?e[o]:s)}return r}function Le(e,t){var n,i,a=e.__data__;return("string"==(i=r(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function je(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ge(e)||(t=e,Z&&Z in t))&&(We(e)||V(e)?re:C).test(ze(e));var t}(r)?r:void 0}Ie.prototype.clear=function(){this.__data__=be?be(null):{}},Ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ie.prototype.get=function(e){var t=this.__data__;if(be){var r=t[e];return r===n?void 0:r}return ee.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ee.call(t,e)},Ie.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?n:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,r=Ce(t,e);return!(r<0||(r==t.length-1?t.pop():ce.call(t,r,1),0))},Ae.prototype.get=function(e){var t=this.__data__,r=Ce(t,e);return r<0?void 0:t[r][1]},Ae.prototype.has=function(e){return Ce(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var r=this.__data__,n=Ce(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new Ie,map:new(pe||Ae),string:new Ie}},Te.prototype.delete=function(e){return Le(this,e).delete(e)},Te.prototype.get=function(e){return Le(this,e).get(e)},Te.prototype.has=function(e){return Le(this,e).has(e)},Te.prototype.set=function(e,t){return Le(this,e).set(e,t),this},Pe.prototype.clear=function(){this.__data__=new Ae},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ae){var n=r.__data__;if(!pe||n.length<199)return n.push([e,t]),this;r=this.__data__=new Te(n)}return r.set(e,t),this};var De=le?q(le,Object):function(){return[]},Be=function(e){return te.call(e)};function Ue(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$)}function ze(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function He(e,t){return e===t||e!=e&&t!=t}(de&&Be(new de(new ArrayBuffer(1)))!=w||pe&&Be(new pe)!=l||ve&&Be(ve.resolve())!=d||ye&&Be(new ye)!=v||ge&&Be(new ge)!=b)&&(Be=function(e){var t=te.call(e),r=t==h?e.constructor:void 0,n=r?ze(r):void 0;if(n)switch(n){case me:return w;case we:return l;case xe:return d;case _e:return v;case ke:return b}return t});var Ve=Array.isArray;function Ke(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}(e.length)&&!We(e)}var qe=fe||function(){return!1};function We(e){var t=Ge(e)?te.call(e):"";return t==u||t==c}function Ge(e){var t=r(e);return!!e&&("object"==t||"function"==t)}function Je(e){return Ke(e)?function(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&Ke(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==a)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=n.length,o=!!i;for(var s in e)!t&&!ee.call(e,s)||o&&("length"==s||Ue(s,i))||n.push(s);return n}(e):function(e){if(!Fe(e))return he(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Me(e,!0,!0)}}));function nq(e){return rq(e)}var iq=(u(xK={},jK,["getTransactionId","computeLocalHash","fetchRemoteHash","getIssuerProfile","parseIssuerKeys","compareHashes","checkMerkleRoot","checkReceipt","checkRevokedStatus","checkAuthenticity","checkExpiresDate"]),u(xK,DK,["computeLocalHash","compareHashes","checkReceipt","checkExpiresDate"]),xK);var aq=Object.freeze({__proto__:null,getChain:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||{};if(r.anchors){var n=r.anchors[0];if(n.chain)return GK(n.chain);if("string"==typeof n)return function(e){var t={btc:{chainName:LK.bitcoin.name},eth:{chainName:LK.ethmain.name}},r=e.split(":"),n=r.findIndex((function(e){return Object.keys(t).includes(e)}));if(n>-1){var i=r[n],a=r[n+1];return GK(t[i].chainName.toLowerCase()+function(e){var t=e.substr(0,1),r=e.substr(1,e.length-1);return t.toUpperCase()+r.toLowerCase()}(a))}return WK()}(n)}return WK(e)},generateRevocationReason:function(e){return e=(e=e.trim()).length>0?" ".concat(KK("revocation","preReason")," ").concat(e).concat("."!==e.slice(-1)?".":""):"","".concat(KK("revocation","reason")).concat(e)},getTransactionId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t=e.anchors,r=t[0];if(r.sourceId)return r.sourceId;if("string"==typeof r)return r.split(":").pop()}catch(e){throw new $K("",KK("errors","getTransactionId"))}},getTransactionLink:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&t?t.transactionTemplates[r?"raw":"full"].replace("{transaction_id}",e):""},getVerificationMap:function(e){if(!e)return[];var r=YK.isMockChain(e)?DK:jK;return function(e){var r,n=function(e){var t=nq(PK);return e.forEach((function(e){return t[e.parentStep].subSteps.push(e)})),t}(e.map((function(e){return t(t({},Object.assign({},RK[e])),{},{label:KK("subSteps","".concat(e,"Label")),labelPending:KK("subSteps","".concat(e,"LabelPending"))})})));return r=n,Object.keys(r).map((function(e){return t(t({},r[e]),{},{code:e,label:KK("steps","".concat(e,"Label")),labelPending:KK("steps","".concat(e,"LabelPending"))})}))}(Object.assign(iq)[r])}}),oq="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},sq=[],uq=[],cq="undefined"!=typeof Uint8Array?Uint8Array:Array,lq=!1;function fq(){lq=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)sq[t]=e[t],uq[e.charCodeAt(t)]=t;uq["-".charCodeAt(0)]=62,uq["_".charCodeAt(0)]=63}function hq(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(sq[(i=n)>>18&63]+sq[i>>12&63]+sq[i>>6&63]+sq[63&i]);return a.join("")}function dq(e){var t;lq||fq();for(var r=e.length,n=r%3,i="",a=[],o=16383,s=0,u=r-n;s<u;s+=o)a.push(hq(e,s,s+o>u?u:s+o));return 1===n?(t=e[r-1],i+=sq[t>>2],i+=sq[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=sq[t>>10],i+=sq[t>>4&63],i+=sq[t<<2&63],i+="="),a.push(i),a.join("")}function pq(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=c}return(d?-1:1)*o*Math.pow(2,a-n)}function vq(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*v}var yq={}.toString,gq=Array.isArray||function(e){return"[object Array]"==yq.call(e)};xq.TYPED_ARRAY_SUPPORT=void 0===oq.TYPED_ARRAY_SUPPORT||oq.TYPED_ARRAY_SUPPORT;var bq=mq();function mq(){return xq.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function wq(e,t){if(mq()<t)throw new RangeError("Invalid typed array length");return xq.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=xq.prototype:(null===e&&(e=new xq(t)),e.length=t),e}function xq(e,t,r){if(!(xq.TYPED_ARRAY_SUPPORT||this instanceof xq))return new xq(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Sq(this,e)}return _q(this,e,t,r)}function _q(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),xq.TYPED_ARRAY_SUPPORT?(e=t).__proto__=xq.prototype:e=Eq(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!xq.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Tq(t,r),i=(e=wq(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(Aq(t)){var r=0|Iq(t.length);return 0===(e=wq(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?wq(e,0):Eq(e,t);if("Buffer"===t.type&&gq(t.data))return Eq(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function kq(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Sq(e,t){if(kq(t),e=wq(e,t<0?0:0|Iq(t)),!xq.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Eq(e,t){var r=t.length<0?0:0|Iq(t.length);e=wq(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function Iq(e){if(e>=mq())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+mq().toString(16)+" bytes");return 0|e}function Aq(e){return!(null==e||!e._isBuffer)}function Tq(e,t){if(Aq(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return eW(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tW(e).length;default:if(n)return eW(e).length;t=(""+t).toLowerCase(),n=!0}}function Pq(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Vq(this,t,r);case"utf8":case"utf-8":return Fq(this,t,r);case"ascii":return zq(this,t,r);case"latin1":case"binary":return Hq(this,t,r);case"base64":return Uq(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kq(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Oq(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Cq(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=xq.from(t,n)),Aq(t))return 0===t.length?-1:Mq(e,t,r,n,i);if("number"==typeof t)return t&=255,xq.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Mq(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Mq(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function Nq(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function Rq(e,t,r,n){return rW(eW(t,e.length-r),e,r,n)}function Lq(e,t,r,n){return rW(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function jq(e,t,r,n){return Lq(e,t,r,n)}function Dq(e,t,r,n){return rW(tW(t),e,r,n)}function Bq(e,t,r,n){return rW(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function Uq(e,t,r){return 0===t&&r===e.length?dq(e):dq(e.slice(t,r))}function Fq(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function zq(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Hq(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Vq(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=Qq(e[a]);return i}function Kq(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function qq(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Wq(e,t,r,n,i,a){if(!Aq(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Gq(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function Jq(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Xq(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $q(e,t,r,n,i){return i||Xq(e,0,r,4),vq(e,t,r,n,23,4),r+4}function Yq(e,t,r,n,i){return i||Xq(e,0,r,8),vq(e,t,r,n,52,8),r+8}xq.poolSize=8192,xq._augment=function(e){return e.__proto__=xq.prototype,e},xq.from=function(e,t,r){return _q(null,e,t,r)},xq.TYPED_ARRAY_SUPPORT&&(xq.prototype.__proto__=Uint8Array.prototype,xq.__proto__=Uint8Array),xq.alloc=function(e,t,r){return function(e,t,r,n){return kq(t),t<=0?wq(e,t):void 0!==r?"string"==typeof n?wq(e,t).fill(r,n):wq(e,t).fill(r):wq(e,t)}(null,e,t,r)},xq.allocUnsafe=function(e){return Sq(null,e)},xq.allocUnsafeSlow=function(e){return Sq(null,e)},xq.isBuffer=nW,xq.compare=function(e,t){if(!Aq(e)||!Aq(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},xq.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},xq.concat=function(e,t){if(!gq(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return xq.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=xq.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!Aq(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},xq.byteLength=Tq,xq.prototype._isBuffer=!0,xq.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Oq(this,t,t+1);return this},xq.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Oq(this,t,t+3),Oq(this,t+1,t+2);return this},xq.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Oq(this,t,t+7),Oq(this,t+1,t+6),Oq(this,t+2,t+5),Oq(this,t+3,t+4);return this},xq.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Fq(this,0,e):Pq.apply(this,arguments)},xq.prototype.equals=function(e){if(!Aq(e))throw new TypeError("Argument must be a Buffer");return this===e||0===xq.compare(this,e)},xq.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},xq.prototype.compare=function(e,t,r,n,i){if(!Aq(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(n,i),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){a=u[l],o=c[l];break}return a<o?-1:o<a?1:0},xq.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},xq.prototype.indexOf=function(e,t,r){return Cq(this,e,t,r,!0)},xq.prototype.lastIndexOf=function(e,t,r){return Cq(this,e,t,r,!1)},xq.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return Nq(this,e,t,r);case"utf8":case"utf-8":return Rq(this,e,t,r);case"ascii":return Lq(this,e,t,r);case"latin1":case"binary":return jq(this,e,t,r);case"base64":return Dq(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bq(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},xq.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},xq.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),xq.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=xq.prototype;else{var i=t-e;r=new xq(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},xq.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||qq(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},xq.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||qq(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},xq.prototype.readUInt8=function(e,t){return t||qq(e,1,this.length),this[e]},xq.prototype.readUInt16LE=function(e,t){return t||qq(e,2,this.length),this[e]|this[e+1]<<8},xq.prototype.readUInt16BE=function(e,t){return t||qq(e,2,this.length),this[e]<<8|this[e+1]},xq.prototype.readUInt32LE=function(e,t){return t||qq(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},xq.prototype.readUInt32BE=function(e,t){return t||qq(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},xq.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||qq(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},xq.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||qq(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},xq.prototype.readInt8=function(e,t){return t||qq(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},xq.prototype.readInt16LE=function(e,t){t||qq(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},xq.prototype.readInt16BE=function(e,t){t||qq(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},xq.prototype.readInt32LE=function(e,t){return t||qq(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},xq.prototype.readInt32BE=function(e,t){return t||qq(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},xq.prototype.readFloatLE=function(e,t){return t||qq(e,4,this.length),pq(this,e,!0,23,4)},xq.prototype.readFloatBE=function(e,t){return t||qq(e,4,this.length),pq(this,e,!1,23,4)},xq.prototype.readDoubleLE=function(e,t){return t||qq(e,8,this.length),pq(this,e,!0,52,8)},xq.prototype.readDoubleBE=function(e,t){return t||qq(e,8,this.length),pq(this,e,!1,52,8)},xq.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Wq(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},xq.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Wq(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},xq.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,1,255,0),xq.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},xq.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,2,65535,0),xq.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Gq(this,e,t,!0),t+2},xq.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,2,65535,0),xq.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Gq(this,e,t,!1),t+2},xq.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,4,4294967295,0),xq.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Jq(this,e,t,!0),t+4},xq.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,4,4294967295,0),xq.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Jq(this,e,t,!1),t+4},xq.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Wq(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},xq.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Wq(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},xq.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,1,127,-128),xq.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},xq.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,2,32767,-32768),xq.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Gq(this,e,t,!0),t+2},xq.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,2,32767,-32768),xq.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Gq(this,e,t,!1),t+2},xq.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,4,2147483647,-2147483648),xq.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Jq(this,e,t,!0),t+4},xq.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Wq(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),xq.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Jq(this,e,t,!1),t+4},xq.prototype.writeFloatLE=function(e,t,r){return $q(this,e,t,!0,r)},xq.prototype.writeFloatBE=function(e,t,r){return $q(this,e,t,!1,r)},xq.prototype.writeDoubleLE=function(e,t,r){return Yq(this,e,t,!0,r)},xq.prototype.writeDoubleBE=function(e,t,r){return Yq(this,e,t,!1,r)},xq.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!xq.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},xq.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!xq.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=Aq(e)?e:eW(new xq(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var Zq=/[^+\/0-9A-Za-z-_]/g;function Qq(e){return e<16?"0"+e.toString(16):e.toString(16)}function eW(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function tW(e){return function(e){var t,r,n,i,a,o;lq||fq();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new cq(3*s/4-a),n=a>0?s-4:s;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=uq[e.charCodeAt(t)]<<18|uq[e.charCodeAt(t+1)]<<12|uq[e.charCodeAt(t+2)]<<6|uq[e.charCodeAt(t+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=uq[e.charCodeAt(t)]<<2|uq[e.charCodeAt(t+1)]>>4,o[u++]=255&i):1===a&&(i=uq[e.charCodeAt(t)]<<10|uq[e.charCodeAt(t+1)]<<4|uq[e.charCodeAt(t+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Zq,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function rW(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function nW(e){return null!=e&&(!!e._isBuffer||iW(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&iW(e.slice(0,0))}(e))}function iW(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var aW=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:bq,Buffer:xq,SlowBuffer:function(e){return+e!=e&&(e=0),xq.alloc(+e)},isBuffer:nW});function oW(){throw new Error("setTimeout has not been defined")}function sW(){throw new Error("clearTimeout has not been defined")}var uW=oW,cW=sW;function lW(e){if(uW===setTimeout)return setTimeout(e,0);if((uW===oW||!uW)&&setTimeout)return uW=setTimeout,setTimeout(e,0);try{return uW(e,0)}catch(t){try{return uW.call(null,e,0)}catch(t){return uW.call(this,e,0)}}}"function"==typeof oq.setTimeout&&(uW=setTimeout),"function"==typeof oq.clearTimeout&&(cW=clearTimeout);var fW,hW=[],dW=!1,pW=-1;function vW(){dW&&fW&&(dW=!1,fW.length?hW=fW.concat(hW):pW=-1,hW.length&&yW())}function yW(){if(!dW){var e=lW(vW);dW=!0;for(var t=hW.length;t;){for(fW=hW,hW=[];++pW<t;)fW&&fW[pW].run();pW=-1,t=hW.length}fW=null,dW=!1,function(e){if(cW===clearTimeout)return clearTimeout(e);if((cW===sW||!cW)&&clearTimeout)return cW=clearTimeout,clearTimeout(e);try{cW(e)}catch(t){try{return cW.call(null,e)}catch(t){return cW.call(this,e)}}}(e)}}function gW(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];hW.push(new bW(e,t)),1!==hW.length||dW||lW(yW)}function bW(e,t){this.fun=e,this.array=t}function mW(){}bW.prototype.run=function(){this.fun.apply(null,this.array)};var wW=mW,xW=mW,_W=mW,kW=mW,SW=mW,EW=mW,IW=mW,AW=oq.performance||{},TW=AW.now||AW.mozNow||AW.msNow||AW.oNow||AW.webkitNow||function(){return(new Date).getTime()},PW=new Date,OW={nextTick:gW,title:"browser",browser:!0,env:{},argv:[],version:"11.0.0",versions:{},on:wW,addListener:xW,once:_W,off:kW,removeListener:SW,removeAllListeners:EW,emit:IW,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*TW.call(AW),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-PW)/1e3}},CW=/[^\x20-\x7E]/,MW=/[\x2E\u3002\uFF0E\uFF61]/g,NW={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},RW=Math.floor,LW=String.fromCharCode;/*! https://mths.be/punycode v1.4.1 by @mathias */function jW(e){throw new RangeError(NW[e])}function DW(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function BW(e,t,r){var n=0;for(e=r?RW(e/700):e>>1,e+=RW(e/t);e>455;n+=36)e=RW(e/35);return RW(n+36*e/(e+38))}function UW(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(MW,".")).split("."),(function(e){return CW.test(e)?"xn--"+function(e){var t,r,n,i,a,o,s,u,c,l,f,h,d,p,v,y=[];for(h=(e=function(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=128,r=0,a=72,o=0;o<h;++o)(f=e[o])<128&&y.push(LW(f));for(n=i=y.length,i&&y.push("-");n<h;){for(s=2147483647,o=0;o<h;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>RW((2147483647-r)/(d=n+1))&&jW("overflow"),r+=(s-t)*d,t=s,o=0;o<h;++o)if((f=e[o])<t&&++r>2147483647&&jW("overflow"),f==t){for(u=r,c=36;!(u<(l=c<=a?1:c>=a+26?26:c-a));c+=36)v=u-l,p=36-l,y.push(LW(DW(l+v%p,0))),u=RW(v/p);y.push(LW(DW(u,0))),a=BW(r,d,n==i),r=0,++n}++r,++t}return y.join("")}(e):e})).join(".");return n+i}(e)}var FW="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},zW=/%[sdj%]/g;function HW(e){if(!eG(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(WW(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(zW,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),o=n[r];r<i;o=n[++r])QW(o)||!nG(o)?a+=" "+o:a+=" "+WW(o);return a}function VW(e,t){if(tG(oq.process))return function(){return VW(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var KW,qW={};function WW(e,t){var r={seen:[],stylize:JW};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ZW(t)?r.showHidden=t:t&&uG(r,t),tG(r.showHidden)&&(r.showHidden=!1),tG(r.depth)&&(r.depth=2),tG(r.colors)&&(r.colors=!1),tG(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=GW),XW(r,e,r.depth)}function GW(e,t){var r=WW.styles[t];return r?"["+WW.colors[r][0]+"m"+e+"["+WW.colors[r][1]+"m":e}function JW(e,t){return e}function XW(e,t,r){if(e.customInspect&&t&&oG(t.inspect)&&t.inspect!==WW&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return eG(n)||(n=XW(e,n,r)),n}var i=function(e,t){if(tG(t))return e.stylize("undefined","undefined");if(eG(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return"number"==typeof t?e.stylize(""+t,"number"):ZW(t)?e.stylize(""+t,"boolean"):QW(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),aG(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return $W(t);if(0===a.length){if(oG(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(rG(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(iG(t))return e.stylize(Date.prototype.toString.call(t),"date");if(aG(t))return $W(t)}var u,c,l="",f=!1,h=["{","}"];return u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),oG(t)&&(l=" [Function"+(t.name?": "+t.name:"")+"]"),rG(t)&&(l=" "+RegExp.prototype.toString.call(t)),iG(t)&&(l=" "+Date.prototype.toUTCString.call(t)),aG(t)&&(l=" "+$W(t)),0!==a.length||f&&0!=t.length?r<0?rG(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)cG(t,String(o))?a.push(YW(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(YW(e,t,r,n,i,!0))})),a}(e,t,r,o,a):a.map((function(n){return YW(e,t,r,o,n,f)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,h)):h[0]+l+h[1]}function $W(e){return"["+Error.prototype.toString.call(e)+"]"}function YW(e,t,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),cG(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=QW(r)?XW(e,u.value,null):XW(e,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),tG(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function ZW(e){return"boolean"==typeof e}function QW(e){return null===e}function eG(e){return"string"==typeof e}function tG(e){return void 0===e}function rG(e){return nG(e)&&"[object RegExp]"===sG(e)}function nG(e){return"object"==r(e)&&null!==e}function iG(e){return nG(e)&&"[object Date]"===sG(e)}function aG(e){return nG(e)&&("[object Error]"===sG(e)||e instanceof Error)}function oG(e){return"function"==typeof e}function sG(e){return Object.prototype.toString.call(e)}function uG(e,t){if(!t||!nG(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function cG(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lG(e,t){return Object.prototype.hasOwnProperty.call(e,t)}WW.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},WW.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var fG=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function hG(e){switch(r(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function dG(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var pG=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function vG(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var c,l,f,h,d=e[u].replace(a,"%20"),p=d.indexOf(r);p>=0?(c=d.substr(0,p),l=d.substr(p+1)):(c=d,l=""),f=decodeURIComponent(c),h=decodeURIComponent(l),lG(i,f)?fG(i[f])?i[f].push(h):i[f]=[i[f],h]:i[f]=h}return i}var yG={parse:OG,resolve:function(e,t){return OG(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?OG(e,!1,!0).resolveObject(t):t},format:function(e){return eG(e)&&(e=CG({},e)),MG(e)},Url:gG};function gG(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bG=/^([a-z0-9.+-]+:)/i,mG=/:[0-9]*$/,wG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xG=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_G=["'"].concat(xG),kG=["%","/","?",";","#"].concat(_G),SG=["/","?","#"],EG=/^[+a-z0-9A-Z_-]{0,63}$/,IG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,AG={javascript:!0,"javascript:":!0},TG={javascript:!0,"javascript:":!0},PG={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function OG(e,t,r){if(e&&nG(e)&&e instanceof gG)return e;var n=new gG;return n.parse(e,t,r),n}function CG(e,t,n,i){if(!eG(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var a=t.indexOf("?"),o=-1!==a&&a<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var u=t=s.join(o);if(u=u.trim(),!i&&1===t.split("#").length){var c=wG.exec(u);if(c)return e.path=u,e.href=u,e.pathname=c[1],c[2]?(e.search=c[2],e.query=n?vG(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var l,f,h,d,p=bG.exec(u);if(p){var v=(p=p[0]).toLowerCase();e.protocol=v,u=u.substr(p.length)}if(i||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===u.substr(0,2);!y||p&&TG[p]||(u=u.substr(2),e.slashes=!0)}if(!TG[p]&&(y||p&&!PG[p])){var g,b,m=-1;for(l=0;l<SG.length;l++)-1!==(f=u.indexOf(SG[l]))&&(-1===m||f<m)&&(m=f);for(-1!==(b=-1===m?u.lastIndexOf("@"):u.lastIndexOf("@",m))&&(g=u.slice(0,b),u=u.slice(b+1),e.auth=decodeURIComponent(g)),m=-1,l=0;l<kG.length;l++)-1!==(f=u.indexOf(kG[l]))&&(-1===m||f<m)&&(m=f);-1===m&&(m=u.length),e.host=u.slice(0,m),u=u.slice(m),NG(e),e.hostname=e.hostname||"";var w="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!w){var x=e.hostname.split(/\./);for(l=0,h=x.length;l<h;l++){var _=x[l];if(_&&!_.match(EG)){for(var k="",S=0,E=_.length;S<E;S++)_.charCodeAt(S)>127?k+="x":k+=_[S];if(!k.match(EG)){var I=x.slice(0,l),A=x.slice(l+1),T=_.match(IG);T&&(I.push(T[1]),A.unshift(T[2])),A.length&&(u="/"+A.join(".")+u),e.hostname=I.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),w||(e.hostname=UW(e.hostname)),d=e.port?":"+e.port:"";var P=e.hostname||"";e.host=P+d,e.href+=e.host,w&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!AG[v])for(l=0,h=_G.length;l<h;l++){var O=_G[l];if(-1!==u.indexOf(O)){var C=encodeURIComponent(O);C===O&&(C=escape(O)),u=u.split(O).join(C)}}var M=u.indexOf("#");-1!==M&&(e.hash=u.substr(M),u=u.slice(0,M));var N=u.indexOf("?");if(-1!==N?(e.search=u.substr(N),e.query=u.substr(N+1),n&&(e.query=vG(e.query)),u=u.slice(0,N)):n&&(e.search="",e.query={}),u&&(e.pathname=u),PG[v]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var R=e.search||"";e.path=d+R}return e.href=MG(e),e}function MG(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n=e.protocol||"",i=e.pathname||"",a=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&nG(e.query)&&Object.keys(e.query).length&&(s=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==r(e)?dG(pG(e),(function(r){var i=encodeURIComponent(hG(r))+n;return fG(e[r])?dG(e[r],(function(e){return i+encodeURIComponent(hG(e))})).join(t):i+encodeURIComponent(hG(e[r]))})).join(t):""}(e.query));var u=e.search||s&&"?"+s||"";return n&&":"!==n.substr(-1)&&(n+=":"),e.slashes||(!n||PG[n])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),a&&"#"!==a.charAt(0)&&(a="#"+a),u&&"?"!==u.charAt(0)&&(u="?"+u),n+o+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(u=u.replace("#","%23"))+a}function NG(e){var t=e.host,r=mG.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}gG.prototype.parse=function(e,t,r){return CG(this,e,t,r)},gG.prototype.format=function(){return MG(this)},gG.prototype.resolve=function(e){return this.resolveObject(OG(e,!1,!0)).format()},gG.prototype.resolveObject=function(e){if(eG(e)){var t=new gG;t.parse(e,!1,!0),e=t}for(var r,n=new gG,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return PG[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!PG[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var h=l[f];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||TG[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,y=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||y||n.host&&e.pathname,m=b,w=n.pathname&&n.pathname.split("/")||[],x=n.protocol&&!PG[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),b=b&&(""===r[0]||""===w[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(null!=e.search)return x&&(n.hostname=n.host=w.shift(),(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,QW(n.pathname)&&QW(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===_||".."===_)||""===_,S=0,E=w.length;E>=0;E--)"."===(_=w[E])?w.splice(E,1):".."===_?(w.splice(E,1),S++):S&&(w.splice(E,1),S--);if(!b&&!m)for(;S--;S)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=I?"":w.length?w.shift():"",(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(b=b||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),QW(n.pathname)&&QW(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},gG.prototype.parseHost=function(){return NG(this)};var RG,LG,jG={},DG=WG(oq.fetch)&&WG(oq.ReadableStream);function BG(e){LG||(LG=new oq.XMLHttpRequest).open("GET",oq.location.host?"/":"https://example.com");try{return LG.responseType=e,LG.responseType===e}catch(e){return!1}}var UG=void 0!==oq.ArrayBuffer,FG=UG&&WG(oq.ArrayBuffer.prototype.slice),zG=UG&&BG("arraybuffer"),HG=!DG&&FG&&BG("ms-stream"),VG=!DG&&UG&&BG("moz-chunked-arraybuffer"),KG=WG(LG.overrideMimeType),qG=WG(oq.VBArray);function WG(e){return"function"==typeof e}function GG(){}function JG(){JG.init.call(this)}function XG(e){return void 0===e._maxListeners?JG.defaultMaxListeners:e._maxListeners}function $G(e,t,r){if(t)e.call(r);else for(var n=e.length,i=iJ(e,n),a=0;a<n;++a)i[a].call(r)}function YG(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=iJ(e,i),o=0;o<i;++o)a[o].call(r,n)}function ZG(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,o=iJ(e,a),s=0;s<a;++s)o[s].call(r,n,i)}function QG(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var o=e.length,s=iJ(e,o),u=0;u<o;++u)s[u].call(r,n,i,a)}function eJ(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=iJ(e,i),o=0;o<i;++o)a[o].apply(r,n)}function tJ(e,t,r,n){var i,a,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]):(a=e._events=new GG,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=XG(e))&&i>0&&o.length>i){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=r,++e._eventsCount;return e}function rJ(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function nJ(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function iJ(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function aJ(){this.head=null,this.tail=null,this.length=0}LG=null,GG.prototype=Object.create(null),JG.EventEmitter=JG,JG.usingDomains=!1,JG.prototype.domain=void 0,JG.prototype._events=void 0,JG.prototype._maxListeners=void 0,JG.defaultMaxListeners=10,JG.init=function(){this.domain=null,JG.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new GG,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},JG.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},JG.prototype.getMaxListeners=function(){return XG(this)},JG.prototype.emit=function(e){var t,r,n,i,a,o,s,u="error"===e;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=o[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:$G(r,l,this);break;case 2:YG(r,l,this,arguments[1]);break;case 3:ZG(r,l,this,arguments[1],arguments[2]);break;case 4:QG(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];eJ(r,l,this,i)}return!0},JG.prototype.addListener=function(e,t){return tJ(this,e,t,!1)},JG.prototype.on=JG.prototype.addListener,JG.prototype.prependListener=function(e,t){return tJ(this,e,t,!0)},JG.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,rJ(this,e,t)),this},JG.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,rJ(this,e,t)),this},JG.prototype.removeListener=function(e,t){var r,n,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new GG:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new GG,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},JG.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new GG,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new GG:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new GG,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},JG.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},JG.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):nJ.call(e,t)},JG.prototype.listenerCount=nJ,JG.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},aJ.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},aJ.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},aJ.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},aJ.prototype.clear=function(){this.head=this.tail=null,this.length=0},aJ.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},aJ.prototype.concat=function(e){if(0===this.length)return xq.alloc(0);if(1===this.length)return this.head.data;for(var t=xq.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var oJ=xq.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function sJ(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!oJ(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=cJ;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=lJ;break;default:return void(this.write=uJ)}this.charBuffer=new xq(6),this.charReceived=0,this.charLength=0}function uJ(e){return e.toString(this.encoding)}function cJ(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function lJ(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}sJ.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((n=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(n=t.charCodeAt(i))>=55296&&n<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},sJ.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},sJ.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t};var fJ=Object.freeze({__proto__:null,StringDecoder:sJ});pJ.ReadableState=dJ;var hJ=function(e){return tG(KW)&&(KW=""),e=e.toUpperCase(),qW[e]||(new RegExp("\\b"+e+"\\b","i").test(KW)?qW[e]=function(){var t=HW.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:qW[e]=function(){}),qW[e]}("stream");function dJ(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof zJ&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new aJ,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new sJ(e.encoding),this.encoding=e.encoding)}function pJ(e){if(!(this instanceof pJ))return new pJ(e);this._readableState=new dJ(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),JG.call(this)}function vJ(e,t,r,n,i){var a=function(e,t){var r=null;return nW(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,gJ(e)}}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&gJ(e))),function(e,t){t.readingMore||(t.readingMore=!0,gW(mJ,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}function yJ(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function gJ(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(hJ("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?gW(bJ,e):bJ(e))}function bJ(e){hJ("emit readable"),e.emit("readable"),_J(e)}function mJ(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(hJ("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function wJ(e){hJ("readable nexttick read 0"),e.read(0)}function xJ(e,t){t.reading||(hJ("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),_J(e),t.flowing&&!t.reading&&e.read(0)}function _J(e){var t=e._readableState;for(hJ("flow",t.flowing);t.flowing&&null!==e.read(););}function kJ(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=xq.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0==(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t),n}(e,t.buffer,t.decoder),r);var r}function SJ(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,gW(EJ,t,e))}function EJ(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function IJ(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function AJ(){}function TJ(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function PJ(e,t){Object.defineProperty(this,"buffer",{get:VW((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof zJ&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?gW(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var a=RJ(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||NJ(e,r),n?gW(MJ,e,r,a,i):MJ(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new DJ(this)}function OJ(e){if(!(this instanceof OJ||this instanceof zJ))return new OJ(e);this._writableState=new PJ(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),JG.call(this)}function CJ(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function MJ(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),jJ(e,t)}function NJ(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;CJ(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new DJ(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(CJ(e,t,!1,t.objectMode?1:s.length,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function RJ(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function LJ(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function jJ(e,t){var r=RJ(t);return r&&(0===t.pendingcb?(LJ(e,t),t.finished=!0,e.emit("finish")):LJ(e,t)),r}function DJ(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}FW(pJ,JG),pJ.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=xq.from(e,t),t=""),vJ(this,r,e,t,!1)},pJ.prototype.unshift=function(e){return vJ(this,this._readableState,e,"",!0)},pJ.prototype.isPaused=function(){return!1===this._readableState.flowing},pJ.prototype.setEncoding=function(e){return this._readableState.decoder=new sJ(e),this._readableState.encoding=e,this},pJ.prototype.read=function(e){hJ("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return hJ("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?SJ(this):gJ(this),null;if(0===(e=yJ(e,t))&&t.ended)return 0===t.length&&SJ(this),null;var n,i=t.needReadable;return hJ("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&hJ("length less than watermark",i=!0),t.ended||t.reading?hJ("reading or ended",i=!1):i&&(hJ("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=yJ(r,t))),null===(n=e>0?kJ(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&SJ(this)),null!==n&&this.emit("data",n),n},pJ.prototype._read=function(e){this.emit("error",new Error("not implemented"))},pJ.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,hJ("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end?c:o;function a(e){hJ("onunpipe"),e===r&&c()}function o(){hJ("onend"),e.end()}n.endEmitted?gW(i):r.once("end",i),e.on("unpipe",a);var s=function(e){return function(){var t=e._readableState;hJ("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,_J(e))}}(r);e.on("drain",s);var u=!1;function c(){hJ("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",s),e.removeListener("error",h),e.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",c),r.removeListener("data",f),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s()}var l=!1;function f(t){hJ("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==IJ(n.pipes,e))&&!u&&(hJ("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){hJ("onerror",t),v(),e.removeListener("error",h),0===("error",e.listeners("error").length)&&e.emit("error",t)}function d(){e.removeListener("finish",p),v()}function p(){hJ("onfinish"),e.removeListener("close",d),v()}function v(){hJ("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",d),e.once("finish",p),e.emit("pipe",r),n.flowing||(hJ("pipe resume"),r.resume()),e},pJ.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=IJ(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},pJ.prototype.on=function(e,t){var r=JG.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&gJ(this):gW(wJ,this))}return r},pJ.prototype.addListener=pJ.prototype.on,pJ.prototype.resume=function(){var e=this._readableState;return e.flowing||(hJ("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,gW(xJ,e,t))}(this,e)),this},pJ.prototype.pause=function(){return hJ("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(hJ("pause"),this._readableState.flowing=!1,this.emit("pause")),this},pJ.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(hJ("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){hJ("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r])}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){hJ("wrapped _read",t),r&&(r=!1,e.resume())},n},pJ._fromList=kJ,OJ.WritableState=PJ,FW(OJ,JG),PJ.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},OJ.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},OJ.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),xq.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=AJ),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),gW(t,r)}(this,r):function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):xq.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),gW(n,a),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=xq.from(t,r)),t}(t,r,n),xq.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new TJ(r,n,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else CJ(e,t,!1,a,r,n,i);return o}(this,n,e,t,r)),i},OJ.prototype.cork=function(){this._writableState.corked++},OJ.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||NJ(this,e))},OJ.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},OJ.prototype._write=function(e,t,r){r(new Error("not implemented"))},OJ.prototype._writev=null,OJ.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,jJ(e,t),r&&(t.finished?gW(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r)},FW(zJ,pJ);for(var BJ=Object.keys(OJ.prototype),UJ=0;UJ<BJ.length;UJ++){var FJ=BJ[UJ];zJ.prototype[FJ]||(zJ.prototype[FJ]=OJ.prototype[FJ])}function zJ(e){if(!(this instanceof zJ))return new zJ(e);pJ.call(this,e),OJ.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",HJ)}function HJ(){this.allowHalfOpen||this._writableState.ended||gW(VJ,this)}function VJ(e){e.end()}function KJ(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r),i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function qJ(e){if(!(this instanceof qJ))return new qJ(e);zJ.call(this,e),this._transformState=new KJ(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e){WJ(t,e)})):WJ(t)}))}function WJ(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function GJ(e){if(!(this instanceof GJ))return new GJ(e);qJ.call(this,e)}function JJ(){JG.call(this)}FW(qJ,zJ),qJ.prototype.push=function(e,t){return this._transformState.needTransform=!1,zJ.prototype.push.call(this,e,t)},qJ.prototype._transform=function(e,t,r){throw new Error("Not implemented")},qJ.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},qJ.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},FW(GJ,qJ),GJ.prototype._transform=function(e,t,r){r(null,e)},FW(JJ,JG),JJ.Readable=pJ,JJ.Writable=OJ,JJ.Duplex=zJ,JJ.Transform=qJ,JJ.PassThrough=GJ,JJ.Stream=JJ,JJ.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===JG.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};function XJ(e,t,r){var n,i=this;if(pJ.call(i),i._mode=r,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){gW((function(){i.emit("close")}))})),"fetch"===r){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var a,o,s=t.headers[Symbol.iterator]();a=(o=s.next()).value,!o.done;)i.headers[a[0].toLowerCase()]=a[1],i.rawHeaders.push(a[0],a[1]);var u=t.body.getReader();(n=function(){u.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new xq(e.value)),n()))}))})()}else if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===i.headers[r]&&(i.headers[r]=[]),i.headers[r].push(t[2])):void 0!==i.headers[r]?i.headers[r]+=", "+t[2]:i.headers[r]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!KG){var c=i.rawHeaders["mime-type"];if(c){var l=c.match(/;\s*charset=([^;])(;|$)/);l&&(i._charset=l[1].toLowerCase())}i._charset||(i._charset="utf-8")}}function $J(e){var t,r=this;OJ.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new xq(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!KG;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return DG&&t?"fetch":VG?"moz-chunked-arraybuffer":HG?"ms-stream":zG&&e?"arraybuffer":qG&&e?"text:vbarray":"text"}(t,n),r.on("finish",(function(){r._onFinish()}))}FW(XJ,pJ),XJ.prototype._read=function(){},XJ.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(4!==t.readyState)break;try{r=new oq.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new xq(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new xq(n.length),a=0;a<n.length;a++)i[a]=255&n.charCodeAt(a);e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(4!==t.readyState||!t.response)break;r=t.response,e.push(new xq(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,3!==t.readyState||!r)break;e.push(new xq(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,3!==t.readyState)break;var o=new oq.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new xq(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(r)}4===e._xhr.readyState&&"ms-stream"!==e._mode&&e.push(null)},FW($J,OJ);var YJ=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];function ZJ(e,t){"string"==typeof e&&(e=OG(e));var r=-1===oq.location.protocol.search(/^https?:$/)?"http:":"",n=e.protocol||r,i=e.hostname||e.host,a=e.port,o=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(a?":"+a:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var s=new $J(e);return t&&s.on("response",t),s}function QJ(){}$J.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===YJ.indexOf(r)&&(this._headers[r]={name:e,value:t})},$J.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},$J.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},$J.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,r=e._opts,n=e._headers;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method||(t=function(){if(void 0!==RG)return RG;try{new oq.Blob([new ArrayBuffer(1)]),RG=!0}catch(e){RG=!1}return RG}()?new oq.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(nW(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(n["content-type"]||{}).value||""}):xq.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(n).map((function(e){return[n[e].name,n[e].value]}));oq.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var a=e._xhr=new oq.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(t){return void gW((function(){e.emit("error",t)}))}"responseType"in a&&(a.responseType=e._mode.split(":")[0]),"withCredentials"in a&&(a.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(n).forEach((function(e){a.setRequestHeader(n[e].name,n[e].value)})),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case 3:case 4:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(t)}catch(t){return void gW((function(){e.emit("error",t)}))}}}},$J.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},$J.prototype._connect=function(){var e=this;e._destroyed||(e._response=new XJ(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},$J.prototype._write=function(e,t,r){this._body.push(e),r()},$J.prototype.abort=$J.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},$J.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),OJ.prototype.end.call(this,e,t,r)},$J.prototype.flushHeaders=function(){},$J.prototype.setTimeout=function(){},$J.prototype.setNoDelay=function(){},$J.prototype.setSocketKeepAlive=function(){},QJ.defaultMaxSockets=4;var eX={request:ZJ,get:function(e,t){var r=ZJ(e,t);return r.end(),r},Agent:QJ,METHODS:["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],STATUS_CODES:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},tX=jG.spawn,rX=function(){var e,t,r=this,n=eX,i=eX,a={},o=!1,s={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u={},c={},l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],f=["TRACE","TRACK","CONNECT"],h=!1,d=!1,p={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1,this.open=function(e,t,r,n,i){if(this.abort(),d=!1,!function(e){return e&&-1===f.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");a={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},v(this.OPENED)},this.setDisableHeaderCheck=function(e){o=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return o||e&&-1===l.indexOf(e.toLowerCase())}(e)){if(h)throw new Error("INVALID_STATE_ERR: send flag is true");e=c[e.toLowerCase()]||e,c[e.toLowerCase()]=e,u[e]=u[e]?u[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!d?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||d)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&c[e.toLowerCase()]?u[c[e.toLowerCase()]]:""},this.send=function(o){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(h)throw new Error("INVALID_STATE_ERR: send has already been called");var l,f=!1,p=!1,y=yG.parse(a.url);switch(y.protocol){case"https:":f=!0;case"http:":l=y.hostname;break;case"file:":p=!0;break;case void 0:case null:case"":l="localhost";break;default:throw new Error("Protocol not supported.")}if(p){if("GET"!==a.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(a.async)jG.readFile(y.pathname,"utf8",(function(e,t){e?r.handleError(e):(r.status=200,r.responseText=t,v(r.DONE))}));else try{this.responseText=jG.readFileSync(y.pathname,"utf8"),this.status=200,v(r.DONE)}catch(e){this.handleError(e)}}else{var g=y.port||(f?443:80),b=y.pathname+(y.search?y.search:"");for(var m in s)c[m.toLowerCase()]||(u[m]=s[m]);if(u.Host=l,f&&443===g||80===g||(u.Host+=":"+y.port),a.user){void 0===a.password&&(a.password="");var w=new xq(a.user+":"+a.password);u.Authorization="Basic "+w.toString("base64")}"GET"===a.method||"HEAD"===a.method?o=null:o?(u["Content-Length"]=nW(o)?o.length:xq.byteLength(o),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===a.method&&(u["Content-Length"]=0);var x={host:l,port:g,path:b,method:a.method,headers:u,agent:!1,withCredentials:r.withCredentials};if(d=!1,a.async){var _=f?i.request:n.request;h=!0,r.dispatchEvent("readystatechange");var k=function(e){r.handleError(e)};e=_(x,(function n(i){if(301!==(t=i).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),v(r.HEADERS_RECEIVED),r.status=t.statusCode,t.on("data",(function(e){e&&(r.responseText+=e),h&&v(r.LOADING)})),t.on("end",(function(){h&&(v(r.DONE),h=!1)})),t.on("error",(function(e){r.handleError(e)}));else{a.url=t.headers.location;var o=yG.parse(a.url);l=o.hostname;var s={hostname:o.hostname,port:o.port,path:o.path,method:303===t.statusCode?"GET":a.method,headers:u,withCredentials:r.withCredentials};(e=_(s,n).on("error",k)).end()}})).on("error",k),o&&e.write(o),e.end(),r.dispatchEvent("loadstart")}else{var S=".node-xmlhttprequest-content-"+OW.pid,E=".node-xmlhttprequest-sync-"+OW.pid;jG.writeFileSync(E,"","utf8");for(var I="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(f?"s":"")+".request;var options = "+JSON.stringify(x)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+S+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+E+"');});response.on('error', function(error) {fs.writeFileSync('"+S+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+E+"');});}).on('error', function(error) {fs.writeFileSync('"+S+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+E+"');});"+(o?"req.write('"+JSON.stringify(o).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=tX(OW.argv[0],["-e",I]);jG.existsSync(E););var T=JSON.parse(jG.readFileSync(S,"utf8"));A.stdin.end(),jG.unlinkSync(S),T.err?r.handleError(T.err):(t=T.data,r.status=T.data.statusCode,r.responseText=T.data.text,v(r.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,d=!0,v(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),u=s,this.status=0,this.responseText="",this.responseXML="",d=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!h||this.readyState===this.DONE||(h=!1,v(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in p||(p[e]=[]),p[e].push(t)},this.removeEventListener=function(e,t){e in p&&(p[e]=p[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof r["on"+e]&&r["on"+e](),e in p)for(var t=0,n=p[e].length;t<n;t++)p[e][t].call(r)};var v=function(e){e!=r.LOADING&&r.readyState===e||(r.readyState=e,(a.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState!==r.DONE||d||(r.dispatchEvent("load"),r.dispatchEvent("loadend")))}},nX=6e4,iX=60*nX,aX=24*iX,oX=function(e,t){t=t||{};var n=r(e);if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*aX;case"hours":case"hour":case"hrs":case"hr":case"h":return r*iX;case"minutes":case"minute":case"mins":case"min":case"m":return r*nX;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===n&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=aX?sX(e,t,aX,"day"):t>=iX?sX(e,t,iX,"hour"):t>=nX?sX(e,t,nX,"minute"):t>=1e3?sX(e,t,1e3,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=aX?Math.round(e/aX)+"d":t>=iX?Math.round(e/iX)+"h":t>=nX?Math.round(e/nX)+"m":t>=1e3?Math.round(e/1e3)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function sX(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var uX=eq((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==OW&&"env"in OW&&(e=OW.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=function(e){function t(e){var n,i=null;function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";c++;var i=t.formatters[n];if("function"==typeof i){var a=r[c];e=i.call(o,a),r.splice(c,1),c--}return e})),t.formatArgs.call(o,r),(o.log||t.log).apply(o,r)}}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===i?t.enabled(e):i},set:function(e){i=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(E(t.names.map(n)),E(t.skips.map(n).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=oX,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}));uX.formatArgs,uX.save,uX.load,uX.useColors,uX.storage,uX.destroy,uX.colors,uX.log;var cX,lX,fX=uX("request");function hX(e){return new Promise((function(t,r){var n=e.url;n||r(new Error("URL is missing")),"http://"===n.substr(0,7)&&(console.warn("Upgrading requested url ".concat(n," to https protocol.")),n=n.replace("http://","https://"));var i=new("undefined"==typeof XMLHttpRequest?rX:XMLHttpRequest);i.onload=function(){if(i.status>=200&&i.status<300)t(i.responseText);else{var e="Error fetching url:".concat(n,"; status code:").concat(i.status);r(new Error(e))}},i.ontimeout=function(e){console.log("ontimeout",e)},i.onreadystatechange=function(){404===i.status&&r(new Error("Error fetching url:".concat(n,"; status code:").concat(i.status)))},i.onerror=function(){fX("Request failed with error ".concat(i.responseText)),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}))}!function(e){e.blockcypher="blockcypher",e.blockstream="blockstream",e.etherscan="etherscan"}(cX||(cX={})),function(e){e.Bitcoin="bitcoin",e.Ethmain="ethmain",e.Ethropst="ethropst",e.Ethrinkeby="ethrinkeby",e.Mocknet="mocknet",e.Regtest="regtest",e.Testnet="testnet"}(lX||(lX={}));var dX=(u(_K={},lX.Bitcoin,{code:lX.Bitcoin,name:"Bitcoin",prefixes:["6a20","OP_RETURN "],signatureValue:"bitcoinMainnet",transactionTemplates:{full:"https://blockchain.info/tx/{transaction_id}",raw:"https://blockchain.info/rawtx/{transaction_id}"}}),u(_K,lX.Ethmain,{code:lX.Ethmain,name:"Ethereum",prefixes:["0x"],signatureValue:"ethereumMainnet",transactionTemplates:{full:"https://etherscan.io/tx/{transaction_id}",raw:"https://etherscan.io/tx/{transaction_id}"}}),u(_K,lX.Ethropst,{code:lX.Ethropst,name:"Ethereum Testnet",signatureValue:"ethereumRopsten",transactionTemplates:{full:"https://ropsten.etherscan.io/tx/{transaction_id}",raw:"https://ropsten.etherscan.io/getRawTx?tx={transaction_id}"}}),u(_K,lX.Ethrinkeby,{code:lX.Ethrinkeby,name:"Ethereum Testnet",signatureValue:"ethereumRinkeby",transactionTemplates:{full:"https://rinkeby.etherscan.io/tx/{transaction_id}",raw:"https://rinkeby.etherscan.io/getRawTx?tx={transaction_id}"}}),u(_K,lX.Mocknet,{code:lX.Mocknet,name:"Mocknet",test:!0,signatureValue:"mockchain",transactionTemplates:{full:"",raw:""}}),u(_K,lX.Regtest,{code:lX.Regtest,name:"Mocknet",test:!0,signatureValue:"bitcoinRegtest",transactionTemplates:{full:"",raw:""}}),u(_K,lX.Testnet,{code:lX.Testnet,name:"Bitcoin Testnet",signatureValue:"bitcoinTestnet",transactionTemplates:{full:"https://testnet.blockchain.info/tx/{transaction_id}",raw:"https://testnet.blockchain.info/rawtx/{transaction_id}"}}),_K);function pX(e){return e!==dX.bitcoin.code&&e!==dX.ethmain.code}var vX=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function yX(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return vX(this,void 0,void 0,Wt.mark((function n(){var i;return Wt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((e=Array.from(e)).length<t)){n.next=2;break}throw new Error("Could not retrieve tx data");case 2:return i=e.map((function(e,t){return e.then((function(){return t})).catch((function(e){throw t}))})),n.abrupt("return",Promise.race(i).then((function(n){return e.splice(n,1)[0].then((function(e){return r.push(e)})),1===t?r:yX(e,t-1,r)})).catch((function(n){return e.splice(n,1),yX(e,t,r)})));case 4:case"end":return n.stop()}}),n)})))}function gX(e){var t=e.explorerAPI,r=e.transactionIdPlaceholder,n=void 0===r?"{transaction_id}":r,i=e.transactionId,a=void 0===i?"":i,o=e.isTestApi,s=void 0!==o&&o,u=t.serviceURL,c="string"==typeof u?u:s?u.test:u.main;return c=function(e,t){if(!t.key)return e;if(t.key&&!t.keyPropertyName)throw new Error("No keyPropertyName defined for explorerAPI ".concat(t.serviceName));return function(e,t,r){var n=e.includes("?")?"&":"?";return"".concat(e).concat(n).concat(t,"=").concat(r)}(e,t.keyPropertyName,t.key)}(c=c.replace(n,a),t),c}function bX(e){return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,r){var n=e.url;n||r(new Error("URL is missing"));var i=new("undefined"==typeof XMLHttpRequest?rX:XMLHttpRequest);i.onload=function(){if(i.status>=200&&i.status<300)t(i.responseText);else{console.log(i.responseText);var e="Error fetching url:".concat(n,"; status code:").concat(i.status);r(new Error(e))}},i.ontimeout=function(e){console.log("ontimeout",e)},i.onreadystatechange=function(){404===i.status&&r(new Error("Error fetching url:".concat(n,"; status code:").concat(i.status)))},i.onerror=function(){console.error("Request failed with error ".concat(i.responseText)),r(new Error(i.responseText))},i.open(e.method||"GET",n),e.body?i.send(JSON.stringify(e.body)):i.send()}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}function mX(e,t){return"string"!=typeof e?(console.warn("Trying to test a non string variable"),!1):0===e.indexOf(t)}function wX(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(mX(e,n))return e.slice(n.length)}return e}var xX=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))},_X="https://api.etherscan.io/api?module=proxy",kX="https://api-ropsten.etherscan.io/api?module=proxy",SX={serviceURL:{main:"".concat(_X,"&action=eth_getTransactionByHash&txhash={transaction_id}"),test:"".concat(kX,"&action=eth_getTransactionByHash&txhash={transaction_id}")},serviceName:cX.etherscan,parsingFunction:function(e){var t=e.jsonResponse,r=e.chain,n=e.key,i=e.keyPropertyName;return xX(this,void 0,void 0,Wt.mark((function e(){var a,o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={serviceURL:{main:"".concat(_X,"&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}"),test:"".concat(kX,"&action=eth_getBlockByNumber&boolean=true&tag={transaction_id}")}},o={serviceURL:{main:"".concat(_X,"&action=eth_blockNumber"),test:"".concat(kX,"&action=eth_blockNumber")}},e.next=3,function(e,t){return xX(this,void 0,void 0,Wt.mark((function r(){var s,u,c,l;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.result.blockNumber,u=gX({explorerAPI:Object.assign(Object.assign({},a),{key:n,keyPropertyName:i}),transactionId:s,isTestApi:pX(t)}),r.prev=1,r.next=4,bX({url:u});case 4:return c=r.sent,l=JSON.parse(c).result,r.next=8,function(e,t){return xX(this,void 0,void 0,Wt.mark((function r(){var a,s,u;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=gX({explorerAPI:Object.assign(Object.assign({},o),{key:n,keyPropertyName:i}),isTestApi:pX(e)}),r.prev=1,r.next=4,bX({url:a});case 4:s=r.sent,r.next=10;break;case 7:throw r.prev=7,r.t0=r.catch(1),new Error("Unable to get remote hash");case 10:if(!((u=JSON.parse(s).result)-t<1)){r.next=13;break}throw new Error("Not enough");case 13:return r.abrupt("return",u);case 14:case"end":return r.stop()}}),r,null,[[1,7]])})))}(t,s);case 8:return r.abrupt("return",l);case 11:throw r.prev=11,r.t0=r.catch(1),new Error("Unable to get remote hash");case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))}(t,r);case 3:return s=e.sent,e.abrupt("return",function(e,t){var r=e.result,n=new Date(1e3*parseInt(t.timestamp,16)),i=r.from;return{remoteHash:wX(r.input,dX.ethmain.prefixes),issuingAddress:i,time:n,revokedAddresses:[]}}(t,s));case 5:case"end":return e.stop()}}),e)})))},priority:-1};function EX(e){return""===e?"":function(e){var t=Date.parse(e);if(t)return new Date(t);var r=function(e){var t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));var r=e.slice(-5),n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t.getTime()}(e);return r||function(e){var t,r,n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,(t=new Date(Date.UTC.apply(Date,t))).getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}("".concat(e))}function IX(e){return new Date(1e3*e)}var AX={serviceURL:{main:"https://api.blockcypher.com/v1/eth/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/beth/test/txs/{transaction_id}?limit=500"},serviceName:cX.blockcypher,parsingFunction:function(e){var t=e.jsonResponse;if(t.confirmations<1)throw new Error("Not enough");var r=EX(t.received),n=t.outputs,i=n[n.length-1],a=t.inputs[0].addresses[0],o=wX(i.script,dX.ethmain.prefixes);return a=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(!mX(e,n))return"".concat(n).concat(e)}return e}(a,dX.ethmain.prefixes),{remoteHash:o,issuingAddress:a,time:r,revokedAddresses:n.filter((function(e){return!!e.spent_by})).map((function(e){return e.addresses[0]}))}},priority:-1},TX={serviceURL:{main:"https://blockstream.info/api/tx/{transaction_id}",test:"https://blockstream.info/testnet/api/tx/{transaction_id}"},serviceName:cX.blockstream,parsingFunction:function(e){var t=e.jsonResponse;if(!t.status.confirmed)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockstream API");var r=IX(t.status.block_time),n=t.vout,i=n[n.length-1],a=t.vout[0].scriptpubkey_address;return{remoteHash:wX(i.scriptpubkey,dX.bitcoin.prefixes),issuingAddress:a,time:r,revokedAddresses:n.filter((function(e){return!!e.scriptpubkey_address})).map((function(e){return e.scriptpubkey_address}))}},priority:-1},PX={serviceURL:{main:"https://api.blockcypher.com/v1/btc/main/txs/{transaction_id}?limit=500",test:"https://api.blockcypher.com/v1/btc/test3/txs/{transaction_id}?limit=500"},serviceName:cX.blockcypher,parsingFunction:function(e){var t=e.jsonResponse;if(t.confirmations<1)throw new Error("Number of transaction confirmations were less than the minimum required, according to Blockcypher API");var r=EX(t.received),n=t.outputs,i=n[n.length-1],a=t.inputs[0].addresses[0];return{remoteHash:wX(i.script,dX.bitcoin.prefixes),issuingAddress:a,time:r,revokedAddresses:n.filter((function(e){return!!e.spent_by})).map((function(e){return e.addresses[0]}))}},priority:-1},OX=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function CX(e){var t=this;return e.map((function(e){return{getTxData:function(r,n){return OX(t,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,r){return OX(this,void 0,void 0,Wt.mark((function n(){var i,a;return Wt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=gX({explorerAPI:e,transactionId:t,isTestApi:pX(r)}),n.prev=1,n.next=4,bX({url:i});case 4:return a=n.sent,n.next=7,e.parsingFunction(Object.assign({jsonResponse:JSON.parse(a),chain:r},e));case 7:return n.abrupt("return",n.sent);case 10:throw n.prev=10,n.t0=n.catch(1),new Error("Unable to get remote hash");case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))}(e,r,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},priority:e.priority}}))}var MX=[PX,TX],NX=[SX,AX];function RX(e){var t=e.serviceUrl,r=e.transactionId;return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function e(){var n,i,a,o,s,u,c,l,f,h;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"eth_getTransactionByHash",jsonrpc:"2.0",id:"getbyhash",params:["0x"+r]},e.next=3,bX({url:t,body:n,method:"POST"});case 3:return i=e.sent,a=JSON.parse(i),o={method:"eth_getBlockByNumber",jsonrpc:"2.0",id:"blockbynumber",params:[a.result.blockNumber,!0]},e.next=8,bX({url:t,body:o,method:"POST"});case 8:return s=e.sent,u=JSON.parse(s),c=a.result,l=u.result,f=new Date(1e3*parseInt(l.timestamp,16)),h=c.from,e.abrupt("return",{remoteHash:wX(c.input,["0x"]),issuingAddress:h,time:f,revokedAddresses:[]});case 15:case"end":return e.stop()}}),e)})))}function LX(e){var t=e.serviceUrl,r=e.transactionId;return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,Wt.mark((function e(){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"getrawtransaction",jsonrpc:"2.0",id:"rpctest",params:[r,!0]},e.next=3,bX({url:t,body:n,method:"POST"});case 3:return i=e.sent,a=JSON.parse(i).result,e.abrupt("return",{issuingAddress:a.vout[0].scriptPubKey.addresses[0],remoteHash:wX(a.vout[1].scriptPubKey.asm,["6a20","OP_RETURN "]),time:IX(a.blocktime),revokedAddresses:a.vout.filter((function(e){return!!e.scriptPubKey.addresses})).map((function(e){return e.scriptPubKey.addresses})).flat()});case 6:case"end":return e.stop()}}),e)})))}var jX=[];function DX(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.map((function(e){return e.serviceName})).filter((function(e){return!!e})).filter((function(e){return!!cX[e]}));return n.length?t.reduce((function(t,i){if(n.includes(i.serviceName)){var a=Object.assign({},i),o=e.find((function(e){return e.serviceName===i.serviceName}));if(function(e){if(e.key&&!e.keyPropertyName)throw new Error("Property keyPropertyName is not set for ".concat(e.serviceName,". Cannot pass the key property to the service."));return!0}(o)){var s=Object.assign(a,o);t.push(s);var u=e.findIndex((function(e){return e.serviceName===s.serviceName}));jX.includes(u)||jX.push(u)}}else t.push(i);return r&&function(e,t){t.forEach((function(t){return e.splice(t,1)}))}(e,jX),t}),[]):t}function BX(e){var t=this;return e.map((function(e){return e.parsingFunction||(e.parsingFunction="btc"===e.chainType?LX:RX),e})).map((function(e){return{getTxData:function(r){return function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))}(t,void 0,void 0,Wt.mark((function t(){return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.parsingFunction(Object.assign(Object.assign({},e),{transactionId:r}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},priority:e.priority}}))}function UX(e){var t,r={bitcoin:CX(DX(t=e,MX)),ethereum:CX(DX(t,NX))},n=r.bitcoin,i=r.ethereum,a=function(e){return{custom:BX(e)}}(e.filter((function(e){return"rpc"===e.apiType}))).custom;return{bitcoin:n,ethereum:i,custom:[].concat(E(a),E(CX(e.filter((function(e){return"rpc"!==e.apiType})))))}}var FX=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))};function zX(e,t){var r;switch(e){case dX[lX.Bitcoin].code:case dX[lX.Regtest].code:case dX[lX.Testnet].code:case dX[lX.Mocknet].code:return t.bitcoin;case dX[lX.Ethmain].code:case dX[lX.Ethropst].code:case dX[lX.Ethrinkeby].code:return t.ethereum;default:if(!(null===(r=t.custom)||void 0===r?void 0:r.length))throw new Error("Chain is not natively supported. Use custom explorers to retrieve tx data.");return t.custom}}function HX(e){return FX(this,void 0,void 0,Wt.mark((function t(){var r,n,i,a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,yX(e,1);case 3:r=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new Error("Transaction lookup error: ".concat(t.t0.message));case 9:if(r&&0!==r.length){t.next=11;break}throw new Error("Could not confirm transaction data.");case 11:n=r[0],i=1;case 13:if(!(i<r.length)){t.next=22;break}if(a=r[i],n.issuingAddress===a.issuingAddress){t.next=17;break}throw new Error("Issuing addresses do not match consistently");case 17:if(n.remoteHash===a.remoteHash){t.next=19;break}throw new Error("Remote hashes do not match consistently");case 19:i++,t.next=13;break;case 22:return t.abrupt("return",n);case 23:case"end":return t.stop()}}),t,null,[[0,6]])})))}function VX(e,t,r,n){return FX(this,void 0,void 0,Wt.mark((function i(){var a;return Wt.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a=function(e,t,r){if(1>e.length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");for(var n=[],i=e.length,a=0;a<i;a++)n.push(e[a].getTxData(t,r));return n}(e[t],r,n),i.next=4,HX(a);case 4:case 13:return i.abrupt("return",i.sent);case 7:if(i.prev=7,i.t0=i.catch(0),!(t<e.length-1)){i.next=14;break}return t++,i.next=13,VX(e,t,r,n);case 14:throw i.t0;case 15:case"end":return i.stop()}}),i,null,[[0,7]])})))}function KX(e){return""===e?0:function(e){var t=Date.parse(e);if(t)return new Date(t);var r=function(e){var t=e.slice(0,-5).split(/\D/).map((function(e){return parseInt(e,10)||0}));t[1]-=1,t=new Date(Date.UTC.apply(Date,t));var r=e.slice(-5),n=parseInt(r,10)/100;return"+"===r.slice(0,1)&&(n*=-1),t.setHours(t.getHours()+n),t}(e);return r||function(e){var t,r,n=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.exec(e)||[];return n[1]?(t=n[1].split(/\D/).map((function(e){return parseInt(e,10)||0})),t[1]-=1,(t=new Date(Date.UTC.apply(Date,t))).getDate()?(n[5]&&(r=parseInt(n[5],10)/100*60,n[6]&&(r+=parseInt(n[6],10)),"+"===n[4]&&(r*=-1),r&&t.setUTCMinutes(t.getUTCMinutes()+r)),t):null):null}(e)}("".concat(e)).getTime()}function qX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.created?KX(e.created):null,n=e.revoked?KX(e.revoked):null,i=e.expires?KX(e.expires):null,a=t;return t||(a=(e.id||e.publicKey).replace("ecdsa-koblitz-pubkey:","")),new JK(a,r,n,i)}var WX={addresses:HK,certificates:aq,chains:YK,i18n:qK,verifier:Object.freeze({__proto__:null,getIssuerProfile:function(e){return IK(this,void 0,void 0,Wt.mark((function t(){var n,i;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=KK("errors","getIssuerProfile"),e){t.next=3;break}throw new $K("getIssuerProfile","".concat(n," - ").concat(KK("errors","issuerProfileNotSet")));case 3:if("object"==r(e)&&(e=e.id),function(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e)}(e)){t.next=5;break}throw new $K("getIssuerProfile","".concat(n," - ").concat(KK("errors","issuerProfileNotSet")));case 5:return t.next=7,hX({url:e}).catch((function(){throw new $K("getIssuerProfile",n)}));case 7:if(i=t.sent,function(e){var t=e.issuer_key,r=e.revocation_key,n=e.issuerKeys,i=e.revocationKeys;return!(!t||!r)||!(!n||!i)}(i=JSON.parse(i))){t.next=10;break}throw new $K("getIssuerProfile","".concat(n," - ").concat(KK("errors","issuerProfileInvalid")));case 10:return t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})))},getRevokedAssertions:function(e,t){var r;return IK(this,void 0,void 0,Wt.mark((function n(){var i,a,o;return Wt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return i=KK("errors","getRevokedAssertions"),t&&(e=function(e,t,r){var n=e.includes("?")?"&":"?";return"".concat(e).concat(n).concat("assertionId","=").concat(r)}(e,0,encodeURIComponent(t))),n.next=6,hX({url:e}).catch((function(){throw new $K("parseIssuerKeys",i)}));case 6:return a=n.sent,o=JSON.parse(a),n.abrupt("return",null!==(r=o.revokedAssertions)&&void 0!==r?r:[]);case 9:case"end":return n.stop()}}),n)})))},lookForTx:function(e){var t=e.transactionId,r=e.chain,n=e.explorerAPIs,i=void 0===n?[]:n;return FX(this,void 0,void 0,Wt.mark((function e(){var n,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=UX(i),a=function(e){var t=e.defaultAPIs,r=e.customAPIs,n=[t];if(null==r?void 0:r.length){var i=r[0].priority;n.splice(i,0,r)}if(1>t.concat(r).length)throw new Error("Invalid application configuration; check the CONFIG.MinimumBlockchainExplorers configuration value");return n}({defaultAPIs:zX(r,n),customAPIs:n.custom}),e.next=3,VX(a,0,t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))},parseIssuerKeys:function(e){try{var t={};if("@context"in e)for(var r=e.publicKey||e.publicKeys,n=0;n<r.length;n++){var i=qX(r[n]);t[i.publicKey]=i}else{var a=qX({},(e.issuerKeys||[])[0].key);t[a.publicKey]=a}return t}catch(e){throw new $K("parseIssuerKeys",KK("errors","parseIssuerKeys"))}},parseRevocationKey:function(e){return e&&Object.prototype.hasOwnProperty.call(e,"revocationKeys")&&e.revocationKeys.length>0?e.revocationKeys[0].key:null}})},GX={1:function(e){var t,n,i=e.certificate||e.document.certificate,a=e.recipient||e.document.recipient,o=e.document.assertion,s=e.receipt,u=void 0===s?TK.V1_1:TK.V1_2,c=i.image,l=i.description,f=i.issuer,h=i.subtitle,d=a.publicKey,p=WX.certificates.getChain(d),v=o.expires,y=o.uid,g=o.issuedOn,b=o.metadataJson,m="".concat(a.givenName," ").concat(a.familyName),w=o.id,x=a.revocationKey||null,_=f.image,k=e.document.signature,S=function(e,t){var r=[];switch(t){case TK.V1_1:case TK.V1_2:if(e.constructor===Array)for(var n in e){var i=e[n],a="jobTitle"in i?i.jobTitle:null,o="name"in i?i.name:null,s=new XK(i.image,a,o);r.push(s)}else{var u=new XK(e,null,null);r.push(u)}break;case TK.V2_0:for(var c in e){var l=e[c],f=new XK(l.image,l.jobTitle,l.name);r.push(f)}}return r}(null===(n=null===(t=e.document)||void 0===t?void 0:t.assertion)||void 0===n?void 0:n["image:signature"],u);return"object"==r(h)&&(h=h.display?h.content:""),{certificateImage:c,chain:p,description:l,expires:v,id:y,issuedOn:g,issuer:f,metadataJson:b,name:i.title||i.name,publicKey:d,receipt:s,recipientFullName:m,recordLink:w,revocationKey:x,sealImage:_,signature:k,signatureImage:S,subtitle:h,version:u}}};function JX(e){return IK(this,void 0,void 0,Wt.mark((function t(){var r,n,i;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=function(e){"string"==typeof e&&(e=[e]);var t=e.filter((function(e){return"string"==typeof e})).find((function(e){return e.toLowerCase().indexOf("blockcerts")>0})).split("/").filter((function(e){return""!==e})),r=Object.keys(GX);return parseInt(r.filter((function(e){return function(e,t){return e.some((function(e){return e.includes("v".concat(t))||e.includes("".concat(t,"."))}))}(t,e.toString())}))[0],10)}(e["@context"]),1===r){t.next=5;break}return n="The document you are trying to parse is not Blockcerts V1. Please refer to cert-verifier-js to parse and verify newer versions: https://github.com/blockchain-certificates/cert-verifier-js",t.abrupt("return",(console.warn(n),{isFormatValid:!1,error:n}));case 5:return t.next=7,GX[r](e);case 7:return i=t.sent,t.abrupt("return",(i.isFormatValid=!0,i));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",{isFormatValid:!1,error:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))}var XX=eq((function(e,t){var n;t=e.exports=G,n="object"==r(OW)&&OW.env&&OW.env.NODE_DEBUG&&/\bsemver\b/i.test(OW.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],o=t.src=[],s=0,u=s++;o[u]="0|[1-9]\\d*";var c=s++;o[c]="[0-9]+";var l=s++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=s++;o[f]="("+o[u]+")\\.("+o[u]+")\\.("+o[u]+")";var h=s++;o[h]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var d=s++;o[d]="(?:"+o[u]+"|"+o[l]+")";var p=s++;o[p]="(?:"+o[c]+"|"+o[l]+")";var v=s++;o[v]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var y=s++;o[y]="(?:-?("+o[p]+"(?:\\."+o[p]+")*))";var g=s++;o[g]="[0-9A-Za-z-]+";var b=s++;o[b]="(?:\\+("+o[g]+"(?:\\."+o[g]+")*))";var m=s++,w="v?"+o[f]+o[v]+"?"+o[b]+"?";o[m]="^"+w+"$";var x="[v=\\s]*"+o[h]+o[y]+"?"+o[b]+"?",_=s++;o[_]="^"+x+"$";var k=s++;o[k]="((?:<|>)?=?)";var S=s++;o[S]=o[c]+"|x|X|\\*";var E=s++;o[E]=o[u]+"|x|X|\\*";var I=s++;o[I]="[v=\\s]*("+o[E]+")(?:\\.("+o[E]+")(?:\\.("+o[E]+")(?:"+o[v]+")?"+o[b]+"?)?)?";var A=s++;o[A]="[v=\\s]*("+o[S]+")(?:\\.("+o[S]+")(?:\\.("+o[S]+")(?:"+o[y]+")?"+o[b]+"?)?)?";var T=s++;o[T]="^"+o[k]+"\\s*"+o[I]+"$";var P=s++;o[P]="^"+o[k]+"\\s*"+o[A]+"$";var O=s++;o[O]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var C=s++;o[C]="(?:~>?)";var M=s++;o[M]="(\\s*)"+o[C]+"\\s+",a[M]=new RegExp(o[M],"g");var N=s++;o[N]="^"+o[C]+o[I]+"$";var R=s++;o[R]="^"+o[C]+o[A]+"$";var L=s++;o[L]="(?:\\^)";var j=s++;o[j]="(\\s*)"+o[L]+"\\s+",a[j]=new RegExp(o[j],"g");var D=s++;o[D]="^"+o[L]+o[I]+"$";var B=s++;o[B]="^"+o[L]+o[A]+"$";var U=s++;o[U]="^"+o[k]+"\\s*("+x+")$|^$";var F=s++;o[F]="^"+o[k]+"\\s*("+w+")$|^$";var z=s++;o[z]="(\\s*)"+o[k]+"\\s*("+x+"|"+o[I]+")",a[z]=new RegExp(o[z],"g");var H=s++;o[H]="^\\s*("+o[I]+")\\s+-\\s+("+o[I]+")\\s*$";var V=s++;o[V]="^\\s*("+o[A]+")\\s+-\\s+("+o[A]+")\\s*$";var K=s++;o[K]="(<|>)?=?\\s*\\*";for(var q=0;q<35;q++)n(q,o[q]),a[q]||(a[q]=new RegExp(o[q]));function W(e,t){if(t&&"object"==r(t)||(t={loose:!!t,includePrerelease:!1}),e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?a[_]:a[m]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(t&&"object"==r(t)||(t={loose:!!t,includePrerelease:!1}),e instanceof G){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof G))return new G(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?a[_]:a[m]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=W,t.valid=function(e,t){var r=W(e,t);return r?r.version:null},t.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof G||(e=new G(e,this.options)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return X(r,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new G(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var r=W(e),n=W(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var o in r)if(("major"===o||"minor"===o||"patch"===o)&&r[o]!==n[o])return i+o;return a},t.compareIdentifiers=X;var J=/^[0-9]+$/;function X(e,t){var r=J.test(e),n=J.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function $(e,t,r){return new G(e,r).compare(new G(t,r))}function Y(e,t,r){return $(e,t,r)>0}function Z(e,t,r){return $(e,t,r)<0}function Q(e,t,r){return 0===$(e,t,r)}function ee(e,t,r){return 0!==$(e,t,r)}function te(e,t,r){return $(e,t,r)>=0}function re(e,t,r){return $(e,t,r)<=0}function ne(e,t,n,i){switch(t){case"===":return"object"==r(e)&&(e=e.version),"object"==r(n)&&(n=n.version),e===n;case"!==":return"object"==r(e)&&(e=e.version),"object"==r(n)&&(n=n.version),e!==n;case"":case"=":case"==":return Q(e,n,i);case"!=":return ee(e,n,i);case">":return Y(e,n,i);case">=":return te(e,n,i);case"<":return Z(e,n,i);case"<=":return re(e,n,i);default:throw new TypeError("Invalid operator: "+t)}}function ie(e,t){if(t&&"object"==r(t)||(t={loose:!!t,includePrerelease:!1}),e instanceof ie){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ae?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=$,t.compareLoose=function(e,t){return $(e,t,!0)},t.rcompare=function(e,t,r){return $(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=Y,t.lt=Z,t.eq=Q,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ne,t.Comparator=ie;var ae={};function oe(e,t){if(t&&"object"==r(t)||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof ie)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,r,n,i,a,o,s,u,c,l,f,h){return((t=se(r)?"":se(n)?">="+r+".0.0":se(i)?">="+r+"."+n+".0":">="+t)+" "+(s=se(u)?"":se(c)?"<"+(+u+1)+".0.0":se(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+s)).trim()}function ce(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ae&&e[i].semver.prerelease.length>0){var a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new oe(t,r)}catch(e){return!1}return t.test(e)}function fe(e,t,r,n){var i,a,o,s,u;switch(e=new G(e,n),t=new oe(t,n),r){case">":i=Y,a=re,o=Z,s=">",u=">=";break;case"<":i=Z,a=te,o=Y,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],f=null,h=null;if(l.forEach((function(e){e.semver===ae&&(e=new ie(">=0.0.0")),f=f||e,h=h||e,i(e.semver,f.semver,n)?f=e:o(e.semver,h.semver,n)&&(h=e)})),f.operator===s||f.operator===u)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===u&&o(e,h.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.options.loose?a[U]:a[F],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new G(r[2],this.options.loose):this.semver=ae},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ae||("string"==typeof e&&(e=new G(e,this.options)),ne(e,this.operator,this.semver,this.options))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(t&&"object"==r(t)||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new oe(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),le(e.semver,n,t);var i=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),a=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),u=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||a||o&&s||u||c},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?a[V]:a[H];e=e.replace(r,ue),n("hyphen replace",e),e=e.replace(a[z],"$1$2$3"),n("comparator trim",e,a[z]),e=(e=(e=e.replace(a[M],"$1~")).replace(a[j],"$1^")).split(/\s+/).join(" ");var i=t?a[U]:a[F],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?a[B]:a[D];return e.replace(r,(function(t,r,i,a,o){var s;return n("caret",e,t,r,i,a,o),se(r)?s="":se(i)?s=">="+r+".0.0 <"+(+r+1)+".0.0":se(a)?s="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),s="0"===r?"0"===i?">="+r+"."+i+"."+a+"-"+o+" <"+r+"."+i+"."+(+a+1):">="+r+"."+i+"."+a+"-"+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+a+"-"+o+" <"+(+r+1)+".0.0"):(n("no pr"),s="0"===r?"0"===i?">="+r+"."+i+"."+a+" <"+r+"."+i+"."+(+a+1):">="+r+"."+i+"."+a+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+a+" <"+(+r+1)+".0.0"),n("caret return",s),s}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?a[R]:a[N];return e.replace(r,(function(t,r,i,a,o){var s;return n("tilde",e,t,r,i,a,o),se(r)?s="":se(i)?s=">="+r+".0.0 <"+(+r+1)+".0.0":se(a)?s=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":o?(n("replaceTilde pr",o),s=">="+r+"."+i+"."+a+"-"+o+" <"+r+"."+(+i+1)+".0"):s=">="+r+"."+i+"."+a+" <"+r+"."+(+i+1)+".0",n("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?a[P]:a[T];return e.replace(r,(function(t,r,i,a,o,s){n("xRange",e,t,r,i,a,o,s);var u=se(i),c=u||se(a),l=c||se(o);return"="===r&&l&&(r=""),u?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(c&&(a=0),o=0,">"===r?(r=">=",c?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),t=r+i+"."+a+"."+o):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(a[K],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o.map((function(e){return new ie(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,i=null;try{var a=new oe(t,r)}catch(e){return null}return e.forEach((function(e){a.test(e)&&(n&&-1!==i.compare(e)||(i=new G(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,i=null;try{var a=new oe(t,r)}catch(e){return null}return e.forEach((function(e){a.test(e)&&(n&&1!==i.compare(e)||(i=new G(n=e,r)))})),n},t.minVersion=function(e,t){e=new oe(e,t);var r=new G("0.0.0");if(e.test(r))return r;if(r=new G("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new G(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Y(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return fe(e,t,"<",r)},t.gtr=function(e,t,r){return fe(e,t,">",r)},t.outside=fe,t.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new oe(e,r),t=new oe(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(a[O]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}));XX.SEMVER_SPEC_VERSION,XX.re,XX.src,XX.parse,XX.valid,XX.clean,XX.SemVer,XX.inc,XX.diff,XX.compareIdentifiers,XX.rcompareIdentifiers,XX.major,XX.minor,XX.patch,XX.compare,XX.compareLoose,XX.rcompare,XX.sort,XX.rsort,XX.gt,XX.lt,XX.eq,XX.neq,XX.gte,XX.lte,XX.cmp,XX.Comparator,XX.Range,XX.toComparators,XX.satisfies,XX.maxSatisfying,XX.minSatisfying,XX.minVersion,XX.validRange,XX.ltr,XX.gtr,XX.outside,XX.prerelease,XX.intersects,XX.coerce;var $X={},YX=$X,ZX="function"==typeof setImmediate&&setImmediate,QX=ZX?function(e){return ZX(e)}:function(e){return setTimeout(e,0)};function e$(e,t,r){try{return e(t,r)}catch(e){gW((function(){throw e}))}}$X.nextTick="object"==r(OW)?gW:QX,$X.setImmediate=ZX?QX:$X.nextTick,$X.clone=function(e){if(e&&"object"==r(e)){var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;++n)t[n]=$X.clone(e[n])}else if($X.isObject(e))for(var i in t={},e)t[i]=$X.clone(e[i]);else t=e.toString();return t}return e},$X.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},$X.isUndefined=function(e){return void 0===e},$X.callbackify=function(e){return i(Wt.mark((function t(){var r,n,i,a,o,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=s.length,n=new Array(r),i=0;i<r;i++)n[i]=s[i];return"function"==typeof(a=n[n.length-1])&&n.pop(),t.prev=3,t.next=6,e.apply(null,n);case 6:o=t.sent,t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(3),"function"!=typeof a){t.next=13;break}return t.abrupt("return",e$(a,t.t0));case 13:throw t.t0;case 14:return t.abrupt("return","function"==typeof a?e$(a,null,o):o);case 15:case"end":return t.stop()}}),t,null,[[3,9]])})))};var t$=function(){function e(t){a(this,e),this.prefix=t,this.counter=0,this.existing={}}return s(e,[{key:"clone",value:function(){var t=new e(this.prefix);return t.counter=this.counter,t.existing=YX.clone(this.existing),t}},{key:"getId",value:function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t}},{key:"hasId",value:function(e){return e in this.existing}}]),e}(),r$={options:{usePureJavaScript:!1}};r$.md=r$.md||{},r$.md.algorithms=r$.md.algorithms||{};var n$={},i$=n$,a$={};n$.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<s.length;++u)c+=s[u]<<8,s[u]=c%a,c=c/a|0;for(;c>0;)s.push(c%a),c=c/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=t[s[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var o=0,s=e.at(r);o<a.length;++o)s+=a[o]<<8,a[o]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=t[a[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},n$.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=a$[t];if(!r){r=a$[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,a=t.charAt(0),o=[0];for(n=0;n<e.length;n++){var s=r[e.charCodeAt(n)];if(void 0===s)return;for(var u=0,c=s;u<o.length;++u)c+=o[u]*i,o[u]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)o.push(0);return xq.from(o.reverse())},eq((function(e){var t=e.exports=r$.util=r$.util||{};function n(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function i(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if(e instanceof xq)this.data=e.toString("binary");else{var n=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,n)}catch(e){for(var a=0;a<n.length;++a)this.putByte(n[a])}}else(e instanceof i||"object"==r(e)&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];t.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,a=document.createElement("div");r=[],new MutationObserver((function(){var e=r.slice();r.length=0,e.forEach((function(e){e()}))})).observe(a,{attributes:!0});var o=t.setImmediate;t.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),o(e)):(r.push(e),1===r.length&&a.setAttribute("a",i=!i))}}t.nextTick=t.setImmediate}(),t.isNodejs=void 0!==OW&&OW.versions&&OW.versions.node,t.globalScope=t.isNodejs?ZK:"undefined"==typeof self?window:self,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=i,t.ByteStringBuffer=i,t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){n(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,r){r=r||{},this.read=r.readOffset||0,this.growSize=r.growSize||1024;var n=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in r?r.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in r&&(this.write=r.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,n){if(t.isArrayBufferView(e)){var i=(a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-a.byteOffset;return this.accommodate(i),new Uint8Array(this.data.buffer,this.write).set(a),this.write+=i,this}if(t.isArrayBuffer(e)){var a=new Uint8Array(e);return this.accommodate(a.byteLength),new Uint8Array(this.data.buffer).set(a,this.write),this.write+=a.byteLength,this}if(e instanceof t.DataBuffer||"object"==r(e)&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data))return a=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(a.byteLength),new Uint8Array(e.data.byteLength,this.write).set(a),this.write+=a.byteLength,this;if(e instanceof t.ByteStringBuffer&&(e=e.data,n="binary"),n=n||"binary","string"==typeof e){var o;if("hex"===n)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if("base64"===n)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;if("utf8"===n&&(e=t.encodeUtf8(e),n="binary"),"binary"===n||"raw"===n)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if("utf16"===n)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+n)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){n(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return n(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var r=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(r);if("hex"===e)return t.binary.hex.encode(r);if("base64"===e)return t.binary.base64.encode(r);if("utf8"===e)return t.text.utf8.decode(r);if("utf16"===e)return t.text.utf16.decode(r);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,r){return r=r||"raw",void 0!==e&&"utf8"===r&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},t.xorBytes=function(e,t,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+a},t.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var r,n,i,o="",s="",u=0;u<e.length;)r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),o+=a.charAt(r>>2),o+=a.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=a.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":a.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+o},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,a="",s=0;s<e.length;)t=o[e.charCodeAt(s++)-43],r=o[e.charCodeAt(s++)-43],n=o[e.charCodeAt(s++)-43],i=o[e.charCodeAt(s++)-43],a+=String.fromCharCode(t<<2|r>>4),64!==n&&(a+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(a+=String.fromCharCode((3&n)<<6|i)));return a},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i$.encode,decode:i$.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,a=r=r||0;for(1&e.length&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n},t.binary.base64.encode=function(e,t){for(var r,n,i,o="",s="",u=0;u<e.byteLength;)r=e[u++],n=e[u++],i=e[u++],o+=a.charAt(r>>2),o+=a.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=a.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":a.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+o},t.binary.base64.decode=function(e,t,r){var n,i,a,s,u=t;u||(u=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=r=r||0;c<e.length;)n=o[e.charCodeAt(c++)-43],i=o[e.charCodeAt(c++)-43],a=o[e.charCodeAt(c++)-43],s=o[e.charCodeAt(c++)-43],u[l++]=n<<2|i>>4,64!==a&&(u[l++]=(15&i)<<4|a>>2,64!==s&&(u[l++]=(3&a)<<6|s));return t?l-r:u.subarray(0,l)},t.binary.base58.encode=function(e,r){return t.binary.baseN.encode(e,s,r)},t.binary.base58.decode=function(e,r){return t.binary.baseN.decode(e,s,r)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,r,n){e=t.encodeUtf8(e);var i=r;i||(i=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o);return r?a-n:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),a=r=r||0,o=r,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s),a+=2;return t?a-r:n},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,r,n){if(r=t.decode64(e.deflate(t.encode64(r)).rval),n){var i=2;32&r.charCodeAt(1)&&(i=6),r=r.substring(i,r.length-4)}return r},t.inflate=function(e,r,n){var i=e.inflate(t.encode64(r)).rval;return null===i?null:t.decode64(i)};var u=function(e,r,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(r):(n=t.encode64(JSON.stringify(n)),i=e.setItem(r,n)),void 0!==i&&!0!==i.rval){var a=new Error(i.error.message);throw a.id=i.error.id,a.name=i.error.name,a}},c=function(e,r){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(r);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(t.decode64(n))),n},l=function(e,t,r,n){var i=c(e,t);null===i&&(i={}),i[r]=n,u(e,t,i)},f=function(e,t,r){var n=c(e,t);return null!==n&&(n=r in n?n[r]:null),n},h=function(e,t,r){var n=c(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),u(e,t,n)}},d=function(e,t){u(e,t,null)},p=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var a=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),a="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),a=!0)}catch(e){o=e}if(a)break}if(!a)throw o;return i};t.setItem=function(e,t,r,n,i){p(l,arguments,i)},t.getItem=function(e,t,r,n){return p(f,arguments,n)},t.removeItem=function(e,t,r,n){p(h,arguments,n)},t.clearItems=function(e,t,r){p(d,arguments,r)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(80!==n.port&&"http"===n.scheme||443!==n.port&&"https"===n.scheme)&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var v=null;t.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,a,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),a=r[n].substring(o+1)):(i=r[n],a=null),i in t||(t[i]=[]),i in Object.prototype||null===a||t[i].push(unescape(a))}return t};return void 0===e?(null===v&&(v="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=v):t=r(e),t},t.parseFragment=function(e){var r=e,n="",i=e.indexOf("?");i>0&&(r=e.substring(0,i),n=e.substring(i+1));var a=r.split("/");return a.length>0&&""===a[0]&&a.shift(),{pathString:r,queryString:n,path:a,query:""===n?{}:t.getQueryVariables(n)}},t.makeRequest=function(e){var r=t.parseFragment(e),n={path:r.pathString,query:r.queryString,getPath:function(e){return void 0===e?r.path:r.path[e]},getQuery:function(e,t){var n;return void 0===e?n=r.query:(n=r.query[e])&&void 0!==t&&(n=n[t]),n},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},t.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,r,n=/%./g,i=0,a=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&a.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(o)),a.join("")},t.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-c).toFixed(a).slice(2):"")},t.formatSize=function(e){return e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var r=t.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;r.putByte(i)}return r.getBytes()},t.bytesFromIPv6=function(e){for(var r=0,n=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++r,!0}))).length+r),i=t.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=t.hexToBytes(e[a]);o.length<2&&i.putByte(0),i.putBytes(o)}else i.fillWithByte(0,n),n=0;return i.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var r=[],n=[],i=0,a=0;a<e.length;a+=2){for(var o=t.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],u=r.length;s&&u===s.end+1?(s.end=u,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:u,end:u})}r.push(o)}if(n.length>0){var c=n[i];c.end-c.start>0&&(r.splice(c.start,c.end-c.start+1,""),0===c.start&&r.unshift(""),7===c.end&&r.push(""))}return r.join(":")},t.estimateCores=function(e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},"cores"in t&&!e.update)return r(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,r(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,r(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,r(null,t.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(i,a,o){if(0===a){var s=Math.floor(i.reduce((function(e,t){return e+t}),0)/i.length);return t.cores=Math.max(1,s),URL.revokeObjectURL(n),r(null,t.cores)}!function(e,t){for(var r=[],i=[],a=0;a<e;++a){var o=new Worker(n);o.addEventListener("message",(function(n){if(i.push(n.data),i.length===e){for(var a=0;a<e;++a)r[a].terminate();t(null,i)}})),r.push(o)}for(a=0;a<e;++a)r[a].postMessage(a)}(o,(function(t,r){i.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],a=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,r)),e(i,a-1,o)}))}([],5,16)}})),eq((function(e){var t=e.exports=r$.sha1=r$.sha1||{};r$.md.sha1=r$.md.algorithms.sha1=t,t.create=function(){n||(r=String.fromCharCode(128),r+=r$.util.fillString(String.fromCharCode(0),64),n=!0);var e=null,t=r$.util.createBuffer(),a=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,n=0;n<r;++n)o.fullMessageLength.push(0);return t=r$.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(r,n){"utf8"===n&&(r=r$.util.encodeUtf8(r));var s=r.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(r),i(e,a,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var n=r$.util.createBuffer();n.putBytes(t.bytes());var s,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;n.putBytes(r.substr(0,o.blockLength-u));for(var c=8*o.fullMessageLength[0],l=0;l<o.fullMessageLength.length-1;++l)c+=(s=8*o.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=s>>>0;n.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};i(f,a,n);var h=r$.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},o};var r=null,n=!1;function i(e,t,r){for(var n,i,a,o,s,u,c,l=r.length();l>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a&o|s&(a^o))+u+2400959708+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+3395469782+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}})),eq((function(e){var t=e.exports=r$.sha256=r$.sha256||{};r$.md.sha256=r$.md.algorithms.sha256=t,t.create=function(){n||(r=String.fromCharCode(128),r+=r$.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var e=null,t=r$.util.createBuffer(),o=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=r$.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(r,n){"utf8"===n&&(r=r$.util.encodeUtf8(r));var i=r.length;s.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=i[1],i[1]=i[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,i[0]=i[1]/4294967296>>>0;return t.putBytes(r),a(e,o,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=r$.util.createBuffer();n.putBytes(t.bytes());var i,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;n.putBytes(r.substr(0,s.blockLength-u));for(var c=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)c+=(i=8*s.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=i>>>0;n.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};a(f,o,n);var h=r$.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},s};var r=null,n=!1,i=null;function a(e,t,r){for(var n,a,o,s,u,c,l,f,h,d,p,v,y,g=r.length();g>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[u]=n+t[u-7]+a+t[u-16]|0;for(c=e.h0,l=e.h1,f=e.h2,h=e.h3,d=e.h4,p=e.h5,v=e.h6,y=e.h7,u=0;u<64;++u)o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|f&(c^l),n=y+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(v^d&(p^v))+i[u]+t[u],y=v,v=p,p=d,d=h+n>>>0,h=f,f=l,l=c,c=n+(a=o+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+h|0,e.h4=e.h4+d|0,e.h5=e.h5+p|0,e.h6=e.h6+v|0,e.h7=e.h7+y|0,g-=64}}}));var o$=function(){function e(t){a(this,e),this.md=r$.md[t].create()}return s(e,[{key:"update",value:function(e){this.md.update(e,"utf8")}},{key:"digest",value:function(){return this.md.digest().toHex()}}]),e}(),s$=function(){function e(t){a(this,e),this.list=t.sort(),this.done=!1,this.left={};for(var r=0;r<t.length;++r)this.left[t[r]]=!0}return s(e,[{key:"hasNext",value:function(){return!this.done}},{key:"next",value:function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var a=this.list[i],o=this.left[a];(null===t||a>t)&&(o&&i>0&&a>this.list[i-1]||!o&&i<n-1&&a>this.list[i+1])&&(t=a,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var u=0;u<n;++u)this.list[u]>t&&(this.left[this.list[u]]=!this.left[this.list[u]])}return e}}]),e}(),u$="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",c$="http://www.w3.org/2001/XMLSchema#string",l$={eoln:/(?:\r\n)|(?:\n)|(?:\r)/g};l$.empty=new RegExp("^[ \\t]*$"),l$.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z-----------_0-9])(?:(?:[A-Za-z-----------_0-9---.])*(?:[A-Za-z-----------_0-9---]))?))[ \\t]*\\.))[ \\t]*$');var f$=function(){function e(){a(this,e)}return s(e,null,[{key:"parse",value:function(e){var t,r=[],n={},i=0,a=C(e.split(l$.eoln));try{for(a.s();!(t=a.n()).done;){var o=t.value;if(i++,!l$.empty.test(o)){var s=o.match(l$.quad);if(null===s)throw new Error("N-Quads parse error on line "+i+".");var u={};if(void 0!==s[1]?u.subject={termType:"NamedNode",value:s[1]}:u.subject={termType:"BlankNode",value:s[2]},u.predicate={termType:"NamedNode",value:s[3]},void 0!==s[4]?u.object={termType:"NamedNode",value:s[4]}:void 0!==s[5]?u.object={termType:"BlankNode",value:s[5]}:(u.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==s[7]?u.object.datatype.value=s[7]:void 0!==s[8]?(u.object.datatype.value=u$,u.object.language=s[8]):u.object.datatype.value=c$,u.object.value=v$(s[6])),void 0!==s[9]?u.graph={termType:"NamedNode",value:s[9]}:void 0!==s[10]?u.graph={termType:"BlankNode",value:s[10]}:u.graph={termType:"DefaultGraph",value:""},u.graph.value in n){var c,l=!0,f=n[u.graph.value],h=C(f);try{for(h.s();!(c=h.n()).done;){if(h$(c.value,u)){l=!1;break}}}catch(e){h.e(e)}finally{h.f()}l&&(f.push(u),r.push(u))}else n[u.graph.value]=[u],r.push(u)}}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"serialize",value:function(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));var r,n=[],i=C(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(e.serializeQuad(a))}}catch(e){i.e(e)}finally{i.f()}return n.sort().join("")}},{key:"serializeQuad",value:function(e){var t=e.subject,r=e.predicate,n=e.object,i=e.graph,a="";return[t,r].forEach((function(e){"NamedNode"===e.termType?a+="<"+e.value+">":a+=e.value,a+=" "})),"NamedNode"===n.termType?a+="<"+n.value+">":"BlankNode"===n.termType?a+=n.value:(a+='"'+function(e){return e.replace(d$,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(n.value)+'"',n.datatype.value===u$?n.language&&(a+="@"+n.language):n.datatype.value!==c$&&(a+="^^<"+n.datatype.value+">")),"NamedNode"===i.termType?a+=" <"+i.value+">":"BlankNode"===i.termType&&(a+=" "+i.value),a+=" .\n"}},{key:"legacyDatasetToQuads",value:function(e){var t=[],r={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"},n=function(n){e[n].forEach((function(e){var i={};for(var a in e){var o=e[a],s={termType:r[o.type],value:o.value};"Literal"===s.termType&&(s.datatype={termType:"NamedNode"},"datatype"in o&&(s.datatype.value=o.datatype),"language"in o?("datatype"in o||(s.datatype.value=u$),s.language=o.language):"datatype"in o||(s.datatype.value=c$)),i[a]=s}i.graph="@default"===n?{termType:"DefaultGraph",value:""}:{termType:n.startsWith("_:")?"BlankNode":"NamedNode",value:n},t.push(i)}))};for(var i in e)n(i);return t}}]),e}();function h$(e,t){for(var r in e)if(e[r].termType!==t[r].termType||e[r].value!==t[r].value)return!1;return"Literal"!==e.object.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.datatype.value===t.object.datatype.value&&e.object.language===t.object.language}var d$=/["\\\n\r]/g,p$=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function v$(e){return e.replace(p$,(function(e,t,r,n){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(n)throw new Error("Unsupported U escape")}))}var y$,g$={subject:"s",object:"o",graph:"g"},b$=function(e){c(r,e);var t=m(r);function r(e){var n;return a(this,r),(n=t.call(this,e=e||{})).name="URDNA2015",n.options=Object.assign({},e),n.blankNodeInfo={},n.hashToBlankNodes={},n.canonicalIssuer=new t$("_:c14n"),n.hashAlgorithm="sha256",n.quads,n}return s(r,[{key:"main",value:function(e,t){var r,n=this;n.schedule.start=Date.now(),n.quads=e;var i={};n.waterfall([function(t){n.forEach(e,(function(e,t,r){n.forEachComponent(e,(function(t){if("BlankNode"===t.termType){var r=t.value;r in n.blankNodeInfo?n.blankNodeInfo[r].quads.push(e):(i[r]=!0,n.blankNodeInfo[r]={quads:[e]})}})),r()}),t)},function(e){var t=!0;n.whilst((function(){return t}),(function(e){t=!1,n.hashToBlankNodes={},n.waterfall([function(e){n.forEach(i,(function(e,t,r){n.hashFirstDegreeQuads(t,(function(e,i){if(e)return r(e);i in n.hashToBlankNodes?n.hashToBlankNodes[i].push(t):n.hashToBlankNodes[i]=[t],r()}))}),e)},function(e){var r=Object.keys(n.hashToBlankNodes).sort();n.forEach(r,(function(e,r,a){var o=n.hashToBlankNodes[e];if(o.length>1)return a();var s=o[0];n.canonicalIssuer.getId(s),delete i[s],delete n.hashToBlankNodes[e],t=!0,a()}),e)}],e)}),e)},function(e){var t=Object.keys(n.hashToBlankNodes).sort();n.forEach(t,(function(e,t,r){var i=[],a=n.hashToBlankNodes[e];n.waterfall([function(e){n.forEach(a,(function(e,t,r){if(n.canonicalIssuer.hasId(e))return r();var a=new t$("_:b");a.getId(e),n.hashNDegreeQuads(e,a,(function(e,t){if(e)return r(e);i.push(t),r()}))}),e)},function(e){i.sort((function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0})),n.forEach(i,(function(e,t,r){for(var i in e.issuer.existing)n.canonicalIssuer.getId(i);r()}),e)}],r)}),e)},function(e){var t=[];n.waterfall([function(e){n.forEach(n.quads,(function(e,r,i){n.forEachComponent(e,(function(e){"BlankNode"!==e.termType||e.value.startsWith(n.canonicalIssuer.prefix)||(e.value=n.canonicalIssuer.getId(e.value))})),t.push(f$.serializeQuad(e)),i()}),e)},function(e){return t.sort(),r=t.join(""),e()}],e)}],(function(e){return t(e,r)}))}},{key:"hashFirstDegreeQuads",value:function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],a=n.quads;r.forEach(a,(function(t,n,a){var o={predicate:t.predicate};r.forEachComponent(t,(function(t,n){o[n]=r.modifyFirstDegreeComponent(e,t,n)})),i.push(f$.serializeQuad(o)),a()}),(function(e){if(e)return t(e);i.sort();for(var a=new o$(r.hashAlgorithm),o=0;o<i.length;++o)a.update(i[o]);n.hash=a.digest(),t(null,n.hash)}))}},{key:"hashRelatedBlankNode",value:function(e,t,r,n,i){var a,o=this;o.waterfall([function(t){return o.canonicalIssuer.hasId(e)?(a=o.canonicalIssuer.getId(e),t()):r.hasId(e)?(a=r.getId(e),t()):void o.hashFirstDegreeQuads(e,(function(e,r){if(e)return t(e);a=r,t()}))}],(function(e){if(e)return i(e);var r=new o$(o.hashAlgorithm);return r.update(n),"g"!==n&&r.update(o.getRelatedPredicate(t)),r.update(a),i(null,r.digest())}))}},{key:"hashNDegreeQuads",value:function(e,t,r){var n,i=this,a=new o$(i.hashAlgorithm);i.waterfall([function(r){return i.createHashToRelated(e,t,(function(e,t){if(e)return r(e);n=t,r()}))},function(e){var r=Object.keys(n).sort();i.forEach(r,(function(e,r,o){a.update(e);var s,u="",c=new s$(n[e]);i.whilst((function(){return c.hasNext()}),(function(e){var r=c.next(),n=t.clone(),a="",o=[];i.waterfall([function(t){i.forEach(r,(function(t,r,s){if(i.canonicalIssuer.hasId(t)?a+=i.canonicalIssuer.getId(t):(n.hasId(t)||o.push(t),a+=n.getId(t)),0!==u.length&&a>u)return e();s()}),t)},function(t){i.forEach(o,(function(t,r,o){i.hashNDegreeQuads(t,n,(function(r,i){return r?o(r):(a+=n.getId(t),a+="<"+i.hash+">",n=i.issuer,0!==u.length&&a>u?e():void o())}))}),t)},function(e){(0===u.length||a<u)&&(u=a,s=n),e()}],e)}),(function(e){if(e)return o(e);a.update(u),t=s,o()}))}),e)}],(function(e){r(e,{hash:a.digest(),issuer:t})}))}},{key:"modifyFirstDegreeComponent",value:function(e,t){return"BlankNode"!==t.termType||((t=YX.clone(t)).value=t.value===e?"_:a":"_:z"),t}},{key:"getRelatedPredicate",value:function(e){return"<"+e.predicate.value+">"}},{key:"createHashToRelated",value:function(e,t,r){var n=this,i={},a=n.blankNodeInfo[e].quads;n.forEach(a,(function(r,a,o){n.forEach(r,(function(a,o,s){if("predicate"===o||"BlankNode"!==a.termType||a.value===e)return s();var u=a.value,c=g$[o];n.hashRelatedBlankNode(u,r,t,c,(function(e,t){if(e)return s(e);t in i?i[t].push(u):i[t]=[u],s()}))}),o)}),(function(e){return r(e,i)}))}},{key:"forEachComponent",value:function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)}}]),r}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.maxCallStackDepth,n=void 0===r?500:r,i=t.maxTotalCallStackDepth,o=void 0===i?4294967295:i,s=t.timeSlice,u=void 0===s?10:s;a(this,e),this.schedule={},this.schedule.MAX_DEPTH=n,this.schedule.MAX_TOTAL_DEPTH=o,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=u}return s(e,[{key:"doWork",value:function(e,t){var r=this.schedule;if(r.totalDepth>=r.MAX_TOTAL_DEPTH)return t(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function n(){if(r.depth===r.MAX_DEPTH)return r.depth=0,r.running=!1,YX.nextTick(n);var i=Date.now();if(r.running||(r.start=Date.now(),r.deadline=r.start+r.timeSlice),i<r.deadline)return r.running=!0,r.depth++,r.totalDepth++,e((function(e,n){r.depth--,r.totalDepth--,t(e,n)}));r.depth=0,r.running=!1,YX.setImmediate(n)}()}},{key:"forEach",value:function(e,t,r){var n,i,a=this,o=0;if(Array.isArray(e))i=e.length,n=function(){return o!==i&&(n.value=e[o++],n.key=o,!0)};else{var s=Object.keys(e);i=s.length,n=function(){return o!==i&&(n.key=s[o++],n.value=e[n.key],!0)}}!function e(i){return i?r(i):n()?a.doWork((function(){return t(n.value,n.key,e)})):void r()}()}},{key:"waterfall",value:function(e,t){var r=this;r.forEach(e,(function(e,t,n){return r.doWork(e,n)}),t)}},{key:"whilst",value:function(e,t,r){var n=this;!function i(a){return a?r(a):e()?void n.doWork(t,i):r()}()}}]),e}()),m$=function(e){c(r,e);var t=m(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).name="URGNA2012",n.hashAlgorithm="sha1",n}return s(r,[{key:"modifyFirstDegreeComponent",value:function(e,t,r){return"BlankNode"!==t.termType||((t=YX.clone(t)).value="name"===r?"_:g":t.value===e?"_:a":"_:z"),t}},{key:"getRelatedPredicate",value:function(e){return e.predicate.value}},{key:"createHashToRelated",value:function(e,t,r){var n=this,i={},a=n.blankNodeInfo[e].quads;n.forEach(a,(function(r,a,o){var s,u;if("BlankNode"===r.subject.termType&&r.subject.value!==e)u=r.subject.value,s="p";else{if("BlankNode"!==r.object.termType||r.object.value===e)return o();u=r.object.value,s="r"}n.hashRelatedBlankNode(u,r,t,s,(function(e,t){if(e)return o(e);t in i?i[t].push(u):i[t]=[u],o()}))}),(function(e){return r(e,i)}))}}]),r}(b$),w$={subject:"s",object:"o",graph:"g"},x$=function(){function e(){a(this,e),this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new t$("_:c14n"),this.hashAlgorithm="sha256",this.quads}return s(e,[{key:"main",value:function(e){var t=this;t.quads=e;var r,n={},i=C(e);try{var a=function(){var e=r.value;t.forEachComponent(e,(function(r){if("BlankNode"===r.termType){var i=r.value;i in t.blankNodeInfo?t.blankNodeInfo[i].quads.push(e):(n[i]=!0,t.blankNodeInfo[i]={quads:[e]})}}))};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}for(var o=!0;o;){for(var s in o=!1,t.hashToBlankNodes={},n){var u=t.hashFirstDegreeQuads(s);u in t.hashToBlankNodes?t.hashToBlankNodes[u].push(s):t.hashToBlankNodes[u]=[s]}for(var c=Object.keys(t.hashToBlankNodes).sort(),l=0;l<c.length;++l){var f=c[l],h=t.hashToBlankNodes[f];if(!(h.length>1)){var d=h[0];t.canonicalIssuer.getId(d),delete n[d],delete t.hashToBlankNodes[f],o=!0}}}for(var p=Object.keys(t.hashToBlankNodes).sort(),v=0;v<p.length;++v){for(var y=[],g=p[v],b=t.hashToBlankNodes[g],m=0;m<b.length;++m){var w=b[m];if(!t.canonicalIssuer.hasId(w)){var x=new t$("_:b");x.getId(w);var _=t.hashNDegreeQuads(w,x);y.push(_)}}y.sort((function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}));for(var k=0;k<y.length;++k){var S=y[k];for(var E in S.issuer.existing)t.canonicalIssuer.getId(E)}}for(var I=[],A=0;A<t.quads.length;++A){var T=t.quads[A];t.forEachComponent(T,(function(e){"BlankNode"!==e.termType||e.value.startsWith(t.canonicalIssuer.prefix)||(e.value=t.canonicalIssuer.getId(e.value))})),I.push(f$.serializeQuad(T))}return I.sort(),I.join("")}},{key:"hashFirstDegreeQuads",value:function(e){var t=this,r=t.blankNodeInfo[e];if("hash"in r)return r.hash;for(var n=[],i=r.quads,a=function(r){var a=i[r],o={predicate:a.predicate};t.forEachComponent(a,(function(r,n){o[n]=t.modifyFirstDegreeComponent(e,r,n)})),n.push(f$.serializeQuad(o))},o=0;o<i.length;++o)a(o);n.sort();for(var s=new o$(t.hashAlgorithm),u=0;u<n.length;++u)s.update(n[u]);return r.hash=s.digest(),r.hash}},{key:"hashRelatedBlankNode",value:function(e,t,r,n){var i,a=this;i=a.canonicalIssuer.hasId(e)?a.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):a.hashFirstDegreeQuads(e);var o=new o$(a.hashAlgorithm);return o.update(n),"g"!==n&&o.update(a.getRelatedPredicate(t)),o.update(i),o.digest()}},{key:"hashNDegreeQuads",value:function(e,t){for(var r=this,n=new o$(r.hashAlgorithm),i=r.createHashToRelated(e,t),a=Object.keys(i).sort(),o=0;o<a.length;++o){var s=a[o];n.update(s);for(var u=void 0,c="",l=new s$(i[s]);l.hasNext();){for(var f=l.next(),h=t.clone(),d="",p=[],v=!1,y=0;y<f.length;++y){var g=f[y];if(r.canonicalIssuer.hasId(g)?d+=r.canonicalIssuer.getId(g):(h.hasId(g)||p.push(g),d+=h.getId(g)),0!==c.length&&d>c){v=!0;break}}if(!v){for(var b=0;b<p.length;++b){var m=p[b],w=r.hashNDegreeQuads(m,h);if(d+=h.getId(m),d+="<"+w.hash+">",h=w.issuer,0!==c.length&&d>c){v=!0;break}}v||(0===c.length||d<c)&&(c=d,u=h)}}n.update(c),t=u}return{hash:n.digest(),issuer:t}}},{key:"modifyFirstDegreeComponent",value:function(e,t){return"BlankNode"!==t.termType||((t=YX.clone(t)).value=t.value===e?"_:a":"_:z"),t}},{key:"getRelatedPredicate",value:function(e){return"<"+e.predicate.value+">"}},{key:"createHashToRelated",value:function(e,t){for(var r={},n=this.blankNodeInfo[e].quads,i=0;i<n.length;++i){var a=n[i];for(var o in a){var s=a[o];if("predicate"!==o&&"BlankNode"===s.termType&&s.value!==e){var u=s.value,c=w$[o],l=this.hashRelatedBlankNode(u,a,t,c);l in r?r[l].push(u):r[l]=[u]}}}return r}},{key:"forEachComponent",value:function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)}}]),e}(),_$=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).name="URGNA2012",e.hashAlgorithm="sha1",e}return s(r,[{key:"modifyFirstDegreeComponent",value:function(e,t,r){return"BlankNode"!==t.termType||((t=YX.clone(t)).value="name"===r?"_:g":t.value===e?"_:a":"_:z"),t}},{key:"getRelatedPredicate",value:function(e){return e.predicate.value}},{key:"createHashToRelated",value:function(e,t){for(var r={},n=this.blankNodeInfo[e].quads,i=0;i<n.length;++i){var a=n[i],o=void 0,s=void 0;if("BlankNode"===a.subject.termType&&a.subject.value!==e)s=a.subject.value,o="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;s=a.object.value,o="r"}var u=this.hashRelatedBlankNode(s,a,t,o);u in r?r[u].push(s):r[u]=[s]}return r}}]),r}(x$),k$=tq(Object.freeze({__proto__:null,default:{}}));try{y$=k$}catch(IK){}var S$={},E$=S$;S$.NQuads=f$,S$.IdentifierIssuer=t$,S$._rdfCanonizeNative=function(e){return e&&(y$=e),y$},S$.canonize=YX.callbackify(function(){var e=i(Wt.mark((function e(t,r){var n,i;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new Promise((function(e,t){n=function(r,n){if(r)return t(r);e(n)}})),Array.isArray(t)||(t=S$.NQuads.legacyDatasetToQuads(t)),!r.useNative){e.next=7;break}if(y$){e.next=4;break}throw new Error("rdf-canonize-native not available");case 4:y$.canonize(t,r,n),e.next=14;break;case 7:if("URDNA2015"!==r.algorithm){e.next=11;break}new b$(r).main(t,n),e.next=14;break;case 11:if("URGNA2012"===r.algorithm){e.next=13;break}throw"algorithm"in r?new Error("Invalid RDF Dataset Canonicalization algorithm: "+r.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");case 13:new m$(r).main(t,n);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),S$.canonizeSync=function(e,t){if(Array.isArray(e)||(e=S$.NQuads.legacyDatasetToQuads(e)),t.useNative){if(y$)return y$.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new x$(t).main(e);if("URGNA2012"===t.algorithm)return new _$(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)};var I$={},A$=I$;I$.isArray=Array.isArray,I$.isBoolean=function(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)},I$.isDouble=function(e){return I$.isNumber(e)&&-1!==String(e).indexOf(".")},I$.isEmptyObject=function(e){return I$.isObject(e)&&0===Object.keys(e).length},I$.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},I$.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},I$.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},I$.isString=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},I$.isUndefined=function(e){return void 0===e};var T$={},P$=T$;T$.isSubject=function(e){return!(!A$.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e))},T$.isSubjectReference=function(e){return A$.isObject(e)&&1===Object.keys(e).length&&"@id"in e},T$.isValue=function(e){return A$.isObject(e)&&"@value"in e},T$.isList=function(e){return A$.isObject(e)&&"@list"in e},T$.isGraph=function(e){return A$.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((function(e){return"@id"!==e&&"@index"!==e})).length},T$.isSimpleGraph=function(e){return T$.isGraph(e)&&!("@id"in e)},T$.isBlankNode=function(e){return!!A$.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))};var O$=function(e){c(r,e);var t=m(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An unspecified JSON-LD error occurred.",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsonld.Error",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,r),(e=t.call(this,n)).name=i,e.message=n,e.details=o,e}return s(r)}(p(Error)),C$=E$.IdentifierIssuer,M$=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,N$=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,R$=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,L$="application/ld+json, application/json",j$={},D$=j$;j$.IdentifierIssuer=C$;var B$="function"==typeof setImmediate&&setImmediate,U$=B$?function(e){return B$(e)}:function(e){return setTimeout(e,0)};function F$(e,t,r){j$.nextTick((function(){return e(t,r)}))}function z$(e,t){if(A$.isArray(t))for(var r=0;r<t.length;++r)t[r]=z$(e,t[r]);else if(P$.isList(t))t["@list"]=z$(e,t["@list"]);else if(A$.isObject(t)){P$.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=n[i];"@id"!==a&&(t[a]=z$(e,t[a]))}}return t}j$.nextTick="object"==r(OW)?gW:U$,j$.setImmediate=B$?U$:j$.nextTick,j$.clone=function(e){if(e&&"object"==r(e)){var t;if(A$.isArray(e)){t=[];for(var n=0;n<e.length;++n)t[n]=j$.clone(e[n])}else if(e instanceof Map){t=new Map;var i,a=C(e);try{for(a.s();!(i=a.n()).done;){var o=k(i.value,2),s=o[0],u=o[1];t.set(s,j$.clone(u))}}catch(e){a.e(e)}finally{a.f()}}else if(e instanceof Set){t=new Set;var c,l=C(e);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.add(j$.clone(f))}}catch(e){l.e(e)}finally{l.f()}}else if(A$.isObject(e))for(var h in t={},e)t[h]=j$.clone(e[h]);else t=e.toString();return t}return e},j$.asArray=function(e){return Array.isArray(e)?e:[e]},j$.buildHeaders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(e).some((function(e){return"accept"===e.toLowerCase()})))throw new RangeError('Accept header may not be specified; only "'+L$+'" is supported.');return Object.assign({Accept:L$},e)},j$.parseLinkHeader=function(e){for(var t={},r=e.match(M$),n=0;n<r.length;++n){var i=r[n].match(N$);if(i){for(var a={target:i[1]},o=i[2];i=R$.exec(o);)a[i[1]]=void 0===i[2]?i[3]:i[2];var s=a.rel||"";Array.isArray(t[s])?t[s].push(a):t.hasOwnProperty(s)?t[s]=[t[s],a]:t[s]=a}}return t},j$.validateTypeValue=function(e){if(!A$.isString(e)&&!A$.isEmptyObject(e)){var t=!1;if(A$.isArray(e)){t=!0;for(var r=0;r<e.length;++r)if(!A$.isString(e[r])){t=!1;break}}if(!t)throw new O$('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},j$.hasProperty=function(e,t){if(e.hasOwnProperty(t)){var r=e[t];return!A$.isArray(r)||r.length>0}return!1},j$.hasValue=function(e,t,r){if(j$.hasProperty(e,t)){var n=e[t],i=P$.isList(n);if(A$.isArray(n)||i){i&&(n=n["@list"]);for(var a=0;a<n.length;++a)if(j$.compareValues(r,n[a]))return!0}else if(!A$.isArray(r))return j$.compareValues(r,n)}return!1},j$.addValue=function(e,t,r,n){if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),n.valueIsArray)e[t]=r;else if(A$.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]);for(var i=0;i<r.length;++i)j$.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){var a=!n.allowDuplicate&&j$.hasValue(e,t,r);A$.isArray(e[t])||a&&!n.propertyIsArray||(e[t]=[e[t]]),a||e[t].push(r)}else e[t]=n.propertyIsArray?[r]:r},j$.getValues=function(e,t){return[].concat(e[t]||[])},j$.removeProperty=function(e,t){delete e[t]},j$.removeValue=function(e,t,r,n){"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);var i=j$.getValues(e,t).filter((function(e){return!j$.compareValues(e,r)}));0===i.length?j$.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},j$.relabelBlankNodes=function(e,t){return z$((t=t||{}).issuer||new C$("_:b"),e)},j$.compareValues=function(e,t){return e===t||!(!P$.isValue(e)||!P$.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(A$.isObject(e)&&"@id"in e&&A$.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]},j$.compareShortestLeast=function(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},j$.normalizeDocumentLoader=function(e){return e.length<2?j$.callbackify(e):function(){var t=i(Wt.mark((function t(r){var n,i=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[1],t.abrupt("return",new Promise((function(t,i){try{e(r,(function(e,r){if("function"==typeof n)return F$(n,e,r);e?i(e):t(r)}))}catch(e){if("function"==typeof n)return F$(n,e);i(e)}})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j$.callbackify=function(e){return i(Wt.mark((function t(){var r,n,i,a,o,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=s.length,n=new Array(r),i=0;i<r;i++)n[i]=s[i];return"function"==typeof(a=n[n.length-1])&&n.pop(),t.prev=3,t.next=6,e.apply(null,n);case 6:o=t.sent,t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(3),"function"!=typeof a){t.next=13;break}return t.abrupt("return",F$(a,t.t0));case 13:throw t.t0;case 14:return t.abrupt("return","function"==typeof a?F$(a,null,o):o);case 15:case"end":return t.stop()}}),t,null,[[3,9]])})))};var H$,V$=E$.NQuads,K$="http://www.w3.org/1999/02/22-rdf-syntax-ns#",q$="http://www.w3.org/2001/XMLSchema#",W$={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:K$,RDF_LIST:K$+"List",RDF_FIRST:K$+"first",RDF_REST:K$+"rest",RDF_NIL:K$+"nil",RDF_TYPE:K$+"type",RDF_PLAIN_LITERAL:K$+"PlainLiteral",RDF_XML_LITERAL:K$+"XMLLiteral",RDF_JSON_LITERAL:K$+"JSON",RDF_OBJECT:K$+"object",RDF_LANGSTRING:K$+"langString",XSD:q$,XSD_BOOLEAN:q$+"boolean",XSD_DOUBLE:q$+"double",XSD_INTEGER:q$+"integer",XSD_STRING:q$+"string"},G$=W$.RDF_LANGSTRING,J$=W$.RDF_PLAIN_LITERAL,X$=W$.RDF_OBJECT,$$=W$.RDF_XML_LITERAL,Y$=W$.XSD_STRING;H$="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var Z$=D$.clone,Q$={},eY=Q$;Q$.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},Q$.parse=function(e,t){for(var r={},n=Q$.parsers[t||"full"],i=n.regex.exec(e),a=n.keys.length;a--;)r[n.keys[a]]=void 0===i[a]?null:i[a];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=Q$.removeDotSegments(r.path),r},Q$.prependBase=function(e,t){if(null===e)return t;if(-1!==t.indexOf(":"))return t;A$.isString(e)&&(e=Q$.parse(e||""));var r=Q$.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{var i=e.path;(i=i.substr(0,i.lastIndexOf("/")+1)).length>0&&"/"!==i.substr(-1)&&(i+="/"),i+=r.path,n.path=i}n.query=r.query}""!==r.path&&(n.path=Q$.removeDotSegments(n.path));var a=n.protocol;return null!==n.authority&&(a+="//"+n.authority),a+=n.path,null!==n.query&&(a+="?"+n.query),null!==r.fragment&&(a+="#"+r.fragment),""===a&&(a="./"),a},Q$.removeBase=function(e,t){if(null===e)return t;A$.isString(e)&&(e=Q$.parse(e||""));var r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;for(var n=Q$.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),a=n.normalizedPath.split("/"),o=n.fragment||n.query?0:1;i.length>0&&a.length>o&&i[0]===a[0];)i.shift(),a.shift();var s="";if(i.length>0){i.pop();for(var u=0;u<i.length;++u)s+="../"}return s+=a.join("/"),null!==n.query&&(s+="?"+n.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s},Q$.removeDotSegments=function(e){if(0===e.length)return"";for(var t=e.split("/"),r=[];t.length>0;){var n=t.shift(),i=0===t.length;"."!==n?".."!==n?r.push(n):(r.pop(),i&&r.push("")):i&&r.push("")}return r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};var tY=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;Q$.isAbsolute=function(e){return A$.isString(e)&&tY.test(e)},Q$.isRelative=function(e){return A$.isString(e)};var rY=A$.isArray,nY=A$.isObject,iY=A$.isString,aY=A$.isUndefined,oY=eY.isAbsolute,sY=eY.isRelative,uY=eY.prependBase,cY=eY.parse,lY=D$.asArray,fY=D$.compareShortestLeast,hY=new Map,dY={},pY=dY;function vY(e,t,r,n,i,a){if(null===t||!iY(t)||dY.isKeyword(t))return t;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&dY.createTermDefinition(e,n,t,i,a),e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext),(r=r||{}).vocab){var o=e.mappings.get(t);if(null===o)return null;if(o)return o["@id"]}var s=t.indexOf(":");if(-1!==s){var u=t.substr(0,s),c=t.substr(s+1);return"_"===u||0===c.indexOf("//")?t:(n&&n.hasOwnProperty(u)&&dY.createTermDefinition(e,n,u,i,a),e.mappings.has(u)?e.mappings.get(u)["@id"]+c:t)}return r.vocab&&"@vocab"in e?e["@vocab"]+t:r.base?uY(e["@base"],t):t}function yY(e,t,r,n){if(rY(e)){var i,a=C(e);try{for(a.s();!(i=a.n()).done;){yY(i.value,t,r,n)}}catch(e){a.e(e)}finally{a.f()}}else if(nY(e))for(var o in e)if("@context"===o){var s=e[o];if(rY(s))for(var u=s.length,c=0;c<u;++c){var l=s[c];if(iY(l)){var f=uY(n,l),h=t.get(f);r?rY(h)?(Array.prototype.splice.apply(s,[c,1].concat(h)),c+=h.length-1,u=s.length):!1!==h&&(s[c]=h):void 0===h&&t.set(f,!1)}else for(var d in l)nY(l[d])&&yY(l[d],t,r,n)}else if(iY(s)){var p=uY(n,s),v=t.get(p);r?!1!==v&&(e[o]=v):void 0===v&&t.set(p,!1)}else for(var y in s)nY(s[y])&&yY(s[y],t,r,n)}else yY(e[o],t,r,n)}function gY(e,t){if(!e||"object"!=r(e)||!t||"object"!=r(t))return e===t;var n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!gY(e[i],t[i]))return!1;return!0}var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s in e){var u=e[s],c=t[s];if("@container"===s&&Array.isArray(u)&&Array.isArray(c)&&(u=u.slice().sort(),c=c.slice().sort()),!gY(u,c))return!1}return!0}dY.cache=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;a(this,e),this.order=[],this.cache=new Map,this.size=t}return s(e,[{key:"get",value:function(e,t){var r=this.cache.get(e);if(r){var n=JSON.stringify(t);return r.get(n)||null}return null}},{key:"set",value:function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();this.cache.get(n.activeCtx).delete(n.localCtx)}var i=JSON.stringify(t);this.order.push({activeCtx:e,localCtx:i});var a=this.cache.get(e);a||(a=new Map,this.cache.set(e,a)),a.set(i,Z$(r))}}]),e}()),dY.process=function(e){var t=e.activeCtx,r=e.localCtx,n=e.options,i=e.isPropertyTermScopedContext,a=void 0!==i&&i,o=e.isTypeScopedContext,s=void 0!==o&&o;nY(r)&&"@context"in r&&rY(r["@context"])&&(r=r["@context"]);var u=lY(r);if(0===u.length)return t;var c=t.previousContext||t;if(a&&t.previousContext)return(t=t.clone()).isPropertyTermScoped=!0,t.previousContext=dY.process({activeCtx:t.previousContext,localCtx:u,options:n,isPropertyTermScopedContext:a}),t;for(var l=t,f=0;f<u.length;++f){var h=u[f];if(t=l,null!==h){if(dY.cache){var d=dY.cache.get(t,h);if(d){l=t=d;continue}}if(nY(h)&&"@context"in h&&(h=h["@context"]),!nY(h))throw new O$("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});l=l.clone();var p=new Map;if("@version"in h){if(1.1!==h["@version"])throw new O$("Unsupported JSON-LD version: "+h["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:h});if(t.processingMode&&"json-ld-1.0"===t.processingMode)throw new O$("@version: "+h["@version"]+" not compatible with "+t.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:h});l.processingMode="json-ld-1.1",l["@version"]=h["@version"],p.set("@version",!0)}if(l.processingMode=l.processingMode||t.processingMode||"json-ld-1.0","@base"in h){var v=h["@base"];if(null===v);else if(oY(v))v=cY(v);else{if(!sY(v))throw new O$('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});v=cY(uY(t["@base"].href,v))}l["@base"]=v,p.set("@base",!0)}if("@vocab"in h){var y=h["@vocab"];if(null===y)delete l["@vocab"];else{if(!iY(y))throw new O$('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!oY(y))throw new O$('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});l["@vocab"]=y}p.set("@vocab",!0)}if("@language"in h){var g=h["@language"];if(null===g)delete l["@language"];else{if(!iY(g))throw new O$('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});l["@language"]=g.toLowerCase()}p.set("@language",!0)}for(var b in p.set("@protected",h["@protected"]||!1),h)dY.createTermDefinition(l,h,b,p,n,a);s&&!l.previousContext&&(l.previousContext=c.clone()),dY.cache&&dY.cache.set(t,h,l)}else{if(!a&&0!==Object.keys(t.protected).length){var m=n&&n.protectedMode||"error";if("error"===m)throw new O$("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===m){console.warn("WARNING: invalid context nullification");var w=t;l=t=dY.getInitialContext(n).clone();for(var x=0,_=Object.entries(w.protected);x<_.length;x++){var S=k(_[x],2),E=S[0];S[1]&&(t.mappings[E]=D$.clone(w.mappings[E]))}t.protected=D$.clone(w.protected),dY.cache&&dY.cache.set(w,h,l);continue}throw new O$("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:r,protectedMode:m})}l=t=dY.getInitialContext(n).clone(),s&&(l.previousContext=c.clone())}}return l},dY.createTermDefinition=function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n.has(r)){if(n.get(r))return;throw new O$("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n.set(r,!1),dY.isKeyword(r))throw new O$("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new O$("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o,s=e.mappings.get(r);if(e.mappings.has(r)&&e.mappings.delete(r),t.hasOwnProperty(r)&&(o=t[r]),null===o||nY(o)&&null===o["@id"])return e.mappings.set(r,null),void n.set(r,!0);var u=!1;if(iY(o)&&(u=!0,o={"@id":o}),!nY(o))throw new O$("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var c={};e.mappings.set(r,c),c.reverse=!1;var l=["@container","@id","@language","@reverse","@type"];for(var f in dY.processingMode(e,1.1)&&l.push("@context","@nest","@prefix","@protected"),o)if(!l.includes(f))throw new O$("Invalid JSON-LD syntax; a term definition must not contain "+f,"jsonld.SyntaxError",{code:"invalid term definition",context:t});var h=r.indexOf(":");if(c._termHasColon=-1!==h,"@reverse"in o){if("@id"in o)throw new O$("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in o)throw new O$("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var d=o["@reverse"];if(!iY(d))throw new O$("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var p=vY(e,d,{vocab:!0,base:!1},t,n,i);if(!oY(p))throw new O$("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=p,c.reverse=!0}else if("@id"in o){var v=o["@id"];if(!iY(v))throw new O$("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(v!==r){if(v=vY(e,v,{vocab:!0,base:!1},t,n,i),!oY(v)&&!dY.isKeyword(v))throw new O$("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=v,c._prefix=!c._termHasColon&&v.match(/[:\/\?#\[\]@]$/)&&(u||dY.processingMode(e,1))}}if(!("@id"in c))if(c._termHasColon){var y=r.substr(0,h);if(t.hasOwnProperty(y)&&dY.createTermDefinition(e,t,y,n,i),e.mappings.has(y)){var g=r.substr(h+1);c["@id"]=e.mappings.get(y)["@id"]+g}else c["@id"]=r}else{if(!("@vocab"in e))throw new O$("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((!0===o["@protected"]||!0===n.get("@protected")&&!1!==o["@protected"])&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in o){var b=o["@type"];if(!iY(b))throw new O$("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==b&&"@vocab"!==b&&"@json"!==b){if(b=vY(e,b,{vocab:!0,base:!1},t,n,i),!oY(b))throw new O$("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===b.indexOf("_:"))throw new O$("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=b}if("@container"in o){var m=iY(o["@container"])?[o["@container"]]:o["@container"]||[],w=["@list","@set","@index","@language"],x=!0,_=m.includes("@set");if(dY.processingMode(e,1.1))if(w.push("@graph","@id","@type"),m.includes("@list")){if(1!==m.length)throw new O$("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(m.includes("@graph")){if(m.some((function(e){return"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e})))throw new O$("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else x&=m.length<=(_?2:1);else x&=!rY(o["@container"]),x&=m.length<=1;if(x&=m.every((function(e){return w.includes(e)})),!(x&=!(_&&m.includes("@list"))))throw new O$("Invalid JSON-LD syntax; @context @container value must be one of the following: "+w.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!m.every((function(e){return["@index","@set"].includes(e)})))throw new O$("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=m}if("@context"in o&&(c["@context"]=o["@context"]),"@language"in o&&!("@type"in o)){var k=o["@language"];if(null!==k&&!iY(k))throw new O$("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==k&&(k=k.toLowerCase()),c["@language"]=k}if("@prefix"in o){if(c._termHasColon)throw new O$("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof o["@prefix"])throw new O$("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});c._prefix=!0===o["@prefix"]}if("@nest"in o){var S=o["@nest"];if(!iY(S)||"@nest"!==S&&0===S.indexOf("@"))throw new O$("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=S}// disallow aliasing @context and @preserve
var E=c["@id"];if("@context"===E||"@preserve"===E)throw new O$("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(s&&s.protected&&!a&&(e.protected[r]=!0,c.protected=!0,!gY(s,c))){var I=i&&i.protectedMode||"error";if("error"===I)throw new O$("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r});if("warn"===I)return void console.warn("WARNING: protected term redefinition",{term:r});throw new O$("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:r,protectedMode:I})}},dY.expandIri=function(e,t,r,n){return vY(e,t,r,void 0,void 0,n)},dY.getInitialContext=function(e){var t=cY(e.base||""),r=JSON.stringify({base:t,processingMode:e.processingMode}),n=hY.get(r);if(n)return n;var i={"@base":t,processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){var e=this;if(e.inverse)return e.inverse;var t,r=e.inverse={},n=e.fastCurieMap={},i={},s=e["@language"]||"@none",u=e.mappings,c=C(E(u.keys()).sort(fY));try{for(c.s();!(t=c.n()).done;){var l=t.value,f=u.get(l);if(null!==f){var h=f["@container"]||"@none";h=[].concat(h).sort().join("");var d,p=C(lY(f["@id"]));try{for(p.s();!(d=p.n()).done;){var v=d.value,y=r[v],g=dY.isKeyword(v);if(y)g||f._termHasColon||i[v].push(l);else if(r[v]=y={},!g&&!f._termHasColon){i[v]=[l];var b={iri:v,terms:i[v]};v[0]in n?n[v[0]].push(b):n[v[0]]=[b]}if(y[h]||(y[h]={"@language":{},"@type":{},"@any":{}}),o(l,(y=y[h])["@any"],"@none"),f.reverse)o(l,y["@type"],"@reverse");else if("@type"in f)o(l,y["@type"],f["@type"]);else if("@language"in f){var m=f["@language"]||"@null";o(l,y["@language"],m)}else o(l,y["@language"],s),o(l,y["@type"],"@none"),o(l,y["@language"],"@none")}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var w in n)a(n,w,1);return r},clone:function(){var e={};return e["@base"]=this["@base"],e.mappings=D$.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=D$.clone(this.protected),this.previousContext&&(e.isPropertyTermScoped=this.previousContext.isPropertyTermScoped,e.previousContext=this.previousContext.clone()),e.revertTypeScopedContext=this.revertTypeScopedContext,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertTypeScopedContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===hY.size&&hY.clear(),hY.set(r,i),i;function a(e,t,r){var n,i,o,s=e[t],u=e[t]={},c=C(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;(i=r>=(n=l.iri).length?"":n[r])in u?u[i].push(l):u[i]=[l]}}catch(e){c.e(e)}finally{c.f()}for(var f in u)""!==f&&a(u,f,r+1)}function o(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},dY.getContextValue=function(e,t,r){if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){var n=e.mappings.get(t);if(aY(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&e.hasOwnProperty(r)?e[r]:"@context"!==r?null:void 0},dY.getAllContexts=function(){var e=i(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=i(Wt.mark((function e(t,r){var n,a,o;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){return o=i(Wt.mark((function e(t,n,o){var s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.size>10)){e.next=2;break}throw new O$("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});case 2:if(s=new Map,yY(t,s,!1,r.base),0!==s.size){e.next=5;break}return e.abrupt("return");case 5:return u=E(s.keys()).filter((function(e){return!1===s.get(e)})),e.abrupt("return",Promise.all(u.map(function(){var e=i(Wt.mark((function e(i){var u,c,l;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.has(i)){e.next=2;break}throw new O$("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:i});case 2:return(u=new Set(n)).add(i),e.prev=4,e.next=7,o(i);case 7:c=e.sent,l=c.document||null,iY(l)&&(l=JSON.parse(l)),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(4),new O$("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:i,cause:e.t0});case 15:if(nY(l)){e.next=17;break}throw new O$("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:i});case 17:return l="@context"in l?{"@context":l["@context"]}:{"@context":{}},c.contextUrl&&(rY(l["@context"])||(l["@context"]=[l["@context"]]),l["@context"].push(c.contextUrl)),e.next=21,a(l,u,o);case 21:s.set(i,l["@context"]),yY(t,s,!0,r.base);case 23:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}())));case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e,t,r){return o.apply(this,arguments)},n=D$.normalizeDocumentLoader(r.documentLoader),e.next=5,a(t,new Set,n);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),dY.processingMode=function(e,t){return t.toString()>="1.1"?e.processingMode&&e.processingMode>="json-ld-"+t.toString():!e.processingMode||"json-ld-1.0"===e.processingMode},dY.isKeyword=function(e){if(!iY(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};var bY=A$.isArray,mY=A$.isObject,wY=A$.isEmptyObject,xY=A$.isString,_Y=A$.isUndefined,kY=P$.isList,SY=P$.isValue,EY=P$.isGraph,IY=pY.expandIri,AY=pY.getContextValue,TY=pY.isKeyword,PY=pY.process,OY=pY.processingMode,CY=eY.isAbsolute,MY=D$.addValue,NY=D$.asArray,RY=D$.getValues,LY=D$.validateTypeValue,jY={},DY=jY;function BY(e){var t,r=e.activeCtx,n=e.activeProperty,i=e.expandedActiveProperty,a=e.element,o=e.expandedParent,s=e.options,u=void 0===s?{}:s,c=e.insideList,l=e.expansionMap,f=[],h=C(Object.keys(a).sort());try{for(h.s();!(t=h.n()).done;){var d=t.value,p=void 0,v=a[d];if("@context"!==d){var y=IY(r,d,{vocab:!0},u);if(null!==y&&(CY(y)||TY(y))||void 0!==(y=l({unmappedProperty:d,activeCtx:r,activeProperty:n,parent:a,options:u,insideList:c,value:v,expandedParent:o}))){if(TY(y)){if("@reverse"===i)throw new O$("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:v});if(y in o)throw new O$("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:y})}if("@id"!==y)if("@type"!==y){if("@graph"===y&&!mY(v)&&!bY(v))throw new O$('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:v});if("@value"!==y)if("@language"!==y)if("@index"!==y)if("@reverse"!==y)if("@nest"!==y){var g=r,b=AY(r,d,"@context");_Y(b)||(g=PY({activeCtx:r,localCtx:b,isPropertyTermScopedContext:!0,options:u}));var m=AY(g,d,"@container")||[];if(m.includes("@language")&&mY(v))p=UY(g,v,u);else if(m.includes("@index")&&mY(v)){var w=m.includes("@graph");p=FY({activeCtx:g,options:u,activeProperty:d,value:v,expansionMap:l,asGraph:w,indexKey:"@index"})}else if(m.includes("@id")&&mY(v)){var x=m.includes("@graph");p=FY({activeCtx:g,options:u,activeProperty:d,value:v,expansionMap:l,asGraph:x,indexKey:"@id"})}else if(m.includes("@type")&&mY(v))p=FY({activeCtx:g.revertTypeScopedContext(),options:u,activeProperty:d,value:v,expansionMap:l,asGraph:!1,indexKey:"@type"});else{var _="@list"===y;if(_||"@set"===y){var k=n;_&&"@graph"===i&&(k=null),p=jY.expand({activeCtx:g,activeProperty:k,element:v,options:u,insideList:_,expansionMap:l})}else p="@json"===AY(r,d,"@type")?{"@type":"@json","@value":v}:jY.expand({activeCtx:g,activeProperty:d,element:v,options:u,insideList:!1,expansionMap:l})}if(null!==p||"@value"===y||void 0!==(p=l({unmappedValue:v,expandedProperty:y,activeCtx:g,activeProperty:n,parent:a,options:u,insideList:c,key:d,expandedParent:o})))if("@list"!==y&&!kY(p)&&m.includes("@list")&&(p={"@list":NY(p)}),m.includes("@graph")&&!m.some((function(e){return"@id"===e||"@index"===e}))&&(p=NY(p).map((function(e){return EY(e)?e:{"@graph":NY(e)}}))),g.mappings.has(d)&&g.mappings.get(d).reverse){var S=o["@reverse"]=o["@reverse"]||{};p=NY(p);for(var E=0;E<p.length;++E){var I=p[E];if(SY(I)||kY(I))throw new O$('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});MY(S,y,I,{propertyIsArray:!0})}}else{var A=!["@index","@id","@type","@value","@language"].includes(y);MY(o,y,p,{propertyIsArray:A})}}else f.push(d);else{if(!mY(v))throw new O$('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:v});if("@reverse"in(p=jY.expand({activeCtx:r,activeProperty:"@reverse",element:v,options:u,expansionMap:l})))for(var T in p["@reverse"])MY(o,T,p["@reverse"][T],{propertyIsArray:!0});var P=o["@reverse"]||null;for(var O in p)if("@reverse"!==O){null===P&&(P=o["@reverse"]={}),MY(P,O,[],{propertyIsArray:!0});for(var M=p[O],N=0;N<M.length;++N){var R=M[N];if(SY(R)||kY(R))throw new O$('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});MY(P,O,R,{propertyIsArray:!0})}}}else{if(!xY(v))throw new O$('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:v});MY(o,"@index",v)}else{if(null===v)continue;if(!xY(v)&&!u.isFrame)throw new O$('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:v});v=NY(v).map((function(e){return xY(e)?e.toLowerCase():e})),MY(o,"@language",v,{propertyIsArray:u.isFrame})}else MY(o,"@value",v,{propertyIsArray:u.isFrame})}else LY(v),MY(o,"@type",NY(v).map((function(e){return xY(e)?IY(r.previousContext||r,e,{base:!0,vocab:!0},u):e})),{propertyIsArray:u.isFrame});else{if(!xY(v)){if(!u.isFrame)throw new O$('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(mY(v)){if(!wY(v))throw new O$('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}else{if(!bY(v))throw new O$('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(!v.every((function(e){return xY(e)})))throw new O$('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}}MY(o,"@id",NY(v).map((function(e){return xY(e)?IY(r,e,{base:!0},u):e})),{propertyIsArray:u.isFrame})}}}}}catch(e){h.e(e)}finally{h.f()}if("@value"in a){var L=a["@value"];if("@json"===a["@type"]&&OY(r,1.1));else if((mY(L)||bY(L))&&!u.isFrame)throw new O$('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:L})}for(var j=0,D=f;j<D.length;j++){var B,U=D[j],F=C(bY(a[U])?a[U]:[a[U]]);try{for(F.s();!(B=F.n()).done;){var z=B.value;if(!mY(z)||Object.keys(z).some((function(e){return"@value"===IY(r,e,{vocab:!0},u)})))throw new O$("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:z});BY({activeCtx:r,activeProperty:n,expandedActiveProperty:i,element:z,expandedParent:o,options:u,insideList:c,expansionMap:l})}}catch(e){F.e(e)}finally{F.f()}}}function UY(e,t,r){var n,i=[],a=C(Object.keys(t).sort());try{for(a.s();!(n=a.n()).done;){var o=n.value,s=IY(e,o,{vocab:!0},r),u=t[o];bY(u)||(u=[u]);var c,l=C(u);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(null!==f){if(!xY(f))throw new O$("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});var h={"@value":f};"@none"!==s&&(h["@language"]=o.toLowerCase()),i.push(h)}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){a.e(e)}finally{a.f()}return i}function FY(e){var t,r=e.activeCtx,n=e.options,i=e.activeProperty,a=e.value,o=e.expansionMap,s=e.asGraph,u=e.indexKey,c=[],l="@type"===u,f=C(Object.keys(a).sort());try{for(f.s();!(t=f.n()).done;){var h=t.value;if(l){var d=AY(r,h,"@context");_Y(d)||(r=PY({activeCtx:r,localCtx:d,isTypeScopedContext:!0,options:n}))}var p=a[h];bY(p)||(p=[p]);var v=IY(r,h,{vocab:!0},n);"@id"===u?h=IY(r,h,{base:!0},n):l&&(h=v);var y,g=C(p=jY.expand({activeCtx:r,activeProperty:i,element:p,options:n,insideList:!1,insideIndex:!0,expansionMap:o}));try{for(g.s();!(y=g.n()).done;){var b=y.value;s&&!EY(b)&&(b={"@graph":[b]}),"@type"===u?"@none"===v||(b["@type"]?b["@type"]=[h].concat(b["@type"]):b["@type"]=[h]):"@none"===v||u in b||(b[u]=h),c.push(b)}}catch(e){g.e(e)}finally{g.f()}}}catch(e){f.e(e)}finally{f.f()}return c}jY.expand=function(e){var t=e.activeCtx,n=e.activeProperty,i=void 0===n?null:n,a=e.element,o=e.options,s=void 0===o?{}:o,u=e.insideList,c=void 0!==u&&u,l=e.insideIndex,f=void 0!==l&&l,h=e.typeScopedContext,d=void 0===h?null:h,p=e.expansionMap,v=void 0===p?function(){}:p;if(null==a)return null;if("@default"===i&&(s=Object.assign({},s,{isFrame:!1})),!bY(a)&&!mY(a)){if(!c&&(null===i||"@graph"===IY(t,i,{vocab:!0},s))){var y=v({unmappedValue:a,activeCtx:t,activeProperty:i,options:s,insideList:c});return void 0===y?null:y}return function(e){var t=e.activeCtx,n=e.activeProperty,i=e.value,a=e.options;if(null==i)return null;var o=IY(t,n,{vocab:!0},a);if("@id"===o)return IY(t,i,{base:!0},a);if("@type"===o)return IY(t,i,{vocab:!0,base:!0},a);var s=AY(t,n,"@type");if(("@id"===s||"@graph"===o)&&xY(i))return{"@id":IY(t,i,{base:!0},a)};if("@vocab"===s&&xY(i))return{"@id":IY(t,i,{vocab:!0,base:!0},a)};if(TY(o))return i;var u={};if(s&&!["@id","@vocab"].includes(s))u["@type"]=s;else if(xY(i)){var c=AY(t,n,"@language");null!==c&&(u["@language"]=c)}return["boolean","number","string"].includes(r(i))||(i=i.toString()),u["@value"]=i,u}({activeCtx:t,activeProperty:i,value:a,options:s})}if(bY(a)){var g=[],b=AY(t,i,"@container")||[];c=c||b.includes("@list");for(var m=0;m<a.length;++m){var w=jY.expand({activeCtx:t,activeProperty:i,element:a[m],options:s,expansionMap:v,insideIndex:f,typeScopedContext:d});c&&bY(w)&&(w={"@list":w}),null===w&&void 0===(w=v({unmappedValue:a[m],activeCtx:t,activeProperty:i,parent:a,index:m,options:s,expandedParent:g,insideList:c}))||(bY(w)?g=g.concat(w):g.push(w))}return g}var x=IY(t,i,{vocab:!0},s);d=d||(t.previousContext?t:null);var _=Object.keys(a).sort(),k=!f;if(k&&d&&_.length<=2&&!_.includes("@context")){var S,E=C(_);try{for(E.s();!(S=E.n()).done;){var I=S.value,A=IY(d,I,{vocab:!0},s);if("@value"===A){k=!1,t=d;break}if("@id"===A&&1===_.length){k=!1;break}}}catch(e){E.e(e)}finally{E.f()}}k&&(t=t.revertTypeScopedContext()),"@context"in a&&(t=PY({activeCtx:t,localCtx:a["@context"],options:s}));var T,P=C(_);try{for(P.s();!(T=P.n()).done;){var O=T.value;if("@type"===IY(t,O,{vocab:!0},s)){var M,N=a[O],R=C(Array.isArray(N)?N.length>1?N.slice().sort():N:[N]);try{for(R.s();!(M=R.n()).done;){var L=M.value,j=AY(t.previousContext||t,L,"@context");_Y(j)||(t=PY({activeCtx:t,localCtx:j,options:s,isTypeScopedContext:!0}))}}catch(e){R.e(e)}finally{R.f()}}}}catch(e){P.e(e)}finally{P.f()}var D={};BY({activeCtx:t,activeProperty:i,expandedActiveProperty:x,element:a,expandedParent:D,options:s,insideList:c,typeScopedContext:d,expansionMap:v});var B=(_=Object.keys(D)).length;if("@value"in D){if("@type"in D&&"@language"in D)throw new O$('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:D});var U=B-1;if("@type"in D&&(U-=1),"@index"in D&&(U-=1),"@language"in D&&(U-=1),0!==U)throw new O$('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:D});var F=null===D["@value"]?[]:NY(D["@value"]),z=RY(D,"@type");if(0===F.length){var H=v({unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==H?H:null}else{if(!F.every((function(e){return xY(e)||wY(e)}))&&"@language"in D)throw new O$("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:D});if(OY(t,1.1)&&z.includes("@json")&&1===z.length);else if(!z.every((function(e){return CY(e)&&!(xY(e)&&0===e.indexOf("_:"))||wY(e)})))throw new O$('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:D})}}else if("@type"in D&&!bY(D["@type"]))D["@type"]=[D["@type"]];else if("@set"in D||"@list"in D){if(B>1&&(2!==B||!("@index"in D)))throw new O$('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:D});"@set"in D&&(D=D["@set"],B=(_=Object.keys(D)).length)}else if(1===B&&"@language"in D){var V=v(D,{unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==V?V:null}if(mY(D)&&!s.keepFreeFloatingNodes&&!c&&(null===i||"@graph"===x)&&(0===B||"@value"in D||"@list"in D||1===B&&"@id"in D)){var K=v({unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==K?K:null}return D};var zY=pY.isKeyword,HY={},VY=HY;HY.createMergedNodeMap=function(e,t){var r=(t=t||{}).issuer||new D$.IdentifierIssuer("_:b"),n={"@default":{}};return HY.createNodeMap(e,n,"@default",r),HY.mergeNodeMaps(n)},HY.createNodeMap=function(e,t,r,n,i,a){if(A$.isArray(e)){var o,s=C(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;HY.createNodeMap(u,t,r,n,void 0,a)}}catch(e){s.e(e)}finally{s.f()}}else if(A$.isObject(e))if(P$.isValue(e)){if("@type"in e){var c=e["@type"];0===c.indexOf("_:")&&(e["@type"]=c=n.getId(c))}a&&a.push(e)}else{if(a&&P$.isList(e)){var l=[];return HY.createNodeMap(e["@list"],t,r,n,i,l),void a.push({"@list":l})}if("@type"in e){var f,h=C(e["@type"]);try{for(h.s();!(f=h.n()).done;){var d=f.value;0===d.indexOf("_:")&&n.getId(d)}}catch(e){h.e(e)}finally{h.f()}}A$.isUndefined(i)&&(i=P$.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),a&&a.push({"@id":i});var p=t[r],v=p[i]=p[i]||{};v["@id"]=i;var y,g=C(Object.keys(e).sort());try{for(g.s();!(y=g.n()).done;){var b=y.value;if("@id"!==b)if("@reverse"!==b)if("@graph"!==b)if("@type"!==b&&zY(b)){if("@index"===b&&b in v&&(e[b]!==v[b]||e[b]["@id"]!==v[b]["@id"]))throw new O$("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:v});v[b]=e[b]}else{var m=e[b];if(0===b.indexOf("_:")&&(b=n.getId(b)),0!==m.length){var w,x=C(m);try{for(x.s();!(w=x.n()).done;){var _=w.value;if("@type"===b&&(_=0===_.indexOf("_:")?n.getId(_):_),P$.isSubject(_)||P$.isSubjectReference(_)){var k=P$.isBlankNode(_)?n.getId(_["@id"]):_["@id"];D$.addValue(v,b,{"@id":k},{propertyIsArray:!0,allowDuplicate:!1}),HY.createNodeMap(_,t,r,n,k)}else if(P$.isValue(_))D$.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1});else if(P$.isList(_)){var S=[];HY.createNodeMap(_["@list"],t,r,n,i,S),_={"@list":S},D$.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}else HY.createNodeMap(_,t,r,n,i),D$.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){x.e(e)}finally{x.f()}}else D$.addValue(v,b,[],{propertyIsArray:!0})}else i in t||(t[i]={}),HY.createNodeMap(e[b],t,i,n);else{var E={"@id":i},I=e["@reverse"];for(var A in I){var T,P=C(I[A]);try{for(P.s();!(T=P.n()).done;){var O=T.value,M=O["@id"];P$.isBlankNode(O)&&(M=n.getId(M)),HY.createNodeMap(O,t,r,n,M),D$.addValue(p[M],A,E,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){P.e(e)}finally{P.f()}}}}}catch(e){g.e(e)}finally{g.f()}}else a&&a.push(e)},HY.mergeNodeMapGraphs=function(e){var t,r={},n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=C(Object.keys(e[a]).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e[a][s];s in r||(r[s]={"@id":s});var c,l=r[s],f=C(Object.keys(u).sort());try{for(f.s();!(c=f.n()).done;){var h=c.value;if(zY(h))l[h]=D$.clone(u[h]);else{var d,p=C(u[h]);try{for(p.s();!(d=p.n()).done;){var v=d.value;D$.addValue(l,h,D$.clone(v),{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return r},HY.mergeNodeMaps=function(e){var t,r=e["@default"],n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("@default"!==i){var a=e[i],o=r[i];o?"@graph"in o||(o["@graph"]=[]):r[i]=o={"@id":i,"@graph":[]};var s,u=o["@graph"],c=C(Object.keys(a).sort());try{for(c.s();!(s=c.n()).done;){var l=a[s.value];P$.isSubjectReference(l)||u.push(l)}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){n.e(e)}finally{n.f()}return r};var KY=P$.isSubjectReference,qY=VY.createMergedNodeMap,WY={},GY=WY;WY.flatten=function(e){for(var t=qY(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=t[n[i]];KY(a)||r.push(a)}return r};var JY=W$.RDF_LIST,XY=W$.RDF_FIRST,$Y=W$.RDF_REST,YY=W$.RDF_NIL,ZY=W$.RDF_TYPE,QY=W$.RDF_JSON_LITERAL,eZ=W$.XSD_BOOLEAN,tZ=W$.XSD_DOUBLE,rZ=W$.XSD_INTEGER,nZ=W$.XSD_STRING,iZ={},aZ=iZ;function oZ(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype.value;if(n||(n=nZ),n===QY){n="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(e){throw new O$("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:e})}}if(t){if(n===eZ)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(A$.isNumeric(r["@value"]))if(n===rZ){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===tZ&&(r["@value"]=parseFloat(r["@value"]));[eZ,rZ,tZ,nZ].includes(n)||(r["@type"]=n)}else n!==nZ&&(r["@type"]=n)}return r}iZ.fromRDF=function(){var e=i(Wt.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.useRdfType,i=void 0!==n&&n,a=r.useNativeTypes,o=void 0!==a&&a,u={"@default":s={}},c={},l=C(t),e.prev=3,l.s();case 5:if((f=l.n()).done){e.next=19;break}if(h=f.value,(d="DefaultGraph"===h.graph.termType?"@default":h.graph.value)in u||(u[d]={}),"@default"===d||d in s||(s[d]={"@id":d}),p=u[d],v=h.subject.value,y=h.predicate.value,g=h.object,v in p||(p[v]={"@id":v}),b=p[v],(m=g.termType.endsWith("Node"))&&!(g.value in p)&&(p[g.value]={"@id":g.value}),y!==ZY||i||!m){e.next=15;break}return D$.addValue(b,"@type",g.value,{propertyIsArray:!0}),e.abrupt("continue",17);case 15:w=oZ(g,o),D$.addValue(b,y,w,{propertyIsArray:!0}),m&&(g.value===YY?("usages"in(x=p[g.value])||(x.usages=[]),x.usages.push({node:b,property:y,value:w})):g.value in c?c[g.value]=!1:c[g.value]={node:b,property:y,value:w});case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:e.t1=Wt.keys(u);case 28:if((e.t2=e.t1()).done){e.next=37;break}if(_=e.t2.value,k=u[_],YY in k){e.next=33;break}return e.abrupt("continue",28);case 33:if((S=k[YY]).usages){E=C(S.usages);try{for(E.s();!(I=E.n()).done;){for(A=I.value,T=A.node,P=A.property,O=A.value,M=[],N=[],R=Object.keys(T).length;P===$Y&&A$.isObject(c[T["@id"]])&&A$.isArray(T[XY])&&1===T[XY].length&&A$.isArray(T[$Y])&&1===T[$Y].length&&(3===R||4===R&&A$.isArray(T["@type"])&&1===T["@type"].length&&T["@type"][0]===JY)&&(M.push(T[XY][0]),N.push(T["@id"]),A=c[T["@id"]],T=A.node,P=A.property,O=A.value,R=Object.keys(T).length,P$.isBlankNode(T)););for(delete O["@id"],O["@list"]=M.reverse(),L=0,j=N;L<j.length;L++)D=j[L],delete k[D]}}catch(e){E.e(e)}finally{E.f()}delete S.usages}e.next=28;break;case 37:B=[],U=Object.keys(s).sort(),F=C(U);try{for(F.s();!(z=F.n()).done;){if(H=z.value,V=s[H],H in u){K=V["@graph"]=[],q=u[H],W=Object.keys(q).sort(),G=C(W);try{for(G.s();!(J=G.n()).done;)X=J.value,$=q[X],P$.isSubjectReference($)||K.push($)}catch(e){G.e(e)}finally{G.f()}}P$.isSubjectReference(V)||B.push(V)}}catch(e){F.e(e)}finally{F.f()}return e.abrupt("return",B);case 41:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})));return function(t,r){return e.apply(this,arguments)}}();var sZ=function e(t){return null===t||"object"!=r(t)||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((function(t,n,i){return t+(0===i?"":",")+e(void 0===n||"symbol"==r(n)?null:n)}),"")+"]":"{"+Object.keys(t).sort().reduce((function(n,i,a){return void 0===t[i]||"symbol"==r(t[i])?n:n+(0===n.length?"":",")+e(i)+":"+e(t[i])}),"")+"}"},uZ=VY.createNodeMap,cZ=pY.isKeyword,lZ=W$.RDF_FIRST,fZ=W$.RDF_REST,hZ=W$.RDF_NIL,dZ=W$.RDF_TYPE,pZ=W$.RDF_JSON_LITERAL,vZ=W$.RDF_LANGSTRING,yZ=W$.XSD_BOOLEAN,gZ=W$.XSD_DOUBLE,bZ=W$.XSD_INTEGER,mZ=W$.XSD_STRING,wZ=eY.isAbsolute,xZ={},_Z=xZ;function kZ(e,t,r,n,i){var a,o=C(Object.keys(t).sort());try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=t[u],l=C(Object.keys(c).sort());try{for(l.s();!(s=l.n()).done;){var f=s.value,h=c[f];if("@type"===f)f=dZ;else if(cZ(f))continue;var d,p=C(h);try{for(p.s();!(d=p.n()).done;){var v=d.value,y={termType:u.startsWith("_:")?"BlankNode":"NamedNode",value:u};if(wZ(u)){var g={termType:f.startsWith("_:")?"BlankNode":"NamedNode",value:f};if(wZ(f)&&("BlankNode"!==g.termType||i.produceGeneralizedRdf)){var b=SZ(v,n,e,r);b&&e.push({subject:y,predicate:g,object:b,graph:r})}}}}catch(e){p.e(e)}finally{p.f()}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}}function SZ(e,t,r,n){var i={};if(P$.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};var a=e["@value"],o=e["@type"]||null;"@json"===o?(i.value=sZ(a),i.datatype.value=pZ):A$.isBoolean(a)?(i.value=a.toString(),i.datatype.value=o||yZ):A$.isDouble(a)||o===gZ?(A$.isDouble(a)||(a=parseFloat(a)),i.value=a.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=o||gZ):A$.isNumber(a)?(i.value=a.toFixed(0),i.datatype.value=o||bZ):"@language"in e?(i.value=a,i.datatype.value=o||vZ,i.language=e["@language"]):(i.value=a,i.datatype.value=o||mZ)}else if(P$.isList(e)){var s=function(e,t,r,n){var i,a={termType:"NamedNode",value:lZ},o={termType:"NamedNode",value:fZ},s={termType:"NamedNode",value:hZ},u=e.pop(),c=u?{termType:"BlankNode",value:t.getId()}:s,l=c,f=C(e);try{for(f.s();!(i=f.n()).done;){var h=SZ(i.value,t,r,n),d={termType:"BlankNode",value:t.getId()};r.push({subject:l,predicate:a,object:h,graph:n}),r.push({subject:l,predicate:o,object:d,graph:n}),l=d}}catch(e){f.e(e)}finally{f.f()}if(u){var p=SZ(u,t,r,n);r.push({subject:l,predicate:a,object:p,graph:n}),r.push({subject:l,predicate:o,object:s,graph:n})}return c}(e["@list"],t,r,n);i.termType=s.termType,i.value=s.value}else{var u=A$.isObject(e)?e["@id"]:e;i.termType=u.startsWith("_:")?"BlankNode":"NamedNode",i.value=u}return"NamedNode"!==i.termType||wZ(i.value)?i:null}xZ.toRDF=function(e,t){var r=new D$.IdentifierIssuer("_:b"),n={"@default":{}};uZ(e,n,"@default",r);var i,a=[],o=C(Object.keys(n).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=void 0;if("@default"===s)u={termType:"DefaultGraph",value:""};else{if(!wZ(s))continue;(u=s.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=s}kZ(a,n[s],u,r,t)}}catch(e){o.e(e)}finally{o.f()}return a};var EZ=pY.isKeyword,IZ=VY.createNodeMap,AZ=VY.mergeNodeMapGraphs,TZ={},PZ=TZ;function OZ(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function CZ(e,t,r){for(var n=r.length-1;n>=0;--n){var i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function MZ(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function NZ(e){if(!A$.isArray(e)||1!==e.length||!A$.isObject(e[0]))throw new O$("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function RZ(e,t,n,i){var a=!0,o=!1,s=function(s){var u=!1,c=D$.getValues(t,s),l=0===D$.getValues(n,s).length;if(EZ(s)){if("@id"!==s&&"@type"!==s)return"continue";if(a=!1,"@id"===s)return n["@id"].length>=0&&!A$.isEmptyObject(n["@id"][0])?{v:n["@id"].includes(c[0])}:(u=!0,"continue");if("@type"in n)if(l){if(c.length>0)return{v:!1};u=!0}else{if(1!==n["@type"].length||!A$.isEmptyObject(n["@type"][0])){var f,h=C(n["@type"]);try{var d=function(){var e=f.value;if(c.some((function(t){return t===e})))return{v:{v:!0}}};for(h.s();!(f=h.n()).done;){var p=d();if("object"===r(p))return p.v}}catch(e){h.e(e)}finally{h.f()}return{v:!1}}u=c.length>0}}var v=D$.getValues(n,s)[0],y=!1;if(v&&(NZ([v]),y="@default"in v),a=!1,0!==c.length||!y){if(c.length>0&&l)return{v:!1};if(void 0===v){if(c.length>0)return{v:!1};u=!0}else if(A$.isObject(v))u=c.length>0;else if(P$.isValue(v))u=c.some((function(e){return BZ(v,e)}));else if(P$.isSubject(v)||P$.isSubjectReference(v))u=c.some((function(t){return DZ(e,v,t,i)}));else if(P$.isList(v)){var g=v["@list"][0];if(P$.isList(c[0])){var b=c[0]["@list"];P$.isValue(g)?u=b.some((function(e){return BZ(g,e)})):(P$.isSubject(g)||P$.isSubjectReference(g))&&(u=b.some((function(t){return DZ(e,g,t,i)})))}else u=!1}if(!u&&i.requireAll)return{v:!1};o=o||u}};for(var u in n){var c=s(u);if("continue"!==c&&"object"===r(c))return c.v}return a||o}function LZ(e,t){var r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,a=n.property,o={"@id":t};if(A$.isArray(i)){for(var s=0;s<i.length;++s)if(D$.compareValues(i[s],o)){i[s]=o;break}}else{var u=A$.isArray(i[a]);D$.removeValue(i,a,o,{propertyIsArray:u}),D$.addValue(i,a,o,{propertyIsArray:u})}!function e(t){for(var n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];a in r&&A$.isObject(r[a].parent)&&r[a].parent["@id"]===t&&(delete r[a],e(a))}}(t)}function jZ(e,t,r){A$.isObject(e)?D$.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function DZ(e,t,r,n){if(!("@id"in r))return!1;var i=e.subjects[r["@id"]];return i&&RZ(e,i,t,n)}function BZ(e,t){var r=t["@value"],n=t["@type"],i=t["@language"],a=e["@value"]?A$.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],o=e["@type"]?A$.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],s=e["@language"]?A$.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===o.length&&0===s.length||!(!a.includes(r)&&!A$.isEmptyObject(a[0]))&&!!(!n&&0===o.length||o.includes(n)||n&&A$.isEmptyObject(o[0]))&&!!(!i&&0===s.length||s.includes(i)||i&&A$.isEmptyObject(s[0]))}TZ.frameMergedOrDefault=function(e,t,r){var n={options:r,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},i=new D$.IdentifierIssuer("_:b");IZ(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=AZ(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];var a=[];return TZ.frame(n,Object.keys(n.subjects).sort(),t,a),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((function(e){return 1===n.bnodeMap[e].length}))),a},TZ.frame=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;NZ(r),r=r[0];var a,o=e.options,s={embed:MZ(r,o,"embed"),explicit:MZ(r,o,"explicit"),requireAll:MZ(r,o,"requireAll")},c=function(e,t,r,n){var i,a={},o=C(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e.graphMap[e.graph][s];RZ(e,u,r,n)&&(a[s]=u)}}catch(e){o.e(e)}finally{o.f()}return a}(e,t,r,s),l=Object.keys(c).sort(),f=C(l);try{var h=function(){var t=a.value,l=c[t];if("@link"===s.embed&&t in e.link)return jZ(n,i,e.link[t]),"continue";null===i?e.uniqueEmbeds=u({},e.graph,{}):e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};var f={};if(f["@id"]=t,0===t.indexOf("_:")&&D$.addValue(e.bnodeMap,t,f,{propertyIsArray:!0}),e.link[t]=f,"@never"===s.embed||CZ(l,e.graph,e.subjectStack))jZ(n,i,f);else{if("@last"===s.embed&&(t in e.uniqueEmbeds[e.graph]&&LZ(e,t),e.uniqueEmbeds[e.graph][t]={parent:n,property:i}),e.subjectStack.push({subject:l,graph:e.graph}),t in e.graphMap){var h=!1,d=null;"@graph"in r?(d=r["@graph"][0],A$.isObject(d)||(d={}),h=!("@merged"===t||"@default"===t)):(h="@merged"!==e.graph,d={}),h&&(e.graphStack.push(e.graph),e.graph=t,TZ.frame(e,Object.keys(e.graphMap[t]).sort(),[d],f,"@graph"),e.graph=e.graphStack.pop)}var p,v=C(Object.keys(l).sort());try{for(v.s();!(p=v.n()).done;){var y=p.value;if(EZ(y)){if(f[y]=D$.clone(l[y]),"@type"===y){var g,b=C(l["@type"]);try{for(b.s();!(g=b.n()).done;){var m=g.value;0===m.indexOf("_:")&&D$.addValue(e.bnodeMap,m,f,{propertyIsArray:!0})}}catch(e){b.e(e)}finally{b.f()}}}else if(!s.explicit||y in r){var w,x=C(l[y]);try{for(x.s();!(w=x.n()).done;){var _=w.value,k=y in r?r[y]:OZ(s);if(P$.isList(_)){var S={"@list":[]};jZ(f,y,S);var E=_["@list"];for(var I in E)if(_=E[I],P$.isSubjectReference(_)){var A=y in r?r[y][0]["@list"]:OZ(s);TZ.frame(e,[_["@id"]],A,S,"@list")}else jZ(S,"@list",D$.clone(_))}else P$.isSubjectReference(_)?TZ.frame(e,[_["@id"]],k,f,y):BZ(k[0],_)&&jZ(f,y,D$.clone(_))}}catch(e){x.e(e)}finally{x.f()}}}}catch(e){v.e(e)}finally{v.f()}var T,P=C(Object.keys(r).sort());try{for(P.s();!(T=P.n()).done;){var O=T.value;if(!EZ(O)){var M=r[O][0]||{};if(!MZ(M,o,"omitDefault")&&!(O in f)){var N="@null";"@default"in M&&(N=D$.clone(M["@default"])),A$.isArray(N)||(N=[N]),f[O]=[{"@preserve":N}]}}}}catch(e){P.e(e)}finally{P.f()}if("@reverse"in r){var R,L=C(Object.keys(r["@reverse"]).sort());try{for(L.s();!(R=L.n()).done;)for(var j=R.value,D=r["@reverse"][j],B=0,U=Object.keys(e.subjects);B<U.length;B++){var F=U[B];D$.getValues(e.subjects[F],j).some((function(e){return e["@id"]===t}))&&(f["@reverse"]=f["@reverse"]||{},D$.addValue(f["@reverse"],j,[],{propertyIsArray:!0}),TZ.frame(e,[F],D,f["@reverse"][j],i))}}catch(e){L.e(e)}finally{L.f()}}jZ(n,i,f),e.subjectStack.pop()}};for(f.s();!(a=f.n()).done;)h()}catch(e){f.e(e)}finally{f.f()}};var UZ=A$.isArray,FZ=A$.isObject,zZ=A$.isString,HZ=A$.isUndefined,VZ=P$.isList,KZ=P$.isValue,qZ=P$.isGraph,WZ=P$.isSimpleGraph,GZ=P$.isSubjectReference,JZ=pY.expandIri,XZ=pY.getContextValue,$Z=pY.isKeyword,YZ=pY.process,ZZ=eY.removeBase,QZ=D$.addValue,eQ=D$.asArray,tQ=D$.compareShortestLeast,rQ={},nQ=rQ;function iQ(e,t,r){if("@nest"!==JZ(e,t,{vocab:!0},r))throw new O$("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}rQ.compact=function(e){var t,r=e.activeCtx,n=e.activeProperty,i=void 0===n?null:n,a=e.element,o=e.options,s=void 0===o?{}:o,c=e.compactionMap,l=void 0===c?function(){}:c;if(UZ(a)){for(var f=[],h=0;h<a.length;++h){var d=rQ.compact({activeCtx:r,activeProperty:i,element:a[h],options:s,compactionMap:l});null===d&&void 0===(d=l({unmappedValue:a[h],activeCtx:r,activeProperty:i,parent:a,index:h,options:s}))||f.push(d)}return s.compactArrays&&1===f.length&&0===(XZ(r,i,"@container")||[]).length&&(f=f[0]),f}var p=XZ(r,i,"@context");if(HZ(p)||(r=YZ({activeCtx:r,localCtx:p,isPropertyTermScopedContext:!0,options:s})),FZ(a)){if(s.link&&"@id"in a&&s.link.hasOwnProperty(a["@id"]))for(var v=s.link[a["@id"]],y=0;y<v.length;++y)if(v[y].expanded===a)return v[y].compacted;if(KZ(a)||GZ(a)){var g=rQ.compactValue({activeCtx:r,activeProperty:i,value:a,options:s});return s.link&&GZ(a)&&(s.link.hasOwnProperty(a["@id"])||(s.link[a["@id"]]=[]),s.link[a["@id"]].push({expanded:a,compacted:g})),g}if(VZ(a)&&(XZ(r,i,"@container")||[]).includes("@list"))return rQ.compact({activeCtx:r,activeProperty:i,element:a["@list"],options:s,compactionMap:l});var b="@reverse"===i,m={};r=r.revertTypeScopedContext(),s.link&&"@id"in a&&(s.link.hasOwnProperty(a["@id"])||(s.link[a["@id"]]=[]),s.link[a["@id"]].push({expanded:a,compacted:m}));var w=a["@type"]||[];w.length>1&&(w=Array.from(w).sort());var x,_=r,k=C(w);try{for(k.s();!(x=k.n()).done;){var E=x.value,I=rQ.compactIri({activeCtx:_,iri:E,relativeTo:{vocab:!0}}),A=XZ(_,I,"@context");HZ(A)||(r=YZ({activeCtx:r,localCtx:A,options:s,isTypeScopedContext:!0}))}}catch(e){k.e(e)}finally{k.f()}var T,P=C(Object.keys(a).sort());try{for(P.s();!(T=P.n()).done;){var O=T.value,M=a[O];if("@id"!==O&&"@type"!==O)if("@reverse"!==O)if("@preserve"!==O)if("@index"!==O)if("@graph"!==O&&"@list"!==O&&$Z(O)){var N=rQ.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});QZ(m,N,M)}else{if(!UZ(M))throw new O$("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===M.length){var R=rQ.compactIri({activeCtx:r,iri:O,value:M,relativeTo:{vocab:!0},reverse:b}),L=r.mappings.has(R)?r.mappings.get(R)["@nest"]:null,j=m;L&&(iQ(r,L,s),FZ(m[L])||(m[L]={}),j=m[L]),QZ(j,R,M,{propertyIsArray:!0})}var D,B=C(M);try{for(B.s();!(D=B.n()).done;){var U=D.value,F=rQ.compactIri({activeCtx:r,iri:O,value:U,relativeTo:{vocab:!0},reverse:b}),z=r.mappings.has(F)?r.mappings.get(F)["@nest"]:null,H=m;z&&(iQ(r,z,s),FZ(m[z])||(m[z]={}),H=m[z]);var V=XZ(r,F,"@container")||[],K=qZ(U),q=VZ(U),W=void 0;q?W=U["@list"]:K&&(W=U["@graph"]);var G=rQ.compact({activeCtx:r,activeProperty:F,element:q||K?W:U,options:s,compactionMap:l});if(q){if(UZ(G)||(G=[G]),V.includes("@list")){QZ(H,F,G,{valueIsArray:!0,allowDuplicate:!0});continue}G=u({},rQ.compactIri({activeCtx:r,iri:"@list",relativeTo:{vocab:!0}}),G),"@index"in U&&(G[rQ.compactIri({activeCtx:r,iri:"@index",relativeTo:{vocab:!0}})]=U["@index"])}if(K)if(V.includes("@graph")&&(V.includes("@id")||V.includes("@index")&&WZ(U))){var J=void 0;H.hasOwnProperty(F)?J=H[F]:H[F]=J={};var X=(V.includes("@id")?U["@id"]:U["@index"])||rQ.compactIri({activeCtx:r,iri:"@none",vocab:!0});QZ(J,X,G,{propertyIsArray:!s.compactArrays||V.includes("@set")})}else V.includes("@graph")&&WZ(U)||(UZ(G)&&1===G.length&&s.compactArrays&&(G=G[0]),G=u({},rQ.compactIri({activeCtx:r,iri:"@graph",relativeTo:{vocab:!0}}),G),"@id"in U&&(G[rQ.compactIri({activeCtx:r,iri:"@id",relativeTo:{vocab:!0}})]=U["@id"]),"@index"in U&&(G[rQ.compactIri({activeCtx:r,iri:"@index",relativeTo:{vocab:!0}})]=U["@index"])),QZ(H,F,G,{propertyIsArray:!s.compactArrays||V.includes("@set")});else if(V.includes("@language")||V.includes("@index")||V.includes("@id")||V.includes("@type")){var $=void 0,Y=void 0;if(H.hasOwnProperty(F)?$=H[F]:H[F]=$={},V.includes("@language"))KZ(G)&&(G=G["@value"]),Y=U["@language"];else if(V.includes("@index"))Y=U["@index"];else if(V.includes("@id")){var Z=rQ.compactIri({activeCtx:r,iri:"@id",vocab:!0});Y=G[Z],delete G[Z]}else if(V.includes("@type")){var Q,ee=rQ.compactIri({activeCtx:r,iri:"@type",vocab:!0});switch(Y=(t=S(eQ(G[ee]||[])))[0],(Q=t.slice(1)).length){case 0:delete G[ee];break;case 1:G[ee]=Q[0];break;default:G[ee]=Q}}Y||(Y=rQ.compactIri({activeCtx:r,iri:"@none",vocab:!0})),QZ($,Y,G,{propertyIsArray:V.includes("@set")})}else{var te=!s.compactArrays||V.includes("@set")||V.includes("@list")||UZ(G)&&0===G.length||"@list"===O||"@graph"===O;QZ(H,F,G,{propertyIsArray:te})}}}catch(e){B.e(e)}finally{B.f()}}else{if((XZ(r,i,"@container")||[]).includes("@index"))continue;var re=rQ.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});QZ(m,re,M)}else{var ne=rQ.compact({activeCtx:r,activeProperty:i,element:M,options:s,compactionMap:l});UZ(ne)&&0===ne.length||QZ(m,O,ne)}else{var ie=rQ.compact({activeCtx:r,activeProperty:"@reverse",element:M,options:s,compactionMap:l});for(var ae in ie)if(r.mappings.has(ae)&&r.mappings.get(ae).reverse){var oe=ie[ae],se=(XZ(r,ae,"@container")||[]).includes("@set")||!s.compactArrays;QZ(m,ae,oe,{propertyIsArray:se}),delete ie[ae]}if(Object.keys(ie).length>0){var ue=rQ.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});QZ(m,ue,ie)}}else!function(){var e="@type"===O,t=e&&r.previousContext||r,n=eQ(M).map((function(r){return rQ.compactIri({activeCtx:t,iri:r,relativeTo:{vocab:e}})}));1===n.length&&(n=n[0]);var i=rQ.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}}),a=UZ(n)&&0===M.length;QZ(m,i,n,{propertyIsArray:a})}()}}catch(e){P.e(e)}finally{P.f()}return m}return a},rQ.compactIri=function(e){var t=e.activeCtx,r=e.iri,n=e.value,i=void 0===n?null:n,a=e.relativeTo,o=void 0===a?{vocab:!1}:a,s=e.reverse,u=void 0!==s&&s;if(null===r)return r;t.isPropertyTermScoped&&t.previousContext&&(t=t.previousContext);var c=t.getInverse();if($Z(r)&&r in c&&"@none"in c[r]&&"@type"in c[r]["@none"]&&"@none"in c[r]["@none"]["@type"])return c[r]["@none"]["@type"]["@none"];if(o.vocab&&r in c){var l=t["@language"]||"@none",f=[];FZ(i)&&"@index"in i&&!("@graph"in i)&&f.push("@index","@index@set"),FZ(i)&&"@preserve"in i&&(i=i["@preserve"][0]),qZ(i)?("@index"in i&&f.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i&&f.push("@graph@id","@graph@id@set"),f.push("@graph","@graph@set","@set"),"@index"in i||f.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i||f.push("@graph@id","@graph@id@set")):FZ(i)&&!KZ(i)&&f.push("@id","@id@set","@type","@set@type");var h="@language",d="@null";if(u)h="@type",d="@reverse",f.push("@set");else if(VZ(i)){"@index"in i||f.push("@list");var p=i["@list"];if(0===p.length)h="@any",d="@none";else{for(var v=0===p.length?l:null,y=null,g=0;g<p.length;++g){var b=p[g],m="@none",w="@none";if(KZ(b)?"@language"in b?m=b["@language"]:"@type"in b?w=b["@type"]:m="@null":w="@id",null===v?v=m:m!==v&&KZ(b)&&(v="@none"),null===y?y=w:w!==y&&(y="@none"),"@none"===v&&"@none"===y)break}v=v||"@none","@none"!==(y=y||"@none")?(h="@type",d=y):d=v}}else KZ(i)?"@language"in i&&!("@index"in i)?(f.push("@language","@language@set"),d=i["@language"]):"@type"in i&&(h="@type",d=i["@type"]):(h="@type",d="@id"),f.push("@set");f.push("@none"),FZ(i)&&!("@index"in i)&&f.push("@index","@index@set"),KZ(i)&&1===Object.keys(i).length&&f.push("@language","@language@set");var x=function(e,t,r,n,i,a){null===a&&(a="@null");var o=[];if("@id"!==a&&"@reverse"!==a||!GZ(r))o.push(a);else{"@reverse"===a&&o.push("@reverse");var s=rQ.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(s)&&e.mappings.get(s)&&e.mappings.get(s)["@id"]===r["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}o.push("@none");for(var u=e.inverse[t],c=0;c<n.length;++c){var l=n[c];if(l in u)for(var f=u[l][i],h=0;h<o.length;++h){var d=o[h];if(d in f)return f[d]}}return null}(t,r,i,f,h,d);if(null!==x)return x}if(o.vocab&&"@vocab"in t){var _=t["@vocab"];if(0===r.indexOf(_)&&r!==_){var k=r.substr(_.length);if(!t.mappings.has(k))return k}}for(var S=null,E=[],I=t.fastCurieMap,A=r.length-1,T=0;T<A&&r[T]in I;++T)""in(I=I[r[T]])&&E.push(I[""][0]);for(var P=E.length-1;P>=0;--P){var O,M=E[P],N=C(M.terms);try{for(N.s();!(O=N.n()).done;){var R=O.value,L=R+":"+r.substr(M.iri.length);t.mappings.get(R)._prefix&&(!t.mappings.has(L)||null===i&&t.mappings.get(L)["@id"]===r)&&(null===S||tQ(L,S)<0)&&(S=L)}}catch(e){N.e(e)}finally{N.f()}}return null!==S?S:o.vocab?r:ZZ(t["@base"],r)},rQ.compactValue=function(e){var t=e.activeCtx,r=e.activeProperty,n=e.value,i=e.options;if(KZ(n)){var a=XZ(t,r,"@type"),o=XZ(t,r,"@language"),s=XZ(t,r,"@container")||[],c="@index"in n&&!s.includes("@index");if(!c&&(n["@type"]===a||n["@language"]===o))return n["@value"];var l=Object.keys(n).length,f=1===l||2===l&&"@index"in n&&!c,h="@language"in t,d=zZ(n["@value"]),p=t.mappings.has(r)&&null===t.mappings.get(r)["@language"];if(f&&(!h||!d||p))return n["@value"];var v={};return c&&(v[rQ.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?v[rQ.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}})]=rQ.compactIri({activeCtx:t,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(v[rQ.compactIri({activeCtx:t,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),v[rQ.compactIri({activeCtx:t,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],v}var y=JZ(t,r,{vocab:!0},i),g=XZ(t,r,"@type"),b=rQ.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:"@vocab"===g}});return"@id"===g||"@vocab"===g||"@graph"===y?b:u({},rQ.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}}),b)},
/**
   * Removes the @preserve keywords as the last step of the compaction
   * algorithm when it is running on framed output.
   *
   * @param ctx the active context used to compact the input.
   * @param input the framed, compacted output.
   * @param options the compaction options used.
   *
   * @return the resulting output.
   */
rQ.removePreserve=function(e,t,r){if(UZ(t)){for(var n=[],i=0;i<t.length;++i){var a=rQ.removePreserve(e,t[i],r);null!==a&&n.push(a)}t=n}else if(FZ(t)){// remove @preserve
if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(KZ(t))return t;if(VZ(t))return t["@list"]=rQ.removePreserve(e,t["@list"],r),t;var o=rQ.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(t.hasOwnProperty(o)){var s=t[o];if(r.link.hasOwnProperty(s)){var u=r.link[s].indexOf(t);if(-1!==u)return r.link[s][u];r.link[s].push(t)}else r.link[s]=[t]}var c=rQ.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(var l in t)if(l===o&&r.bnodesToClear.includes(t[l]))delete t[o];else{var f=rQ.removePreserve(e,t[l],r),h=XZ(e,l,"@container")||[];r.compactArrays&&UZ(f)&&1===f.length&&0===h.length&&l!==c&&(f=f[0]),t[l]=f}}return t};var aQ=D$.callbackify,oQ=D$.normalizeDocumentLoader,sQ=function(){function e(){a(this,e),this._requests={},this.add=aQ(this.add.bind(this))}var t;return s(e,[{key:"wrapLoader",value:function(e){var t=this;return t._loader=oQ(e),function(){return t.add.apply(t,arguments)}}},{key:"add",value:(t=i(Wt.mark((function e(t){var r,n;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=(r=this)._requests[t])){e.next=4;break}return e.abrupt("return",Promise.resolve(n));case 4:return n=r._requests[t]=r._loader(t),e.prev=5,e.next=8,n;case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,delete r._requests[t],e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[5,,9,12]])}))),function(e){return t.apply(this,arguments)})}]),e}(),uQ=D$.parseLinkHeader,cQ=D$.buildHeaders,lQ=W$.LINK_HEADER_REL,fQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{strictSSL:!0,maxRedirects:-1,headers:{}},t=e.secure,r=e.strictSSL,n=void 0===r||r,a=e.maxRedirects,o=void 0===a?-1:a,s=e.request,u=e.headers,c=void 0===u?{}:u;c=cQ(c),s=s||k$;var l=k$;return(new sQ).wrapLoader((function(e){return f(e,[])}));function f(e,t){return h.apply(this,arguments)}function h(){return h=i(Wt.mark((function e(r,i){var a,u,h,d,p,v,y;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.indexOf("http:")||0===r.indexOf("https:")){e.next=2;break}throw new O$('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 2:if(!t||0===r.indexOf("https")){e.next=4;break}throw new O$('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 4:if(null===(u=null)){e.next=7;break}return e.abrupt("return",u);case 7:return e.prev=7,e.next=10,function(e,t){return new Promise((function(r,n){e(t,(function(e,t,i){e?n(e):r({res:t,body:i})}))}))}(s,{url:r,headers:c,strictSSL:n,followRedirect:!1});case 10:a=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new O$("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:e.t0});case 16:if(d=(h=a).res,p=h.body,u={contextUrl:null,documentUrl:r,document:p||null},v=l.STATUS_CODES[d.statusCode],!(d.statusCode>=400)){e.next=21;break}throw new O$("URL could not be dereferenced: "+v,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:d.statusCode});case 21:if(!d.headers.link||"application/ld+json"===d.headers["content-type"]){e.next=26;break}if(y=uQ(d.headers.link)[lQ],!Array.isArray(y)){e.next=25;break}throw new O$("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});case 25:y&&(u.contextUrl=y.target);case 26:if(!(d.statusCode>=300&&d.statusCode<400&&d.headers.location)){e.next=32;break}if(i.length!==o){e.next=29;break}throw new O$("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:d.statusCode,redirects:i});case 29:if(-1===i.indexOf(r)){e.next=31;break}throw new O$("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:d.statusCode,redirects:i});case 31:return e.abrupt("return",(i.push(r),f(d.headers.location,i)));case 32:return e.abrupt("return",(i.push(r),u));case 33:case"end":return e.stop()}}),e,null,[[7,13]])}))),h.apply(this,arguments)}},hQ=D$.parseLinkHeader,dQ=D$.buildHeaders,pQ=W$.LINK_HEADER_REL,vQ=/(^|(\r\n))link:/i,yQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{headers:{}},t=e.secure,r=e.headers,n=void 0===r?{}:r,a=e.xhr;return n=dQ(n),(new sQ).wrapLoader(function(){var e=i(Wt.mark((function e(r){var i,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.indexOf("http:")||0===r.indexOf("https:")){e.next=2;break}throw new O$('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 2:if(!t||0===r.indexOf("https")){e.next=4;break}throw new O$('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 4:return e.prev=4,e.next=7,function(e,t,r){var n=new(e=e||XMLHttpRequest);return new Promise((function(e,i){for(var a in n.onload=function(){return e(n)},n.onerror=function(e){return i(e)},n.open("GET",t,!0),r)n.setRequestHeader(a,r[a]);n.send()}))}(a,r,n);case 7:i=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new O$("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:e.t0});case 13:if(!(i.status>=400)){e.next=15;break}throw new O$("URL could not be dereferenced: "+i.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:i.status});case 15:if(o={contextUrl:null,documentUrl:r,document:i.response},s=i.getResponseHeader("Content-Type"),vQ.test(i.getAllResponseHeaders())&&(u=i.getResponseHeader("Link")),!u||"application/ld+json"===s){e.next=21;break}if(u=hQ(u)[pQ],!Array.isArray(u)){e.next=20;break}throw new O$("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});case 20:u&&(o.contextUrl=u.target);case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}())},gQ=D$.IdentifierIssuer,bQ=DY.expand,mQ=GY.flatten,wQ=aZ.fromRDF,xQ=_Z.toRDF,_Q=PZ.frameMergedOrDefault,kQ=A$.isArray,SQ=A$.isObject,EQ=A$.isString,IQ=P$.isSubjectReference,AQ=pY.getInitialContext,TQ=pY.process,PQ=pY.getAllContexts,OQ=nQ.compact,CQ=nQ.compactIri,MQ=nQ.removePreserve,NQ=VY.createNodeMap,RQ=VY.createMergedNodeMap,LQ=VY.mergeNodeMaps,jQ=void 0!==OW&&OW.versions&&OW.versions.node,DQ=!jQ&&("undefined"!=typeof window||"undefined"!=typeof self),BQ=function(e){var t={};function r(t,r){var n=r.documentLoader,i=void 0===n?e.documentLoader:n,a=y(r,EK);return Object.assign({},{documentLoader:i},a,t)}return e.compact=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p,v,y,g=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.length<2)){t.next=2;break}throw new TypeError("Could not compact, too few arguments.");case 2:if(null!==i){t.next=4;break}throw new O$("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});case 4:if(null!==n){t.next=6;break}return t.abrupt("return",null);case 6:if((a=r(a,{base:EQ(n)?n:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new gQ("_:b")})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,!a.skipExpansion){t.next=12;break}t.t0=n,t.next=15;break;case 12:return t.next=14,e.expand(n,a);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,e.processContext(AQ(a),i,a);case 18:s=t.sent,u=OQ({activeCtx:s,element:o,options:a,compactionMap:a.compactionMap}),a.compactArrays&&!a.graph&&kQ(u)?1===u.length?u=u[0]:0===u.length&&(u={}):a.graph&&SQ(u)&&(u=[u]),SQ(i)&&"@context"in i&&(i=i["@context"]),i=D$.clone(i),kQ(i)||(i=[i]),c=i,i=[];for(l=0;l<c.length;++l)(!SQ(c[l])||Object.keys(c[l]).length>0)&&i.push(c[l]);if(f=i.length>0,1===i.length&&(i=i[0]),kQ(u))h=CQ({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),d=u,u={},f&&(u["@context"]=i),u[h]=d;else if(SQ(u)&&f)for(v in p=u,u={"@context":i},p)u[v]=p[v];return a.framing&&(y=CQ({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),// remove @preserve from results
// remove @preserve from results
a.link={},u[y]=MQ(s,u[y],a)),t.abrupt("return",u);case 28:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.expand=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i){var a,o,s,u,c,l,f,h=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(h.length<1)){t.next=2;break}throw new TypeError("Could not expand, too few arguments.");case 2:if(!1===(i=r(i,{keepFreeFloatingNodes:!1})).expansionMap&&(i.expansionMap=void 0),a={},o=[],"expandContext"in i&&(s=D$.clone(i.expandContext),SQ(s)&&"@context"in s?a.expandContext=s:a.expandContext={"@context":s},o.push(a.expandContext)),!EQ(n)){t.next=12;break}return t.next=8,e.get(n,i);case 8:c=t.sent,u=c.documentUrl,a.input=c.document,c.contextUrl&&(a.remoteContext={"@context":c.contextUrl},o.push(a.remoteContext)),t.next=13;break;case 12:a.input=D$.clone(n);case 13:return"base"in i||(i.base=u||""),t.next=16,PQ(a,i);case 16:return l=AQ(i),o.forEach((function(e){l=TQ({activeCtx:l,localCtx:e,options:i})})),f=bQ({activeCtx:l,element:a.input,options:i,expansionMap:i.expansionMap}),t.abrupt("return",(SQ(f)&&"@graph"in f&&1===Object.keys(f).length?f=f["@graph"]:null===f&&(f=[]),kQ(f)||(f=[f]),f));case 20:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.flatten=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i,a){var o,s,u,c=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c.length<1)){t.next=2;break}return t.abrupt("return",new TypeError("Could not flatten, too few arguments."));case 2:return i="function"==typeof i?null:i||null,a=r(a,{base:EQ(n)?n:""}),t.next=5,e.expand(n,a);case 5:if(o=t.sent,s=mQ(o),null!==i){t.next=9;break}return t.abrupt("return",s);case 9:return a.graph=!0,a.skipExpansion=!0,t.next=12,e.compact(s,i,a);case 12:return u=t.sent,t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.frame=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p.length<2)){t.next=2;break}throw new TypeError("Could not frame, too few arguments.");case 2:if(a=r(a,{base:EQ(n)?n:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[]}),!EQ(i)){t.next=7;break}return t.next=5,e.get(i,a);case 5:o=t.sent,i=o.document,o.contextUrl&&((s=i["@context"])?kQ(s)?s.push(o.contextUrl):s=[s,o.contextUrl]:s=o.contextUrl,i["@context"]=s);case 7:return u=i&&i["@context"]||{},t.next=10,e.expand(n,a);case 10:return c=t.sent,(l=D$.clone(a)).isFrame=!0,l.keepFreeFloatingNodes=!0,t.next=15,e.expand(i,l);case 15:return f=t.sent,l.merged=!("@graph"in i),h=_Q(c,f,l),l.graph=!0,l.skipExpansion=!0,l.link={},l.framing=!0,t.next=21,e.compact(h,u,l);case 21:return d=t.sent,t.abrupt("return",d);case 23:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.link=D$.callbackify(function(){var t=i(Wt.mark((function t(r,n,i){var a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.abrupt("return",(n&&(a["@context"]=n),a["@embed"]="@link",e.frame(r,a,i)));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.normalize=e.canonize=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i){var a,o,s,u=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u.length<1)){t.next=2;break}throw new TypeError("Could not canonize, too few arguments.");case 2:if(!("inputFormat"in(i=r(i,{base:EQ(n)?n:"",algorithm:"URDNA2015",skipExpansion:!1})))){t.next=7;break}if("application/n-quads"===i.inputFormat||"application/nquads"===i.inputFormat){t.next=5;break}throw new O$("Unknown canonicalization input format.","jsonld.CanonizeError");case 5:return a=V$.parse(n),t.abrupt("return",E$.canonize(a,i));case 7:return delete(o=D$.clone(i)).format,o.produceGeneralizedRdf=!1,t.next=11,e.toRDF(n,o);case 11:return s=t.sent,t.abrupt("return",E$.canonize(s,i));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.fromRDF=D$.callbackify(function(){var e=i(Wt.mark((function e(n,i){var a,o,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.length<1)){e.next=2;break}throw new TypeError("Could not convert from RDF, too few arguments.");case 2:if(i=r(i,{format:EQ(n)?"application/n-quads":void 0}),a=i.format,s=i.rdfParser,!a){e.next=10;break}if(s=s||t[a]){e.next=8;break}throw new O$("Unknown input format.","jsonld.UnknownFormat",{format:a});case 8:e.next=11;break;case 10:s=function(){return n};case 11:return o=s.length>1?new Promise((function(e,t){s(n,(function(r,n){r?t(r):e(n)}))})):Promise.resolve(s(n)),e.next=14,o;case 14:return o=e.sent,Array.isArray(o)||(o=V$.legacyDatasetToQuads(o)),e.abrupt("return",wQ(o,i));case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.toRDF=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i){var a,o,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s.length<1)){t.next=2;break}throw new TypeError("Could not convert to RDF, too few arguments.");case 2:if(!(i=r(i,{base:EQ(n)?n:"",skipExpansion:!1})).skipExpansion){t.next=6;break}t.t0=n,t.next=9;break;case 6:return t.next=8,e.expand(n,i);case 8:t.t0=t.sent;case 9:if(a=t.t0,o=xQ(a,i),!i.format){t.next=17;break}if("application/n-quads"!==i.format&&"application/nquads"!==i.format){t.next=16;break}return t.next=15,V$.serialize(o);case 15:return t.abrupt("return",t.sent);case 16:throw new O$("Unknown output format.","jsonld.UnknownFormat",{format:i.format});case 17:return t.abrupt("return",o);case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.createNodeMap=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i){var a,o=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.length<1)){t.next=2;break}throw new TypeError("Could not create node map, too few arguments.");case 2:return i=r(i,{base:EQ(n)?n:""}),t.next=5,e.expand(n,i);case 5:return a=t.sent,t.abrupt("return",RQ(a,i));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.merge=D$.callbackify(function(){var t=i(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(k.length<1)){t.next=2;break}throw new TypeError("Could not merge, too few arguments.");case 2:if(kQ(n)){t.next=4;break}throw new TypeError('Could not merge, "docs" must be an array.');case 4:return i="function"==typeof i?null:i||null,a=r(a,{}),t.next=7,Promise.all(n.map((function(t){var r=Object.assign({},a);return e.expand(t,r)})));case 7:o=t.sent,s=!0,"mergeNodes"in a&&(s=a.mergeNodes),u=a.issuer||new gQ("_:b"),c={"@default":{}},l=0;case 12:if(!(l<o.length)){t.next=29;break}if(f=D$.relabelBlankNodes(o[l],{issuer:new gQ("_:b"+l+"-")}),NQ(f,h=s||0===l?c:{"@default":{}},"@default",u),h===c){t.next=26;break}t.t0=Wt.keys(h);case 16:if((t.t1=t.t0()).done){t.next=26;break}if(d=t.t1.value,p=h[d],d in c){t.next=22;break}return c[d]=p,t.abrupt("continue",16);case 22:for(y in v=c[d],p)y in v||(v[y]=p[y]);t.next=16;break;case 26:++l,t.next=12;break;case 29:for(g=LQ(c),b=[],m=Object.keys(g).sort(),w=0;w<m.length;++w)x=g[m[w]],IQ(x)||b.push(x);if(null!==i){t.next=33;break}return t.abrupt("return",b);case 33:return a.graph=!0,a.skipExpansion=!0,t.next=36,e.compact(b,i,a);case 36:return _=t.sent,t.abrupt("return",_);case 38:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),Object.defineProperty(e,"documentLoader",{get:function(){return e._documentLoader},set:function(t){return e._documentLoader=D$.normalizeDocumentLoader(t)}}),e.documentLoader=function(){var e=i(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new O$("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.loadDocument=D$.callbackify(i(Wt.mark((function t(){var r=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.documentLoader.apply(null,r));case 1:case"end":return t.stop()}}),t)})))),e.get=D$.callbackify(function(){var t=i(Wt.mark((function t(r,n){var i,a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof n.documentLoader?D$.normalizeDocumentLoader(n.documentLoader):e.documentLoader,t.next=3,i(r);case 3:if(a=t.sent,t.prev=4,a.document){t.next=7;break}throw new O$("No remote document found at the given URL.","jsonld.NullRemoteDocument");case 7:EQ(a.document)&&(a.document=JSON.parse(a.document)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(4),new O$("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:t.t0,remoteDoc:a});case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,r){return t.apply(this,arguments)}}()),e.processContext=D$.callbackify(function(){var e=i(Wt.mark((function e(t,n,i){var a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r(i,{base:""}),null!==n){e.next=2;break}return e.abrupt("return",AQ(i));case 2:return n=D$.clone(n),SQ(n)&&"@context"in n||(n={"@context":n}),e.next=5,PQ(n,i);case 5:return a=e.sent,e.abrupt("return",TQ({activeCtx:t,localCtx:a,options:i}));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),e.getContextValue=pY.getContextValue,e.documentLoaders={},e.documentLoaders.node=fQ,e.documentLoaders.xhr=yQ,e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new O$('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",V$.parse),e.registerRDFParser("application/nquads",V$.parse),e.registerRDFParser("rdfa-api",function(){function e(){a(this,e)}return s(e,[{key:"parse",value:function(e){for(var t={"@default":[]},r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var a=e.getSubjectTriples(i);if(null!==a){var o=a.predicates;for(var s in o)for(var u=o[s].objects,c=0;c<u.length;++c){var l=u[c],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s};var h=l.value;if(l.type===$$){var d=new("undefined"==typeof XMLSerializer?k$.XMLSerializer:XMLSerializer);h="";for(var p=0;p<l.value.length;p++)l.value[p].nodeType===H$.ELEMENT_NODE?h+=d.serializeToString(l.value[p]):l.value[p].nodeType===H$.TEXT_NODE&&(h+=l.value[p].nodeValue)}f.object={},l.type===X$?0===l.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",l.type===J$?l.language?(f.object.datatype=G$,f.object.language=l.language):f.object.datatype=Y$:f.object.datatype=l.type),f.object.value=h,t["@default"].push(f)}}}}return t}}]),e}().parse),e.url=eY,e.util=D$,Object.assign(e,D$),e.promises=e,e.RequestQueue=sQ,e.JsonLdProcessor=function(e){var t=function(){function e(){a(this,e)}return s(e,[{key:"toString",value:function(){return"[object JsonLdProcessor]"}}]),e}();return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}(e),DQ&&void 0===ZK.JsonLdProcessor&&Object.defineProperty(ZK,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),jQ?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},UQ=function e(){return BQ((function(){return e()}))};BQ(UQ);var FQ=UQ,zQ={},HQ=zQ;zQ.isArray=Array.isArray,zQ.isBoolean=function(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)},zQ.isDouble=function(e){return zQ.isNumber(e)&&-1!==String(e).indexOf(".")},zQ.isEmptyObject=function(e){return zQ.isObject(e)&&0===Object.keys(e).length},zQ.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},zQ.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},zQ.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},zQ.isString=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},zQ.isUndefined=function(e){return void 0===e};var VQ={},KQ=VQ;VQ.isSubject=function(e){return!(!HQ.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e))},VQ.isSubjectReference=function(e){return HQ.isObject(e)&&1===Object.keys(e).length&&"@id"in e},VQ.isValue=function(e){return HQ.isObject(e)&&"@value"in e},VQ.isList=function(e){return HQ.isObject(e)&&"@list"in e},VQ.isGraph=function(e){return HQ.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((function(e){return"@id"!==e&&"@index"!==e})).length},VQ.isSimpleGraph=function(e){return VQ.isGraph(e)&&!("@id"in e)},VQ.isBlankNode=function(e){return!!HQ.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e))};var qQ=function(e){c(r,e);var t=m(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An unspecified JSON-LD error occurred.",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jsonld.Error",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,r),(e=t.call(this,n)).name=i,e.message=n,e.details=o,e}return s(r)}(p(Error));function WQ(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function GQ(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){WQ(a,n,i,o,s,"next",e)}function s(e){WQ(a,n,i,o,s,"throw",e)}o(void 0)}))}}var JQ=E$.IdentifierIssuer,XQ=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,$Q=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,YQ=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,ZQ="application/ld+json, application/json",QQ={},e0=QQ;QQ.IdentifierIssuer=JQ;var t0="function"==typeof setImmediate&&setImmediate,r0=t0?function(e){return t0(e)}:function(e){return setTimeout(e,0)};function n0(e,t,r){QQ.nextTick((function(){return e(t,r)}))}function i0(e,t){if(HQ.isArray(t))for(var r=0;r<t.length;++r)t[r]=i0(e,t[r]);else if(KQ.isList(t))t["@list"]=i0(e,t["@list"]);else if(HQ.isObject(t)){KQ.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=n[i];"@id"!==a&&(t[a]=i0(e,t[a]))}}return t}QQ.nextTick="object"==r(OW)?gW:r0,QQ.setImmediate=t0?r0:QQ.nextTick,QQ.clone=function(e){if(e&&"object"==r(e)){var t;if(HQ.isArray(e)){t=[];for(var n=0;n<e.length;++n)t[n]=QQ.clone(e[n])}else if(e instanceof Map){t=new Map;var i,a=C(e);try{for(a.s();!(i=a.n()).done;){var o=k(i.value,2),s=o[0],u=o[1];t.set(s,QQ.clone(u))}}catch(e){a.e(e)}finally{a.f()}}else if(e instanceof Set){t=new Set;var c,l=C(e);try{for(l.s();!(c=l.n()).done;){var f=c.value;t.add(QQ.clone(f))}}catch(e){l.e(e)}finally{l.f()}}else if(HQ.isObject(e))for(var h in t={},e)t[h]=QQ.clone(e[h]);else t=e.toString();return t}return e},QQ.asArray=function(e){return Array.isArray(e)?e:[e]},QQ.buildHeaders=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object.keys(e).some((function(e){return"accept"===e.toLowerCase()})))throw new RangeError('Accept header may not be specified; only "'+ZQ+'" is supported.');return Object.assign({Accept:ZQ},e)},QQ.parseLinkHeader=function(e){for(var t={},r=e.match(XQ),n=0;n<r.length;++n){var i=r[n].match($Q);if(i){for(var a={target:i[1]},o=i[2];i=YQ.exec(o);)a[i[1]]=void 0===i[2]?i[3]:i[2];var s=a.rel||"";Array.isArray(t[s])?t[s].push(a):t.hasOwnProperty(s)?t[s]=[t[s],a]:t[s]=a}}return t},QQ.validateTypeValue=function(e){if(!HQ.isString(e)&&!HQ.isEmptyObject(e)){var t=!1;if(HQ.isArray(e)){t=!0;for(var r=0;r<e.length;++r)if(!HQ.isString(e[r])){t=!1;break}}if(!t)throw new qQ('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},QQ.hasProperty=function(e,t){if(e.hasOwnProperty(t)){var r=e[t];return!HQ.isArray(r)||r.length>0}return!1},QQ.hasValue=function(e,t,r){if(QQ.hasProperty(e,t)){var n=e[t],i=KQ.isList(n);if(HQ.isArray(n)||i){i&&(n=n["@list"]);for(var a=0;a<n.length;++a)if(QQ.compareValues(r,n[a]))return!0}else if(!HQ.isArray(r))return QQ.compareValues(r,n)}return!1},QQ.addValue=function(e,t,r,n){if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),n.valueIsArray)e[t]=r;else if(HQ.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]);for(var i=0;i<r.length;++i)QQ.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){var a=!n.allowDuplicate&&QQ.hasValue(e,t,r);HQ.isArray(e[t])||a&&!n.propertyIsArray||(e[t]=[e[t]]),a||e[t].push(r)}else e[t]=n.propertyIsArray?[r]:r},QQ.getValues=function(e,t){return[].concat(e[t]||[])},QQ.removeProperty=function(e,t){delete e[t]},QQ.removeValue=function(e,t,r,n){"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);var i=QQ.getValues(e,t).filter((function(e){return!QQ.compareValues(e,r)}));0===i.length?QQ.removeProperty(e,t):1!==i.length||n.propertyIsArray?e[t]=i:e[t]=i[0]},QQ.relabelBlankNodes=function(e,t){return i0((t=t||{}).issuer||new JQ("_:b"),e)},QQ.compareValues=function(e,t){return e===t||!(!KQ.isValue(e)||!KQ.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(HQ.isObject(e)&&"@id"in e&&HQ.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]},QQ.compareShortestLeast=function(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},QQ.normalizeDocumentLoader=function(e){return e.length<2?QQ.callbackify(e):function(){var t=GQ(Wt.mark((function t(r){var n,i=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[1],t.abrupt("return",new Promise((function(t,i){try{e(r,(function(e,r){if("function"==typeof n)return n0(n,e,r);e?i(e):t(r)}))}catch(e){if("function"==typeof n)return n0(n,e);i(e)}})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},QQ.callbackify=function(e){return function(){var t=GQ(Wt.mark((function t(){var r,n,i,a,o,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=s.length,n=new Array(r),i=0;i<r;i++)n[i]=s[i];return"function"==typeof(a=n[n.length-1])&&n.pop(),t.prev=3,t.next=6,e.apply(null,n);case 6:o=t.sent,t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(3),"function"!=typeof a){t.next=13;break}return t.abrupt("return",n0(a,t.t0));case 13:throw t.t0;case 14:return t.abrupt("return","function"==typeof a?n0(a,null,o):o);case 15:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}()};var a0,o0=E$.NQuads,s0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u0="http://www.w3.org/2001/XMLSchema#",c0={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:s0,RDF_LIST:s0+"List",RDF_FIRST:s0+"first",RDF_REST:s0+"rest",RDF_NIL:s0+"nil",RDF_TYPE:s0+"type",RDF_PLAIN_LITERAL:s0+"PlainLiteral",RDF_XML_LITERAL:s0+"XMLLiteral",RDF_JSON_LITERAL:s0+"JSON",RDF_OBJECT:s0+"object",RDF_LANGSTRING:s0+"langString",XSD:u0,XSD_BOOLEAN:u0+"boolean",XSD_DOUBLE:u0+"double",XSD_INTEGER:u0+"integer",XSD_STRING:u0+"string"},l0=c0.RDF_LANGSTRING,f0=c0.RDF_PLAIN_LITERAL,h0=c0.RDF_OBJECT,d0=c0.RDF_XML_LITERAL,p0=c0.XSD_STRING;a0="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var v0=e0.clone,y0={},g0=y0;y0.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},y0.parse=function(e,t){for(var r={},n=y0.parsers[t||"full"],i=n.regex.exec(e),a=n.keys.length;a--;)r[n.keys[a]]=void 0===i[a]?null:i[a];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=y0.removeDotSegments(r.path),r},y0.prependBase=function(e,t){if(null===e)return t;if(-1!==t.indexOf(":"))return t;HQ.isString(e)&&(e=y0.parse(e||""));var r=y0.parse(t),n={protocol:e.protocol||""};if(null!==r.authority)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,""===r.path)n.path=e.path,null!==r.query?n.query=r.query:n.query=e.query;else{if(0===r.path.indexOf("/"))n.path=r.path;else{var i=e.path;(i=i.substr(0,i.lastIndexOf("/")+1)).length>0&&"/"!==i.substr(-1)&&(i+="/"),i+=r.path,n.path=i}n.query=r.query}""!==r.path&&(n.path=y0.removeDotSegments(n.path));var a=n.protocol;return null!==n.authority&&(a+="//"+n.authority),a+=n.path,null!==n.query&&(a+="?"+n.query),null!==r.fragment&&(a+="#"+r.fragment),""===a&&(a="./"),a},y0.removeBase=function(e,t){if(null===e)return t;HQ.isString(e)&&(e=y0.parse(e||""));var r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;for(var n=y0.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),a=n.normalizedPath.split("/"),o=n.fragment||n.query?0:1;i.length>0&&a.length>o&&i[0]===a[0];)i.shift(),a.shift();var s="";if(i.length>0){i.pop();for(var u=0;u<i.length;++u)s+="../"}return s+=a.join("/"),null!==n.query&&(s+="?"+n.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s},y0.removeDotSegments=function(e){if(0===e.length)return"";for(var t=e.split("/"),r=[];t.length>0;){var n=t.shift(),i=0===t.length;"."!==n?".."!==n?r.push(n):(r.pop(),i&&r.push("")):i&&r.push("")}return r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};var b0=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;function m0(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function w0(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){m0(a,n,i,o,s,"next",e)}function s(e){m0(a,n,i,o,s,"throw",e)}o(void 0)}))}}y0.isAbsolute=function(e){return HQ.isString(e)&&b0.test(e)},y0.isRelative=function(e){return HQ.isString(e)};var x0=HQ.isArray,_0=HQ.isObject,k0=HQ.isString,S0=HQ.isUndefined,E0=g0.isAbsolute,I0=g0.isRelative,A0=g0.prependBase,T0=g0.parse,P0=e0.asArray,O0=e0.compareShortestLeast,C0=new Map,M0={},N0=M0;function R0(e,t,r,n,i,a){if(null===t||!k0(t)||M0.isKeyword(t))return t;if(n&&n.hasOwnProperty(t)&&!0!==i.get(t)&&M0.createTermDefinition(e,n,t,i,a),e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext),(r=r||{}).vocab){var o=e.mappings.get(t);if(null===o)return null;if(o)return o["@id"]}var s=t.indexOf(":");if(-1!==s){var u=t.substr(0,s),c=t.substr(s+1);return"_"===u||0===c.indexOf("//")?t:(n&&n.hasOwnProperty(u)&&M0.createTermDefinition(e,n,u,i,a),e.mappings.has(u)?e.mappings.get(u)["@id"]+c:t)}return r.vocab&&"@vocab"in e?e["@vocab"]+t:r.base?A0(e["@base"],t):t}function L0(){return(L0=w0(Wt.mark((function e(t,r){var n,i,a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=w0(Wt.mark((function e(t,n,a){var o,s;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.size>10)){e.next=2;break}throw new qQ("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:10});case 2:if(o=new Map,j0(t,o,!1,r.base),0!==o.size){e.next=5;break}return e.abrupt("return");case 5:return s=E(o.keys()).filter((function(e){return!1===o.get(e)})),e.abrupt("return",Promise.all(s.map(function(){var e=w0(Wt.mark((function e(s){var u,c,l;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.has(s)){e.next=2;break}throw new qQ("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:s});case 2:return(u=new Set(n)).add(s),e.prev=4,e.next=7,a(s);case 7:c=e.sent,l=c.document||null,k0(l)&&(l=JSON.parse(l)),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(4),new qQ("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:s,cause:e.t0});case 15:if(_0(l)){e.next=17;break}throw new qQ("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:s});case 17:return l="@context"in l?{"@context":l["@context"]}:{"@context":{}},c.contextUrl&&(x0(l["@context"])||(l["@context"]=[l["@context"]]),l["@context"].push(c.contextUrl)),e.next=21,i(l,u,a);case 21:o.set(s,l["@context"]),j0(t,o,!0,r.base);case 23:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}())));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(e,t,r){return a.apply(this,arguments)},n=e0.normalizeDocumentLoader(r.documentLoader),e.next=5,i(t,new Set,n);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j0(e,t,r,n){if(x0(e)){var i,a=C(e);try{for(a.s();!(i=a.n()).done;){j0(i.value,t,r,n)}}catch(e){a.e(e)}finally{a.f()}}else if(_0(e))for(var o in e)if("@context"===o){var s=e[o];if(x0(s))for(var u=s.length,c=0;c<u;++c){var l=s[c];if(k0(l)){var f=A0(n,l),h=t.get(f);r?x0(h)?(Array.prototype.splice.apply(s,[c,1].concat(h)),c+=h.length-1,u=s.length):!1!==h&&(s[c]=h):void 0===h&&t.set(f,!1)}else for(var d in l)_0(l[d])&&j0(l[d],t,r,n)}else if(k0(s)){var p=A0(n,s),v=t.get(p);r?!1!==v&&(e[o]=v):void 0===v&&t.set(p,!1)}else for(var y in s)_0(s[y])&&j0(s[y],t,r,n)}else j0(e[o],t,r,n)}function D0(e,t){if(!e||"object"!=r(e)||!t||"object"!=r(t))return e===t;var n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!D0(e[i],t[i]))return!1;return!0}var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s in e){var u=e[s],c=t[s];if("@container"===s&&Array.isArray(u)&&Array.isArray(c)&&(u=u.slice().sort(),c=c.slice().sort()),!D0(u,c))return!1}return!0}M0.cache=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;a(this,e),this.order=[],this.cache=new Map,this.size=t}return s(e,[{key:"get",value:function(e,t){var r=this.cache.get(e);if(r){var n=JSON.stringify(t);return r.get(n)||null}return null}},{key:"set",value:function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();this.cache.get(n.activeCtx).delete(n.localCtx)}var i=JSON.stringify(t);this.order.push({activeCtx:e,localCtx:i});var a=this.cache.get(e);a||(a=new Map,this.cache.set(e,a)),a.set(i,v0(r))}}]),e}()),M0.process=function(e){var t=e.activeCtx,r=e.localCtx,n=e.options,i=e.isPropertyTermScopedContext,a=void 0!==i&&i,o=e.isTypeScopedContext,s=void 0!==o&&o;_0(r)&&"@context"in r&&x0(r["@context"])&&(r=r["@context"]);var u=P0(r);if(0===u.length)return t;var c=t.previousContext||t;if(a&&t.previousContext)return(t=t.clone()).isPropertyTermScoped=!0,t.previousContext=M0.process({activeCtx:t.previousContext,localCtx:u,options:n,isPropertyTermScopedContext:a}),t;for(var l=t,f=0;f<u.length;++f){var h=u[f];if(t=l,null!==h){if(M0.cache){var d=M0.cache.get(t,h);if(d){l=t=d;continue}}if(_0(h)&&"@context"in h&&(h=h["@context"]),!_0(h))throw new qQ("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});l=l.clone();var p=new Map;if("@version"in h){if(1.1!==h["@version"])throw new qQ("Unsupported JSON-LD version: "+h["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:h});if(t.processingMode&&"json-ld-1.0"===t.processingMode)throw new qQ("@version: "+h["@version"]+" not compatible with "+t.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:h});l.processingMode="json-ld-1.1",l["@version"]=h["@version"],p.set("@version",!0)}if(l.processingMode=l.processingMode||t.processingMode||"json-ld-1.0","@base"in h){var v=h["@base"];if(null===v);else if(E0(v))v=T0(v);else{if(!I0(v))throw new qQ('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});v=T0(A0(t["@base"].href,v))}l["@base"]=v,p.set("@base",!0)}if("@vocab"in h){var y=h["@vocab"];if(null===y)delete l["@vocab"];else{if(!k0(y))throw new qQ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!E0(y))throw new qQ('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});l["@vocab"]=y}p.set("@vocab",!0)}if("@language"in h){var g=h["@language"];if(null===g)delete l["@language"];else{if(!k0(g))throw new qQ('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});l["@language"]=g.toLowerCase()}p.set("@language",!0)}for(var b in p.set("@protected",h["@protected"]||!1),h)M0.createTermDefinition(l,h,b,p,n,a);s&&!l.previousContext&&(l.previousContext=c.clone()),M0.cache&&M0.cache.set(t,h,l)}else{if(!a&&0!==Object.keys(t.protected).length){var m=n&&n.protectedMode||"error";if("error"===m)throw new qQ("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===m){console.warn("WARNING: invalid context nullification");var w=t;l=t=M0.getInitialContext(n).clone();for(var x=0,_=Object.entries(w.protected);x<_.length;x++){var S=k(_[x],2),E=S[0];S[1]&&(t.mappings[E]=e0.clone(w.mappings[E]))}t.protected=e0.clone(w.protected),M0.cache&&M0.cache.set(w,h,l);continue}throw new qQ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:r,protectedMode:m})}l=t=M0.getInitialContext(n).clone(),s&&(l.previousContext=c.clone())}}return l},M0.createTermDefinition=function(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n.has(r)){if(n.get(r))return;throw new qQ("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n.set(r,!1),M0.isKeyword(r))throw new qQ("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new qQ("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o,s=e.mappings.get(r);if(e.mappings.has(r)&&e.mappings.delete(r),t.hasOwnProperty(r)&&(o=t[r]),null===o||_0(o)&&null===o["@id"])return e.mappings.set(r,null),void n.set(r,!0);var u=!1;if(k0(o)&&(u=!0,o={"@id":o}),!_0(o))throw new qQ("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var c={};e.mappings.set(r,c),c.reverse=!1;var l=["@container","@id","@language","@reverse","@type"];for(var f in M0.processingMode(e,1.1)&&l.push("@context","@nest","@prefix","@protected"),o)if(!l.includes(f))throw new qQ("Invalid JSON-LD syntax; a term definition must not contain "+f,"jsonld.SyntaxError",{code:"invalid term definition",context:t});var h=r.indexOf(":");if(c._termHasColon=-1!==h,"@reverse"in o){if("@id"in o)throw new qQ("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in o)throw new qQ("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var d=o["@reverse"];if(!k0(d))throw new qQ("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var p=R0(e,d,{vocab:!0,base:!1},t,n,i);if(!E0(p))throw new qQ("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=p,c.reverse=!0}else if("@id"in o){var v=o["@id"];if(!k0(v))throw new qQ("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(v!==r){if(v=R0(e,v,{vocab:!0,base:!1},t,n,i),!E0(v)&&!M0.isKeyword(v))throw new qQ("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=v,c._prefix=!c._termHasColon&&v.match(/[:\/\?#\[\]@]$/)&&(u||M0.processingMode(e,1))}}if(!("@id"in c))if(c._termHasColon){var y=r.substr(0,h);if(t.hasOwnProperty(y)&&M0.createTermDefinition(e,t,y,n,i),e.mappings.has(y)){var g=r.substr(h+1);c["@id"]=e.mappings.get(y)["@id"]+g}else c["@id"]=r}else{if(!("@vocab"in e))throw new qQ("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((!0===o["@protected"]||!0===n.get("@protected")&&!1!==o["@protected"])&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in o){var b=o["@type"];if(!k0(b))throw new qQ("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==b&&"@vocab"!==b&&"@json"!==b){if(b=R0(e,b,{vocab:!0,base:!1},t,n,i),!E0(b))throw new qQ("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===b.indexOf("_:"))throw new qQ("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=b}if("@container"in o){var m=k0(o["@container"])?[o["@container"]]:o["@container"]||[],w=["@list","@set","@index","@language"],x=!0,_=m.includes("@set");if(M0.processingMode(e,1.1))if(w.push("@graph","@id","@type"),m.includes("@list")){if(1!==m.length)throw new qQ("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(m.includes("@graph")){if(m.some((function(e){return"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e})))throw new qQ("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else x&=m.length<=(_?2:1);else x&=!x0(o["@container"]),x&=m.length<=1;if(x&=m.every((function(e){return w.includes(e)})),!(x&=!(_&&m.includes("@list"))))throw new qQ("Invalid JSON-LD syntax; @context @container value must be one of the following: "+w.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!m.every((function(e){return["@index","@set"].includes(e)})))throw new qQ("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=m}if("@context"in o&&(c["@context"]=o["@context"]),"@language"in o&&!("@type"in o)){var k=o["@language"];if(null!==k&&!k0(k))throw new qQ("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==k&&(k=k.toLowerCase()),c["@language"]=k}if("@prefix"in o){if(c._termHasColon)throw new qQ("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof o["@prefix"])throw new qQ("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});c._prefix=!0===o["@prefix"]}if("@nest"in o){var S=o["@nest"];if(!k0(S)||"@nest"!==S&&0===S.indexOf("@"))throw new qQ("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=S}// disallow aliasing @context and @preserve
var E=c["@id"];if("@context"===E||"@preserve"===E)throw new qQ("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(s&&s.protected&&!a&&(e.protected[r]=!0,c.protected=!0,!D0(s,c))){var I=i&&i.protectedMode||"error";if("error"===I)throw new qQ("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r});if("warn"===I)return void console.warn("WARNING: protected term redefinition",{term:r});throw new qQ("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:r,protectedMode:I})}},M0.expandIri=function(e,t,r,n){return R0(e,t,r,void 0,void 0,n)},M0.getInitialContext=function(e){var t=T0(e.base||""),r=JSON.stringify({base:t,processingMode:e.processingMode}),n=C0.get(r);if(n)return n;var i={"@base":t,processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){var e=this;if(e.inverse)return e.inverse;var t,r=e.inverse={},n=e.fastCurieMap={},i={},s=e["@language"]||"@none",u=e.mappings,c=C(E(u.keys()).sort(O0));try{for(c.s();!(t=c.n()).done;){var l=t.value,f=u.get(l);if(null!==f){var h=f["@container"]||"@none";h=[].concat(h).sort().join("");var d,p=C(P0(f["@id"]));try{for(p.s();!(d=p.n()).done;){var v=d.value,y=r[v],g=M0.isKeyword(v);if(y)g||f._termHasColon||i[v].push(l);else if(r[v]=y={},!g&&!f._termHasColon){i[v]=[l];var b={iri:v,terms:i[v]};v[0]in n?n[v[0]].push(b):n[v[0]]=[b]}if(y[h]||(y[h]={"@language":{},"@type":{},"@any":{}}),o(l,(y=y[h])["@any"],"@none"),f.reverse)o(l,y["@type"],"@reverse");else if("@type"in f)o(l,y["@type"],f["@type"]);else if("@language"in f){var m=f["@language"]||"@null";o(l,y["@language"],m)}else o(l,y["@language"],s),o(l,y["@type"],"@none"),o(l,y["@language"],"@none")}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var w in n)a(n,w,1);return r},clone:function(){var e={};return e["@base"]=this["@base"],e.mappings=e0.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=e0.clone(this.protected),this.previousContext&&(e.isPropertyTermScoped=this.previousContext.isPropertyTermScoped,e.previousContext=this.previousContext.clone()),e.revertTypeScopedContext=this.revertTypeScopedContext,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertTypeScopedContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===C0.size&&C0.clear(),C0.set(r,i),i;function a(e,t,r){var n,i,o,s=e[t],u=e[t]={},c=C(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;(i=r>=(n=l.iri).length?"":n[r])in u?u[i].push(l):u[i]=[l]}}catch(e){c.e(e)}finally{c.f()}for(var f in u)""!==f&&a(u,f,r+1)}function o(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},M0.getContextValue=function(e,t,r){if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){var n=e.mappings.get(t);if(S0(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&e.hasOwnProperty(r)?e[r]:"@context"!==r?null:void 0},M0.getAllContexts=function(){var e=w0(Wt.mark((function e(t,r){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(e,t){return L0.apply(this,arguments)}(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),M0.processingMode=function(e,t){return t.toString()>="1.1"?e.processingMode&&e.processingMode>="json-ld-"+t.toString():!e.processingMode||"json-ld-1.0"===e.processingMode},M0.isKeyword=function(e){if(!k0(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};var B0=HQ.isArray,U0=HQ.isObject,F0=HQ.isEmptyObject,z0=HQ.isString,H0=HQ.isUndefined,V0=KQ.isList,K0=KQ.isValue,q0=KQ.isGraph,W0=N0.expandIri,G0=N0.getContextValue,J0=N0.isKeyword,X0=N0.process,$0=N0.processingMode,Y0=g0.isAbsolute,Z0=e0.addValue,Q0=e0.asArray,e1=e0.getValues,t1=e0.validateTypeValue,r1={},n1=r1;function i1(e){var t,r=e.activeCtx,n=e.activeProperty,i=e.expandedActiveProperty,a=e.element,o=e.expandedParent,s=e.options,u=void 0===s?{}:s,c=e.insideList,l=e.expansionMap,f=[],h=C(Object.keys(a).sort());try{for(h.s();!(t=h.n()).done;){var d=t.value,p=void 0,v=a[d];if("@context"!==d){var y=W0(r,d,{vocab:!0},u);if(null!==y&&(Y0(y)||J0(y))||void 0!==(y=l({unmappedProperty:d,activeCtx:r,activeProperty:n,parent:a,options:u,insideList:c,value:v,expandedParent:o}))){if(J0(y)){if("@reverse"===i)throw new qQ("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:v});if(y in o)throw new qQ("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:y})}if("@id"!==y)if("@type"!==y){if("@graph"===y&&!U0(v)&&!B0(v))throw new qQ('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:v});if("@value"!==y)if("@language"!==y)if("@index"!==y)if("@reverse"!==y)if("@nest"!==y){var g=r,b=G0(r,d,"@context");H0(b)||(g=X0({activeCtx:r,localCtx:b,isPropertyTermScopedContext:!0,options:u}));var m=G0(g,d,"@container")||[];if(m.includes("@language")&&U0(v))p=a1(g,v,u);else if(m.includes("@index")&&U0(v)){var w=m.includes("@graph");p=o1({activeCtx:g,options:u,activeProperty:d,value:v,expansionMap:l,asGraph:w,indexKey:"@index"})}else if(m.includes("@id")&&U0(v)){var x=m.includes("@graph");p=o1({activeCtx:g,options:u,activeProperty:d,value:v,expansionMap:l,asGraph:x,indexKey:"@id"})}else if(m.includes("@type")&&U0(v))p=o1({activeCtx:g.revertTypeScopedContext(),options:u,activeProperty:d,value:v,expansionMap:l,asGraph:!1,indexKey:"@type"});else{var _="@list"===y;if(_||"@set"===y){var k=n;_&&"@graph"===i&&(k=null),p=r1.expand({activeCtx:g,activeProperty:k,element:v,options:u,insideList:_,expansionMap:l})}else p="@json"===G0(r,d,"@type")?{"@type":"@json","@value":v}:r1.expand({activeCtx:g,activeProperty:d,element:v,options:u,insideList:!1,expansionMap:l})}if(null!==p||"@value"===y||void 0!==(p=l({unmappedValue:v,expandedProperty:y,activeCtx:g,activeProperty:n,parent:a,options:u,insideList:c,key:d,expandedParent:o})))if("@list"!==y&&!V0(p)&&m.includes("@list")&&(p={"@list":Q0(p)}),m.includes("@graph")&&!m.some((function(e){return"@id"===e||"@index"===e}))&&(p=Q0(p).map((function(e){return q0(e)?e:{"@graph":Q0(e)}}))),g.mappings.has(d)&&g.mappings.get(d).reverse){var S=o["@reverse"]=o["@reverse"]||{};p=Q0(p);for(var E=0;E<p.length;++E){var I=p[E];if(K0(I)||V0(I))throw new qQ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});Z0(S,y,I,{propertyIsArray:!0})}}else{var A=!["@index","@id","@type","@value","@language"].includes(y);Z0(o,y,p,{propertyIsArray:A})}}else f.push(d);else{if(!U0(v))throw new qQ('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:v});if("@reverse"in(p=r1.expand({activeCtx:r,activeProperty:"@reverse",element:v,options:u,expansionMap:l})))for(var T in p["@reverse"])Z0(o,T,p["@reverse"][T],{propertyIsArray:!0});var P=o["@reverse"]||null;for(var O in p)if("@reverse"!==O){null===P&&(P=o["@reverse"]={}),Z0(P,O,[],{propertyIsArray:!0});for(var M=p[O],N=0;N<M.length;++N){var R=M[N];if(K0(R)||V0(R))throw new qQ('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:p});Z0(P,O,R,{propertyIsArray:!0})}}}else{if(!z0(v))throw new qQ('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:v});Z0(o,"@index",v)}else{if(null===v)continue;if(!z0(v)&&!u.isFrame)throw new qQ('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:v});v=Q0(v).map((function(e){return z0(e)?e.toLowerCase():e})),Z0(o,"@language",v,{propertyIsArray:u.isFrame})}else Z0(o,"@value",v,{propertyIsArray:u.isFrame})}else t1(v),Z0(o,"@type",Q0(v).map((function(e){return z0(e)?W0(r.previousContext||r,e,{base:!0,vocab:!0},u):e})),{propertyIsArray:u.isFrame});else{if(!z0(v)){if(!u.isFrame)throw new qQ('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(U0(v)){if(!F0(v))throw new qQ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}else{if(!B0(v))throw new qQ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v});if(!v.every((function(e){return z0(e)})))throw new qQ('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:v})}}Z0(o,"@id",Q0(v).map((function(e){return z0(e)?W0(r,e,{base:!0},u):e})),{propertyIsArray:u.isFrame})}}}}}catch(e){h.e(e)}finally{h.f()}if("@value"in a){var L=a["@value"];if("@json"===a["@type"]&&$0(r,1.1));else if((U0(L)||B0(L))&&!u.isFrame)throw new qQ('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:L})}for(var j=0,D=f;j<D.length;j++){var B,U=D[j],F=C(B0(a[U])?a[U]:[a[U]]);try{for(F.s();!(B=F.n()).done;){var z=B.value;if(!U0(z)||Object.keys(z).some((function(e){return"@value"===W0(r,e,{vocab:!0},u)})))throw new qQ("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:z});i1({activeCtx:r,activeProperty:n,expandedActiveProperty:i,element:z,expandedParent:o,options:u,insideList:c,expansionMap:l})}}catch(e){F.e(e)}finally{F.f()}}}function a1(e,t,r){var n,i=[],a=C(Object.keys(t).sort());try{for(a.s();!(n=a.n()).done;){var o=n.value,s=W0(e,o,{vocab:!0},r),u=t[o];B0(u)||(u=[u]);var c,l=C(u);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(null!==f){if(!z0(f))throw new qQ("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});var h={"@value":f};"@none"!==s&&(h["@language"]=o.toLowerCase()),i.push(h)}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){a.e(e)}finally{a.f()}return i}function o1(e){var t,r=e.activeCtx,n=e.options,i=e.activeProperty,a=e.value,o=e.expansionMap,s=e.asGraph,u=e.indexKey,c=[],l="@type"===u,f=C(Object.keys(a).sort());try{for(f.s();!(t=f.n()).done;){var h=t.value;if(l){var d=G0(r,h,"@context");H0(d)||(r=X0({activeCtx:r,localCtx:d,isTypeScopedContext:!0,options:n}))}var p=a[h];B0(p)||(p=[p]);var v=W0(r,h,{vocab:!0},n);"@id"===u?h=W0(r,h,{base:!0},n):l&&(h=v);var y,g=C(p=r1.expand({activeCtx:r,activeProperty:i,element:p,options:n,insideList:!1,insideIndex:!0,expansionMap:o}));try{for(g.s();!(y=g.n()).done;){var b=y.value;s&&!q0(b)&&(b={"@graph":[b]}),"@type"===u?"@none"===v||(b["@type"]?b["@type"]=[h].concat(b["@type"]):b["@type"]=[h]):"@none"===v||u in b||(b[u]=h),c.push(b)}}catch(e){g.e(e)}finally{g.f()}}}catch(e){f.e(e)}finally{f.f()}return c}r1.expand=function(e){var t=e.activeCtx,n=e.activeProperty,i=void 0===n?null:n,a=e.element,o=e.options,s=void 0===o?{}:o,u=e.insideList,c=void 0!==u&&u,l=e.insideIndex,f=void 0!==l&&l,h=e.typeScopedContext,d=void 0===h?null:h,p=e.expansionMap,v=void 0===p?function(){}:p;if(null==a)return null;if("@default"===i&&(s=Object.assign({},s,{isFrame:!1})),!B0(a)&&!U0(a)){if(!c&&(null===i||"@graph"===W0(t,i,{vocab:!0},s))){var y=v({unmappedValue:a,activeCtx:t,activeProperty:i,options:s,insideList:c});return void 0===y?null:y}return function(e){var t=e.activeCtx,n=e.activeProperty,i=e.value,a=e.options;if(null==i)return null;var o=W0(t,n,{vocab:!0},a);if("@id"===o)return W0(t,i,{base:!0},a);if("@type"===o)return W0(t,i,{vocab:!0,base:!0},a);var s=G0(t,n,"@type");if(("@id"===s||"@graph"===o)&&z0(i))return{"@id":W0(t,i,{base:!0},a)};if("@vocab"===s&&z0(i))return{"@id":W0(t,i,{vocab:!0,base:!0},a)};if(J0(o))return i;var u={};if(s&&!["@id","@vocab"].includes(s))u["@type"]=s;else if(z0(i)){var c=G0(t,n,"@language");null!==c&&(u["@language"]=c)}return["boolean","number","string"].includes(r(i))||(i=i.toString()),u["@value"]=i,u}({activeCtx:t,activeProperty:i,value:a,options:s})}if(B0(a)){var g=[],b=G0(t,i,"@container")||[];c=c||b.includes("@list");for(var m=0;m<a.length;++m){var w=r1.expand({activeCtx:t,activeProperty:i,element:a[m],options:s,expansionMap:v,insideIndex:f,typeScopedContext:d});c&&B0(w)&&(w={"@list":w}),null===w&&void 0===(w=v({unmappedValue:a[m],activeCtx:t,activeProperty:i,parent:a,index:m,options:s,expandedParent:g,insideList:c}))||(B0(w)?g=g.concat(w):g.push(w))}return g}var x=W0(t,i,{vocab:!0},s);d=d||(t.previousContext?t:null);var _=Object.keys(a).sort(),k=!f;if(k&&d&&_.length<=2&&!_.includes("@context")){var S,E=C(_);try{for(E.s();!(S=E.n()).done;){var I=S.value,A=W0(d,I,{vocab:!0},s);if("@value"===A){k=!1,t=d;break}if("@id"===A&&1===_.length){k=!1;break}}}catch(e){E.e(e)}finally{E.f()}}k&&(t=t.revertTypeScopedContext()),"@context"in a&&(t=X0({activeCtx:t,localCtx:a["@context"],options:s}));var T,P=C(_);try{for(P.s();!(T=P.n()).done;){var O=T.value;if("@type"===W0(t,O,{vocab:!0},s)){var M,N=a[O],R=C(Array.isArray(N)?N.length>1?N.slice().sort():N:[N]);try{for(R.s();!(M=R.n()).done;){var L=M.value,j=G0(t.previousContext||t,L,"@context");H0(j)||(t=X0({activeCtx:t,localCtx:j,options:s,isTypeScopedContext:!0}))}}catch(e){R.e(e)}finally{R.f()}}}}catch(e){P.e(e)}finally{P.f()}var D={};i1({activeCtx:t,activeProperty:i,expandedActiveProperty:x,element:a,expandedParent:D,options:s,insideList:c,typeScopedContext:d,expansionMap:v});var B=(_=Object.keys(D)).length;if("@value"in D){if("@type"in D&&"@language"in D)throw new qQ('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:D});var U=B-1;if("@type"in D&&(U-=1),"@index"in D&&(U-=1),"@language"in D&&(U-=1),0!==U)throw new qQ('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:D});var F=null===D["@value"]?[]:Q0(D["@value"]),z=e1(D,"@type");if(0===F.length){var H=v({unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==H?H:null}else{if(!F.every((function(e){return z0(e)||F0(e)}))&&"@language"in D)throw new qQ("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:D});if($0(t,1.1)&&z.includes("@json")&&1===z.length);else if(!z.every((function(e){return Y0(e)&&!(z0(e)&&0===e.indexOf("_:"))||F0(e)})))throw new qQ('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:D})}}else if("@type"in D&&!B0(D["@type"]))D["@type"]=[D["@type"]];else if("@set"in D||"@list"in D){if(B>1&&(2!==B||!("@index"in D)))throw new qQ('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:D});"@set"in D&&(D=D["@set"],B=(_=Object.keys(D)).length)}else if(1===B&&"@language"in D){var V=v(D,{unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==V?V:null}if(U0(D)&&!s.keepFreeFloatingNodes&&!c&&(null===i||"@graph"===x)&&(0===B||"@value"in D||"@list"in D||1===B&&"@id"in D)){var K=v({unmappedValue:D,activeCtx:t,activeProperty:i,element:a,options:s,insideList:c});D=void 0!==K?K:null}return D};var s1=N0.isKeyword,u1={},c1=u1;u1.createMergedNodeMap=function(e,t){var r=(t=t||{}).issuer||new e0.IdentifierIssuer("_:b"),n={"@default":{}};return u1.createNodeMap(e,n,"@default",r),u1.mergeNodeMaps(n)},u1.createNodeMap=function(e,t,r,n,i,a){if(HQ.isArray(e)){var o,s=C(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;u1.createNodeMap(u,t,r,n,void 0,a)}}catch(e){s.e(e)}finally{s.f()}}else if(HQ.isObject(e))if(KQ.isValue(e)){if("@type"in e){var c=e["@type"];0===c.indexOf("_:")&&(e["@type"]=c=n.getId(c))}a&&a.push(e)}else{if(a&&KQ.isList(e)){var l=[];return u1.createNodeMap(e["@list"],t,r,n,i,l),void a.push({"@list":l})}if("@type"in e){var f,h=C(e["@type"]);try{for(h.s();!(f=h.n()).done;){var d=f.value;0===d.indexOf("_:")&&n.getId(d)}}catch(e){h.e(e)}finally{h.f()}}HQ.isUndefined(i)&&(i=KQ.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),a&&a.push({"@id":i});var p=t[r],v=p[i]=p[i]||{};v["@id"]=i;var y,g=C(Object.keys(e).sort());try{for(g.s();!(y=g.n()).done;){var b=y.value;if("@id"!==b)if("@reverse"!==b)if("@graph"!==b)if("@type"!==b&&s1(b)){if("@index"===b&&b in v&&(e[b]!==v[b]||e[b]["@id"]!==v[b]["@id"]))throw new qQ("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:v});v[b]=e[b]}else{var m=e[b];if(0===b.indexOf("_:")&&(b=n.getId(b)),0!==m.length){var w,x=C(m);try{for(x.s();!(w=x.n()).done;){var _=w.value;if("@type"===b&&(_=0===_.indexOf("_:")?n.getId(_):_),KQ.isSubject(_)||KQ.isSubjectReference(_)){var k=KQ.isBlankNode(_)?n.getId(_["@id"]):_["@id"];e0.addValue(v,b,{"@id":k},{propertyIsArray:!0,allowDuplicate:!1}),u1.createNodeMap(_,t,r,n,k)}else if(KQ.isValue(_))e0.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1});else if(KQ.isList(_)){var S=[];u1.createNodeMap(_["@list"],t,r,n,i,S),_={"@list":S},e0.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}else u1.createNodeMap(_,t,r,n,i),e0.addValue(v,b,_,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){x.e(e)}finally{x.f()}}else e0.addValue(v,b,[],{propertyIsArray:!0})}else i in t||(t[i]={}),u1.createNodeMap(e[b],t,i,n);else{var E={"@id":i},I=e["@reverse"];for(var A in I){var T,P=C(I[A]);try{for(P.s();!(T=P.n()).done;){var O=T.value,M=O["@id"];KQ.isBlankNode(O)&&(M=n.getId(M)),u1.createNodeMap(O,t,r,n,M),e0.addValue(p[M],A,E,{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){P.e(e)}finally{P.f()}}}}}catch(e){g.e(e)}finally{g.f()}}else a&&a.push(e)},u1.mergeNodeMapGraphs=function(e){var t,r={},n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=C(Object.keys(e[a]).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e[a][s];s in r||(r[s]={"@id":s});var c,l=r[s],f=C(Object.keys(u).sort());try{for(f.s();!(c=f.n()).done;){var h=c.value;if(s1(h))l[h]=e0.clone(u[h]);else{var d,p=C(u[h]);try{for(p.s();!(d=p.n()).done;){var v=d.value;e0.addValue(l,h,e0.clone(v),{propertyIsArray:!0,allowDuplicate:!1})}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}return r},u1.mergeNodeMaps=function(e){var t,r=e["@default"],n=C(Object.keys(e).sort());try{for(n.s();!(t=n.n()).done;){var i=t.value;if("@default"!==i){var a=e[i],o=r[i];o?"@graph"in o||(o["@graph"]=[]):r[i]=o={"@id":i,"@graph":[]};var s,u=o["@graph"],c=C(Object.keys(a).sort());try{for(c.s();!(s=c.n()).done;){var l=a[s.value];KQ.isSubjectReference(l)||u.push(l)}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){n.e(e)}finally{n.f()}return r};var l1=KQ.isSubjectReference,f1=c1.createMergedNodeMap,h1={},d1=h1;function p1(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}h1.flatten=function(e){for(var t=f1(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var a=t[n[i]];l1(a)||r.push(a)}return r};var v1=c0.RDF_LIST,y1=c0.RDF_FIRST,g1=c0.RDF_REST,b1=c0.RDF_NIL,m1=c0.RDF_TYPE,w1=c0.RDF_JSON_LITERAL,x1=c0.XSD_BOOLEAN,_1=c0.XSD_DOUBLE,k1=c0.XSD_INTEGER,S1=c0.XSD_STRING,E1={},I1=E1;function A1(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype.value;if(n||(n=S1),n===w1){n="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(e){throw new qQ("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:e})}}if(t){if(n===x1)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(HQ.isNumeric(r["@value"]))if(n===k1){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===_1&&(r["@value"]=parseFloat(r["@value"]));[x1,k1,_1,S1].includes(n)||(r["@type"]=n)}else n!==S1&&(r["@type"]=n)}return r}E1.fromRDF=function(){var e,t=(e=Wt.mark((function e(t,r){var n,i,a,o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k,S,E,I,A,T,P,O,M,N,R,L,j,D,B,U,F,z,H,V,K,q,W,G,J,X,$;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.useRdfType,i=void 0!==n&&n,a=r.useNativeTypes,o=void 0!==a&&a,u={"@default":s={}},c={},l=C(t),e.prev=3,l.s();case 5:if((f=l.n()).done){e.next=19;break}if(h=f.value,(d="DefaultGraph"===h.graph.termType?"@default":h.graph.value)in u||(u[d]={}),"@default"===d||d in s||(s[d]={"@id":d}),p=u[d],v=h.subject.value,y=h.predicate.value,g=h.object,v in p||(p[v]={"@id":v}),b=p[v],(m=g.termType.endsWith("Node"))&&!(g.value in p)&&(p[g.value]={"@id":g.value}),y!==m1||i||!m){e.next=15;break}return e0.addValue(b,"@type",g.value,{propertyIsArray:!0}),e.abrupt("continue",17);case 15:w=A1(g,o),e0.addValue(b,y,w,{propertyIsArray:!0}),m&&(g.value===b1?("usages"in(x=p[g.value])||(x.usages=[]),x.usages.push({node:b,property:y,value:w})):g.value in c?c[g.value]=!1:c[g.value]={node:b,property:y,value:w});case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:e.t1=Wt.keys(u);case 28:if((e.t2=e.t1()).done){e.next=37;break}if(_=e.t2.value,k=u[_],b1 in k){e.next=33;break}return e.abrupt("continue",28);case 33:if((S=k[b1]).usages){E=C(S.usages);try{for(E.s();!(I=E.n()).done;){for(A=I.value,T=A.node,P=A.property,O=A.value,M=[],N=[],R=Object.keys(T).length;P===g1&&HQ.isObject(c[T["@id"]])&&HQ.isArray(T[y1])&&1===T[y1].length&&HQ.isArray(T[g1])&&1===T[g1].length&&(3===R||4===R&&HQ.isArray(T["@type"])&&1===T["@type"].length&&T["@type"][0]===v1)&&(M.push(T[y1][0]),N.push(T["@id"]),A=c[T["@id"]],T=A.node,P=A.property,O=A.value,R=Object.keys(T).length,KQ.isBlankNode(T)););for(delete O["@id"],O["@list"]=M.reverse(),L=0,j=N;L<j.length;L++)D=j[L],delete k[D]}}catch(e){E.e(e)}finally{E.f()}delete S.usages}e.next=28;break;case 37:B=[],U=Object.keys(s).sort(),F=C(U);try{for(F.s();!(z=F.n()).done;){if(H=z.value,V=s[H],H in u){K=V["@graph"]=[],q=u[H],W=Object.keys(q).sort(),G=C(W);try{for(G.s();!(J=G.n()).done;)X=J.value,$=q[X],KQ.isSubjectReference($)||K.push($)}catch(e){G.e(e)}finally{G.f()}}KQ.isSubjectReference(V)||B.push(V)}}catch(e){F.e(e)}finally{F.f()}return e.abrupt("return",B);case 41:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){p1(a,n,i,o,s,"next",e)}function s(e){p1(a,n,i,o,s,"throw",e)}o(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();var T1=c1.createNodeMap,P1=N0.isKeyword,O1=c0.RDF_FIRST,C1=c0.RDF_REST,M1=c0.RDF_NIL,N1=c0.RDF_TYPE,R1=c0.RDF_JSON_LITERAL,L1=c0.RDF_LANGSTRING,j1=c0.XSD_BOOLEAN,D1=c0.XSD_DOUBLE,B1=c0.XSD_INTEGER,U1=c0.XSD_STRING,F1=g0.isAbsolute,z1={},H1=z1;function V1(e,t,r,n,i){var a,o=C(Object.keys(t).sort());try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=t[u],l=C(Object.keys(c).sort());try{for(l.s();!(s=l.n()).done;){var f=s.value,h=c[f];if("@type"===f)f=N1;else if(P1(f))continue;var d,p=C(h);try{for(p.s();!(d=p.n()).done;){var v=d.value,y={termType:u.startsWith("_:")?"BlankNode":"NamedNode",value:u};if(F1(u)){var g={termType:f.startsWith("_:")?"BlankNode":"NamedNode",value:f};if(F1(f)&&("BlankNode"!==g.termType||i.produceGeneralizedRdf)){var b=K1(v,n,e,r);b&&e.push({subject:y,predicate:g,object:b,graph:r})}}}}catch(e){p.e(e)}finally{p.f()}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}}function K1(e,t,r,n){var i={};if(KQ.isValue(e)){i.termType="Literal",i.value=void 0,i.datatype={termType:"NamedNode"};var a=e["@value"],o=e["@type"]||null;"@json"===o?(i.value=sZ(a),i.datatype.value=R1):HQ.isBoolean(a)?(i.value=a.toString(),i.datatype.value=o||j1):HQ.isDouble(a)||o===D1?(HQ.isDouble(a)||(a=parseFloat(a)),i.value=a.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),i.datatype.value=o||D1):HQ.isNumber(a)?(i.value=a.toFixed(0),i.datatype.value=o||B1):"@language"in e?(i.value=a,i.datatype.value=o||L1,i.language=e["@language"]):(i.value=a,i.datatype.value=o||U1)}else if(KQ.isList(e)){var s=function(e,t,r,n){var i,a={termType:"NamedNode",value:O1},o={termType:"NamedNode",value:C1},s={termType:"NamedNode",value:M1},u=e.pop(),c=u?{termType:"BlankNode",value:t.getId()}:s,l=c,f=C(e);try{for(f.s();!(i=f.n()).done;){var h=K1(i.value,t,r,n),d={termType:"BlankNode",value:t.getId()};r.push({subject:l,predicate:a,object:h,graph:n}),r.push({subject:l,predicate:o,object:d,graph:n}),l=d}}catch(e){f.e(e)}finally{f.f()}if(u){var p=K1(u,t,r,n);r.push({subject:l,predicate:a,object:p,graph:n}),r.push({subject:l,predicate:o,object:s,graph:n})}return c}(e["@list"],t,r,n);i.termType=s.termType,i.value=s.value}else{var u=HQ.isObject(e)?e["@id"]:e;i.termType=u.startsWith("_:")?"BlankNode":"NamedNode",i.value=u}return"NamedNode"!==i.termType||F1(i.value)?i:null}z1.toRDF=function(e,t){var r=new e0.IdentifierIssuer("_:b"),n={"@default":{}};T1(e,n,"@default",r);var i,a=[],o=C(Object.keys(n).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=void 0;if("@default"===s)u={termType:"DefaultGraph",value:""};else{if(!F1(s))continue;(u=s.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=s}V1(a,n[s],u,r,t)}}catch(e){o.e(e)}finally{o.f()}return a};var q1=N0.isKeyword,W1=c1.createNodeMap,G1=c1.mergeNodeMapGraphs,J1={},X1=J1;function $1(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function Y1(e,t,r){for(var n=r.length-1;n>=0;--n){var i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function Z1(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function Q1(e){if(!HQ.isArray(e)||1!==e.length||!HQ.isObject(e[0]))throw new qQ("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function e2(e,t,n,i){var a=!0,o=!1,s=function(s){var u=!1,c=e0.getValues(t,s),l=0===e0.getValues(n,s).length;if(q1(s)){if("@id"!==s&&"@type"!==s)return"continue";if(a=!1,"@id"===s)return n["@id"].length>=0&&!HQ.isEmptyObject(n["@id"][0])?{v:n["@id"].includes(c[0])}:(u=!0,"continue");if("@type"in n)if(l){if(c.length>0)return{v:!1};u=!0}else{if(1!==n["@type"].length||!HQ.isEmptyObject(n["@type"][0])){var f,h=C(n["@type"]);try{var d=function(){var e=f.value;if(c.some((function(t){return t===e})))return{v:{v:!0}}};for(h.s();!(f=h.n()).done;){var p=d();if("object"===r(p))return p.v}}catch(e){h.e(e)}finally{h.f()}return{v:!1}}u=c.length>0}}var v=e0.getValues(n,s)[0],y=!1;if(v&&(Q1([v]),y="@default"in v),a=!1,0!==c.length||!y){if(c.length>0&&l)return{v:!1};if(void 0===v){if(c.length>0)return{v:!1};u=!0}else if(HQ.isObject(v))u=c.length>0;else if(KQ.isValue(v))u=c.some((function(e){return i2(v,e)}));else if(KQ.isSubject(v)||KQ.isSubjectReference(v))u=c.some((function(t){return n2(e,v,t,i)}));else if(KQ.isList(v)){var g=v["@list"][0];if(KQ.isList(c[0])){var b=c[0]["@list"];KQ.isValue(g)?u=b.some((function(e){return i2(g,e)})):(KQ.isSubject(g)||KQ.isSubjectReference(g))&&(u=b.some((function(t){return n2(e,g,t,i)})))}else u=!1}if(!u&&i.requireAll)return{v:!1};o=o||u}};for(var u in n){var c=s(u);if("continue"!==c&&"object"===r(c))return c.v}return a||o}function t2(e,t){var r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,a=n.property,o={"@id":t};if(HQ.isArray(i)){for(var s=0;s<i.length;++s)if(e0.compareValues(i[s],o)){i[s]=o;break}}else{var u=HQ.isArray(i[a]);e0.removeValue(i,a,o,{propertyIsArray:u}),e0.addValue(i,a,o,{propertyIsArray:u})}!function e(t){for(var n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];a in r&&HQ.isObject(r[a].parent)&&r[a].parent["@id"]===t&&(delete r[a],e(a))}}(t)}function r2(e,t,r){HQ.isObject(e)?e0.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function n2(e,t,r,n){if(!("@id"in r))return!1;var i=e.subjects[r["@id"]];return i&&e2(e,i,t,n)}function i2(e,t){var r=t["@value"],n=t["@type"],i=t["@language"],a=e["@value"]?HQ.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],o=e["@type"]?HQ.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],s=e["@language"]?HQ.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===o.length&&0===s.length||!(!a.includes(r)&&!HQ.isEmptyObject(a[0]))&&!!(!n&&0===o.length||o.includes(n)||n&&HQ.isEmptyObject(o[0]))&&!!(!i&&0===s.length||s.includes(i)||i&&HQ.isEmptyObject(s[0]))}J1.frameMergedOrDefault=function(e,t,r){var n={options:r,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},i=new e0.IdentifierIssuer("_:b");W1(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=G1(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];var a=[];return J1.frame(n,Object.keys(n.subjects).sort(),t,a),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((function(e){return 1===n.bnodeMap[e].length}))),a},J1.frame=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Q1(r),r=r[0];var a,o=e.options,s={embed:Z1(r,o,"embed"),explicit:Z1(r,o,"explicit"),requireAll:Z1(r,o,"requireAll")},c=function(e,t,r,n){var i,a={},o=C(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=e.graphMap[e.graph][s];e2(e,u,r,n)&&(a[s]=u)}}catch(e){o.e(e)}finally{o.f()}return a}(e,t,r,s),l=Object.keys(c).sort(),f=C(l);try{var h=function(){var t=a.value,l=c[t];if("@link"===s.embed&&t in e.link)return r2(n,i,e.link[t]),"continue";null===i?e.uniqueEmbeds=u({},e.graph,{}):e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};var f={};if(f["@id"]=t,0===t.indexOf("_:")&&e0.addValue(e.bnodeMap,t,f,{propertyIsArray:!0}),e.link[t]=f,"@never"===s.embed||Y1(l,e.graph,e.subjectStack))r2(n,i,f);else{if("@last"===s.embed&&(t in e.uniqueEmbeds[e.graph]&&t2(e,t),e.uniqueEmbeds[e.graph][t]={parent:n,property:i}),e.subjectStack.push({subject:l,graph:e.graph}),t in e.graphMap){var h=!1,d=null;"@graph"in r?(d=r["@graph"][0],HQ.isObject(d)||(d={}),h=!("@merged"===t||"@default"===t)):(h="@merged"!==e.graph,d={}),h&&(e.graphStack.push(e.graph),e.graph=t,J1.frame(e,Object.keys(e.graphMap[t]).sort(),[d],f,"@graph"),e.graph=e.graphStack.pop)}var p,v=C(Object.keys(l).sort());try{for(v.s();!(p=v.n()).done;){var y=p.value;if(q1(y)){if(f[y]=e0.clone(l[y]),"@type"===y){var g,b=C(l["@type"]);try{for(b.s();!(g=b.n()).done;){var m=g.value;0===m.indexOf("_:")&&e0.addValue(e.bnodeMap,m,f,{propertyIsArray:!0})}}catch(e){b.e(e)}finally{b.f()}}}else if(!s.explicit||y in r){var w,x=C(l[y]);try{for(x.s();!(w=x.n()).done;){var _=w.value,k=y in r?r[y]:$1(s);if(KQ.isList(_)){var S={"@list":[]};r2(f,y,S);var E=_["@list"];for(var I in E)if(_=E[I],KQ.isSubjectReference(_)){var A=y in r?r[y][0]["@list"]:$1(s);J1.frame(e,[_["@id"]],A,S,"@list")}else r2(S,"@list",e0.clone(_))}else KQ.isSubjectReference(_)?J1.frame(e,[_["@id"]],k,f,y):i2(k[0],_)&&r2(f,y,e0.clone(_))}}catch(e){x.e(e)}finally{x.f()}}}}catch(e){v.e(e)}finally{v.f()}var T,P=C(Object.keys(r).sort());try{for(P.s();!(T=P.n()).done;){var O=T.value;if(!q1(O)){var M=r[O][0]||{};if(!Z1(M,o,"omitDefault")&&!(O in f)){var N="@null";"@default"in M&&(N=e0.clone(M["@default"])),HQ.isArray(N)||(N=[N]),f[O]=[{"@preserve":N}]}}}}catch(e){P.e(e)}finally{P.f()}if("@reverse"in r){var R,L=C(Object.keys(r["@reverse"]).sort());try{for(L.s();!(R=L.n()).done;)for(var j=R.value,D=r["@reverse"][j],B=0,U=Object.keys(e.subjects);B<U.length;B++){var F=U[B];e0.getValues(e.subjects[F],j).some((function(e){return e["@id"]===t}))&&(f["@reverse"]=f["@reverse"]||{},e0.addValue(f["@reverse"],j,[],{propertyIsArray:!0}),J1.frame(e,[F],D,f["@reverse"][j],i))}}catch(e){L.e(e)}finally{L.f()}}r2(n,i,f),e.subjectStack.pop()}};for(f.s();!(a=f.n()).done;)h()}catch(e){f.e(e)}finally{f.f()}};var a2=HQ.isArray,o2=HQ.isObject,s2=HQ.isString,u2=HQ.isUndefined,c2=KQ.isList,l2=KQ.isValue,f2=KQ.isGraph,h2=KQ.isSimpleGraph,d2=KQ.isSubjectReference,p2=N0.expandIri,v2=N0.getContextValue,y2=N0.isKeyword,g2=N0.process,b2=g0.removeBase,m2=e0.addValue,w2=e0.asArray,x2=e0.compareShortestLeast,_2={},k2=_2;function S2(e,t,r){if("@nest"!==p2(e,t,{vocab:!0},r))throw new qQ("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}function E2(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}_2.compact=function(e){var t,r=e.activeCtx,n=e.activeProperty,i=void 0===n?null:n,a=e.element,o=e.options,s=void 0===o?{}:o,c=e.compactionMap,l=void 0===c?function(){}:c;if(a2(a)){for(var f=[],h=0;h<a.length;++h){var d=_2.compact({activeCtx:r,activeProperty:i,element:a[h],options:s,compactionMap:l});null===d&&void 0===(d=l({unmappedValue:a[h],activeCtx:r,activeProperty:i,parent:a,index:h,options:s}))||f.push(d)}return s.compactArrays&&1===f.length&&0===(v2(r,i,"@container")||[]).length&&(f=f[0]),f}var p=v2(r,i,"@context");if(u2(p)||(r=g2({activeCtx:r,localCtx:p,isPropertyTermScopedContext:!0,options:s})),o2(a)){if(s.link&&"@id"in a&&s.link.hasOwnProperty(a["@id"]))for(var v=s.link[a["@id"]],y=0;y<v.length;++y)if(v[y].expanded===a)return v[y].compacted;if(l2(a)||d2(a)){var g=_2.compactValue({activeCtx:r,activeProperty:i,value:a,options:s});return s.link&&d2(a)&&(s.link.hasOwnProperty(a["@id"])||(s.link[a["@id"]]=[]),s.link[a["@id"]].push({expanded:a,compacted:g})),g}if(c2(a)&&(v2(r,i,"@container")||[]).includes("@list"))return _2.compact({activeCtx:r,activeProperty:i,element:a["@list"],options:s,compactionMap:l});var b="@reverse"===i,m={};r=r.revertTypeScopedContext(),s.link&&"@id"in a&&(s.link.hasOwnProperty(a["@id"])||(s.link[a["@id"]]=[]),s.link[a["@id"]].push({expanded:a,compacted:m}));var w=a["@type"]||[];w.length>1&&(w=Array.from(w).sort());var x,_=r,k=C(w);try{for(k.s();!(x=k.n()).done;){var E=x.value,I=_2.compactIri({activeCtx:_,iri:E,relativeTo:{vocab:!0}}),A=v2(_,I,"@context");u2(A)||(r=g2({activeCtx:r,localCtx:A,options:s,isTypeScopedContext:!0}))}}catch(e){k.e(e)}finally{k.f()}var T,P=C(Object.keys(a).sort());try{for(P.s();!(T=P.n()).done;){var O=T.value,M=a[O];if("@id"!==O&&"@type"!==O)if("@reverse"!==O)if("@preserve"!==O)if("@index"!==O)if("@graph"!==O&&"@list"!==O&&y2(O)){var N=_2.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});m2(m,N,M)}else{if(!a2(M))throw new qQ("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===M.length){var R=_2.compactIri({activeCtx:r,iri:O,value:M,relativeTo:{vocab:!0},reverse:b}),L=r.mappings.has(R)?r.mappings.get(R)["@nest"]:null,j=m;L&&(S2(r,L,s),o2(m[L])||(m[L]={}),j=m[L]),m2(j,R,M,{propertyIsArray:!0})}var D,B=C(M);try{for(B.s();!(D=B.n()).done;){var U=D.value,F=_2.compactIri({activeCtx:r,iri:O,value:U,relativeTo:{vocab:!0},reverse:b}),z=r.mappings.has(F)?r.mappings.get(F)["@nest"]:null,H=m;z&&(S2(r,z,s),o2(m[z])||(m[z]={}),H=m[z]);var V=v2(r,F,"@container")||[],K=f2(U),q=c2(U),W=void 0;q?W=U["@list"]:K&&(W=U["@graph"]);var G=_2.compact({activeCtx:r,activeProperty:F,element:q||K?W:U,options:s,compactionMap:l});if(q){if(a2(G)||(G=[G]),V.includes("@list")){m2(H,F,G,{valueIsArray:!0,allowDuplicate:!0});continue}G=u({},_2.compactIri({activeCtx:r,iri:"@list",relativeTo:{vocab:!0}}),G),"@index"in U&&(G[_2.compactIri({activeCtx:r,iri:"@index",relativeTo:{vocab:!0}})]=U["@index"])}if(K)if(V.includes("@graph")&&(V.includes("@id")||V.includes("@index")&&h2(U))){var J=void 0;H.hasOwnProperty(F)?J=H[F]:H[F]=J={};var X=(V.includes("@id")?U["@id"]:U["@index"])||_2.compactIri({activeCtx:r,iri:"@none",vocab:!0});m2(J,X,G,{propertyIsArray:!s.compactArrays||V.includes("@set")})}else V.includes("@graph")&&h2(U)||(a2(G)&&1===G.length&&s.compactArrays&&(G=G[0]),G=u({},_2.compactIri({activeCtx:r,iri:"@graph",relativeTo:{vocab:!0}}),G),"@id"in U&&(G[_2.compactIri({activeCtx:r,iri:"@id",relativeTo:{vocab:!0}})]=U["@id"]),"@index"in U&&(G[_2.compactIri({activeCtx:r,iri:"@index",relativeTo:{vocab:!0}})]=U["@index"])),m2(H,F,G,{propertyIsArray:!s.compactArrays||V.includes("@set")});else if(V.includes("@language")||V.includes("@index")||V.includes("@id")||V.includes("@type")){var $=void 0,Y=void 0;if(H.hasOwnProperty(F)?$=H[F]:H[F]=$={},V.includes("@language"))l2(G)&&(G=G["@value"]),Y=U["@language"];else if(V.includes("@index"))Y=U["@index"];else if(V.includes("@id")){var Z=_2.compactIri({activeCtx:r,iri:"@id",vocab:!0});Y=G[Z],delete G[Z]}else if(V.includes("@type")){var Q,ee=_2.compactIri({activeCtx:r,iri:"@type",vocab:!0});switch(Y=(t=S(w2(G[ee]||[])))[0],(Q=t.slice(1)).length){case 0:delete G[ee];break;case 1:G[ee]=Q[0];break;default:G[ee]=Q}}Y||(Y=_2.compactIri({activeCtx:r,iri:"@none",vocab:!0})),m2($,Y,G,{propertyIsArray:V.includes("@set")})}else{var te=!s.compactArrays||V.includes("@set")||V.includes("@list")||a2(G)&&0===G.length||"@list"===O||"@graph"===O;m2(H,F,G,{propertyIsArray:te})}}}catch(e){B.e(e)}finally{B.f()}}else{if((v2(r,i,"@container")||[]).includes("@index"))continue;var re=_2.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});m2(m,re,M)}else{var ne=_2.compact({activeCtx:r,activeProperty:i,element:M,options:s,compactionMap:l});a2(ne)&&0===ne.length||m2(m,O,ne)}else{var ie=_2.compact({activeCtx:r,activeProperty:"@reverse",element:M,options:s,compactionMap:l});for(var ae in ie)if(r.mappings.has(ae)&&r.mappings.get(ae).reverse){var oe=ie[ae],se=(v2(r,ae,"@container")||[]).includes("@set")||!s.compactArrays;m2(m,ae,oe,{propertyIsArray:se}),delete ie[ae]}if(Object.keys(ie).length>0){var ue=_2.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}});m2(m,ue,ie)}}else!function(){var e="@type"===O,t=e&&r.previousContext||r,n=w2(M).map((function(r){return _2.compactIri({activeCtx:t,iri:r,relativeTo:{vocab:e}})}));1===n.length&&(n=n[0]);var i=_2.compactIri({activeCtx:r,iri:O,relativeTo:{vocab:!0}}),a=a2(n)&&0===M.length;m2(m,i,n,{propertyIsArray:a})}()}}catch(e){P.e(e)}finally{P.f()}return m}return a},_2.compactIri=function(e){var t=e.activeCtx,r=e.iri,n=e.value,i=void 0===n?null:n,a=e.relativeTo,o=void 0===a?{vocab:!1}:a,s=e.reverse,u=void 0!==s&&s;if(null===r)return r;t.isPropertyTermScoped&&t.previousContext&&(t=t.previousContext);var c=t.getInverse();if(y2(r)&&r in c&&"@none"in c[r]&&"@type"in c[r]["@none"]&&"@none"in c[r]["@none"]["@type"])return c[r]["@none"]["@type"]["@none"];if(o.vocab&&r in c){var l=t["@language"]||"@none",f=[];o2(i)&&"@index"in i&&!("@graph"in i)&&f.push("@index","@index@set"),o2(i)&&"@preserve"in i&&(i=i["@preserve"][0]),f2(i)?("@index"in i&&f.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i&&f.push("@graph@id","@graph@id@set"),f.push("@graph","@graph@set","@set"),"@index"in i||f.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in i||f.push("@graph@id","@graph@id@set")):o2(i)&&!l2(i)&&f.push("@id","@id@set","@type","@set@type");var h="@language",d="@null";if(u)h="@type",d="@reverse",f.push("@set");else if(c2(i)){"@index"in i||f.push("@list");var p=i["@list"];if(0===p.length)h="@any",d="@none";else{for(var v=0===p.length?l:null,y=null,g=0;g<p.length;++g){var b=p[g],m="@none",w="@none";if(l2(b)?"@language"in b?m=b["@language"]:"@type"in b?w=b["@type"]:m="@null":w="@id",null===v?v=m:m!==v&&l2(b)&&(v="@none"),null===y?y=w:w!==y&&(y="@none"),"@none"===v&&"@none"===y)break}v=v||"@none","@none"!==(y=y||"@none")?(h="@type",d=y):d=v}}else l2(i)?"@language"in i&&!("@index"in i)?(f.push("@language","@language@set"),d=i["@language"]):"@type"in i&&(h="@type",d=i["@type"]):(h="@type",d="@id"),f.push("@set");f.push("@none"),o2(i)&&!("@index"in i)&&f.push("@index","@index@set"),l2(i)&&1===Object.keys(i).length&&f.push("@language","@language@set");var x=function(e,t,r,n,i,a){null===a&&(a="@null");var o=[];if("@id"!==a&&"@reverse"!==a||!d2(r))o.push(a);else{"@reverse"===a&&o.push("@reverse");var s=_2.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(s)&&e.mappings.get(s)&&e.mappings.get(s)["@id"]===r["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}o.push("@none");for(var u=e.inverse[t],c=0;c<n.length;++c){var l=n[c];if(l in u)for(var f=u[l][i],h=0;h<o.length;++h){var d=o[h];if(d in f)return f[d]}}return null}(t,r,i,f,h,d);if(null!==x)return x}if(o.vocab&&"@vocab"in t){var _=t["@vocab"];if(0===r.indexOf(_)&&r!==_){var k=r.substr(_.length);if(!t.mappings.has(k))return k}}for(var S=null,E=[],I=t.fastCurieMap,A=r.length-1,T=0;T<A&&r[T]in I;++T)""in(I=I[r[T]])&&E.push(I[""][0]);for(var P=E.length-1;P>=0;--P){var O,M=E[P],N=C(M.terms);try{for(N.s();!(O=N.n()).done;){var R=O.value,L=R+":"+r.substr(M.iri.length);t.mappings.get(R)._prefix&&(!t.mappings.has(L)||null===i&&t.mappings.get(L)["@id"]===r)&&(null===S||x2(L,S)<0)&&(S=L)}}catch(e){N.e(e)}finally{N.f()}}return null!==S?S:o.vocab?r:b2(t["@base"],r)},_2.compactValue=function(e){var t=e.activeCtx,r=e.activeProperty,n=e.value,i=e.options;if(l2(n)){var a=v2(t,r,"@type"),o=v2(t,r,"@language"),s=v2(t,r,"@container")||[],c="@index"in n&&!s.includes("@index");if(!c&&(n["@type"]===a||n["@language"]===o))return n["@value"];var l=Object.keys(n).length,f=1===l||2===l&&"@index"in n&&!c,h="@language"in t,d=s2(n["@value"]),p=t.mappings.has(r)&&null===t.mappings.get(r)["@language"];if(f&&(!h||!d||p))return n["@value"];var v={};return c&&(v[_2.compactIri({activeCtx:t,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?v[_2.compactIri({activeCtx:t,iri:"@type",relativeTo:{vocab:!0}})]=_2.compactIri({activeCtx:t,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(v[_2.compactIri({activeCtx:t,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),v[_2.compactIri({activeCtx:t,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],v}var y=p2(t,r,{vocab:!0},i),g=v2(t,r,"@type"),b=_2.compactIri({activeCtx:t,iri:n["@id"],relativeTo:{vocab:"@vocab"===g}});return"@id"===g||"@vocab"===g||"@graph"===y?b:u({},_2.compactIri({activeCtx:t,iri:"@id",relativeTo:{vocab:!0}}),b)},
/**
   * Removes the @preserve keywords as the last step of the compaction
   * algorithm when it is running on framed output.
   *
   * @param ctx the active context used to compact the input.
   * @param input the framed, compacted output.
   * @param options the compaction options used.
   *
   * @return the resulting output.
   */
_2.removePreserve=function(e,t,r){if(a2(t)){for(var n=[],i=0;i<t.length;++i){var a=_2.removePreserve(e,t[i],r);null!==a&&n.push(a)}t=n}else if(o2(t)){// remove @preserve
if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(l2(t))return t;if(c2(t))return t["@list"]=_2.removePreserve(e,t["@list"],r),t;var o=_2.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(t.hasOwnProperty(o)){var s=t[o];if(r.link.hasOwnProperty(s)){var u=r.link[s].indexOf(t);if(-1!==u)return r.link[s][u];r.link[s].push(t)}else r.link[s]=[t]}var c=_2.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(var l in t)if(l===o&&r.bnodesToClear.includes(t[l]))delete t[o];else{var f=_2.removePreserve(e,t[l],r),h=v2(e,l,"@container")||[];r.compactArrays&&a2(f)&&1===f.length&&0===h.length&&l!==c&&(f=f[0]),t[l]=f}}return t};var I2=e0.callbackify,A2=e0.normalizeDocumentLoader,T2=function(){function e(){a(this,e),this._requests={},this.add=I2(this.add.bind(this))}return s(e,[{key:"wrapLoader",value:function(e){var t=this;return t._loader=A2(e),function(){return t.add.apply(t,arguments)}}},{key:"add",value:function(e){var t,r=this;return(t=Wt.mark((function(){var t,n;return Wt.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=r,!(n=t._requests[e])){i.next=4;break}return i.abrupt("return",Promise.resolve(n));case 4:return n=t._requests[e]=t._loader(e),i.prev=5,i.next=8,n;case 8:return i.abrupt("return",i.sent);case 9:return i.prev=9,delete t._requests[e],i.finish(9);case 12:case"end":return i.stop()}}),t,null,[[5,,9,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(e){E2(a,n,i,o,s,"next",e)}function s(e){E2(a,n,i,o,s,"throw",e)}o(void 0)}))})()}}]),e}();function P2(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function O2(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){P2(a,n,i,o,s,"next",e)}function s(e){P2(a,n,i,o,s,"throw",e)}o(void 0)}))}}var C2=e0.parseLinkHeader,M2=e0.buildHeaders,N2=c0.LINK_HEADER_REL,R2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{strictSSL:!0,maxRedirects:-1,headers:{}},t=e.secure,r=e.strictSSL,n=void 0===r||r,i=e.maxRedirects,a=void 0===i?-1:i,o=e.request,s=e.headers,u=void 0===s?{}:s;u=M2(u),o=o||k$;var c=k$;return(new T2).wrapLoader((function(e){return l(e,[])}));function l(e,t){return f.apply(this,arguments)}function f(){return(f=O2(Wt.mark((function e(r,i){var s,f,h,d,p,v,y;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.indexOf("http:")||0===r.indexOf("https:")){e.next=2;break}throw new qQ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 2:if(!t||0===r.indexOf("https")){e.next=4;break}throw new qQ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 4:if(null===(f=null)){e.next=7;break}return e.abrupt("return",f);case 7:return e.prev=7,e.next=10,L2(o,{url:r,headers:u,strictSSL:n,followRedirect:!1});case 10:s=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new qQ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:e.t0});case 16:if(d=(h=s).res,p=h.body,f={contextUrl:null,documentUrl:r,document:p||null},v=c.STATUS_CODES[d.statusCode],!(d.statusCode>=400)){e.next=21;break}throw new qQ("URL could not be dereferenced: "+v,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:d.statusCode});case 21:if(!d.headers.link||"application/ld+json"===d.headers["content-type"]){e.next=26;break}if(y=C2(d.headers.link)[N2],!Array.isArray(y)){e.next=25;break}throw new qQ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});case 25:y&&(f.contextUrl=y.target);case 26:if(!(d.statusCode>=300&&d.statusCode<400&&d.headers.location)){e.next=32;break}if(i.length!==a){e.next=29;break}throw new qQ("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:d.statusCode,redirects:i});case 29:if(-1===i.indexOf(r)){e.next=31;break}throw new qQ("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:d.statusCode,redirects:i});case 31:return e.abrupt("return",(i.push(r),l(d.headers.location,i)));case 32:return e.abrupt("return",(i.push(r),f));case 33:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}};function L2(e,t){return new Promise((function(r,n){e(t,(function(e,t,i){e?n(e):r({res:t,body:i})}))}))}function j2(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function D2(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){j2(a,n,i,o,s,"next",e)}function s(e){j2(a,n,i,o,s,"throw",e)}o(void 0)}))}}var B2=e0.parseLinkHeader,U2=e0.buildHeaders,F2=c0.LINK_HEADER_REL,z2=/(^|(\r\n))link:/i,H2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{headers:{}},t=e.secure,r=e.headers,n=void 0===r?{}:r,i=e.xhr;return n=U2(n),(new T2).wrapLoader((function(e){return a.apply(this,arguments)}));function a(){return(a=D2(Wt.mark((function e(r){var a,o,s,u;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===r.indexOf("http:")||0===r.indexOf("https:")){e.next=2;break}throw new qQ('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 2:if(!t||0===r.indexOf("https")){e.next=4;break}throw new qQ('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r});case 4:return e.prev=4,e.next=7,V2(i,r,n);case 7:a=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new qQ("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:e.t0});case 13:if(!(a.status>=400)){e.next=15;break}throw new qQ("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status});case 15:if(o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type"),z2.test(a.getAllResponseHeaders())&&(u=a.getResponseHeader("Link")),!u||"application/ld+json"===s){e.next=20;break}if(u=B2(u)[F2],!Array.isArray(u)){e.next=19;break}throw new qQ("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r});case 19:u&&(o.contextUrl=u.target);case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}};function V2(e,t,r){var n=new(e=e||XMLHttpRequest);return new Promise((function(e,i){for(var a in n.onload=function(){return e(n)},n.onerror=function(e){return i(e)},n.open("GET",t,!0),r)n.setRequestHeader(a,r[a]);n.send()}))}function K2(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function q2(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){K2(a,n,i,o,s,"next",e)}function s(e){K2(a,n,i,o,s,"throw",e)}o(void 0)}))}}
/**
   * A JavaScript implementation of the JSON-LD API.
   *
   * @author Dave Longley
   *
   * @license BSD 3-Clause License
   * Copyright (c) 2011-2017 Digital Bazaar, Inc.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * Redistributions of source code must retain the above copyright notice,
   * this list of conditions and the following disclaimer.
   *
   * Redistributions in binary form must reproduce the above copyright
   * notice, this list of conditions and the following disclaimer in the
   * documentation and/or other materials provided with the distribution.
   *
   * Neither the name of the Digital Bazaar, Inc. nor the names of its
   * contributors may be used to endorse or promote products derived from
   * this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
   * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
   * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
   * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */var W2=e0.IdentifierIssuer,G2=n1.expand,J2=d1.flatten,X2=I1.fromRDF,$2=H1.toRDF,Y2=X1.frameMergedOrDefault,Z2=HQ.isArray,Q2=HQ.isObject,e3=HQ.isString,t3=KQ.isSubjectReference,r3=N0.getInitialContext,n3=N0.process,i3=N0.getAllContexts,a3=k2.compact,o3=k2.compactIri,s3=k2.removePreserve,u3=c1.createNodeMap,c3=c1.createMergedNodeMap,l3=c1.mergeNodeMaps,f3=void 0!==OW&&OW.versions&&OW.versions.node,h3=!f3&&("undefined"!=typeof window||"undefined"!=typeof self),d3=function(e){var t={};function r(t,r){var n=r.documentLoader,i=void 0===n?e.documentLoader:n,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,["documentLoader"]);return Object.assign({},{documentLoader:i},a,t)}return e.compact=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p,v,y,g=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.length<2)){t.next=2;break}throw new TypeError("Could not compact, too few arguments.");case 2:if(null!==i){t.next=4;break}throw new qQ("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});case 4:if(null!==n){t.next=6;break}return t.abrupt("return",null);case 6:if((a=r(a,{base:e3(n)?n:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new W2("_:b")})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,!a.skipExpansion){t.next=12;break}t.t0=n,t.next=15;break;case 12:return t.next=14,e.expand(n,a);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,e.processContext(r3(a),i,a);case 18:s=t.sent,u=a3({activeCtx:s,element:o,options:a,compactionMap:a.compactionMap}),a.compactArrays&&!a.graph&&Z2(u)?1===u.length?u=u[0]:0===u.length&&(u={}):a.graph&&Q2(u)&&(u=[u]),Q2(i)&&"@context"in i&&(i=i["@context"]),i=e0.clone(i),Z2(i)||(i=[i]),c=i,i=[];for(l=0;l<c.length;++l)(!Q2(c[l])||Object.keys(c[l]).length>0)&&i.push(c[l]);if(f=i.length>0,1===i.length&&(i=i[0]),Z2(u))h=o3({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),d=u,u={},f&&(u["@context"]=i),u[h]=d;else if(Q2(u)&&f)for(v in p=u,u={"@context":i},p)u[v]=p[v];return a.framing&&(y=o3({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),// remove @preserve from results
// remove @preserve from results
a.link={},u[y]=s3(s,u[y],a)),t.abrupt("return",u);case 28:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.expand=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i){var a,o,s,u,c,l,f,h=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(h.length<1)){t.next=2;break}throw new TypeError("Could not expand, too few arguments.");case 2:if(!1===(i=r(i,{keepFreeFloatingNodes:!1})).expansionMap&&(i.expansionMap=void 0),a={},o=[],"expandContext"in i&&(s=e0.clone(i.expandContext),Q2(s)&&"@context"in s?a.expandContext=s:a.expandContext={"@context":s},o.push(a.expandContext)),!e3(n)){t.next=12;break}return t.next=8,e.get(n,i);case 8:c=t.sent,u=c.documentUrl,a.input=c.document,c.contextUrl&&(a.remoteContext={"@context":c.contextUrl},o.push(a.remoteContext)),t.next=13;break;case 12:a.input=e0.clone(n);case 13:return"base"in i||(i.base=u||""),t.next=16,i3(a,i);case 16:return l=r3(i),o.forEach((function(e){l=n3({activeCtx:l,localCtx:e,options:i})})),f=G2({activeCtx:l,element:a.input,options:i,expansionMap:i.expansionMap}),t.abrupt("return",(Q2(f)&&"@graph"in f&&1===Object.keys(f).length?f=f["@graph"]:null===f&&(f=[]),Z2(f)||(f=[f]),f));case 20:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.flatten=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i,a){var o,s,u,c=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c.length<1)){t.next=2;break}return t.abrupt("return",new TypeError("Could not flatten, too few arguments."));case 2:return i="function"==typeof i?null:i||null,a=r(a,{base:e3(n)?n:""}),t.next=5,e.expand(n,a);case 5:if(o=t.sent,s=J2(o),null!==i){t.next=9;break}return t.abrupt("return",s);case 9:return a.graph=!0,a.skipExpansion=!0,t.next=12,e.compact(s,i,a);case 12:return u=t.sent,t.abrupt("return",u);case 14:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.frame=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p.length<2)){t.next=2;break}throw new TypeError("Could not frame, too few arguments.");case 2:if(a=r(a,{base:e3(n)?n:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[]}),!e3(i)){t.next=7;break}return t.next=5,e.get(i,a);case 5:o=t.sent,i=o.document,o.contextUrl&&((s=i["@context"])?Z2(s)?s.push(o.contextUrl):s=[s,o.contextUrl]:s=o.contextUrl,i["@context"]=s);case 7:return u=i&&i["@context"]||{},t.next=10,e.expand(n,a);case 10:return c=t.sent,(l=e0.clone(a)).isFrame=!0,l.keepFreeFloatingNodes=!0,t.next=15,e.expand(i,l);case 15:return f=t.sent,l.merged=!("@graph"in i),h=Y2(c,f,l),l.graph=!0,l.skipExpansion=!0,l.link={},l.framing=!0,t.next=21,e.compact(h,u,l);case 21:return d=t.sent,t.abrupt("return",d);case 23:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.link=e0.callbackify(function(){var t=q2(Wt.mark((function t(r,n,i){var a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.abrupt("return",(n&&(a["@context"]=n),a["@embed"]="@link",e.frame(r,a,i)));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e.normalize=e.canonize=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i){var a,o,s,u=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u.length<1)){t.next=2;break}throw new TypeError("Could not canonize, too few arguments.");case 2:if(!("inputFormat"in(i=r(i,{base:e3(n)?n:"",algorithm:"URDNA2015",skipExpansion:!1})))){t.next=7;break}if("application/n-quads"===i.inputFormat||"application/nquads"===i.inputFormat){t.next=5;break}throw new qQ("Unknown canonicalization input format.","jsonld.CanonizeError");case 5:return a=o0.parse(n),t.abrupt("return",E$.canonize(a,i));case 7:return delete(o=e0.clone(i)).format,o.produceGeneralizedRdf=!1,t.next=11,e.toRDF(n,o);case 11:return s=t.sent,t.abrupt("return",E$.canonize(s,i));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.fromRDF=e0.callbackify(function(){var e=q2(Wt.mark((function e(n,i){var a,o,s,u=arguments;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.length<1)){e.next=2;break}throw new TypeError("Could not convert from RDF, too few arguments.");case 2:if(i=r(i,{format:e3(n)?"application/n-quads":void 0}),a=i.format,s=i.rdfParser,!a){e.next=10;break}if(s=s||t[a]){e.next=8;break}throw new qQ("Unknown input format.","jsonld.UnknownFormat",{format:a});case 8:e.next=11;break;case 10:s=function(){return n};case 11:return o=s.length>1?new Promise((function(e,t){s(n,(function(r,n){r?t(r):e(n)}))})):Promise.resolve(s(n)),e.next=14,o;case 14:return o=e.sent,Array.isArray(o)||(o=o0.legacyDatasetToQuads(o)),e.abrupt("return",X2(o,i));case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.toRDF=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i){var a,o,s=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s.length<1)){t.next=2;break}throw new TypeError("Could not convert to RDF, too few arguments.");case 2:if(!(i=r(i,{base:e3(n)?n:"",skipExpansion:!1})).skipExpansion){t.next=6;break}t.t0=n,t.next=9;break;case 6:return t.next=8,e.expand(n,i);case 8:t.t0=t.sent;case 9:if(a=t.t0,o=$2(a,i),!i.format){t.next=17;break}if("application/n-quads"!==i.format&&"application/nquads"!==i.format){t.next=16;break}return t.next=15,o0.serialize(o);case 15:return t.abrupt("return",t.sent);case 16:throw new qQ("Unknown output format.","jsonld.UnknownFormat",{format:i.format});case 17:return t.abrupt("return",o);case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.createNodeMap=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i){var a,o=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.length<1)){t.next=2;break}throw new TypeError("Could not create node map, too few arguments.");case 2:return i=r(i,{base:e3(n)?n:""}),t.next=5,e.expand(n,i);case 5:return a=t.sent,t.abrupt("return",c3(a,i));case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e.merge=e0.callbackify(function(){var t=q2(Wt.mark((function t(n,i,a){var o,s,u,c,l,f,h,d,p,v,y,g,b,m,w,x,_,k=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(k.length<1)){t.next=2;break}throw new TypeError("Could not merge, too few arguments.");case 2:if(Z2(n)){t.next=4;break}throw new TypeError('Could not merge, "docs" must be an array.');case 4:return i="function"==typeof i?null:i||null,a=r(a,{}),t.next=7,Promise.all(n.map((function(t){var r=Object.assign({},a);return e.expand(t,r)})));case 7:o=t.sent,s=!0,"mergeNodes"in a&&(s=a.mergeNodes),u=a.issuer||new W2("_:b"),c={"@default":{}},l=0;case 12:if(!(l<o.length)){t.next=29;break}if(f=e0.relabelBlankNodes(o[l],{issuer:new W2("_:b"+l+"-")}),u3(f,h=s||0===l?c:{"@default":{}},"@default",u),h===c){t.next=26;break}t.t0=Wt.keys(h);case 16:if((t.t1=t.t0()).done){t.next=26;break}if(d=t.t1.value,p=h[d],d in c){t.next=22;break}return c[d]=p,t.abrupt("continue",16);case 22:for(y in v=c[d],p)y in v||(v[y]=p[y]);t.next=16;break;case 26:++l,t.next=12;break;case 29:for(g=l3(c),b=[],m=Object.keys(g).sort(),w=0;w<m.length;++w)x=g[m[w]],t3(x)||b.push(x);if(null!==i){t.next=33;break}return t.abrupt("return",b);case 33:return a.graph=!0,a.skipExpansion=!0,t.next=36,e.compact(b,i,a);case 36:return _=t.sent,t.abrupt("return",_);case 38:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),Object.defineProperty(e,"documentLoader",{get:function(){return e._documentLoader},set:function(t){return e._documentLoader=e0.normalizeDocumentLoader(t)}}),e.documentLoader=function(){var e=q2(Wt.mark((function e(t){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new qQ("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.loadDocument=e0.callbackify(q2(Wt.mark((function t(){var r=arguments;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.documentLoader.apply(null,r));case 1:case"end":return t.stop()}}),t)})))),e.get=e0.callbackify(function(){var t=q2(Wt.mark((function t(r,n){var i,a;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="function"==typeof n.documentLoader?e0.normalizeDocumentLoader(n.documentLoader):e.documentLoader,t.next=3,i(r);case 3:if(a=t.sent,t.prev=4,a.document){t.next=7;break}throw new qQ("No remote document found at the given URL.","jsonld.NullRemoteDocument");case 7:e3(a.document)&&(a.document=JSON.parse(a.document)),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(4),new qQ("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:t.t0,remoteDoc:a});case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,r){return t.apply(this,arguments)}}()),e.processContext=e0.callbackify(function(){var e=q2(Wt.mark((function e(t,n,i){var a;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r(i,{base:""}),null!==n){e.next=2;break}return e.abrupt("return",r3(i));case 2:return n=e0.clone(n),Q2(n)&&"@context"in n||(n={"@context":n}),e.next=5,i3(n,i);case 5:return a=e.sent,e.abrupt("return",n3({activeCtx:t,localCtx:a,options:i}));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),e.getContextValue=N0.getContextValue,e.documentLoaders={},e.documentLoaders.node=R2,e.documentLoaders.xhr=H2,e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new qQ('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",o0.parse),e.registerRDFParser("application/nquads",o0.parse),e.registerRDFParser("rdfa-api",function(){function e(){a(this,e)}return s(e,[{key:"parse",value:function(e){for(var t={"@default":[]},r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var a=e.getSubjectTriples(i);if(null!==a){var o=a.predicates;for(var s in o)for(var u=o[s].objects,c=0;c<u.length;++c){var l=u[c],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s};var h=l.value;if(l.type===d0){var d=new("undefined"==typeof XMLSerializer?k$.XMLSerializer:XMLSerializer);h="";for(var p=0;p<l.value.length;p++)l.value[p].nodeType===a0.ELEMENT_NODE?h+=d.serializeToString(l.value[p]):l.value[p].nodeType===a0.TEXT_NODE&&(h+=l.value[p].nodeValue)}f.object={},l.type===h0?0===l.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",l.type===f0?l.language?(f.object.datatype=l0,f.object.language=l.language):f.object.datatype=p0:f.object.datatype=l.type),f.object.value=h,t["@default"].push(f)}}}}return t}}]),e}().parse),e.url=g0,e.util=e0,Object.assign(e,e0),e.promises=e,e.RequestQueue=T2,e.JsonLdProcessor=function(e){var t=function(){function e(){a(this,e)}return s(e,[{key:"toString",value:function(){return"[object JsonLdProcessor]"}}]),e}();return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}(e),h3&&void 0===ZK.JsonLdProcessor&&Object.defineProperty(ZK,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),f3?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},p3=function e(){return d3((function(){return e()}))};d3(p3);var v3=p3,y3=eq((function(e){XX.gte(OW.version,"8.6.0")?e.exports=FQ:e.exports=v3}));y3.jsonld;var g3=eq((function(e){!function(t){var r={bytesToHex:function(e){return function(e){return e.map((function(e){return 2,(t=e.toString(16)).length>2?t:Array(2-t.length+1).join("0")+t;var t})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=r:t.convertHex=r}(ZK)})),b3=eq((function(e){!function(t){var r={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};r.UTF8={bytesToString:function(e){return decodeURIComponent(escape(r.bytesToString(e)))},stringToBytes:function(e){return r.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=r:t.convertString=r}(ZK)})),m3=eq((function(e){!function(t){var r={};e.exports?(r.bytesToHex=g3.bytesToHex,r.convertString=b3,e.exports=o):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=o);var n=[];!function(){function e(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(n[i]=t(Math.pow(r,1/3)),i++),r++}();var i=[],a=function(e,t,r){for(var a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7],d=0;d<64;d++){if(d<16)i[d]=0|t[r+d];else{var p=i[d-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=i[d-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;i[d]=v+i[d-7]+g+i[d-16]}var b=a&o^a&s^o&s,m=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),w=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+n[d]+i[d];h=f,f=l,l=c,c=u+w|0,u=s,s=o,o=a,a=w+(m+b)|0}e[0]=e[0]+a|0,e[1]=e[1]+o|0,e[2]=e[2]+s|0,e[3]=e[3]+u|0,e[4]=e[4]+c|0,e[5]=e[5]+l|0,e[6]=e[6]+f|0,e[7]=e[7]+h|0};function o(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}(e),o=8*e.length;i[o>>5]|=128<<24-o%32,i[15+(o+64>>9<<4)]=o;for(var s=0;s<i.length;s+=16)a(n,i,s);var u=function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}(n);return t&&t.asBytes?u:t&&t.asString?r.convertString.bytesToString(u):r.bytesToHex(u)}o.x2=function(e,t){return o(o(e,{asBytes:!0}),t)}}(ZK)}));function w3(e){e=e.trim();for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t}function x3(e,t){return IK(this,void 0,void 0,Wt.mark((function r(){var n,i,a,o;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e["@context"],i=e,!function(e){return e===SK.V1_1||e===SK.V1_2}(t)&&(n.find((function(e){return e===Object(e)&&"@vocab"in e}))?n=null:n.push({"@vocab":"http://fallback.org/"})),a="undefined"!=typeof window&&void 0!==window.XMLHttpRequest?y3.documentLoaders.xhr():y3.documentLoaders.node(),y3.documentLoader=function(e,t){return e in FK?t(null,{contextUrl:null,document:FK[e],documentUrl:e}):a(e,t)},o={algorithm:"URDNA2015",format:"application/nquads"},r.abrupt("return",(n&&(o.expandContext=n),new Promise((function(e,t){y3.normalize(i,o,(function(r,n){if(r)console.error(r),t(new $K("computeLocalHash",KK("errors","failedJsonLdNormalization")));else{var i=function(e){var t=/<http:\/\/fallback\.org\/(.*)>/.exec(e);if(t){for(var r=[],n=0;n<t.length;n++)r.push(t[n]);return r}return null}(n);i?t(new $K("computeLocalHash","".concat(KK("errors","foundUnmappedFields"),": ").concat(i.join(", ")))):e(m3(function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(n)))}}))}))));case 7:case"end":return r.stop()}}),r)})))}var _3=eq((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),k3=eq((function(e,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r=aW.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=aW:(n(aW,t),t.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return aW.SlowBuffer(e)}}));k3.Buffer;var S3=JG.EventEmitter;function E3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A3=aW.Buffer,T3=k$.inspect,P3=T3&&T3.custom||"inspect";function O3(e,t,r){A3.prototype.copy.call(e,t,r)}var C3=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return(t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return A3.alloc(0);for(var t=A3.allocUnsafe(e>>>0),r=this.head,n=0;r;)O3(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=A3.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:P3,value:function(e,t){return T3(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E3(Object(r),!0).forEach((function(t){I3(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function M3(e,t){R3(e,t),N3(e)}function N3(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function R3(e,t){e.emit("error",t)}var L3=function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,gW(R3,this,e)):gW(R3,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?gW(N3,r):(r._writableState.errorEmitted=!0,gW(M3,r,e)):gW(M3,r,e):t?(gW(N3,r),t(e)):gW(N3,r)})),this)},j3=function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},D3=function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)},B3={};function U3(e,t,r){r||(r=Error);var n=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);n.prototype.name=r.name,n.prototype.code=e,B3[e]=n}function F3(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}U3("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),U3("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,a,o;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o="The ".concat(e," ").concat(i," ").concat(F3(t,"type"));else{var s=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+".".length>e.length)&&-1!==e.indexOf(".",r)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(i," ").concat(F3(t,"type"))}return o+". Received type ".concat(r(n))}),TypeError),U3("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),U3("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),U3("ERR_STREAM_PREMATURE_CLOSE","Premature close"),U3("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),U3("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),U3("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),U3("ERR_STREAM_WRITE_AFTER_END","write after end"),U3("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),U3("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),U3("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");var z3={codes:B3},H3=z3.codes.ERR_INVALID_OPT_VALUE,V3=function(e,t,r,n){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new H3(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384};function K3(e){try{if(!ZK.localStorage)return!1}catch(e){return!1}var t=ZK.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var q3,W3=f5;function G3(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}f5.WritableState=l5;var J3,X3=function(e,t){if(K3("noDeprecation"))return e;var r=!1;return function(){if(!r){if(K3("throwDeprecation"))throw new Error(t);K3("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}},$3=aW.Buffer,Y3=ZK.Uint8Array||function(){},Z3=V3,Q3=z3.codes,e5=Q3.ERR_INVALID_ARG_TYPE,t5=Q3.ERR_METHOD_NOT_IMPLEMENTED,r5=Q3.ERR_MULTIPLE_CALLBACK,n5=Q3.ERR_STREAM_CANNOT_PIPE,i5=Q3.ERR_STREAM_DESTROYED,a5=Q3.ERR_STREAM_NULL_VALUES,o5=Q3.ERR_STREAM_WRITE_AFTER_END,s5=Q3.ERR_UNKNOWN_ENCODING,u5=D3;function c5(){}function l5(e,t,r){q3=q3||m5,e=e||{},"boolean"!=typeof r&&(r=t instanceof q3),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=Z3(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new r5;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(gW(i,n),gW(g5,e,t),e._writableState.errorEmitted=!0,u5(e,n)):(i(n),e._writableState.errorEmitted=!0,u5(e,n),g5(e,t))}(e,r,n,t,i);else{var a=v5(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||p5(e,r),n?gW(d5,e,r,a,i):d5(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new G3(this)}function f5(e){var t=this instanceof(q3=q3||m5);if(!t&&!J3.call(f5,this))return new f5(e);this._writableState=new l5(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),S3.call(this)}function h5(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new i5("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function d5(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),g5(e,t)}function p5(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)i[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,h5(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new G3(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback;if(h5(e,t,!1,t.objectMode?1:u.length,u,c,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function v5(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y5(e,t){e._final((function(r){t.pendingcb--,r&&u5(e,r),t.prefinished=!0,e.emit("prefinish"),g5(e,t)}))}function g5(e,t){var r=v5(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,gW(y5,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}_3(f5,S3),l5.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l5.prototype,"buffer",{get:X3((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(J3=Function.prototype[Symbol.hasInstance],Object.defineProperty(f5,Symbol.hasInstance,{value:function(e){return!!J3.call(this,e)||this===f5&&e&&e._writableState instanceof l5}})):J3=function(e){return e instanceof this},f5.prototype.pipe=function(){u5(this,new n5)},f5.prototype.write=function(e,t,r){var n,i=this._writableState,a=!1,o=!i.objectMode&&(n=e,$3.isBuffer(n)||n instanceof Y3);return o&&!$3.isBuffer(e)&&(e=function(e){return $3.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=c5),i.ending?function(e,t){var r=new o5;u5(e,r),gW(t,r)}(this,r):(o||function(e,t,r,n){var i;return null===r?i=new a5:"string"==typeof r||t.objectMode||(i=new e5("chunk",["string","Buffer"],r)),!i||(u5(e,i),gW(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,r,n,i,a){if(!r){var o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=$3.from(t,r)),t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h5(e,t,!1,s,n,i,a);return u}(this,i,o,e,t,r)),a},f5.prototype.cork=function(){this._writableState.corked++},f5.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||p5(this,e))},f5.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new s5(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f5.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f5.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f5.prototype._write=function(e,t,r){r(new t5("_write()"))},f5.prototype._writev=null,f5.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,g5(e,t),r&&(t.finished?gW(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(f5.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f5.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f5.prototype.destroy=L3,f5.prototype._undestroy=j3,f5.prototype._destroy=function(e,t){t(e)};var b5=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},m5=k5;_3(k5,a6);for(var w5=b5(W3.prototype),x5=0;x5<w5.length;x5++){var _5=w5[x5];k5.prototype[_5]||(k5.prototype[_5]=W3.prototype[_5])}function k5(e){if(!(this instanceof k5))return new k5(e);a6.call(this,e),W3.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",S5)))}function S5(){this._writableState.ended||gW(E5,this)}function E5(e){e.end()}Object.defineProperty(k5.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(k5.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k5.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k5.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var I5=k3.Buffer,A5=I5.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},T5=P5;function P5(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(I5.isEncoding===A5||!A5(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=M5,this.end=N5,t=4;break;case"utf8":this.fillLast=C5,t=4;break;case"base64":this.text=R5,this.end=L5,t=3;break;default:return this.write=j5,void(this.end=D5)}this.lastNeed=0,this.lastTotal=0,this.lastChar=I5.allocUnsafe(t)}function O5(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function C5(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function M5(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function N5(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function R5(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function L5(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function j5(e){return e.toString(this.encoding)}function D5(e){return e&&e.length?this.write(e):""}P5.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},P5.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},P5.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=O5(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=O5(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=O5(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},P5.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var B5={StringDecoder:T5},U5=z3.codes.ERR_STREAM_PREMATURE_CLOSE;function F5(){}var z5,H5=function e(t,r,n){if("function"==typeof r)return e(t,null,r);r||(r={}),n=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(n||F5);var i=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,o=function(){t.writable||u()},s=t._writableState&&t._writableState.finished,u=function(){a=!1,s=!0,i||n.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){i=!1,c=!0,a||n.call(t)},f=function(e){n.call(t,e)},h=function(){var e;return i&&!c?(t._readableState&&t._readableState.ended||(e=new U5),n.call(t,e)):a&&!s?(t._writableState&&t._writableState.ended||(e=new U5),n.call(t,e)):void 0},d=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",h),t.req?d():t.on("request",d)):a&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",l),t.on("finish",u),!1!==r.error&&t.on("error",f),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",d),t.req&&t.req.removeListener("finish",u),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",u),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",h)}};function V5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K5=Symbol("lastResolve"),q5=Symbol("lastReject"),W5=Symbol("error"),G5=Symbol("ended"),J5=Symbol("lastPromise"),X5=Symbol("handlePromise"),$5=Symbol("stream");function Y5(e,t){return{value:e,done:t}}function Z5(e){var t=e[K5];if(null!==t){var r=e[$5].read();null!==r&&(e[J5]=null,e[K5]=null,e[q5]=null,t(Y5(r,!1)))}}function Q5(e){gW(Z5,e)}var e6,t6=Object.getPrototypeOf((function(){})),r6=Object.setPrototypeOf((V5(z5={get stream(){return this[$5]},next:function(){var e=this,t=this[W5];if(null!==t)return Promise.reject(t);if(this[G5])return Promise.resolve(Y5(void 0,!0));if(this[$5].destroyed)return new Promise((function(t,r){gW((function(){e[W5]?r(e[W5]):t(Y5(void 0,!0))}))}));var r,n=this[J5];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[G5]?r(Y5(void 0,!0)):t[X5](r,n)}),n)}}(n,this));else{var i=this[$5].read();if(null!==i)return Promise.resolve(Y5(i,!1));r=new Promise(this[X5])}return this[J5]=r,r}},Symbol.asyncIterator,(function(){return this})),V5(z5,"return",(function(){var e=this;return new Promise((function(t,r){e[$5].destroy(null,(function(e){e?r(e):t(Y5(void 0,!0))}))}))})),z5),t6),n6=function(e){var t,r=Object.create(r6,(V5(t={},$5,{value:e,writable:!0}),V5(t,K5,{value:null,writable:!0}),V5(t,q5,{value:null,writable:!0}),V5(t,W5,{value:null,writable:!0}),V5(t,G5,{value:e._readableState.endEmitted,writable:!0}),V5(t,X5,{value:function(e,t){var n=r[$5].read();n?(r[J5]=null,r[K5]=null,r[q5]=null,e(Y5(n,!1))):(r[K5]=e,r[q5]=t)},writable:!0}),t));return r[J5]=null,H5(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[q5];return null!==t&&(r[J5]=null,r[K5]=null,r[q5]=null,t(e)),void(r[W5]=e)}var n=r[K5];null!==n&&(r[J5]=null,r[K5]=null,r[q5]=null,n(Y5(void 0,!0))),r[G5]=!0})),e.on("readable",Q5.bind(null,r)),r},i6=function(){throw new Error("Readable.from is not available in the browser")},a6=_6;_6.ReadableState=x6;var o6,s6=function(e,t){return e.listeners(t).length},u6=aW.Buffer,c6=ZK.Uint8Array||function(){};o6=k$&&k$.debuglog?k$.debuglog("stream"):function(){};var l6,f6,h6,d6=V3,p6=z3.codes,v6=p6.ERR_INVALID_ARG_TYPE,y6=p6.ERR_STREAM_PUSH_AFTER_EOF,g6=p6.ERR_METHOD_NOT_IMPLEMENTED,b6=p6.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;_3(_6,S3);var m6=D3,w6=["error","close","destroy","pause","resume"];function x6(e,t,r){e6=e6||m5,e=e||{},"boolean"!=typeof r&&(r=t instanceof e6),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=d6(this,e,"readableHighWaterMark",r),this.buffer=new C3,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l6||(l6=B5.StringDecoder),this.decoder=new l6(e.encoding),this.encoding=e.encoding)}function _6(e){if(e6=e6||m5,!(this instanceof _6))return new _6(e);var t=this instanceof e6;this._readableState=new x6(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),S3.call(this)}function k6(e,t,r,n,i){o6("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(o6("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?I6(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A6(e)))}}(e,o);else if(i||(a=function(e,t){var r,n;return n=t,u6.isBuffer(n)||n instanceof c6||"string"==typeof t||void 0===t||e.objectMode||(r=new v6("chunk",["string","Buffer","Uint8Array"],t)),r}(o,t)),a)m6(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===u6.prototype||(t=function(e){return u6.from(e)}(t)),n)o.endEmitted?m6(e,new b6):S6(e,o,t,!0);else if(o.ended)m6(e,new y6);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?S6(e,o,t,!1):T6(e,o)):S6(e,o,t,!1)}else n||(o.reading=!1,T6(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function S6(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&I6(e)),T6(e,t)}function E6(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I6(e){var t=e._readableState;o6("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o6("emitReadable",t.flowing),t.emittedReadable=!0,gW(A6,e))}function A6(e){var t=e._readableState;o6("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N6(e)}function T6(e,t){t.readingMore||(t.readingMore=!0,gW(P6,e,t))}function P6(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o6("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function O6(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function C6(e){o6("readable nexttick read 0"),e.read(0)}function M6(e,t){o6("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N6(e),t.flowing&&!t.reading&&e.read(0)}function N6(e){var t=e._readableState;for(o6("flow",t.flowing);t.flowing&&null!==e.read(););}function R6(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function L6(e){var t=e._readableState;o6("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,gW(j6,t,e))}function j6(e,t){if(o6("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function D6(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Object.defineProperty(_6.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_6.prototype.destroy=L3,_6.prototype._undestroy=j3,_6.prototype._destroy=function(e,t){t(e)},_6.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u6.from(e,t),t=""),r=!0),k6(this,e,t,!1,r)},_6.prototype.unshift=function(e){return k6(this,e,null,!0,!1)},_6.prototype.isPaused=function(){return!1===this._readableState.flowing},_6.prototype.setEncoding=function(e){l6||(l6=B5.StringDecoder);var t=new l6(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},_6.prototype.read=function(e){o6("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o6("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L6(this):I6(this),null;if(0===(e=E6(e,t))&&t.ended)return 0===t.length&&L6(this),null;var n,i=t.needReadable;return o6("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o6("length less than watermark",i=!0),t.ended||t.reading?o6("reading or ended",i=!1):i&&(o6("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E6(r,t))),null===(n=e>0?R6(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L6(this)),null!==n&&this.emit("data",n),n},_6.prototype._read=function(e){m6(this,new g6("_read()"))},_6.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o6("pipe count=%d opts=%j",n.pipesCount,t);var i=t&&!1===t.end||e===OW.stdout||e===OW.stderr?h:a;function a(){o6("onend"),e.end()}n.endEmitted?gW(i):r.once("end",i),e.on("unpipe",(function t(i,d){o6("onunpipe"),i===r&&d&&!1===d.hasUnpiped&&(d.hasUnpiped=!0,o6("cleanup"),e.removeListener("close",l),e.removeListener("finish",f),e.removeListener("drain",o),e.removeListener("error",c),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",h),r.removeListener("data",u),s=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}));var o=function(e){return function(){var t=e._readableState;o6("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s6(e,"data")&&(t.flowing=!0,N6(e))}}(r);e.on("drain",o);var s=!1;function u(t){o6("ondata");var i=e.write(t);o6("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==D6(n.pipes,e))&&!s&&(o6("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function c(t){o6("onerror",t),h(),e.removeListener("error",c),0===s6(e,"error")&&m6(e,t)}function l(){e.removeListener("finish",f),h()}function f(){o6("onfinish"),e.removeListener("close",l),h()}function h(){o6("unpipe"),r.unpipe(e)}return r.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",c),e.once("close",l),e.once("finish",f),e.emit("pipe",r),n.flowing||(o6("pipe resume"),r.resume()),e},_6.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=D6(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},_6.prototype.on=function(e,t){var r=S3.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o6("on readable",n.length,n.reading),n.length?I6(this):n.reading||gW(C6,this))),r},_6.prototype.addListener=_6.prototype.on,_6.prototype.removeListener=function(e,t){var r=S3.prototype.removeListener.call(this,e,t);return"readable"===e&&gW(O6,this),r},_6.prototype.removeAllListeners=function(e){var t=S3.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||gW(O6,this),t},_6.prototype.resume=function(){var e=this._readableState;return e.flowing||(o6("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,gW(M6,e,t))}(this,e)),e.paused=!1,this},_6.prototype.pause=function(){return o6("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o6("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_6.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o6("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o6("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<w6.length;a++)e.on(w6[a],this.emit.bind(this,w6[a]));return this._read=function(t){o6("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(_6.prototype[Symbol.asyncIterator]=function(){return void 0===f6&&(f6=n6),f6(this)}),Object.defineProperty(_6.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_6.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_6.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_6._fromList=R6,Object.defineProperty(_6.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_6.from=function(e,t){return void 0===h6&&(h6=i6),h6(_6,e,t)});var B6=q6,U6=z3.codes,F6=U6.ERR_METHOD_NOT_IMPLEMENTED,z6=U6.ERR_MULTIPLE_CALLBACK,H6=U6.ERR_TRANSFORM_ALREADY_TRANSFORMING,V6=U6.ERR_TRANSFORM_WITH_LENGTH_0;function K6(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new z6);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function q6(e){if(!(this instanceof q6))return new q6(e);m5.call(this,e),this._transformState={afterTransform:K6.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",W6)}function W6(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?G6(this,null,null):this._flush((function(t,r){G6(e,t,r)}))}function G6(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new V6;if(e._transformState.transforming)throw new H6;return e.push(null)}_3(q6,m5),q6.prototype.push=function(e,t){return this._transformState.needTransform=!1,m5.prototype.push.call(this,e,t)},q6.prototype._transform=function(e,t,r){r(new F6("_transform()"))},q6.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},q6.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},q6.prototype._destroy=function(e,t){m5.prototype._destroy.call(this,e,(function(e){t(e)}))};var J6,X6=$6;function $6(e){if(!(this instanceof $6))return new $6(e);B6.call(this,e)}_3($6,B6),$6.prototype._transform=function(e,t,r){r(null,e)};var Y6=z3.codes,Z6=Y6.ERR_MISSING_ARGS,Q6=Y6.ERR_STREAM_DESTROYED;function e4(e){if(e)throw e}function t4(e,t,r,n){n=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(n);var i=!1;e.on("close",(function(){i=!0})),void 0===J6&&(J6=H5),J6(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var a=!1;return function(t){if(!i&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new Q6("pipe"))}}function r4(e){e()}function n4(e,t){return e.pipe(t)}function i4(e){return e.length?"function"!=typeof e[e.length-1]?e4:e.pop():e4}var a4=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=i4(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Z6("streams");var a=t.map((function(e,r){var o=r<t.length-1;return t4(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(r4),o||(a.forEach(r4),i(n))}))}));return t.reduce(n4)},o4=eq((function(e,t){(t=e.exports=a6).Stream=t,t.Readable=t,t.Writable=W3,t.Duplex=m5,t.Transform=B6,t.PassThrough=X6,t.finished=H5,t.pipeline=a4}));o4.Stream,o4.Readable,o4.Writable,o4.Duplex,o4.Transform,o4.PassThrough,o4.finished,o4.pipeline;var s4=k3.Buffer,u4=o4.Transform;function c4(e){u4.call(this),this._block=s4.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}_3(c4,u4),c4.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},c4.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},c4.prototype.update=function(e,t){if(function(e,t){if(!s4.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");s4.isBuffer(e)||(e=s4.from(e,t));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var a=0,o=8*e.length;o>0;++a)this._length[a]+=o,(o=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*o);return this},c4.prototype._update=function(){throw new Error("_update is not implemented")},c4.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},c4.prototype._digest=function(){throw new Error("_digest is not implemented")};var l4=c4,f4=k3.Buffer,h4=new Array(16);function d4(){l4.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function p4(e,t){return e<<t|e>>>32-t}function v4(e,t,r,n,i,a,o){return p4(e+(t&r|~t&n)+i+a|0,o)+t|0}function y4(e,t,r,n,i,a,o){return p4(e+(t&n|r&~n)+i+a|0,o)+t|0}function g4(e,t,r,n,i,a,o){return p4(e+(t^r^n)+i+a|0,o)+t|0}function b4(e,t,r,n,i,a,o){return p4(e+(r^(t|~n))+i+a|0,o)+t|0}_3(d4,l4),d4.prototype._update=function(){for(var e=h4,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,a=this._d;r=v4(r,n,i,a,e[0],3614090360,7),a=v4(a,r,n,i,e[1],3905402710,12),i=v4(i,a,r,n,e[2],606105819,17),n=v4(n,i,a,r,e[3],3250441966,22),r=v4(r,n,i,a,e[4],4118548399,7),a=v4(a,r,n,i,e[5],1200080426,12),i=v4(i,a,r,n,e[6],2821735955,17),n=v4(n,i,a,r,e[7],4249261313,22),r=v4(r,n,i,a,e[8],1770035416,7),a=v4(a,r,n,i,e[9],2336552879,12),i=v4(i,a,r,n,e[10],4294925233,17),n=v4(n,i,a,r,e[11],2304563134,22),r=v4(r,n,i,a,e[12],1804603682,7),a=v4(a,r,n,i,e[13],4254626195,12),i=v4(i,a,r,n,e[14],2792965006,17),r=y4(r,n=v4(n,i,a,r,e[15],1236535329,22),i,a,e[1],4129170786,5),a=y4(a,r,n,i,e[6],3225465664,9),i=y4(i,a,r,n,e[11],643717713,14),n=y4(n,i,a,r,e[0],3921069994,20),r=y4(r,n,i,a,e[5],3593408605,5),a=y4(a,r,n,i,e[10],38016083,9),i=y4(i,a,r,n,e[15],3634488961,14),n=y4(n,i,a,r,e[4],3889429448,20),r=y4(r,n,i,a,e[9],568446438,5),a=y4(a,r,n,i,e[14],3275163606,9),i=y4(i,a,r,n,e[3],4107603335,14),n=y4(n,i,a,r,e[8],1163531501,20),r=y4(r,n,i,a,e[13],2850285829,5),a=y4(a,r,n,i,e[2],4243563512,9),i=y4(i,a,r,n,e[7],1735328473,14),r=g4(r,n=y4(n,i,a,r,e[12],2368359562,20),i,a,e[5],4294588738,4),a=g4(a,r,n,i,e[8],2272392833,11),i=g4(i,a,r,n,e[11],1839030562,16),n=g4(n,i,a,r,e[14],4259657740,23),r=g4(r,n,i,a,e[1],2763975236,4),a=g4(a,r,n,i,e[4],1272893353,11),i=g4(i,a,r,n,e[7],4139469664,16),n=g4(n,i,a,r,e[10],3200236656,23),r=g4(r,n,i,a,e[13],681279174,4),a=g4(a,r,n,i,e[0],3936430074,11),i=g4(i,a,r,n,e[3],3572445317,16),n=g4(n,i,a,r,e[6],76029189,23),r=g4(r,n,i,a,e[9],3654602809,4),a=g4(a,r,n,i,e[12],3873151461,11),i=g4(i,a,r,n,e[15],530742520,16),r=b4(r,n=g4(n,i,a,r,e[2],3299628645,23),i,a,e[0],4096336452,6),a=b4(a,r,n,i,e[7],1126891415,10),i=b4(i,a,r,n,e[14],2878612391,15),n=b4(n,i,a,r,e[5],4237533241,21),r=b4(r,n,i,a,e[12],1700485571,6),a=b4(a,r,n,i,e[3],2399980690,10),i=b4(i,a,r,n,e[10],4293915773,15),n=b4(n,i,a,r,e[1],2240044497,21),r=b4(r,n,i,a,e[8],1873313359,6),a=b4(a,r,n,i,e[15],4264355552,10),i=b4(i,a,r,n,e[6],2734768916,15),n=b4(n,i,a,r,e[13],1309151649,21),r=b4(r,n,i,a,e[4],4149444226,6),a=b4(a,r,n,i,e[11],3174756917,10),i=b4(i,a,r,n,e[2],718787259,15),n=b4(n,i,a,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+a|0},d4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=f4.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e};var m4=d4,w4=aW.Buffer,x4=new Array(16),_4=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],k4=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S4=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E4=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],I4=[0,1518500249,1859775393,2400959708,2840853838],A4=[1352829926,1548603684,1836072691,2053994217,0];function T4(){l4.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function P4(e,t){return e<<t|e>>>32-t}function O4(e,t,r,n,i,a,o,s){return P4(e+(t^r^n)+a+o|0,s)+i|0}function C4(e,t,r,n,i,a,o,s){return P4(e+(t&r|~t&n)+a+o|0,s)+i|0}function M4(e,t,r,n,i,a,o,s){return P4(e+((t|~r)^n)+a+o|0,s)+i|0}function N4(e,t,r,n,i,a,o,s){return P4(e+(t&n|r&~n)+a+o|0,s)+i|0}function R4(e,t,r,n,i,a,o,s){return P4(e+(t^(r|~n))+a+o|0,s)+i|0}_3(T4,l4),T4.prototype._update=function(){for(var e=x4,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,o=0|this._e,s=0|this._a,u=0|this._b,c=0|this._c,l=0|this._d,f=0|this._e,h=0;h<80;h+=1){var d,p;h<16?(d=O4(r,n,i,a,o,e[_4[h]],I4[0],S4[h]),p=R4(s,u,c,l,f,e[k4[h]],A4[0],E4[h])):h<32?(d=C4(r,n,i,a,o,e[_4[h]],I4[1],S4[h]),p=N4(s,u,c,l,f,e[k4[h]],A4[1],E4[h])):h<48?(d=M4(r,n,i,a,o,e[_4[h]],I4[2],S4[h]),p=M4(s,u,c,l,f,e[k4[h]],A4[2],E4[h])):h<64?(d=N4(r,n,i,a,o,e[_4[h]],I4[3],S4[h]),p=C4(s,u,c,l,f,e[k4[h]],A4[3],E4[h])):(d=R4(r,n,i,a,o,e[_4[h]],I4[4],S4[h]),p=O4(s,u,c,l,f,e[k4[h]],A4[4],E4[h])),r=o,o=a,a=P4(i,10),i=n,n=d,s=f,f=l,l=P4(c,10),c=u,u=p}var v=this._b+i+l|0;this._b=this._c+a+f|0,this._c=this._d+o+s|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=v},T4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=w4.alloc?w4.alloc(20):new w4(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e};var L4=T4,j4=k3.Buffer;function D4(e,t){this._block=j4.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}D4.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=j4.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,a=this._len,o=0;o<i;){for(var s=a%n,u=Math.min(i-o,n-s),c=0;c<u;c++)r[s+c]=e[o+c];o+=u,(a+=u)%n==0&&this._update(r)}return this._len+=i,this},D4.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},D4.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var B4=D4,U4=k3.Buffer,F4=[1518500249,1859775393,-1894007588,-899497514],z4=new Array(80);function H4(){this.init(),this._w=z4,B4.call(this,64,56)}function V4(e){return e<<30|e>>>2}function K4(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}_3(H4,B4),H4.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},H4.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l=~~(c/20),f=0|((t=n)<<5|t>>>27)+K4(l,i,a,o)+s+r[c]+F4[l];s=o,o=a,a=V4(i),i=n,n=f}this._a=n+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},H4.prototype._hash=function(){var e=U4.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var q4=H4,W4=k3.Buffer,G4=[1518500249,1859775393,-1894007588,-899497514],J4=new Array(80);function X4(){this.init(),this._w=J4,B4.call(this,64,56)}function $4(e){return e<<5|e>>>27}function Y4(e){return e<<30|e>>>2}function Z4(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}_3(X4,B4),X4.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},X4.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=e.readInt32BE(4*u);for(;u<80;++u)r[u]=(t=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|t>>>31;for(var c=0;c<80;++c){var l=~~(c/20),f=$4(n)+Z4(l,i,a,o)+s+r[c]+G4[l]|0;s=o,o=a,a=Y4(i),i=n,n=f}this._a=n+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},X4.prototype._hash=function(){var e=W4.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e};var Q4=X4,e8=k3.Buffer,t8=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r8=new Array(64);function n8(){this.init(),this._w=r8,B4.call(this,64,56)}function i8(e,t,r){return r^e&(t^r)}function a8(e,t,r){return e&t|r&(e|t)}function o8(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s8(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function u8(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c8(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}_3(n8,B4),n8.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n8.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,o=0|this._e,s=0|this._f,u=0|this._g,c=0|this._h,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<64;++l)t[l]=c8(t[l-2])+t[l-7]+u8(t[l-15])+t[l-16]|0;for(var f=0;f<64;++f){var h=c+s8(o)+i8(o,s,u)+t8[f]+t[f]|0,d=o8(r)+a8(r,n,i)|0;c=u,u=s,s=o,o=a+h|0,a=i,i=n,n=r,r=h+d|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0,this._f=s+this._f|0,this._g=u+this._g|0,this._h=c+this._h|0},n8.prototype._hash=function(){var e=e8.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var l8=n8,f8=k3.Buffer,h8=new Array(64);function d8(){this.init(),this._w=h8,B4.call(this,64,56)}_3(d8,l8),d8.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},d8.prototype._hash=function(){var e=f8.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var p8=d8,v8=k3.Buffer,y8=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],g8=new Array(160);function b8(){this.init(),this._w=g8,B4.call(this,128,112)}function m8(e,t,r){return r^e&(t^r)}function w8(e,t,r){return e&t|r&(e|t)}function x8(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function _8(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function k8(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function S8(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function E8(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function I8(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function A8(e,t){return e>>>0<t>>>0?1:0}_3(b8,B4),b8.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},b8.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,a=0|this._dh,o=0|this._eh,s=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,f=0|this._bl,h=0|this._cl,d=0|this._dl,p=0|this._el,v=0|this._fl,y=0|this._gl,g=0|this._hl,b=0;b<32;b+=2)t[b]=e.readInt32BE(4*b),t[b+1]=e.readInt32BE(4*b+4);for(;b<160;b+=2){var m=t[b-30],w=t[b-30+1],x=k8(m,w),_=S8(w,m),k=E8(m=t[b-4],w=t[b-4+1]),S=I8(w,m),E=t[b-14],I=t[b-14+1],A=t[b-32],T=t[b-32+1],P=_+I|0,O=x+E+A8(P,_)|0;O=(O=O+k+A8(P=P+S|0,S)|0)+A+A8(P=P+T|0,T)|0,t[b]=O,t[b+1]=P}for(var C=0;C<160;C+=2){O=t[C],P=t[C+1];var M=w8(r,n,i),N=w8(l,f,h),R=x8(r,l),L=x8(l,r),j=_8(o,p),D=_8(p,o),B=y8[C],U=y8[C+1],F=m8(o,s,u),z=m8(p,v,y),H=g+D|0,V=c+j+A8(H,g)|0;V=(V=(V=V+F+A8(H=H+z|0,z)|0)+B+A8(H=H+U|0,U)|0)+O+A8(H=H+P|0,P)|0;var K=L+N|0,q=R+M+A8(K,L)|0;c=u,g=y,u=s,y=v,s=o,v=p,o=a+V+A8(p=d+H|0,d)|0,a=i,d=h,i=n,h=f,n=r,f=l,r=V+q+A8(l=H+K|0,H)|0}this._al=this._al+l|0,this._bl=this._bl+f|0,this._cl=this._cl+h|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+v|0,this._gl=this._gl+y|0,this._hl=this._hl+g|0,this._ah=this._ah+r+A8(this._al,l)|0,this._bh=this._bh+n+A8(this._bl,f)|0,this._ch=this._ch+i+A8(this._cl,h)|0,this._dh=this._dh+a+A8(this._dl,d)|0,this._eh=this._eh+o+A8(this._el,p)|0,this._fh=this._fh+s+A8(this._fl,v)|0,this._gh=this._gh+u+A8(this._gl,y)|0,this._hh=this._hh+c+A8(this._hl,g)|0},b8.prototype._hash=function(){var e=v8.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var T8=b8,P8=k3.Buffer,O8=new Array(160);function C8(){this.init(),this._w=O8,B4.call(this,128,112)}_3(C8,T8),C8.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},C8.prototype._hash=function(){var e=P8.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var M8=C8,N8=eq((function(e){var t=e.exports=function(e){e=e.toLowerCase();var r=t[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};t.sha=q4,t.sha1=Q4,t.sha224=p8,t.sha256=l8,t.sha384=M8,t.sha512=T8})),R8=k3.Buffer,L8=JJ.Transform,j8=fJ.StringDecoder;function D8(e){L8.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}_3(D8,L8),D8.prototype.update=function(e,t,r){"string"==typeof e&&(e=R8.from(e,t));var n=this._update(e);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},D8.prototype.setAutoPadding=function(){},D8.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},D8.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},D8.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},D8.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},D8.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},D8.prototype._finalOrDigest=function(e){var t=this.__final()||R8.alloc(0);return e&&(t=this._toString(t,e,!0)),t},D8.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new j8(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n};var B8=D8;function U8(e){B8.call(this,"digest"),this._hash=e}_3(U8,B8),U8.prototype._update=function(e){this._hash.update(e)},U8.prototype._final=function(){return this._hash.digest()};var F8=function(e){return"md5"===(e=e.toLowerCase())?new m4:"rmd160"===e||"ripemd160"===e?new L4:new U8(N8(e))},z8=k3.Buffer,H8=z8.alloc(128);function V8(e,t){B8.call(this,"digest"),"string"==typeof t&&(t=z8.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=z8.concat([t,H8],64));for(var r=this._ipad=z8.allocUnsafe(64),n=this._opad=z8.allocUnsafe(64),i=0;i<64;i++)r[i]=54^t[i],n[i]=92^t[i];this._hash=[r]}_3(V8,B8),V8.prototype._update=function(e){this._hash.push(e)},V8.prototype._final=function(){var e=this._alg(z8.concat(this._hash));return this._alg(z8.concat([this._opad,e]))};var K8=V8,q8=function(e){return(new m4).update(e).digest()},W8=k3.Buffer,G8=W8.alloc(128);function J8(e,t){B8.call(this,"digest"),"string"==typeof t&&(t=W8.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new L4:N8(e)).update(t).digest():t.length<r&&(t=W8.concat([t,G8],r));for(var n=this._ipad=W8.allocUnsafe(r),i=this._opad=W8.allocUnsafe(r),a=0;a<r;a++)n[a]=54^t[a],i[a]=92^t[a];this._hash="rmd160"===e?new L4:N8(e),this._hash.update(n)}_3(J8,B8),J8.prototype._update=function(e){this._hash.update(e)},J8.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new L4:N8(this._alg)).update(this._opad).update(e).digest()};var X8=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new J8("rmd160",t):"md5"===e?new K8(q8,t):new J8(e,t)},$8=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash160=function(e){var t=F8("sha256").update(e).digest();try{return F8("rmd160").update(t).digest()}catch(e){return F8("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return X8("sha512",e).update(t).digest()}}));QK($8),$8.hash160,$8.hmacSHA512;var Y8=k3.Buffer,Z8=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=n}var o=e.length,s=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return Y8.alloc(0);var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===s;)n++,r++;for(var a=(e.length-r)*u+1>>>0,c=new Uint8Array(a);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var f=0,h=a-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=o*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,r++}if(" "!==e[r]){for(var d=a-i;d!==a&&0===c[d];)d++;var p=Y8.allocUnsafe(n+(a-d));p.fill(0,0,n);for(var v=n;d!==a;)p[v++]=c[d++];return p}}}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=Y8.from(t)),!Y8.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,a=t.length;i!==a&&0===t[i];)i++,r++;for(var u=(a-i)*c+1>>>0,l=new Uint8Array(u);i!==a;){for(var f=t[i],h=0,d=u-1;(0!==f||h<n)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%o>>>0,f=f/o>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,i++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var v=s.repeat(r);p<u;++p)v+=e.charAt(l[p]);return v},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Q8=k3.Buffer,e9=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return Z8.encode(Q8.concat([t,r],t.length+4))},decode:function(e){var r=t(Z8.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=Z8.decodeUnsafe(e);if(r)return t(r)}}}((function(e){var t=F8("sha256").update(e).digest();return F8("sha256").update(t).digest()})),t9=eq((function(e){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==r(e)?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:k$.Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function u(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var i=0,a=Math.min(e.length,r),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==r(e)&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==r(e))return this._initArray(e,t,i);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,i):(this._parseBase(e,t,a),"le"===i&&this._initArray(this.toArray(),t,i)))},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<a,this.words[o]|=67108863&i,a>=18?(a-=18,o+=1,this.words[o]|=i>>>26):a+=8;this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,s=Math.min(a,a-o)+r,u=0,l=r;l<s;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=c(e,l,e.length,t),l=0;l<o;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(o=(i=0|e.words[p])*(a=0|t.words[d])+f)/67108864|0,f=67108863&o}r.words[c]=0|f,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r.strip()}a.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<i|a)).toString(16);r=0!=(a=s>>>24-i&16777215)||o!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],d=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?v+r:l[c-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==o),this.toArrayLike(o,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===t,c=new e(a),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),c[s]=o;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-i;s++)c[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),c[a-s-1]=o}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,o=0;o<n.length;o++)a=(t=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)a=(t=(0|r.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,o=e.words,s=t.words,u=r.words,c=0,l=0|o[0],f=8191&l,h=l>>>13,d=0|o[1],p=8191&d,v=d>>>13,y=0|o[2],g=8191&y,b=y>>>13,m=0|o[3],w=8191&m,x=m>>>13,_=0|o[4],k=8191&_,S=_>>>13,E=0|o[5],I=8191&E,A=E>>>13,T=0|o[6],P=8191&T,O=T>>>13,C=0|o[7],M=8191&C,N=C>>>13,R=0|o[8],L=8191&R,j=R>>>13,D=0|o[9],B=8191&D,U=D>>>13,F=0|s[0],z=8191&F,H=F>>>13,V=0|s[1],K=8191&V,q=V>>>13,W=0|s[2],G=8191&W,J=W>>>13,X=0|s[3],$=8191&X,Y=X>>>13,Z=0|s[4],Q=8191&Z,ee=Z>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ve=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(f,z))|0)+((8191&(i=(i=Math.imul(f,H))+Math.imul(h,z)|0))<<13)|0;c=((a=Math.imul(h,H))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,H))+Math.imul(v,z)|0,a=Math.imul(v,H);var ge=(c+(n=n+Math.imul(f,K)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,K)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,H))+Math.imul(b,z)|0,a=Math.imul(b,H),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,q)|0;var be=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,H))+Math.imul(x,z)|0,a=Math.imul(x,H),n=n+Math.imul(g,K)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(b,K)|0,a=a+Math.imul(b,q)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,G)|0,a=a+Math.imul(v,J)|0;var me=(c+(n=n+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(h,$)|0))<<13)|0;c=((a=a+Math.imul(h,Y)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,H))+Math.imul(S,z)|0,a=Math.imul(S,H),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(x,K)|0,a=a+Math.imul(x,q)|0,n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,G)|0,a=a+Math.imul(b,J)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(v,$)|0,a=a+Math.imul(v,Y)|0;var we=(c+(n=n+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,H))+Math.imul(A,z)|0,a=Math.imul(A,H),n=n+Math.imul(k,K)|0,i=(i=i+Math.imul(k,q)|0)+Math.imul(S,K)|0,a=a+Math.imul(S,q)|0,n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(x,G)|0,a=a+Math.imul(x,J)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(b,$)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(v,Q)|0,a=a+Math.imul(v,ee)|0;var xe=(c+(n=n+Math.imul(f,re)|0)|0)+((8191&(i=(i=i+Math.imul(f,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,H))+Math.imul(O,z)|0,a=Math.imul(O,H),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(A,K)|0,a=a+Math.imul(A,q)|0,n=n+Math.imul(k,G)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(S,G)|0,a=a+Math.imul(S,J)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,Y)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(v,re)|0,a=a+Math.imul(v,ne)|0;var _e=(c+(n=n+Math.imul(f,ae)|0)|0)+((8191&(i=(i=i+Math.imul(f,oe)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,oe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(M,z),i=(i=Math.imul(M,H))+Math.imul(N,z)|0,a=Math.imul(N,H),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(A,G)|0,a=a+Math.imul(A,J)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(S,$)|0,a=a+Math.imul(S,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(x,Q)|0,a=a+Math.imul(x,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(b,re)|0,a=a+Math.imul(b,ne)|0,n=n+Math.imul(p,ae)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,oe)|0;var ke=(c+(n=n+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,H))+Math.imul(j,z)|0,a=Math.imul(j,H),n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(N,K)|0,a=a+Math.imul(N,q)|0,n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(A,$)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(S,Q)|0,a=a+Math.imul(S,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(x,re)|0,a=a+Math.imul(x,ne)|0,n=n+Math.imul(g,ae)|0,i=(i=i+Math.imul(g,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(v,ue)|0,a=a+Math.imul(v,ce)|0;var Se=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,z),i=(i=Math.imul(B,H))+Math.imul(U,z)|0,a=Math.imul(U,H),n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(j,K)|0,a=a+Math.imul(j,q)|0,n=n+Math.imul(M,G)|0,i=(i=i+Math.imul(M,J)|0)+Math.imul(N,G)|0,a=a+Math.imul(N,J)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(S,re)|0,a=a+Math.imul(S,ne)|0,n=n+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,oe)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,ce)|0,n=n+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(v,fe)|0,a=a+Math.imul(v,he)|0;var Ee=(c+(n=n+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ve)|0)+Math.imul(h,pe)|0))<<13)|0;c=((a=a+Math.imul(h,ve)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,K),i=(i=Math.imul(B,q))+Math.imul(U,K)|0,a=Math.imul(U,q),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(j,G)|0,a=a+Math.imul(j,J)|0,n=n+Math.imul(M,$)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(N,$)|0,a=a+Math.imul(N,Y)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(A,re)|0,a=a+Math.imul(A,ne)|0,n=n+Math.imul(k,ae)|0,i=(i=i+Math.imul(k,oe)|0)+Math.imul(S,ae)|0,a=a+Math.imul(S,oe)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(x,ue)|0,a=a+Math.imul(x,ce)|0,n=n+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(b,fe)|0,a=a+Math.imul(b,he)|0;var Ie=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;c=((a=a+Math.imul(v,ve)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,G),i=(i=Math.imul(B,J))+Math.imul(U,G)|0,a=Math.imul(U,J),n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(N,Q)|0,a=a+Math.imul(N,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,n=n+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(S,ue)|0,a=a+Math.imul(S,ce)|0,n=n+Math.imul(w,fe)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(x,fe)|0,a=a+Math.imul(x,he)|0;var Ae=(c+(n=n+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ve)|0)+Math.imul(b,pe)|0))<<13)|0;c=((a=a+Math.imul(b,ve)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,$),i=(i=Math.imul(B,Y))+Math.imul(U,$)|0,a=Math.imul(U,Y),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(j,Q)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(M,re)|0,i=(i=i+Math.imul(M,ne)|0)+Math.imul(N,re)|0,a=a+Math.imul(N,ne)|0,n=n+Math.imul(P,ae)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(A,ue)|0,a=a+Math.imul(A,ce)|0,n=n+Math.imul(k,fe)|0,i=(i=i+Math.imul(k,he)|0)+Math.imul(S,fe)|0,a=a+Math.imul(S,he)|0;var Te=(c+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ve)|0)+Math.imul(x,pe)|0))<<13)|0;c=((a=a+Math.imul(x,ve)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,Q),i=(i=Math.imul(B,ee))+Math.imul(U,Q)|0,a=Math.imul(U,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(j,re)|0,a=a+Math.imul(j,ne)|0,n=n+Math.imul(M,ae)|0,i=(i=i+Math.imul(M,oe)|0)+Math.imul(N,ae)|0,a=a+Math.imul(N,oe)|0,n=n+Math.imul(P,ue)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,fe)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(A,fe)|0,a=a+Math.imul(A,he)|0;var Pe=(c+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,ve)|0)+Math.imul(S,pe)|0))<<13)|0;c=((a=a+Math.imul(S,ve)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,re),i=(i=Math.imul(B,ne))+Math.imul(U,re)|0,a=Math.imul(U,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,oe)|0)+Math.imul(j,ae)|0,a=a+Math.imul(j,oe)|0,n=n+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(N,ue)|0,a=a+Math.imul(N,ce)|0,n=n+Math.imul(P,fe)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(O,fe)|0,a=a+Math.imul(O,he)|0;var Oe=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ve)|0)+Math.imul(A,pe)|0))<<13)|0;c=((a=a+Math.imul(A,ve)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,ae),i=(i=Math.imul(B,oe))+Math.imul(U,ae)|0,a=Math.imul(U,oe),n=n+Math.imul(L,ue)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(j,ue)|0,a=a+Math.imul(j,ce)|0,n=n+Math.imul(M,fe)|0,i=(i=i+Math.imul(M,he)|0)+Math.imul(N,fe)|0,a=a+Math.imul(N,he)|0;var Ce=(c+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ve)|0)+Math.imul(O,pe)|0))<<13)|0;c=((a=a+Math.imul(O,ve)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(U,ue)|0,a=Math.imul(U,ce),n=n+Math.imul(L,fe)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(j,fe)|0,a=a+Math.imul(j,he)|0;var Me=(c+(n=n+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ve)|0)+Math.imul(N,pe)|0))<<13)|0;c=((a=a+Math.imul(N,ve)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul(B,fe),i=(i=Math.imul(B,he))+Math.imul(U,fe)|0,a=Math.imul(U,he);var Ne=(c+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ve)|0)+Math.imul(j,pe)|0))<<13)|0;c=((a=a+Math.imul(j,ve)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Re=(c+(n=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,ve))+Math.imul(U,pe)|0))<<13)|0;return c=((a=Math.imul(U,ve))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u[0]=ye,u[1]=ge,u[2]=be,u[3]=me,u[4]=we,u[5]=xe,u[6]=_e,u[7]=ke,u[8]=Se,u[9]=Ee,u[10]=Ie,u[11]=Ae,u[12]=Te,u[13]=Pe,u[14]=Oe,u[15]=Ce,u[16]=Me,u[17]=Ne,u[18]=Re,0!==c&&(u[19]=c,r.length++),r};function v(e,t,r){return(new y).mulp(e,t,r)}function y(e,t){this.x=e,this.y=t}Math.imul||(p=d),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?d(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,u=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=u;c++){var l=a-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):v(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},y.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},y.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<o;d++){var p=r[l+d],v=n[l+d],y=r[l+d+o],g=n[l+d+o],b=f*y-h*g;g=f*g+h*y,y=b,r[l+d]=p+y,n[l+d]=v+g,r[l+d+o]=p-y,n[l+d+o]=v-g,d!==s&&(b=u*f-c*h,h=u*h+c*f,f=b)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},y.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},y.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n(0==(-8192&a))},y.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,a,s,u,n,i),this.transform(c,a,l,f,n,i);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),v(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[r]=67108863&a}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,u=(0|this.words[t])-s<<r;this.words[t]=u|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,u=r;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-a|f>>>a,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((a-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var s,u=n.length-i.length;if("mod"!==t){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h)}return s&&s.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},a.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,o,s},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},a.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),u=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0==(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,v=1;0==(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(u)):(r.isub(t),s.isub(i),u.isub(o))}return{a:s,b:u,gcd:r.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new a(1),s=new a(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var f=0,h=1;0==(r.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(r.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s)):(r.isub(t),s.isub(o))}return(i=0===t.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new k(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(m,b),m.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,b),i(x,b),i(_,b),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new w;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new a(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=o;0!==d.cmp(s);){for(var v=d,y=0;0!==v.cmp(s);y++)v=v.redSqr();n(y<p);var g=this.pow(f,new a(1).iushln(p-y-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=y}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var f=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4==++s||0===n&&0===l)&&(i=this.mul(i,r[o]),s=0,o=0)):s=0}u=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new S(e)},i(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,ZK)})),r9="lib/elliptic.js",n9=["lib"],i9={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},a9={type:"git",url:"git@github.com:indutny/elliptic"},o9=["EC","Elliptic","curve","Cryptography"],s9="Fedor Indutny <fedor@indutny.com>",u9={url:"https://github.com/indutny/elliptic/issues"},c9="https://github.com/indutny/elliptic",l9={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},f9={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},h9={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:r9,files:n9,scripts:i9,repository:a9,keywords:o9,author:s9,license:"MIT",bugs:u9,homepage:c9,devDependencies:l9,dependencies:f9},d9=Object.freeze({__proto__:null,name:"elliptic",version:"6.5.4",description:"EC cryptography",main:r9,files:n9,scripts:i9,repository:a9,keywords:o9,author:s9,license:"MIT",bugs:u9,homepage:c9,devDependencies:l9,dependencies:f9,default:h9}),p9=v9;function v9(e,t){if(!e)throw new Error(t||"Assertion failed")}v9.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var y9,g9=eq((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),a=i>>8,o=255&i;a?r.push(a,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),b9=eq((function(e,t){var r=t;r.assert=p9,r.toArray=g9.toArray,r.zero2=g9.zero2,r.toHex=g9.toHex,r.encode=g9.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,a=e.clone(),o=0;o<n.length;o++){var s,u=a.andln(i-1);a.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,a.isubn(s)):s=0,n[o]=s,a.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,a=0;e.cmpn(-i)>0||t.cmpn(-a)>0;){var o,s,u=e.andln(3)+i&3,c=t.andln(3)+a&3;3===u&&(u=-1),3===c&&(c=-1),o=0==(1&u)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(o),s=0==(1&c)?0:3!=(n=t.andln(7)+a&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===o+1&&(i=1-i),2*a===s+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new t9(e,"hex","le")}})),m9=function(e){return y9||(y9=new w9(null)),y9.generate(e)};function w9(e){this.rand=e}var x9=w9;if(w9.prototype.generate=function(e){return this._rand(e)},w9.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==("undefined"==typeof self?"undefined":r(self)))self.crypto&&self.crypto.getRandomValues?w9.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?w9.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==("undefined"==typeof window?"undefined":r(window))&&(w9.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _9=k$;if("function"!=typeof _9.randomBytes)throw new Error("Not supported");w9.prototype._rand=function(e){return _9.randomBytes(e)}}catch(IK){}m9.Rand=x9;var k9=b9.getNAF,S9=b9.getJSF,E9=b9.assert;function I9(e,t){this.type=e,this.p=new t9(t.p,16),this.red=t.prime?t9.red(t.prime):t9.mont(this.p),this.zero=new t9(0).toRed(this.red),this.one=new t9(1).toRed(this.red),this.two=new t9(2).toRed(this.red),this.n=t.n&&new t9(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var A9=I9;function T9(e,t){this.curve=e,this.type=t,this.precomputed=null}I9.prototype.point=function(){throw new Error("Not implemented")},I9.prototype.validate=function(){throw new Error("Not implemented")},I9.prototype._fixedNafMul=function(e,t){E9(e.precomputed);var r=e._getDoubles(),n=k9(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var a,o,s=[];for(a=0;a<n.length;a+=r.step){o=0;for(var u=a+r.step-1;u>=a;u--)o=(o<<1)+n[u];s.push(o)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=i;f>0;f--){for(a=0;a<s.length;a++)(o=s[a])===f?l=l.mixedAdd(r.points[a]):o===-f&&(l=l.mixedAdd(r.points[a].neg()));c=c.add(l)}return c.toP()},I9.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,a=k9(t,r,this._bitLength),o=this.jpoint(null,null,null),s=a.length-1;s>=0;s--){for(var u=0;s>=0&&0===a[s];s--)u++;if(s>=0&&u++,o=o.dblp(u),s<0)break;var c=a[s];E9(0!==c),o="affine"===e.type?c>0?o.mixedAdd(i[c-1>>1]):o.mixedAdd(i[-c-1>>1].neg()):c>0?o.add(i[c-1>>1]):o.add(i[-c-1>>1].neg())}return"affine"===e.type?o.toP():o},I9.prototype._wnafMulAdd=function(e,t,r,n,i){var a,o,s,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,f=0;for(a=0;a<n;a++){var h=(s=t[a])._getNAFPoints(e);u[a]=h.wnd,c[a]=h.points}for(a=n-1;a>=1;a-=2){var d=a-1,p=a;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],g=S9(r[d],r[p]);for(f=Math.max(g[0].length,f),l[d]=new Array(f),l[p]=new Array(f),o=0;o<f;o++){var b=0|g[0][o],m=0|g[1][o];l[d][o]=y[3*(b+1)+(m+1)],l[p][o]=0,c[d]=v}}else l[d]=k9(r[d],u[d],this._bitLength),l[p]=k9(r[p],u[p],this._bitLength),f=Math.max(l[d].length,f),f=Math.max(l[p].length,f)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(a=f;a>=0;a--){for(var _=0;a>=0;){var k=!0;for(o=0;o<n;o++)x[o]=0|l[o][a],0!==x[o]&&(k=!1);if(!k)break;_++,a--}if(a>=0&&_++,w=w.dblp(_),a<0)break;for(o=0;o<n;o++){var S=x[o];0!==S&&(S>0?s=c[o][S-1>>1]:S<0&&(s=c[o][-S-1>>1].neg()),w="affine"===s.type?w.mixedAdd(s):w.add(s))}}for(a=0;a<n;a++)c[a]=null;return i?w:w.toP()},I9.BasePoint=T9,T9.prototype.eq=function(){throw new Error("Not implemented")},T9.prototype.validate=function(){return this.curve.validate(this)},I9.prototype.decodePoint=function(e,t){e=b9.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?E9(e[e.length-1]%2==0):7===e[0]&&E9(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},T9.prototype.encodeCompressed=function(e){return this.encode(e,!0)},T9.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},T9.prototype.encode=function(e,t){return b9.encode(this._encode(t),e)},T9.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},T9.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},T9.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)n=n.dbl();r.push(n)}return{step:e,points:r}},T9.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},T9.prototype._getBeta=function(){return null},T9.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var P9=b9.assert;function O9(e){A9.call(this,"short",e),this.a=new t9(e.a,16).toRed(this.red),this.b=new t9(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_3(O9,A9);var C9=O9;function M9(e,t,r,n){A9.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new t9(t,16),this.y=new t9(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function N9(e,t,r,n){A9.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new t9(0)):(this.x=new t9(t,16),this.y=new t9(r,16),this.z=new t9(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}function R9(e){A9.call(this,"mont",e),this.a=new t9(e.a,16).toRed(this.red),this.b=new t9(e.b,16).toRed(this.red),this.i4=new t9(4).toRed(this.red).redInvm(),this.two=new t9(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}O9.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new t9(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new t9(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],P9(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new t9(e.a,16),b:new t9(e.b,16)}})):this._getEndoBasis(r)}}},O9.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:t9.mont(e),r=new t9(2).toRed(t).redInvm(),n=r.redNeg(),i=new t9(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},O9.prototype._getEndoBasis=function(e){for(var t,r,n,i,a,o,s,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,h=this.n.clone(),d=new t9(1),p=new t9(0),v=new t9(0),y=new t9(1),g=0;0!==f.cmpn(0);){var b=h.div(f);u=h.sub(b.mul(f)),c=v.sub(b.mul(d));var m=y.sub(b.mul(p));if(!n&&u.cmp(l)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++g)break;s=u,h=f,f=u,v=d,d=c,y=p,p=m}a=u.neg(),o=c;var w=n.sqr().add(i.sqr());return a.sqr().add(o.sqr()).cmp(w)>=0&&(a=t,o=r),n.negative&&(n=n.neg(),i=i.neg()),a.negative&&(a=a.neg(),o=o.neg()),[{a:n,b:i},{a:a,b:o}]},O9.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),s=a.mul(n.a),u=i.mul(r.b),c=a.mul(n.b);return{k1:e.sub(o).sub(s),k2:u.add(c).neg()}},O9.prototype.pointFromX=function(e,t){(e=new t9(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},O9.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},O9.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),s=e[a],u=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),n[2*a]=s,n[2*a+1]=u,i[2*a]=o.k1,i[2*a+1]=o.k2}for(var c=this._wnafMulAdd(1,n,i,2*a,r),l=0;l<2*a;l++)n[l]=null,i[l]=null;return c},_3(M9,A9.BasePoint),O9.prototype.point=function(e,t,r){return new M9(this,e,t,r)},O9.prototype.pointFromJSON=function(e,t){return M9.fromJSON(this,e,t)},M9.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},M9.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},M9.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var a=t[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(i))}},n},M9.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},M9.prototype.isInfinity=function(){return this.inf},M9.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},M9.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},M9.prototype.getX=function(){return this.x.fromRed()},M9.prototype.getY=function(){return this.y.fromRed()},M9.prototype.mul=function(e){return e=new t9(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},M9.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},M9.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},M9.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},M9.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},M9.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},_3(N9,A9.BasePoint),O9.prototype.jpoint=function(e,t,r){return new N9(this,e,t,r)},N9.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},N9.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},N9.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=a.redSub(o);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),f=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(f).redISub(f),d=u.redMul(f.redISub(h)).redISub(a.redMul(l)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},N9.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),o=r.redSub(n),s=i.redSub(a);if(0===o.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),c=u.redMul(o),l=r.redMul(u),f=s.redSqr().redIAdd(c).redISub(l).redISub(l),h=s.redMul(l.redISub(f)).redISub(i.redMul(c)),d=this.z.redMul(o);return this.curve.jpoint(f,h,d)},N9.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,s=this.z,u=s.redSqr().redSqr(),c=o.redAdd(o);for(t=0;t<e;t++){var l=a.redSqr(),f=c.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=a.redMul(f),v=d.redSqr().redISub(p.redAdd(p)),y=p.redISub(v),g=d.redMul(y);g=g.redIAdd(g).redISub(h);var b=c.redMul(s);t+1<e&&(u=u.redMul(h)),a=v,s=b,c=g}return this.curve.jpoint(a,c.redMul(i),s)},N9.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},N9.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(o).redISub(o),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(o.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(l).redISub(h);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),v=p.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},N9.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(o).redISub(o);e=u;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(o.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l);var y=f.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=d.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,r)},N9.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),a=t.redSqr(),o=r.redSqr(),s=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(o),l=s.redSqr().redISub(c.redAdd(c)),f=c.redISub(l),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(f).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},N9.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(o).redSqr().redISub(a).redISub(s).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(s).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(o.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(s);return this.curve.jpoint(f,h,d)},N9.prototype.mul=function(e,t){return e=new t9(e,t),this.curve._wnafMul(this,e)},N9.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},N9.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},N9.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},N9.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},_3(R9,A9);var L9=R9;function j9(e,t,r){A9.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t9(t,16),this.z=new t9(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}R9.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},_3(j9,A9.BasePoint),R9.prototype.decodePoint=function(e,t){return this.point(b9.toArray(e,t),1)},R9.prototype.point=function(e,t){return new j9(this,e,t)},R9.prototype.pointFromJSON=function(e){return j9.fromJSON(this,e)},j9.prototype.precompute=function(){},j9.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},j9.fromJSON=function(e,t){return new j9(e,t[0],t[1]||e.one)},j9.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},j9.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},j9.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},j9.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},j9.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),o=i.redMul(n),s=t.z.redMul(a.redAdd(o).redSqr()),u=t.x.redMul(a.redISub(o).redSqr());return this.curve.point(s,u)},j9.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},j9.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},j9.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},j9.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},j9.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},j9.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var D9=b9.assert;function B9(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,A9.call(this,"edwards",e),this.a=new t9(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new t9(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new t9(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),D9(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}_3(B9,A9);var U9=B9;function F9(e,t,r,n,i){A9.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new t9(t,16),this.y=new t9(r,16),this.z=n?new t9(n,16):this.curve.one,this.t=i&&new t9(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}B9.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},B9.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},B9.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},B9.prototype.pointFromX=function(e,t){(e=new t9(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),a=n.redMul(i.redInvm()),o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var s=o.fromRed().isOdd();return(t&&!s||!t&&s)&&(o=o.redNeg()),this.point(e,o)},B9.prototype.pointFromY=function(e,t){(e=new t9(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(i.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},B9.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},_3(F9,A9.BasePoint),B9.prototype.pointFromJSON=function(e){return F9.fromJSON(this,e)},B9.prototype.point=function(e,t,r,n){return new F9(this,e,t,r,n)},F9.fromJSON=function(e,t){return new F9(e,t[0],t[1],t[2])},F9.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},F9.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},F9.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),o=a.redSub(r),s=n.redSub(t),u=i.redMul(o),c=a.redMul(s),l=i.redMul(s),f=o.redMul(a);return this.curve.point(u,c,f,l)},F9.prototype._projDbl=function(){var e,t,r,n,i,a,o=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(e=o.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),a=c.redSub(i).redISub(i),e=o.redSub(s).redISub(u).redMul(a),t=c.redMul(n.redSub(u)),r=c.redMul(a))}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),a=n.redSub(i).redSub(i),e=this.curve._mulC(o.redISub(n)).redMul(a),t=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(a);return this.curve.point(e,t,r)},F9.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},F9.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),o=i.redSub(n),s=i.redAdd(n),u=r.redAdd(t),c=a.redMul(o),l=s.redMul(u),f=a.redMul(u),h=o.redMul(s);return this.curve.point(c,l,h,f)},F9.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),a=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(a).redMul(o),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(o),f=n.redMul(u).redMul(l);return this.curve.twisted?(t=n.redMul(c).redMul(o.redSub(this.curve._mulA(a))),r=u.redMul(c)):(t=n.redMul(c).redMul(o.redSub(a)),r=this.curve._mulC(u).redMul(c)),this.curve.point(f,t,r)},F9.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},F9.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},F9.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},F9.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},F9.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},F9.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},F9.prototype.getX=function(){return this.normalize(),this.x.fromRed()},F9.prototype.getY=function(){return this.normalize(),this.y.fromRed()},F9.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},F9.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},F9.prototype.toP=F9.prototype.normalize,F9.prototype.mixedAdd=F9.prototype.add;var z9=eq((function(e,t){var r=t;r.base=A9,r.short=C9,r.mont=L9,r.edwards=U9}));function H9(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function V9(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function K9(e){return 1===e.length?"0"+e:e}function q9(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}var W9={inherits:_3,toArray:function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):H9(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},toHex:function(e){for(var t="",r=0;r<e.length;r++)t+=K9(e[r].toString(16));return t},htonl:V9,toHex32:function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=V9(i)),r+=q9(i.toString(16))}return r},zero2:K9,zero8:q9,join32:function(e,t,r,n){var i=r-t;p9(i%4==0);for(var a=new Array(i/4),o=0,s=t;o<a.length;o++,s+=4){var u;u="big"===n?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],a[o]=u>>>0}return a},split32:function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var a=e[n];"big"===t?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=255&a):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=255&a)}return r},rotr32:function(e,t){return e>>>t|e<<32-t},rotl32:function(e,t){return e<<t|e>>>32-t},sum32:function(e,t){return e+t>>>0},sum32_3:function(e,t,r){return e+t+r>>>0},sum32_4:function(e,t,r,n){return e+t+r+n>>>0},sum32_5:function(e,t,r,n,i){return e+t+r+n+i>>>0},sum64:function(e,t,r,n){var i=e[t],a=n+e[t+1]>>>0,o=(a<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=a},sum64_hi:function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},sum64_lo:function(e,t,r,n){return t+n>>>0},sum64_4_hi:function(e,t,r,n,i,a,o,s){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+a>>>0)<a?1:0,e+r+i+o+(u+=(c=c+s>>>0)<s?1:0)>>>0},sum64_4_lo:function(e,t,r,n,i,a,o,s){return t+n+a+s>>>0},sum64_5_hi:function(e,t,r,n,i,a,o,s,u,c){var l=0,f=t;return l+=(f=f+n>>>0)<t?1:0,l+=(f=f+a>>>0)<a?1:0,l+=(f=f+s>>>0)<s?1:0,e+r+i+o+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},sum64_5_lo:function(e,t,r,n,i,a,o,s,u,c){return t+n+a+s+c>>>0},rotr64_hi:function(e,t,r){return(t<<32-r|e>>>r)>>>0},rotr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0},shr64_hi:function(e,t,r){return e>>>r},shr64_lo:function(e,t,r){return(e<<32-r|t>>>r)>>>0}};function G9(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var J9=G9;G9.prototype.update=function(e,t){if(e=W9.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=W9.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},G9.prototype.digest=function(e){return this.update(this._pad()),p9(null===this.pending),this._digest(e)},G9.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,a=8;a<this.padLength;a++)n[i++]=0;return n};var X9={BlockHash:J9},$9=W9.rotr32;function Y9(e,t,r){return e&t^~e&r}function Z9(e,t,r){return e&t^e&r^t&r}function Q9(e,t,r){return e^t^r}var e7=function(e,t,r,n){return 0===e?Y9(t,r,n):1===e||3===e?Q9(t,r,n):2===e?Z9(t,r,n):void 0},t7=Y9,r7=Z9,n7=function(e){return $9(e,2)^$9(e,13)^$9(e,22)},i7=function(e){return $9(e,6)^$9(e,11)^$9(e,25)},a7=function(e){return $9(e,7)^$9(e,18)^e>>>3},o7=function(e){return $9(e,17)^$9(e,19)^e>>>10},s7=W9.rotl32,u7=W9.sum32,c7=W9.sum32_5,l7=e7,f7=X9.BlockHash,h7=[1518500249,1859775393,2400959708,3395469782];function d7(){if(!(this instanceof d7))return new d7;f7.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}W9.inherits(d7,f7);var p7=d7;d7.blockSize=512,d7.outSize=160,d7.hmacStrength=80,d7.padLength=64,d7.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s7(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),l=c7(s7(i,5),l7(c,a,o,s),u,r[n],h7[c]);u=s,s=o,o=s7(a,30),a=i,i=l}this.h[0]=u7(this.h[0],i),this.h[1]=u7(this.h[1],a),this.h[2]=u7(this.h[2],o),this.h[3]=u7(this.h[3],s),this.h[4]=u7(this.h[4],u)},d7.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h,"big"):W9.split32(this.h,"big")};var v7=W9.sum32,y7=W9.sum32_4,g7=W9.sum32_5,b7=t7,m7=r7,w7=n7,x7=i7,_7=a7,k7=o7,S7=X9.BlockHash,E7=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function I7(){if(!(this instanceof I7))return new I7;S7.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=E7,this.W=new Array(64)}W9.inherits(I7,S7);var A7=I7;function T7(){if(!(this instanceof T7))return new T7;A7.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}I7.blockSize=512,I7.outSize=256,I7.hmacStrength=192,I7.padLength=64,I7.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=y7(k7(r[n-2]),r[n-7],_7(r[n-15]),r[n-16]);var i=this.h[0],a=this.h[1],o=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],f=this.h[7];for(p9(this.k.length===r.length),n=0;n<r.length;n++){var h=g7(f,x7(u),b7(u,c,l),this.k[n],r[n]),d=v7(w7(i),m7(i,a,o));f=l,l=c,c=u,u=v7(s,h),s=o,o=a,a=i,i=v7(h,d)}this.h[0]=v7(this.h[0],i),this.h[1]=v7(this.h[1],a),this.h[2]=v7(this.h[2],o),this.h[3]=v7(this.h[3],s),this.h[4]=v7(this.h[4],u),this.h[5]=v7(this.h[5],c),this.h[6]=v7(this.h[6],l),this.h[7]=v7(this.h[7],f)},I7.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h,"big"):W9.split32(this.h,"big")},W9.inherits(T7,A7);var P7=T7;T7.blockSize=512,T7.outSize=224,T7.hmacStrength=192,T7.padLength=64,T7.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h.slice(0,7),"big"):W9.split32(this.h.slice(0,7),"big")};var O7=W9.rotr64_hi,C7=W9.rotr64_lo,M7=W9.shr64_hi,N7=W9.shr64_lo,R7=W9.sum64,L7=W9.sum64_hi,j7=W9.sum64_lo,D7=W9.sum64_4_hi,B7=W9.sum64_4_lo,U7=W9.sum64_5_hi,F7=W9.sum64_5_lo,z7=X9.BlockHash,H7=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function V7(){if(!(this instanceof V7))return new V7;z7.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=H7,this.W=new Array(160)}W9.inherits(V7,z7);var K7=V7;function q7(e,t,r,n,i){var a=e&r^~e&i;return a<0&&(a+=4294967296),a}function W7(e,t,r,n,i,a){var o=t&n^~t&a;return o<0&&(o+=4294967296),o}function G7(e,t,r,n,i){var a=e&r^e&i^r&i;return a<0&&(a+=4294967296),a}function J7(e,t,r,n,i,a){var o=t&n^t&a^n&a;return o<0&&(o+=4294967296),o}function X7(e,t){var r=O7(e,t,28)^O7(t,e,2)^O7(t,e,7);return r<0&&(r+=4294967296),r}function $7(e,t){var r=C7(e,t,28)^C7(t,e,2)^C7(t,e,7);return r<0&&(r+=4294967296),r}function Y7(e,t){var r=O7(e,t,14)^O7(e,t,18)^O7(t,e,9);return r<0&&(r+=4294967296),r}function Z7(e,t){var r=C7(e,t,14)^C7(e,t,18)^C7(t,e,9);return r<0&&(r+=4294967296),r}function Q7(e,t){var r=O7(e,t,1)^O7(e,t,8)^M7(e,t,7);return r<0&&(r+=4294967296),r}function eee(e,t){var r=C7(e,t,1)^C7(e,t,8)^N7(e,t,7);return r<0&&(r+=4294967296),r}function tee(e,t){var r=O7(e,t,19)^O7(t,e,29)^M7(e,t,6);return r<0&&(r+=4294967296),r}function ree(e,t){var r=C7(e,t,19)^C7(t,e,29)^N7(e,t,6);return r<0&&(r+=4294967296),r}function nee(){if(!(this instanceof nee))return new nee;K7.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}V7.blockSize=1024,V7.outSize=512,V7.hmacStrength=192,V7.padLength=128,V7.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=tee(r[n-4],r[n-3]),a=ree(r[n-4],r[n-3]),o=r[n-14],s=r[n-13],u=Q7(r[n-30],r[n-29]),c=eee(r[n-30],r[n-29]),l=r[n-32],f=r[n-31];r[n]=D7(i,a,o,s,u,c,l,f),r[n+1]=B7(i,a,o,s,u,c,l,f)}},V7.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],a=this.h[2],o=this.h[3],s=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],f=this.h[8],h=this.h[9],d=this.h[10],p=this.h[11],v=this.h[12],y=this.h[13],g=this.h[14],b=this.h[15];p9(this.k.length===r.length);for(var m=0;m<r.length;m+=2){var w=g,x=b,_=Y7(f,h),k=Z7(f,h),S=q7(f,0,d,0,v),E=W7(0,h,0,p,0,y),I=this.k[m],A=this.k[m+1],T=r[m],P=r[m+1],O=U7(w,x,_,k,S,E,I,A,T,P),C=F7(w,x,_,k,S,E,I,A,T,P);w=X7(n,i),x=$7(n,i),_=G7(n,0,a,0,s),k=J7(0,i,0,o,0,u);var M=L7(w,x,_,k),N=j7(w,x,_,k);g=v,b=y,v=d,y=p,d=f,p=h,f=L7(c,l,O,C),h=j7(l,l,O,C),c=s,l=u,s=a,u=o,a=n,o=i,n=L7(O,C,M,N),i=j7(O,C,M,N)}R7(this.h,0,n,i),R7(this.h,2,a,o),R7(this.h,4,s,u),R7(this.h,6,c,l),R7(this.h,8,f,h),R7(this.h,10,d,p),R7(this.h,12,v,y),R7(this.h,14,g,b)},V7.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h,"big"):W9.split32(this.h,"big")},W9.inherits(nee,K7);var iee=nee;nee.blockSize=1024,nee.outSize=384,nee.hmacStrength=192,nee.padLength=128,nee.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h.slice(0,12),"big"):W9.split32(this.h.slice(0,12),"big")};var aee={sha1:p7,sha224:P7,sha256:A7,sha384:iee,sha512:K7},oee=W9.rotl32,see=W9.sum32,uee=W9.sum32_3,cee=W9.sum32_4,lee=X9.BlockHash;function fee(){if(!(this instanceof fee))return new fee;lee.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}W9.inherits(fee,lee);var hee=fee;function dee(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function pee(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function vee(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}fee.blockSize=512,fee.outSize=160,fee.hmacStrength=192,fee.padLength=64,fee.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],a=this.h[3],o=this.h[4],s=r,u=n,c=i,l=a,f=o,h=0;h<80;h++){var d=see(oee(cee(r,dee(h,n,i,a),e[yee[h]+t],pee(h)),bee[h]),o);r=o,o=a,a=oee(i,10),i=n,n=d,d=see(oee(cee(s,dee(79-h,u,c,l),e[gee[h]+t],vee(h)),mee[h]),f),s=f,f=l,l=oee(c,10),c=u,u=d}d=uee(this.h[1],i,l),this.h[1]=uee(this.h[2],a,f),this.h[2]=uee(this.h[3],o,s),this.h[3]=uee(this.h[4],r,u),this.h[4]=uee(this.h[0],n,c),this.h[0]=d},fee.prototype._digest=function(e){return"hex"===e?W9.toHex32(this.h,"little"):W9.split32(this.h,"little")};var yee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],gee=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],bee=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],mee=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],wee={ripemd160:hee};function xee(e,t,r){if(!(this instanceof xee))return new xee(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(W9.toArray(t,r))}var _ee=xee;xee.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),p9(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},xee.prototype.update=function(e,t){return this.inner.update(e,t),this},xee.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};var kee=eq((function(e,t){var r=t;r.utils=W9,r.common=X9,r.sha=aee,r.ripemd=wee,r.hmac=_ee,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160})),See={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},Eee=eq((function(e,t){var r,n=t,i=b9.assert;function a(e){"short"===e.type?this.curve=new z9.short(e):"edwards"===e.type?this.curve=new z9.edwards(e):this.curve=new z9.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new a(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=a,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:kee.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:kee.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:kee.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:kee.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:kee.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kee.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kee.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=See}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:kee.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Iee(e){if(!(this instanceof Iee))return new Iee(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=g9.toArray(e.entropy,e.entropyEnc||"hex"),r=g9.toArray(e.nonce,e.nonceEnc||"hex"),n=g9.toArray(e.pers,e.persEnc||"hex");p9(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Aee=Iee;Iee.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Iee.prototype._hmac=function(){return new kee.hmac(this.hash,this.K)},Iee.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Iee.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=g9.toArray(e,t),r=g9.toArray(r,n),p9(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Iee.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=g9.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(r),this._reseed++,g9.encode(a,t)};var Tee=b9.assert;function Pee(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Oee=Pee;Pee.fromPublic=function(e,t,r){return t instanceof Pee?t:new Pee(e,{pub:t,pubEnc:r})},Pee.fromPrivate=function(e,t,r){return t instanceof Pee?t:new Pee(e,{priv:t,privEnc:r})},Pee.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Pee.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Pee.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Pee.prototype._importPrivate=function(e,t){this.priv=new t9(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Pee.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Tee(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Tee(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Pee.prototype.derive=function(e){return e.validate()||Tee(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Pee.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Pee.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Pee.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Cee=b9.assert;function Mee(e,t){if(e instanceof Mee)return e;this._importDER(e,t)||(Cee(e.r&&e.s,"Signature without r or s"),this.r=new t9(e.r,16),this.s=new t9(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Nee=Mee;function Ree(){this.place=0}function Lee(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,a=0,o=t.place;a<n;a++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function jee(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Dee(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Mee.prototype._importDER=function(e,t){e=b9.toArray(e,t);var r=new Ree;if(48!==e[r.place++])return!1;var n=Lee(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Lee(e,r);if(!1===i)return!1;var a=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var o=Lee(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;var s=e.slice(r.place,o+r.place);if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new t9(a),this.s=new t9(s),this.recoveryParam=null,!0},Mee.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=jee(t),r=jee(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Dee(n,t.length),(n=n.concat(t)).push(2),Dee(n,r.length);var i=n.concat(r),a=[48];return Dee(a,i.length),a=a.concat(i),b9.encode(a,e)};var Bee=b9.assert;function Uee(e){if(!(this instanceof Uee))return new Uee(e);"string"==typeof e&&(Bee(Object.prototype.hasOwnProperty.call(Eee,e),"Unknown curve "+e),e=Eee[e]),e instanceof Eee.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Fee=Uee;Uee.prototype.keyPair=function(e){return new Oee(this,e)},Uee.prototype.keyFromPrivate=function(e,t){return Oee.fromPrivate(this,e,t)},Uee.prototype.keyFromPublic=function(e,t){return Oee.fromPublic(this,e,t)},Uee.prototype.genKeyPair=function(e){e||(e={});for(var t=new Aee({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||m9(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new t9(2));;){var i=new t9(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Uee.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Uee.prototype.sign=function(e,t,n,i){"object"==r(n)&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new t9(e,16));for(var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),s=e.toArray("be",a),u=new Aee({hash:this.hash,entropy:o,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),c=this.n.sub(new t9(1)),l=0;;l++){var f=i.k?i.k(l):new t9(u.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(c)>=0)){var h=this.g.mul(f);if(!h.isInfinity()){var d=h.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var v=f.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(h.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return i.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new Nee({r:p,s:v,recoveryParam:y})}}}}}},Uee.prototype.verify=function(e,t,r,n){e=this._truncateToN(new t9(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Nee(t,"hex")).r,a=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o,s=a.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},Uee.prototype.recoverPubKey=function(e,t,r,n){Bee((3&r)===r,"The recovery param is more than two bits"),t=new Nee(t,n);var i=this.n,a=new t9(e),o=t.r,s=t.s,u=1&r,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");o=c?this.curve.pointFromX(o.add(this.curve.n),u):this.curve.pointFromX(o,u);var l=t.r.invm(i),f=i.sub(a).mul(l).umod(i),h=s.mul(l).umod(i);return this.g.mulAdd(f,o,h)},Uee.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Nee(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(e){continue}if(a.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var zee=b9.assert,Hee=b9.parseBytes,Vee=b9.cachedProperty;function Kee(e,t){this.eddsa=e,this._secret=Hee(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=Hee(t.pub)}Kee.fromPublic=function(e,t){return t instanceof Kee?t:new Kee(e,{pub:t})},Kee.fromSecret=function(e,t){return t instanceof Kee?t:new Kee(e,{secret:t})},Kee.prototype.secret=function(){return this._secret},Vee(Kee,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),Vee(Kee,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),Vee(Kee,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),Vee(Kee,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),Vee(Kee,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),Vee(Kee,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Kee.prototype.sign=function(e){return zee(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},Kee.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},Kee.prototype.getSecret=function(e){return zee(this._secret,"KeyPair is public only"),b9.encode(this.secret(),e)},Kee.prototype.getPublic=function(e){return b9.encode(this.pubBytes(),e)};var qee=Kee,Wee=b9.assert,Gee=b9.cachedProperty,Jee=b9.parseBytes;function Xee(e,t){this.eddsa=e,"object"!=r(t)&&(t=Jee(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),Wee(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof t9&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Gee(Xee,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Gee(Xee,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Gee(Xee,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Gee(Xee,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Xee.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Xee.prototype.toHex=function(){return b9.encode(this.toBytes(),"hex").toUpperCase()};var $ee=Xee,Yee=b9.assert,Zee=b9.parseBytes;function Qee(e){if(Yee("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof Qee))return new Qee(e);e=Eee[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=kee.sha512}var ete=Qee;Qee.prototype.sign=function(e,t){e=Zee(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),a=this.encodePoint(i),o=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),s=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:s,Rencoded:a})},Qee.prototype.verify=function(e,t,r){e=Zee(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(a)},Qee.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return b9.intFromLE(e.digest()).umod(this.curve.n)},Qee.prototype.keyFromPublic=function(e){return qee.fromPublic(this,e)},Qee.prototype.keyFromSecret=function(e){return qee.fromSecret(this,e)},Qee.prototype.makeSignature=function(e){return e instanceof $ee?e:new $ee(this,e)},Qee.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},Qee.prototype.decodePoint=function(e){var t=(e=b9.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!=(128&e[t]),i=b9.intFromLE(r);return this.curve.pointFromY(i,n)},Qee.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},Qee.prototype.decodeInt=function(e){return b9.intFromLE(e)},Qee.prototype.isPoint=function(e){return e instanceof this.pointClass};var tte=tq(d9),rte=eq((function(e,t){var r=t;r.version=tte.version,r.utils=b9,r.rand=m9,r.curve=z9,r.curves=Eee,r.ec=Fee,r.eddsa=ete})),nte=xq.alloc(1,1),ite=xq.alloc(1,0),ate=new rte.ec("secp256k1"),ote=xq.alloc(32,0),ste=xq.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ute=xq.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),cte=ate.curve.n,lte=cte.shrn(1),fte=ate.curve.g;function hte(e){return nW(e)&&32===e.length}function dte(e){return!!hte(e)&&e.compare(ste)<0}function pte(e){if(!nW(e))return!1;if(e.length<33)return!1;var t=e[0],r=e.slice(1,33);if(0===r.compare(ote))return!1;if(r.compare(ute)>=0)return!1;if((2===t||3===t)&&33===e.length){try{wte(e)}catch(e){return!1}return!0}var n=e.slice(33);return 0!==n.compare(ote)&&!(n.compare(ute)>=0)&&4===t&&65===e.length}function vte(e){return 4!==e[0]}function yte(e){return!!hte(e)&&e.compare(ote)>0&&e.compare(ste)<0}function gte(e,t){return void 0===e&&void 0!==t?vte(t):void 0===e||e}function bte(e){return new t9(e)}function mte(e){return e.toArrayLike(xq,"be",32)}function wte(e){return ate.curve.decodePoint(e)}function xte(e,t){return xq.from(e._encode(t))}function _te(e,t,r){if(!hte(e))throw new TypeError("Expected Hash");if(!yte(t))throw new TypeError("Expected Private");if(void 0!==r&&!hte(r))throw new TypeError("Expected Extra Data (32 bytes)");var n,i,a=bte(t),o=bte(e);(function(e,t,r,n,i){var a=xq.alloc(32,0),o=xq.alloc(32,1);a=X8("sha256",a).update(o).update(ite).update(t).update(e).update(i||"").digest(),o=X8("sha256",a).update(o).digest(),a=X8("sha256",a).update(o).update(nte).update(t).update(e).update(i||"").digest(),o=X8("sha256",a).update(o).digest();for(var s=o=X8("sha256",a).update(o).digest();!n(s)||!r(s);)a=X8("sha256",a).update(o).update(ite).digest(),o=X8("sha256",a).update(o).digest(),s=o=X8("sha256",a).update(o).digest()})(e,t,(function(e){var t=bte(e),r=fte.mul(t);return!r.isInfinity()&&(0!==(n=r.x.umod(cte)).isZero()&&0!==(i=t.invm(cte).mul(o.add(a.mul(n))).umod(cte)).isZero())}),yte,r),i.cmp(lte)>0&&(i=cte.sub(i));var s=xq.allocUnsafe(64);return mte(n).copy(s,0),mte(i).copy(s,32),s}var kte={isPoint:pte,isPointCompressed:function(e){return!!pte(e)&&vte(e)},isPrivate:yte,pointAdd:function(e,t,r){if(!pte(e))throw new TypeError("Expected Point");if(!pte(t))throw new TypeError("Expected Point");var n=wte(e),i=wte(t),a=n.add(i);return a.isInfinity()?null:xte(a,gte(r,e))},pointAddScalar:function(e,t,r){if(!pte(e))throw new TypeError("Expected Point");if(!dte(t))throw new TypeError("Expected Tweak");var n=gte(r,e),i=wte(e);if(0===t.compare(ote))return xte(i,n);var a=bte(t),o=fte.mul(a),s=i.add(o);return s.isInfinity()?null:xte(s,n)},pointCompress:function(e,t){if(!pte(e))throw new TypeError("Expected Point");var r=wte(e);if(r.isInfinity())throw new TypeError("Expected Point");return xte(r,gte(t,e))},pointFromScalar:function(e,t){if(!yte(e))throw new TypeError("Expected Private");var r=bte(e),n=fte.mul(r);return n.isInfinity()?null:xte(n,gte(t))},pointMultiply:function(e,t,r){if(!pte(e))throw new TypeError("Expected Point");if(!dte(t))throw new TypeError("Expected Tweak");var n=gte(r,e),i=wte(e),a=bte(t),o=i.mul(a);return o.isInfinity()?null:xte(o,n)},privateAdd:function(e,t){if(!yte(e))throw new TypeError("Expected Private");if(!dte(t))throw new TypeError("Expected Tweak");var r=bte(e),n=bte(t),i=mte(r.add(n).umod(cte));return yte(i)?i:null},privateSub:function(e,t){if(!yte(e))throw new TypeError("Expected Private");if(!dte(t))throw new TypeError("Expected Tweak");var r=bte(e),n=bte(t),i=mte(r.sub(n).umod(cte));return yte(i)?i:null},sign:function(e,t){return _te(e,t)},signWithEntropy:function(e,t,r){return _te(e,t,r)},verify:function(e,t,r,n){if(!hte(e))throw new TypeError("Expected Hash");if(!pte(t))throw new TypeError("Expected Point");if(!function(e){var t=e.slice(0,32),r=e.slice(32,64);return nW(e)&&64===e.length&&t.compare(ste)<0&&r.compare(ste)<0}(r))throw new TypeError("Expected Signature");var i=wte(t),a=bte(r.slice(0,32)),o=bte(r.slice(32,64));if(n&&o.cmp(lte)>0)return!1;if(a.gtn(0)<=0)return!1;if(o.gtn(0)<=0)return!1;var s=bte(e),u=o.invm(cte),c=s.mul(u).umod(cte),l=a.mul(u).umod(cte),f=fte.mulAdd(c,i,l);return!f.isInfinity()&&f.x.umod(cte).eq(a)}},Ste={Array:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return null!=e&&e.constructor===Array})),Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==r(e)},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var Ete in Ste.Null=Ste.Nil,Ste)Ste[Ete].toJSON=function(e){return e}.bind(null,Ete);var Ite=Ste;function Ate(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function Tte(e){return Ite.Nil(e)?"":Ate(e.constructor)}function Pte(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function Ote(e){return Ite.Function(e)?e.toJSON?e.toJSON():Ate(e):Ite.Array(e)?"Array":e&&Ite.Object(e)?"Object":void 0!==e?e:""}function Cte(e,t,r){var n=function(e){return Ite.Function(e)?"":Ite.String(e)?JSON.stringify(e):e&&Ite.Object(e)?"":e}(t);return"Expected "+Ote(e)+", got"+(""!==r?" "+r:"")+(""!==n?" "+n:"")}function Mte(e,t,r){r=r||Tte(t),this.message=Cte(e,t,r),Pte(this,Mte),this.__type=e,this.__value=t,this.__valueTypeName=r}function Nte(e,t,r,n,i){e?(i=i||Tte(n),this.message=function(e,t,r,n,i){var a='" of type ';return"key"===t&&(a='" with key type '),Cte('property "'+Ote(r)+a+Ote(e),n,i)}(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',Pte(this,Mte),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}Mte.prototype=Object.create(Error.prototype),Mte.prototype.constructor=Mte,Nte.prototype=Object.create(Error.prototype),Nte.prototype.constructor=Mte;var Rte=Mte,Lte=Nte,jte=function(e,t){return new Mte(e,{},t)},Dte=function(e,t,r){return e instanceof Nte?(t=t+"."+e.__property,e=new Nte(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof Mte&&(e=new Nte(e.__type,t,r,e.__value,e.__valueTypeName)),Pte(e),e},Bte=Ote,Ute=Tte;function Fte(e){return nW(e)}function zte(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function Hte(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw jte(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var Vte=Hte.bind(null,Ite.Array),Kte=Hte.bind(null,Fte),qte=Hte.bind(null,zte),Wte=Hte.bind(null,Ite.String),Gte=Math.pow(2,53)-1,Jte={ArrayN:Vte,Buffer:Fte,BufferN:Kte,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:zte,HexN:qte,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-Gte&&e<=Gte&&Math.floor(e)===e},Range:function(e,t,r){function n(n,i){return r(n,i)&&n>e&&n<t}return r=r||Ite.Number,n.toJSON=function(){return"".concat(r.toJSON()," between [").concat(e,", ").concat(t,"]")},n},StringN:Wte,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=Gte&&Math.floor(e)===e}};for(var Xte in Jte)Jte[Xte].toJSON=function(e){return e}.bind(null,Xte);var $te=Jte,Yte=Bte,Zte=Rte,Qte=Lte,ere=Dte,tre=Ute,rre={arrayOf:function(e,t){function r(r,n){return!!Ite.Array(r)&&!Ite.Nil(r)&&!(void 0!==t.minLength&&r.length<t.minLength)&&!(void 0!==t.maxLength&&r.length>t.maxLength)&&(void 0===t.length||r.length===t.length)&&r.every((function(t,r){try{return ire(e,t,n)}catch(e){throw ere(e,r)}}))}return e=nre(e),t=t||{},r.toJSON=function(){var r="["+Yte(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,n){return Ite.Nil(r)||t(r,n,e)}return t=nre(t),r.toJSON=function(){return"?"+Yte(t)},r},map:function(e,t){function r(r,n){if(!Ite.Object(r))return!1;if(Ite.Nil(r))return!1;for(var i in r){try{t&&ire(t,i,n)}catch(e){throw ere(e,i,"key")}try{var a=r[i];ire(e,a,n)}catch(e){throw ere(e,i)}}return!0}return e=nre(e),t&&(t=nre(t)),r.toJSON=t?function(){return"{"+Yte(t)+": "+Yte(e)+"}"}:function(){return"{"+Yte(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=nre(e[r]);function n(e,r){if(!Ite.Object(e))return!1;if(Ite.Nil(e))return!1;var n;try{for(n in t)ire(t[n],e[n],r)}catch(e){throw ere(e,n)}if(r)for(n in e)if(!t[n])throw new Qte(void 0,n);return!0}return n.toJSON=function(){return Yte(t)},n},anyOf:function(){var e=[].slice.call(arguments).map(nre);function t(t,r){return e.some((function(e){try{return ire(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(Yte).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(nre);function t(t,r){return e.every((function(e){try{return ire(e,t,r)}catch(e){return!1}}))}return t.toJSON=function(){return e.map(Yte).join(" & ")},t},quacksLike:function(e){function t(t){return e===tre(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(nre);function t(t,r){return!Ite.Nil(t)&&!Ite.Nil(t.length)&&(!r||t.length===e.length)&&e.every((function(e,n){try{return ire(e,t[n],r)}catch(e){throw ere(e,n)}}))}return t.toJSON=function(){return"("+e.map(Yte).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function nre(e){if(Ite.String(e))return"?"===e[0]?rre.maybe(e.slice(1)):Ite[e]||rre.quacksLike(e);if(e&&Ite.Object(e)){if(Ite.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return rre.arrayOf(e[0])}return rre.object(e)}return Ite.Function(e)?e:rre.value(e)}function ire(e,t,r,n){if(Ite.Function(e)){if(e(t,r))return!0;throw new Zte(n||e,t)}return ire(nre(e),t,r)}for(var are in rre.oneOf=rre.anyOf,Ite)ire[are]=Ite[are];for(are in rre)ire[are]=rre[are];for(are in $te)ire[are]=$te[are];ire.compile=nre,ire.TfTypeError=Zte,ire.TfPropertyTypeError=Qte;var ore=ire;function sre(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function ure(e,t,r){var n=new xq(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}var cre=function(e,t){return sre(e9.decode(e),t)},lre=function(e,t,r){return"number"==typeof e?e9.encode(ure(e,t,r)):e9.encode(ure(e.version,e.privateKey,e.compressed))},fre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=ore.BufferN(32),n=ore.compile({wif:ore.UInt8,bip32:{public:ore.UInt32,private:ore.UInt32}}),i={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},o=2147483648,u=Math.pow(2,31)-1;function c(e){return ore.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function l(e){return ore.UInt32(e)&&e<=u}var f=function(){function e(t,r,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;a(this,e),this.__D=t,this.__Q=r,this.chainCode=i,this.network=o,this.__DEPTH=s,this.__INDEX=u,this.__PARENT_FINGERPRINT=c,ore(n,o),this.lowR=!1}return s(e,[{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=kte.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return $8.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}},{key:"compressed",get:function(){return!0}},{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return p(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=xq.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),e9.encode(r)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return lre(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(e){ore(ore.UInt32,e);var t=e>=o,r=xq.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);var n,i=$8.hmacSHA512(this.chainCode,r),a=i.slice(0,32),s=i.slice(32);if(!kte.isPrivate(a))return this.derive(e+1);if(this.isNeutered()){var u=kte.pointAddScalar(this.publicKey,a,!0);if(null===u)return this.derive(e+1);n=p(u,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{var c=kte.privateAdd(this.privateKey,a);if(null==c)return this.derive(e+1);n=d(c,s,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return n}},{key:"deriveHardened",value:function(e){return ore(l,e),this.derive(e+o)}},{key:"derivePath",value:function(e){ore(c,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}},{key:"sign",value:function(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return kte.sign(e,this.privateKey);for(var r=kte.sign(e,this.privateKey),n=xq.alloc(32,0),i=0;r[0]>127;)i++,n.writeUIntLE(i,0,6),r=kte.signWithEntropy(e,this.privateKey,n);return r}},{key:"verify",value:function(e,t){return kte.verify(e,this.publicKey,t)}}]),e}();function h(e,t,r){return d(e,t,r)}function d(e,t,n,a,o,s){if(ore({privateKey:r,chainCode:r},{privateKey:e,chainCode:t}),n=n||i,!kte.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new f(e,void 0,t,n,a,o,s)}function p(e,t,n,a,o,s){if(ore({publicKey:ore.BufferN(33),chainCode:r},{publicKey:e,chainCode:t}),n=n||i,!kte.isPoint(e))throw new TypeError("Point is not on the curve");return new f(void 0,e,t,n,a,o,s)}t.fromBase58=function(e,t){var r=e9.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||i;var n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");var a=r[4],o=r.readUInt32BE(5);if(0===a&&0!==o)throw new TypeError("Invalid parent fingerprint");var s=r.readUInt32BE(9);if(0===a&&0!==s)throw new TypeError("Invalid index");var u,c=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");u=d(r.slice(46,78),c,t,a,s,o)}else u=p(r.slice(45,78),c,t,a,s,o);return u},t.fromPrivateKey=h,t.fromPublicKey=function(e,t,r){return p(e,t,r)},t.fromSeed=function(e,t){if(ore(ore.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");t=t||i;var r=$8.hmacSHA512(xq.from("Bitcoin seed","utf8"),e);return h(r.slice(0,32),r.slice(32),t)}}));QK(fre),fre.fromBase58,fre.fromPrivateKey,fre.fromPublicKey,fre.fromSeed;var hre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromSeed=fre.fromSeed,t.fromBase58=fre.fromBase58,t.fromPublicKey=fre.fromPublicKey,t.fromPrivateKey=fre.fromPrivateKey}));QK(hre),hre.fromSeed,hre.fromBase58,hre.fromPublicKey,hre.fromPrivateKey;var dre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}}));QK(dre),dre.bitcoin,dre.regtest,dre.testnet;var pre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),a=e.readUInt8(4);return 128&a?-(4294967296*(-129&a)+i):4294967296*a+i}for(var o=0,s=0;s<n;++s)o|=e[s]<<8*s;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},t.encode=function(e){for(var t,r=Math.abs(e),n=(t=r)>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0,i=xq.allocUnsafe(n),a=e<0,o=0;o<n;++o)i.writeUInt8(255&r,o),r>>=8;return 128&i[n-1]?i.writeUInt8(a?128:0,n-1):a&&(i[n-1]|=128),i}}));QK(pre),pre.decode,pre.encode;var vre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Math.pow(2,31)-1;function n(e){return ore.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return ore.UInt32(e)&&e<=r},t.BIP32Path=n,n.toJSON=function(){return"BIP32 derivation path"},t.Signer=function(e){return(ore.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign},t.Satoshi=function(e){return ore.UInt53(e)&&e<=21e14},t.ECPoint=ore.quacksLike("Point"),t.Network=ore.compile({messagePrefix:ore.oneOf(ore.Buffer,ore.String),bip32:{public:ore.UInt32,private:ore.UInt32},pubKeyHash:ore.UInt8,scriptHash:ore.UInt8,wif:ore.UInt8}),t.Buffer256bit=ore.BufferN(32),t.Hash160bit=ore.BufferN(20),t.Hash256bit=ore.BufferN(32),t.Number=ore.Number,t.Array=ore.Array,t.Boolean=ore.Boolean,t.String=ore.String,t.Buffer=ore.Buffer,t.Hex=ore.Hex,t.maybe=ore.maybe,t.tuple=ore.tuple,t.UInt8=ore.UInt8,t.UInt32=ore.UInt32,t.Function=ore.Function,t.BufferN=ore.BufferN,t.Null=ore.Null,t.oneOf=ore.oneOf}));QK(vre),vre.UInt31,vre.BIP32Path,vre.Signer,vre.Satoshi,vre.ECPoint,vre.Network,vre.Buffer256bit,vre.Hash160bit,vre.Hash256bit,vre.Number,vre.Array,vre.Boolean,vre.String,vre.Buffer,vre.Hex,vre.maybe,vre.tuple,vre.UInt8,vre.UInt32,vre.Function,vre.BufferN,vre.Null,vre.oneOf;var yre=k3.Buffer,gre=function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},bre=function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},mre=function(e,t){var r=e.length,n=t.length;if(0===r)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=yre.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i},wre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=xq.alloc(1,0);function n(e){for(var t=0;0===e[t];)++t;return t===e.length?r:128&(e=e.slice(t))[0]?xq.concat([r,e],1+e.length):e}function i(e){0===e[0]&&(e=e.slice(1));var t=xq.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}t.decode=function(e){var t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);var n=bre(e.slice(0,-1)),a=i(n.r),o=i(n.s);return{signature:xq.concat([a,o],64),hashType:t}},t.encode=function(e,t){ore({signature:vre.BufferN(64),hashType:vre.UInt8},{signature:e,hashType:t});var r=-129&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);var i=xq.allocUnsafe(1);i.writeUInt8(t,0);var a=n(e.slice(0,32)),o=n(e.slice(32,64));return xq.concat([mre(a,o),i])}}));QK(wre),wre.decode,wre.encode;var xre=tq(Object.freeze({__proto__:null,OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255,default:{OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255}}));function _re(e){return e<xre.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}var kre={encodingLength:_re,encode:function(e,t,r){var n=_re(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(xre.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(xre.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(xre.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n},decode:function(e,t){var r,n,i=e.readUInt8(t);if(i<xre.OP_PUSHDATA1)r=i,n=1;else if(i===xre.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===xre.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==xre.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}},Sre={};for(var Ere in xre)Sre[xre[Ere]]=Ere;var Ire=Sre,Are=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OPS=xre;var r=t.OPS.OP_RESERVED;function n(e){return vre.Buffer(e)||function(e){return vre.Number(e)&&(e===t.OPS.OP_0||e>=t.OPS.OP_1&&e<=t.OPS.OP_16||e===t.OPS.OP_1NEGATE)}(e)}function i(e){return vre.Array(e)&&e.every(n)}function a(e){return 0===e.length?t.OPS.OP_0:1===e.length?e[0]>=1&&e[0]<=16?r+e[0]:129===e[0]?t.OPS.OP_1NEGATE:void 0:void 0}function o(e){return nW(e)}function s(e){return nW(e)}function u(e){if(o(e))return e;ore(vre.Array,e);var t=e.reduce((function(e,t){return s(t)?1===t.length&&void 0!==a(t)?e+1:e+kre.encodingLength(t.length)+t.length:e+1}),0),r=xq.allocUnsafe(t),n=0;if(e.forEach((function(e){if(s(e)){var t=a(e);if(void 0!==t)return r.writeUInt8(t,n),void(n+=1);n+=kre.encode(r,e.length,n),e.copy(r,n),n+=e.length}else r.writeUInt8(e,n),n+=1})),n!==r.length)throw new Error("Could not decode chunks");return r}function c(e){if(r=e,vre.Array(r))return e;var r;ore(vre.Buffer,e);for(var n=[],i=0;i<e.length;){var o=e[i];if(o>t.OPS.OP_0&&o<=t.OPS.OP_PUSHDATA4){var s=kre.decode(e,i);if(null===s)return null;if((i+=s.size)+s.number>e.length)return null;var u=e.slice(i,i+s.number);i+=s.number;var c=a(u);void 0!==c?n.push(c):n.push(u)}else n.push(o),i+=1}return n}function l(e){var t=-129&e;return t>0&&t<4}t.isPushOnly=i,t.compile=u,t.decompile=c,t.toASM=function(e){return o(e)&&(e=c(e)),e.map((function(e){if(s(e)){var t=a(e);if(void 0===t)return e.toString("hex");e=t}return Ire[e]})).join(" ")},t.fromASM=function(e){return ore(vre.String,e),u(e.split(" ").map((function(e){return void 0!==t.OPS[e]?t.OPS[e]:(ore(vre.Hex,e),xq.from(e,"hex"))})))},t.toStack=function(e){return e=c(e),ore(i,e),e.map((function(e){return s(e)?e:e===t.OPS.OP_0?xq.allocUnsafe(0):pre.encode(e-r)}))},t.isCanonicalPubKey=function(e){return kte.isPoint(e)},t.isDefinedHashType=l,t.isCanonicalScriptSignature=function(e){return!!nW(e)&&!!l(e[e.length-1])&&gre(e.slice(0,-1))},t.number=pre,t.signature=wre}));QK(Are),Are.OPS,Are.isPushOnly,Are.compile,Are.decompile,Are.toASM,Are.fromASM,Are.toStack,Are.isCanonicalPubKey,Are.isDefinedHashType,Are.isCanonicalScriptSignature,Are.number,Are.signature;var Tre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=r.call(this);return this[t]=e,e},set:function(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){var t;return function(){return void 0!==t||(t=e()),t}}}));QK(Tre),Tre.prop,Tre.value;var Pre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),output:ore.maybe(ore.Buffer),data:ore.maybe(ore.arrayOf(ore.Buffer))},e);var n={name:"embed",network:e.network||dre.bitcoin};if(Tre.prop(n,"output",(function(){if(e.data)return Are.compile([r.OP_RETURN].concat(e.data))})),Tre.prop(n,"data",(function(){if(e.output)return Are.decompile(e.output).slice(1)})),t.validate&&e.output){var i=Are.decompile(e.output);if(i[0]!==r.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(ore.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}}));QK(Pre),Pre.p2data;var Ore=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS,n=r.OP_RESERVED;function i(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function a(e){return Are.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===r.OP_0)}t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),m:ore.maybe(ore.Number),n:ore.maybe(ore.Number),output:ore.maybe(ore.Buffer),pubkeys:ore.maybe(ore.arrayOf(kte.isPoint)),signatures:ore.maybe(ore.arrayOf(a)),input:ore.maybe(ore.Buffer)},e);var o={network:e.network||dre.bitcoin},s=[],u=!1;function c(e){u||(u=!0,s=Are.decompile(e),o.m=s[0]-n,o.n=s[s.length-2]-n,o.pubkeys=s.slice(1,-2))}if(Tre.prop(o,"output",(function(){if(e.m&&o.n&&e.pubkeys)return Are.compile([].concat(n+e.m,e.pubkeys,n+o.n,r.OP_CHECKMULTISIG))})),Tre.prop(o,"m",(function(){if(o.output)return c(o.output),o.m})),Tre.prop(o,"n",(function(){if(o.pubkeys)return o.pubkeys.length})),Tre.prop(o,"pubkeys",(function(){if(e.output)return c(e.output),o.pubkeys})),Tre.prop(o,"signatures",(function(){if(e.input)return Are.decompile(e.input).slice(1)})),Tre.prop(o,"input",(function(){if(e.signatures)return Are.compile([r.OP_0].concat(e.signatures))})),Tre.prop(o,"witness",(function(){if(o.input)return[]})),Tre.prop(o,"name",(function(){if(o.m&&o.n)return"p2ms(".concat(o.m," of ").concat(o.n,")")})),t.validate){if(e.output){if(c(e.output),!ore.Number(s[0]))throw new TypeError("Output is invalid");if(!ore.Number(s[s.length-2]))throw new TypeError("Output is invalid");if(s[s.length-1]!==r.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(o.m<=0||o.n>16||o.m>o.n||o.n!==s.length-3)throw new TypeError("Output is invalid");if(!o.pubkeys.every((function(e){return kte.isPoint(e)})))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==o.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==o.n)throw new TypeError("n mismatch");if(e.pubkeys&&!i(e.pubkeys,o.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(o.n=e.pubkeys.length,o.n<o.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<o.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>o.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==r.OP_0)throw new TypeError("Input is invalid");if(0===o.signatures.length||!o.signatures.every(a))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!i(e.signatures,o.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(o,e)}}));QK(Ore),Ore.p2ms;var Cre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS;t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),output:ore.maybe(ore.Buffer),pubkey:ore.maybe(kte.isPoint),signature:ore.maybe(Are.isCanonicalScriptSignature),input:ore.maybe(ore.Buffer)},e);var n=Tre.value((function(){return Are.decompile(e.input)})),i={name:"p2pk",network:e.network||dre.bitcoin};if(Tre.prop(i,"output",(function(){if(e.pubkey)return Are.compile([e.pubkey,r.OP_CHECKSIG])})),Tre.prop(i,"pubkey",(function(){if(e.output)return e.output.slice(1,-1)})),Tre.prop(i,"signature",(function(){if(e.input)return n()[0]})),Tre.prop(i,"input",(function(){if(e.signature)return Are.compile([e.signature])})),Tre.prop(i,"witness",(function(){if(i.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!kte.isPoint(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==n().length)throw new TypeError("Input is invalid");if(!Are.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}}));QK(Cre),Cre.p2pk;var Mre=eq((function(e,t){function r(e){try{return F8("rmd160").update(e).digest()}catch(t){return F8("ripemd160").update(e).digest()}}function n(e){return F8("sha256").update(e).digest()}Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=r,t.sha1=function(e){return F8("sha1").update(e).digest()},t.sha256=n,t.hash160=function(e){return r(n(e))},t.hash256=function(e){return n(n(e))}}));QK(Mre),Mre.ripemd160,Mre.sha1,Mre.sha256,Mre.hash160,Mre.hash256;var Nre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS;t.p2pkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),address:ore.maybe(ore.String),hash:ore.maybe(ore.BufferN(20)),output:ore.maybe(ore.BufferN(25)),pubkey:ore.maybe(kte.isPoint),signature:ore.maybe(Are.isCanonicalScriptSignature),input:ore.maybe(ore.Buffer)},e);var n=Tre.value((function(){var t=e9.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),i=Tre.value((function(){return Are.decompile(e.input)})),a=e.network||dre.bitcoin,o={name:"p2pkh",network:a};if(Tre.prop(o,"address",(function(){if(o.hash){var e=xq.allocUnsafe(21);return e.writeUInt8(a.pubKeyHash,0),o.hash.copy(e,1),e9.encode(e)}})),Tre.prop(o,"hash",(function(){return e.output?e.output.slice(3,23):e.address?n().hash:e.pubkey||o.pubkey?Mre.hash160(e.pubkey||o.pubkey):void 0})),Tre.prop(o,"output",(function(){if(o.hash)return Are.compile([r.OP_DUP,r.OP_HASH160,o.hash,r.OP_EQUALVERIFY,r.OP_CHECKSIG])})),Tre.prop(o,"pubkey",(function(){if(e.input)return i()[1]})),Tre.prop(o,"signature",(function(){if(e.input)return i()[0]})),Tre.prop(o,"input",(function(){if(e.pubkey&&e.signature)return Are.compile([e.signature,e.pubkey])})),Tre.prop(o,"witness",(function(){if(o.input)return[]})),t.validate){var s=xq.from([]);if(e.address){if(n().version!==a.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==n().hash.length)throw new TypeError("Invalid address");s=n().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==r.OP_DUP||e.output[1]!==r.OP_HASH160||20!==e.output[2]||e.output[23]!==r.OP_EQUALVERIFY||e.output[24]!==r.OP_CHECKSIG)throw new TypeError("Output is invalid");var u=e.output.slice(3,23);if(s.length>0&&!s.equals(u))throw new TypeError("Hash mismatch");s=u}if(e.pubkey){var c=Mre.hash160(e.pubkey);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(e.input){var l=i();if(2!==l.length)throw new TypeError("Input is invalid");if(!Are.isCanonicalScriptSignature(l[0]))throw new TypeError("Input has invalid signature");if(!kte.isPoint(l[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(l[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(l[1]))throw new TypeError("Pubkey mismatch");var f=Mre.hash160(l[1]);if(s.length>0&&!s.equals(f))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}}));QK(Nre),Nre.p2pkh;var Rre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS;t.p2sh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.input))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),address:ore.maybe(ore.String),hash:ore.maybe(ore.BufferN(20)),output:ore.maybe(ore.BufferN(23)),redeem:ore.maybe({network:ore.maybe(ore.Object),output:ore.maybe(ore.Buffer),input:ore.maybe(ore.Buffer),witness:ore.maybe(ore.arrayOf(ore.Buffer))}),input:ore.maybe(ore.Buffer),witness:ore.maybe(ore.arrayOf(ore.Buffer))},e);var n=e.network;n||(n=e.redeem&&e.redeem.network||dre.bitcoin);var i={network:n},a=Tre.value((function(){var t=e9.decode(e.address);return{version:t.readUInt8(0),hash:t.slice(1)}})),o=Tre.value((function(){return Are.decompile(e.input)})),s=Tre.value((function(){var t=o();return{network:n,output:t[t.length-1],input:Are.compile(t.slice(0,-1)),witness:e.witness||[]}}));if(Tre.prop(i,"address",(function(){if(i.hash){var e=xq.allocUnsafe(21);return e.writeUInt8(i.network.scriptHash,0),i.hash.copy(e,1),e9.encode(e)}})),Tre.prop(i,"hash",(function(){return e.output?e.output.slice(2,22):e.address?a().hash:i.redeem&&i.redeem.output?Mre.hash160(i.redeem.output):void 0})),Tre.prop(i,"output",(function(){if(i.hash)return Are.compile([r.OP_HASH160,i.hash,r.OP_EQUAL])})),Tre.prop(i,"redeem",(function(){if(e.input)return s()})),Tre.prop(i,"input",(function(){if(e.redeem&&e.redeem.input&&e.redeem.output)return Are.compile([].concat(Are.decompile(e.redeem.input),e.redeem.output))})),Tre.prop(i,"witness",(function(){return i.redeem&&i.redeem.witness?i.redeem.witness:i.input?[]:void 0})),Tre.prop(i,"name",(function(){var e=["p2sh"];return void 0!==i.redeem&&e.push(i.redeem.name),e.join("-")})),t.validate){var u=xq.from([]);if(e.address){if(a().version!==n.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==a().hash.length)throw new TypeError("Invalid address");u=a().hash}if(e.hash){if(u.length>0&&!u.equals(e.hash))throw new TypeError("Hash mismatch");u=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==r.OP_HASH160||20!==e.output[1]||e.output[22]!==r.OP_EQUAL)throw new TypeError("Output is invalid");var c=e.output.slice(2,22);if(u.length>0&&!u.equals(c))throw new TypeError("Hash mismatch");u=c}var l=function(e){if(e.output){var t=Are.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");var r=Mre.hash160(e.output);if(u.length>0&&!u.equals(r))throw new TypeError("Hash mismatch");u=r}if(e.input){var n=e.input.length>0,i=e.witness&&e.witness.length>0;if(!n&&!i)throw new TypeError("Empty input");if(n&&i)throw new TypeError("Input and witness provided");if(n){var a=Are.decompile(e.input);if(!Are.isPushOnly(a))throw new TypeError("Non push-only scriptSig")}}};if(e.input){var f=o();if(!f||f.length<1)throw new TypeError("Input too short");if(!nW(s().output))throw new TypeError("Input is invalid");l(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==n)throw new TypeError("Network mismatch");if(e.input){var h=s();if(e.redeem.output&&!e.redeem.output.equals(h.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(h.input))throw new TypeError("Redeem.input mismatch")}l(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(i,e)}}));QK(Rre),Rre.p2sh;for(var Lre="qpzry9x8gf2tvdw0s3jn54khce6mua7l",jre={},Dre=0;Dre<Lre.length;Dre++){var Bre=Lre.charAt(Dre);if(void 0!==jre[Bre])throw new TypeError(Bre+" is ambiguous");jre[Bre]=Dre}function Ure(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function Fre(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Ure(t)^n>>5}for(t=Ure(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=Ure(t)^31&i}return t}function zre(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var a=e.slice(0,i),o=e.slice(i+1);if(o.length<6)return"Data too short";var s=Fre(a);if("string"==typeof s)return s;for(var u=[],c=0;c<o.length;++c){var l=o.charAt(c),f=jre[l];if(void 0===f)return"Unknown character "+l;s=Ure(s)^f,c+6>=o.length||u.push(f)}return 1!==s?"Invalid checksum for "+e:{prefix:a,words:u}}function Hre(e,t,r,n){for(var i=0,a=0,o=(1<<r)-1,s=[],u=0;u<e.length;++u)for(i=i<<t|e[u],a+=t;a>=r;)a-=r,s.push(i>>a&o);if(n)a>0&&s.push(i<<r-a&o);else{if(a>=t)return"Excess padding";if(i<<r-a&o)return"Non-zero padding"}return s}var Vre=function(e){var t=zre.apply(null,arguments);if("object"==r(t))return t;throw new Error(t)},Kre=function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=Fre(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",a=0;a<t.length;++a){var o=t[a];if(o>>5!=0)throw new Error("Non 5-bit word");n=Ure(n)^o,i+=Lre.charAt(o)}for(a=0;a<6;++a)n=Ure(n);for(n^=1,a=0;a<6;++a)i+=Lre.charAt(n>>5*(5-a)&31);return i},qre=function(e){var t=Hre(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},Wre=function(e){var t=Hre(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)},Gre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS,n=xq.alloc(0);t.p2wpkh=function(e,t){if(!(e.address||e.hash||e.output||e.pubkey||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({address:ore.maybe(ore.String),hash:ore.maybe(ore.BufferN(20)),input:ore.maybe(ore.BufferN(0)),network:ore.maybe(ore.Object),output:ore.maybe(ore.BufferN(22)),pubkey:ore.maybe(kte.isPoint),signature:ore.maybe(Are.isCanonicalScriptSignature),witness:ore.maybe(ore.arrayOf(ore.Buffer))},e);var i=Tre.value((function(){var t=Vre(e.address),r=t.words.shift(),n=Wre(t.words);return{version:r,prefix:t.prefix,data:xq.from(n)}})),a=e.network||dre.bitcoin,o={name:"p2wpkh",network:a};if(Tre.prop(o,"address",(function(){if(o.hash){var e=qre(o.hash);return e.unshift(0),Kre(a.bech32,e)}})),Tre.prop(o,"hash",(function(){return e.output?e.output.slice(2,22):e.address?i().data:e.pubkey||o.pubkey?Mre.hash160(e.pubkey||o.pubkey):void 0})),Tre.prop(o,"output",(function(){if(o.hash)return Are.compile([r.OP_0,o.hash])})),Tre.prop(o,"pubkey",(function(){return e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0})),Tre.prop(o,"signature",(function(){if(e.witness)return e.witness[0]})),Tre.prop(o,"input",(function(){if(o.witness)return n})),Tre.prop(o,"witness",(function(){if(e.pubkey&&e.signature)return[e.signature,e.pubkey]})),t.validate){var s=xq.from([]);if(e.address){if(a&&a.bech32!==i().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(20!==i().data.length)throw new TypeError("Invalid address data");s=i().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==r.OP_0||20!==e.output[1])throw new TypeError("Output is invalid");if(s.length>0&&!s.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");s=e.output.slice(2)}if(e.pubkey){var u=Mre.hash160(e.pubkey);if(s.length>0&&!s.equals(u))throw new TypeError("Hash mismatch");if(s=u,!kte.isPoint(e.pubkey)||33!==e.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw new TypeError("Witness is invalid");if(!Are.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!kte.isPoint(e.witness[1])||33!==e.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");var c=Mre.hash160(e.witness[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}}));QK(Gre),Gre.p2wpkh;var Jre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS,n=xq.alloc(0);function i(e){return!(!nW(e)||65!==e.length||4!==e[0]||!kte.isPoint(e))}t.p2wsh=function(e,t){if(!(e.address||e.hash||e.output||e.redeem||e.witness))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),ore({network:ore.maybe(ore.Object),address:ore.maybe(ore.String),hash:ore.maybe(ore.BufferN(32)),output:ore.maybe(ore.BufferN(34)),redeem:ore.maybe({input:ore.maybe(ore.Buffer),network:ore.maybe(ore.Object),output:ore.maybe(ore.Buffer),witness:ore.maybe(ore.arrayOf(ore.Buffer))}),input:ore.maybe(ore.BufferN(0)),witness:ore.maybe(ore.arrayOf(ore.Buffer))},e);var a=Tre.value((function(){var t=Vre(e.address),r=t.words.shift(),n=Wre(t.words);return{version:r,prefix:t.prefix,data:xq.from(n)}})),o=Tre.value((function(){return Are.decompile(e.redeem.input)})),s=e.network;s||(s=e.redeem&&e.redeem.network||dre.bitcoin);var u={network:s};if(Tre.prop(u,"address",(function(){if(u.hash){var e=qre(u.hash);return e.unshift(0),Kre(s.bech32,e)}})),Tre.prop(u,"hash",(function(){return e.output?e.output.slice(2):e.address?a().data:u.redeem&&u.redeem.output?Mre.sha256(u.redeem.output):void 0})),Tre.prop(u,"output",(function(){if(u.hash)return Are.compile([r.OP_0,u.hash])})),Tre.prop(u,"redeem",(function(){if(e.witness)return{output:e.witness[e.witness.length-1],input:n,witness:e.witness.slice(0,-1)}})),Tre.prop(u,"input",(function(){if(u.witness)return n})),Tre.prop(u,"witness",(function(){if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){var t=Are.toStack(o());return u.redeem=Object.assign({witness:t},e.redeem),u.redeem.input=n,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)})),Tre.prop(u,"name",(function(){var e=["p2wsh"];return void 0!==u.redeem&&e.push(u.redeem.name),e.join("-")})),t.validate){var c=xq.from([]);if(e.address){if(a().prefix!==s.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==a().version)throw new TypeError("Invalid address version");if(32!==a().data.length)throw new TypeError("Invalid address data");c=a().data}if(e.hash){if(c.length>0&&!c.equals(e.hash))throw new TypeError("Hash mismatch");c=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==r.OP_0||32!==e.output[1])throw new TypeError("Output is invalid");var l=e.output.slice(2);if(c.length>0&&!c.equals(l))throw new TypeError("Hash mismatch");c=l}if(e.redeem){if(e.redeem.network&&e.redeem.network!==s)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(0===Are.decompile(e.redeem.output).length)throw new TypeError("Redeem.output is invalid");var f=Mre.sha256(e.redeem.output);if(c.length>0&&!c.equals(f))throw new TypeError("Hash mismatch");c=f}if(e.redeem.input&&!Are.isPushOnly(o()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&o().some(i)||e.redeem.output&&(Are.decompile(e.redeem.output)||[]).some(i))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){var h=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(h))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(i)||(Are.decompile(h)||[]).some(i))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(u,e)}}));QK(Jre),Jre.p2wsh;var Xre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.embed=Pre.p2data,t.p2ms=Ore.p2ms,t.p2pk=Cre.p2pk,t.p2pkh=Nre.p2pkh,t.p2sh=Rre.p2sh,t.p2wpkh=Gre.p2wpkh,t.p2wsh=Jre.p2wsh}));QK(Xre),Xre.embed,Xre.p2ms,Xre.p2pk,Xre.p2pkh,Xre.p2sh,Xre.p2wpkh,Xre.p2wsh;var $re=eq((function(e,t){function r(e){var t=e9.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function n(e){var t=Vre(e),r=Wre(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:xq.from(r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase58Check=r,t.fromBech32=n,t.toBase58Check=function(e,t){ore(vre.tuple(vre.Hash160bit,vre.UInt8),arguments);var r=xq.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),e9.encode(r)},t.toBech32=function(e,t,r){var n=qre(e);return n.unshift(t),Kre(r,n)},t.fromOutputScript=function(e,t){t=t||dre.bitcoin;try{return Xre.p2pkh({output:e,network:t}).address}catch(e){}try{return Xre.p2sh({output:e,network:t}).address}catch(e){}try{return Xre.p2wpkh({output:e,network:t}).address}catch(e){}try{return Xre.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(Are.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){var i,a;t=t||dre.bitcoin;try{i=r(e)}catch(e){}if(i){if(i.version===t.pubKeyHash)return Xre.p2pkh({hash:i.hash}).output;if(i.version===t.scriptHash)return Xre.p2sh({hash:i.hash}).output}else{try{a=n(e)}catch(e){}if(a){if(a.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===a.version){if(20===a.data.length)return Xre.p2wpkh({hash:a.data}).output;if(32===a.data.length)return Xre.p2wsh({hash:a.data}).output}}}throw new Error(e+" has no matching Script")}}));QK($re),$re.fromBase58Check,$re.fromBech32,$re.toBase58Check,$re.toBech32,$re.fromOutputScript,$re.toOutputScript;var Yre=eq((function(e){var t=65536,r=k3.Buffer,n=ZK.crypto||ZK.msCrypto;n&&n.getRandomValues?e.exports=function(e,i){if(e>4294967295)throw new RangeError("requested too many random bytes");var a=r.allocUnsafe(e);if(e>0)if(e>t)for(var o=0;o<e;o+=t)n.getRandomValues(a.slice(o,o+t));else n.getRandomValues(a);return"function"==typeof i?gW((function(){i(null,a)})):a}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}})),Zre=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=ore.maybe(ore.compile({compressed:vre.maybe(vre.Boolean),network:vre.maybe(vre.Network)})),n=function(){function e(t,r,n){a(this,e),this.__D=t,this.__Q=r,this.lowR=!1,void 0===n&&(n={}),this.compressed=void 0===n.compressed||n.compressed,this.network=n.network||dre.bitcoin,void 0!==r&&(this.__Q=kte.pointCompress(r,this.compressed))}return s(e,[{key:"privateKey",get:function(){return this.__D}},{key:"publicKey",get:function(){return this.__Q||(this.__Q=kte.pointFromScalar(this.__D,this.compressed)),this.__Q}},{key:"toWIF",value:function(){if(!this.__D)throw new Error("Missing private key");return lre(this.network.wif,this.__D,this.compressed)}},{key:"sign",value:function(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return kte.sign(e,this.__D);for(var r=kte.sign(e,this.__D),n=xq.alloc(32,0),i=0;r[0]>127;)i++,n.writeUIntLE(i,0,6),r=kte.signWithEntropy(e,this.__D,n);return r}},{key:"verify",value:function(e,t){return kte.verify(e,this.publicKey,t)}}]),e}();function i(e,t){if(ore(vre.Buffer256bit,e),!kte.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return ore(r,t),new n(e,void 0,t)}t.fromPrivateKey=i,t.fromPublicKey=function(e,t){return ore(kte.isPoint,e),ore(r,t),new n(void 0,e,t)},t.fromWIF=function(e,t){var r=cre(e),n=r.version;if(vre.Array(t)){if(!(t=t.filter((function(e){return n===e.wif})).pop()))throw new Error("Unknown network version")}else if(t=t||dre.bitcoin,n!==t.wif)throw new Error("Invalid network version");return i(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){ore(r,e),void 0===e&&(e={});var t,n=e.rng||Yre;do{t=n(32),ore(vre.Buffer256bit,t)}while(!kte.isPrivate(t));return i(t,e)}}));QK(Zre),Zre.fromPrivateKey,Zre.fromPublicKey,Zre.fromWIF,Zre.makeRandom;var Qre=k3.Buffer;function ene(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function tne(e){return ene(e),e<253?1:e<=65535?3:e<=4294967295?5:9}var rne={encode:function e(t,r,n){if(ene(t),r||(r=Qre.allocUnsafe(tne(t))),!Qre.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),t<253?(r.writeUInt8(t,n),e.bytes=1):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),e.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),r},decode:function e(t,r){if(!Qre.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=t.readUInt8(r);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,t.readUInt16LE(r+1);if(254===n)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var i=t.readUInt32LE(r+1),a=4294967296*t.readUInt32LE(r+5)+i;return ene(a),a},encodingLength:tne},nne=eq((function(e,t){function r(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function n(e,t){var n=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return r((i*=4294967296)+n,9007199254740991),i+n}function i(e,t,n){return r(t,9007199254740991),e.writeInt32LE(-1&t,n),e.writeUInt32LE(Math.floor(t/4294967296),n+4),n+8}Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt64LE=n,t.writeUInt64LE=i,t.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.cloneBuffer=function(e){var t=xq.allocUnsafe(e.length);return e.copy(t),t},t.BufferWriter=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,e),this.buffer=t,this.offset=r,ore(vre.tuple(vre.Buffer,vre.UInt32),[t,r])}return s(e,[{key:"writeUInt8",value:function(e){this.offset=this.buffer.writeUInt8(e,this.offset)}},{key:"writeInt32",value:function(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}},{key:"writeUInt32",value:function(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}},{key:"writeUInt64",value:function(e){this.offset=i(this.buffer,e,this.offset)}},{key:"writeVarInt",value:function(e){rne.encode(e,this.buffer,this.offset),this.offset+=rne.encode.bytes}},{key:"writeSlice",value:function(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}},{key:"writeVarSlice",value:function(e){this.writeVarInt(e.length),this.writeSlice(e)}},{key:"writeVector",value:function(e){var t=this;this.writeVarInt(e.length),e.forEach((function(e){return t.writeVarSlice(e)}))}}]),e}(),t.BufferReader=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a(this,e),this.buffer=t,this.offset=r,ore(vre.tuple(vre.Buffer,vre.UInt32),[t,r])}return s(e,[{key:"readUInt8",value:function(){var e=this.buffer.readUInt8(this.offset);return this.offset++,e}},{key:"readInt32",value:function(){var e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt32",value:function(){var e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt64",value:function(){var e=n(this.buffer,this.offset);return this.offset+=8,e}},{key:"readVarInt",value:function(){var e=rne.decode(this.buffer,this.offset);return this.offset+=rne.decode.bytes,e}},{key:"readSlice",value:function(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");var t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readVarSlice",value:function(){return this.readSlice(this.readVarInt())}},{key:"readVector",value:function(){for(var e=this.readVarInt(),t=[],r=0;r<e;r++)t.push(this.readVarSlice());return t}}]),e}()}));QK(nne),nne.readUInt64LE,nne.writeUInt64LE,nne.reverseBuffer,nne.cloneBuffer,nne.BufferWriter,nne.BufferReader;var ine=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=e.length;return rne.encodingLength(t)+t}var i=xq.allocUnsafe(0),o=[],u=xq.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),c=xq.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),l=xq.from("ffffffffffffffff","hex"),f={script:i,valueBuffer:l},h=function(){function e(){a(this,e),this.version=1,this.locktime=0,this.ins=[],this.outs=[]}return s(e,[{key:"isCoinbase",value:function(){return 1===this.ins.length&&e.isCoinbaseHash(this.ins[0].hash)}},{key:"addInput",value:function(t,r,n,a){return ore(vre.tuple(vre.Hash256bit,vre.UInt32,vre.maybe(vre.UInt32),vre.maybe(vre.Buffer)),arguments),vre.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:a||i,sequence:n,witness:o})-1}},{key:"addOutput",value:function(e,t){return ore(vre.tuple(vre.Buffer,vre.Satoshi),arguments),this.outs.push({script:e,value:t})-1}},{key:"hasWitnesses",value:function(){return this.ins.some((function(e){return 0!==e.witness.length}))}},{key:"weight",value:function(){return 3*this.byteLength(!1)+this.byteLength(!0)}},{key:"virtualSize",value:function(){return Math.ceil(this.weight()/4)}},{key:"byteLength",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e&&this.hasWitnesses();return(t?10:8)+rne.encodingLength(this.ins.length)+rne.encodingLength(this.outs.length)+this.ins.reduce((function(e,t){return e+40+n(t.script)}),0)+this.outs.reduce((function(e,t){return e+8+n(t.script)}),0)+(t?this.ins.reduce((function(e,t){return e+function(e){var t=e.length;return rne.encodingLength(t)+e.reduce((function(e,t){return e+n(t)}),0)}(t.witness)}),0):0)}},{key:"clone",value:function(){var t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map((function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}})),t.outs=this.outs.map((function(e){return{script:e.script,value:e.value}})),t}},{key:"hashForSignature",value:function(t,n,a){if(ore(vre.tuple(vre.UInt32,vre.Buffer,vre.Number),arguments),t>=this.ins.length)return c;var o=Are.compile(Are.decompile(n).filter((function(e){return e!==r.OPS.OP_CODESEPARATOR}))),s=this.clone();if((31&a)===e.SIGHASH_NONE)s.outs=[],s.ins.forEach((function(e,r){r!==t&&(e.sequence=0)}));else if((31&a)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return c;s.outs.length=t+1;for(var u=0;u<t;u++)s.outs[u]=f;s.ins.forEach((function(e,r){r!==t&&(e.sequence=0)}))}a&e.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[t]],s.ins[0].script=o):(s.ins.forEach((function(e){e.script=i})),s.ins[t].script=o);var l=xq.allocUnsafe(s.byteLength(!1)+4);return l.writeInt32LE(a,l.length-4),s.__toBuffer(l,0,!1),Mre.hash256(l)}},{key:"hashForWitnessV0",value:function(t,r,i,a){ore(vre.tuple(vre.UInt32,vre.Buffer,vre.Satoshi,vre.UInt32),arguments);var o,s=xq.from([]),c=u,l=u,f=u;if(a&e.SIGHASH_ANYONECANPAY||(s=xq.allocUnsafe(36*this.ins.length),o=new nne.BufferWriter(s,0),this.ins.forEach((function(e){o.writeSlice(e.hash),o.writeUInt32(e.index)})),l=Mre.hash256(s)),a&e.SIGHASH_ANYONECANPAY||(31&a)===e.SIGHASH_SINGLE||(31&a)===e.SIGHASH_NONE||(s=xq.allocUnsafe(4*this.ins.length),o=new nne.BufferWriter(s,0),this.ins.forEach((function(e){o.writeUInt32(e.sequence)})),f=Mre.hash256(s)),(31&a)!==e.SIGHASH_SINGLE&&(31&a)!==e.SIGHASH_NONE){var h=this.outs.reduce((function(e,t){return e+8+n(t.script)}),0);s=xq.allocUnsafe(h),o=new nne.BufferWriter(s,0),this.outs.forEach((function(e){o.writeUInt64(e.value),o.writeVarSlice(e.script)})),c=Mre.hash256(s)}else if((31&a)===e.SIGHASH_SINGLE&&t<this.outs.length){var d=this.outs[t];s=xq.allocUnsafe(8+n(d.script)),(o=new nne.BufferWriter(s,0)).writeUInt64(d.value),o.writeVarSlice(d.script),c=Mre.hash256(s)}s=xq.allocUnsafe(156+n(r)),o=new nne.BufferWriter(s,0);var p=this.ins[t];return o.writeUInt32(this.version),o.writeSlice(l),o.writeSlice(f),o.writeSlice(p.hash),o.writeUInt32(p.index),o.writeVarSlice(r),o.writeUInt64(i),o.writeUInt32(p.sequence),o.writeSlice(c),o.writeUInt32(this.locktime),o.writeUInt32(a),Mre.hash256(s)}},{key:"getHash",value:function(e){return e&&this.isCoinbase()?xq.alloc(32,0):Mre.hash256(this.__toBuffer(void 0,void 0,e))}},{key:"getId",value:function(){return nne.reverseBuffer(this.getHash(!1)).toString("hex")}},{key:"toBuffer",value:function(e,t){return this.__toBuffer(e,t,!0)}},{key:"toHex",value:function(){return this.toBuffer(void 0,void 0).toString("hex")}},{key:"setInputScript",value:function(e,t){ore(vre.tuple(vre.Number,vre.Buffer),arguments),this.ins[e].script=t}},{key:"setWitness",value:function(e,t){ore(vre.tuple(vre.Number,[vre.Buffer]),arguments),this.ins[e].witness=t}},{key:"__toBuffer",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||(t=xq.allocUnsafe(this.byteLength(n)));var i=new nne.BufferWriter(t,r||0);i.writeInt32(this.version);var a=n&&this.hasWitnesses();return a&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach((function(e){i.writeSlice(e.hash),i.writeUInt32(e.index),i.writeVarSlice(e.script),i.writeUInt32(e.sequence)})),i.writeVarInt(this.outs.length),this.outs.forEach((function(e){void 0!==e.value?i.writeUInt64(e.value):i.writeSlice(e.valueBuffer),i.writeVarSlice(e.script)})),a&&this.ins.forEach((function(e){i.writeVector(e.witness)})),i.writeUInt32(this.locktime),void 0!==r?t.slice(r,i.offset):t}}],[{key:"fromBuffer",value:function(t,r){var n=new nne.BufferReader(t),i=new e;i.version=n.readInt32();var a=n.readUInt8(),s=n.readUInt8(),u=!1;a===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?u=!0:n.offset-=2;for(var c=n.readVarInt(),l=0;l<c;++l)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:o});for(var f=n.readVarInt(),h=0;h<f;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(u){for(var d=0;d<c;++d)i.ins[d].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}},{key:"fromHex",value:function(t){return e.fromBuffer(xq.from(t,"hex"),!1)}},{key:"isCoinbaseHash",value:function(e){ore(vre.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0}}]),e}();h.DEFAULT_SEQUENCE=4294967295,h.SIGHASH_ALL=1,h.SIGHASH_NONE=2,h.SIGHASH_SINGLE=3,h.SIGHASH_ANYONECANPAY=128,h.ADVANCED_TRANSACTION_MARKER=0,h.ADVANCED_TRANSACTION_FLAG=1,t.Transaction=h}));QK(ine),ine.Transaction;var ane=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=new TypeError("Cannot compute merkle root for zero transactions"),i=new TypeError("Cannot compute witness commit for non-segwit block"),o=function(){function e(){a(this,e),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}return s(e,[{key:"getWitnessCommit",value:function(){if(!u(this.transactions))return null;var e=this.transactions[0].outs.filter((function(e){return e.script.slice(0,6).equals(xq.from("6a24aa21a9ed","hex"))})).map((function(e){return e.script.slice(6,38)}));if(0===e.length)return null;var t=e[e.length-1];return t instanceof xq&&32===t.length?t:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof xq&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(e=this.transactions)instanceof Array&&e.some((function(e){return"object"==r(e)&&e.ins instanceof Array&&e.ins.some((function(e){return"object"==r(e)&&e.witness instanceof Array&&e.witness.length>0}))}));var e}},{key:"weight",value:function(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}},{key:"byteLength",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e||!this.transactions?80:80+rne.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,r){return e+r.byteLength(t)}),0)}},{key:"getHash",value:function(){return Mre.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return nne.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e}},{key:"toBuffer",value:function(e){var t=xq.allocUnsafe(this.byteLength(e)),r=new nne.BufferWriter(t);return r.writeInt32(this.version),r.writeSlice(this.prevHash),r.writeSlice(this.merkleRoot),r.writeUInt32(this.timestamp),r.writeUInt32(this.bits),r.writeUInt32(this.nonce),e||!this.transactions||(rne.encode(this.transactions.length,t,r.offset),r.offset+=rne.encode.bytes,this.transactions.forEach((function(e){var n=e.byteLength();e.toBuffer(t,r.offset),r.offset+=n}))),t}},{key:"toHex",value:function(e){return this.toBuffer(e).toString("hex")}},{key:"checkTxRoots",value:function(){var e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}},{key:"checkProofOfWork",value:function(){var t=nne.reverseBuffer(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw n;var t=e.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(t)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw n;if(!this.hasWitnessCommit())throw i;var t=e.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(t)}}],[{key:"fromBuffer",value:function(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=new nne.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),80===t.length)return n;var i=function(){var e=ine.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=e.byteLength(),e},a=r.readVarInt();n.transactions=[];for(var o=0;o<a;++o){var s=i();n.transactions.push(s)}var u=n.getWitnessCommit();return u&&(n.witnessCommit=u),n}},{key:"fromHex",value:function(t){return e.fromBuffer(xq.from(t,"hex"))}},{key:"calculateTarget",value:function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,n=xq.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}},{key:"calculateMerkleRoot",value:function(e,t){if(ore([{getHash:vre.Function}],e),0===e.length)throw n;if(t&&!u(e))throw i;var r=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();r>1;){for(var i=0,a=0;a<r;a+=2,++i){var o=n[a],s=a+1===r?o:n[a+1],u=xq.concat([o,s]);n[i]=t(u)}r=i}return n[0]}(e.map((function(e){return e.getHash(t)})),Mre.hash256);return t?Mre.hash256(xq.concat([r,e[0].ins[0].witness[0]])):r}}]),e}();function u(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=o}));QK(ane),ane.Block;var one=eq((function(e,t){var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.GlobalTypes||(t.GlobalTypes={}))[r.UNSIGNED_TX=0]="UNSIGNED_TX",r[r.GLOBAL_XPUB=1]="GLOBAL_XPUB",t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(n=t.InputTypes||(t.InputTypes={}))[n.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",n[n.WITNESS_UTXO=1]="WITNESS_UTXO",n[n.PARTIAL_SIG=2]="PARTIAL_SIG",n[n.SIGHASH_TYPE=3]="SIGHASH_TYPE",n[n.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=6]="BIP32_DERIVATION",n[n.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",n[n.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",n[n.POR_COMMITMENT=9]="POR_COMMITMENT",t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment"],(i=t.OutputTypes||(t.OutputTypes={}))[i.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",i[i.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",i[i.BIP32_DERIVATION=2]="BIP32_DERIVATION",t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation"]}));QK(one),one.GlobalTypes,one.GLOBAL_TYPE_NAMES,one.InputTypes,one.INPUT_TYPE_NAMES,one.OutputTypes,one.OUTPUT_TYPE_NAMES;var sne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var t,r=e.key.slice(1),n={masterFingerprint:e.value.slice(0,4),extendedPubkey:r,path:"m"},i=C(function(e){return E(Array(e).keys())}(e.value.length/4-1));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=e.value.readUInt32LE(4*a+4),s=!!(2147483648&o),u=2147483647&o;n.path+="/"+u.toString(10)+(s?"'":"")}}catch(e){i.e(e)}finally{i.f()}return n},t.encode=function(e){var t=xq.from([one.GlobalTypes.GLOBAL_XPUB]),r=xq.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=xq.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);var a=4;return n.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,a),a+=4})),{key:r,value:i}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(e){var t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return nW(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&nW(r)&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)+$/)},t.canAddToArray=function(e,t,r){var n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.extendedPubkey.equals(t.extendedPubkey)})).length)}}));QK(sne),sne.decode,sne.encode,sne.expected,sne.check,sne.canAddToArray;var une=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){return{key:xq.from([one.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}}));QK(une),une.encode;var cne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:xq.from([one.InputTypes.FINAL_SCRIPTSIG]),value:e}},t.expected="Buffer",t.check=function(e){return nW(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}));QK(cne),cne.decode,cne.encode,cne.expected,cne.check,cne.canAdd;var lne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:xq.from([one.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},t.expected="Buffer",t.check=function(e){return nW(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}));QK(lne),lne.decode,lne.encode,lne.expected,lne.check,lne.canAdd;var fne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(e){return{key:xq.from([one.InputTypes.NON_WITNESS_UTXO]),value:e}},t.expected="Buffer",t.check=function(e){return nW(e)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}}));QK(fne),fne.decode,fne.encode,fne.expected,fne.check,fne.canAdd;var hne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(e){var t=xq.from([one.InputTypes.PARTIAL_SIG]);return{key:xq.concat([t,e.pubkey]),value:e.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(e){return nW(e.pubkey)&&nW(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!nW(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;var t=e[3];if(t>33||t<1)return!1;if(2!==e[3+t+1])return!1;var r=e[3+t+2];return!(r>33||r<1)&&e.length===3+t+2+r+2}(e.signature)},t.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}));QK(hne),hne.decode,hne.encode,hne.expected,hne.check,hne.canAddToArray;var dne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},t.encode=function(e){return{key:xq.from([one.InputTypes.POR_COMMITMENT]),value:xq.from(e,"utf8")}},t.expected="string",t.check=function(e){return"string"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}));QK(dne),dne.decode,dne.encode,dne.expected,dne.check,dne.canAdd;var pne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(e){var t=xq.from([one.InputTypes.SIGHASH_TYPE]),r=xq.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}},t.expected="number",t.check=function(e){return"number"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}));QK(pne),pne.decode,pne.encode,pne.expected,pne.check,pne.canAdd;var vne=eq((function(e,t){function r(e){if(e<0||e>9007199254740991||e%1!=0)throw new RangeError("value out of range")}function n(e){return r(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function e(t,i,a){if(r(t),i||(i=xq.allocUnsafe(n(t))),!nW(i))throw new TypeError("buffer must be a Buffer instance");return a||(a=0),t<253?(i.writeUInt8(t,a),Object.assign(e,{bytes:1})):t<=65535?(i.writeUInt8(253,a),i.writeUInt16LE(t,a+1),Object.assign(e,{bytes:3})):t<=4294967295?(i.writeUInt8(254,a),i.writeUInt32LE(t,a+1),Object.assign(e,{bytes:5})):(i.writeUInt8(255,a),i.writeUInt32LE(t>>>0,a+1),i.writeUInt32LE(t/4294967296|0,a+5),Object.assign(e,{bytes:9})),i},t.decode=function e(t,n){if(!nW(t))throw new TypeError("buffer must be a Buffer instance");n||(n=0);var i=t.readUInt8(n);if(i<253)return Object.assign(e,{bytes:1}),i;if(253===i)return Object.assign(e,{bytes:3}),t.readUInt16LE(n+1);if(254===i)return Object.assign(e,{bytes:5}),t.readUInt32LE(n+1);Object.assign(e,{bytes:9});var a=t.readUInt32LE(n+1),o=4294967296*t.readUInt32LE(n+5)+a;return r(o),o},t.encodingLength=n}));QK(vne),vne.encode,vne.decode,vne.encodingLength;var yne=eq((function(e,t){function r(e){var t=e.key.length,r=e.value.length,n=vne.encodingLength(t),i=vne.encodingLength(r),a=xq.allocUnsafe(n+t+i+r);return vne.encode(t,a,0),e.key.copy(a,n),vne.encode(r,a,n+t),e.value.copy(a,n+t+i),a}function n(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}Object.defineProperty(t,"__esModule",{value:!0}),t.range=function(e){return E(Array(e).keys())},t.reverseBuffer=function(e){if(e.length<1)return e;for(var t=e.length-1,r=0,n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},t.keyValsToBuffer=function(e){var t=e.map(r);return t.push(xq.from([0])),xq.concat(t)},t.keyValToBuffer=r,t.readUInt64LE=function(e,t){var r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return n((i*=4294967296)+r,9007199254740991),i+r},t.writeUInt64LE=function(e,t,r){return n(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}));QK(yne),yne.range,yne.reverseBuffer,yne.keyValsToBuffer,yne.keyValToBuffer,yne.readUInt64LE,yne.writeUInt64LE;var gne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e){if(e.key[0]!==one.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));var t=yne.readUInt64LE(e.value,0),r=8,n=vne.decode(e.value,r);r+=vne.encodingLength(n);var i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}},t.encode=function(e){var t=e.script,r=e.value,n=vne.encodingLength(t.length),i=xq.allocUnsafe(8+n+t.length);return yne.writeUInt64LE(i,r,0),vne.encode(t.length,i,8),t.copy(i,8+n),{key:xq.from([one.InputTypes.WITNESS_UTXO]),value:i}},t.expected="{ script: Buffer; value: number; }",t.check=function(e){return nW(e.script)&&"number"==typeof e.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}}));QK(gne),gne.decode,gne.encode,gne.expected,gne.check,gne.canAdd;var bne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+t.key.toString("hex"));if(34!==t.key.length&&66!==t.key.length||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var r,n=t.key.slice(1),i={masterFingerprint:t.value.slice(0,4),pubkey:n,path:"m"},a=C(function(e){return E(Array(e).keys())}(t.value.length/4-1));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=t.value.readUInt32LE(4*o+4),u=!!(2147483648&s),c=2147483647&s;i.path+="/"+c.toString(10)+(u?"'":"")}}catch(e){a.e(e)}finally{a.f()}return i},encode:function(t){var r=xq.from([e]),n=xq.concat([r,t.pubkey]),i=t.path.split("/"),a=xq.allocUnsafe(4*i.length);t.masterFingerprint.copy(a,0);var o=4;return i.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),a.writeUInt32LE(r,o),o+=4})),{key:n,value:a}},check:function(e){return nW(e.pubkey)&&nW(e.masterFingerprint)&&"string"==typeof e.path&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}}}));QK(bne),bne.makeConverter;var mne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(e){return function(t){var r;if(e.includes(t.key[0])&&(33!==(r=t.key.slice(1)).length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}}));QK(mne),mne.makeChecker;var wne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:xq.from([e]),value:t}},check:function(e){return nW(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}));QK(wne),wne.makeConverter;var xne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:xq.from([e]),value:t}},check:function(e){return nW(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}));QK(xne),xne.makeConverter;var _ne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={unsignedTx:une,globalXpub:sne,checkPubkey:mne.makeChecker([])};t.globals=r;var n={nonWitnessUtxo:fne,partialSig:hne,sighashType:pne,finalScriptSig:cne,finalScriptWitness:lne,porCommitment:dne,witnessUtxo:gne,bip32Derivation:bne.makeConverter(one.InputTypes.BIP32_DERIVATION),redeemScript:wne.makeConverter(one.InputTypes.REDEEM_SCRIPT),witnessScript:xne.makeConverter(one.InputTypes.WITNESS_SCRIPT),checkPubkey:mne.makeChecker([one.InputTypes.PARTIAL_SIG,one.InputTypes.BIP32_DERIVATION])};t.inputs=n;var i={bip32Derivation:bne.makeConverter(one.OutputTypes.BIP32_DERIVATION),redeemScript:wne.makeConverter(one.OutputTypes.REDEEM_SCRIPT),witnessScript:xne.makeConverter(one.OutputTypes.WITNESS_SCRIPT),checkPubkey:mne.makeChecker([one.OutputTypes.BIP32_DERIVATION])};t.outputs=i}));QK(_ne),_ne.globals,_ne.inputs,_ne.outputs;var kne=eq((function(e,t){function r(e,t,r){if(!t.equals(xq.from([r])))throw new Error("Format Error: Invalid ".concat(e," key: ").concat(t.toString("hex")))}function n(e,t){var n,i=t.globalMapKeyVals,a=t.inputKeyVals,o=t.outputKeyVals,s={unsignedTx:e},u=0,c=C(i);try{for(c.s();!(n=c.n()).done;){var l=n.value;switch(l.key[0]){case one.GlobalTypes.UNSIGNED_TX:if(r("global",l.key,one.GlobalTypes.UNSIGNED_TX),u>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");u++;break;case one.GlobalTypes.GLOBAL_XPUB:void 0===s.globalXpub&&(s.globalXpub=[]),s.globalXpub.push(_ne.globals.globalXpub.decode(l));break;default:s.unknownKeyVals||(s.unknownKeyVals=[]),s.unknownKeyVals.push(l)}}}catch(e){c.e(e)}finally{c.f()}var f,h=a.length,d=o.length,p=[],v=[],y=C(yne.range(h));try{for(y.s();!(f=y.n()).done;){var g,b=f.value,m={},w=C(a[b]);try{for(w.s();!(g=w.n()).done;){var x=g.value;switch(_ne.inputs.checkPubkey(x),x.key[0]){case one.InputTypes.NON_WITNESS_UTXO:if(r("input",x.key,one.InputTypes.NON_WITNESS_UTXO),void 0!==m.nonWitnessUtxo)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");m.nonWitnessUtxo=_ne.inputs.nonWitnessUtxo.decode(x);break;case one.InputTypes.WITNESS_UTXO:if(r("input",x.key,one.InputTypes.WITNESS_UTXO),void 0!==m.witnessUtxo)throw new Error("Format Error: Input has multiple WITNESS_UTXO");m.witnessUtxo=_ne.inputs.witnessUtxo.decode(x);break;case one.InputTypes.PARTIAL_SIG:void 0===m.partialSig&&(m.partialSig=[]),m.partialSig.push(_ne.inputs.partialSig.decode(x));break;case one.InputTypes.SIGHASH_TYPE:if(r("input",x.key,one.InputTypes.SIGHASH_TYPE),void 0!==m.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");m.sighashType=_ne.inputs.sighashType.decode(x);break;case one.InputTypes.REDEEM_SCRIPT:if(r("input",x.key,one.InputTypes.REDEEM_SCRIPT),void 0!==m.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");m.redeemScript=_ne.inputs.redeemScript.decode(x);break;case one.InputTypes.WITNESS_SCRIPT:if(r("input",x.key,one.InputTypes.WITNESS_SCRIPT),void 0!==m.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");m.witnessScript=_ne.inputs.witnessScript.decode(x);break;case one.InputTypes.BIP32_DERIVATION:void 0===m.bip32Derivation&&(m.bip32Derivation=[]),m.bip32Derivation.push(_ne.inputs.bip32Derivation.decode(x));break;case one.InputTypes.FINAL_SCRIPTSIG:r("input",x.key,one.InputTypes.FINAL_SCRIPTSIG),m.finalScriptSig=_ne.inputs.finalScriptSig.decode(x);break;case one.InputTypes.FINAL_SCRIPTWITNESS:r("input",x.key,one.InputTypes.FINAL_SCRIPTWITNESS),m.finalScriptWitness=_ne.inputs.finalScriptWitness.decode(x);break;case one.InputTypes.POR_COMMITMENT:r("input",x.key,one.InputTypes.POR_COMMITMENT),m.porCommitment=_ne.inputs.porCommitment.decode(x);break;default:m.unknownKeyVals||(m.unknownKeyVals=[]),m.unknownKeyVals.push(x)}}}catch(e){w.e(e)}finally{w.f()}p.push(m)}}catch(e){y.e(e)}finally{y.f()}var _,k=C(yne.range(d));try{for(k.s();!(_=k.n()).done;){var S,E=_.value,I={},A=C(o[E]);try{for(A.s();!(S=A.n()).done;){var T=S.value;switch(_ne.outputs.checkPubkey(T),T.key[0]){case one.OutputTypes.REDEEM_SCRIPT:if(r("output",T.key,one.OutputTypes.REDEEM_SCRIPT),void 0!==I.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");I.redeemScript=_ne.outputs.redeemScript.decode(T);break;case one.OutputTypes.WITNESS_SCRIPT:if(r("output",T.key,one.OutputTypes.WITNESS_SCRIPT),void 0!==I.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");I.witnessScript=_ne.outputs.witnessScript.decode(T);break;case one.OutputTypes.BIP32_DERIVATION:void 0===I.bip32Derivation&&(I.bip32Derivation=[]),I.bip32Derivation.push(_ne.outputs.bip32Derivation.decode(T));break;default:I.unknownKeyVals||(I.unknownKeyVals=[]),I.unknownKeyVals.push(T)}}}catch(e){A.e(e)}finally{A.f()}v.push(I)}}catch(e){k.e(e)}finally{k.f()}return{globalMap:s,inputs:p,outputs:v}}Object.defineProperty(t,"__esModule",{value:!0}),t.psbtFromBuffer=function(e,t){var r=0;function i(){var t=vne.decode(e,r);r+=vne.encodingLength(t);var n=e.slice(r,r+t);return r+=t,n}function a(){return{key:i(),value:i()}}function o(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");var t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){var t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){var t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var s=[],u={};!o();){var c=a(),l=c.key.toString("hex");if(u[l])throw new Error("Format Error: Keys must be unique for global keymap: key "+l);u[l]=1,s.push(c)}var f=s.filter((function(e){return e.key[0]===one.GlobalTypes.UNSIGNED_TX}));if(1!==f.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var h,d=t(f[0].value),p=d.getInputOutputCounts(),v=p.inputCount,y=p.outputCount,g=[],b=[],m=C(yne.range(v));try{for(m.s();!(h=m.n()).done;){for(var w=h.value,x={},_=[];!o();){var k=a(),S=k.key.toString("hex");if(x[S])throw new Error("Format Error: Keys must be unique for each input: input index "+w+" key "+S);x[S]=1,_.push(k)}g.push(_)}}catch(e){m.e(e)}finally{m.f()}var E,I=C(yne.range(y));try{for(I.s();!(E=I.n()).done;){for(var A=E.value,T={},P=[];!o();){var O=a(),M=O.key.toString("hex");if(T[M])throw new Error("Format Error: Keys must be unique for each output: output index "+A+" key "+M);T[M]=1,P.push(O)}b.push(P)}}catch(e){I.e(e)}finally{I.f()}return n(d,{globalMapKeyVals:s,inputKeyVals:g,outputKeyVals:b})},t.checkKeyBuffer=r,t.psbtFromKeyVals=n}));QK(kne),kne.psbtFromBuffer,kne.checkKeyBuffer,kne.psbtFromKeyVals;var Sne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.psbtToBuffer=function(e){var t=i({globalMap:e.globalMap,inputs:e.inputs,outputs:e.outputs}),r=t.globalKeyVals,n=t.inputKeyVals,a=t.outputKeyVals,o=yne.keyValsToBuffer(r),s=function(e){return 0===e.length?[xq.from([0])]:e.map(yne.keyValsToBuffer)},u=s(n),c=s(a),l=xq.allocUnsafe(5);return l.writeUIntBE(482972169471,0,5),xq.concat([l,o].concat(u,c))};var r=function(e,t){return e.key.compare(t.key)};function n(e,t){var n=new Set,i=Object.entries(e).reduce((function(e,r){var i=k(r,2),a=i[0],o=i[1];if("unknownKeyVals"===a)return e;var s=t[a];if(void 0===s)return e;var u=(Array.isArray(o)?o:[o]).map(s.encode);return u.map((function(e){return e.key.toString("hex")})).forEach((function(e){if(n.has(e))throw new Error("Serialize Error: Duplicate key: "+e);n.add(e)})),e.concat(u)}),[]),a=e.unknownKeyVals?e.unknownKeyVals.filter((function(e){return!n.has(e.key.toString("hex"))})):[];return i.concat(a).sort(r)}function i(e){var t=e.globalMap,r=e.inputs,i=e.outputs;return{globalKeyVals:n(t,_ne.globals),inputKeyVals:r.map((function(e){return n(e,_ne.inputs)})),outputKeyVals:i.map((function(e){return n(e,_ne.outputs)}))}}t.psbtToKeyVals=i}));QK(Sne),Sne.psbtToBuffer,Sne.psbtToKeyVals;var Ene=eq((function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(kne),r(Sne)}));QK(Ene);var Ine=eq((function(e,t){function r(e,t,r){return function(n){if(!e.has(n)){var i=r.filter((function(e){return e.key.toString("hex")===n}))[0];t.push(i),e.add(n)}}}function n(e){return e.globalMap.unsignedTx}function i(e){var t=new Set;return e.forEach((function(e){var r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){var t=e[0],a=Ene.psbtToKeyVals(t),o=e.slice(1);if(0===o.length)throw new Error("Combine: Nothing to combine");var s=n(t);if(void 0===s)throw new Error("Combine: Self missing transaction");var u,c=i(a.globalKeyVals),l=a.inputKeyVals.map(i),f=a.outputKeyVals.map(i),h=C(o);try{var d=function(){var e=u.value,t=n(e);if(void 0===t||!t.toBuffer().equals(s.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var o=Ene.psbtToKeyVals(e);i(o.globalKeyVals).forEach(r(c,a.globalKeyVals,o.globalKeyVals)),o.inputKeyVals.map(i).forEach((function(e,t){return e.forEach(r(l[t],a.inputKeyVals[t],o.inputKeyVals[t]))})),o.outputKeyVals.map(i).forEach((function(e,t){return e.forEach(r(f[t],a.outputKeyVals[t],o.outputKeyVals[t]))}))};for(h.s();!(u=h.n()).done;)d()}catch(e){h.e(e)}finally{h.f()}return Ene.psbtFromKeyVals(s,{globalMapKeyVals:a.globalKeyVals,inputKeyVals:a.inputKeyVals,outputKeyVals:a.outputKeyVals})}}));QK(Ine),Ine.combine;var Ane=eq((function(e,t){function r(e,t){var r=e[t];if(void 0===r)throw new Error("No input #".concat(t));return r}function n(e,t,r,n){throw new Error("Data for ".concat(e," key ").concat(t," is incorrect: Expected ").concat(r," and got ").concat(JSON.stringify(n)))}function i(e){return function(t,r){for(var i=function(){var i=o[a],s=t[i],u=_ne[e+"s"][i]||{},c=u.canAdd,l=u.canAddToArray,f=u.check,h=u.expected;if(f)if(!!l){if(!Array.isArray(s)||r[i]&&!Array.isArray(r[i]))throw new Error("Key type ".concat(i," must be an array"));s.every(f)||n(e,i,h,s);var d=r[i]||[],p=new Set;if(!s.every((function(e){return l(d,e,p)})))throw new Error("Can not add duplicate data to array");r[i]=d.concat(s)}else{if(f(s)||n(e,i,h,s),!c(r,s))throw new Error("Can not add duplicate data to ".concat(e));r[i]=s}},a=0,o=Object.keys(t);a<o.length;a++)i()}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkForInput=r,t.checkForOutput=function(e,t){var r=e[t];if(void 0===r)throw new Error("No output #".concat(t));return r},t.checkHasKey=function(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter((function(t){return t.key.equals(e.key)})).length)throw new Error("Duplicate Key: ".concat(e.key.toString("hex")))},t.getEnumLength=function(e){var t=0;return Object.keys(e).forEach((function(e){Number(isNaN(Number(e)))&&t++})),t},t.inputCheckUncleanFinalized=function(e,t){var r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){var n=!!t.redeemScript,i=!!t.witnessScript,a=!n||!!t.finalScriptSig,o=!i||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=a&&o&&s}if(!1===r)throw new Error("Input #".concat(e," has too much or too little data to clean"))},t.updateGlobal=i("global"),t.updateInput=i("input"),t.updateOutput=i("output"),t.addInputAttributes=function(e,n){var i=r(e,e.length-1);t.updateInput(n,i)},t.addOutputAttributes=function(e,n){var i=r(e,e.length-1);t.updateOutput(n,i)},t.defaultVersionSetter=function(e,t){if(!nW(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},t.defaultLocktimeSetter=function(e,t){if(!nW(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}));QK(Ane),Ane.checkForInput,Ane.checkForOutput,Ane.checkHasKey,Ane.getEnumLength,Ane.inputCheckUncleanFinalized,Ane.updateGlobal,Ane.updateInput,Ane.updateOutput,Ane.addInputAttributes,Ane.addOutputAttributes,Ane.defaultVersionSetter,Ane.defaultLocktimeSetter;var Tne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Psbt=function(){function e(t){a(this,e),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}return s(e,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return Ene.psbtToBuffer(this)}},{key:"updateGlobal",value:function(e){return Ane.updateGlobal(e,this.globalMap),this}},{key:"updateInput",value:function(e,t){var r=Ane.checkForInput(this.inputs,e);return Ane.updateInput(t,r),this}},{key:"updateOutput",value:function(e,t){var r=Ane.checkForOutput(this.outputs,e);return Ane.updateOutput(t,r),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return Ane.checkHasKey(e,this.globalMap.unknownKeyVals,Ane.getEnumLength(one.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){var r=Ane.checkForInput(this.inputs,e);return Ane.checkHasKey(t,r.unknownKeyVals,Ane.getEnumLength(one.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){var r=Ane.checkForOutput(this.outputs,e);return Ane.checkHasKey(t,r.unknownKeyVals,Ane.getEnumLength(one.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addInput",value:function(e){var t=this;this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),Ane.addInputAttributes(this.inputs,e),this}},{key:"addOutput",value:function(e){var t=this;this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),Ane.addOutputAttributes(this.outputs,e),this}},{key:"clearFinalizedInput",value:function(e){var t=Ane.checkForInput(this.inputs,e);Ane.inputCheckUncleanFinalized(e,t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete t[i]}return this}},{key:"combine",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Ine.combine([this].concat(t));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(e,t){var r=xq.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e,t){var r=xq.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(e,t){var r=Ene.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),e}()}));QK(Tne),Tne.Psbt;var Pne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={network:dre.bitcoin,maximumFeeRate:5e3},n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tne.Psbt(new o);a(this,e),this.data=n,this.opts=Object.assign({},r,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);var i=function(e,t,r,n){return Object.defineProperty(e,t,{enumerable:r,writable:n})};i(this,"__CACHE",!1,!0),i(this,"opts",!1,!0)}return s(e,[{key:"inputCount",get:function(){return this.data.inputs.length}},{key:"version",get:function(){return this.__CACHE.__TX.version},set:function(e){this.setVersion(e)}},{key:"locktime",get:function(){return this.__CACHE.__TX.locktime},set:function(e){this.setLocktime(e)}},{key:"txInputs",get:function(){return this.__CACHE.__TX.ins.map((function(e){return{hash:nne.cloneBuffer(e.hash),index:e.index,sequence:e.sequence}}))}},{key:"txOutputs",get:function(){var e=this;return this.__CACHE.__TX.outs.map((function(t){var r;try{r=$re.fromOutputScript(t.script,e.opts.network)}catch(t){}return{script:nne.cloneBuffer(t.script),value:t.value,address:r}}))}},{key:"combine",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.data).combine.apply(e,E(r.map((function(e){return e.data})))),this}},{key:"clone",value:function(){var t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}},{key:"setMaximumFeeRate",value:function(e){m(e),this.opts.maximumFeeRate=e}},{key:"setVersion",value:function(e){m(e),w(this.data.inputs,"setVersion");var t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(e){m(e),w(this.data.inputs,"setLocktime");var t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(e,t){m(t),w(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(e){var t=this;return e.forEach((function(e){return t.addInput(e)})),this}},{key:"addInput",value:function(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");w(this.data.inputs,"addInput"),e.witnessScript&&H(e.witnessScript);var t=this.__CACHE;this.data.addInput(e),S(t,t.__TX.ins[t.__TX.ins.length-1]);var r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&j(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(e){var t=this;return e.forEach((function(e){return t.addOutput(e)})),this}},{key:"addOutput",value:function(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");w(this.data.inputs,"addOutput");var t=e,r=t.address;if("string"==typeof r){var n=this.opts.network,i=$re.toOutputScript(r,n);e=Object.assign(e,{script:i})}var a=this.__CACHE;return this.data.addOutput(e),a.__FEE=void 0,a.__FEE_RATE=void 0,a.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(e){if(!this.data.inputs.every(l))throw new Error("Not finalized");var t=this.__CACHE;if(e||function(e,t,r){var n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),a=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((a/1e8).toFixed(8)," in fees, which is ").concat(n," satoshi per byte for a transaction with a VSize of ").concat(i," bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction."))}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;var r=t.__TX.clone();return D(this.data.inputs,r,t,!0),r}},{key:"getFeeRate",value:function(){return P("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return P("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var e=this;return Ane.checkForInput(this.data.inputs,0),q(this.data.inputs.length).forEach((function(t){return e.finalizeInput(t)})),this}},{key:"finalizeInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=Ane.checkForInput(this.data.inputs,e),n=function(e,t,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){var a=B(r,t,e),o=n.ins[e].index;i.script=a.outs[o].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||v(i.script))&&(i.isSegwit=!0),i}(e,r,this.__CACHE),i=n.script,a=n.isP2SH,o=n.isP2WSH,s=n.isSegwit;if(!i)throw new Error("No script found for input #".concat(e));x(r);var u=t(e,r,i,s,a,o),c=u.finalScriptSig,l=u.finalScriptWitness;if(c&&this.data.updateInput(e,{finalScriptSig:c}),l&&this.data.updateInput(e,{finalScriptWitness:l}),!c&&!l)throw new Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}},{key:"getInputType",value:function(e){var t=Ane.checkForInput(this.data.inputs,e),r=z(U(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;var t=Are.decompile(e);if(!t)return;var r,n=t[t.length-1];if(!nW(n)||F(n)||(r=n,Are.isCanonicalScriptSignature(r)))return;return Are.decompile(n)?n:void 0}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;var t=L(e),r=t[t.length-1];if(F(r))return;return Are.decompile(r)?r:void 0}(t.finalScriptWitness));return("raw"===r.type?"":r.type+"-")+K(r.meaningfulScript)}},{key:"inputHasPubkey",value:function(e,t){return function(e,t,r,n){return V(e,z(U(r,t,n),r,"input",t.redeemScript,t.witnessScript).meaningfulScript)}(t,Ane.checkForInput(this.data.inputs,e),e,this.__CACHE)}},{key:"inputHasHDKey",value:function(e,t){var r=Ane.checkForInput(this.data.inputs,e),n=b(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"outputHasPubkey",value:function(e,t){return function(e,t,r,n){return V(e,z(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript).meaningfulScript)}(t,Ane.checkForOutput(this.data.outputs,e),e,this.__CACHE)}},{key:"outputHasHDKey",value:function(e,t){var r=Ane.checkForOutput(this.data.outputs,e),n=b(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}},{key:"validateSignaturesOfAllInputs",value:function(){var e=this;return Ane.checkForInput(this.data.inputs,0),q(this.data.inputs.length).map((function(t){return e.validateSignaturesOfInput(t)})).reduce((function(e,t){return!0===t&&e}),!0)}},{key:"validateSignaturesOfInput",value:function(e,t){var r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var i=t?n.filter((function(e){return e.pubkey.equals(t)})):n;if(i.length<1)throw new Error("No signatures for this pubkey");var a,o,s,u,c=[],l=C(i);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=Are.signature.decode(f.signature),d=s!==h.hashType?N(e,Object.assign({},r,{sighashType:h.hashType}),this.__CACHE,!0):{hash:a,script:o},p=d.hash,v=d.script;s=h.hashType,a=p,o=v,_(f.pubkey,v,"verify");var y=Zre.fromPublicKey(f.pubkey);c.push(y.verify(p,h.signature))}}catch(e){l.e(e)}finally{l.f()}return c.every((function(e){return!0===e}))}},{key:"signAllInputsHD",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[ine.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var r,n=[],i=C(q(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var a=r.value;try{this.signInputHD(a,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[ine.Transaction.SIGHASH_ALL];return new Promise((function(n,i){if(!e||!e.publicKey||!e.fingerprint)return i(new Error("Need HDSigner to sign input"));var a,o=[],s=[],u=C(q(t.data.inputs.length));try{for(u.s();!(a=u.n()).done;){var c=a.value;s.push(t.signInputHDAsync(c,e,r).then((function(){o.push(!0)}),(function(){o.push(!1)})))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(s).then((function(){if(o.every((function(e){return!1===e})))return i(new Error("No inputs were signed"));n()}))}))}},{key:"signInputHD",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[ine.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");return R(e,this.data.inputs,t).forEach((function(t){return r.signInput(e,t,n)})),this}},{key:"signInputHDAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[ine.Transaction.SIGHASH_ALL];return new Promise((function(i,a){if(!t||!t.publicKey||!t.fingerprint)return a(new Error("Need HDSigner to sign input"));var o=R(e,r.data.inputs,t).map((function(t){return r.signInputAsync(e,t,n)}));return Promise.all(o).then((function(){i()})).catch(a)}))}},{key:"signAllInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[ine.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var r,n=[],i=C(q(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var a=r.value;try{this.signInput(a,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[ine.Transaction.SIGHASH_ALL];return new Promise((function(n,i){if(!e||!e.publicKey)return i(new Error("Need Signer to sign input"));var a,o=[],s=[],u=C(t.data.inputs.entries());try{for(u.s();!(a=u.n()).done;){var c=k(a.value,1)[0];s.push(t.signInputAsync(c,e,r).then((function(){o.push(!0)}),(function(){o.push(!1)})))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(s).then((function(){if(o.every((function(e){return!1===e})))return i(new Error("No inputs were signed"));n()}))}))}},{key:"signInput",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[ine.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var n=M(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=n.hash,a=n.sighashType,o=[{pubkey:t.publicKey,signature:Are.signature.encode(t.sign(i),a)}];return this.data.updateInput(e,{partialSig:o}),this}},{key:"signInputAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[ine.Transaction.SIGHASH_ALL];return Promise.resolve().then((function(){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var i=M(r.data.inputs,e,t.publicKey,r.__CACHE,n),a=i.hash,o=i.sighashType;return Promise.resolve(t.sign(a)).then((function(n){var i=[{pubkey:t.publicKey,signature:Are.signature.encode(n,o)}];r.data.updateInput(e,{partialSig:i})}))}))}},{key:"toBuffer",value:function(){return u(this.__CACHE),this.data.toBuffer()}},{key:"toHex",value:function(){return u(this.__CACHE),this.data.toHex()}},{key:"toBase64",value:function(){return u(this.__CACHE),this.data.toBase64()}},{key:"updateGlobal",value:function(e){return this.data.updateGlobal(e),this}},{key:"updateInput",value:function(e,t){return t.witnessScript&&H(t.witnessScript),this.data.updateInput(e,t),t.nonWitnessUtxo&&j(this.__CACHE,this.data.inputs[e],e),this}},{key:"updateOutput",value:function(e,t){return this.data.updateOutput(e,t),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return this.data.addUnknownKeyValToGlobal(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){return this.data.addUnknownKeyValToInput(e,t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}},{key:"clearFinalizedInput",value:function(e){return this.data.clearFinalizedInput(e),this}}],[{key:"fromBase64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=xq.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=xq.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(t){var r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Tne.Psbt.fromBuffer(t,i),s=new e(a,o);return r=s.__CACHE.__TX,n=s.__CACHE,r.ins.forEach((function(e){S(n,e)})),s}}]),e}();t.Psbt=n;var i=function(e){return new o(e)},o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xq.from([2,0,0,0,0,0,0,0,0,0]);a(this,e),this.tx=ine.Transaction.fromBuffer(t),function(e){if(!e.ins.every((function(e){return e.script&&0===e.script.length&&e.witness&&0===e.witness.length})))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}return s(e,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(e){if(void 0===e.hash||void 0===e.index||!nW(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");var t="string"==typeof e.hash?nne.reverseBuffer(xq.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}},{key:"addOutput",value:function(e){if(void 0===e.script||void 0===e.value||!nW(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),e}();function u(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Not BIP174 compliant, can not export")}function c(e,t,r){if(!t)return!1;var n;if(n=r?r.map((function(e){var r=Zre.fromPublicKey(e,{compressed:!0}).publicKey;return t.find((function(e){return e.pubkey.equals(r)}))})).filter((function(e){return!!e})):t,n.length>e)throw new Error("Too many signatures");return n.length===e}function l(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function f(e){return function(t){try{return e({output:t}),!0}catch(e){return!1}}}var h=f(Xre.p2ms),d=f(Xre.p2pk),p=f(Xre.p2pkh),v=f(Xre.p2wpkh),y=f(Xre.p2wsh),g=f(Xre.p2sh);function b(e){return function(t){return!!t.masterFingerprint.equals(e.fingerprint)&&!!e.derivePath(t.path).publicKey.equals(t.pubkey)}}function m(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function w(e,t){e.forEach((function(e){var r=!1,n=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;n=function(e){var t=e.finalScriptSig&&Are.decompile(e.finalScriptSig)||[],r=e.finalScriptWitness&&Are.decompile(e.finalScriptWitness)||[];return t.concat(r).filter((function(e){return nW(e)&&Are.isCanonicalScriptSignature(e)})).map((function(e){return{signature:e}}))}(e)}else n=e.partialSig;if(n.forEach((function(e){var n=Are.signature.decode(e.signature).hashType,i=[];switch(n&ine.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case ine.Transaction.SIGHASH_ALL:break;case ine.Transaction.SIGHASH_SINGLE:case ine.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(t)&&(r=!0)})),r)throw new Error("Can not modify transaction, signatures exist.")}))}function x(e){if(e.sighashType&&e.partialSig){var t=e.partialSig,r=e.sighashType;t.forEach((function(e){var t=Are.signature.decode(e.signature).hashType;if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}}function _(e,t,r){if(!V(e,t))throw new Error("Can not ".concat(r," for this input with the key ").concat(e.toString("hex")))}function S(e,t){var r=nne.reverseBuffer(xq.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function I(e,t){return function(r,n,i,a){var o=e({redeem:{output:i}}).output;if(!n.equals(o))throw new Error("".concat(t," for ").concat(a," #").concat(r," doesn't match the scriptPubKey in the prevout"))}}var A=I(Xre.p2sh,"Redeem script"),T=I(Xre.p2wsh,"Witness script");function P(e,t,r,n){if(!r.every(l))throw new Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;var i,a=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,a=!1):i=n.__TX.clone(),D(r,i,n,a),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function O(e,t,r,n,i,a){var o=K(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return c(1,e.partialSig);case"multisig":var n=Xre.p2ms({output:t});return c(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,r,o))throw new Error("Can not finalize input #".concat(e));return function(e,t,r,n,i,a){var o,s,u=function(e,t,r){var n;switch(t){case"multisig":var i=function(e,t){return Xre.p2ms({output:e}).pubkeys.map((function(e){return(t.filter((function(t){return t.pubkey.equals(e)}))[0]||{}).signature})).filter((function(e){return!!e}))}(e,r);n=Xre.p2ms({output:e,signatures:i});break;case"pubkey":n=Xre.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=Xre.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=Xre.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),c=a?Xre.p2wsh({redeem:u}):null,l=i?Xre.p2sh({redeem:c||u}):null;return n?(s=function(e){var t,r=xq.allocUnsafe(0);function n(e){var t=r.length,n=vne.encodingLength(e);r=xq.concat([r,xq.allocUnsafe(n)]),vne.encode(e,r,t)}function i(e){n(e.length),function(e){r=xq.concat([r,xq.from(e)])}(e)}return n((t=e).length),t.forEach(i),r}(c?c.witness:u.witness),l&&(o=l.input)):o=l?l.input:u.input,{finalScriptSig:o,finalScriptWitness:s}}(r,o,t.partialSig,n,i,a)}function M(e,t,r,n,i){var a=N(t,Ane.checkForInput(e,t),n,!1,i),o=a.hash,s=a.sighashType;return _(r,a.script,"sign"),{hash:o,sighashType:s}}function N(e,t,r,n,i){var a,o,s=r.__TX,u=t.sighashType||ine.Transaction.SIGHASH_ALL;if(i&&i.indexOf(u)<0){var c=function(e){var t=e&ine.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case ine.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case ine.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case ine.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(u);throw new Error("Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ".concat(c))}if(t.nonWitnessUtxo){var l=B(r,t,e),f=s.ins[e].hash,h=l.getHash();if(!f.equals(h))throw new Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));var d=s.ins[e].index;o=l.outs[d]}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");o=t.witnessUtxo}var p=z(o.script,e,"input",t.redeemScript,t.witnessScript),y=p.meaningfulScript,g=p.type;if(["p2sh-p2wsh","p2wsh"].indexOf(g)>=0)a=s.hashForWitnessV0(e,y,o.value,u);else if(v(y)){var b=Xre.p2pkh({hash:y.slice(2)}).output;a=s.hashForWitnessV0(e,b,o.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw new Error("Input #".concat(e," has witnessUtxo but non-segwit script: ").concat(y.toString("hex")));n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),a=s.hashForSignature(e,y,u)}return{script:y,sighashType:u,hash:a}}function R(e,t,r){var n=Ane.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map((function(e){return e.masterFingerprint.equals(r.fingerprint)?e:void 0})).filter((function(e){return!!e}));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((function(e){var t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function L(e){var t=0;function r(){var r=vne.decode(e,t);return t+=vne.decode.bytes,r}function n(){return function(r){return t+=r,e.slice(t-r,t)}(r())}return function(){for(var e=r(),t=[],i=0;i<e;i++)t.push(n());return t}()}function j(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;var n=ine.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=e,a=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get:function(){var e=i.__NON_WITNESS_UTXO_BUF_CACHE[a],t=i.__NON_WITNESS_UTXO_TX_CACHE[a];if(void 0!==e)return e;var r=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[a]=r,r},set:function(e){i.__NON_WITNESS_UTXO_BUF_CACHE[a]=e}})}function D(e,t,r,n){var i=0;e.forEach((function(e,a){if(n&&e.finalScriptSig&&(t.ins[a].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[a].witness=L(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){var o=B(r,e,a),s=t.ins[a].index,u=o.outs[s];i+=u.value}}));var a=t.outs.reduce((function(e,t){return e+t.value}),0),o=i-a;if(o<0)throw new Error("Outputs are spending more than Inputs");var s=t.virtualSize();r.__FEE=o,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(o/s)}function B(e,t,r){var n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||j(e,t,r),n[r]}function U(e,t,r){if(void 0!==t.witnessUtxo)return t.witnessUtxo.script;if(void 0!==t.nonWitnessUtxo)return B(r,t,e).outs[r.__TX.ins[e].index].script;throw new Error("Can't find pubkey in input without Utxo data")}function F(e){return 33===e.length&&Are.isCanonicalPubKey(e)}function z(e,t,r,n,i){var a,o=g(e),s=o&&n&&y(n),u=y(e);if(o&&void 0===n)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((u||s)&&void 0===i)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return s?(a=i,A(t,e,n,r),T(t,n,i,r),H(a)):u?(a=i,T(t,e,i,r),H(a)):o?(a=n,A(t,e,n,r)):a=e,{meaningfulScript:a,type:s?"p2sh-p2wsh":o?"p2sh":u?"p2wsh":"raw"}}function H(e){if(v(e)||g(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function V(e,t){var r=Mre.hash160(e),n=Are.decompile(t);if(null===n)throw new Error("Unknown script error");return n.some((function(t){return"number"!=typeof t&&(t.equals(e)||t.equals(r))}))}function K(e){return v(e)?"witnesspubkeyhash":p(e)?"pubkeyhash":h(e)?"multisig":d(e)?"pubkey":"nonstandard"}function q(e){return E(Array(e).keys())}}));QK(Pne),Pne.Psbt;var One=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){return e===r.OPS.OP_0||Are.isCanonicalScriptSignature(e)}function i(e,t){var i=Are.decompile(e);return!(i.length<2)&&i[0]===r.OPS.OP_0&&(t?i.slice(1).every(n):i.slice(1).every(Are.isCanonicalScriptSignature))}t.check=i,i.toJSON=function(){return"multisig input"}}));QK(One),One.check;var Cne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are,n=r.OPS.OP_RESERVED;function i(e,t){var i=Are.decompile(e);if(i.length<4)return!1;if(i[i.length-1]!==r.OPS.OP_CHECKMULTISIG)return!1;if(!vre.Number(i[0]))return!1;if(!vre.Number(i[i.length-2]))return!1;var a=i[0]-n,o=i[i.length-2]-n;return!(a<=0)&&(!(o>16)&&(!(a>o)&&(o===i.length-3&&(!!t||i.slice(1,-2).every(Are.isCanonicalPubKey)))))}t.check=i,i.toJSON=function(){return"multi-sig output"}}));QK(Cne),Cne.check;var Mne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=One,t.output=Cne}));QK(Mne),Mne.input,Mne.output;var Nne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are.OPS;function n(e){var t=Are.compile(e);return t.length>1&&t[0]===r.OP_RETURN}t.check=n,n.toJSON=function(){return"null data output"};var i={check:n};t.output=i}));QK(Nne),Nne.check,Nne.output;var Rne=eq((function(e,t){function r(e){var t=Are.decompile(e);return 1===t.length&&Are.isCanonicalScriptSignature(t[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=function(){return"pubKey input"}}));QK(Rne),Rne.check;var Lne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=Are.decompile(e);return 2===t.length&&Are.isCanonicalPubKey(t[0])&&t[1]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=function(){return"pubKey output"}}));QK(Lne),Lne.check;var jne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Rne,t.output=Lne}));QK(jne),jne.input,jne.output;var Dne=eq((function(e,t){function r(e){var t=Are.decompile(e);return 2===t.length&&Are.isCanonicalScriptSignature(t[0])&&Are.isCanonicalPubKey(t[1])}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=function(){return"pubKeyHash input"}}));QK(Dne),Dne.check;var Bne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=Are.compile(e);return 25===t.length&&t[0]===r.OPS.OP_DUP&&t[1]===r.OPS.OP_HASH160&&20===t[2]&&t[23]===r.OPS.OP_EQUALVERIFY&&t[24]===r.OPS.OP_CHECKSIG}t.check=n,n.toJSON=function(){return"pubKeyHash output"}}));QK(Bne),Bne.check;var Une=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Dne,t.output=Bne}));QK(Une),Une.input,Une.output;var Fne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=Are.compile(e);return 22===t.length&&t[0]===r.OPS.OP_0&&20===t[1]}t.check=n,n.toJSON=function(){return"Witness pubKeyHash output"}}));QK(Fne),Fne.check;var zne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=Are.compile(e);return 34===t.length&&t[0]===r.OPS.OP_0&&32===t[1]}t.check=n,n.toJSON=function(){return"Witness scriptHash output"}}));QK(zne),zne.check;var Hne=eq((function(e,t){function r(e,t){var r=Are.decompile(e);if(r.length<1)return!1;var n=r[r.length-1];if(!nW(n))return!1;var i=Are.decompile(Are.compile(r.slice(0,-1))),a=Are.decompile(n);return!!a&&!!Are.isPushOnly(i)&&(1===r.length?zne.check(a)||Fne.check(a):!(!Une.input.check(i)||!Une.output.check(a))||!(!Mne.input.check(i,t)||!Mne.output.check(a))||!(!jne.input.check(i)||!jne.output.check(a)))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=function(){return"scriptHash input"}}));QK(Hne),Hne.check;var Vne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are;function n(e){var t=Are.compile(e);return 23===t.length&&t[0]===r.OPS.OP_HASH160&&20===t[1]&&t[22]===r.OPS.OP_EQUAL}t.check=n,n.toJSON=function(){return"scriptHash output"}}));QK(Vne),Vne.check;var Kne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Hne,t.output=Vne}));QK(Kne),Kne.input,Kne.output;var qne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Are,n=xq.from("aa21a9ed","hex");function i(e){var t=Are.compile(e);return t.length>37&&t[0]===r.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(n)}t.check=i,i.toJSON=function(){return"Witness commitment output"},t.encode=function(e){ore(vre.Hash256bit,e);var t=xq.allocUnsafe(36);return n.copy(t,0),e.copy(t,4),Are.compile([r.OPS.OP_RETURN,t])},t.decode=function(e){return ore(i,e),Are.decompile(e)[1].slice(4,36)}}));QK(qne),qne.check,qne.encode,qne.decode;var Wne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.output=qne}));QK(Wne),Wne.output;var Gne=eq((function(e,t){function r(e){var t,r=Are.decompile(e);return 2===r.length&&Are.isCanonicalScriptSignature(r[0])&&(t=r[1],Are.isCanonicalPubKey(t)&&33===t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=function(){return"witnessPubKeyHash input"}}));QK(Gne),Gne.check;var Jne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Gne,t.output=Fne}));QK(Jne),Jne.input,Jne.output;var Xne=eq((function(e,t){function r(e,t){if(ore(ore.Array,e),e.length<1)return!1;var r=e[e.length-1];if(!nW(r))return!1;var n=Are.decompile(r);if(!n||0===n.length)return!1;var i=Are.compile(e.slice(0,-1));return!(!Une.input.check(i)||!Une.output.check(n))||!(!Mne.input.check(i,t)||!Mne.output.check(n))||!(!jne.input.check(i)||!jne.output.check(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.check=r,r.toJSON=function(){return"witnessScriptHash input"}}));QK(Xne),Xne.check;var $ne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.input=Xne,t.output=zne}));QK($ne),$ne.input,$ne.output;var Yne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=r,t.output=function(e){if(Jne.output.check(e))return r.P2WPKH;if($ne.output.check(e))return r.P2WSH;if(Une.output.check(e))return r.P2PKH;if(Kne.output.check(e))return r.P2SH;var t=Are.decompile(e);if(!t)throw new TypeError("Invalid script");return Mne.output.check(t)?r.P2MS:jne.output.check(t)?r.P2PK:Wne.output.check(t)?r.WITNESS_COMMITMENT:Nne.output.check(t)?r.NULLDATA:r.NONSTANDARD},t.input=function(e,t){var n=Are.decompile(e);if(!n)throw new TypeError("Invalid script");return Une.input.check(n)?r.P2PKH:Kne.input.check(n,t)?r.P2SH:Mne.input.check(n,t)?r.P2MS:jne.input.check(n)?r.P2PK:r.NONSTANDARD},t.witness=function(e,t){var n=Are.decompile(e);if(!n)throw new TypeError("Invalid script");return Jne.input.check(n)?r.P2WPKH:$ne.input.check(n,t)?r.P2WSH:r.NONSTANDARD}}));QK(Yne),Yne.types,Yne.output,Yne.input,Yne.witness;var Zne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Are,i=Yne.types,o=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function u(e,t,r){try{ore(e,t)}catch(e){throw new Error(r)}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dre.bitcoin,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;a(this,e),this.network=t,this.maximumFeeRate=r,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new ine.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}return s(e,[{key:"setLowR",value:function(e){return ore(ore.maybe(ore.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}},{key:"setLockTime",value:function(e){if(ore(vre.UInt32,e),this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return void 0!==e}))})))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}},{key:"setVersion",value:function(e){ore(vre.UInt32,e),this.__TX.version=e}},{key:"addInput",value:function(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var i,a;if("string"==typeof(a=e)||a instanceof String)e=nne.reverseBuffer(xq.from(e,"hex"));else if(function(e){return e instanceof ine.Transaction}(e)){var o=e.outs[t];n=o.script,i=o.value,e=e.getHash(!1)}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}},{key:"addOutput",value:function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=$re.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(e,t,n,a,s,c){!function(e){var t,r=e.input,n=e.ourPubKey,i=e.keyPair,a=e.signatureHash,o=e.hashType,s=e.useLowR,u=!1,c=C(r.pubkeys.entries());try{for(c.s();!(t=c.n()).done;){var l=k(t.value,2),f=l[0],h=l[1];if(n.equals(h)){if(r.signatures[f])throw new Error("Signature already exists");if(33!==n.length&&r.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var d=i.sign(a,s);r.signatures[f]=Are.signature.encode(d,o),u=!0}}}catch(e){c.e(e)}finally{c.f()}if(!u)throw new Error("Key pair cannot sign for this input")}(function(e,t,n,a,s,c,l,h,p,v,y){var g;if("number"==typeof s)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),g=s;else{var b;if("object"!=r(s))throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!o.has(t.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(t.prevOutScriptType,'"'));u(ore.Number,t.vin,"sign must include vin parameter as Number (input index)"),u(vre.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),u(ore.maybe(ore.Number),t.hashType,"sign hashType parameter must be a number");var r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pkh: ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),u(ore.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pk: ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),u(ore.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2wpkh: ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),u(vre.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2ms: ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),u(ore.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2sh-p2wpkh: ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),u(vre.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));u(ore.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),u(ore.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),u(ore.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));u(ore.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),u(ore.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),u(vre.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));u(ore.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),u(ore.Buffer,t.redeemScript,"".concat(n," requires witnessScript")),u(vre.Satoshi,t.witnessValue,"".concat(n," requires witnessScript"))}}(t,s),g=(b=s).vin,c=b.keyPair,l=b.redeemScript,h=b.hashType,p=b.witnessValue,v=b.witnessScript}if(void 0===c)throw new Error("sign requires keypair");if(c.network&&c.network!==e)throw new TypeError("Inconsistent network");if(!t[g])throw new Error("No input at index: "+g);if(n(h=h||ine.Transaction.SIGHASH_ALL))throw new Error("Transaction needs outputs");var m=t[g];if(void 0!==m.redeemScript&&l&&!m.redeemScript.equals(l))throw new Error("Inconsistent redeemScript");var w=c.publicKey||c.getPublicKey&&c.getPublicKey();if(!d(m)){if(void 0!==p){if(void 0!==m.value&&m.value!==p)throw new Error("Input did not match witnessValue");ore(vre.Satoshi,p),m.value=p}if(!d(m)){var x=function(e,t,r,n){if(r&&n){var a=Xre.p2wsh({redeem:{output:n}}),o=Xre.p2wsh({output:r}),s=Xre.p2sh({redeem:{output:r}}),u=Xre.p2sh({redeem:a});if(!a.hash.equals(o.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!s.hash.equals(u.hash))throw new Error("Redeem script inconsistent with prevOutScript");var c=f(a.redeem.output,t);if(!c.pubkeys)throw new Error(c.type+" not supported as witnessScript ("+Are.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(c.signatures=e.signatures);var l=n;if(c.type===i.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:i.P2WSH,witnessScript:n,witnessScriptType:c.type,prevOutType:i.P2SH,prevOutScript:s.output,hasWitness:!0,signScript:l,signType:c.type,pubkeys:c.pubkeys,signatures:c.signatures,maxSignatures:c.maxSignatures}}if(r){var h=Xre.p2sh({redeem:{output:r}});if(e.prevOutScript){var d;try{d=Xre.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!h.hash.equals(d.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var p=f(h.redeem.output,t);if(!p.pubkeys)throw new Error(p.type+" not supported as redeemScript ("+Are.toASM(r)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(p.signatures=e.signatures);var v=r;return p.type===i.P2WPKH&&(v=Xre.p2pkh({pubkey:p.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:p.type,prevOutType:i.P2SH,prevOutScript:h.output,hasWitness:p.type===i.P2WPKH,signScript:v,signType:p.type,pubkeys:p.pubkeys,signatures:p.signatures,maxSignatures:p.maxSignatures}}if(n){var y=Xre.p2wsh({redeem:{output:n}});if(e.prevOutScript){var g=Xre.p2wsh({output:e.prevOutScript});if(!y.hash.equals(g.hash))throw new Error("Witness script inconsistent with prevOutScript")}var b=f(y.redeem.output,t);if(!b.pubkeys)throw new Error(b.type+" not supported as witnessScript ("+Are.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(b.signatures=e.signatures);var m=n;if(b.type===i.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:b.type,prevOutType:i.P2WSH,prevOutScript:y.output,hasWitness:!0,signScript:m,signType:b.type,pubkeys:b.pubkeys,signatures:b.signatures,maxSignatures:b.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===i.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===i.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");var w=f(e.prevOutScript,t);if(!w.pubkeys)throw new Error(w.type+" not supported ("+Are.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(w.signatures=e.signatures);var x=e.prevOutScript;return w.type===i.P2WPKH&&(x=Xre.p2pkh({pubkey:w.pubkeys[0]}).output),{prevOutType:w.type,prevOutScript:e.prevOutScript,hasWitness:w.type===i.P2WPKH,signScript:x,signType:w.type,pubkeys:w.pubkeys,signatures:w.signatures,maxSignatures:w.maxSignatures}}var _=Xre.p2pkh({pubkey:t}).output;return{prevOutType:i.P2PKH,prevOutScript:_,hasWitness:!1,signScript:_,signType:i.P2PKH,pubkeys:[t],signatures:[void 0]}}(m,w,l,v);Object.assign(m,x)}if(!d(m))throw Error(m.prevOutType+" not supported")}return{input:m,ourPubKey:w,keyPair:c,signatureHash:m.hasWitness?a.hashForWitnessV0(g,m.signScript,m.value,h):a.hashForSignature(g,m.signScript,h),hashType:h,useLowR:!!y}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,n,a,s,c,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(e,t,r){if(ine.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=l(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var a;if(!i.pubkeys&&!i.signatures){var o=f(r.prevOutScript);o.pubkeys&&(i.pubkeys=o.pubkeys,i.signatures=o.signatures),a=o.type}i.prevOutScript=r.prevOutScript,i.prevOutType=a||Yne.output(r.prevOutScript)}var s=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[s]=i,this.__PREV_TX_SET[n]=!0,s}},{key:"__build",value:function(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var t=this.__TX.clone();if(this.__INPUTS.forEach((function(r,n){if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");var a=h(r.prevOutType,r,e);if(a)t.setInputScript(n,a.input),t.setWitness(n,a.witness);else{if(!e&&r.prevOutType===i.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every((function(e){return!e.signatures||e.signatures.every((function(e){return!e||0!=(p(e)&ine.Transaction.SIGHASH_ANYONECANPAY)}))}))}},{key:"__needsOutputs",value:function(e){return e===ine.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return!!e&&!(p(e)&ine.Transaction.SIGHASH_NONE)}))}))}},{key:"__canModifyOutputs",value:function(){var e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&p(r);return n===ine.Transaction.SIGHASH_NONE||n===ine.Transaction.SIGHASH_SINGLE&&e<=t}))}))}},{key:"__overMaximumFees",value:function(e){return(this.__INPUTS.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.__TX.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(t,r){var n=new e(r);return n.setVersion(t.version),n.setLockTime(t.locktime),t.outs.forEach((function(e){n.addOutput(e.script,e.value)})),t.ins.forEach((function(e){n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),n.__INPUTS.forEach((function(e,r){!function(e,t,r){if(e.redeemScriptType===i.P2MS&&e.redeemScript&&e.pubkeys.length!==e.signatures.length){var n=e.signatures.concat();e.signatures=e.pubkeys.map((function(i){var a,o=Zre.fromPublicKey(i);return n.some((function(i,s){if(!i)return!1;var u=Are.signature.decode(i),c=t.hashForSignature(r,e.redeemScript,u.hashType);return!!o.verify(c,u.signature)&&(n[s]=void 0,a=i,!0)})),a}))}}(e,t,r)})),n}}]),e}();function l(e,t,r,n){if(0===e.length&&0===t.length)return{};if(!r){var a=Yne.input(e,!0),o=Yne.witness(t,!0);a===i.NONSTANDARD&&(a=void 0),o===i.NONSTANDARD&&(o=void 0),r=a||o}switch(r){case i.P2WPKH:var s=Xre.p2wpkh({witness:t}),u=s.output,c=s.pubkey,f=s.signature;return{prevOutScript:u,prevOutType:i.P2WPKH,pubkeys:[c],signatures:[f]};case i.P2PKH:var h=Xre.p2pkh({input:e}),d=h.output,p=h.pubkey,v=h.signature;return{prevOutScript:d,prevOutType:i.P2PKH,pubkeys:[p],signatures:[v]};case i.P2PK:var y=Xre.p2pk({input:e}).signature;return{prevOutType:i.P2PK,pubkeys:[void 0],signatures:[y]};case i.P2MS:var g=Xre.p2ms({input:e,output:n},{allowIncomplete:!0}),b=g.m,m=g.pubkeys,w=g.signatures;return{prevOutType:i.P2MS,pubkeys:m,signatures:w,maxSignatures:b}}if(r===i.P2SH){var x=Xre.p2sh({input:e,witness:t}),_=x.output,k=x.redeem,S=Yne.output(k.output),E=l(k.input,k.witness,S,k.output);return E.prevOutType?{prevOutScript:_,prevOutType:i.P2SH,redeemScript:k.output,redeemScriptType:E.prevOutType,witnessScript:E.witnessScript,witnessScriptType:E.witnessScriptType,pubkeys:E.pubkeys,signatures:E.signatures}:{}}if(r===i.P2WSH){var I,A=Xre.p2wsh({input:e,witness:t}),T=A.output,P=A.redeem,O=Yne.output(P.output);return(I=O===i.P2WPKH?l(P.input,P.witness,O):l(Are.compile(P.witness),[],O,P.output)).prevOutType?{prevOutScript:T,prevOutType:i.P2WSH,witnessScript:P.output,witnessScriptType:I.prevOutType,pubkeys:I.pubkeys,signatures:I.signatures}:{}}return{prevOutType:i.NONSTANDARD,prevOutScript:e}}function f(e,t){ore(vre.Buffer,e);var r=Yne.output(e);switch(r){case i.P2PKH:if(!t)return{type:r};var n=Xre.p2pkh({output:e}).hash,a=Mre.hash160(t);return n.equals(a)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case i.P2WPKH:if(!t)return{type:r};var o=Xre.p2wpkh({output:e}).hash,s=Mre.hash160(t);return o.equals(s)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case i.P2PK:return{type:r,pubkeys:[Xre.p2pk({output:e}).pubkey],signatures:[void 0]};case i.P2MS:var u=Xre.p2ms({output:e});return{type:r,pubkeys:u.pubkeys,signatures:u.pubkeys.map((function(){})),maxSignatures:u.m}}return{type:r}}function h(e,t,r){var a=t.pubkeys||[],o=t.signatures||[];switch(e){case i.P2PKH:if(0===a.length)break;if(0===o.length)break;return Xre.p2pkh({pubkey:a[0],signature:o[0]});case i.P2WPKH:if(0===a.length)break;if(0===o.length)break;return Xre.p2wpkh({pubkey:a[0],signature:o[0]});case i.P2PK:if(0===a.length)break;if(0===o.length)break;return Xre.p2pk({signature:o[0]});case i.P2MS:var s=t.maxSignatures;o=r?o.map((function(e){return e||n.OPS.OP_0})):o.filter((function(e){return e}));var u=!r||s===o.length;return Xre.p2ms({m:s,pubkeys:a,signatures:o},{allowIncomplete:r,validate:u});case i.P2SH:var c=h(t.redeemScriptType,t,r);if(!c)return;return Xre.p2sh({redeem:{output:c.output||t.redeemScript,input:c.input,witness:c.witness}});case i.P2WSH:var l=h(t.witnessScriptType,t,r);if(!l)return;return Xre.p2wsh({redeem:{output:t.witnessScript,input:l.input,witness:l.witness}})}}function d(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function p(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=c}));QK(Zne),Zne.TransactionBuilder;var Qne=eq((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bip32=hre,t.address=$re,t.crypto=Mre,t.ECPair=Zre,t.networks=dre,t.payments=Xre,t.script=Are,t.Block=ane.Block,t.Psbt=Pne.Psbt;var r=Are;t.opcodes=r.OPS,t.Transaction=ine.Transaction,t.TransactionBuilder=Zne.TransactionBuilder}));function eie(e,t,r){var n="",i=function(e,t){var r=null;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&n.toLowerCase()===t.toLowerCase()&&(r=n);return e[r]}(e,t),a=KX(r);if(i?(i.created&&a<=i.created&&(n="invalidIssuingAddressCreationTime"),i.revoked&&a>=i.revoked&&(n="invalidIssuingAddressRevoked"),i.expires&&a>=i.expires&&(n="invalidIssuingAddressExpired")):n="invalidIssuingAddressUnknown",n)throw new $K("checkAuthenticity",KK("errors",n))}QK(Qne),Qne.bitcoin,Qne.bip32,Qne.address,Qne.crypto,Qne.ECPair,Qne.networks,Qne.payments,Qne.script,Qne.Block,Qne.Psbt,Qne.opcodes,Qne.Transaction,Qne.TransactionBuilder;var tie=uX("Verifier"),rie=function(){function e(t){var r=t.certificateJson,n=t.chain,i=t.expires,o=t.id,s=t.issuer,u=t.receipt,c=t.revocationKey,l=t.transactionId,f=t.version,h=t.explorerAPIs;a(this,e),this.chain=n,this.expires=i,this.id=o,this.issuer=s,this.receipt=u,this.revocationKey=c,this.version=f,this.transactionId=l,this.explorerAPIs=h;var d=r.document;d||(d=this._retrieveDocumentBeforeIssuance(r)),this.documentToVerify=Object.assign({},d),this._stepsStatuses=[]}return s(e,[{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return IK(this,void 0,void 0,Wt.mark((function t(){var r;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stepCallback=e,this.version!==TK.V1_1){t.next=2;break}throw new $K("","Verification of 1.1 certificates is not supported by this component. See the python cert-verifier for legacy verification");case 2:if(!WX.chains.isMockChain(this.chain)){t.next=7;break}return t.next=5,this._verifyV2Mock();case 5:t.next=9;break;case 7:return t.next=9,this._verifyMain();case 9:return r=this._stepsStatuses.find((function(e){return"failure"===e.status})),t.abrupt("return",r?this._failed(r):this._succeed());case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_getRevocationListUrl",value:function(e){var t;return(null===(t=this.issuer)||void 0===t?void 0:t.revocationList)?this.issuer.revocationList:e.revocationList}},{key:"_doAction",value:function(e,t){return IK(this,void 0,void 0,Wt.mark((function r(){var n,i;return Wt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._isFailing()){r.next=2;break}return r.abrupt("return");case 2:return e&&(n=WX.i18n.getText("subSteps","".concat(e,"LabelPending")),tie(n),this._updateStatusCallback(e,n,"starting")),r.prev=3,r.next=6,t();case 6:return i=r.sent,r.abrupt("return",(e&&(this._updateStatusCallback(e,n,"success"),this._stepsStatuses.push({step:e,label:n,status:"success"})),i));case 10:r.prev=10,r.t0=r.catch(3),e&&(this._updateStatusCallback(e,n,"failure",r.t0.message),this._stepsStatuses.push({code:e,label:n,status:"failure",errorMessage:r.t0.message}));case 13:case"end":return r.stop()}}),r,this,[[3,10]])})))}},{key:"_stepCallback",value:function(e){}},{key:"_verifyMain",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransactionId();case 2:return e.next=4,this.computeLocalHash();case 4:return e.next=6,this.fetchRemoteHash();case 6:return e.next=8,this.getIssuerProfile();case 8:return e.next=10,this.parseIssuerKeys();case 10:return e.next=12,this.compareHashes();case 12:return e.next=14,this.checkMerkleRoot();case 14:return e.next=16,this.checkReceipt();case 16:return e.next=18,this.checkRevokedStatus();case 18:return e.next=20,this.checkAuthenticity();case 20:return e.next=22,this.checkExpiresDate();case 22:case"end":return e.stop()}}),e,this)})))}},{key:"_verifyV2Mock",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.computeLocalHash();case 2:return e.next=4,this.compareHashes();case 4:return e.next=6,this.checkReceipt();case 6:return e.next=8,this.checkExpiresDate();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getTransactionId",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("getTransactionId",(function(){return function(e){if("string"==typeof e&&e.length>0)return e;throw new $K("getTransactionId",KK("errors","isTransactionIdValid"))}(t.transactionId)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"computeLocalHash",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("computeLocalHash",(function(){return IK(t,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x3(this.documentToVerify,this.version);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 2:this.localHash=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"fetchRemoteHash",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("fetchRemoteHash",(function(){return IK(t,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WX.verifier.lookForTx({transactionId:this.transactionId,chain:this.chain.code,explorerAPIs:this.explorerAPIs});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 2:this.txData=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getIssuerProfile",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("getIssuerProfile",(function(){return IK(t,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WX.verifier.getIssuerProfile(this.issuer);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 2:this.issuer=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"parseIssuerKeys",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("parseIssuerKeys",(function(){return WX.verifier.parseIssuerKeys(t.issuer)}));case 2:this.issuerPublicKeyList=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"compareHashes",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("compareHashes",(function(){!function(e,t){if(e!==t)throw new $K("compareHashes",KK("errors","ensureHashesEqual"))}(t.localHash,t.receipt.targetHash)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"checkMerkleRoot",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("checkMerkleRoot",(function(){return function(e,t){if(e!==t)throw new $K("checkMerkleRoot",KK("errors","ensureMerkleRootEqual"));return!0}(t.receipt.merkleRoot,t.txData.remoteHash)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"checkReceipt",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("checkReceipt",(function(){return function(e){var t=e.targetHash,r=e.merkleRoot;try{var n=e.proof||e.path;if(n)for(var i in n){var a=n[i],o=void 0;if(void 0!==a.left)o=w3("".concat(a.left).concat(t)),t=m3(o);else{if(void 0===a.right)throw new $K("checkReceipt","Trigger catch error.");o=w3("".concat(t).concat(a.right)),t=m3(o)}}}catch(e){throw new $K("checkReceipt",KK("errors","ensureValidReceipt"))}if(t!==r)throw new $K("checkReceipt",KK("errors","invalidMerkleReceipt"))}(t.receipt)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"checkRevokedStatus",value:function(){var e;return IK(this,void 0,void 0,Wt.mark((function t(){var r,n,i=this;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.version!==TK.V1_2){t.next=4;break}n=(null===(e=this.txData)||void 0===e?void 0:e.revokedAddresses)||[],r=[WX.verifier.parseRevocationKey(this.issuer),this.revocationKey],t.next=8;break;case 4:return t.next=6,this._doAction(null,(function(){return IK(i,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WX.verifier.getRevokedAssertions(this._getRevocationListUrl(this.issuer),this.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 6:n=t.sent,r=this.id;case 8:return t.next=10,this._doAction("checkRevokedStatus",(function(){return function(e,t){if(e&&t){Array.isArray(t)||(t=[t]);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((function(e){return-1!==t.indexOf(e)})).filter((function(e,t,r){return r.indexOf(e)===t}))}(t=t.filter((function(e){return null!=e})),e.map((function(e){return e.id})));if(r.length>0){var n=e.findIndex((function(e){return e.id===r[0]}));if(n>-1)throw new $K("checkRevokedStatus",WX.certificates.generateRevocationReason(e[n].revocationReason))}}}(n,r)}));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"checkAuthenticity",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("checkAuthenticity",(function(){return eie(t.issuerPublicKeyList,t.txData.issuingAddress,t.txData.time)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"checkExpiresDate",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){var t=this;return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doAction("checkExpiresDate",(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=KX(e);if(new Date>=t)throw new $K("checkExpiresDate",KK("errors","ensureNotExpired"))}}(t.expires)}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"_failed",value:function(e){var t=e.errorMessage;return tie("failure:".concat(t)),this._setFinalStep({status:"failure",message:t})}},{key:"_isFailing",value:function(){return this._stepsStatuses.some((function(e){return"failure"===e.status}))}},{key:"_retrieveDocumentBeforeIssuance",value:function(e){var t=Object.assign({},e);return delete t.signature,t}},{key:"_succeed",value:function(){var e=WX.chains.isMockChain(this.chain)?WX.i18n.getText("success","mocknet"):WX.i18n.getText("success","blockchain");return tie(e),this._setFinalStep({status:"success",message:e})}},{key:"_setFinalStep",value:function(e){return{code:"final",status:e.status,message:e.message}}},{key:"_updateStatusCallback",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(null!=e){var i={code:e,label:t,status:r};n&&(i.errorMessage=n),this._stepCallback(i)}}}]),e}(),nie=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,e),this.explorerAPIs=[],this._setOptions(n),"object"!=r(t))try{t=JSON.parse(t)}catch(t){throw new Error(WX.i18n.getText("errors","certificateNotValid"))}this.certificateJson=nq(t)}return s(e,[{key:"init",value:function(){return IK(this,void 0,void 0,Wt.mark((function e(){return Wt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parseJson(this.certificateJson);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"parseJson",value:function(e){return IK(this,void 0,void 0,Wt.mark((function t(){var r;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JX(e);case 2:if((r=t.sent).isFormatValid){t.next=5;break}throw new Error(r.error);case 5:this._setProperties(r);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"verify",value:function(e){return IK(this,void 0,void 0,Wt.mark((function t(){var r;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new rie({certificateJson:this.certificateJson,chain:this.chain,expires:this.expires,id:this.id,issuer:this.issuer,receipt:this.receipt,revocationKey:this.revocationKey,transactionId:this.transactionId,version:this.version,explorerAPIs:nq(this.explorerAPIs)}),t.next=3,r.verify(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"_setOptions",value:function(e){this.options=Object.assign({},zK,e),this.locale=WX.i18n.ensureIsSupported("auto"===this.options.locale?WX.i18n.detectLocale():this.options.locale),this.explorerAPIs=this.options.explorerAPIs||[],VK.locale=this.locale}},{key:"_setProperties",value:function(e){var t=e.certificateImage,r=e.chain,n=e.description,i=e.expires,a=e.id,o=e.isFormatValid,s=e.issuedOn,u=e.issuer,c=e.metadataJson,l=e.name,f=e.publicKey,h=e.receipt,d=e.recipientFullName,p=e.recordLink,v=e.revocationKey,y=e.sealImage,g=e.signature,b=e.signatureImage,m=e.subtitle,w=e.version;this.isFormatValid=o,this.certificateImage=t,this.chain=r,this.description=n,this.expires=i,this.id=a,this.issuedOn=s,this.issuer=u,this.metadataJson=c,this.name=l,this.publicKey=f,this.receipt=h,this.recipientFullName=d,this.recordLink=p,this.revocationKey=v,this.sealImage=y,this.signature=g,this.signatureImage=b,this.subtitle=m,this.verificationSteps=WX.certificates.getVerificationMap(r),this.version=w,this._setTransactionDetails()}},{key:"_setTransactionDetails",value:function(){this.transactionId=WX.certificates.getTransactionId(this.receipt),this.rawTransactionLink=WX.certificates.getTransactionLink(this.transactionId,this.chain,!0),this.transactionLink=WX.certificates.getTransactionLink(this.transactionId,this.chain)}}]),e}();var iie=Object.freeze({__proto__:null,displayHtmlHasNoWidthConstraint:function(e){const t=(new DOMParser).parseFromString(e,"text/html");return t.body.childElementCount===t.body.querySelectorAll(Ft.map((e=>`section[class*="${e}"]`)).join(", ")).length},download:function(e){return e+zt},initializeVerificationSteps:function(e){const t=JSON.parse(JSON.stringify(e.verificationSteps));return t.map(((e,r)=>({...e,isLast:r===t.length-1,status:Cf.DEFAULT})))},retrieve:function(e){return vK(e)||yK(e)?fetch(e+zt).then((function(e){return e.text()})).then((function(e){try{return{certificateDefinition:JSON.parse(e)}}catch(e){return console.log(e),{certificateDefinition:null,errorMessage:"errors.invalidBlockcertsUrl"}}})).catch(gK):(console.error("Invalid url to retrieve:",e),null)},read:function(e){return mK.apply(this,arguments)},parse:async function(e,t={}){t.locale||(t.locale="auto");try{let r;return r=1===zf(e["@context"]).versionNumber?new nie(e,t):new pK(e,t),await r.init(),{certificateDefinition:r}}catch(e){return console.error(e),{certificateDefinition:null,errorMessage:"errors.invalidBlockcerts"}}},isPathToCertificateValidURI:function(e){return vK(e)||yK(e)}});var aie=Object.freeze({__proto__:null,dispatch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;if(e&&"string"==typeof e&&n&&"object"===r(n)){var a=new CustomEvent(e,{detail:t({certificateDefinition:n},i)});window.dispatchEvent(a)}}}),oie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!window.Proxy){var t=Bt();return new t(e,Ut)}return new Proxy(e,Ut)}({certificates:iie,events:aie});function sie(e,t){return e(t={exports:{}},t.exports),t.exports}function uie(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var cie=/javascript\s*\:/gim;var lie={whiteList:uie(),getDefaultWhiteList:uie,onAttr:function(e,t,r){},onIgnoreAttr:function(e,t,r){},safeAttrValue:function(e,t){return cie.test(t)?"":t}},fie=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},hie=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")};var die=function(e,t){";"!==(e=hie(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,i=0,a=0,o="";function s(){if(!n){var r=fie(e.slice(i,a)),s=r.indexOf(":");if(-1!==s){var u=fie(r.slice(0,s)),c=fie(r.slice(s+1));if(u){var l=t(i,o.length,u,c,r);l&&(o+=l+"; ")}}}i=a+1}for(;a<r;a++){var u=e[a];if("/"===u&&"*"===e[a+1]){var c=e.indexOf("*/",a+2);if(-1===c)break;i=(a=c+1)+1,n=!1}else"("===u?n=!0:")"===u?n=!1:";"===u?n||s():"\n"===u&&s()}return fie(o)};function pie(e){return null==e}function vie(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.whiteList=e.whiteList||lie.whiteList,e.onAttr=e.onAttr||lie.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||lie.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||lie.safeAttrValue,this.options=e}vie.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,i=t.onIgnoreAttr,a=t.safeAttrValue;return die(e,(function(e,t,o,s,u){var c=r[o],l=!1;if(!0===c?l=c:"function"==typeof c?l=c(s):c instanceof RegExp&&(l=c.test(s)),!0!==l&&(l=!1),s=a(o,s)){var f,h={position:t,sourcePosition:e,source:u,isWhite:l};return l?pie(f=n(o,s,h))?o+":"+s:f:pie(f=i(o,s,h))?void 0:f}}))};var yie=vie,gie=sie((function(e,t){for(var r in t=e.exports=function(e,t){return new yie(t).process(e)},t.FilterCSS=yie,lie)t[r]=lie[r];"undefined"!=typeof window&&(window.filterCSS=e.exports)}));gie.cssfilter,gie.FilterCSS;var bie=function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},mie=function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},wie=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},xie=function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},_ie=gie.FilterCSS,kie=gie.getDefaultWhiteList;function Sie(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Eie=new _ie;function Iie(e){return e.replace(Aie,"&lt;").replace(Tie,"&gt;")}var Aie=/</g,Tie=/>/g,Pie=/"/g,Oie=/&quot;/g,Cie=/&#([a-zA-Z0-9]*);?/gim,Mie=/&colon;?/gim,Nie=/&newline;?/gim,Rie=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Lie=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,jie=/u\s*r\s*l\s*\(.*/gi;function Die(e){return e.replace(Pie,"&quot;")}function Bie(e){return e.replace(Oie,'"')}function Uie(e){return e.replace(Cie,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Fie(e){return e.replace(Mie,":").replace(Nie," ")}function zie(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return wie(t)}function Hie(e){return e=zie(e=Fie(e=Uie(e=Bie(e))))}function Vie(e){return e=Iie(e=Die(e))}var Kie=function(e,t,r,n){if(r=Hie(r),"href"===t||"src"===t){if("#"===(r=wie(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(Rie.lastIndex=0,Rie.test(r))return""}else if("style"===t){if(Lie.lastIndex=0,Lie.test(r))return"";if(jie.lastIndex=0,jie.test(r)&&(Rie.lastIndex=0,Rie.test(r)))return"";!1!==n&&(r=(n=n||Eie).process(r))}return r=Vie(r)},qie=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],i=!1;return{onIgnoreTag:function(a,o,s){if(function(t){return!!r||-1!==bie(e,t)}(a)){if(s.isClosing){var u="[/removed]",c=s.position+u.length;return n.push([!1!==i?i:s.position,c]),i=!1,u}return i||(i=s.position),"[removed]"}return t(a,o,s)},remove:function(e){var t="",r=0;return mie(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},Wie=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("--\x3e",n);if(-1===i)break;r=i+3}return t},Gie=function(e){var t=e.split("");return t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))})),t.join("")},Jie={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},getDefaultWhiteList:Sie,onTag:function(e,t,r){},onIgnoreTag:function(e,t,r){},onTagAttr:function(e,t,r){},onIgnoreTagAttr:function(e,t,r){},safeAttrValue:Kie,escapeHtml:Iie,escapeQuote:Die,unescapeQuote:Bie,escapeHtmlEntities:Uie,escapeDangerHtml5Entities:Fie,clearNonPrintableCharacter:zie,friendlyAttrValue:Hie,escapeAttrValue:Vie,onIgnoreTagStripAll:function(){return""},StripTagBody:qie,stripCommentTag:Wie,stripBlankChar:Gie,cssFilter:Eie,getDefaultCSSWhiteList:kie};function Xie(e){var t=xie(e);if(-1===t)var r=e.slice(1,-1);else r=e.slice(1,t+1);return"/"===(r=wie(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function $ie(e){return"</"===e.slice(0,2)}var Yie=/[^a-zA-Z0-9_:\.\-]/gim;function Zie(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Qie(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function eae(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}var tae=function(e,t,r){var n="",i=0,a=!1,o=!1,s=0,u=e.length,c="",l="";e:for(s=0;s<u;s++){var f=e.charAt(s);if(!1===a){if("<"===f){a=s;continue}}else if(!1===o){if("<"===f){n+=r(e.slice(i,s)),a=s,i=s;continue}if(">"===f){n+=r(e.slice(i,a)),c=Xie(l=e.slice(a,s+1)),n+=t(a,n.length,c,l,$ie(l)),i=s+1,a=!1;continue}if('"'===f||"'"===f)for(var h=1,d=e.charAt(s-h);""===d.trim()||"="===d;){if("="===d){o=f;continue e}d=e.charAt(s-++h)}}else if(f===o){o=!1;continue}}return i<e.length&&(n+=r(e.substr(i))),n},rae=function(e,t){var r=0,n=[],i=!1,a=e.length;function o(e,r){if(!((e=(e=wie(e)).replace(Yie,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&n.push(i)}}for(var s=0;s<a;s++){var u,c=e.charAt(s);if(!1!==i||"="!==c)if(!1===i||s!==r||'"'!==c&&"'"!==c||"="!==e.charAt(s-1))if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(u=Zie(e,s))){o(wie(e.slice(r,s))),i=!1,r=s+1;continue}s=u-1;continue}if(-1===(u=Qie(e,s-1))){o(i,eae(wie(e.slice(r,s)))),i=!1,r=s+1;continue}}else;else{if(-1===(u=e.indexOf(c,s+1)))break;o(i,wie(e.slice(r+1,u))),i=!1,r=(s=u)+1}else i=e.slice(r,s),r=s+1}return r<e.length&&(!1===i?o(e.slice(r)):o(i,eae(wie(e.slice(r))))),wie(n.join(" "))},nae={parseTag:tae,parseAttr:rae},iae=gie.FilterCSS,aae=nae.parseTag,oae=nae.parseAttr;function sae(e){return null==e}function uae(e){e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Jie.onIgnoreTagStripAll),e.whiteList=e.whiteList||Jie.whiteList,e.onTag=e.onTag||Jie.onTag,e.onTagAttr=e.onTagAttr||Jie.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Jie.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Jie.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Jie.safeAttrValue,e.escapeHtml=e.escapeHtml||Jie.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new iae(e.css))}uae.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,i=t.onIgnoreTag,a=t.onTagAttr,o=t.onIgnoreTagAttr,s=t.safeAttrValue,u=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Jie.stripBlankChar(e)),t.allowCommentTag||(e=Jie.stripCommentTag(e));var l=!1;if(t.stripIgnoreTagBody){l=Jie.StripTagBody(t.stripIgnoreTagBody,i);i=l.onIgnoreTag}var f=aae(e,(function(e,t,l,f,h){var d,p={sourcePosition:e,position:t,isClosing:h,isWhite:r.hasOwnProperty(l)};if(!sae(d=n(l,f,p)))return d;if(p.isWhite){if(p.isClosing)return"</"+l+">";var v=function(e){var t=xie(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=wie(e.slice(t+1,-1)))[e.length-1];return r&&(e=wie(e.slice(0,-1))),{html:e,closing:r}}(f),y=r[l],g=oae(v.html,(function(e,t){var r,n=-1!==bie(y,e);return sae(r=a(l,e,t,n))?n?(t=s(l,e,t,c))?e+'="'+t+'"':e:sae(r=o(l,e,t,n))?void 0:r:r}));f="<"+l;return g&&(f+=" "+g),v.closing&&(f+=" /"),f+=">"}return sae(d=i(l,f,p))?u(f):d}),u);return l&&(f=l.remove(f)),f};var cae=uae,lae=sie((function(e,t){function r(e,t){return new cae(t).process(e)}for(var n in(t=e.exports=r).filterXSS=r,t.FilterXSS=cae,Jie)t[n]=Jie[n];for(var n in nae)t[n]=nae[n];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}));lae.xss,lae.filterXSS,lae.FilterXSS;var fae=t(t({},gie.getDefaultWhiteList()),{},{bottom:!0,left:!0,float:!0,overflow:!0,position:!0,right:!0,top:!0,transform:!0,opacity:!0,"transform-origin":!0,"flex-direction":!0,"flex-wrap":!0,"justify-content":!0,"align-items":!0,"white-space":!0,"line-height":!0,"grid-template-columns":!0,"grid-template-rows":!0,"grid-column":!0,"grid-row":!0,"grid-area":!0,"align-self":!0,"justify-self":!0,span:!0});var hae=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,dae=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,pae=/u\s*r\s*l\s*\(.*/gi,vae={whiteList:function(){var e=lae.getDefaultWhiteList();return Object.keys(e).forEach((function(t){e[t].push("style"),e[t].push("class"),e[t].push("download")})),e}(),css:!1,stripIgnoreTagBody:!0,onTagAttr:function(e,t,r,n){if("style"===t)return"".concat(t,'="').concat(gie(r,{whiteList:fae}).replace(/; /g,";"),'"');if("img"===e&&"src"===t&&function(e){return!!e.match(/^data:.+;base64,/)}(r)){var i=function(e){return e.split("base64,")[1]}(r);try{return atob(i),"".concat(t,'="').concat(r,'"')}catch(e){return t}}},safeAttrValue:function(e,t,r,n){if(r=lae.friendlyAttrValue(r),"href"===t||"src"===t){if("#"===(r=function(e){if(String.prototype.trim)return e.trim();return e.replace(/(^\s*)|(\s*$)/g,"")}(r)))return"#";if(!function(e){return["http://","https://","mailto:","tel:","data:","#","/"].some((function(t){return e.substr(0,t.length)===t}))}(r))return""}else if("background"===t){if(hae.lastIndex=0,hae.test(r))return""}else if("style"===t){if(dae.lastIndex=0,dae.test(r))return"";if(pae.lastIndex=0,pae.test(r)&&(hae.lastIndex=0,hae.test(r)))return"";!1!==n&&(r=(n=n||lae.getDefaultCSSWhiteList()).process(r))}return r=lae.escapeAttrValue(r)}},yae=new lae.FilterXSS(vae);function gae(e){return yae.process(e)}var bae="en";var mae={locale:bae},wae={en:{errors:{errorLabel:"Error",invalidBlockcerts:"Not a valid Blockcerts credential. Please check with the issuer or recipient that has provided this credential.",invalidBlockcertsUrl:"Not a valid credential URL.",invalidFormatDragAndDrop:"Only JSON files are accepted",invalidUrl:"This does not seem to be a valid URL.",noIssuerName:"No name provided",noMetadata:"No metadata specified for this record",noShareUrl:"No URL to share!",noTransactionId:"No transaction ID"},text:{brandName:"Blockcerts",blockcertsHint:"Visit Blockcerts website",by:"by",certified:"Certified by",closeButton:"Click to close",downloadLink:"Download Record in JSON format",dragAndDropHint:"(you can also drag & drop your file).",fileUpload:"Choose JSON file",issued:"Issued on",issueDate:"Issue Date",issuerName:"Issuer",issuerPublicKey:"Issuer's public key",issuerProfileDomain:"Issuer's information",item:"Item",itemPlural:"Items",metadataButton:"View Metadata",metadataTitle:"Metadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Recipient",share:"Share on",shareButton:"Share on Social Networks",signatureSuiteType:"Digital signature type",signatureStatusSuccess:"This signature has been successfully verified",signatureStatusTestSuccess:"This signature has been successfully verified but has been issued on a test chain",signatureStatusFailure:"This signature yielded an error during verification",signed:"Signed by",substepsListClose:"Hide",substepsListHint:"Toggle open list of substeps",transactionId:"Transaction ID",urlInput:"Enter the certificate URL",urlInputPlaceholder:"Certificate URL",verificationStepProgress:"Verifying step...",verify:"Verify",verifyAgain:"Verify again",verifyOther:"Verify another record",viewRecord:"View Record"},date:{months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],pattern:"MM DD, YYYY"},numbers:{ordinal:["th","st","nd","rd"]}},es:{errors:{errorLabel:"Error",invalidBlockcerts:"No es una credencial vlida de Blockcerts. Verifique con el emisor o el destinatario que ha proporcionado esta credencial.",invalidBlockcertsUrl:"No es URL de certificado valido.",invalidFormatDragAndDrop:"Solo se aceptan archivos JSON",invalidUrl:"Esto no parece ser un URL vlido.",noIssuerName:"No nombre comunicado",noMetadata:"No se han especificado metadatos para este registro",noShareUrl:"No hay URL para compartir!",noTransactionId:"No ID de transaccin"},text:{brandName:"Blockcerts",blockcertsHint:"Visite el sitio web de Blockcerts",by:"por",certified:"Certificado por",closeButton:"Haz Click para cerrar",downloadLink:"Descarga el Registro en formato JSON",dragAndDropHint:"(tambin puedes arrastrar y soltar tu archivo).",fileUpload:"Escoge archivo JSON",issued:"Emitido el",issueDate:"Fecha de Emisin",issuerName:"Emisor",issuerPublicKey:"Llave publica del Emisor",issuerProfileDomain:"Informacin del Emisor",item:"Elemento",itemPlural:"Elementos",metadataButton:"Ver Metadata",metadataTitle:"Metadata",motto:"Blockcerts, El Estndar Abierto para Credenciales Blockchain",recipient:"Recipiente",share:"Comparte en",shareButton:"Comparte en Redes Sociales",signatureSuiteType:"Tipo de firma digital",signed:"Firmado Por",signatureStatusSuccess:"La verificacin de esta firma digital ha tenido xito",signatureStatusTestSuccess:"La verificacin de esta firma digital ha tenido xito pero se utiliz una cadena de test",signatureStatusFailure:"Error en la verificacin de esta firma digital",substepsListClose:"Esconde",substepsListHint:"Pasa lista abierta de sub-pasos",transactionId:"ID de Transaccin",urlInput:"Ingrese el URL del certificado",urlInputPlaceholder:"Certificado del URL",verificationStepProgress:"Paso de verificacin...",verify:"Verifica",verifyAgain:"Verifica nuevamente",verifyOther:"Verifica otro registro",viewRecord:"Ver Registro"},date:{months:["enero","feb","marzo","abr","mayo","jun","jul","agosto","set","oct","nov","dic"],pattern:"MM DD, YYYY"},numbers:{ordinal:""}},fr:{errors:{errorLabel:"Erreur",invalidBlockcerts:"Ceci n'est pas un certificat Blockcerts valide. Veuillez s'il vous plat contrler avec l'organisme metteur ou le rcipiendaire de ce certificat.",invalidBlockcertsUrl:"Ceci n'est pas une URL de certificat valide.",invalidFormatDragAndDrop:"Seul le format JSON est accept",invalidUrl:"URL invalide",noIssuerName:"Pas de nom fourni",noMetadata:"Ce certificat ne contient pas de mtadata",noShareUrl:"Pas d'URL  partager!",noTransactionId:"Pas d'identifiant de transaction"},text:{brandName:"Blockcerts",blockcertsHint:"Visiter le site de Blockcerts",by:"par",certified:"Certifi par",closeButton:"Cliquer pour fermer",downloadLink:"Tlcharger le certificat au format JSON",dragAndDropHint:"(vous pouvez aussi glisser et dposer votre fichier).",fileUpload:"Choisir un fichier JSON",issued:"mis le",issueDate:"Date d'mission",issuerName:"metteur",issuerPublicKey:"Cl publique de l'metteur",issuerProfileDomain:"Profil de l'metteur",item:"point contrl",itemPlural:"points contrls",metadataButton:"Voir les mtadata",metadataTitle:"Mtadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Titulaire",share:"Partager sur",shareButton:"Partager sur les rseaux sociaux",signatureSuiteType:"Type de signature numrique",signed:"Sign par",signatureStatusSuccess:"Cette signature a t vrifie avec succs",signatureStatusTestSuccess:"Cette signature a t vrifie avec succs mais la blockchain utilise est de test",signatureStatusFailure:"Erreur durant la vrification de cette signature",substepsListClose:"Fermer",substepsListHint:"Afficher les sous-tapes",transactionId:"Identifiant de transaction",urlInput:"Entrez l'URL du certificat",urlInputPlaceholder:"URL du certificat",verificationStepProgress:"Vrification en cours...",verify:"Vrifier",verifyAgain:"Vrifier de nouveau",verifyOther:"Vrifier un autre certificat",viewRecord:"Voir le certificat"},date:{months:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Aout","Sept","Oct","Nov","Dc"],pattern:"DD MM YYYY"},numbers:{ordinal:["me","er"]}},it:{errors:{errorLabel:"Errore",invalidBlockcerts:"Non  una definizione valida di Blockcerts.",invalidBlockcertsUrl:"Non  un URL di certificato valido.",invalidFormatDragAndDrop:"Sono accettati solo file JSON",invalidUrl:"Questo non sembra essere un URL valido.",noIssuerName:"No name provided",noMetadata:"Nessun Metadata specificato per questo record",noShareUrl:"Non c' un URL da condividere!",noTransactionId:"Nessun ID transazione"},text:{brandName:"Blockcerts",blockcertsHint:"Visita il sito Web Blockcerts",by:"da",certified:"Certificato da",closeButton:"Fai clic per chiudere",downloadLink:"Scarica il Record in formato JSON",dragAndDropHint:"(puoi anche trascinare il file).",fileUpload:"Scegli il file JSON",issued:"Rilasciato il",issueDate:"Data",issuerName:"Organizzazione Issuer",issuerPublicKey:"Chiave pubblica del Issuer",issuerProfileDomain:"Informazzione del Issuer",item:"Elemento",itemPlural:"Elementi",metadataButton:"Visualizza Metadata",metadataTitle:"Metadata",motto:"Blockcerts, The Open Standard for Blockchain Credentials",recipient:"Titolare",share:"Condividi",shareButton:"Condividi sui Social Network",signed:"Firmato da",signatureStatusSuccess:"This signature has been successfully verified",signatureStatusTestSuccess:"This signature has been successfully verified but has been issued on a test chain",signatureStatusFailure:"This signature yielded an error during verification",signatureSuiteType:"Digital signature type",substepsListClose:"Nascondi",substepsListHint:"Mostra gli step secondari",transactionId:"ID transazione",urlInput:"Inserisci l'URL del certificato",urlInputPlaceholder:"URL del certificato",verificationStepProgress:"Step di verifica...",verify:"Verifica",verifyAgain:"Verifica di nuovo",verifyOther:"Verifica un altro record",viewRecord:"Visualizza il Record"},date:{months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],pattern:"DD MM YYYY"},numbers:{ordinal:""}}};function xae(){return wae}function _ae(e,t,r,n){if(!e)return"";if(e.includes(".")){const r=e.split(".");e=r[0],t=r[1]}if(!t)return"";r&&n>1&&(t+="Plural");const i=xae();return i[mae.locale]?i[mae.locale][e]?i[mae.locale][e][t]?i[mae.locale][e][t]||"":"[missing locale item data]":"[missing locale group data]":"[missing locale data]"}function kae(e){const t=_ae("date","pattern");"Z"===e.slice(-1)?e=e.slice(0,e.length-1):e.includes("+")&&(e=e.split("+")[0]);const r=new Date(e);let n=function(e,t){const r=_ae("date","months");return e.replace("MM",r[t])}(t,r.getMonth());return n=function(e,t){return e.replace("DD",t)}(n,r.getDate().toString(10)),n=function(e,t){return e.replace("YYYY",t)}(n,r.getFullYear().toString(10)),n}function Sae(e){return e.certificateDefinition}function Eae(e){const t=Sae(e);return t?t.signers:[]}function Iae(e){const t=Sae(e);return t?t.issuedOn:""}function Aae(e){return Sae(e)?kae(Iae(e)):""}function Tae(e){const t=Sae(e);return t?t.recipientFullName:""}function Pae(e){const t=Sae(e);return t?t.name:""}function Oae(e){const t=Sae(e);return t?t.issuer.name:""}function Cae(e){const t=Sae(e);return t?t.issuer.image:""}function Mae(e){const t=Sae(e);if(!t)return"";const{displayHtml:r}=t.certificateJson;if(r)return gae(r);const n=t.display;if(n)switch(n.contentMediaType){case"text/html":return gae(n.content);case"image/png":case"image/jpeg":case"image/gif":case"image/bmp":return`<img src="data:${n.contentMediaType};${n.contentEncoding},${n.content}"/>`;case"application/pdf":return`<embed width="100%" height="100%" type="application/pdf" src="data:${n.contentMediaType};${n.contentEncoding},${n.content}"/>`;default:return""}return""}function Nae(e){const t=Sae(e);return t&&vK(t.recordLink)?t.recordLink:""}function Rae(e){const t=Nae(e);return t?oie.certificates.download(t):""}function Lae(e){const t=Sae(e);if(t)try{return JSON.parse(t.metadataJson)}catch(e){return null}return null}function jae(e){const t=Eae(e);return 0===t.length?Xae(e,"transactionLink")??[]:t.map((e=>e.transactionLink))}function Dae(e){const t=Eae(e);return 0===t.length?Xae(e,"transactionId")??[]:t.map((e=>e.transactionId))}function Bae(e){const t=Eae(e);if(0===t.length){const t=Xae(e,"chain");return t?t.map((e=>e?.name)):[]}return t.map((e=>e.chain?.name))}function Uae(e){return Bae(e).some((e=>"Mocknet"===e||e?.includes("Testnet")))}function Fae(e,t){const r=Bae(e)[t];return!!r&&("Mocknet"===r||r.includes("Testnet"))}function zae(e){return e.verifiedSteps||[]}function Hae(e,t){return zae(e).find((e=>e.code===t))}function Vae(e){return zae(e).some((e=>e.status===Cf.FAILURE))}function Kae(e){return e.finalStep}function qae(e){return Eae(e).map((e=>e.issuerPublicKey))}function Wae(e){return Eae(e).map((e=>e.issuerProfileUrl))}function Gae(e){return Eae(e).map((e=>e.issuerProfileDomain))}function Jae(e){return Eae(e).map((e=>e.signatureSuiteType))}function Xae(e,t){const r=Sae(e);return r?[r[t]]:null}function $ae(e){const t=Sae(e);return t?t.certificateImage:""}function Yae(e){const t=Sae(e);return t?t.subtitle:""}function Zae(e){const t=Sae(e);return t?t.description:""}function Qae(e){const t=Sae(e);return t?t.signatureImage:""}function eoe(e){const t=Sae(e);return t?t.sealImage:""}function toe(e,r){switch(r.type){case Ct:return function(e,r){var n=r.payload.resetSteps;return t(t({},e),{},{verifiedSteps:n})}(e,r);case It:return function(e,r){return t(t({},e),r.payload.options)}(e,r);case At:return function(e,r){return t(t(t({},e),r.payload),r.payload.certificateDefinition&&{verifiedSteps:oie.certificates.initializeVerificationSteps(r.payload.certificateDefinition)})}(e,r);case Tt:return function(e,r){return t(t({},e),{},{certificateDefinition:r.payload.definition})}(e,r);case Pt:return function(e,r){return t(t({},e),{},{input:t(t({},e.input),{},{certificateUrl:r.payload.url})})}(e,r);case Nt:return function(e,t){var r=t.payload,n=r.parentStepCode,i=r.status;return Hae(e,n).status=i,e}(e,r);case Ot:return function(e,r){return t(t({},e),{},{input:t(t({},e.input),{},{isValid:r.payload.isValid})})}(e,r);case jt:return function(e,r){var n=r.payload.errorMessage;return t(t({},e),{},{errorMessage:n})}(e,r);case Dt:return function(e,r){return t(t({},e),{},{showVerificationModal:r.payload.showVerificationModal})}(e,r);case Mt:return function(e,t){const{parentStep:r}=t.payload;return function(e,t){let r=e.subSteps.findIndex((e=>e.code===t.code));r>-1?e.subSteps[r]=t:e.suites?.length&&e.suites.forEach((e=>{r=e.subSteps.findIndex((e=>e.code===t.code)),r>-1&&(e.subSteps[r]=t)}))}(Hae(e,r),t.payload),e}(e,r);case Rt:return function(e,r){return t(t({},e),{},{verificationStatus:r.payload.status})}(e,r);case Lt:return function(e,r){return t(t({},e),{},{finalStep:r.payload.finalStep})}(e,r);default:return e}}var roe="full",noe="bright",ioe="dark";function aoe(e={}){return{input:{},verifiedSteps:[],finalStep:null,verificationStatus:Cf.DEFAULT,showVerificationModal:!1,displayMode:"card",theme:noe,...e}}const ooe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aoe(),t=[st];return rt(toe,e,at.apply(void 0,t))}();function soe(e,{mapDispatchToProps:t={},mapStateToProps:n=(()=>({})),ownProps:i={}}){return class extends(function(e){return function(t){return function(t){c(n,t);var r=m(n);function n(){return a(this,n),r.apply(this,arguments)}return s(n,[{key:"connectedCallback",value:function(){var t=this;this.__storeUnsubscribe=e.subscribe((function(){return t._stateChanged(e.getState())})),this._stateChanged(e.getState()),x(l(n.prototype),"connectedCallback",this)&&x(l(n.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){this.__storeUnsubscribe(),x(l(n.prototype),"disconnectedCallback",this)&&x(l(n.prototype),"disconnectedCallback",this).call(this)}},{key:"_stateChanged",value:function(e){throw new Error("_stateChanged() not implemented")}}]),n}(t)}}(ooe)(Ge)){mapDispatchToProps(){return function(e,t){if("function"==typeof e)return nt(e,t);if("object"!==r(e)||null===e)throw new Error(Ye(16));var n={};for(var i in e){var a=e[i];"function"==typeof a&&(n[i]=nt(a,t))}return n}(t,ooe.dispatch)}mapStateToProps(e){return n(ooe.getState(),e)}static get properties(){return i}_render(t){const r={...this.mapDispatchToProps(),...this.mapStateToProps(t),...t};return He`${e(r)}`}_stateChanged(e){this._requestRender()}}}function uoe(e){return{type:jt,payload:{errorMessage:e}}}function coe(e){return function(t){t({type:Ot,payload:{isValid:e}}),t(uoe(e?null:"errors.invalidUrl"))}}function loe(e){return e.status===Cf.SUCCESS}function foe(e){return e.status===Cf.FAILURE}function hoe(e){return function(t,r){if(null==e)return;const n=Hae(r(),e);let i=n.status;i===Cf.DEFAULT&&function(e){let t=!0;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).some(loe)),t||e.subSteps.some(loe)}(n)&&(i=Cf.STARTING),i!==Cf.DEFAULT&&function(e){let t=!0;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).every(loe)),t&&e.subSteps.every(loe)}(n)&&(i=Cf.SUCCESS),function(e){let t=!1;return e.suites?.length&&(t=e.suites?.flatMap((e=>e.subSteps)).some(foe)),t||e.subSteps.some(foe)}(n)&&(i=Cf.FAILURE),t({type:Nt,payload:{parentStepCode:e,status:i}})}}const doe=new(function(){function e(){a(this,e),this.queue=[],this.dispatchCb=null,this.isExecuting=!1,this.intervalId=null,this.dispatchNext=this.dispatchNext.bind(this)}return s(e,[{key:"registerCb",value:function(e){this.dispatchCb=e}},{key:"push",value:function(e){this.queue.push(e)}},{key:"dispatchNext",value:function(){var e=this.queue.shift();e?this.dispatchCb(e):this.intervalId&&(this.isExecuting=!1,clearInterval(this.intervalId))}},{key:"execute",value:function(){!this.isExecuting&&this.queue.length&&(this.isExecuting=!0,this.intervalId=setInterval(this.dispatchNext,200))}}]),e}());function poe(e){return function(t,r){const n=function(e){return function(t){e({type:Mt,payload:t}),e(hoe(t.parentStep))}}(t);doe.dispatchCb||doe.registerCb(n),doe.push(e),doe.execute()}}function voe(){return function(e,t){var r=Sae(t()),n=[];r&&(n=oie.certificates.initializeVerificationSteps(r)),e({type:Ct,payload:{resetSteps:n}})}}function yoe(e){return{type:Rt,payload:{status:e}}}function goe(e){return e.disableVerify}function boe(e){return e.allowDownload}function moe(e){return e.allowSocialShare}function woe(e){return e.showMetadata}function xoe(e){return e.displayMode}function _oe(e){return e.theme}function koe(e){return e.locale}function Soe(e){return e.explorerAPIs}function Eoe(e){return e.clickableUrls}function Ioe(e){return e.didResolverUrl}function Aoe(e){return"string"==typeof e&&(e={label:e}),{type:Lt,payload:{finalStep:e}}}function Toe(){return async function(e,t){const r=t();if(goe(r))return void console.warn("Verification is disabled");e({type:"VERIFY_CERTIFICATE"}),e(yoe(Cf.STARTING)),e(voe());const n=Sae(r);if(n){oie.events.dispatch("certificate-verify",n);const t=await n.verify((t=>{e(poe(t))}));e(Aoe(t.message)),e(yoe(t.status))}}}function Poe(e){return{type:Dt,payload:{showVerificationModal:e}}}function Ooe(e){return async function(t,r){const n=r(),i={locale:koe(n),explorerAPIs:Soe(n),didResolverUrl:Ioe(n)},{certificateDefinition:a,errorMessage:o}=await oie.certificates.parse(e,i);t(uoe(o)),t({type:At,payload:{certificateDefinition:a}}),oie.events.dispatch("certificate-load",a),null!=a&&await t((async function(e,t){(function(e){return e.disableAutoVerify})(t())||(e({type:Et}),e(Poe(!0))),await e(Toe())}))}}function Coe(e){return function(){var t=i(Wt.mark((function t(r){var n,i;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=oie.certificates.isPathToCertificateValidURI(e),r(coe(n)),n){t.next=4;break}return t.abrupt("return",null);case 4:return r({type:Pt,payload:{url:e}}),t.next=7,oie.certificates.retrieve(e);case 7:if(!(i=t.sent).certificateDefinition){t.next=13;break}return t.next=11,r(Ooe(i.certificateDefinition));case 11:t.next=14;break;case 13:r(uoe(i.errorMessage));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Moe=/(-\w)/g,Noe=function(e){return e[1].toUpperCase()};var Roe,Loe={src:String,"disable-auto-verify":Boolean,"disable-verify":Boolean,"allow-download":Boolean,"allow-social-share":Boolean,"display-mode":String,"show-metadata":Boolean,"clickable-urls":Boolean,theme:0,locale:String,explorerAPIs:{},"did-resolver-url":String},joe=Object.keys(Loe).map((function(e){return e.replace(Moe,Noe)})).reduce((function(e,t){return e[t]=Loe[t],e}),{});function Doe(e){var t,r=Object.keys(wae).map((function(e){return e.toLowerCase()}));if(!(t=r.indexOf(e.toLowerCase())>-1)){var n=e.substr(0,2).toLowerCase(),i=r.map((function(e){return e.split("-")[0]})).indexOf(n);(t=i>-1)&&(e=r[i])}return t||(e=bae),function(e){var t=e.split("-");return t.length>1?"".concat(t[0].toLowerCase(),"-").concat(t[1].toUpperCase()):t[0].toLowerCase()}(e)}function Boe(e){"auto"!==e&&e||(e=navigator.language||navigator.userLanguage||navigator.browserLanguage||bae),mae.locale=Doe(e)}var Uoe,Foe=He(Roe||(Roe=_(["<style>.buv-c-input{font-size:15px;color:#031532;border-radius:2px 0 0 2px;padding:12px 15px;background-color:#f3f4f5;border:solid 1px rgba(3,21,50,0.13);box-sizing:border-box;width:100%}.buv-c-input.is-invalid{border:2px solid #f00}.buv-c-input::-moz-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input::-webkit-input-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input:-moz-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-c-input:-ms-input-placeholder{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:rgba(3,21,50,0.3);letter-spacing:-.25px}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"])));function zoe(e){return void 0===e.input.isValid||e.input.isValid}var Hoe,Voe=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onInput,r=void 0===t?function(){}:t,n=e.isValid,i=void 0===n||n,a="buv-c-input ".concat(i?"":"is-invalid");return He(Uoe||(Uoe=_(["\n    ","\n    <label \n      for='certificate-json-url'\n      class='buv-u-visually-hidden'>","</label>\n    <input \n      type='text'\n      id='certificate-json-url'\n      placeholder='","'\n      class$='","'\n      on-input='","'\n    />\n  "])),Foe,_ae("text.urlInput"),_ae("text.urlInputPlaceholder"),a,(function(e){r(e.target.value)}))}),{mapDispatchToProps:{onInput:Coe},mapStateToProps:function(e){return{isValid:zoe(e)}}});window.customElements.define("buv-input",Voe);var Koe,qoe=He(Hoe||(Hoe=_(["<style>.buv-c-verify-button{background-color:#2ab27b;border-radius:0 2px 2px 0;color:#fff;cursor:pointer;display:block;font-size:15px;font-weight:400;padding:12px 38px;border:1px solid #2ab27b;width:100%}.buv-c-verify-button__label{cursor:pointer}.buv-c-verify-button--hollow{background:#fff;color:#2ab27b;font-weight:100;text-transform:uppercase;padding:12px 30px;font-size:13px}.buv-c-verify-button--link{background:none;color:#031532;border:0;text-decoration:underline;padding:0;margin-top:5px;font-size:13px}.buv-c-verify-button.is-disabled{pointer-events:none}\n</style>"])));var Woe,Goe={onClick:function(){return function(e){e({type:"START_VERFICATION_PROCESS"}),e(Poe(!0)),e(Toe())}}},Joe=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isHollow,r=void 0!==t&&t,n=e.isDisabled,i=void 0!==n&&n,a=e.onClick,o=void 0===a?function(){}:a,s=e.type,u=void 0===s?"":s,c=["buv-c-verify-button",r?"buv-c-verify-button--hollow":"",i?"is-disabled":"","link"===u?"buv-c-verify-button--link":""].join(" ");return He(Koe||(Koe=_(["\n    ","\n    <button class$='","' on-click='","' disabled?='","'>\n      <label class='buv-c-verify-button__label'><slot>","</slot></label>\n    </button>\n  "])),qoe,c,o,i,_ae("text.verify"))}),{mapDispatchToProps:Goe,mapStateToProps:function(e){return{isDisabled:goe(e)||!Sae(e)}},ownProps:{isHollow:Boolean,type:String}});window.customElements.define("buv-verify-button",Joe);var Xoe,$oe,Yoe=He(Woe||(Woe=_(["<style>.buv-c-certificate-input{display:flex;width:100%;padding:40px 30px;background-color:rgba(255,255,255,0.1);border:1px solid rgba(0,0,0,0.1);box-sizing:border-box}@media only screen and (max-width: 600px){.buv-c-certificate-input{flex-direction:column;grid-row-gap:10px;height:162px;padding:30px;justify-content:space-between}}.buv-c-certificate-input__input{width:100%}\n</style>"]))),Zoe=soe((function(e){var t=e.showInput;return void 0===t||t?He(Xoe||(Xoe=_(["\n    ",'\n    <section class="buv-c-certificate-input  buv-qa-certificate-input">\n        <buv-input class="buv-c-certificate-input__input"></buv-input><buv-verify-button></buv-verify-button>     \n    </section>\n'])),Yoe):null}),{mapStateToProps:function(e){return{showInput:!Sae(e)}}});window.customElements.define("buv-certificate-input",Zoe);var Qoe,ese=He($oe||($oe=_(['<style>.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-c-download-link{text-decoration:none;color:currentColor}.buv-c-download-link--icon{background-image:url("data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20id%3D%22Capa%5f1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0A%09%20width%3D%22433.5px%22%20height%3D%22433.5px%22%20fill%3D%22%236e7e8e%22%20viewBox%3D%220%200%20433.5%20433.5%22%20style%3D%22enable-background%3Anew%200%200%20433.5%20433.5%3B%22%20xml%3Aspace%3D%22preserve%22%0A%09%3E%3Cg%3E%3Cg%20id%3D%22file-download%22%3E%3Cpath%20d%3D%22M395.25%2C153h-102V0h-153v153h-102l178.5%2C178.5L395.25%2C153z%20M38.25%2C382.5v51h357v-51H38.25z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");width:17px;height:17px;background-size:17px}.buv-c-download-link.is-disabled{pointer-events:none}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>'])));var tse=soe((function(e){var t=e.downloadLink,r=e.display;if(!t)return null;var n="plaintext"===(void 0===r?"":r),i=_ae("text.downloadLink"),a=["buv-c-download-link","buv-o-button-link",n?"":"buv-c-download-link--icon"].join(" ");return He(Qoe||(Qoe=_(["\n    ","\n    <a class$='","' href='","' title$='","'>\n      <span class$='","'>","</span>\n    </a>"])),ese,a,t,i,n?"buv-o-button-link__label":"buv-u-visually-hidden",i)}),{mapStateToProps:function(e){return{downloadLink:Rae(e)}},ownProps:{display:String}});window.customElements.define("buv-download-link",tse);var rse;var nse,ise,ase,ose,sse,use,cse,lse,fse=He(rse||(rse=_(['<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-metadata-container{box-sizing:border-box;padding:47px;height:100%;width:400px;position:fixed;top:0;right:-400px;display:flex;flex-direction:column}.buv-c-metadata-container__close-button{top:52px;right:47px}.buv-c-metadata-container__title{border-bottom:solid 1px #e8e9eb;padding-bottom:38px;font-weight:300;margin:0 0 38px}.buv-c-metadata-link{padding:0}.buv-c-metadata-link--icon{background-image:url("data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%0A%0A%09%20width%3D%22512px%22%20fill%3D%22%236e7e8e%22%20height%3D%22512px%22%20viewBox%3D%220%200%20512%20512%22%20enable-background%3D%22new%200%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%3E%0A%0A%3Cpath%20id%3D%22info-2-icon%22%20d%3D%22M255.998%2C90.001c91.74%2C0%2C166.002%2C74.241%2C166.002%2C165.998c0%2C91.741-74.245%2C166-166.002%2C166%0A%0A%09c-91.74%2C0-165.998-74.243-165.998-166C90%2C164.259%2C164.243%2C90.001%2C255.998%2C90.001%20M255.998%2C50.001%0A%0A%09C142.229%2C50.001%2C50%2C142.229%2C50%2C255.999c0%2C113.771%2C92.229%2C206%2C205.998%2C206c113.771%2C0%2C206.002-92.229%2C206.002-206%0A%0A%09C462%2C142.229%2C369.77%2C50.001%2C255.998%2C50.001L255.998%2C50.001z%20M285.822%2C367.567h-57.646V230.6h57.646V367.567z%20M257%2C202.268%0A%09c-17.522%2C0-31.729-14.206-31.729-31.73c0-17.522%2C14.206-31.729%2C31.729-31.729c17.524%2C0%2C31.728%2C14.206%2C31.728%2C31.729%0A%09C288.728%2C188.062%2C274.524%2C202.268%2C257%2C202.268z%22%2F%3E%3C%2Fsvg%3E");width:22px;height:22px;background-size:22px}.buv-c-metadata-list{margin:0;overflow:auto;flex:1}.buv-c-metadata-list__title{color:#999;line-height:15px}.buv-c-metadata-list__detail{margin:0 0 20px}.buv-c-metadata-list__detail-text{white-space:pre-wrap;word-wrap:break-word;font:inherit;margin:0}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}.buv-u-slide-from-right{opacity:0;-webkit-transition:right ease .5s, opacity .2s;-moz-transition:right ease .5s, opacity .2s;-ms-transition:right ease .5s, opacity .2s;-o-transition:right ease .5s, opacity .2s;transition:right ease .5s, opacity .2s}.buv-u-slide-from-right.is-active{right:0;opacity:1}\n</style>']))),hse=He(nse||(nse=_(["<style>.buv-c-close-button{display:inline-block;overflow:hidden;cursor:pointer;border:0;width:20px;height:20px;position:absolute;background-color:transparent}.buv-c-close-button::before,.buv-c-close-button::after{content:'';position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:#000}.buv-c-close-button::before{transform:rotate(45deg)}.buv-c-close-button::after{transform:rotate(-45deg)}.buv-c-close-button--big{transform:scale(3)}.buv-c-close-button--hairline::before,.buv-c-close-button--hairline::after{height:1px}.buv-c-close-button--thick::before,.buv-c-close-button--thick::after{height:4px;margin-top:-2px}.buv-c-close-button--black::before,.buv-c-close-button--black::after{height:8px;margin-top:-4px}.buv-c-close-button--heavy::before,.buv-c-close-button--heavy::after{height:12px;margin-top:-6px}.buv-c-close-button--pointy::before,.buv-c-close-button--pointy::after{width:200%;left:-50%}.buv-c-close-button--rounded::before,.buv-c-close-button--rounded::after{border-radius:5px}.buv-c-close-button--blades::before,.buv-c-close-button--blades::after{border-radius:5px 0}.buv-c-close-button--warp::before,.buv-c-close-button--warp::after{border-radius:120% 0}.buv-c-close-button--fat::before,.buv-c-close-button--fat::after{border-radius:100%}.buv-c-close-button--position{position:relative}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"]))),dse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.className,i=void 0===n?"":n,a="buv-c-close-button  buv-c-close-button--hairline  ".concat(i||"buv-c-close-button--position"," ");return He(ise||(ise=_(["\n    ","\n    <button onclick='","' class$='","'>\n      <label class='buv-u-visually-hidden'>","</label>\n    </button>\n  "])),hse,r,a,_ae("text.closeButton"))};var pse=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).isOpen=!1,e.toggleOpen=e.toggleOpen.bind(g(e)),e}return s(r,[{key:"toggleOpen",value:function(){this.isOpen=!this.isOpen}},{key:"_render",value:function(e){var t=e.metadataList,r=e.display,n=["buv-o-overlay","buv-c-metadata-container","buv-u-slide-from-right",this.isOpen?"is-active":""].join(" "),i="";if(t){var a=function(e){return e.schema.properties.certificate.properties}(t);i=t.displayOrder.map((function(e){var r=e.split(".")[1],n=function(e,t){var r=t.split(".");return function e(t,r,n){var i=n.indexOf(r)+1,a=n[i];return a?Object.prototype.hasOwnProperty.call(t[r],a)?e(t[r],a,n):void 0:t[r]}(e,r[0],r)}(t,e);return function(e,t){var r=e.title,n=e.format,i=e.type;Array.isArray(i)&&(i=i[0]);var a=He(ase||(ase=_(["<dt class='buv-c-metadata-list__title'>","</dt>"])),r),o=!1,s="",u=t;if("string"===i)switch(n){case"uri":o=!0,s=t;break;case"email":s="mailto:".concat(t);break;case"phoneNumber":s="tel:".concat(t)}s&&(u=He(ose||(ose=_(['<a href="','" target="','" >',"</a>"])),s,o?"_blank":"",t));var c=He(sse||(sse=_(["<dd class='buv-c-metadata-list__detail'>\n            <pre class='buv-c-metadata-list__detail-text'>","</pre></dd>"])),u);return He(use||(use=_(["","",""])),a,c)}(a[r],n)}))}var o="plaintext"===r,s=_ae(t?"text.metadataButton":"errors.noMetadata"),u=["buv-c-metadata-link","buv-o-button-link",o?"":"buv-c-metadata-link--icon"].join(" ");return He(cse||(cse=_(["\n      ","\n      <button onclick='","' \n        class$='","' \n        disabled?='","' \n        aria-disabled?='","'\n        title$=",">\n        <label class$='","'>","</label>\n      </button>\n      <section class$='","'>\n        <h1 class='buv-c-metadata-container__title'>","</h1>\n        ","\n        <dl class='buv-c-metadata-list  buv-o-text-12'>","</dl>\n      </section>\n    "])),fse,this.toggleOpen,u,!t,!t,s,o?"buv-o-button-link__label":"buv-u-visually-hidden",s,n,_ae("text.metadataTitle"),dse({onClick:this.toggleOpen,className:"buv-c-metadata-container__close-button"}),i)}}],[{key:"properties",get:function(){return{isOpen:Boolean,metadataList:Object,display:String}}}]),r}(Ge);window.customElements.define("buv-metadata-raw",pse);var vse,yse=soe((function(e){return He(lse||(lse=_(["\n    <buv-metadata-raw\n      metadataList='","'\n      display='","'\n    ></buv-metadata-raw>"])),e.metadataList,e.display)}),{mapStateToProps:function(e){return{metadataList:Lae(e)}},ownProps:{display:String}});window.customElements.define("buv-metadata",yse);var gse,bse,mse,wse,xse,_se,kse=He(vse||(vse=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-button-link{display:block;cursor:pointer;border:0;background-color:transparent}.buv-o-button-link__label{display:block;font-size:13px;cursor:pointer}.buv-o-button-link.is-disabled,.buv-o-button-link:disabled{cursor:help;opacity:.6}.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-social-share-link{width:17px;height:17px;background-size:17px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Capa_1' x='0px' y='0px' viewBox='0 0 473.932 473.932' style='enable-background:new 0 0 473.932 473.932;' xml:space='preserve' width='24px' height='24px'%3E%3Cg%3E%3Cg%3E%3Cpath d='M385.513,301.214c-27.438,0-51.64,13.072-67.452,33.09l-146.66-75.002 c1.92-7.161,3.3-14.56,3.3-22.347c0-8.477-1.639-16.458-3.926-24.224l146.013-74.656c15.725,20.924,40.553,34.6,68.746,34.6 c47.758,0,86.391-38.633,86.391-86.348C471.926,38.655,433.292,0,385.535,0c-47.65,0-86.326,38.655-86.326,86.326 c0,7.809,1.381,15.229,3.322,22.412L155.892,183.74c-15.833-20.039-40.079-33.154-67.56-33.154 c-47.715,0-86.326,38.676-86.326,86.369s38.612,86.348,86.326,86.348c28.236,0,53.043-13.719,68.832-34.664l145.948,74.656 c-2.287,7.744-3.947,15.79-3.947,24.289c0,47.693,38.676,86.348,86.326,86.348c47.758,0,86.391-38.655,86.391-86.348 C471.904,339.848,433.271,301.214,385.513,301.214z' fill='%236e7e8e'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A\")}.buv-c-social-share-modal{position:absolute;padding:38px 34px 34px;width:120px}.buv-c-social-share-modal__close-button{top:10px;right:10px}.buv-c-social-share-modal__list{list-style-type:none;margin:0;padding:0}.buv-c-social-share-modal__list-item{margin-bottom:24px}.buv-c-social-share-modal__list-item--plaintext{margin-bottom:5px;font-size:13px}.buv-c-social-share-modal__list-item:last-child{margin-bottom:0}.buv-c-social-share-modal__link{text-decoration:none}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"]))),Sse=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).isOpen=!1,e.toggleOpen=e.toggleOpen.bind(g(e)),e}return s(r,[{key:"toggleOpen",value:function(){this.isOpen=!this.isOpen}},{key:"sharingTemplate",value:function(e){var t=e.url,r=e.onShare,n=e.display;if(this.isOpen&&t){var i="plaintext"===n,a=[{name:"LinkedIn",shareUrl:"https://www.linkedin.com/shareArticle?url=".concat(t,"&mini=true")},{name:"Facebook",shareUrl:"https://www.facebook.com/sharer/sharer.php?u=".concat(t)},{name:"Twitter",shareUrl:"https://twitter.com/intent/tweet?url=".concat(t)}].map((function(e){return He(gse||(gse=_(["<li class$='buv-c-social-share-modal__list-item  ","'>\n            <a\n              href='","'\n              title='Share on ","'\n              class='buv-o-link  buv-c-social-share-modal__link'\n              target='_blank'\n              onclick='","'\n            >\n              <span>"," ","</span>\n            </a>\n          </li>"])),i?"buv-c-social-share-modal__list-item--plaintext":"",e.shareUrl,e.name,(function(){r(e.name)}),_ae("text.share"),e.name)})),o=He(bse||(bse=_(["<ul class='buv-c-social-share-modal__list'>\n        ","\n      </ul>"])),a);return i?o:He(mse||(mse=_(["<div class='buv-c-social-share-modal  buv-o-text-12  buv-o-overlay'>\n      ","\n      ","\n    </div>"])),dse({onClick:this.toggleOpen,className:"buv-c-social-share-modal__close-button"}),o)}}},{key:"sharingButton",value:function(e){var t=e.url;if("plaintext"!==e.display){var r=!!t,n=_ae(r?"text.shareButton":"text.noShareUrl");return He(wse||(wse=_(["<button \n        onclick='","'\n        class='buv-c-social-share-link  buv-o-button-link'\n        disabled?='","'\n        aria-disabled?='","'\n        title$='","'\n      >\n      <label class='buv-u-visually-hidden'>","</label>\n    </button>"])),this.toggleOpen,!r,!r,n,n)}this.isOpen=!0}},{key:"_render",value:function(e){return He(xse||(xse=_(["\n      ","\n      ","\n      ","\n    "])),kse,this.sharingButton(e),this.sharingTemplate(e))}}],[{key:"properties",get:function(){return{url:String,isOpen:String,onShare:Function,display:String}}}]),r}(Ge);window.customElements.define("buv-social-share-raw",Sse);var Ese,Ise={onShare:function(e){return function(t,r){var n=Sae(r());oie.events.dispatch("certificate-share",n,{socialNetwork:e}),t({type:"SHARE_SOCIAL_NETWORK"})}}},Ase=soe((function(e){return He(_se||(_se=_(["\n  <buv-social-share-raw\n    url='","'\n    onShare='","'\n    display='","'\n  ></buv-social-share-raw>"])),e.url,e.onShare,e.display)}),{mapDispatchToProps:Ise,mapStateToProps:function(e){return{url:Nae(e)}},ownProps:{display:String}});window.customElements.define("buv-social-share",Ase);var Tse,Pse,Ose,Cse,Mse,Nse=He(Ese||(Ese=_(["<style>.buv-c-action-menu{display:flex;align-items:center;padding:0}.buv-c-action-menu-item{flex-basis:30px}\n</style>"]))),Rse=soe((function(e){var t=e.allowDownload,r=e.allowSocialShare,n=e.showMetadata,i=e.isVisible;return t||r||n||(i=!1),i?He(Tse||(Tse=_(["\n    ","\n    <menu class='buv-c-action-menu'>\n      ","\n      ","\n      ","\n    </menu>\n  "])),Nse,n?He(Pse||(Pse=_(["<menuitem class='buv-c-action-menu-item'><buv-metadata></buv-metadata></menuitem>"]))):"",t?He(Ose||(Ose=_(["<menuitem class='buv-c-action-menu-item'><buv-download-link></buv-download-link></menuitem>"]))):"",r?He(Cse||(Cse=_(["<menuitem class='buv-c-action-menu-item'><buv-social-share></buv-social-share></menuitem>"]))):""):null}),{mapStateToProps:function(e){return{allowDownload:boe(e),allowSocialShare:moe(e),showMetadata:woe(e),isVisible:xoe(e)===roe&&!!Sae(e)}}});window.customElements.define("buv-action-menu",Rse);var Lse,jse,Dse,Bse=He(Mse||(Mse=_(["<style>.buv-c-verification-modal__process{display:flex;justify-content:space-around}.buv-c-verification-modal__separator{margin-bottom:30px;background-color:rgba(3,21,50,0.05);height:1px;border:0 none}.buv-c-verification-modal__content{max-height:100vh;padding-bottom:43px;box-sizing:border-box;overflow:auto}@media only screen and (max-width: 600px){.buv-c-verification-modal__content{max-height:calc(100vh - 120px)}}\n</style>"]))),Use=He(Lse||(Lse=_(["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"]))),Fse=!1,zse=!1;function Hse(e){return function(){var t=i(Wt.mark((function t(r){var n;return Wt.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:"UPLOAD_CERTIFICATE_DEFINITION"}),t.next=3,oie.certificates.read(e);case 3:n=t.sent,r(Ooe(JSON.parse(n)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Vse,Kse=soe((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.hideFileUpload;return void 0!==n&&n?null:He(jse||(jse=_(["\n    ","\n    <label for='buv-json-file-upload' class='buv-o-link  buv-o-text-12'>\n      <span class='buv-o-link__text--underline'>","</span>\n      <input\n        type='file'\n        accept='application/json'\n        id='buv-json-file-upload'\n        class='buv-u-visually-hidden'\n        onchange='","'\n      />\n    </label>\n    ",""])),Use,_ae("text.fileUpload"),(function(e){r(e.target.files[0])}),(Fse?zse:(Fse=!0,!("ontouchstart"in document.createElement("div"))&&(zse=!0)))?He(Dse||(Dse=_(['<span class="buv-o-text-12  qa-drag-and-drop-hint">',"</span>"])),_ae("text.dragAndDropHint")):"")}),{mapDispatchToProps:{onChange:Hse},mapStateToProps:function(e){return{hideFileUpload:Sae(e)}}});function qse(){return function(e){e(voe()),e((function(e){e({type:"RESET_VERIFICATION_STATUS"}),e(yoe(Cf.DEFAULT)),e(Aoe(null))})),e({type:Tt,payload:{definition:null}})}}window.customElements.define("buv-file-upload",Kse);var Wse,Gse=He(Vse||(Vse=_(["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-verify-other-certificate{display:block}\n</style>"])));var Jse,Xse=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.isVisible,i=void 0!==n&&n;return i?He(Wse||(Wse=_(["\n    ","\n    <a onclick='","' class='buv-o-text-12  buv-o-link  buv-c-verify-other-certificate  buv-qa-verify-other-certificate'>\n      <span class='buv-o-link__text--underline'>","</span>\n    </a>\n  "])),Gse,r,_ae("text.verifyOther")):null}),{mapDispatchToProps:{onClick:qse},mapStateToProps:function(e){return{isVisible:!!Sae(e)}}});window.customElements.define("buv-verify-other-certificate",Xse);var $se,Yse,Zse,Qse,eue=He(Jse||(Jse=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-footer{width:100%;height:60px;background-color:rgba(0,0,0,0.1);color:#031532;fill:#111;display:flex;justify-content:space-between;align-items:center;padding:0 30px;box-sizing:border-box}.buv-c-footer a{line-height:1}.buv-c-footer--dark{color:#fff;fill:#fff}.buv-c-footer--forced{position:absolute;bottom:0;left:0;margin-top:0;justify-content:flex-end}\n</style>"]))),tue=He($se||($se=_(["<style>.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}.buv-c-logo{color:currentColor;text-decoration:none}.buv-c-logo--small{width:113px;height:16px}.buv-c-logo--medium{width:66%}.buv-c-logo__motto{font-size:12px}\n</style>"])));function rue(){return He(Yse||(Yse=_(['\n    <svg class=\'buv-qa-logo--simple  buv-c-logo--small\' viewBox="0 0 113 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <defs></defs>\n        <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd" fill-opacity="0.37">\n          <g id="blockcerts-logo" transform="translate(0.000000, -2.000000)" fill-rule="nonzero" fill="inherit">\n            <path d="M19.5,5.06256945 L22.9958467,5.06256945 C24.617584,5.06256945 25.789567,5.29884552 26.5118308,5.77140473 C27.2340946,6.24396395 27.5952211,6.99038151 27.5952211,8.01067982 C27.5952211,8.69803869 27.4180141,9.26993416 27.0635947,9.72638339 C26.7091752,10.1828327 26.1990337,10.4701229 25.5331548,10.5882627 L25.5331548,10.6688121 C26.3601335,10.8245419 26.9682758,11.1319693 27.3576002,11.5911035 C27.7469246,12.0502377 27.9415838,12.6718049 27.9415838,13.4558236 C27.9415838,14.5137118 27.5724025,15.3420205 26.8340287,15.9407745 C26.0956549,16.5395285 25.0686595,16.8389011 23.7530117,16.8389011 L19.5,16.8389011 L19.5,5.06256945 Z M21.4251322,9.92775706 L23.2777698,9.92775706 C24.0832685,9.92775706 24.6712737,9.80022169 25.0418031,9.54514712 C25.4123325,9.29007254 25.5975944,8.85645225 25.5975944,8.24427327 C25.5975944,7.69116419 25.3975653,7.29110585 24.9975009,7.04408626 C24.5974366,6.79706667 23.9624447,6.67355873 23.0925061,6.67355873 L21.4251322,6.67355873 L21.4251322,9.92775706 Z M21.4251322,11.4904167 L21.4251322,15.2198568 L23.4710886,15.2198568 C24.2765872,15.2198568 24.8847296,15.0654719 25.2955339,14.7566974 C25.7063383,14.4479229 25.9117373,13.9606036 25.9117373,13.2947247 C25.9117373,12.6825457 25.7023108,12.2287882 25.2834515,11.9334387 C24.8645922,11.6380892 24.2282578,11.4904167 23.3744292,11.4904167 L21.4251322,11.4904167 Z M29.8953916,16.8389011 L29.8953916,5.06256945 L31.8205237,5.06256945 L31.8205237,15.1876371 L36.8065356,15.1876371 L36.8065356,16.8389011 L29.8953916,16.8389011 Z M48.4665536,10.9346254 C48.4665536,12.8517122 47.9872891,14.3418624 47.0287457,15.4051206 C46.0702024,16.4683789 44.7129575,17 42.9569704,17 C41.1795033,17 39.8142036,16.4724063 38.8610302,15.417203 C37.9078567,14.3619998 37.4312772,12.8624522 37.4312772,10.9185155 C37.4312772,8.97457869 37.9105417,7.48174356 38.8690851,6.43996528 C39.8276285,5.39818701 41.1956132,4.87730568 42.9730803,4.87730568 C44.7236973,4.87730568 46.0769148,5.40624187 47.0327734,6.46413012 C47.9886317,7.52201836 48.4665536,9.01216855 48.4665536,10.9346254 Z M39.4772336,10.9346254 C39.4772336,12.384523 39.7698937,13.4840121 40.3552227,14.2331259 C40.9405517,14.9822397 41.8077923,15.3567909 42.9569704,15.3567909 C44.1007786,15.3567909 44.9639915,14.9862671 45.5466357,14.2452083 C46.1292796,13.5041496 46.4205973,12.4006329 46.4205973,10.9346254 C46.4205973,9.49009776 46.1319648,8.39463599 45.5546906,7.64820724 C44.9774165,6.90177847 44.1168884,6.52856969 42.9730803,6.52856969 C41.8185322,6.52856969 40.9472642,6.90177847 40.3592502,7.64820724 C39.7712361,8.39463599 39.4772336,9.49009776 39.4772336,10.9346254 Z M55.5110875,6.54467959 C54.4048694,6.54467959 53.5349439,6.93668306 52.9012851,7.72070175 C52.267626,8.50472046 51.9508013,9.58675743 51.9508013,10.9668451 C51.9508013,12.4113727 52.2555437,13.5041496 52.8650377,14.2452083 C53.4745317,14.9862671 54.3565394,15.3567909 55.5110875,15.3567909 C56.0104969,15.3567909 56.4937888,15.3071193 56.960978,15.2077744 C57.4281673,15.1084296 57.9141441,14.9808942 58.4189233,14.8251645 L58.4189233,16.4764285 C57.4952848,16.8254779 56.4481523,17 55.2774942,17 C53.5537269,17 52.230044,16.4777762 51.3064055,15.4333129 C50.3827671,14.3888497 49.9209548,12.894672 49.9209548,10.9507353 C49.9209548,9.72637727 50.1451485,8.65508014 50.5935427,7.73681166 C51.041937,6.81854317 51.6903538,6.11508489 52.5388124,5.6264157 C53.3872709,5.13774651 54.3833893,4.89341558 55.5271976,4.89341558 C56.7300756,4.89341558 57.841647,5.14580137 58.8619454,5.65058054 L58.1692199,7.25351487 C57.7718405,7.06556518 57.3516451,6.90044043 56.9086208,6.75813566 C56.4655966,6.6158309 55.9997568,6.54467959 55.5110875,6.54467959 Z M69.4506556,16.8389011 L67.2194355,16.8389011 L63.522215,11.5065265 L62.3864676,12.4328454 L62.3864676,16.8389011 L60.4613353,16.8389011 L60.4613353,5.06256945 L62.3864676,5.06256945 L62.3864676,10.684922 C62.9127266,10.0405231 63.4362929,9.42029843 63.9571822,8.82422942 L67.1388858,5.06256945 L69.3298314,5.06256945 C67.2731248,7.47906546 65.7990842,9.20012177 64.9076657,10.2257901 L69.4506556,16.8389011 Z M75.6494201,5.63447064 C74.1726725,5.63447064 73.0100869,6.10702277 72.1616284,7.05214121 C71.3131696,7.99725964 70.8889467,9.29140808 70.8889467,10.9346254 C70.8889467,12.6154326 71.2890051,13.9203209 72.0891337,14.8493293 C72.8892625,15.7783378 74.0330533,16.242835 75.5205409,16.242835 C76.5086192,16.242835 77.4161342,16.1166421 78.2431127,15.8642525 L78.2431127,16.5891977 C77.4644642,16.8630673 76.4925103,17 75.3272222,17 C73.673265,17 72.3710617,16.4656939 71.4205732,15.3970657 C70.4700848,14.3284374 69.9948476,12.8356023 69.9948476,10.9185155 C69.9948476,9.72100746 70.2217264,8.66582002 70.6754907,7.75292154 C71.129255,6.84002305 71.781699,6.13522229 72.6328427,5.63849812 C73.4839862,5.14177394 74.4733922,4.89341558 75.6010904,4.89341558 C76.7502684,4.89341558 77.7786064,5.108212 78.6861348,5.53781129 L78.355882,6.27886635 C77.4966834,5.84926707 76.5945384,5.63447064 75.6494201,5.63447064 Z M86.8100316,16.8389011 L80.3741293,16.8389011 L80.3741293,5.06256945 L86.8100316,5.06256945 L86.8100316,5.81973441 L81.1957339,5.81973441 L81.1957339,10.2741198 L86.4958886,10.2741198 L86.4958886,11.0312847 L81.1957339,11.0312847 L81.1957339,16.0817361 L86.8100316,16.0817361 L86.8100316,16.8389011 Z M89.8029274,11.7079002 L89.8029274,16.8389011 L88.9813228,16.8389011 L88.9813228,5.06256945 L91.7844442,5.06256945 C93.2450817,5.06256945 94.3244339,5.33240746 95.0225327,5.87209156 C95.7206316,6.41177567 96.0696758,7.22397464 96.0696758,8.30871284 C96.0696758,9.09810153 95.8615917,9.76397044 95.4454173,10.3063395 C95.0292429,10.8487086 94.396936,11.2380272 93.5484774,11.4743068 L96.7462912,16.8389011 L95.7635877,16.8389011 L92.726873,11.7079002 L89.8029274,11.7079002 Z M89.8029274,10.9990649 L92.0502574,10.9990649 C93.0437059,10.9990649 93.814288,10.7775561 94.3620271,10.3345318 C94.909766,9.8915076 95.1836315,9.23772099 95.1836315,8.37315242 C95.1836315,7.4763639 94.9151361,6.82391977 94.378137,6.41580044 C93.8411379,6.00768112 92.9658423,5.80362452 91.7522245,5.80362452 L89.8029274,5.80362452 L89.8029274,10.9990649 Z M101.358231,16.8389011 L100.528572,16.8389011 L100.528572,5.8358443 L96.7024723,5.8358443 L96.7024723,5.06256945 L105.184331,5.06256945 L105.184331,5.8358443 L101.358231,5.8358443 L101.358231,16.8389011 Z M112.9377,13.8021863 C112.9377,14.7848947 112.576573,15.5635317 111.85431,16.1381207 C111.132046,16.7127098 110.172174,17 108.974666,17 C107.535509,17 106.431992,16.8415876 105.664083,16.5247582 L105.664083,15.7031536 C106.512542,16.062943 107.594579,16.242835 108.910227,16.242835 C109.876825,16.242835 110.64338,16.0213262 111.209914,15.5783019 C111.776448,15.1352777 112.059711,14.5539849 112.059711,13.8344061 C112.059711,13.3886968 111.965737,13.0195154 111.777788,12.7268509 C111.589838,12.4341864 111.283753,12.1670334 110.859524,11.9253838 C110.435294,11.6837342 109.812385,11.4232935 108.990776,11.144054 C107.787898,10.7305647 106.956904,10.2835196 106.49777,9.80290539 C106.038636,9.32229119 105.809072,8.68192935 105.809072,7.88180069 C105.809072,7.00112214 106.154089,6.28289661 106.844133,5.72710253 C107.534177,5.17130845 108.421555,4.89341558 109.506293,4.89341558 C110.612511,4.89341558 111.651589,5.10284209 112.623557,5.52170139 L112.325524,6.23053668 C111.348186,5.82241735 110.413821,5.61836075 109.522403,5.61836075 C108.652464,5.61836075 107.959746,5.8197324 107.444226,6.22248173 C106.928707,6.62523106 106.670952,7.17296194 106.670952,7.86569079 C106.670952,8.30066007 106.750158,8.65775912 106.908573,8.93699866 C107.066987,9.2162382 107.326085,9.46728151 107.685875,9.69013615 C108.045664,9.91299077 108.663204,10.1801438 109.538513,10.4916033 C110.456781,10.8084328 111.146815,11.1158602 111.608634,11.4138947 C112.070453,11.7119292 112.407415,12.0502335 112.619529,12.4288179 C112.831644,12.8074023 112.9377,13.2651872 112.9377,13.8021863 Z" id="BLOCKCERTS"></path>\n            <path d="M10.9580699,13.4113689 C10.9580699,13.8630088 10.5919434,14.2291353 10.1403035,14.2291353 L0.81776652,14.2291353 C0.366126608,14.2291353 1.20000012e-07,13.8630088 1.2000001e-07,13.4113689 C1.2000001e-07,12.959729 0.366126608,12.5936025 0.81776652,12.5936025 L10.1403035,12.5936025 C10.5919434,12.5936025 10.9580699,12.959729 10.9580699,13.4113689 Z"></path>\n            <path d="M14.2291354,13.411369 C14.2291354,13.8630089 13.8630089,14.2291354 13.411369,14.2291354 C12.9597291,14.2291354 12.5936026,13.8630089 12.5936026,13.411369 C12.5936026,12.9597291 12.9597291,12.5936026 13.411369,12.5936026 C13.8630089,12.5936026 14.2291354,12.9597291 14.2291354,13.411369 Z"></path>\n            <path d="M9.4860908,16.6824348 C9.4860908,17.1340748 9.11996431,17.5002012 8.6683244,17.5002012 C8.21668449,17.5002012 7.850558,17.1340748 7.850558,16.6824348 C7.850558,16.2307949 8.21668449,15.8646684 8.6683244,15.8646684 C9.11996431,15.8646684 9.4860908,16.2307949 9.4860908,16.6824348 Z"></path>\n            <path d="M14.2291356,6.869238 C14.2291356,7.32087791 13.8630092,7.6870044 13.4113692,7.6870044 C12.9597293,7.6870044 12.5936028,7.32087791 12.5936028,6.869238 C12.5936028,6.41759809 12.9597293,6.0514716 13.4113692,6.0514716 C13.8630092,6.0514716 14.2291356,6.41759809 14.2291356,6.869238 Z"></path>\n            <path d="M1.63553264,6.8692384 C1.63553264,7.32087831 1.26940615,7.6870048 0.81776624,7.6870048 C0.366126328,7.6870048 -1.60000013e-07,7.32087831 -1.60000013e-07,6.8692384 C-1.60000013e-07,6.41759849 0.366126328,6.051472 0.81776624,6.051472 C1.26940615,6.051472 1.63553264,6.41759849 1.63553264,6.8692384 Z"></path><rect transform="translate(7.196344, 3.598172) rotate(90.000000) translate(-7.196344, -3.598172) " x="6.37857744" y="2.78040592" width="1.6355328" height="1.6355328" rx="0.8177664"></rect>\n            <path d="M6.37857804,10.1403025 C6.37857804,10.5919424 6.01245155,10.9580689 5.56081164,10.9580689 C5.10917173,10.9580689 4.74304524,10.5919424 4.74304524,10.1403025 C4.74304524,9.68866261 5.10917173,9.32253612 5.56081164,9.32253612 C6.01245155,9.32253612 6.37857804,9.68866261 6.37857804,10.1403025 Z"></path>\n            <path d="M14.2291348,3.5981724 C14.2291348,4.04981231 13.8630083,4.4159388 13.4113684,4.4159388 L10.4674093,4.4159388 C10.0157694,4.4159388 9.64964292,4.04981231 9.64964292,3.5981724 C9.64964292,3.14653249 10.0157694,2.780406 10.4674093,2.780406 L13.4113684,2.780406 C13.8630083,2.780406 14.2291348,3.14653249 14.2291348,3.5981724 Z"></path><rect transform="translate(2.371523, 3.598172) rotate(90.000000) translate(-2.371523, -3.598172) " x="1.55375644" y="1.226649" width="1.6355328" height="4.74304512" rx="0.8177664"></rect>\n            <path d="M14.229135,10.140303 C14.229135,10.5919429 13.8630085,10.9580694 13.4113686,10.9580694 L8.83187672,10.9580694 C8.38023681,10.9580694 8.01411032,10.5919429 8.01411032,10.140303 C8.01411032,9.68866309 8.38023681,9.3225366 8.83187672,9.3225366 L13.4113686,9.3225366 C13.8630085,9.3225366 14.229135,9.68866309 14.229135,10.140303 Z"></path>\n            <path d="M3.1075118,10.1403032 C3.1075118,10.5919431 2.74138531,10.9580696 2.2897454,10.9580696 L0.81776588,10.9580696 C0.366125968,10.9580696 -5.20000015e-07,10.5919431 -5.20000015e-07,10.1403032 C-5.20000015e-07,9.68866325 0.366125968,9.32253676 0.81776588,9.32253676 L2.2897454,9.32253676 C2.74138531,9.32253676 3.1075118,9.68866325 3.1075118,10.1403032 Z"></path>\n            <path d="M14.2291356,16.6824352 C14.2291356,17.1340751 13.8630091,17.5002016 13.4113692,17.5002016 L11.9393897,17.5002016 C11.4877498,17.5002016 11.1216233,17.1340751 11.1216233,16.6824352 C11.1216233,16.2307953 11.4877498,15.8646688 11.9393897,15.8646688 L13.4113692,15.8646688 C13.8630091,15.8646688 14.2291356,16.2307953 14.2291356,16.6824352 Z"></path>\n            <path d="M6.2150248,16.6824353 C6.2150248,17.1340752 5.84889831,17.5002017 5.3972584,17.5002017 L0.81776656,17.5002017 C0.366126648,17.5002017 1.59999985e-07,17.1340752 1.59999985e-07,16.6824353 C1.59999985e-07,16.2307954 0.366126648,15.8646689 0.81776656,15.8646689 L5.3972584,15.8646689 C5.84889831,15.8646689 6.2150248,16.2307954 6.2150248,16.6824353 Z"></path>\n            <path d="M10.9580703,6.86923768 C10.9580703,7.32087759 10.5919438,7.68700408 10.1403039,7.68700408 L4.08883256,7.68700408 C3.63719265,7.68700408 3.27106616,7.32087759 3.27106616,6.86923768 C3.27106616,6.41759777 3.63719265,6.05147128 4.08883256,6.05147128 L10.1403039,6.05147128 C10.5919438,6.05147128 10.9580703,6.41759777 10.9580703,6.86923768 Z">\n            </path> \n          </g>\n      </g> \n    </svg>\n    <span class=\'buv-u-visually-hidden\'>',"</span>\n  "])),_ae("text.brandname"))}function nue(){return He(Zse||(Zse=_(['\n    <svg class=\'buv-qa-logo--branded  buv-c-logo--medium\' version="1.1" viewBox="0 0 686 163" xmlns="http://www.w3.org/2000/svg">\n      <g fill="none" fill-rule="evenodd">\n        <g transform="translate(-76 -70)">\n          <g transform="translate(76 53)">\n            <path d="m119.52 35.613h21.191c9.8308 0 16.935 1.4323 21.313 4.2969 4.3783 2.8646 6.5674 7.3893 6.5674 13.574 0 4.1667-1.0742 7.6334-3.2227 10.4-2.1484 2.7669-5.2409 4.5085-9.2773 5.2246v0.48828c5.013 0.94402 8.6995 2.8076 11.06 5.5908 2.36 2.7832 3.54 6.5511 3.54 11.304 0 6.4128-2.2379 11.434-6.7139 15.063-4.4759 3.6296-10.701 5.4443-18.677 5.4443h-25.781v-71.387zm11.67 29.492h11.23c4.8828 0 8.4473-0.7731 10.693-2.3193s3.3691-4.1748 3.3691-7.8857c0-3.3529-1.2126-5.778-3.6377-7.2754-2.4251-1.4974-6.2744-2.2461-11.548-2.2461h-10.107v19.727zm0 9.4727v22.607h12.402c4.8828 0 8.5693-0.93586 11.06-2.8076 2.4902-1.8718 3.7354-4.8258 3.7354-8.8623 0-3.711-1.2695-6.4616-3.8086-8.252-2.5391-1.7904-6.3965-2.6855-11.572-2.6855h-11.816zm51.346 32.422v-71.387h11.67v61.377h30.225v10.01h-41.895zm112.58-35.791c0 11.621-2.9052 20.654-8.7158 27.1-5.8106 6.4453-14.038 9.668-24.683 9.668-10.775 0-19.051-3.1982-24.829-9.5947-5.778-6.3965-8.667-15.487-8.667-27.271s2.9052-20.833 8.7158-27.148c5.8106-6.3151 14.103-9.4727 24.878-9.4727 10.612 0 18.815 3.2063 24.609 9.6191s8.6914 15.446 8.6914 27.1zm-54.492 0c0 8.7891 1.7741 15.454 5.3223 19.995 3.5482 4.541 8.8053 6.8115 15.771 6.8115 6.9336 0 12.166-2.2461 15.698-6.7383 3.5319-4.4922 5.2979-11.182 5.2979-20.068 0-8.7566-1.7497-15.397-5.249-19.922-3.4994-4.5248-8.7158-6.7871-15.649-6.7871-6.9987 0-12.28 2.2623-15.845 6.7871s-5.3467 11.165-5.3467 19.922zm97.195-26.611c-6.7058 0-11.979 2.3763-15.82 7.1289-3.8412 4.7526-5.7617 11.312-5.7617 19.678 0 8.7566 1.8473 15.381 5.542 19.873 3.6947 4.4922 9.0413 6.7383 16.04 6.7383 3.0274 0 5.957-0.3011 8.7891-0.90332 2.832-0.60222 5.778-1.3753 8.8379-2.3193v10.01c-5.599 2.1159-11.947 3.1738-19.043 3.1738-10.449 0-18.473-3.1657-24.072-9.4971-5.599-6.3314-8.3984-15.389-8.3984-27.173 0-7.4219 1.359-13.916 4.0771-19.482 2.7181-5.5664 6.6487-9.8307 11.792-12.793s11.182-4.4434 18.115-4.4434c7.2917 0 14.03 1.5299 20.215 4.5898l-4.1992 9.7168c-2.4089-1.1393-4.956-2.1403-7.6416-3.0029-2.6856-0.86263-5.5094-1.2939-8.4717-1.2939zm84.5 62.402h-13.525l-22.412-32.324-6.8848 5.6152v26.709h-11.67v-71.387h11.67v34.082c3.1901-3.9063 6.3639-7.666 9.5215-11.279l19.287-22.803h13.281c-12.468 14.649-21.403 25.081-26.807 31.299l27.539 40.088zm37.576-67.92c-8.9519 0-15.999 2.8646-21.143 8.5938s-7.7148 13.574-7.7148 23.535c0 10.189 2.4251 18.099 7.2754 23.73 4.8503 5.6315 11.784 8.4473 20.801 8.4473 5.9896 0 11.491-0.76497 16.504-2.2949v4.3945c-4.7201 1.6602-10.612 2.4902-17.676 2.4902-10.026 0-17.92-3.2389-23.682-9.7168-5.7617-6.4779-8.6426-15.527-8.6426-27.148 0-7.2592 1.3753-13.656 4.126-19.189 2.7507-5.5339 6.7057-9.8063 11.865-12.817s11.157-4.5166 17.993-4.5166c6.9662 0 13.2 1.3021 18.701 3.9062l-2.002 4.4922c-5.2084-2.6042-10.677-3.9062-16.406-3.9062zm67.654 67.92h-39.014v-71.387h39.014v4.5898h-34.033v27.002h32.129v4.5898h-32.129v30.615h34.033v4.5898zm18.143-31.104v31.104h-4.9805v-71.387h16.992c8.8542 0 15.397 1.6357 19.629 4.9072s6.3477 8.195 6.3477 14.771c0 4.7852-1.2614 8.8216-3.7842 12.109-2.5228 3.2878-6.3558 5.6478-11.499 7.0801l19.385 32.52h-5.957l-18.408-31.104h-17.725zm0-4.2969h13.623c6.0222 0 10.693-1.3428 14.014-4.0283s4.9805-6.6487 4.9805-11.89c0-5.4362-1.6276-9.3913-4.8828-11.865-3.2552-2.474-8.5612-3.7109-15.918-3.7109h-11.816v31.494zm70.047 35.4h-5.0293v-66.699h-23.193v-4.6875h51.416v4.6875h-23.193v66.699zm70.193-18.408c0 5.9571-2.1891 10.677-6.5674 14.16-4.3783 3.4831-10.197 5.2246-17.456 5.2246-8.724 0-15.413-0.96028-20.068-2.8809v-4.9805c5.1433 2.181 11.702 3.2715 19.678 3.2715 5.8594 0 10.506-1.3428 13.94-4.0283 3.4343-2.6856 5.1514-6.2093 5.1514-10.571 0-2.7018-0.56966-4.9398-1.709-6.7139-1.1393-1.7741-2.9948-3.3935-5.5664-4.8584-2.5716-1.4649-6.3476-3.0436-11.328-4.7363-7.2917-2.5065-12.329-5.2165-15.112-8.1299s-4.1748-6.7952-4.1748-11.646c0-5.3386 2.0914-9.6924 6.2744-13.062 4.183-3.3692 9.5621-5.0537 16.138-5.0537 6.7058 0 13.005 1.2695 18.896 3.8086l-1.8066 4.2969c-5.9245-2.474-11.589-3.7109-16.992-3.7109-5.2735 0-9.4726 1.2207-12.598 3.6621-3.125 2.4414-4.6875 5.7617-4.6875 9.9609 0 2.6367 0.48014 4.8014 1.4404 6.4941 0.96029 1.6927 2.5309 3.2145 4.7119 4.5654 2.181 1.3509 5.9245 2.9704 11.23 4.8584 5.5664 1.9206 9.7493 3.7842 12.549 5.5908 2.7995 1.8066 4.8421 3.8574 6.1279 6.1523 1.2858 2.2949 1.9287 5.07 1.9287 8.3252z" fill="#182650" fill-rule="nonzero"/>\n            <rect transform="translate(33.5 82) rotate(90) translate(-33.5 -82)" x="28.5" y="48.5" width="10" height="67" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(82 82) rotate(90) translate(-82 -82)" x="77" y="77" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(53 102) rotate(90) translate(-53 -102)" x="48" y="97" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(82 42) rotate(90) translate(-82 -42)" x="77" y="37" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(5 42) rotate(90) translate(-5 -42)" y="37" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(44 22) rotate(90) translate(-44 -22)" x="39" y="17" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(34 62) rotate(90) translate(-34 -62)" x="29" y="57" width="10" height="10" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(73 22) rotate(90) translate(-73 -22)" x="68" y="8" width="10" height="28" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(14.5 22) rotate(90) translate(-14.5 -22)" x="9.5" y="7.5" width="10" height="29" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(68 62) rotate(90) translate(-68 -62)" x="63" y="43" width="10" height="38" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(9.5 62) rotate(90) translate(-9.5 -62)" x="4.5" y="52.5" width="10" height="19" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(77.5 102) rotate(90) translate(-77.5 -102)" x="72.5" y="92.5" width="10" height="19" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(19 102) rotate(90) translate(-19 -102)" x="14" y="83" width="10" height="38" rx="5" fill="#2AB27B"/>\n            <rect transform="translate(43.5 42) rotate(90) translate(-43.5 -42)" x="38.5" y="18.5" width="10" height="47" rx="5" fill="#2AB27B"/>\n            <path d="m10.013 172h-2.6147v-20.164h-7.1213v-2.3225h16.857v2.3225h-7.1213v20.164zm21.656 0v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7739 0-3.0685 0.48193-3.8837 1.4458s-1.2228 2.543-1.2228 4.7373v8.8132h-2.5532v-23.933h2.5532v7.2444c0 0.87159-0.041015 1.5945-0.12305 2.1687h0.15381c0.50244-0.81006 1.2176-1.4484 2.1456-1.9149 0.92798-0.46656 1.9867-0.69983 3.1761-0.69983 2.061 0 3.6068 0.48962 4.6373 1.4689 1.0305 0.97925 1.5458 2.5353 1.5458 4.6681v10.997h-2.5532zm14.919 0.30762c-2.4917 0-4.4579-0.75878-5.8986-2.2764-1.4407-1.5176-2.161-3.6247-2.161-6.3215 0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826s-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm39.329 3.7529c0 3.5991-0.91003 6.4292-2.7301 8.4902-1.8201 2.061-4.3502 3.0916-7.5905 3.0916-3.312 0-5.8678-1.0126-7.6674-3.0377-1.7996-2.0252-2.6993-4.8834-2.6993-8.5748 0-3.6607 0.90233-6.4984 2.707-8.5133 1.8047-2.0149 4.3681-3.0223 7.6904-3.0223 3.23 0 5.7524 1.0254 7.5674 3.0762 1.815 2.0508 2.7224 4.8808 2.7224 8.4902zm-17.919 0c0 3.0454 0.64855 5.3551 1.9457 6.9291 1.2971 1.574 3.1813 2.361 5.6525 2.361 2.4917 0 4.3733-0.78442 5.6448-2.3533 1.2715-1.5689 1.9072-3.8811 1.9072-6.9368 0-3.0249-0.63317-5.3192-1.8995-6.8829-1.2664-1.5637-3.1402-2.3456-5.6217-2.3456-2.4917 0-4.3861 0.78698-5.6832 2.361-1.2971 1.574-1.9457 3.8631-1.9457 6.8676zm30.393 11.582c-1.0972 0-2.0995-0.20251-3.007-0.60754-0.90748-0.40503-1.6688-1.028-2.2841-1.8688h-0.18457c0.12305 0.98438 0.18457 1.9175 0.18457 2.7993v6.9368h-2.5532v-24.425h2.0764l0.35376 2.3071h0.12305c0.65625-0.92286 1.4202-1.5894 2.2917-1.9995 0.87159-0.41016 1.8713-0.61523 2.9993-0.61523 2.2354 0 3.9606 0.76391 5.1757 2.2917s1.8226 3.6709 1.8226 6.4292c0 2.7686-0.61779 4.9193-1.8534 6.4523-1.2356 1.533-2.9506 2.2994-5.1449 2.2994zm-0.36914-15.304c-1.7227 0-2.9685 0.4768-3.7375 1.4304s-1.1638 2.4712-1.1843 4.5527v0.56909c0 2.3687 0.39477 4.0631 1.1843 5.0834s2.0559 1.5304 3.7991 1.5304c1.4561 0 2.5968-0.58959 3.4222-1.7688 0.82544-1.1792 1.2382-2.8044 1.2382-4.8757 0-2.1021-0.41272-3.7145-1.2382-4.8373-0.82544-1.1228-1.9867-1.6842-3.4838-1.6842zm18.949 15.304c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.779 15.027v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689 1.0254 0.97925 1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm29.054-5.9832c0 1.979-0.71777 3.5222-2.1533 4.6296-1.4356 1.1074-3.3838 1.6611-5.8447 1.6611-2.666 0-4.7168-0.3435-6.1523-1.0305v-2.5225c0.92286 0.38965 1.9277 0.69726 3.0146 0.92285 1.0869 0.22559 2.1636 0.33838 3.23 0.33838 1.7432 0 3.0557-0.33068 3.9375-0.99206 0.88184-0.66138 1.3228-1.5817 1.3228-2.7609 0-0.7793-0.15637-1.4176-0.46912-1.9149-0.31274-0.49732-0.83569-0.95617-1.5688-1.3766-0.73316-0.42041-1.8483-0.89722-3.3453-1.4304-2.0918-0.74854-3.5863-1.6355-4.4835-2.6609s-1.3458-2.3635-1.3458-4.0144c0-1.7329 0.65112-3.1121 1.9534-4.1375 1.3023-1.0254 3.0249-1.5381 5.168-1.5381 2.2354 0 4.2912 0.41015 6.1677 1.2305l-0.81518 2.2764c-1.856-0.7793-3.6606-1.1689-5.4141-1.1689-1.3843 0-2.4661 0.29736-3.2454 0.89209s-1.1689 1.4202-1.1689 2.4763c0 0.7793 0.14355 1.4176 0.43066 1.9149s0.7716 0.95361 1.4535 1.3689 1.7252 0.87414 3.13 1.3766c2.3584 0.84082 3.9811 1.7432 4.868 2.707s1.3304 2.2148 1.3304 3.7529zm9.6592 4.1836c0.45117 0 0.88696-0.033324 1.3074-0.099975s0.75366-0.13586 0.99976-0.20764v1.9534c-0.27686 0.1333-0.68445 0.24353-1.2228 0.33069-0.53833 0.087159-1.0228 0.13074-1.4535 0.13074-3.2608 0-4.8911-1.7175-4.8911-5.1526v-10.028h-2.4148v-1.2305l2.4148-1.0613 1.0767-3.5991h1.4766v3.9067h4.8911v1.9841h-4.8911v9.9207c0 1.0151 0.24096 1.7944 0.7229 2.3379s1.1433 0.81518 1.9841 0.81518zm16.042 1.7996l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613s1.9816-0.38452 2.9762-0.38452c2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072s1.3407 0.7229 2.3456 0.7229zm24.456 1.7996v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm19.272-2.261h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9196-0.75365-5.1449-2.261-1.2253-1.5073-1.838-3.6504-1.838-6.4292 0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061523-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227s1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141s-2.0636-1.5304-3.8068-1.5304c-1.4971 0-2.6429 0.5819-3.4376 1.7457s-1.192 2.807-1.192 4.9296c0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78955 1.0972 1.9482 1.6458 3.4761 1.6458zm23.302 1.8303l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm20.61-15.365c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm16.011 14.904h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9195-0.75365-5.1449-2.261s-1.838-3.6504-1.838-6.4292c0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061524-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227 0.78443-0.94849 1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141-0.79468-1.0203-2.0636-1.5304-3.8068-1.5304-1.4971 0-2.6429 0.5819-3.4376 1.7457-0.79468 1.1638-1.192 2.807-1.192 4.9296 0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78956 1.0972 1.9482 1.6458 3.4761 1.6458zm24.117 1.8303h-2.6147v-22.487h12.535v2.3225h-9.9207v8.2288h9.3208v2.3225h-9.3208v9.613zm27.809-8.4441c0 2.7481-0.69213 4.8937-2.0764 6.4369-1.3843 1.5432-3.2966 2.3148-5.7371 2.3148-1.5073 0-2.8455-0.35376-4.0144-1.0613s-2.0713-1.7226-2.707-3.0454c-0.63575-1.3228-0.95361-2.8711-0.95361-4.645 0-2.7481 0.687-4.8885 2.061-6.4215 1.374-1.533 3.2812-2.2994 5.7217-2.2994 2.3584 0 4.2323 0.78442 5.6217 2.3533 1.3894 1.5689 2.0841 3.6914 2.0841 6.3677zm-12.843 0c0 2.1533 0.43066 3.7939 1.292 4.9219 0.86133 1.1279 2.1277 1.6919 3.7991 1.6919s2.9403-0.5614 3.8068-1.6842c0.86646-1.1228 1.2997-2.766 1.2997-4.9296 0-2.1431-0.43322-3.7709-1.2997-4.8834-0.86646-1.1126-2.1456-1.6688-3.8375-1.6688-1.6714 0-2.9326 0.54858-3.7837 1.6458-0.85108 1.0972-1.2766 2.7327-1.2766 4.9065zm25.009-8.7209c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm13.735-5.3218h6.3523c2.9839 0 5.1423 0.44604 6.4753 1.3381 1.333 0.8921 1.9995 2.302 1.9995 4.2297 0 1.333-0.3717 2.4327-1.1151 3.2992s-1.8278 1.4279-3.2531 1.6842v0.15381c3.4146 0.58448 5.1218 2.3789 5.1218 5.3833 0 2.0098-0.67931 3.5786-2.038 4.7065-1.3586 1.1279-3.2582 1.6919-5.6986 1.6919h-7.8442v-22.487zm2.6147 9.6284h4.3066c1.8457 0 3.1736-0.28967 3.9836-0.86902 0.81006-0.57935 1.2151-1.556 1.2151-2.9301 0-1.2612-0.45117-2.1713-1.3535-2.7301-0.90235-0.55884-2.3379-0.83826-4.3066-0.83826h-3.8452v7.3674zm0 2.2148v8.4133h4.6912c1.815 0 3.1813-0.35119 4.099-1.0536 0.91773-0.7024 1.3766-1.8021 1.3766-3.2992 0-1.3945-0.46911-2.4199-1.4073-3.0762-0.93824-0.65625-2.3661-0.98438-4.2836-0.98438h-4.4758zm19.964 10.644h-2.5532v-23.933h2.5532v23.933zm19.964-8.4441c0 2.7481-0.69213 4.8937-2.0764 6.4369-1.3843 1.5432-3.2966 2.3148-5.7371 2.3148-1.5073 0-2.8455-0.35376-4.0144-1.0613s-2.0713-1.7226-2.707-3.0454c-0.63575-1.3228-0.95361-2.8711-0.95361-4.645 0-2.7481 0.687-4.8885 2.061-6.4215 1.374-1.533 3.2812-2.2994 5.7217-2.2994 2.3584 0 4.2323 0.78442 5.6217 2.3533 1.3894 1.5689 2.0841 3.6914 2.0841 6.3677zm-12.843 0c0 2.1533 0.43066 3.7939 1.292 4.9219 0.86133 1.1279 2.1277 1.6919 3.7991 1.6919s2.9403-0.5614 3.8068-1.6842c0.86646-1.1228 1.2997-2.766 1.2997-4.9296 0-2.1431-0.43322-3.7709-1.2997-4.8834-0.86646-1.1126-2.1456-1.6688-3.8375-1.6688-1.6714 0-2.9326 0.54858-3.7837 1.6458-0.85108 1.0972-1.2766 2.7327-1.2766 4.9065zm24.056 8.7517c-2.4404 0-4.3297-0.75109-5.6678-2.2533-1.3381-1.5022-2.0072-3.6273-2.0072-6.3754 0-2.8198 0.67931-4.9988 2.038-6.5369 1.3586-1.5381 3.2941-2.3071 5.8063-2.3071 0.81006 0 1.6201 0.087157 2.4302 0.26148 0.81006 0.17432 1.4458 0.37939 1.9072 0.61523l-0.78442 2.1687c-0.56397-0.22559-1.1792-0.41272-1.8457-0.5614-0.66651-0.14868-1.2561-0.22302-1.7688-0.22302-3.4248 0-5.1372 2.1841-5.1372 6.5522 0 2.0713 0.41784 3.6606 1.2535 4.7681 0.8357 1.1074 2.0738 1.6611 3.7145 1.6611 1.4048 0 2.8455-0.30249 4.322-0.90747v2.261c-1.1279 0.58448-2.5481 0.87671-4.2605 0.87671zm10.782-8.9363c0.44092-0.62549 1.1125-1.4458 2.0149-2.4609l5.4448-5.7678h3.03l-6.8291 7.1829 7.3059 9.6746h-3.0916l-5.9524-7.9673-1.9226 1.6611v6.3062h-2.5225v-23.933h2.5225v12.689c0 0.56397-0.041015 1.4355-0.12305 2.6147h0.12305zm20.118 8.9363c-2.4404 0-4.3297-0.75109-5.6678-2.2533-1.3381-1.5022-2.0072-3.6273-2.0072-6.3754 0-2.8198 0.67932-4.9988 2.038-6.5369 1.3586-1.5381 3.2941-2.3071 5.8063-2.3071 0.81006 0 1.6201 0.087157 2.4302 0.26148 0.81006 0.17432 1.4458 0.37939 1.9072 0.61523l-0.78442 2.1687c-0.56397-0.22559-1.1792-0.41272-1.8457-0.5614-0.66651-0.14868-1.2561-0.22302-1.7688-0.22302-3.4248 0-5.1372 2.1841-5.1372 6.5522 0 2.0713 0.41784 3.6606 1.2535 4.7681 0.8357 1.1074 2.0738 1.6611 3.7145 1.6611 1.4048 0 2.8455-0.30249 4.322-0.90747v2.261c-1.1279 0.58448-2.5481 0.87671-4.2605 0.87671zm19.795-0.30762v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7739 0-3.0685 0.48193-3.8837 1.4458-0.81519 0.96387-1.2228 2.543-1.2228 4.7373v8.8132h-2.5532v-23.933h2.5532v7.2444c0 0.87159-0.041015 1.5945-0.12305 2.1687h0.15381c0.50244-0.81006 1.2176-1.4484 2.1456-1.9149s1.9867-0.69983 3.1761-0.69983c2.061 0 3.6068 0.48962 4.6373 1.4689s1.5458 2.5353 1.5458 4.6681v10.997h-2.5532zm18.165 0l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm15.473 1.7996h-2.5532v-16.857h2.5532v16.857zm-2.7686-21.426c0-0.58448 0.14355-1.0126 0.43066-1.2843 0.28711-0.27173 0.64599-0.40759 1.0767-0.40759 0.41016 0 0.76391 0.13843 1.0613 0.41528 0.29736 0.27686 0.44604 0.70239 0.44604 1.2766s-0.14868 1.0023-0.44604 1.2843c-0.29736 0.28198-0.65112 0.42297-1.0613 0.42297-0.43067 0-0.78955-0.14099-1.0767-0.42297-0.28711-0.28198-0.43066-0.71008-0.43066-1.2843zm19.718 21.426v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762-0.62549-0.67676-1.6047-1.0151-2.9377-1.0151-1.7637 0-3.0557 0.4768-3.876 1.4304s-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm25.994-20.472c-2.4712 0-4.422 0.82287-5.8524 2.4686-1.4304 1.6458-2.1456 3.899-2.1456 6.7599 0 2.9429 0.68957 5.2167 2.0687 6.8214s3.3453 2.4071 5.8986 2.4071c1.5689 0 3.3581-0.28198 5.3679-0.84595v2.2917c-1.5586 0.58448-3.4812 0.87671-5.7678 0.87671-3.312 0-5.8678-1.0049-7.6674-3.0146-1.7996-2.0098-2.6993-4.8655-2.6993-8.5671 0-2.3174 0.43322-4.3476 1.2997-6.0908 0.86646-1.7432 2.1174-3.0864 3.7529-4.0298 1.6355-0.94336 3.5607-1.415 5.7755-1.415 2.3584 0 4.4194 0.43066 6.1831 1.292l-1.1074 2.2456c-1.7022-0.79981-3.4043-1.1997-5.1064-1.1997zm17.55 3.3069c0.74854 0 1.4202 0.061523 2.0149 0.18457l-0.35376 2.3687c-0.69727-0.15381-1.3125-0.23071-1.8457-0.23071-1.3638 0-2.5301 0.5537-3.4991 1.6611-0.969 1.1074-1.4535 2.4866-1.4535 4.1375v9.0439h-2.5532v-16.857h2.1072l0.29224 3.1223h0.12305c0.62549-1.0972 1.3791-1.9431 2.261-2.5378 0.88184-0.59473 1.8508-0.89209 2.907-0.89209zm11.659 17.473c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.718 12.766h-0.13843c-1.1792 1.7124-2.9429 2.5686-5.291 2.5686-2.2046 0-3.9196-0.75365-5.1449-2.261s-1.838-3.6504-1.838-6.4292c0-2.7788 0.61523-4.9372 1.8457-6.4753 1.2305-1.5381 2.9429-2.3071 5.1372-2.3071 2.2866 0 4.04 0.83056 5.2603 2.4917h0.19995l-0.10767-1.2151-0.061524-1.1843v-6.8599h2.5532v23.933h-2.0764l-0.33838-2.261zm-5.1064 0.43066c1.7432 0 3.007-0.47424 3.7914-1.4227 0.78443-0.94849 1.1766-2.4789 1.1766-4.5912v-0.53833c0-2.3892-0.39734-4.0939-1.192-5.1141-0.79468-1.0203-2.0636-1.5304-3.8068-1.5304-1.4971 0-2.6429 0.5819-3.4376 1.7457s-1.192 2.807-1.192 4.9296c0 2.1533 0.39477 3.7786 1.1843 4.8757 0.78955 1.0972 1.9482 1.6458 3.4761 1.6458zm20.057 2.1379c-2.4917 0-4.4579-0.75878-5.8986-2.2764s-2.161-3.6247-2.161-6.3215c0-2.7173 0.66906-4.8757 2.0072-6.4753 1.3381-1.5996 3.1351-2.3994 5.391-2.3994 2.1123 0 3.7837 0.6947 5.0142 2.0841 1.2305 1.3894 1.8457 3.2223 1.8457 5.4987v1.615h-11.613c0.05127 1.979 0.55114 3.4812 1.4996 4.5066 0.94849 1.0254 2.284 1.5381 4.0067 1.5381 1.815 0 3.6094-0.37939 5.3833-1.1382v2.2764c-0.90235 0.38965-1.756 0.66907-2.5609 0.83826-0.80494 0.16919-1.7765 0.25378-2.9147 0.25378zm-0.69214-15.335c-1.3535 0-2.4327 0.44091-3.2377 1.3228-0.80494 0.88184-1.2792 2.102-1.4227 3.6606h8.8132c0-1.6099-0.35888-2.8429-1.0767-3.6991-0.71778-0.8562-1.7432-1.2843-3.0762-1.2843zm22.779 15.027v-10.905c0-1.374-0.31274-2.3994-0.93823-3.0762s-1.6047-1.0151-2.9377-1.0151c-1.7637 0-3.0557 0.4768-3.876 1.4304-0.82032 0.95362-1.2305 2.5276-1.2305 4.7219v8.844h-2.5532v-16.857h2.0764l0.41528 2.3071h0.12305c0.52295-0.83057 1.2561-1.474 2.1995-1.9303s1.9944-0.68445 3.1531-0.68445c2.0303 0 3.5581 0.48962 4.5835 1.4689s1.5381 2.5455 1.5381 4.6989v10.997h-2.5532zm13.243-1.7996c0.45118 0 0.88696-0.033324 1.3074-0.099975 0.42041-0.066651 0.75366-0.13586 0.99976-0.20764v1.9534c-0.27686 0.1333-0.68444 0.24353-1.2228 0.33069s-1.0228 0.13074-1.4535 0.13074c-3.2608 0-4.8911-1.7175-4.8911-5.1526v-10.028h-2.4148v-1.2305l2.4148-1.0613 1.0767-3.5991h1.4766v3.9067h4.8911v1.9841h-4.8911v9.9207c0 1.0151 0.24096 1.7944 0.7229 2.3379s1.1433 0.81518 1.9841 0.81518zm8.2288 1.7996h-2.5532v-16.857h2.5532v16.857zm-2.7686-21.426c0-0.58448 0.14355-1.0126 0.43066-1.2843 0.28711-0.27173 0.64599-0.40759 1.0767-0.40759 0.41016 0 0.76391 0.13843 1.0613 0.41528 0.29736 0.27686 0.44604 0.70239 0.44604 1.2766s-0.14868 1.0023-0.44604 1.2843c-0.29736 0.28198-0.65112 0.42297-1.0613 0.42297-0.43067 0-0.78955-0.14099-1.0767-0.42297-0.28711-0.28198-0.43066-0.71008-0.43066-1.2843zm18.549 21.426l-0.50757-2.3994h-0.12305c-0.84082 1.0562-1.6791 1.7714-2.5148 2.1456-0.8357 0.37427-1.879 0.5614-3.13 0.5614-1.6714 0-2.9813-0.43066-3.9298-1.292s-1.4227-2.0867-1.4227-3.676c0-3.4043 2.7224-5.1885 8.1672-5.3525l2.8608-0.092286v-1.0459c0-1.3228-0.28454-2.2994-0.85364-2.9301-0.5691-0.63062-1.4791-0.94592-2.7301-0.94592-1.4048 0-2.9941 0.43066-4.7681 1.292l-0.78442-1.9534c0.83057-0.45117 1.7406-0.80493 2.7301-1.0613 0.98951-0.25635 1.9816-0.38452 2.9762-0.38452 2.0098 0 3.4991 0.44604 4.4681 1.3381 0.969 0.8921 1.4535 2.3225 1.4535 4.2913v11.505h-1.8918zm-5.7678-1.7996c1.5894 0 2.8378-0.43579 3.7452-1.3074 0.90748-0.87159 1.3612-2.0918 1.3612-3.6606v-1.5227l-2.5532 0.10767c-2.0303 0.071778-3.494 0.38708-4.3912 0.94592-0.89722 0.55884-1.3458 1.4278-1.3458 2.6071 0 0.92286 0.27942 1.6252 0.83826 2.1072 0.55884 0.48194 1.3407 0.7229 2.3456 0.7229zm15.473 1.7996h-2.5532v-23.933h2.5532v23.933zm16.288-4.5989c0 1.5689-0.58447 2.7788-1.7534 3.6299-1.169 0.85108-2.8096 1.2766-4.9219 1.2766-2.2354 0-3.9785-0.35376-5.2295-1.0613v-2.3687c0.81006 0.41016 1.6791 0.73315 2.6071 0.96899s1.8226 0.35376 2.684 0.35376c1.333 0 2.3584-0.21277 3.0762-0.6383s1.0767-1.0741 1.0767-1.9457c0-0.65625-0.28454-1.2176-0.85364-1.6842s-1.6791-1.0177-3.33-1.6534c-1.5689-0.58448-2.684-1.0946-3.3453-1.5304s-1.1536-0.93054-1.4766-1.4843c-0.323-0.55371-0.4845-1.2151-0.4845-1.9841 0-1.374 0.55883-2.4584 1.6765-3.2531 1.1177-0.79468 2.6506-1.192 4.5989-1.192 1.815 0 3.5889 0.36914 5.3218 1.1074l-0.90747 2.0764c-1.6919-0.69727-3.2248-1.0459-4.5989-1.0459-1.21 0-2.1226 0.1897-2.7378 0.56909-0.61524 0.3794-0.92285 0.90234-0.92285 1.5688 0 0.45117 0.11536 0.83569 0.34607 1.1536 0.23071 0.31787 0.60241 0.62036 1.1151 0.90747s1.4971 0.70239 2.9531 1.2458c1.9995 0.72803 3.3505 1.4612 4.0529 2.1995 0.7024 0.73828 1.0536 1.6663 1.0536 2.7839z" fill="#182650" fill-rule="nonzero"/>\n          </g>\n        </g>\n      </g>\n    </svg>\n    <span class=\'buv-u-visually-hidden\'>',"</span>\n  "])),_ae("text.motto"))}var iue,aue,oue,sue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=e.showMotto,n=void 0!==r&&r;return He(Qse||(Qse=_(["\n  ","\n  <a href='https://www.blockcerts.org' title='","' class$='buv-c-logo  ","'>\n    ","\n  </a>"])),tue,_ae("text.blockcertsHint"),t,n?nue():rue())},uue=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.forceInPlace,r=void 0!==t&&t,n=e.interactive,i=void 0!==n&&n,a=e.theme,o=["buv-c-footer",r?"buv-c-footer--forced":"",a===ioe?"buv-c-footer--dark":""].join(" ");return He(iue||(iue=_(["\n  ","\n  <footer class$='","'>\n    ","\n    ","\n  </footer>"])),eue,o,i?He(aue||(aue=_(["<section>\n      <buv-file-upload></buv-file-upload>\n      <buv-verify-other-certificate></buv-verify-other-certificate>\n    </section>"]))):"",sue())}),{mapStateToProps:function(e){return{theme:_oe(e)}},ownProps:{forceInPlace:Boolean,interactive:Boolean}});window.customElements.define("buv-footer",uue);var cue,lue,fue=He(oue||(oue=_(["<style>.buv-o-overlay{z-index:100;box-shadow:0 0 30px rgba(0,0,0,0.25);background-color:#fff}.buv-c-modal{position:fixed;width:100%;height:100%;background-color:rgba(3,21,50,0.7);top:0;left:0;z-index:1000}.buv-c-modal.is-hidden{display:none}.buv-c-modal__content{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);width:100vw;min-width:300px;max-width:600px;min-height:calc(600px - 50px);padding:49px 38px 98px;box-sizing:border-box}@media only screen and (max-width: 600px){.buv-c-modal__content{height:100vh;min-height:100vh;top:0;left:0;transform:none}}.buv-c-modal__close-button{top:25px;right:25px}\n</style>"]))),hue=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).isOpen=!1,e.handleClick=e.handleClick.bind(g(e)),e}return s(r,[{key:"close",value:function(){this.isOpen=!1}},{key:"handleClick",value:function(){this.close(),this._props.onClose()}},{key:"_propertiesChanged",value:function(e,t,n){this._props=e,x(l(r.prototype),"_propertiesChanged",this).call(this,e,t,n)}},{key:"_render",value:function(){var e=["buv-c-modal","buv-qa-modal",this.isOpen?"":"is-hidden"].join(" ");return He(cue||(cue=_(["\n      ","\n      <div class$='","' onclick='","'>\n        <div class='buv-c-modal__content  buv-o-overlay' onclick='","'>\n          ","\n          <slot></slot>\n        </div>  \n      </div>\n    "])),fue,e,this.handleClick,(function(e){e.stopPropagation()}),dse({className:"buv-c-modal__close-button",onClick:this.handleClick}))}}],[{key:"properties",get:function(){return{isOpen:Boolean,onClose:Function}}}]),r}(Ge);window.customElements.define("buv-modal",hue);var due,pue,vue,yue,gue,bue,mue=He(lue||(lue=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}\n</style>"],["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}\n</style>"]))),wue=He(due||(due=_(["<style>.buv-c-error-message{background:rgba(208,2,27,0.1);border-radius:2px;letter-spacing:.05px;padding:10px}.buv-c-error-message--solid{background:#fff;border-radius:2px 2px 0 0;margin:0}.buv-c-error-message-title{color:#d0021b;font-weight:bold;display:block;margin-bottom:5px;font-size:15px}\n</style>"])));function xue(e){return function(e){return e.indexOf(".")>-1&&-1===e.indexOf(" ")}(e)?_ae(e):e}function _ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return null;var r=["buv-c-error-message","buv-qa-error-message",t?"buv-c-error-message--solid":""].join(" ");return He(pue||(pue=_(["\n    ","\n    <p class$='","'>\n      <span class='buv-c-error-message-title'>","</span>\n      ","\n    </p>"])),wue,r,_ae("errors.errorLabel"),xue(e))}function kue(e){var t=e.label;e.code;var r,n=e.status,i=e.errorMessage,a=e.isParent,o=e.isFirst,s=e.isTestChain,u=["buv-o-text-15","buv-c-verification-step","buv-c-badge",o?"is-first":"","is-".concat(n),s?"is-test":""].join(" ");return r=a?He(vue||(vue=_(["","<dt class$='","'>","</dt>"])),mue,u,t):He(yue||(yue=_(["","<dd class='buv-c-verification-step  buv-c-verification-substep  buv-o-text-12'>\n      ","\n      ","\n    </dd>"])),mue,t,_ue(i)),He(gue||(gue=_(["",""])),r)}var Sue,Eue,Iue,Aue=He(bue||(bue=_(["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==\")}.buv-c-final-verification-step.is-failure::after{content:'\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}\n</style>"],["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==\")}.buv-c-final-verification-step.is-failure::after{content:'\\\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}\n</style>"])));function Tue(e,t){return e.description?He(Sue||(Sue=_(["<p class='buv-c-verification-step__description  buv-qa-final-step-description'>","</p>"])),e.description.replace("${chain}",t)):""}function Pue(e){return e.verificationStatus}function Oue(e,t){const r=zae(e).find((e=>"proofVerification"===e.code)).suites?.find((e=>e.proofType===t));return r.subSteps.every((e=>e.status===Cf.SUCCESS))?Cf.SUCCESS:r.subSteps.some((e=>e.status===Cf.FAILURE))?Cf.FAILURE:""}function Cue(e){return e.showVerificationModal}var Mue,Nue=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chain,r=void 0===t?"":t,n=e.transactionLink,i=void 0===n?"":n,a=e.isTestChain,o=e.isVisible,s=void 0!==o&&o,u=e.finalStep,c=void 0===u?null:u,l=e.hideLink,f=void 0!==l&&l,h=e.status,d=void 0!==h&&h,p=e.standalone,v=void 0!==p&&p;if(c){var y=[v?"buv-c-final-verification-step--standalone-wrapper":"","is-".concat(d),a?"is-test":""].join(" "),g=["buv-c-final-verification-step","buv-qa-final-verification-step",v?"buv-c-final-verification-step--standalone":"","buv-qa-verification-step",s?"is-visible":"",a?"is-test":"","is-".concat(d),d&&!v?"buv-c-badge  buv-c-badge--large":""].join(" "),b=["buv-c-verification-substep",v?"":"buv-u-excluded-from-flow","buv-u-full-width","buv-o-text-12","is-final",s?"is-visible":""].join(" "),m=c.label,w=Tue(c,r),x=!f&&c.linkText?He(Eue||(Eue=_(["<a class='buv-o-link' href='","' hidden?='","'>\n        <span class='buv-o-link__text--underline  buv-qa-transaction-link'>","</span>\n      </a>"])),i,!i,c.linkText):"";return He(Iue||(Iue=_(["\n    ","\n    <div class$='","'>\n      <dt class$='","'>","</dt>\n      <dd class$='","'>\n        ","\n        ","\n      </dd>\n      <slot></slot>\n    </div>\n  "])),Aue,y,g,m,b,w,x)}}),{mapStateToProps:function(e){return{finalStep:Kae(e),chain:Bae(e),transactionLink:jae(e),isTestChain:Uae(e),status:Pue(e)}},ownProps:{isVisible:Boolean,hideLink:Boolean,standalone:Boolean}});window.customElements.define("buv-final-verification-step",Nue);var Rue,Lue=He(Mue||(Mue=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-c-substeps-list__link::after{content:'';width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid #768087;display:inline-block;vertical-align:2px;margin:0 6px;-webkit-transition:-webkit-transform .3s ease-in;-o-transition:transform .3s ease-in;transition:transform .3s ease-in}.buv-c-substeps-list__link.is-open::after{transform:rotate(180deg)}.buv-c-substeps-list__list{max-height:0;overflow:scroll;-webkit-transition:max-height .3s ease-in;-o-transition:max-height .3s ease-in;transition:max-height .3s ease-in;padding-left:50px;margin-left:-50px;padding-top:5px}.buv-c-substeps-list__list.is-open{height:auto}.buv-c-substeps-list__list.is-nested{padding-left:60px}\n</style>"])));window.customElements.define("buv-substeps-list",class extends Ge{isOpen;wasForcedOpen;resetOpen;totalHeight;heightWasReset;isNested;hasNestedList;renderEvent;constructor(){super(),this.isOpen=!1,this.wasForcedOpen=!1,this.resetOpen=!1,this.toggleOpen=this.toggleOpen.bind(this),this.totalHeight=0,this.heightWasReset=!1,this.hasNestedList=!1,this.renderEvent=null}static get properties(){return{subSteps:[],suites:[],isOpen:Boolean,hasError:Boolean,isNested:Boolean}}toggleOpen(){this.wasForcedOpen&&!this.resetOpen&&(this.isOpen=!0,this.resetOpen=!0),this.isOpen=!this.isOpen}_didRender(){if(0===this.totalHeight){const e=this.shadowRoot.querySelectorAll(".buv-js-substeps-list__list")[0],t=e?Array.from(e.childNodes):[];this.totalHeight=t.reduce(((e,t)=>t.getBoundingClientRect?e+t.getBoundingClientRect().height:e),0),this.wasForcedOpen&&!this.heightWasReset&&(e.style.maxHeight=this.totalHeight+"px",this.heightWasReset=!0)}this.isNested&&!this.renderEvent&&(this.renderEvent=new CustomEvent("child-list-rendered",{detail:{childHeight:this.totalHeight},bubbles:!0,composed:!0}),this.dispatchEvent(this.renderEvent))}getRenderableSuites(e){if(!e||!e.length)return[];const t=e.filter((e=>e.subSteps.length>0)).filter((e=>e.subSteps.some((e=>e.status))));return 0===t.length?[]:(this.hasNestedList=t.length>1,this.shadowRoot.addEventListener("child-list-rendered",(e=>{this.totalHeight+=e.detail.childHeight})),t)}renderSuiteTitle(e,t){return 1===t.length?null:He`<dt class='buv-o-text-12 buv-o-text-bold'>Proof type: ${e.proofType}</dt>`}renderSuites(e,t){if(e)return e.map((r=>He`
            ${this.renderSuiteTitle(r,e)}
            <buv-substeps-list subSteps='${r.subSteps}' hasError?='${t}' isNested?='${!0}'></buv-substeps-list>`))}_render({subSteps:e=[],suites:t=[],hasError:r=!1,isNested:n=!1}={}){let i=JSON.parse(JSON.stringify(e)),a=this.getRenderableSuites(t);if(1===a.length){i=JSON.parse(JSON.stringify(i)).concat(a[0].subSteps),a=null}this.isNested=n,!this.wasForcedOpen&&r&&(this.isOpen=!0,this.wasForcedOpen=!0);const o=i.filter((e=>e.status)),s=o.length||a.length;if(0===s)return null;const u=`${s} ${_ae("text","item",!0,s)}`,c=this.isOpen?this.totalHeight:1,l=["buv-o-text-12","buv-o-link","buv-c-substeps-list__link",this.isOpen?"is-open":""].join(" "),f=["buv-c-substeps-list__list","buv-js-substeps-list__list",this.isOpen?"is-open":"",this.hasNestedList?"is-nested":""].join(" ");return He`
    ${Lue}
    <a title='${_ae("text.substepsListHint")}' onclick='${this.toggleOpen}' class$='${l}'>
      <span class='buv-o-link__text--underline'>${this.isOpen?_ae("text.substepsListClose"):u}</span>
    </a>
    <div class$='${f}' style$='max-height: ${c}px'>
      ${o.map((e=>He`${kue(e)}`))} 
      ${this.renderSuites(a,r)}
    </div>
    `}});var jue=He(Rue||(Rue=_(["<style>.buv-c-verification-process{position:relative}.buv-c-verification-progress-bar{position:absolute;left:13px;top:0;width:14px;display:flex;flex-direction:column;height:100%}.buv-c-verification-progress-bar__tube{min-height:14px;transition:flex .4s ease-in-out, max-height .4s ease-in;background-color:#2ab27b;border-radius:7px;flex-grow:0;opacity:0}.buv-c-verification-progress-bar__tube.has-started{flex-grow:1;opacity:1}.buv-c-verification-progress-bar__tube.is-test{background-color:#d8d8d8}.buv-c-verification-progress-bar__tube.has-errored{background-color:#d0021b}.buv-c-verification-progress-bar.no-transition{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}.buv-c-verification-process__step-list{padding-left:46px;margin-top:0}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"])));window.customElements.define("buv-verification-process-raw",class extends Ge{listElement;static get properties(){return{steps:[],transactionLink:String,hasError:Boolean,isTestChain:Boolean}}verificationInProgressTemplate(){return He`
        <span class='buv-u-visually-hidden'>${_ae("text.verificationStepProgress")}</span>
        <svg width='20' height='7' viewBox='0 0 120 30' xmlns='http://www.w3.org/2000/svg'><circle cx='15' cy='15' r='15'><animate attributeName='r' from='15' to='15' begin='0s' dur='0.8s' values='15;9;15' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from='1' to='1' begin='0s' dur='0.8s' values='1;.5;1' calcMode='linear' repeatCount='indefinite'/></circle><circle cx='60' cy='15' r='9' fill-opacity=''.9'><animate attributeName='r' from='9' to='9' begin='0s' dur='0.8s' values='9;15;9' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from=''.5' to='.5' begin='0s' dur='0.8s' values='.5;1;.5' calcMode='linear' repeatCount='indefinite'/></circle><circle cx='105' cy='15' r='15'><animate attributeName='r' from='15' to='15' begin='0s' dur='0.8s' values='15;9;15' calcMode='linear' repeatCount='indefinite'/><animate attributeName='fill-opacity' from='1' to='1' begin='0s' dur='0.8s' values='1;.5;1' calcMode='linear' repeatCount='indefinite'/></circle></svg>
    `}_didRender(){this.listElement||(this.listElement=this.shadowRoot.querySelectorAll(".buv-js-verification-process__step-list")[0])}_render({steps:e,transactionLink:t,hasError:r,isTestChain:n}){const i=e.filter((e=>e.status!==Cf.DEFAULT)).map(((e,t)=>He`
        ${kue({...e,isParent:!0,isFirst:0===t,isTestChain:n})}
        ${e.status===Cf.STARTING?He`${this.verificationInProgressTemplate()}`:He`<buv-substeps-list subSteps='${e.subSteps}' suites='${e.suites}' hasError?='${r}'></buv-substeps-list>`}
    `)),a=["buv-c-verification-progress-bar__tube","buv-qa-verification-progress-bar__tube",r?"has-errored":"",n?"is-test":"",i.length?"has-started":""].join(" ");let o=`${this.listElement?this.listElement.getBoundingClientRect().height:0}px`;const s=e.every((e=>e.status===Cf.SUCCESS))||e.some((e=>e.status===Cf.FAILURE));return s&&(o="100%"),He`
    ${jue}
    <section class='buv-c-verification-process'>
      <div class='buv-c-verification-progress-bar' >
        <div class$='${a}' style$='max-height: ${o}'></div>
      </div>  
      <dl class='buv-c-verification-process__step-list  buv-js-verification-process__step-list'>
        ${i}
        <buv-final-verification-step isVisible='${s&&!r}'></buv-final-verification-step>
      </dl>
    </section>
  `}});var Due,Bue=soe((function({steps:e,transactionLink:t,hasError:r,isTestChain:n}){return He`<buv-verification-process-raw
    steps='${e}'
    hasError?='${r}'
    isTestChain?='${n}'
    style='max-width: 100%;'
    ></buv-verification-process-raw>`}),{mapStateToProps:function(e){return{steps:JSON.parse(JSON.stringify(zae(e))),isTestChain:Uae(e),hasError:Vae(e)}}});window.customElements.define("buv-verification-process",Bue);var Uue,Fue=soe((function(e){var t=e.isOpen,r=e.onClose;return He(Due||(Due=_(["\n    ","\n    <buv-modal isOpen?='","' onClose='","'>\n      <div class='buv-c-verification-modal__content'>\n        <buv-card-certificate class='buv-c-verification-modal__certificate' hideRecordLink hideVerifyButton></buv-card-certificate>\n        <hr class='buv-c-verification-modal__separator'/>\n        <buv-verification-process class='buv-c-verification-modal__process'></buv-verification-process>\n      </div>\n      <buv-footer forceInPlace></buv-footer>\n    </buv-modal>\n  "])),Bse,t,r)}),{mapDispatchToProps:{onClose:Poe.bind(null,!1)},mapStateToProps:function(e){return{isOpen:Cue(e)}}});window.customElements.define("buv-verification-modal",Fue);var zue,Hue,Vue=He(Uue||(Uue=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-drag-and-drop__droparea{z-index:100;background-color:rgba(0,0,0,0.1);display:none;position:absolute;top:0;left:0;width:100%;height:100%}.buv-c-drag-and-drop__droparea.is-active{display:block}\n</style>"])));var Kue=function(e){c(r,e);var t=m(r);function r(){var e;return a(this,r),(e=t.call(this)).isDraggedOver=!1,e.denyDrop=!1,e.handleDragEnter=e.handleDragEnter.bind(g(e)),e.handleDragOver=e.handleDragOver.bind(g(e)),e.handleDragLeave=e.handleDragLeave.bind(g(e)),e.handleDrop=e.handleDrop.bind(g(e)),e}return s(r,[{key:"handleDragEnter",value:function(){this.isDraggedOver=!0}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDragLeave",value:function(){this.isDraggedOver=!1}},{key:"handleDrop",value:function(e){e.preventDefault(),this.isDraggedOver=!1;var t=e.dataTransfer.files[0];this.denyDrop=!function(e){var t=e.name;return"json"===t.substr(t.length-4,4)}(t),this.denyDrop||this._props.onDrop(t)}},{key:"_propertiesChanged",value:function(e,t,n){this._props=e,x(l(r.prototype),"_propertiesChanged",this).call(this,e,t,n)}},{key:"_render",value:function(){var e=["buv-c-drag-and-drop__droparea",this.isDraggedOver?"is-active":""].join(" "),t=this.denyDrop?_ae("errors.invalidFormatDragAndDrop"):"";return He(zue||(zue=_(["\n    ","\n    <div ondragenter='","'>\n      <div class$='","'\n        ondragover='","'\n        ondragleave='","'\n        ondrop='","'\n      ></div>\n      <span>","</span>\n      <slot></slot>\n    </div>"])),Vue,this.handleDragEnter,e,this.handleDragOver,this.handleDragLeave,this.handleDrop,t)}}],[{key:"properties",get:function(){return{isDraggedOver:Boolean,denyDrop:Boolean,onDrop:Function}}}]),r}(Ge);window.customElements.define("buv-drag-and-drop-raw",Kue);var que,Wue=soe((function(e){return He(Hue||(Hue=_(["\n  <buv-drag-and-drop-raw\n    onDrop='","'\n  >\n  <slot></slot>\n</buv-drag-and-drop-raw>"])),e.onDrop)}),{mapDispatchToProps:{onDrop:Hse}});window.customElements.define("buv-drag-and-drop",Wue);var Gue,Jue,Xue,$ue,Yue,Zue,Que=He(que||(que=_(["<style>.buv-c-verifier-main{font-family:'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;color:#031532;position:relative}.buv-c-verifier-layout{display:flex;flex-direction:column}.buv-c-verifier-body{background-color:#fff;flex-grow:1}.buv-c-verifier-body--padded{padding:20px}\n</style>"]))),ece=He(Gue||(Gue=_(["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-card{position:relative;display:flex;margin-bottom:20px}.buv-c-card__img-wrapper{margin-right:1.5vw;min-width:50px;width:20%}.buv-c-card__img{max-width:100%;max-height:100%}.buv-c-card__title-wrapper{display:flex;flex-direction:column;justify-content:center}.buv-c-card__title{font-size:calc(16px + 0.5vw);margin-top:0;margin-bottom:0;font-weight:400;padding-right:100px}.buv-c-card__title--no-padding{padding:0}.buv-c-card__recipient{font-weight:600;margin:6px 0 12px}.buv-c-card__record-link{position:absolute;top:0;right:0;line-height:30px}.buv-c-card__record-link::after{content:'';border:solid currentColor;border-width:0 2px 2px 0;width:5px;height:5px;transform:rotate(-45deg);font-weight:bold;display:inline-block;margin-left:5px}.buv-c-card__verify-button{float:right}@media only screen and (max-width: 600px){.buv-c-card__title{font-size:16px}.buv-c-card__recipient{margin:6px 0}.buv-c-card__img-wrapper{margin-right:18px}}\n</style>"])));var tce=soe((function(e){var t=e.hasCertificateDefinition,r=e.recipientName,n=e.certificateTitle,i=e.issuedOn,a=e.issueDate,o=e.issuerName,s=e.recordLink,u=e.hideVerifyButton,c=e.hideRecordLink;if(!t)return null;s||c||(c=!0);var l=["buv-c-card__title",c?"buv-c-card__title--no-padding":""].join(" ");return He($ue||($ue=_(["\n      ","\n      <section class='buv-c-card'>\n        <div class='buv-c-card__img-wrapper'>\n          ","\n        </div>\n        <div class='buv-c-card__title-wrapper'>\n          <h1 class$=",">","</h1>\n          <h2 class$='","  buv-c-card__recipient'>","</h2>\n          <span class='buv-o-text-12'>"," <time datetime$='","'>","</time> "," ","</span>\n        </div>\n      ","\n      </section>\n      ","\n    "])),ece,function(e){return new Promise((function(t){var r=new Image;r.addEventListener("load",(function(){t(He(Jue||(Jue=_(["<img src='","' alt='","' class='buv-c-card__img'/>"])),e.issuerLogo,e.issuerName))})),r.addEventListener("error",(function(){t(He(Xue||(Xue=_(["<p class='buv-o-text-15'>","</p>"])),e.issuerName))})),r.src=e.issuerLogo}))}(e),l,n,l,r,_ae("text.issued"),i,a,_ae("text.by"),o,c?"":He(Yue||(Yue=_(["<a class='buv-o-text-12  buv-o-link  buv-c-card__record-link  qa-card-record-link' href='","' target='_blank'>\n    <span class='buv-o-link__text--underline'>","</span>\n    </a>"])),s,_ae("text.viewRecord")),u?"":He(Zue||(Zue=_(["<buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>\n      <buv-verify-button type='link'>","</buv-verify-button>\n    </buv-final-verification-step>"])),_ae("text.verifyAgain")))}),{mapStateToProps:function(e){return{hasCertificateDefinition:!!Sae(e),recipientName:Tae(e),certificateTitle:Pae(e),issueDate:Aae(e),issuedOn:Iae(e),issuerName:Oae(e),issuerLogo:Cae(e),recordLink:Nae(e)}},ownProps:{hideRecordLink:Boolean,hideVerifyButton:Boolean}});window.customElements.define("buv-card-certificate",tce);
/**
   * @license
   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
var rce,nce,ice=function(e){return function(e){return e.__litDirective=!0,e}((function(t){var r=document.createElement("template");r.innerHTML=e,t.setValue(document.importNode(r.content,!0))}))},ace=He(rce||(rce=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-full-certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;display:block;font-family:serif;text-align:center;color:#49555f;font-size:12px;overflow:auto;word-wrap:break-word;height:100vh;max-height:calc(100vh - 150px);line-height:initial}.buv-c-full-certificate section{max-width:100%;padding:0}.buv-c-full-certificate img{max-width:100%;height:auto;width:inherit}@media only screen and (min-width: 640px){.buv-c-full-certificate{font-size:16px}}.buv-c-full-certificate__button{margin-top:15px}.buv-c-full-certificate__details{display:flex;justify-content:space-between;margin-top:15px}.buv-c-full-certificate__details-list{min-width:calc(100% - 190px);width:calc(100% - 105px)}\n</style>"]))),oce=He(nce||(nce=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate-details{display:flex;margin:0;position:relative;padding-bottom:60px}@media only screen and (max-width: 750px){.buv-c-certificate-details{flex-direction:column;padding-bottom:0}}.buv-c-certificate-details--column{flex-direction:column;padding-bottom:0}.buv-c-certificate-details__group{box-sizing:border-box;padding-right:15px;margin-top:15px}.buv-c-certificate-details__group--row{max-width:33%;margin-top:0}@media only screen and (max-width: 750px){.buv-c-certificate-details__group--row{max-width:100%}}.buv-c-certificate-details__title{margin-bottom:5px;text-transform:uppercase;font-weight:600}.buv-c-certificate-details__value{margin:0;word-break:break-all}.buv-c-certificate-details__standalone{position:absolute;bottom:0}@media only screen and (max-width: 750px){.buv-c-certificate-details__standalone{position:initial;margin-top:15px}}.buv-c-certificate-details--inline{display:inline-block;margin:0 0 5px}\n</style>"])));const sce={en:function(e){const t=_ae("numbers","ordinal"),r=e%100;return t[(r-20)%10]||t[r]||t[0]},fr:function(e){const t=_ae("numbers","ordinal");return 1===e?t[e]:t[0]},es:()=>_ae("numbers","ordinal"),it:()=>_ae("numbers","ordinal"),mt:e=>_ae("numbers","ordinal")[e-1]};function uce(e){return"mt"===mae.locale?sce[mae.locale](e):e+sce[mae.locale](e)}var cce,lce=He(cce||(cce=_(["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==\")}.buv-c-final-verification-step.is-failure::after{content:'\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}.buv-c-suite-verification-status{margin-left:30px;font-weight:400}.buv-c-suite-verification-status.is-visible{font-size:13px}.buv-c-suite-verification-status.is-visible::after{width:20px;height:20px;left:-28px}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"],["<style>.buv-o-link{cursor:pointer;text-decoration:none;color:currentColor}.buv-o-link__text--underline{border-bottom:1px solid}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-badge{position:relative}.buv-c-badge::before{content:'';position:absolute;left:-32px;top:0;width:12px;height:12px;background-color:#fff;border-radius:50%;-webkit-transition:all .2s ease-out;-o-transition:all .2s ease-out;transition:all .2s ease-out;z-index:2;box-sizing:content-box;box-shadow:0 2px 4px 0 rgba(22,40,55,0.21)}.buv-c-badge--medium::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-badge--large::before{width:38px;height:38px;left:-45px;top:-9px}.buv-c-verification-step{position:relative;margin:15px 0 5px;font-weight:600}.buv-c-verification-step.is-first{margin-top:0}.buv-c-verification-substep{margin:0;font-weight:400;color:rgba(3,21,50,0.7);padding:3px 0 0;line-height:1.71428571}.buv-c-verification-step.is-success::before,.buv-c-verification-step.is-failure::before{left:-38px;top:-4px;width:24px;height:24px}.buv-c-verification-substep::before{left:-28px;top:10px;width:4px;height:4px;background-color:rgba(255,255,255,0.8)}.buv-c-verification-step::after{content:'';position:absolute;z-index:3;-webkit-transition:opacity .3s ease-out .2s;-o-transition:opacity .3s ease-out .2s;transition:opacity .3s ease-out .2s;opacity:0}.buv-c-verification-step.is-success::after,.buv-c-verification-step.is-failure::after{opacity:1}.buv-c-verification-step.is-success::after{border:solid #2ab27b;border-width:0 2px 2px 0;left:-29px;width:5px;height:11px;transform:rotate(45deg)}.buv-c-verification-step.is-success.is-test::after{border-color:#031532}.buv-c-verification-step.is-failure::after{content:'\\\\274C';left:-32px;top:-1px;font-size:11px;color:#d0021b}@supports (-ms-ime-align: auto){.buv-c-verification-step.is-failure::after{left:-34px}}.buv-c-final-verification-step{white-space:nowrap;opacity:0;position:relative;font-weight:600;font-size:15px;color:#031532;margin-top:15px}.buv-c-final-verification-step.is-success{font-size:21px;color:#2ab27b;line-height:19px}.buv-c-final-verification-step--standalone{margin-top:0}.buv-c-final-verification-step.is-test,.buv-c-final-verification-step--standalone.is-success{font-size:15px;color:#031532}.buv-c-final-verification-step.is-failure{font-size:13px;font-weight:400}.buv-c-verification-step__description{margin:0}.buv-c-final-verification-step.is-visible{opacity:1}.buv-c-final-verification-step.is-visible::after{opacity:1}.buv-c-final-verification-step::after{position:absolute;content:'';height:26px;width:23px;left:-37px;top:-3px;background-image:url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyM3B4IiB2aWV3Qm94PSIwIDAgMjAgMjMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8ZyBpZD0iVmVyaWZpY2F0aW9uIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1NC4wMDAwMDAsIC00NzQuMDAwMDAwKSIgZmlsbD0iIzJBQjI3QiI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4LjAwMDAwMCwgNDY5LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2LDUgTDYsOS4xODE4MTgxOCBMNiwxNS40NTQ1NDU1IEM2LDIxLjI1NjgxODIgMTAuMjY2NjY2NywyNi42ODI3MjczIDE2LDI4IEMyMS43MzMzMzMzLDI2LjY4MjcyNzMgMjYsMjEuMjU2ODE4MiAyNiwxNS40NTQ1NDU1IEwyNiw5LjE4MTgxODE4IEwxNiw1IEwxNiw1IFogTTksMTcuNzUzNzE1NSBMMTAuNTI3NSwxNi4yNTY5MDAyIEwxMy4zMzMzMzMzLDE4Ljk5NTc1MzcgTDIwLjQ3MjUsMTIgTDIyLDEzLjUwNzQzMSBMMTMuMzMzMzMzMywyMiBMOSwxNy43NTM3MTU1IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=\");background-repeat:no-repeat;background-position:center;background-size:contain;z-index:3}.buv-c-final-verification-step.is-test::after{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDE4IDE4IiBmaWxsPSIjRjVBNjIzIj48cGF0aCBkPSJNLjUgMTZoMTdMOSAxIC41IDE2em05LjUtMkg4di0yaDJ2MnptMC0zSDhWN2gydjR6Ii8+PC9zdmc+IA==\")}.buv-c-final-verification-step.is-failure::after{content:'\\\\274C';font-size:17px;top:-1px;color:#d0021b;background:none}.buv-c-final-verification-step--standalone-wrapper{padding:10px;box-sizing:border-box;border-left:3px solid}.buv-c-final-verification-step--standalone-wrapper.is-success{background-color:rgba(42,178,123,0.1);border-color:#2ab27b}.buv-c-final-verification-step--standalone-wrapper.is-failure{background-color:rgba(208,2,27,0.1);border-color:#d0021b}.buv-c-final-verification-step--standalone-wrapper.is-test{background-color:rgba(245,166,35,0.1);border-color:#f5a623}.buv-c-final-verification-step--standalone{margin:0 0 5px 30px;white-space:unset}.buv-c-final-verification-step--standalone.is-failure{margin-bottom:0}.buv-c-final-verification-step--standalone::after{left:-30px}.buv-c-verification-substep.is-final{display:none;line-height:1.35}.buv-c-verification-substep.is-final.is-visible{display:block}.buv-c-verification-substep::after{display:none}.buv-u-excluded-from-flow{position:absolute}.buv-u-full-width{width:100%}.buv-c-suite-verification-status{margin-left:30px;font-weight:400}.buv-c-suite-verification-status.is-visible{font-size:13px}.buv-c-suite-verification-status.is-visible::after{width:20px;height:20px;left:-28px}.buv-u-visually-hidden{position:absolute !important;clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height:1px !important;width:1px !important;overflow:hidden}\n</style>"])));const fce=soe((function({isTestChain:e,status:t}){const r=["buv-c-final-verification-step","buv-c-suite-verification-status","is-visible",`is-${t}`,e?"is-test":""].join(" "),n=function(e,t){let r="signatureStatusSuccess";return e&&(r="signatureStatusTestSuccess"),t===Cf.FAILURE&&(r="signatureStatusFailure"),_ae("text",r)}(e,t);return He`
      ${lce}
      <a class$='${r}' title$='${n}'>
          <span class='buv-u-visually-hidden'>${n}</span>
          <slot></slot>
      </a>
  `}),{mapStateToProps:(e,t)=>({isTestChain:Fae(e,parseInt(t.index,10)),status:Oue(e,t.suiteType)}),ownProps:{suiteType:String,index:String}});window.customElements.define("buv-suite-verification-status",fce);const hce=soe((function({recipientName:e,issuedOn:t,issueDate:r,issuerName:n,issuerProfileDomain:i=[],issuerProfileUrl:a=[],issuerPublicKey:o=[],transactionId:s=[],direction:u,hideRecipientName:c,signatureSuiteType:l=[]}){const f=[];c||f.push({title:_ae("text.recipient"),value:e}),f.push({title:_ae("text.issueDate"),value:He`<time datetime$='${t}'>${r}</time>`},{title:_ae("text.issuerName"),value:n||_ae("errors.noIssuerName")});for(let e=0;e<o.length;e++){let t="";o.length>1&&(t=`${uce(e+1)} `),l[e]&&f.push({title:`${t}${_ae("text.signatureSuiteType")}`,value:He`<buv-suite-verification-status suiteType$='${l[e]}' index$='${e}'>
            ${l[e]}
        </buv-suite-verification-status>`}),i[e]&&f.push({title:`${t}${_ae("text.issuerProfileDomain")}`,value:He`<a href$='${a[e]}' target="_blank">${i[e]}</a>`}),o[e]&&f.push({title:`${t}${_ae("text.issuerPublicKey")}`,value:o[e]}),s[e]&&f.push({title:`${t}${_ae("text.transactionId")}`,value:s[e]})}const h="column"===u,d=f.map((e=>function({title:e,value:t,isDisplayColumn:r,renderInline:n=!1}){const i=["buv-c-certificate-details__group",r?"":"buv-c-certificate-details__group--row"].join(" "),a=["buv-c-certificate-details__title",r?"":"buv-o-text-11"].join(" "),o=["buv-c-certificate-details__value",n?"buv-c-certificate-details--inline":""].join(" ");return He`<div class$='${i}'>
    <dt class$='${a}'>${e}</dt>
    <dd class$='${o}'>${t}</dd>
  </div>`}({...e,isDisplayColumn:h}))),p=["buv-c-certificate-details","buv-o-text-13",h?"buv-c-certificate-details--column":""].join(" ");return He`
    ${oce}
    <dl class$='${p}'>
        ${d}
    </dl>
  `}),{mapStateToProps:e=>({recipientName:Tae(e),issueDate:Aae(e),issuedOn:Iae(e),issuerName:Oae(e),transactionId:Dae(e),issuerPublicKey:qae(e),issuerProfileDomain:Gae(e),issuerProfileUrl:Wae(e),signatureSuiteType:Jae(e)}),ownProps:{direction:String,hideRecipientName:Boolean}});var dce;window.customElements.define("buv-certificate-details",hce);var pce,vce,yce=He(dce||(dce=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-full-certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;display:block;font-family:serif;text-align:center;color:#49555f;font-size:12px;overflow:auto;word-wrap:break-word;height:100vh;max-height:calc(100vh - 150px);line-height:initial}.buv-c-full-certificate section{max-width:100%;padding:0}.buv-c-full-certificate img{max-width:100%;height:auto;width:inherit}@media only screen and (min-width: 640px){.buv-c-full-certificate{font-size:16px}}.buv-c-full-certificate__button{margin-top:15px}.buv-c-full-certificate__details{display:flex;justify-content:space-between;margin-top:15px}.buv-c-full-certificate__details-list{min-width:calc(100% - 190px);width:calc(100% - 105px)}.buv-c-full-certificate .buv-c-full-certificate-img{max-width:125px;max-height:125px}.buv-c-full-certificate__titles::before,.buv-c-full-certificate__titles::after{content:' ';display:block;background-color:#edf1f4;width:30%;text-align:center;margin:20px auto;height:2px}.buv-c-full-certificate__title{font-weight:normal;margin:0}.buv-c-full-certificate__title--name{color:#000;font-size:30px;margin-bottom:10px}.buv-c-full-certificate__title--main{font-size:21px;margin-bottom:10px}.buv-c-full-certificate__title--sub{font-size:16px;font-style:italic}.buv-c-full-certificate__description{margin:0 0 40px;line-height:1.5}.buv-c-full-certificate-signatures{list-style-type:none;display:flex;justify-content:space-around;width:100%;margin:0 0 20px;padding:0}.buv-c-full-certificate-signatures__signature{margin-right:30px;display:flex;flex-direction:column;justify-content:center}.buv-c-full-certificate-signatures__signature:last-child{margin:0}.buv-c-full-certificate-img--secondary{max-width:150px;max-height:150px}\n</style>"])));var gce=soe((function(e){var t=e.hasCertificateDefinition,r=e.certificateImage,n=e.certificateTitle,i=e.certificateSeal,a=e.certificateSignatures,o=e.certificateSubtitle,s=e.certificateDescription,u=e.recipientName,c=e.issuerName;if(!t)return null;var l=a.map((function(e){return He(pce||(pce=_(["\n    <li class='buv-c-full-certificate-signatures__signature'>\n        <img class='buv-c-full-certificate-img--secondary' src='","' alt='"," ","'/>\n        <span class='buv-o-text-12'>","</span>\n    </li>\n  "])),e.image,_ae("text.signed"),e.jobTitle,e.jobTitle)}));return He(vce||(vce=_(["\n    ","\n    <section class='buv-c-full-certificate'>\n      <img class='buv-c-full-certificate-img' src='","' alt='","'/>\n      <div class='buv-c-full-certificate__titles'>\n        <h1 class='buv-c-full-certificate__title  buv-c-full-certificate__title--name'>","</h1>\n        <h2 class='buv-c-full-certificate__title  buv-c-full-certificate__title--main'>","</h2>\n        <h3 class='buv-c-full-certificate__title  buv-c-full-certificate__title--sub'>","</h3>\n      </div>\n      <p class='buv-c-full-certificate__description'>","</p>\n      <ul class='buv-c-full-certificate-signatures'>\n        ","\n      </ul>\n      <img class='buv-c-full-certificate-img--secondary' src='","' alt='"," ","'/>\n    </section>\n  "])),yce,r,n,u,n,o,s,l,i,_ae("text.certified"),c)}),{mapStateToProps:function(e){return{hasCertificateDefinition:!!Sae(e),certificateImage:$ae(e),certificateTitle:Pae(e),certificateSubtitle:Yae(e),certificateDescription:Zae(e),certificateSeal:eoe(e),certificateSignatures:Qae(e),recipientName:Tae(e),issuerName:Oae(e)}}});function bce(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function mce(e,t){for(var r=e.length-1;r>=0;r--)!0===t(e[r])&&e.splice(r,1)}function wce(e){throw new Error("Unhandled case for value: '"+e+"'")}window.customElements.define("buv-full-certificate-v1",gce);var xce=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,r=this.getClass(),n=this.whitespaceRegex,i=r?r.split(n):[],a=e.split(n);t=a.shift();)-1===bce(i,t)&&i.push(t);return this.getAttrs().class=i.join(" "),this},e.prototype.removeClass=function(e){for(var t,r=this.getClass(),n=this.whitespaceRegex,i=r?r.split(n):[],a=e.split(n);i.length&&(t=a.shift());){var o=bce(i,t);-1!==o&&i.splice(o,1)}return this.getAttrs().class=i.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+'="'+e[r]+'"');return t.join(" ")},e}();var _ce=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new xce({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},r=this.createCssClass(e);return r&&(t.class=r),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var r=[t],n=e.getCssClassSuffixes(),i=0,a=n.length;i<a;i++)r.push(t+"-"+n[i]);return r.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var r=t.length,n=t.location;return"smart"===n?function(e,t,r){var n,i;null==r?(r="&hellip;",i=3,n=8):(i=r.length,n=r.length);var a=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},o=function(e,t){var n=t/2,i=Math.ceil(n),a=-1*Math.floor(n),o="";return a<0&&(o=e.substr(a)),e.substr(0,i)+r+o};if(e.length<=t)return e;var s=t-i,u=function(e){var t={},r=e,n=r.match(/^([a-z]+):\/\//i);return n&&(t.scheme=n[1],r=r.substr(n[0].length)),(n=r.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=n[1],r=r.substr(n[0].length)),(n=r.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=n[1],r=r.substr(n[0].length)),(n=r.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=n[1],r=r.substr(n[0].length)),(n=r.match(/^#(.*?)$/i))&&(t.fragment=n[1]),t}(e);if(u.query){var c=u.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(u.query=u.query.substr(0,c[1].length),e=a(u))}if(e.length<=t)return e;if(u.host&&(u.host=u.host.replace(/^www\./,""),e=a(u)),e.length<=t)return e;var l="";if(u.host&&(l+=u.host),l.length>=s)return u.host.length==t?(u.host.substr(0,t-i)+r).substr(0,s+n):o(l,s).substr(0,s+n);var f="";if(u.path&&(f+="/"+u.path),u.query&&(f+="?"+u.query),f){if((l+f).length>=s)return(l+f).length==t?(l+f).substr(0,t):(l+o(f,s-l.length)).substr(0,s+n);l+=f}if(u.fragment){var h="#"+u.fragment;if((l+h).length>=s)return(l+h).length==t?(l+h).substr(0,t):(l+o(h,s-l.length)).substr(0,s+n);l+=h}if(u.scheme&&u.host){var d=u.scheme+"://";if((l+d).length<s)return(d+l).substr(0,t)}if(l.length<=t)return l;var p="";return s>0&&(p=l.substr(-1*Math.floor(s/2))),(l.substr(0,Math.ceil(s/2))+r+p).substr(0,s+n)}(e,r):"middle"===n?function(e,t,r){if(e.length<=t)return e;var n,i;null==r?(r="&hellip;",n=8,i=3):(n=r.length,i=r.length);var a=t-i,o="";return a>0&&(o=e.substr(-1*Math.floor(a/2))),(e.substr(0,Math.ceil(a/2))+r+o).substr(0,a+n)}(e,r):function(e,t,r){return function(e,t,r){var n;return e.length>t&&(null==r?(r="&hellip;",n=3):n=r.length,e=e.substring(0,t-n)+r),e}(e,t,r)}(e,r)},e}(),kce=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),Sce=function(e,t){return Sce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Sce(e,t)};function Ece(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Sce(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Ice,Ace=function(){return Ace=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ace.apply(this,arguments)},Tce=function(e){function t(t){var r=e.call(this,t)||this;return r.email="",r.email=t.email,r}return Ece(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(kce),Pce=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="",r.hashtag="",r.serviceName=t.serviceName,r.hashtag=t.hashtag,r}return Ece(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(kce),Oce=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.mention="",r.mention=t.mention,r.serviceName=t.serviceName,r}return Ece(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),r=this.getServiceName();return r&&t.push(r),t},t}(kce),Cce=function(e){function t(t){var r=e.call(this,t)||this;return r.number="",r.plusSign=!1,r.number=t.number,r.plusSign=t.plusSign,r}return Ece(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(kce),Mce=function(e){function t(t){var r=e.call(this,t)||this;return r.url="",r.urlMatchType="scheme",r.protocolUrlMatch=!1,r.protocolRelativeMatch=!1,r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.schemePrefixRegex=/^(https?:\/\/)?/i,r.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,r.protocolRelativeRegex=/^\/\//,r.protocolPrepended=!1,r.urlMatchType=t.urlMatchType,r.url=t.url,r.protocolUrlMatch=t.protocolUrlMatch,r.protocolRelativeMatch=t.protocolRelativeMatch,r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return Ece(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}},t}(kce),Nce=function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder},Rce=/[A-Za-z]/,Lce=/[\d]/,jce=/[\D]/,Dce=/\s/,Bce=/['"]/,Uce=/[\x00-\x1F\x7F]/,Fce=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,zce=Fce+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,Hce=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,Vce=zce+Hce,Kce=zce+Hce,qce="(?:["+Hce+"]{1,3}\\.){3}["+Hce+"]{1,3}",Wce="["+Kce+"](?:["+Kce+"\\-]{0,61}["+Kce+"])?",Gce=function(e){return"(?=("+Wce+"))\\"+e},Jce=function(e){return"(?:"+Gce(e)+"(?:\\."+Gce(e+1)+"){0,126}|"+qce+")"},Xce=new RegExp("["+Kce+"]"),$ce=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|||||||||abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|||||||||||||aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone||||||||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip||||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/,Yce=new RegExp("["+Kce+"!#$%&'*+/=?^_`{|}~-]"),Zce=new RegExp("^"+$ce.source+"$"),Qce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=Yce,t.strictTldRegex=Zce,t}return Ece(t,e),t.prototype.parseMatches=function(e){for(var t=this.tagBuilder,r=this.localPartCharRegex,n=this.strictTldRegex,i=[],a=e.length,o=new ele,s={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},u=0,c=0,l=o;u<a;){var f=e.charAt(u);switch(c){case 0:h(f);break;case 1:d(e.charAt(u-1),f);break;case 2:p(f);break;case 3:v(f);break;case 4:y(f);break;case 5:g(f);break;case 6:b(f);break;case 7:m(f);break;default:wce(c)}u++}return _(),i;function h(e){"m"===e?w(1):r.test(e)&&w()}function d(e,t){":"===e?r.test(t)?(c=2,l=new ele(Ace(Ace({},l),{hasMailtoPrefix:!0}))):x():s[e]===t||(r.test(t)?c=2:"."===t?c=3:"@"===t?c=4:x())}function p(e){"."===e?c=3:"@"===e?c=4:r.test(e)||x()}function v(e){"."===e||"@"===e?x():r.test(e)?c=2:x()}function y(e){Xce.test(e)?c=5:x()}function g(e){"."===e?c=7:"-"===e?c=6:Xce.test(e)||_()}function b(e){"-"===e||"."===e?_():Xce.test(e)?c=5:_()}function m(e){"."===e||"-"===e?_():Xce.test(e)?(c=5,l=new ele(Ace(Ace({},l),{hasDomainDot:!0}))):_()}function w(e){void 0===e&&(e=2),c=e,l=new ele({idx:u})}function x(){c=0,l=o}function _(){if(l.hasDomainDot){var r=e.slice(l.idx,u);/[-.]$/.test(r)&&(r=r.slice(0,-1));var a=l.hasMailtoPrefix?r.slice("mailto:".length):r;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return n.test(t)})(a)&&i.push(new Tce({tagBuilder:t,matchedText:r,offset:l.idx,email:a}))}x()}},t}(Nce),ele=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot},tle=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),r=t&&t[0].toLowerCase();return"javascript:"!==r&&"vbscript:"!==r},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&(!this.hasFullProtocolRegex.test(t)&&!this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+Fce+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),rle=(Ice=new RegExp("[/?#](?:["+Kce+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^]*["+Kce+"\\-+&@#/%=~_()|'$*\\[\\]{}])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,Jce(2),")","|","(","(//)?",/(?:www\.)/.source,Jce(6),")","|","(","(//)?",Jce(10)+"\\.",$ce.source,"(?![-"+Vce+"])",")",")","(?::[0-9]+)?","(?:"+Ice.source+")?"].join(""),"gi")),nle=new RegExp("["+Kce+"]"),ile=function(e){function t(t){var r=e.call(this,t)||this;return r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.matcherRegex=rle,r.wordCharRegExp=nle,r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return Ece(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.stripPrefix,i=this.stripTrailingSlash,a=this.decodePercentEncoding,o=this.tagBuilder,s=[],u=function(){var r=t[0],u=t[1],l=t[4],f=t[5],h=t[9],d=t.index,p=f||h,v=e.charAt(d-1);if(!tle.isValid(r,u))return"continue";if(d>0&&"@"===v)return"continue";if(d>0&&p&&c.wordCharRegExp.test(v))return"continue";if(/\?$/.test(r)&&(r=r.substr(0,r.length-1)),c.matchHasUnbalancedClosingParen(r))r=r.substr(0,r.length-1);else{var y=c.matchHasInvalidCharAfterTld(r,u);y>-1&&(r=r.substr(0,y))}var g=["http://","https://"].find((function(e){return!!u&&-1!==u.indexOf(e)}));if(g){var b=r.indexOf(g);r=r.substr(b),u=u.substr(b),d+=b}var m=u?"scheme":l?"www":"tld",w=!!u;s.push(new Mce({tagBuilder:o,matchedText:r,offset:d,urlMatchType:m,url:r,protocolUrlMatch:w,protocolRelativeMatch:!!p,stripPrefix:n,stripTrailingSlash:i,decodePercentEncoding:a}))},c=this;null!==(t=r.exec(e));)u();return s},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,r=e.charAt(e.length-1);if(")"===r)t="(";else if("]"===r)t="[";else{if("}"!==r)return!1;t="{"}for(var n=0,i=0,a=e.length-1;i<a;i++){var o=e.charAt(i);o===t?n++:o===r&&(n=Math.max(n-1,0))}return 0===n},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var r=0;t&&(r=e.indexOf(":"),e=e.slice(r));var n=new RegExp("^((.?//)?[-."+Kce+"]*[-"+Kce+"]\\.[-"+Kce+"]+)").exec(e);return null===n?-1:(r+=n[1].length,e=e.slice(n[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?r:-1)},t}(Nce),ale=new RegExp("#[_"+Kce+"]{1,139}(?![_"+Kce+"])","g"),ole=new RegExp("[^"+Kce+"]"),sle=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.matcherRegex=ale,r.nonWordCharRegex=ole,r.serviceName=t.serviceName,r}return Ece(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.nonWordCharRegex,i=this.serviceName,a=this.tagBuilder,o=[];null!==(t=r.exec(e));){var s=t.index,u=e.charAt(s-1);if(0===s||n.test(u)){var c=t[0],l=t[0].slice(1);o.push(new Pce({tagBuilder:a,matchedText:c,offset:s,serviceName:i,hashtag:l}))}}return o},t}(Nce),ule=new RegExp(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source+"|"+/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"g"),cle=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=ule,t}return Ece(t,e),t.prototype.parseMatches=function(e){for(var t,r=this.matcherRegex,n=this.tagBuilder,i=[];null!==(t=r.exec(e));){var a=t[0],o=a.replace(/[^0-9,;#]/g,""),s=!(!t[1]&&!t[2]),u=0==t.index?"":e.substr(t.index-1,1),c=e.substr(t.index+a.length,1),l=!u.match(/\d/)&&!c.match(/\d/);this.testMatch(t[3])&&this.testMatch(a)&&l&&i.push(new Cce({tagBuilder:n,matchedText:a,offset:t.index,number:o,plusSign:s}))}return i},t.prototype.testMatch=function(e){return jce.test(e)},t}(Nce),lle=new RegExp("@[_"+Kce+"]{1,50}(?![_"+Kce+"])","g"),fle=new RegExp("@[_."+Kce+"]{1,30}(?![_"+Kce+"])","g"),hle=new RegExp("@[-_."+Kce+"]{1,50}(?![-_"+Kce+"])","g"),dle=new RegExp("[^"+Kce+"]"),ple=function(e){function t(t){var r=e.call(this,t)||this;return r.serviceName="twitter",r.matcherRegexes={twitter:lle,instagram:fle,soundcloud:hle},r.nonWordCharRegex=dle,r.serviceName=t.serviceName,r}return Ece(t,e),t.prototype.parseMatches=function(e){var t,r=this.serviceName,n=this.matcherRegexes[this.serviceName],i=this.nonWordCharRegex,a=this.tagBuilder,o=[];if(!n)return o;for(;null!==(t=n.exec(e));){var s=t.index,u=e.charAt(s-1);if(0===s||i.test(u)){var c=t[0].replace(/\.+$/g,""),l=c.slice(1);o.push(new Oce({tagBuilder:a,matchedText:c,offset:s,serviceName:r,mention:l}))}}return o},t}(Nce);function vle(e,t){for(var r,n=t.onOpenTag,i=t.onCloseTag,a=t.onText,o=t.onComment,s=t.onDoctype,u=new yle,c=0,l=e.length,f=0,h=0,d=u;c<l;){var p=e.charAt(c);switch(f){case 0:v(p);break;case 1:y(p);break;case 2:b(p);break;case 3:g(p);break;case 4:m(p);break;case 5:w(p);break;case 6:x(p);break;case 7:_(p);break;case 8:k(p);break;case 9:S(p);break;case 10:E(p);break;case 11:I(p);break;case 12:A(p);break;case 13:T();break;case 14:P(p);break;case 15:O(p);break;case 16:C(p);break;case 17:M(p);break;case 18:N(p);break;case 19:R(p);break;case 20:L(p);break;default:wce(f)}c++}function v(e){"<"===e&&D()}function y(e){"!"===e?f=13:"/"===e?(f=2,d=new yle(Ace(Ace({},d),{isClosing:!0}))):"<"===e?D():Rce.test(e)?(f=3,d=new yle(Ace(Ace({},d),{isOpening:!0}))):(f=0,d=u)}function g(e){Dce.test(e)?(d=new yle(Ace(Ace({},d),{name:U()})),f=4):"<"===e?D():"/"===e?(d=new yle(Ace(Ace({},d),{name:U()})),f=12):">"===e?(d=new yle(Ace(Ace({},d),{name:U()})),B()):Rce.test(e)||Lce.test(e)||":"===e||j()}function b(e){">"===e?j():Rce.test(e)?f=3:j()}function m(e){Dce.test(e)||("/"===e?f=12:">"===e?B():"<"===e?D():"="===e||Bce.test(e)||Uce.test(e)?j():f=5)}function w(e){Dce.test(e)?f=6:"/"===e?f=12:"="===e?f=7:">"===e?B():"<"===e?D():Bce.test(e)&&j()}function x(e){Dce.test(e)||("/"===e?f=12:"="===e?f=7:">"===e?B():"<"===e?D():Bce.test(e)?j():f=5)}function _(e){Dce.test(e)||('"'===e?f=8:"'"===e?f=9:/[>=`]/.test(e)?j():"<"===e?D():f=10)}function k(e){'"'===e&&(f=11)}function S(e){"'"===e&&(f=11)}function E(e){Dce.test(e)?f=4:">"===e?B():"<"===e&&D()}function I(e){Dce.test(e)?f=4:"/"===e?f=12:">"===e?B():"<"===e?D():(f=4,c--)}function A(e){">"===e?(d=new yle(Ace(Ace({},d),{isClosing:!0})),B()):f=4}function T(t){"--"===e.substr(c,2)?(c+=2,d=new yle(Ace(Ace({},d),{type:"comment"})),f=14):"DOCTYPE"===e.substr(c,7).toUpperCase()?(c+=7,d=new yle(Ace(Ace({},d),{type:"doctype"})),f=20):j()}function P(e){"-"===e?f=15:">"===e?j():f=16}function O(e){"-"===e?f=18:">"===e?j():f=16}function C(e){"-"===e&&(f=17)}function M(e){f="-"===e?18:16}function N(e){">"===e?B():"!"===e?f=19:"-"===e||(f=16)}function R(e){"-"===e?f=17:">"===e?B():f=16}function L(e){">"===e?B():"<"===e&&D()}function j(){f=0,d=u}function D(){f=1,d=new yle({idx:c})}function B(){var t=e.slice(h,d.idx);t&&a(t,h),"comment"===d.type?o(d.idx):"doctype"===d.type?s(d.idx):(d.isOpening&&n(d.name,d.idx),d.isClosing&&i(d.name,d.idx)),j(),h=c+1}function U(){var t=d.idx+(d.isClosing?2:1);return e.slice(t,c).toLowerCase()}h<c&&(r=e.slice(h,c),a(r,h),h=c+1)}var yle=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},gle=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var r=this.mention;if(!1!==r&&"twitter"!==r&&"instagram"!==r&&"soundcloud"!==r)throw new Error("invalid `mention` cfg - see docs");var n=this.hashtag;if(!1!==n&&"twitter"!==n&&"facebook"!==n&&"instagram"!==n)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,r){return new e(r).link(t)},e.parse=function(t,r){return new e(r).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&void 0===e[r]&&(e[r]=t[r]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,r=["a","style","script"],n=0,i=[];return vle(e,{onOpenTag:function(e){r.indexOf(e)>=0&&n++},onText:function(e,r){if(0===n){var a=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var r,n=[],i=0;r=t.exec(e);)n.push(e.substring(i,r.index)),n.push(r[0]),i=r.index+r[0].length;return n.push(e.substring(i)),n}(e,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),o=r;a.forEach((function(e,r){if(r%2==0){var n=t.parseText(e,o);i.push.apply(i,n)}o+=e.length}))}},onCloseTag:function(e){r.indexOf(e)>=0&&(n=Math.max(n-1,0))},onComment:function(e){},onDoctype:function(e){}}),i=this.compactMatches(i),i=this.removeUnwantedMatches(i)},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;t++){var r=e[t],n=r.getOffset(),i=r.getMatchedText().length,a=n+i;if(t+1<e.length){if(e[t+1].getOffset()===n){var o=e[t+1].getMatchedText().length>i?t:t+1;e.splice(o,1);continue}e[t+1].getOffset()<a&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||mce(e,(function(e){return"hashtag"===e.getType()})),this.email||mce(e,(function(e){return"email"===e.getType()})),this.phone||mce(e,(function(e){return"phone"===e.getType()})),this.mention||mce(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||mce(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||mce(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||mce(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var r=this.getMatchers(),n=[],i=0,a=r.length;i<a;i++){for(var o=r[i].parseMatches(e),s=0,u=o.length;s<u;s++)o[s].setOffset(t+o[s].getOffset());n.push.apply(n,o)}return n},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),r=[],n=0,i=0,a=t.length;i<a;i++){var o=t[i];r.push(e.substring(n,o.getOffset())),r.push(this.createMatchReturnVal(o)),n=o.getOffset()+o.getMatchedText().length}return r.push(e.substring(n)),r.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof xce?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new sle({tagBuilder:e,serviceName:this.hashtag}),new Qce({tagBuilder:e}),new cle({tagBuilder:e}),new ple({tagBuilder:e,serviceName:this.mention}),new ile({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new _ce({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.14.3",e.AnchorTagBuilder=_ce,e.HtmlTag=xce,e.matcher={Email:Qce,Hashtag:sle,Matcher:Nce,Mention:ple,Phone:cle,Url:ile},e.match={Email:Tce,Hashtag:Pce,Match:kce,Mention:Oce,Phone:Cce,Url:Mce},e}();function ble(e){return gle.link(e,{stripPrefix:!1,email:!1,phone:!1})}const mle=soe((function({clickableUrls:e,hasCertificateDefinition:t,displayHTML:r}){return t?He`
    ${ace}
    ${r?function(e,t){const r=["buv-c-full-certificate","qa-fullscreen-certificate"];oie.certificates.displayHtmlHasNoWidthConstraint(e)&&r.push("buv-c-certificate--fixed-width");const n=t?ble(e):e;return He`<section class$=${r.join(" ")}>${ice(n)}</section>`}(r,e):He`<buv-full-certificate-v1></buv-full-certificate-v1>`}
    <div class='buv-c-full-certificate__details'>
      <buv-certificate-details class='buv-c-full-certificate__details-list'></buv-certificate-details>
      <buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>
        <buv-verify-button type='link'>${_ae("text.verifyAgain")}</buv-verify-button>
      </buv-final-verification-step>
    </div>
  `:null}),{mapStateToProps:e=>({hasCertificateDefinition:!!Sae(e),displayHTML:Mae(e),clickableUrls:Eoe(e)})});var wle;window.customElements.define("buv-full-certificate",mle);var xle=He(wle||(wle=_(["<style>.buv-o-text-11{font-size:11px}.buv-o-text-12{font-size:12px}.buv-o-text-13{font-size:13px}.buv-o-text-15{font-size:15px;line-height:20px}.buv-o-text-bold{font-weight:bold}.buv-c-certificate--fixed-width{max-width:460px;min-width:0;margin:0 auto}.buv-c-fullscreen-certificate{z-index:200;position:fixed;top:0;left:0;background-color:#fff;width:100vw;height:100vh;overflow:auto;box-sizing:border-box}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate{padding-top:170px}}.buv-c-fullscreen-certificate-header{box-shadow:0 1px 5px rgba(0,0,0,0.15);width:100%;background-color:#fff}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate-header{position:fixed;top:0;z-index:10}}.buv-c-fullscreen-certificate-header__content{max-width:1440px;margin:0 auto;padding:20px;display:flex;align-items:center;position:relative;box-sizing:border-box}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate-header__content{flex-direction:column;justify-content:left;align-items:unset}}.buv-c-fullscreen-certificate__title{margin:0 30px 0 0}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__title{margin-bottom:10px}}.buv-c-fullscreen-certificate__close{top:27px;right:20px}.buv-c-fullscreen-certificate__content{padding:20px;display:flex;max-width:1440px;margin:20px auto 0}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__content{flex-direction:column-reverse;margin-top:0}}.buv-c-fullscreen-certificate__details{display:flex;flex-grow:1;flex-direction:column;max-width:280px;min-width:220px;margin-right:20px}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__details{max-width:100vw;margin:20px 0 0}}.buv-c-fullscreen-certificate__verification-status{margin-bottom:15px}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__verification-status{position:absolute;top:90px;width:calc(100% - 40px);margin:0}}.buv-c-fullscreen-certificate__details-item{margin-top:5px}.buv-c-fullscreen-certificate__separator{margin-top:30px;padding-top:30px;border-top:1px solid #f1f2f3}.buv-c-fullscreen-certificate__certificate{box-shadow:0 1px 5px rgba(0,0,0,0.15);padding:20px;background-color:#fff;font-family:serif;text-align:center;color:#49555f;font-size:12px;word-wrap:break-word;min-height:calc(100vh - 145px);box-sizing:border-box;margin:0 auto;min-width:600px;line-height:initial}@media only screen and (max-width: 750px){.buv-c-fullscreen-certificate__certificate{min-width:unset;width:100%;overflow:auto}}.buv-c-fullscreen-certificate__verify-other{margin-top:20px}\n</style>"])));const _le=soe((function({clickableUrls:e,hasCertificateDefinition:t,recipientName:r,displayHTML:n,onClose:i}){if(!t)return null;const a=["buv-c-fullscreen-certificate__certificate","qa-fullscreen-certificate"];return n&&oie.certificates.displayHtmlHasNoWidthConstraint(n)&&a.push("buv-c-certificate--fixed-width"),He`
    ${xle}
    <section class='buv-c-fullscreen-certificate'>
      <header class='buv-c-fullscreen-certificate-header'>
        <div class='buv-c-fullscreen-certificate-header__content'>
          <h1 class='buv-c-fullscreen-certificate__title'>${r}</h1>
          ${dse({onClick:i,className:"buv-c-fullscreen-certificate__close"})}
        </div>  
      </header>
      <section class='buv-c-fullscreen-certificate__content'>
        <div class='buv-c-fullscreen-certificate__details'>
          <buv-final-verification-step class='buv-c-fullscreen-certificate__verification-status' isVisible hideLink standalone>
            <buv-verify-button type='link'>${_ae("text.verifyAgain")}</buv-verify-button>
          </buv-final-verification-step>
          <buv-certificate-details direction='column' hideRecipientName></buv-certificate-details>
          <buv-metadata class='buv-c-fullscreen-certificate__details-item  buv-c-fullscreen-certificate__separator' display='plaintext'></buv-metadata>
          <buv-download-link class='buv-c-fullscreen-certificate__details-item' display='plaintext'></buv-download-link>
          <buv-social-share class='buv-c-fullscreen-certificate__details-item' display='plaintext'></buv-social-share>
          ${sue({className:"buv-c-fullscreen-certificate__separator",showMotto:!0})}
          <buv-verify-other-certificate class='buv-c-fullscreen-certificate__verify-other'></buv-verify-other-certificate>
        </div>
        <div class$=${a.join(" ")}>
          ${n?function(e,t){const r=t?ble(e):e;return He`${ice(r)}`}(n,e):He`<buv-full-certificate-v1></buv-full-certificate-v1>`}
        </div>
      </section>
    </section>
  `}),{mapDispatchToProps:{onClose:qse},mapStateToProps:e=>({recipientName:Tae(e),hasCertificateDefinition:!!Sae(e),displayHTML:Mae(e),clickableUrls:Eoe(e)})});var kle,Sle,Ele,Ile,Ale;window.customElements.define("buv-fullscreen-certificate",_le);var Tle=function(e){c(n,e);var r=m(n);function n(){var e;return a(this,n),(e=r.call(this)).hasRenderedOnce=!1,e}return s(n,[{key:"_firstRendered",value:function(){this.onLoad(this._props),this.hasRenderedOnce=!0}},{key:"_propertiesChanged",value:function(e,t,r){this._props=e,x(l(n.prototype),"_propertiesChanged",this).call(this,e,t,r),t.src!==r.src&&this.hasRenderedOnce&&this.onLoad({src:t.src}),t.explorerAPIs&&!r.explorerAPIs&&this.onLoad({explorerAPIs:t.explorerAPIs})}},{key:"renderCertificate",value:function(e){switch(e.displayMode){case roe:return He(kle||(kle=_(["<buv-full-certificate></buv-full-certificate>"])));case"fullscreen":return He(Sle||(Sle=_(["<buv-fullscreen-certificate></buv-fullscreen-certificate>"])));default:return He(Ele||(Ele=_(["<buv-card-certificate></buv-card-certificate>"])))}}},{key:"_render",value:function(e){var t=e.hasCertificate?"buv-c-verifier-body  buv-c-verifier-body--padded":"";return He(Ile||(Ile=_(["\n      ","\n      <section class='buv-c-verifier-main'>\n        <buv-drag-and-drop>\n          <div class='buv-c-verifier-layout'>\n            <section class$='","'>\n              ","\n              <buv-certificate-input></buv-certificate-input>\n              <buv-action-menu></buv-action-menu>\n              ","\n              <buv-verification-modal></buv-verification-modal>\n            </section>\n            <buv-footer interactive></buv-footer>\n          </div>\n        </buv-drag-and-drop>\n      </section>\n    "])),Que,t,_ue(e.errorMessage,!0),this.renderCertificate(e))}}],[{key:"properties",get:function(){return t({onLoad:Function,errorMessage:String,hasCertificate:Boolean},joe)}}]),n}(Ge);function Ple(e){return e.errorMessage}window.customElements.define("buv-raw",Tle);const Ole={onLoad:function(e={}){return function(t){const r=function(e){return Object.keys(joe).reduce((function(t,r){return e[r]&&(t[r]=e[r]),t}),{})}(e),{src:n,locale:i}=r;t({type:It,payload:{options:r}}),oie.certificates.isPathToCertificateValidURI(n)?t(Coe(n)):function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(n)&&t(Ooe(JSON.parse(n))),Boe(i)}}},Cle=soe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return He(Ale||(Ale=_(["<buv-raw\n          src='","'\n          onLoad='","'\n          errorMessage='","'\n          hasCertificate='","'\n          disableAutoVerify='","'\n          disableVerify='","'\n          allowDownload='","'\n          allowSocialShare='","'\n          displayMode='","'\n          showMetadata='","'\n          clickableUrls='","'\n          theme='","'\n          locale='","'\n          explorerAPIs='","'\n          didResolverUrl='","'\n        ></buv-raw>"])),e.src,e.onLoad,e.errorMessage,e.hasCertificate,e["disable-auto-verify"],e["disable-verify"],e["allow-download"],e["allow-social-share"],e["display-mode"],e["show-metadata"],e["clickable-urls"],e.theme,e.locale,e.explorerAPIs,e["did-resolver-url"])}),{mapDispatchToProps:Ole,mapStateToProps:e=>({errorMessage:Ple(e),hasCertificate:!!Sae(e)}),ownProps:{...Tle.properties,...Loe}});window.customElements.define("blockcerts-verifier",Cle)}();
